System.register([],(function(e,t){"use strict";return{execute:function(){e({A:void 0,B:void 0,C:void 0,E:void 0,F:void 0,H:void 0,I:void 0,J:void 0,K:void 0,L:void 0,M:void 0,N:void 0,Q:void 0,R:void 0,S:void 0,U:void 0,a:void 0,a$:function(e,t,n=Bo.R32F,i=0,o=e.byteLength-i,a=0,r){r||(r=new DataView(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)));const s=xr[n];a||(a=s.size);const c=`set${Gx(s)}`,l=`get${Gx(s)}`,_=s.size/s.count,u=Math.floor(o/a),f=Si.isLittleEndian;for(let n=0;n<u;++n){const o=i+a*n;for(let n=0;n<s.count;++n){const i=o+_*n,a=e[l](i,f);r[c](i,t(a,n,e),f)}}return r},aH:void 0,aL:wr,aM:Tr,aN:Pr,aO:Rr,aP:Nr,bB:function(){},bC:tn,bD:$t,bI:vc,bL:dc,bO:function(e,t,n=Bo.R32F,i=0,o=0){const a=xr[n];o||(o=a.size);const r=`set${Gx(a)}`,s=a.size/a.count,c=Math.floor(t.length/a.count),l=Si.isLittleEndian;for(let n=0;n<c;++n){const c=i+o*n;for(let i=0;i<a.count;++i){const o=c+s*i;e[r](o,t[a.count*n+i],l)}}},bP:CS,bR:Be,bS:function(e){return Oc(Fc({formerlySerializedAs:e}))},bU:rl,bc:MI,bd:function(e,t){return e instanceof t},bl:R,bm:x,bn:y,bq:void 0,br:void 0,bt:P,bu:g,bv:function(e,t=Bo.R32F,n=0,i=e.byteLength-n,o=0,a=[]){const r=xr[t];o||(o=r.size);const s=`get${Gx(r)}`,c=r.size/r.count,l=Math.floor(i/o),_=Si.isLittleEndian;for(let t=0;t<l;++t){const i=n+o*t;for(let n=0;n<r.count;++n){const o=i+c*n;a[r.count*t+n]=e[s](o,_)}}return a},bx:function(){},c:void 0,c2:void 0,c5:void 0,c6:void 0,c9:void 0,cE:void 0,cF:void 0,cK:se,cL:Oe,cN:Ii,cO:ge,cT:void 0,cW:Ge,cj:bn,cl:zm,cn:function(e,t,n){for(ii.identity(n);e!==t;)ii.fromRTS(NM,e.rotation,e.position,e.scale),ii.multiply(n,NM,n),e=e.parent;return n},cq:void 0,cs:wM,ct:EM,cu:SM,d:void 0,d$:HM,d0:yn,d7:void 0,d8:void 0,dD:Cn,dG:function(){const e=new Mf;return e.assignSorted([[0,{interpolationMode:hl.CUBIC,value:1}],[1,{interpolationMode:hl.CUBIC,value:1}]]),e},dH:void 0,dI:Nn,dJ:Tn,dL:En,dM:wn,dN:Jt,dP:Dn,dR:iu,dT:vn,dV:qt,dY:zn,dZ:q,d_:On,dc:et,dd:ve,de:w,df:void 0,dm:xn,dn:Ke,dp:void 0,dt:An,dv:void 0,e1:function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e},e2:Y,e4:Oc,e6:tt,e7:nt,e8:O,eA:fi,eB:ti,eE:mi,eF:vi,eG:Bn,eI:gn,eJ:Pn,eK:In,eL:Rn,eM:Mn,eN:Ln,eQ:Ue,eW:function(e){e>0&&(un=e)},eX:xx,eY:bx,e_:Z_,eb:Oi,ee:void 0,ef:v,eg:ri,em:Ut,eq:Rt,et:Re,ey:_i,ez:Wn,f:void 0,fV:kM,fW:jM,fX:GM,fZ:Zf,f_:oh,fd:A,fe:D,ff:z,fg:L,fh:void 0,fu:uE,g:void 0,g2:fN,g3:hN,g5:function(e,t){let n=e,i="";for(;null!==n&&n!==t;)i=`${n.name}/${i}`,n=n.parent;return i.slice(0,-1)},g6:void 0,g7:void 0,g8:void 0,ga:void 0,gd:YM,h:void 0,i:void 0,j:void 0,k:void 0,l:void 0,m:jr,n:void 0,o:void 0,p:void 0,q:void 0,r:void 0,s:void 0,t:void 0,u:void 0,v:void 0,w:void 0,x:void 0,y:void 0,z:void 0});const n=e("bs",!1),i=e("dy",!1),o=e("ds",!1),a=e("dq",!1),r=e("dr",!0),s="undefined"==typeof window?global:window,c=e("a_",{_global:s});c.internal={},s.CC_BUILD=!0,s.CC_TEST=!1,s.CC_EDITOR=i,s.CC_PREVIEW=!1,s.CC_DEV=!1,s.CC_DEBUG=!1,s.CC_JSB=r,s.CC_BYTEDANCE=!1,s.CC_WECHAT=n,s.CC_ALIPAY=!1,s.CC_XIAOMI=!1,s.CC_BAIDU=!1,s.CC_COCOSPLAY=!1,s.CC_HUAWEI=!1,s.CC_OPPO=!1,s.CC_VIVO=!1,s.CC_MINIGAME=a,s.CC_RUNTIME_BASED=o,s.CC_SUPPORT_JIT=!0;const l=e("ej","3.3.0");s.CocosEngine=c.ENGINE_VERSION=l,s.cc=c;let _=null,u=console.log.bind(console),f=u,h=u,p=(e,t,...n)=>{e||console.log(`ASSERT: ${d(t,...n)}`)},m=u;function d(e,...t){return c.js.formatStr.apply(null,[e].concat(t))}function v(e,...t){return u(e,...t)}function g(e,...t){return f(e,...t)}function y(e,...t){return h(e,...t)}function A(e,t,...n){return p(e,t,...n)}function x(...e){return m(...e)}function b(e){if(u=f=h=p=m=()=>{},e!==M.NONE){if(e>M.ERROR){const t=e=>{if(c.game.canvas){if(!_){const e=document.createElement("Div");e.setAttribute("id","logInfoDiv"),e.setAttribute("width","200"),e.setAttribute("height",c.game.canvas.height);const t=e.style;t.zIndex="99999",t.position="absolute",t.top=t.left="0",_=document.createElement("textarea"),_.setAttribute("rows","20"),_.setAttribute("cols","30"),_.setAttribute("disabled","true");const n=_.style;n.backgroundColor="transparent",n.borderBottom="1px solid #cccccc",n.borderTopWidth=n.borderLeftWidth=n.borderRightWidth="0px",n.borderTopStyle=n.borderLeftStyle=n.borderRightStyle="none",n.padding="0px",n.margin="0px",e.appendChild(_),c.game.canvas.parentNode.appendChild(e)}_.value=`${_.value+e}\r\n`,_.scrollTop=_.scrollHeight}};h=(e,...n)=>{t(`ERROR :  ${d(e,...n)}`)},p=(e,n,...i)=>{e||t(`ASSERT: ${d(n,...i)}`)},e!==M.ERROR_FOR_WEB_PAGE&&(f=(e,...n)=>{t(`WARN :  ${d(e,...n)}`)}),e===M.INFO_FOR_WEB_PAGE&&(u=(e,...n)=>{t(d(e,...n))})}else console&&(console.error||(console.error=console.log),console.warn||(console.warn=console.log),h=console.error.bind?console.error.bind(console):console.error,p=(e,t,...n)=>{if(!e){const e=d(t,...n);throw new Error(e)}});if(e!==M.ERROR&&(f=console.warn.bind?console.warn.bind(console):console.warn),e===M.INFO&&(u="JavaScriptCore"===scriptEngineType?(e,...t)=>console.log.apply(console,[e,...t]):console.log),e<=M.VERBOSE&&"function"==typeof console.debug){const e=console.debug.bind(console);m=(...t)=>e(...t)}}}function C(e){{const t=e.stack;return void y(t?`${e}\n${t}`:e)}}function S(e){return(t,...n)=>{const i=`${e} ${t}, please go to https://github.com/cocos-creator/engine/blob/3d/EngineErrorMap.md#${t} to see details.`;return 0===n.length?i:`${i} Arguments: ${n.join(", ")}`}}const E=S("Log");function w(e,...t){v(E(e,...t))}const T=S("Warning");function P(e,...t){g(T(e,...t))}const I=S("Error");function R(e,...t){y(I(e,...t))}const N=S("Assert");function D(e,t,...n){e||A(!1,N(t,...n))}let M;function O(e,...t){return I(e,...t)}function z(){return!!c.profiler&&c.profiler.isShowingStats()}function L(e){c.profiler&&(e?c.profiler.showStats():c.profiler.hideStats(),c.game.config.showFPS=!!e)}!function(e){e[e.NONE=0]="NONE",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.INFO_FOR_WEB_PAGE=5]="INFO_FOR_WEB_PAGE",e[e.WARN_FOR_WEB_PAGE=6]="WARN_FOR_WEB_PAGE",e[e.ERROR_FOR_WEB_PAGE=7]="ERROR_FOR_WEB_PAGE"}(M||(M=e("fh",{})));var F=Object.freeze({__proto__:null,log:v,warn:g,error:y,assert:A,debug:x,_resetDebugSetting:b,_throw:C,logID:w,warnID:P,errorID:R,assertID:D,get DebugMode(){return M},getError:O,isDisplayStats:z,setDisplayStats:L});let U,B,k,j,G;!function(e){e.UNKNOWN="unknown",e.WECHAT="wechat",e.ANDROID="androidbrowser",e.IE="ie",e.EDGE="edge",e.QQ="qqbrowser",e.MOBILE_QQ="mqqbrowser",e.UC="ucbrowser",e.UCBS="ucbs",e.BROWSER_360="360browser",e.BAIDU_APP="baiduboxapp",e.BAIDU="baidubrowser",e.MAXTHON="maxthon",e.OPERA="opera",e.OUPENG="oupeng",e.MIUI="miuibrowser",e.FIREFOX="firefox",e.SAFARI="safari",e.CHROME="chrome",e.LIEBAO="liebao",e.QZONE="qzone",e.SOUGOU="sogou",e.HUAWEI="huawei"}(U||(U=e("br",{}))),function(e){e.UNKNOWN="unknown",e.ENGLISH="en",e.CHINESE="zh",e.FRENCH="fr",e.ITALIAN="it",e.GERMAN="de",e.SPANISH="es",e.DUTCH="du",e.RUSSIAN="ru",e.KOREAN="ko",e.JAPANESE="ja",e.HUNGARIAN="hu",e.PORTUGUESE="pt",e.ARABIC="ar",e.NORWEGIAN="no",e.POLISH="pl",e.TURKISH="tr",e.UKRAINIAN="uk",e.ROMANIAN="ro",e.BULGARIAN="bg"}(B||(B={})),function(e){e[e.NONE=0]="NONE",e[e.LAN=1]="LAN",e[e.WWAN=2]="WWAN"}(k||(k={})),function(e){e.UNKNOWN="Unknown",e.IOS="iOS",e.ANDROID="Android",e.WINDOWS="Windows",e.LINUX="Linux",e.OSX="OS X",e.OHOS="OHOS"}(j||(j=e("bq",{}))),function(e){e.UNKNOWN="UNKNOWN",e.EDITOR_PAGE="EDITOR_PAGE",e.EDITOR_CORE="EDITOR_CORE",e.MOBILE_BROWSER="MOBILE_BROWSER",e.DESKTOP_BROWSER="DESKTOP_BROWSER",e.WIN32="WIN32",e.ANDROID="ANDROID",e.IOS="IOS",e.MACOS="MACOS",e.OHOS="OHOS",e.WECHAT_GAME="WECHAT_GAME",e.BAIDU_MINI_GAME="BAIDU_MINI_GAME",e.XIAOMI_QUICK_GAME="XIAOMI_QUICK_GAME",e.ALIPAY_MINI_GAME="ALIPAY_MINI_GAME",e.BYTEDANCE_MINI_GAME="BYTEDANCE_MINI_GAME",e.OPPO_MINI_GAME="OPPO_MINI_GAME",e.VIVO_MINI_GAME="VIVO_MINI_GAME",e.HUAWEI_QUICK_GAME="HUAWEI_QUICK_GAME",e.COCOSPLAY="COCOSPLAY",e.LINKSURE_MINI_GAME="LINKSURE_MINI_GAME",e.QTT_MINI_GAME="QTT_MINI_GAME"}(G||(G=e("ee",{})));class V{constructor(e,t){this._ctor=void 0,this._elementsPerBatch=void 0,this._nextAvail=void 0,this._freepool=[],this._ctor=e,this._elementsPerBatch=Math.max(t,1),this._nextAvail=this._elementsPerBatch-1;for(let t=0;t<this._elementsPerBatch;++t)this._freepool.push(e())}alloc(){if(this._nextAvail<0){const e=this._elementsPerBatch;for(let t=0;t<e;t++)this._freepool.push(this._ctor());this._nextAvail=e-1}const e=this._freepool[this._nextAvail--];return this._freepool.length--,e}free(e){this._freepool.push(e),this._nextAvail++}freeArray(e){Array.prototype.push.apply(this._freepool,e),this._nextAvail+=e.length}destroy(e){if(e)for(let t=0;t<=this._nextAvail;t++)e(this._freepool[t]);this._freepool.length=0,this._nextAvail=-1}}e("P",V);class H{constructor(e){this.i=0,this.array=e}get length(){return this.array.length}set length(e){this.array.length=e,this.i>=e&&(this.i=e-1)}remove(e){const t=this.array.indexOf(e);t>=0&&this.removeAt(t)}removeAt(e){this.array.splice(e,1),e<=this.i&&--this.i}fastRemove(e){const t=this.array.indexOf(e);t>=0&&this.fastRemoveAt(t)}fastRemoveAt(e){const t=this.array;t[e]=t[t.length-1],--t.length,e<=this.i&&--this.i}push(e){this.array.push(e)}}function W(e,t){e.splice(t,1)}function q(e,t){const n=e.length;t<0||t>=n||(e[t]=e[n-1],e.length=n-1)}function Y(e,t){const n=e.indexOf(t);return n>=0&&(W(e,n),!0)}function X(e,t){return e.indexOf(t)>=0}var Q=Object.freeze({__proto__:null,removeAt:W,fastRemoveAt:q,remove:Y,fastRemove:function(e,t){const n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],--e.length)},removeIf:function(e,t){const n=e.findIndex(t);if(n>=0){const t=e[n];return W(e,n),t}},verifyType:function(e,t){if(e&&e.length>0)for(const n of e)if(!(n instanceof t))return w(1300),!1;return!0},removeArray:function(e,t){for(let n=0,i=t.length;n<i;n++)Y(e,t[n])},appendObjectsAt:function(e,t,n){return e.splice.apply(e,[n,0,...t]),e},contains:X,copy:function(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i+=1)n[i]=e[i];return n},MutableForwardIterator:H});class K{constructor(e){this.id=void 0,this.prefix=void 0,this.id=0|998*Math.random(),this.prefix=e?e+".":""}getNewId(){return this.prefix+ ++this.id}}K.global=new K("global");const Z=new K("TmpCId."),J="undefined"==typeof Symbol?"__aliases__":Symbol("[[Aliases]]"),$="__cid__";function ee(e){return"number"==typeof e||e instanceof Number}function te(e){return"string"==typeof e||e instanceof String}function ne(e){for(const t in e)return!1;return!0}const ie=(()=>{const e={value:void 0,enumerable:!1,writable:!1,configurable:!0};return(t,n,i,o,a)=>{e.value=i,e.writable=o,e.enumerable=a,Object.defineProperty(t,n,e),e.value=void 0}})(),oe=(()=>{const e={get:void 0,set:void 0,enumerable:!1};return(t,n,i,o,a=!1,r=!1)=>{"boolean"==typeof o&&(a=o,o=void 0),e.get=i,e.set=o,e.enumerable=a,e.configurable=r,Object.defineProperty(t,n,e),e.get=void 0,e.set=void 0}})(),ae=(()=>{const e={get:void 0,enumerable:!1,configurable:!1};return(t,n,i,o,a)=>{e.get=i,e.enumerable=o,e.configurable=a,Object.defineProperty(t,n,e),e.get=void 0}})(),re=(()=>{const e={set:void 0,enumerable:!1,configurable:!1};return(t,n,i,o,a)=>{e.set=i,e.enumerable=o,e.configurable=a,Object.defineProperty(t,n,e),e.set=void 0}})();function se(e){const t=Object.create(null);if(e){const e=".",n="/";t[e]=1,t[n]=1,delete t[e],delete t[n]}return t}function ce(e){if("function"==typeof e){const t=e.prototype;if(t&&t.hasOwnProperty("__classname__")&&t.__classname__)return t.__classname__;let n="";if(e.name&&(n=e.name),e.toString){let t;const i=e.toString();t="["===i.charAt(0)?i.match(/\[\w+\s*(\w+)\]/):i.match(/function\s*(\w+)/),t&&2===t.length&&(n=t[1])}return"Object"!==n?n:""}return e&&e.constructor?ce(e.constructor):""}function le(e,t,n,i){const o=/([^.]+)$/,a=o.exec(t)[0],r=o.exec(n)[0];function s(){return this[r]}i?oe(e,a,s,(function(e){this[r]=e})):ae(e,a,s)}function _e(e,t,n,i){for(const o in n)le(e,`${t}.${o}`,n[o],i)}const ue=/(%d)|(%s)/,fe=/%s/;function he(e,...t){if(0===arguments.length)return"";if(0===t.length)return`${e}`;const n="string"==typeof e&&ue.test(e);if(n)for(const n of t){const t="number"==typeof n?ue:fe;if(t.test(e)){const i=`${n}`;e=e.replace(t,i)}else e+=` ${n}`}else for(const n of t)e+=` ${n}`;return e}function pe(){const e=arguments.length-1,t=new Array(e);for(let n=0;n<e;++n)t[n]=arguments[n+1];return t}function me(e,t){for(;e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n)return n;e=Object.getPrototypeOf(e)}return null}function de(e,t,n){const i=me(t,e);i&&Object.defineProperty(n,e,i)}function ve(e,...t){e=e||{};for(const n of t)if(n){if("object"!=typeof n){R(5402,n);continue}for(const t in n)t in e||de(t,n,e)}return e}function ge(e,...t){e=e||{};for(const n of t)if(n){if("object"!=typeof n){R(5403,n);continue}for(const t in n)de(t,n,e)}return e}function ye(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),e}function Ae(e){const t=e.prototype,n=t&&Object.getPrototypeOf(t);return n&&n.constructor}function xe(e,t){if(e&&t){if("function"!=typeof e)return!1;if("function"!=typeof t)return!1;if(e===t)return!0;for(;;){if(!(e=Ae(e)))return!1;if(e===t)return!0}}return!1}function be(e){for(const t of Object.keys(e))delete e[t]}function Ce(e){return"string"!=typeof e||e.startsWith(Z.prefix)}const Se=se(!0),Ee=se(!0);function we(e,t){return function(n,i){if(i.prototype.hasOwnProperty(e)&&delete t[i.prototype[e]],ie(i.prototype,e,n),n){const o=t[n];o&&o!==i?y(`A Class already exists with the same ${e} : "${n}".`):t[n]=i}}}const Te=we("__cid__",Se),Pe=we("__classname__",Ee);function Ie(e,t){if(Pe(e,t),!t.prototype.hasOwnProperty($)){const n=e||Z.getNewId();n&&Te(n,t)}}function Re(e,t){const n=Ee[t],i=Se[t];let o=!0;if(n&&n!==e&&(y(`"${t}" has already been set as name or alias of another class.`),o=!1),i&&i!==e&&(y(`"${t}" has already been set as id or alias of another class.`),o=!1),o){let n=e[J];n||(n=[],e[J]=n),n.push(t),Ee[t]=e,Se[t]=e}}function Ne(...e){for(const t of e){const e=t.prototype,n=e.__cid__;n&&delete Se[n];const i=e.__classname__;i&&delete Ee[i];const o=e[J];if(o)for(let e=0;e<o.length;++e){const t=o[e];delete Ee[t],delete Se[t]}}}function De(e){return Se[e]}function Me(e){return Ee[e]}function Oe(e,t){let n;if(t=void 0===t||t,"function"==typeof e&&e.prototype.hasOwnProperty($))return n=e.prototype.__cid__,!t&&i&&Ce(n)?"":n;if(e&&e.constructor){const o=e.constructor.prototype;if(o&&o.hasOwnProperty($))return n=e.__cid__,!t&&i&&Ce(n)?"":n}return""}class ze{get(){return this._get()}constructor(e,t){this.count=void 0,this._pool=void 0,this._cleanup=void 0;const n=void 0===t?e:t,i=void 0===t?null:e;this.count=0,this._pool=new Array(n),this._cleanup=i}_get(){if(this.count>0){--this.count;const e=this._pool[this.count];return this._pool[this.count]=null,e}return null}put(e){const t=this._pool;if(this.count<t.length){if(this._cleanup&&!1===this._cleanup(e))return;t[this.count]=e,++this.count}}resize(e){e>=0&&(this._pool.length=e,this.count>e&&(this.count=e))}}e("cP",ze);const Le=e("dA",Q),Fe=e("c8",{IDGenerator:K,Pool:ze,array:Q,isNumber:ee,isString:te,isEmptyObject:ne,getPropertyDescriptor:me,addon:ve,mixin:ge,extend:ye,getSuper:Ae,isChildClassOf:xe,clear:be,value:ie,getset:oe,get:ae,set:re,unregisterClass:Ne,getClassName:ce,setClassName:Ie,setClassAlias:Re,getClassByName:Me,get _registeredClassNames(){return{...Ee}},set _registeredClassNames(e){be(Ee),Object.assign(Ee,e)},get _registeredClassIds(){return{...Se}},set _registeredClassIds(e){be(Se),Object.assign(Se,e)},_getClassId:Oe,_setClassId:Te,_getClassById:De,obsolete:le,obsoletes:_e,formatStr:he,shiftArguments:pe,createMap:se});function Ue(e){if("__bitmask__"in e)return e;ie(e,"__bitmask__",null,!0);let t=-1;const n=Object.keys(e);for(let i=0;i<n.length;i++){const o=n[i];let a=e[o];if(-1===a)a=++t,e[o]=a;else if("number"==typeof a)t=a;else if("string"==typeof a&&Number.isInteger(parseFloat(o)))continue;const r=`${a}`;o!==r&&ie(e,r,o)}return e}function Be(e){return"__enums__"in e?e:(ie(e,"__enums__",null,!0),Be.update(e))}function ke(e){e.hasOwnProperty("__enums__")}function je(e){ke(e);const t=e.__enums__||[];t.length=0;for(const n in e){const i=e[n];Number.isInteger(i)&&t.push({name:n,value:i})}return t.sort(((e,t)=>e.value-t.value)),e.__enums__=t,t}function Ge(e){"__enums__"in e||ie(e,"__enums__",null,!0)}c.js=Fe,e("eS",Object.freeze({__proto__:null,array:Le,js:Fe,IDGenerator:K,Pool:ze,isNumber:ee,isString:te,isEmptyObject:ne,value:ie,getset:oe,get:ae,set:re,createMap:se,getClassName:ce,obsolete:le,obsoletes:_e,formatStr:he,shiftArguments:pe,getPropertyDescriptor:me,addon:ve,mixin:ge,extend:ye,getSuper:Ae,isChildClassOf:xe,clear:be,_idToClass:Se,_nameToClass:Ee,_setClassId:Te,setClassName:Ie,setClassAlias:Re,unregisterClass:Ne,_getClassById:De,getClassByName:Me,_getClassId:Oe})),Ue.isBitMask=e=>e&&e.hasOwnProperty("__bitmask__"),Ue.getList=e=>{if(e.__bitmask__)return e.__bitmask__;const t=e.__bitmask__=[];for(const n in e){const i=e[n];Number.isInteger(i)&&t.push({name:n,value:i})}return t.sort(((e,t)=>e.value-t.value)),t},c.BitMask=Ue,Be.update=e=>{let t=-1;const n=Object.keys(e);for(let i=0;i<n.length;i++){const o=n[i];let a=e[o];if(-1===a)a=++t,e[o]=a;else if("number"==typeof a)t=a;else if("string"==typeof a&&Number.isInteger(parseFloat(o)))continue;const r=`${a}`;o!==r&&ie(e,r,o)}return Array.isArray(e.__enums__)&&je(e),e},Be||(Be=e("bR",{})),Be.isEnum=e=>e&&e.hasOwnProperty("__enums__"),Be.getList=e=>(ke(e),e.__enums__?e.__enums__:je(e)),c.Enum=Be;class Ve{clone(){return R(100,`${ce(this)}.clone`),this}equals(e){return!1}set(e){R(100,`${ce(this)}.set`)}toString(){return`${{}}`}}e("eR",Ve),Ie("cc.ValueType",Ve),c.ValueType=Ve;const He=e("bo",{SUPPORT_TEXTURE_FORMATS:[".astc",".pkm",".pvr",".webp",".jpg",".jpeg",".bmp",".png"],KEY:{none:0,back:6,menu:18,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,select:41,insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,";":186,semicolon:186,equal:187,"=":187,",":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,backslash:220,"]":221,closebracket:221,quote:222,dpadLeft:1e3,dpadRight:1001,dpadUp:1003,dpadDown:1004,dpadCenter:1005},RAD:Math.PI/180,DEG:180/Math.PI,REPEAT_FOREVER:Number.MAX_VALUE-1,FLT_EPSILON:1.192092896e-7,ORIENTATION_PORTRAIT:1,ORIENTATION_LANDSCAPE:2,ORIENTATION_AUTO:3,ENABLE_TILEDMAP_CULLING:!0,TOUCH_TIMEOUT:5e3,ENABLE_TRANSPARENT_CANVAS:!1,ENABLE_WEBGL_ANTIALIAS:!0,CLEANUP_IMAGE_CACHE:!1,ENABLE_MULTI_TOUCH:!0,MAX_LABEL_CANVAS_POOL_SIZE:20});c.macro=He;const We=/^(?:cc|dragonBones|sp|ccsg)\..+/,qe=new Array(123);for(let e=0;e<123;++e)qe[e]=64;for(let e=0;e<64;++e)qe["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(e)]=e;const Ye=qe;function Xe(e,t,n){function i(e,t,n,i){const o=Object.getOwnPropertyDescriptor(e,t);if(o)o.get&&(e[n]=o.get),o.set&&i&&(e[i]=o.set);else{const o=e[n];oe(e,t,o,e[i])}}let o;const a=e.prototype;for(let e=0;e<t.length;e++){o=t[e];const n=o[0].toUpperCase()+o.slice(1);i(a,o,`get${n}`,`set${n}`)}for(o in n){const e=n[o];i(a,o,e[0],e[1])}}function Qe(e,t,n,i){const o=e[t];o?Array.isArray(o)?i?(o.push(o[0]),o[0]=n):o.push(n):e[t]=i?[n,o]:[o,n]:e[t]=n}function Ke(e,t){if("function"==typeof e.contains)return e.contains(t);if("function"==typeof e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(t));{let n=t.parentNode;if(n)do{if(n===e)return!0;n=n.parentNode}while(null!==n);return!1}}function Ze(e){return"object"==typeof window&&"function"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function Je(e,t,n){e&&setTimeout((()=>{e(t,n)}),0)}function $e(e){return!(!e||e.constructor!==Object)&&ne(e)}function et(e,t,n){if(t>n){const e=t;t=n,n=e}return e<t?t:e<n?e:n}function tt(e){return e*He.RAD}function nt(e){return e*He.DEG}c.misc={BUILTIN_CLASSID_RE:We,BASE64_VALUES:Ye,propertyDefine:Xe,pushToMap:Qe,contains:Ke,isDomNode:Ze,callInNextTick:Je,isPlainEmptyObj_DEV:$e,clampf:et,degreesToRadians:tt,radiansToDegrees:nt},e("eT",Object.freeze({__proto__:null,BUILTIN_CLASSID_RE:We,BASE64_VALUES:Ye,propertyDefine:Xe,pushToMap:Qe,contains:Ke,isDomNode:Ze,callInNextTick:Je,tryCatchFunctor_EDITOR:function(e){return Function("target",`try {\n  target.${e}();\n}\ncatch (e) {\n  cc._throw(e);\n}`)},isPlainEmptyObj_DEV:$e,clampf:et,degreesToRadians:tt,radiansToDegrees:nt}));const it="$_$";function ot(e,t){const n=t?Object.create(t):{};return ie(e,"__attrs__",n),n}function at(e){if("function"!=typeof e)return ot(e,st(e.constructor));let t;const n=c.Class.getInheritanceChain(e);for(let e=n.length-1;e>=0;e--){const i=n[e];i.hasOwnProperty("__attrs__")&&i.__attrs__||(t=n[e+1],ot(i,t&&t.__attrs__))}return t=n[0],ot(e,t&&t.__attrs__),e.__attrs__}function rt(e,t){const n=st(e),i=t+it,o={};for(const e in n)e.startsWith(i)&&(o[e.slice(i.length)]=n[e]);return o}function st(e){return e.hasOwnProperty("__attrs__")&&e.__attrs__||at(e)}function ct(e,t,n,i){st(e)[t+it+n]=i}class lt{constructor(e,t){this.name=void 0,this.default=void 0,this.name=e,this.default=t}toString(){return this.name}}const _t=e("eo",new lt("Integer",0));c.Integer=_t,c.CCInteger=_t;const ut=e("f0",new lt("Float",0));c.Float=ut,c.CCFloat=ut;const ft=e("el",new lt("Boolean",!1));c.Boolean=ft,c.CCBoolean=ft;const ht=e("c7",new lt("String",""));function pt(e,t){return function(n,i){const o=`"${ce(n)}.${i}"`,a=rt(n,i);let r=a.type;if(r===_t||r===ut?r="Number":r!==ht&&r!==ft||(r=`${r}`),r!==e)return void P(3604,o);if(!a.hasOwnProperty("default"))return;const s=a.default;if(void 0===s)return;if(Array.isArray(s)||$e(s))return;const c=typeof s,l=e.toLowerCase();if(c===l)if("object"===l){if(!s||s instanceof a.ctor)return;P(3605,o,ce(a.ctor))}else"Number"!==e&&P(3606,t,o,e);else{if("function"===c)return;e===ht.default&&null==s?P(3607,o):P(3611,t,o,c)}delete a.type}}c.String=ht,c.CCString=ht;var mt=Object.freeze({__proto__:null,DELIMETER:it,createAttrsSingle:ot,createAttrs:at,attr:rt,getClassAttrs:st,setClassAttr:ct,PrimitiveType:lt,CCInteger:_t,CCFloat:ut,CCBoolean:ft,CCString:ht,getTypeChecker_ET:pt,getObjTypeChecker_ET:function(e){return function(t,n){pt("Object","type")(t,n);const i=st(t)[`${n+it}default`],o=c.Class.getDefault(i);if(!Array.isArray(o)&&xe(e,c.ValueType)){const o=ce(e),a=he('No need to specify the "type" of "%s.%s" because %s is a child class of ValueType.',ce(t),n,o);i?v(a):P(3612,a,o,ce(t),n,o)}}}});const dt={default:{},serializable:{},editorOnly:{},formerlySerializedAs:{}};function vt(e,t,n,i){if(!e.get&&!e.set&&e.hasOwnProperty("default")){const o=`_N$${t}`;e.get=function(){return this[o]},e.set=function(e){const t=this[o];this[o]=e,n.call(this,t)};const a={};i[o]=a;for(const t in dt){const n=dt[t];e.hasOwnProperty(t)&&(a[t]=e[t],n.canUsedInGet||delete e[t])}}}function gt(e,t,n,i){if(Array.isArray(t)){if(!(t.length>0))return R(5508,n,i);e.type=t=t[0]}"function"==typeof t&&(t===String?e.type=c.String:t===Boolean?e.type=c.Boolean:t===Number&&(e.type=c.Float))}function yt(e,t,n){const i=e?{_short:!0}:{_short:!0,default:t};return n&&(i.type=n),i}function At(e,t){if(!e||e.constructor!==Object){if(Array.isArray(e)&&e.length>0)return yt(t,[],e);if("function"==typeof e){const n=e;return yt(t,xe(n,c.ValueType)?new n:null,n)}return yt(t,e instanceof lt?e.default:e)}return null}let xt=[];function bt(){return xt[xt.length-1]}c._RF={push:function(e,t,n,i){void 0===n&&(n=t,t=""),xt.push({uuid:t,script:n,module:e,exports:e.exports,beh:null,importMeta:i})},pop:function(){const e=xt.pop(),t=e.module;let n=t.exports;if(n===e.exports){for(const e in n)return;t.exports=n=e.cls}},peek:bt};const Ct=it,St={datas:null,push(e){if(this.datas)this.datas.push(e);else{this.datas=[e];const t=this;setTimeout((()=>{t.init()}),0)}},init(){const e=this.datas;if(e){for(let t=0;t<e.length;++t){const n=e[t],i=n.cls;let o=n.props;"function"==typeof o&&(o=o());const a=ce(i);o?It(i,a,o,i.$super,n.mixins):R(3633,a)}this.datas=null}}};function Et(e,t,n,i){!function(e,t){!function(e,t){e.indexOf(t)<0&&e.push(t)}(e.__props__,t)}(e,n),Dt(e,i,t,n)}function wt(e,t,n,i){const o=i.get;i.set,o&&(Dt(e,i,t,n),ct(e,n,"serializable",!1))}function Tt(e){return"function"==typeof e?e():e}function Pt(e,t,n){for(const i in t)e.hasOwnProperty(i)||n&&!n(i)||Object.defineProperty(e,i,me(t,i))}function It(e,t,n,i,o){if(e.__props__=[],i&&i.__props__&&(e.__props__=i.__props__.slice()),o)for(let t=0;t<o.length;++t){const n=o[t];n.__props__&&(e.__props__=e.__props__.concat(n.__props__.filter((t=>e.__props__.indexOf(t)<0))))}if(n){!function(e,t){for(const n in e){let i=e[n];const o=At(i,!1);if(o&&(i=e[n]=o),i){const o=i.notify;o&&vt(i,n,o,e),"type"in i&&gt(i,i.type,t,n)}}}(n,t);for(const i in n){const o=n[i];o.get||o.set?wt(e,t,i,o):Et(e,t,i,o)}}const a=st(e);e.__values__=e.__props__.filter((e=>!1!==a[`${e+Ct}serializable`]))}function Rt(e){let t=e.name;const n=e.extends,i=e.mixins,o=function(e,t,n,i){const o=c.Component,a=bt();if(a&&xe(t,o)){if(xe(a.cls,o))return R(3615),null;e=e||a.script}const r=function(e,t,n,i){const o=i.ctor,a=[o],r=o;ie(r,"__ctors__",a.length>0?a:null,!0);const s=r.prototype;if(t&&(r.$super=t),n){for(let e=n.length-1;e>=0;e--){const t=n[e];Pt(s,t.prototype),Rt._isCCClass(t)&&Pt(st(r),st(t))}s.constructor=r}return Ie(e,r),r}(e,t,n,i);if(a)if(xe(t,o)){const e=a.uuid;e&&Te(e,r),a.cls=r}else xe(a.cls,o)||(a.cls=r);return r}(t,n,i,e);t||(t=c.js.getClassName(o)),o._sealed=!0,n&&(n._sealed=!1);const a=e.properties;"function"==typeof a||n&&null===n.__props__||i&&i.some((e=>null===e.__props__))?(St.push({cls:o,props:a,mixins:i}),o.__props__=o.__values__=null):It(o,t,a,n,e.mixins);const r=e.editor;return r&&xe(n,c.Component)&&c.Component._registerEditorProps(o,r),o}Rt._isCCClass=function(e){var t;return null==e||null===(t=e.hasOwnProperty)||void 0===t?void 0:t.call(e,"__ctors__")},Rt.fastDefine=function(e,t,n){Ie(e,t);const i=t.__props__=t.__values__=Object.keys(n),o=st(t);for(let e=0;e<i.length;e++){const t=i[e];o[`${t+Ct}visible`]=!1,o[`${t+Ct}default`]=n[t]}},Rt.Attr=mt,Rt.attr=rt,Rt.getInheritanceChain=function(e){const t=[];for(;e=Ae(e);)e!==Object&&t.push(e);return t};const Nt={Integer:"Number",Float:"Number",Boolean:"Boolean",String:"String"};function Dt(e,t,n,i){let o=null,a="";function r(){return a=i+Ct,o=st(e)}"type"in t&&void 0===t.type&&P(3660,i,n);const s=t.type;s&&(Nt[s]?(o||r())[`${a}type`]=s:"Object"===s||("object"==typeof s?Be.isEnum(s)?((o||r())[`${a}type`]="Enum",o[`${a}enumList`]=Be.getList(s)):Ue.isBitMask(s)&&((o||r())[`${a}type`]="BitMask",o[`${a}bitmaskList`]=Ue.getList(s)):"function"==typeof s&&((o||r())[`${a}type`]="Object",o[`${a}ctor`]=s))),"default"in t&&((o||r())[`${a}default`]=t.default);const c=(e,n)=>{if(e in t){const i=t[e];typeof i===n&&((o||r())[a+e]=i)}};var l;t.editorOnly&&((o||r())[`${a}editorOnly`]=!0),t.__noImplicit?(o||r())[`${a}serializable`]=null!==(l=t.serializable)&&void 0!==l&&l:!1===t.serializable&&((o||r())[`${a}serializable`]=!1),c("formerlySerializedAs","string");const _=t.range;_&&Array.isArray(_)&&_.length>=2&&((o||r())[`${a}min`]=_[0],o[`${a}max`]=_[1],_.length>2&&(o[`${a}step`]=_[2])),c("min","number"),c("max","number"),c("step","number")}Rt.isArray=function(e){return e=Tt(e),Array.isArray(e)},Rt.getDefault=Tt,Rt.escapeForJS=function(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},Rt.IDENTIFIER_RE=/^[A-Za-z_$][0-9A-Za-z_$]*$/,Rt.getNewValueTypeCode=function(e){const t=ce(e),n=e.constructor;let i=`new ${t}(`;for(let t=0;t<n.__props__.length;t++)i+=e[n.__props__[t]],t<n.__props__.length-1&&(i+=",");return`${i})`},c.Class=Rt;const Mt=e("f2","__editorExtras__"),Ot=1<<22,zt=[];class Lt{static _deferredDestroy(){const e=zt.length;for(let t=0;t<e;++t){const e=zt[t];1&e._objFlags||e._destroyImmediate()}e===zt.length?zt.length=0:zt.splice(0,e)}constructor(e=""){this._objFlags=void 0,this._name=void 0,this._name=e,this._objFlags=0}get name(){return this._name}set name(e){this._name=e}set hideFlags(e){const t=e&Lt.Flags.AllHideMasks;this._objFlags=this._objFlags&~Lt.Flags.AllHideMasks|t}get hideFlags(){return this._objFlags&Lt.Flags.AllHideMasks}set replicated(e){e?this._objFlags|=Ot:this._objFlags&=-4194305}get replicated(){return!!(this._objFlags&Ot)}get isValid(){return!(1&this._objFlags)}destroy(){return 1&this._objFlags?(P(5e3),!1):!(4&this._objFlags||(this._objFlags|=4,zt.push(this),0))}_destruct(){const e=this.constructor;let t=e.__destruct__;t||(t=function(e,t){const n=e instanceof c._BaseNode||e instanceof c.Component,i=n?"_id":null;let o;const a={};for(o in e)if(e.hasOwnProperty(o)){if(o===i)continue;switch(typeof e[o]){case"string":a[o]="";break;case"object":case"function":a[o]=null}}if(Rt._isCCClass(t)){const e=c.Class.Attr.getClassAttrs(t),i=t.__props__;for(let t=0;t<i.length;t++){o=i[t];const r=`${o+c.Class.Attr.DELIMETER}default`;if(r in e){if(n&&"_id"===o)continue;switch(typeof e[r]){case"string":a[o]="";break;case"object":case"function":a[o]=null;break;case"undefined":a[o]=void 0}}}}{let e="";for(o in a){let t;t=Rt.IDENTIFIER_RE.test(o)?`o.${o}=`:`o[${Rt.escapeForJS(o)}]=`;let n=a[o];""===n&&(n='""'),e+=`${t+n};\n`}return Function("o",e)}}(this,e),ie(e,"__destruct__",t,!0)),t(this)}_destroyImmediate(){1&this._objFlags?R(5e3):(this._onPreDestroy&&this._onPreDestroy(),this._destruct(),this._objFlags|=1)}}e("d1",Lt);const Ft=Lt.prototype;function Ut(e,t){return"object"==typeof e?!(!e||e._objFlags&(t?5:1)):void 0!==e}Ft._deserialize=null,Ft._onPreDestroy=null,Rt.fastDefine("cc.Object",Lt,{_name:"",_objFlags:0,[Mt]:{}}),Rt.Attr.setClassAttr(Lt,Mt,"editorOnly",!0),ie(Lt,"Flags",{Destroyed:1,DontSave:8,EditorOnly:16,Dirty:32,DontDestroy:64,PersistentMask:-4192741,Destroying:128,Deactivating:256,LockedInEditor:512,HideInHierarchy:1024,AllHideMasks:1560,IsPreloadStarted:8192,IsOnLoadStarted:32768,IsOnLoadCalled:16384,IsOnEnableCalled:2048,IsStartCalled:65536,IsEditorOnEnableCalled:4096,IsPositionLocked:1<<21,IsRotationLocked:1<<17,IsScaleLocked:1<<18,IsAnchorLocked:1<<19,IsSizeLocked:1<<20}),c.isValid=Ut,c.Object=Lt;const Bt=Le.fastRemoveAt;function kt(){}class jt{constructor(){this.callback=kt,this.target=void 0,this.once=!1}set(e,t,n){this.callback=e||kt,this.target=t,this.once=!!n}reset(){this.target=void 0,this.callback=kt,this.once=!1}check(){return!(this.target instanceof Lt&&!Ut(this.target,!0))}}const Gt=new V((()=>new jt),32);class Vt{constructor(){this.callbackInfos=[],this.isInvoking=!1,this.containCanceled=!1}removeByCallback(e){for(let t=0;t<this.callbackInfos.length;++t){const n=this.callbackInfos[t];n&&n.callback===e&&(n.reset(),Gt.free(n),Bt(this.callbackInfos,t),--t)}}removeByTarget(e){for(let t=0;t<this.callbackInfos.length;++t){const n=this.callbackInfos[t];n&&n.target===e&&(n.reset(),Gt.free(n),Bt(this.callbackInfos,t),--t)}}cancel(e){const t=this.callbackInfos[e];t&&(t.reset(),this.isInvoking?this.callbackInfos[e]=null:Bt(this.callbackInfos,e),Gt.free(t)),this.containCanceled=!0}cancelAll(){for(let e=0;e<this.callbackInfos.length;e++){const t=this.callbackInfos[e];t&&(t.reset(),Gt.free(t),this.callbackInfos[e]=null)}this.containCanceled=!0}purgeCanceled(){for(let e=this.callbackInfos.length-1;e>=0;--e)this.callbackInfos[e]||Bt(this.callbackInfos,e);this.containCanceled=!1}clear(){this.cancelAll(),this.callbackInfos.length=0,this.isInvoking=!1,this.containCanceled=!1}}const Ht=new V((()=>new Vt),16);class Wt{constructor(){this._callbackTable=se(!0)}on(e,t,n,i){if(!this.hasEventListener(e,t,n)){let o=this._callbackTable[e];o||(o=this._callbackTable[e]=Ht.alloc());const a=Gt.alloc();a.set(t,n,i),o.callbackInfos.push(a)}return t}hasEventListener(e,t,n){const i=this._callbackTable&&this._callbackTable[e];if(!i)return!1;const o=i.callbackInfos;if(!t){if(i.isInvoking){for(let e=0;e<o.length;++e)if(o[e])return!0;return!1}return o.length>0}for(let e=0;e<o.length;++e){const i=o[e];if(i&&i.check()&&i.callback===t&&i.target===n)return!0}return!1}removeAll(e){const t=typeof e;if("string"===t||"number"===t){const t=this._callbackTable&&this._callbackTable[e];t&&(t.isInvoking?t.cancelAll():(t.clear(),Ht.free(t),delete this._callbackTable[e]))}else if(e)for(const t in this._callbackTable){const n=this._callbackTable[t];if(n.isInvoking){const t=n.callbackInfos;for(let i=0;i<t.length;++i){const o=t[i];o&&o.target===e&&n.cancel(i)}}else n.removeByTarget(e)}}off(e,t,n){const i=this._callbackTable&&this._callbackTable[e];if(i){const o=i.callbackInfos;if(t)for(let e=0;e<o.length;++e){const a=o[e];if(a&&a.callback===t&&a.target===n){i.cancel(e);break}}else this.removeAll(e)}}emit(e,t,n,i,o,a){const r=this._callbackTable&&this._callbackTable[e];if(r){const s=!r.isInvoking;r.isInvoking=!0;const c=r.callbackInfos;for(let r=0,s=c.length;r<s;++r){const s=c[r];if(s){const r=s.callback,c=s.target;s.once&&this.off(e,r,c),s.check()?c?r.call(c,t,n,i,o,a):r(t,n,i,o,a):this.off(e,r,c)}}s&&(r.isInvoking=!1,r.containCanceled&&r.purgeCanceled())}}clear(){for(const e in this._callbackTable){const t=this._callbackTable[e];t&&(t.clear(),Ht.free(t),delete this._callbackTable[e])}}}function qt(e){class t extends e{constructor(...e){super(...e),this._callbackTable=se(!0)}once(e,t,n){return this.on(e,t,n,!0)}targetOff(e){this.removeAll(e)}}const n=Wt.prototype,i=Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n));for(let e=0;e<i.length;++e){const o=i[e];if(!(o in t.prototype)){const e=Object.getOwnPropertyDescriptor(n,o);e&&Object.defineProperty(t.prototype,o,e)}}return t}const Yt=e("ec",qt(class{}));c.EventTarget=Yt;const Xt={0:k.NONE,1:k.LAN,2:k.WWAN},Qt={0:G.WIN32,2:G.MACOS,3:G.ANDROID,4:G.IOS,5:G.IOS,6:G.OHOS},Kt=e("ed",new class extends Yt{get networkType(){return Xt[jsb.device.getNetworkType()]}constructor(){super(),this.isNative=void 0,this.isBrowser=void 0,this.isMobile=void 0,this.isLittleEndian=void 0,this.platform=void 0,this.language=void 0,this.nativeLanguage=void 0,this.os=void 0,this.osVersion=void 0,this.osMainVersion=void 0,this.browserType=void 0,this.browserVersion=void 0,this.pixelRatio=void 0,this.supportCapability=void 0,this.isNative=!0,this.isBrowser=!1,this.platform=Qt[__getPlatform()],this.isMobile=this.platform===G.ANDROID||this.platform===G.IOS||this.platform===G.OHOS,this.isLittleEndian=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]})();const e=__getCurrentLanguageCode();this.nativeLanguage=e?e.toLowerCase():B.UNKNOWN,this.language=__getCurrentLanguage(),this.os=__getOS(),this.osVersion=__getOSVersion(),this.osMainVersion=parseInt(this.osVersion),this.browserType=U.UNKNOWN,this.browserVersion="",this.pixelRatio=jsb.device.getDevicePixelRatio()||1,this.supportCapability={webp:!0,gl:!0,canvas:!0,imageBitmap:!1},this._registerEvent()}_registerEvent(){jsb.onPause=()=>{this.emit("hide")},jsb.onResume=()=>{this.emit("show")},jsb.onClose=()=>{this.emit("close")}}getBatteryLevel(){return jsb.device.getBatteryLevel()}triggerGC(){jsb.garbageCollect()}openURL(e){jsb.openURL(e)}now(){return Date.now?Date.now():+new Date}restartJSVM(){__restartVM()}close(){__close()}}),Zt=e("dQ",2147483647);function Jt(e){return(e>0)-(e<0)}function $t(e){let t,n;return t=(e>65535)<<4,n=((e>>>=t)>255)<<3,t|=n,n=((e>>>=n)>15)<<2,t|=n,n=((e>>>=n)>3)<<1,t|=n,t|(e>>>=n)>>1}function en(e){let t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}function tn(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)}const nn=new Array(256);(e=>{for(let t=0;t<256;++t){let n=t,i=t,o=7;for(n>>>=1;n;n>>>=1)i<<=1,i|=1&n,--o;e[t]=i<<o&255}})(nn);var on=Object.freeze({__proto__:null,INT_BITS:32,INT_MAX:Zt,INT_MIN:-2147483648,sign:Jt,abs:function(e){const t=e>>31;return(e^t)-t},min:function(e,t){return t^(e^t)&-(e<t)},max:function(e,t){return e^(e^t)&-(e<t)},isPow2:function(e){return!(e&e-1||!e)},log2:$t,log10:function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},popCount:function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},countTrailingZeros:en,nextPow2:tn,prevPow2:function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},parity:function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1},reverse:function(e){return nn[255&e]<<24|nn[e>>>8&255]<<16|nn[e>>>16&255]<<8|nn[e>>>24&255]},interleave2:function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},deinterleave2:function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},interleave3:function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},deinterleave3:function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},nextCombination:function(e){const t=e|e-1;return t+1|(~t&-~t)-1>>>en(e)+1}});e("ex",on);let an,rn,sn,cn,ln,_n,un=10,fn=0;const hn=new Map;cn=(e,t,n,i,o,a,r)=>{const s=hn.get(a);s&&s.logTimes>s.count&&(o(`'%s' is deprecated, please use '%s' instead. ${r}`,`${e}.${t}`,`${n}.${i}`),s.count++)},an=e("c5",((e,t,n)=>{null!=e&&n.forEach((n=>{const i=fn++;hn.set(i,{id:i,count:0,logTimes:void 0!==n.logTimes?n.logTimes:un});const o=null!=n.target?n.target:e,a=null!=n.newName?n.newName:n.name,r=null!=n.targetName?n.targetName:t,s=o===e,c=n.suggest?`(${n.suggest})`:"";if(null!=n.customFunction)e[n.name]=function(){return cn(t,n.name,r,a,g,i,c),n.customFunction.call(this,...arguments)};else if(null!=n.customSetter||null!=n.customGetter){const o=null!=n.customSetter,s=null!=n.customGetter;o&&s?Object.defineProperty(e,n.name,{get(){return cn(t,n.name,r,a,g,i,c),n.customGetter.call(this)},set(e){cn(t,n.name,r,a,g,i,c),n.customSetter.call(this,e)},enumerable:!1}):o?Object.defineProperty(e,n.name,{set(e){cn(t,n.name,r,a,g,i,c),n.customSetter.call(this,e)},enumerable:!1}):s&&Object.defineProperty(e,n.name,{get(){return cn(t,n.name,r,a,g,i,c),n.customGetter.call(this)},enumerable:!1})}else Object.defineProperty(e,n.name,{get(){return cn(t,n.name,r,a,g,i,c),s?this[a]:o[a]},set(e){cn(t,n.name,r,a,g,i,c),s?this[a]=e:o[a]=e},enumerable:!1})}))})),_n=(e,t,n,i,o)=>{const a=hn.get(i);a&&a.logTimes>a.count&&(n(`'%s' has been removed. ${o}`,`${e}.${t}`),a.count++)},rn=e("c6",((e,t,n)=>{null!=e&&n.forEach((n=>{const i=fn++;hn.set(i,{id:i,count:0,logTimes:void 0!==n.logTimes?n.logTimes:un});const o=n.suggest?`(${n.suggest})`:"";Object.defineProperty(e,n.name,{get:()=>_n(t,n.name,y,i,o),set(){_n(t,n.name,y,i,o)},enumerable:!1})}))})),ln=(e,t,n,i,o)=>{const a=hn.get(i);a&&a.logTimes>a.count&&(n(`'%s' is deprecated. ${o}`,`${e}.${t}`),a.count++)},sn=e("d7",((e,t,n)=>{if(null==e)return;const i=(t,n,i,o,a,r)=>{if(t.get){const e=t.get;t.get=function(){return ln(n,i,o,a,r),e.call(this)}}if(t.set){const e=t.set;t.set=function(t){ln(n,i,o,a,r),e.call(this,t)}}Object.defineProperty(e,i,t)};n.forEach((n=>{const o=n.name,a=Object.getOwnPropertyDescriptor(e,o);if(!a||!a.configurable)return;const r=fn++;hn.set(r,{id:r,count:0,logTimes:void 0!==n.logTimes?n.logTimes:un});const s=n.suggest?`(${n.suggest})`:"";if(void 0!==a.value)if("function"==typeof a.value){const n=a.value;e[o]=function(){return ln(t,o,g,r,s),n.call(this,...arguments)}}else{let n=a.value;Object.defineProperty(e,o,{configurable:!0,get:()=>(ln(t,o,g,r,s),n)}),a.writable&&Object.defineProperty(e,o,{set(e){ln(t,o,g,r,s),n=e}})}else i(a,t,o,g,r,s);Object.defineProperty(e,o,{enumerable:!1})}))}));const pn=Math.PI/180,mn=180/Math.PI,dn=e("eH",1e-6);function vn(e,t){return Math.abs(e-t)<=dn*Math.max(1,Math.abs(e),Math.abs(t))}function gn(e,t,n){return n=n||dn,Math.abs(e-t)<=n}function yn(e,t,n){if(t>n){const e=t;t=n,n=e}return e<t?t:e>n?n:e}function An(e){return e<0?0:e>1?1:e}function xn(e,t,n){return e+(t-e)*n}function bn(e){return e*pn}function Cn(e){return e*mn}const Sn=e("dK",Math.random);function En(e,t){return Math.random()*(t-e)+e}function wn(e,t){return Math.floor(En(e,t))}function Tn(e){return(e=(9301*e+49297)%233280)/233280}function Pn(e,t,n){return Tn(e)*(n-t)+t}function In(e,t,n){return Math.floor(Pn(e,t,n))}function Rn(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function Nn(e,t){return e-Math.floor(e/t)*t}function Dn(e,t){return e=Nn(e,2*t),t-Math.abs(e-t)}function Mn(e,t,n){return(n-e)/(t-e)}function On(e){return Math.abs(e.x)>Math.abs(e.y)?Math.abs(e.x)>Math.abs(e.z)?e.x:e.z:Math.abs(e.y)>Math.abs(e.z)?e.y:e.z}function zn(e,t){return Math.abs(e)>Math.abs(t)?e:t}function Ln(e,t){t.forEach((t=>{Object.defineProperty(e,t,{enumerable:!0})}))}const Fn=1/255;class Un extends Ve{static clone(e){const t=new Un;return e._val?t._val=e._val:t._val=(e.a<<24>>>0)+(e.b<<16)+(e.g<<8)+e.r,t}static copy(e,t){return e.r=t.r,e.g=t.g,e.b=t.b,e.a=t.a,e}static set(e,t,n,i,o){return e.r=t,e.g=n,e.b=i,e.a=o,e}static fromHEX(e,t){return t=0===t.indexOf("#")?t.substring(1):t,e.r=parseInt(t.substr(0,2),16)||0,e.g=parseInt(t.substr(2,2),16)||0,e.b=parseInt(t.substr(4,2),16)||0,e.a=parseInt(t.substr(6,2),16)||255,e._val=(e.a<<24>>>0)+(e.b<<16)+(e.g<<8)+e.r,e}static add(e,t,n){return e.r=t.r+n.r,e.g=t.g+n.g,e.b=t.b+n.b,e.a=t.a+n.a,e}static subtract(e,t,n){return e.r=t.r-n.r,e.g=t.g-n.g,e.b=t.b-n.b,e.a=t.a-n.a,e}static multiply(e,t,n){return e.r=t.r*n.r,e.g=t.g*n.g,e.b=t.b*n.b,e.a=t.a*n.a,e}static divide(e,t,n){return e.r=t.r/n.r,e.g=t.g/n.g,e.b=t.b/n.b,e.a=t.a/n.a,e}static scale(e,t,n){return e.r=t.r*n,e.g=t.g*n,e.b=t.b*n,e.a=t.a*n,e}static lerp(e,t,n,i){let o=t.r,a=t.g,r=t.b,s=t.a;return o+=(n.r-o)*i,a+=(n.g-a)*i,r+=(n.b-r)*i,s+=(n.a-s)*i,e._val=Math.floor((s<<24>>>0)+(r<<16)+(a<<8)+o),e}static toArray(e,t,n=0){const i=t instanceof Un||t.a>1?1/255:1;return e[n+0]=t.r*i,e[n+1]=t.g*i,e[n+2]=t.b*i,e[n+3]=t.a*i,e}static fromArray(e,t,n=0){return t.r=255*e[n+0],t.g=255*e[n+1],t.b=255*e[n+2],t.a=255*e[n+3],t}static strictEquals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}static equals(e,t,n=dn){return Math.abs(e.r-t.r)<=n*Math.max(1,Math.abs(e.r),Math.abs(t.r))&&Math.abs(e.g-t.g)<=n*Math.max(1,Math.abs(e.g),Math.abs(t.g))&&Math.abs(e.b-t.b)<=n*Math.max(1,Math.abs(e.b),Math.abs(t.b))&&Math.abs(e.a-t.a)<=n*Math.max(1,Math.abs(e.a),Math.abs(t.a))}static hex(e){return(255*e.r<<24|255*e.g<<16|255*e.b<<8|255*e.a)>>>0}get r(){return 255&this._val}set r(e){e=~~yn(e,0,255),this._val=(4294967040&this._val|e)>>>0}get g(){return(65280&this._val)>>8}set g(e){e=~~yn(e,0,255),this._val=(4294902015&this._val|e<<8)>>>0}get b(){return(16711680&this._val)>>16}set b(e){e=~~yn(e,0,255),this._val=(4278255615&this._val|e<<16)>>>0}get a(){return(4278190080&this._val)>>>24}set a(e){e=~~yn(e,0,255),this._val=(16777215&this._val|e<<24)>>>0}get x(){return this.r*Fn}set x(e){this.r=255*e}get y(){return this.g*Fn}set y(e){this.g=255*e}get z(){return this.b*Fn}set z(e){this.b=255*e}get w(){return this.a*Fn}set w(e){this.a=255*e}constructor(e,t,n,i){super(),this._val=0,"string"==typeof e?this.fromHEX(e):void 0!==t?this.set(e,t,n,i):this.set(e)}clone(){const e=new Un;return e._val=this._val,e}equals(e){return e&&this._val===e._val}lerp(e,t){let n=this.r,i=this.g,o=this.b,a=this.a;return n+=(e.r-n)*t,i+=(e.g-i)*t,o+=(e.b-o)*t,a+=(e.a-a)*t,this._val=Math.floor((a<<24>>>0)+(o<<16)+(i<<8)+n),this}toString(){return`rgba(${this.r.toFixed()}, ${this.g.toFixed()}, ${this.b.toFixed()}, ${this.a.toFixed()})`}toCSS(e="rgba"){return"rgba"===e?`rgba(${this.r},${this.g},${this.b},${(this.a*Fn).toFixed(2)})`:"rgb"===e?`rgb(${this.r},${this.g},${this.b})`:`#${this.toHEX(e)}`}fromHEX(e){e=0===e.indexOf("#")?e.substring(1):e;const t=parseInt(e.substr(0,2),16)||0,n=parseInt(e.substr(2,2),16)||0,i=parseInt(e.substr(4,2),16)||0,o=parseInt(e.substr(6,2),16)||255;return this._val=(o<<24>>>0)+(i<<16)+(n<<8)+(0|t),this}toHEX(e="#rrggbb"){const t="0",n=[(this.r<16?t:"")+this.r.toString(16),(this.g<16?t:"")+this.g.toString(16),(this.b<16?t:"")+this.b.toString(16)];return"#rgb"===e?(n[0]=n[0][0],n[1]=n[1][0],n[2]=n[2][0]):"#rrggbbaa"===e&&n.push((this.a<16?t:"")+this.a.toString(16)),n.join("")}toRGBValue(){return 16777215&this._val}fromHSV(e,t,n){let i=0,o=0,a=0;if(0===t)i=o=a=n;else if(0===n)i=o=a=0;else{1===e&&(e=0),e*=6;const r=Math.floor(e),s=e-r,c=n*(1-t),l=n*(1-t*s),_=n*(1-t*(1-s));switch(r){case 0:i=n,o=_,a=c;break;case 1:i=l,o=n,a=c;break;case 2:i=c,o=n,a=_;break;case 3:i=c,o=l,a=n;break;case 4:i=_,o=c,a=n;break;case 5:i=n,o=c,a=l}}return i*=255,o*=255,a*=255,this._val=(this.a<<24>>>0)+(a<<16)+(o<<8)+(0|i),this}toHSV(){const e=this.r*Fn,t=this.g*Fn,n=this.b*Fn,i={h:0,s:0,v:0},o=Math.max(e,t,n),a=Math.min(e,t,n);let r=0;return i.v=o,i.s=o?(o-a)/o:0,i.s?(r=o-a,i.h=e===o?(t-n)/r:t===o?2+(n-e)/r:4+(e-t)/r,i.h/=6,i.h<0&&(i.h+=1)):i.h=0,i}set(e,t,n,i){return"object"==typeof e?null!=e._val?this._val=e._val:(t=e.g||0,n=e.b||0,i="number"==typeof e.a?e.a:255,e=e.r||0,this._val=(i<<24>>>0)+(n<<16)+(t<<8)+(0|e)):(e=e||0,t=t||0,n=n||0,i="number"==typeof i?i:255,this._val=(i<<24>>>0)+(n<<16)+(t<<8)+(0|e)),this}multiply(e){const t=(255&this._val)*e.r>>8,n=(65280&this._val)*e.g>>8,i=(16711680&this._val)*e.b>>8,o=((4278190080&this._val)>>>8)*e.a;return this._val=4278190080&o|16711680&i|65280&n|255&t,this}_set_r_unsafe(e){return this._val=(4294967040&this._val|e)>>>0,this}_set_g_unsafe(e){return this._val=(4294902015&this._val|e<<8)>>>0,this}_set_b_unsafe(e){return this._val=(4278255615&this._val|e<<16)>>>0,this}_set_a_unsafe(e){return this._val=(16777215&this._val|e<<24)>>>0,this}}function Bn(e,t,n,i){return new Un(e,t,n,i)}e("ce",Un),Un.WHITE=Object.freeze(new Un(255,255,255,255)),Un.GRAY=Object.freeze(new Un(127,127,127,255)),Un.BLACK=Object.freeze(new Un(0,0,0,255)),Un.TRANSPARENT=Object.freeze(new Un(0,0,0,0)),Un.RED=Object.freeze(new Un(255,0,0,255)),Un.GREEN=Object.freeze(new Un(0,255,0,255)),Un.BLUE=Object.freeze(new Un(0,0,255,255)),Un.CYAN=Object.freeze(new Un(0,255,255,255)),Un.MAGENTA=Object.freeze(new Un(255,0,255,255)),Un.YELLOW=Object.freeze(new Un(255,255,0,255)),Rt.fastDefine("cc.Color",Un,{r:0,g:0,b:0,a:255}),c.Color=Un,c.color=Bn;const kn=e("eO",Float32Array);class jn extends Ve{static createFloatArray(e){return new kn(e)}get array(){return this._array}}e("eP",jn);class Gn extends jn{static zero(e){return e.x=0,e.y=0,e.z=0,e}static clone(e){return new Gn(e.x,e.y,e.z)}static copy(e,t){return e.x=t.x,e.y=t.y,e.z=t.z,e}static set(e,t,n,i){return e.x=t,e.y=n,e.z=i,e}static add(e,t,n){return e.x=t.x+n.x,e.y=t.y+n.y,e.z=t.z+n.z,e}static subtract(e,t,n){return e.x=t.x-n.x,e.y=t.y-n.y,e.z=t.z-n.z,e}static multiply(e,t,n){return e.x=t.x*n.x,e.y=t.y*n.y,e.z=t.z*n.z,e}static divide(e,t,n){return e.x=t.x/n.x,e.y=t.y/n.y,e.z=t.z/n.z,e}static ceil(e,t){return e.x=Math.ceil(t.x),e.y=Math.ceil(t.y),e.z=Math.ceil(t.z),e}static floor(e,t){return e.x=Math.floor(t.x),e.y=Math.floor(t.y),e.z=Math.floor(t.z),e}static min(e,t,n){return e.x=Math.min(t.x,n.x),e.y=Math.min(t.y,n.y),e.z=Math.min(t.z,n.z),e}static max(e,t,n){return e.x=Math.max(t.x,n.x),e.y=Math.max(t.y,n.y),e.z=Math.max(t.z,n.z),e}static round(e,t){return e.x=Math.round(t.x),e.y=Math.round(t.y),e.z=Math.round(t.z),e}static multiplyScalar(e,t,n){return e.x=t.x*n,e.y=t.y*n,e.z=t.z*n,e}static scaleAndAdd(e,t,n,i){return e.x=t.x+n.x*i,e.y=t.y+n.y*i,e.z=t.z+n.z*i,e}static distance(e,t){const n=t.x-e.x,i=t.y-e.y,o=t.z-e.z;return Math.sqrt(n*n+i*i+o*o)}static squaredDistance(e,t){const n=t.x-e.x,i=t.y-e.y,o=t.z-e.z;return n*n+i*i+o*o}static len(e){const t=e.x,n=e.y,i=e.z;return Math.sqrt(t*t+n*n+i*i)}static lengthSqr(e){const t=e.x,n=e.y,i=e.z;return t*t+n*n+i*i}static negate(e,t){return e.x=-t.x,e.y=-t.y,e.z=-t.z,e}static invert(e,t){return e.x=1/t.x,e.y=1/t.y,e.z=1/t.z,e}static invertSafe(e,t){const n=t.x,i=t.y,o=t.z;return Math.abs(n)<dn?e.x=0:e.x=1/n,Math.abs(i)<dn?e.y=0:e.y=1/i,Math.abs(o)<dn?e.z=0:e.z=1/o,e}static normalize(e,t){const n=t.x,i=t.y,o=t.z;let a=n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e.x=n*a,e.y=i*a,e.z=o*a),e}static dot(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}static cross(e,t,n){const{x:i,y:o,z:a}=t,{x:r,y:s,z:c}=n;return e.x=o*c-a*s,e.y=a*r-i*c,e.z=i*s-o*r,e}static lerp(e,t,n,i){return e.x=t.x+i*(n.x-t.x),e.y=t.y+i*(n.y-t.y),e.z=t.z+i*(n.z-t.z),e}static random(e,t){t=t||1;const n=2*Sn()*Math.PI,i=2*Sn()-1,o=Math.sqrt(1-i*i);return e.x=o*Math.cos(n)*t,e.y=o*Math.sin(n)*t,e.z=i*t,e}static transformMat4(e,t,n){const i=t.x,o=t.y,a=t.z;let r=n.m03*i+n.m07*o+n.m11*a+n.m15;return r=r?Math.abs(1/r):1,e.x=(n.m00*i+n.m04*o+n.m08*a+n.m12)*r,e.y=(n.m01*i+n.m05*o+n.m09*a+n.m13)*r,e.z=(n.m02*i+n.m06*o+n.m10*a+n.m14)*r,e}static transformMat4Normal(e,t,n){const i=t.x,o=t.y,a=t.z;let r=n.m03*i+n.m07*o+n.m11*a;return r=r?Math.abs(1/r):1,e.x=(n.m00*i+n.m04*o+n.m08*a)*r,e.y=(n.m01*i+n.m05*o+n.m09*a)*r,e.z=(n.m02*i+n.m06*o+n.m10*a)*r,e}static transformMat3(e,t,n){const i=t.x,o=t.y,a=t.z;return e.x=i*n.m00+o*n.m03+a*n.m06,e.y=i*n.m01+o*n.m04+a*n.m07,e.z=i*n.m02+o*n.m05+a*n.m08,e}static transformAffine(e,t,n){const i=t.x,o=t.y,a=t.z;return e.x=n.m00*i+n.m04*o+n.m08*a+n.m12,e.y=n.m01*i+n.m05*o+n.m09*a+n.m13,e.x=n.m02*i+n.m06*o+n.m10*a+n.m14,e}static transformQuat(e,t,n){const i=n.w*t.x+n.y*t.z-n.z*t.y,o=n.w*t.y+n.z*t.x-n.x*t.z,a=n.w*t.z+n.x*t.y-n.y*t.x,r=-n.x*t.x-n.y*t.y-n.z*t.z;return e.x=i*n.w+r*-n.x+o*-n.z-a*-n.y,e.y=o*n.w+r*-n.y+a*-n.x-i*-n.z,e.z=a*n.w+r*-n.z+i*-n.y-o*-n.x,e}static transformRTS(e,t,n,i,o){const a=t.x*o.x,r=t.y*o.y,s=t.z*o.z,c=n.w*a+n.y*s-n.z*r,l=n.w*r+n.z*a-n.x*s,_=n.w*s+n.x*r-n.y*a,u=-n.x*a-n.y*r-n.z*s;return e.x=c*n.w+u*-n.x+l*-n.z-_*-n.y+i.x,e.y=l*n.w+u*-n.y+_*-n.x-c*-n.z+i.y,e.z=_*n.w+u*-n.z+c*-n.y-l*-n.x+i.z,e}static transformInverseRTS(e,t,n,i,o){const a=t.x-i.x,r=t.y-i.y,s=t.z-i.z,c=n.w*a-n.y*s+n.z*r,l=n.w*r-n.z*a+n.x*s,_=n.w*s-n.x*r+n.y*a,u=n.x*a+n.y*r+n.z*s;return e.x=(c*n.w+u*n.x+l*n.z-_*n.y)/o.x,e.y=(l*n.w+u*n.y+_*n.x-c*n.z)/o.y,e.z=(_*n.w+u*n.z+c*n.y-l*n.x)/o.z,e}static rotateX(e,t,n,i){const o=t.x-n.x,a=t.y-n.y,r=t.z-n.z,s=Math.cos(i),c=Math.sin(i),l=o,_=a*s-r*c,u=a*c+r*s;return e.x=l+n.x,e.y=_+n.y,e.z=u+n.z,e}static rotateY(e,t,n,i){const o=t.x-n.x,a=t.y-n.y,r=t.z-n.z,s=Math.cos(i),c=Math.sin(i),l=r*c+o*s,_=a,u=r*s-o*c;return e.x=l+n.x,e.y=_+n.y,e.z=u+n.z,e}static rotateZ(e,t,n,i){const o=t.x-n.x,a=t.y-n.y,r=t.z-n.z,s=Math.cos(i),c=Math.sin(i),l=o*s-a*c,_=o*c+a*s,u=r;return e.x=l+n.x,e.y=_+n.y,e.z=u+n.z,e}static toArray(e,t,n=0){return e[n+0]=t.x,e[n+1]=t.y,e[n+2]=t.z,e}static fromArray(e,t,n=0){return e.x=t[n+0],e.y=t[n+1],e.z=t[n+2],e}static strictEquals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}static equals(e,t,n=dn){const{x:i,y:o,z:a}=e,{x:r,y:s,z:c}=t;return Math.abs(i-r)<=n*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(o-s)<=n*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-c)<=n*Math.max(1,Math.abs(a),Math.abs(c))}static angle(e,t){Gn.normalize(Vn,e),Gn.normalize(Hn,t);const n=Gn.dot(Vn,Hn);return n>1?0:n<-1?Math.PI:Math.acos(n)}static projectOnPlane(e,t,n){return Gn.subtract(e,t,Gn.project(e,t,n))}static project(e,t,n){const i=Gn.lengthSqr(n);return i<1e-6?Gn.set(e,0,0,0):Gn.multiplyScalar(e,n,Gn.dot(t,n)/i)}get x(){return this._array[0]}set x(e){this._array[0]=e}get y(){return this._array[1]}set y(e){this._array[1]=e}get z(){return this._array[2]}set z(e){this._array[2]=e}constructor(e,t,n){if(super(),e&&"object"==typeof e)if(ArrayBuffer.isView(e))this._array=e,this._array.fill(0);else{const t=e.array;this._array=jn.createFloatArray(3),this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2]}else this._array=jn.createFloatArray(3),this._array[0]=e||0,this._array[1]=t||0,this._array[2]=n||0}clone(){return new Gn(this._array[0],this._array[1],this._array[2])}set(e,t,n){return e&&"object"==typeof e?(this._array[0]=e.x,this._array[1]=e.y,this._array[2]=e.z):(this._array[0]=e||0,this._array[1]=t||0,this._array[2]=n||0),this}equals(e,t=dn){const n=e.array;return Math.abs(this._array[0]-n[0])<=t*Math.max(1,Math.abs(this._array[0]),Math.abs(n[0]))&&Math.abs(this._array[1]-n[1])<=t*Math.max(1,Math.abs(this._array[1]),Math.abs(n[1]))&&Math.abs(this._array[2]-n[2])<=t*Math.max(1,Math.abs(this._array[2]),Math.abs(n[2]))}equals3f(e,t,n,i=dn){return Math.abs(this._array[0]-e)<=i*Math.max(1,Math.abs(this._array[0]),Math.abs(e))&&Math.abs(this._array[1]-t)<=i*Math.max(1,Math.abs(this._array[1]),Math.abs(t))&&Math.abs(this._array[2]-n)<=i*Math.max(1,Math.abs(this._array[2]),Math.abs(n))}strictEquals(e){const t=e.array;return this._array[0]===t[0]&&this._array[1]===t[1]&&this._array[2]===t[2]}strictEquals3f(e,t,n){return this._array[0]===e&&this._array[1]===t&&this._array[2]===n}toString(){return`(${this._array[0].toFixed(2)}, ${this._array[1].toFixed(2)}, ${this._array[2].toFixed(2)})`}lerp(e,t){return this._array[0]+=t*(e.x-this._array[0]),this._array[1]+=t*(e.y-this._array[1]),this._array[2]+=t*(e.z-this._array[2]),this}add(e){const t=e.array;return this._array[0]+=t[0],this._array[1]+=t[1],this._array[2]+=t[2],this}add3f(e,t,n){return this._array[0]+=e,this._array[1]+=t,this._array[2]+=n,this}subtract(e){const t=e.array;return this._array[0]-=t[0],this._array[1]-=t[1],this._array[2]-=t[2],this}subtract3f(e,t,n){return this._array[0]-=e,this._array[1]-=t,this._array[2]-=n,this}multiplyScalar(e){return"object"==typeof e&&console.warn("should use Vec3.multiply for vector * vector operation"),this._array[0]*=e,this._array[1]*=e,this._array[2]*=e,this}multiply(e){"object"!=typeof e&&console.warn("should use Vec3.scale for vector * scalar operation");const t=e.array;return this._array[0]*=t[0],this._array[1]*=t[1],this._array[2]*=t[2],this}multiply3f(e,t,n){return this._array[0]*=e,this._array[1]*=t,this._array[2]*=n,this}divide(e){const t=e.array;return this._array[0]/=t[0],this._array[1]/=t[1],this._array[2]/=t[2],this}divide3f(e,t,n){return this._array[0]/=e,this._array[1]/=t,this._array[2]/=n,this}negative(){return this._array[0]=-this._array[0],this._array[1]=-this._array[1],this._array[2]=-this._array[2],this}clampf(e,t){const n=e.array,i=t.array;return this._array[0]=yn(this._array[0],n[0],i[0]),this._array[1]=yn(this._array[1],n[1],i[1]),this._array[2]=yn(this._array[2],n[2],i[2]),this}dot(e){const t=e.array;return this._array[0]*t[0]+this._array[1]*t[1]+this._array[2]*t[2]}cross(e){const t=this._array[0],n=this._array[1],i=this._array[2],o=e.array[0],a=e.array[1],r=e.array[2];return this._array[0]=n*r-i*a,this._array[1]=i*o-t*r,this._array[2]=t*a-n*o,this}length(){return Math.sqrt(this._array[0]*this._array[0]+this._array[1]*this._array[1]+this._array[2]*this._array[2])}lengthSqr(){return this._array[0]*this._array[0]+this._array[1]*this._array[1]+this._array[2]*this._array[2]}normalize(){const e=this._array[0],t=this._array[1],n=this._array[2];let i=e*e+t*t+n*n;return i>0&&(i=1/Math.sqrt(i),this._array[0]=e*i,this._array[1]=t*i,this._array[2]=n*i),this}transformMat4(e){const t=this._array[0],n=this._array[1],i=this._array[2],o=e.array;let a=o[3]*t+o[7]*n+o[11]*i+o[15];return a=a?1/a:1,this._array[0]=(o[0]*t+o[4]*n+o[8]*i+o[12])*a,this._array[1]=(o[1]*t+o[5]*n+o[9]*i+o[13])*a,this._array[2]=(o[2]*t+o[6]*n+o[10]*i+o[14])*a,this}}e("aZ",Gn),Gn.UNIT_X=Object.freeze(new Gn(1,0,0)),Gn.UNIT_Y=Object.freeze(new Gn(0,1,0)),Gn.UNIT_Z=Object.freeze(new Gn(0,0,1)),Gn.RIGHT=Object.freeze(new Gn(1,0,0)),Gn.UP=Object.freeze(new Gn(0,1,0)),Gn.FORWARD=Object.freeze(new Gn(0,0,-1)),Gn.ZERO=Object.freeze(new Gn(0,0,0)),Gn.ONE=Object.freeze(new Gn(1,1,1)),Gn.NEG_ONE=Object.freeze(new Gn(-1,-1,-1));const Vn=new Gn,Hn=new Gn;function Wn(e,t,n){return new Gn(e,t,n)}Ln(Gn.prototype,["x","y","z"]),Rt.fastDefine("cc.Vec3",Gn,{x:0,y:0,z:0}),c.Vec3=Gn,c.v3=Wn;class qn extends jn{static clone(e){return new qn(e.m00,e.m01,e.m02,e.m03,e.m04,e.m05,e.m06,e.m07,e.m08)}static copy(e,t){return e.m00=t.m00,e.m01=t.m01,e.m02=t.m02,e.m03=t.m03,e.m04=t.m04,e.m05=t.m05,e.m06=t.m06,e.m07=t.m07,e.m08=t.m08,e}static set(e,t,n,i,o,a,r,s,c,l){return e.m00=t,e.m01=n,e.m02=i,e.m03=o,e.m04=a,e.m05=r,e.m06=s,e.m07=c,e.m08=l,e}static identity(e){return e.m00=1,e.m01=0,e.m02=0,e.m03=0,e.m04=1,e.m05=0,e.m06=0,e.m07=0,e.m08=1,e}static transpose(e,t){if(e===t){const n=t.m01,i=t.m02,o=t.m05;e.m01=t.m03,e.m02=t.m06,e.m03=n,e.m05=t.m07,e.m06=i,e.m07=o}else e.m00=t.m00,e.m01=t.m03,e.m02=t.m06,e.m03=t.m01,e.m04=t.m04,e.m05=t.m07,e.m06=t.m02,e.m07=t.m05,e.m08=t.m08;return e}static invert(e,t){const n=t.m00,i=t.m01,o=t.m02,a=t.m03,r=t.m04,s=t.m05,c=t.m06,l=t.m07,_=t.m08,u=_*r-s*l,f=-_*a+s*c,h=l*a-r*c;let p=n*u+i*f+o*h;return 0===p?(e.m00=0,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=0,e.m06=0,e.m07=0,e.m08=0,e):(p=1/p,e.m00=u*p,e.m01=(-_*i+o*l)*p,e.m02=(s*i-o*r)*p,e.m03=f*p,e.m04=(_*n-o*c)*p,e.m05=(-s*n+o*a)*p,e.m06=h*p,e.m07=(-l*n+i*c)*p,e.m08=(r*n-i*a)*p,e)}static determinant(e){const t=e.m00,n=e.m01,i=e.m02,o=e.m03,a=e.m04,r=e.m05,s=e.m06,c=e.m07,l=e.m08;return t*(l*a-r*c)+n*(-l*o+r*s)+i*(c*o-a*s)}static multiply(e,t,n){const i=t.m00,o=t.m01,a=t.m02,r=t.m03,s=t.m04,c=t.m05,l=t.m06,_=t.m07,u=t.m08,f=n.m00,h=n.m01,p=n.m02,m=n.m03,d=n.m04,v=n.m05,g=n.m06,y=n.m07,A=n.m08;return e.m00=f*i+h*r+p*l,e.m01=f*o+h*s+p*_,e.m02=f*a+h*c+p*u,e.m03=m*i+d*r+v*l,e.m04=m*o+d*s+v*_,e.m05=m*a+d*c+v*u,e.m06=g*i+y*r+A*l,e.m07=g*o+y*s+A*_,e.m08=g*a+y*c+A*u,e}static multiplyMat4(e,t,n){const i=t.m00,o=t.m01,a=t.m02,r=t.m03,s=t.m04,c=t.m05,l=t.m06,_=t.m07,u=t.m08,f=n.m00,h=n.m01,p=n.m02,m=n.m04,d=n.m05,v=n.m06,g=n.m08,y=n.m09,A=n.m10;return e.m00=f*i+h*r+p*l,e.m01=f*o+h*s+p*_,e.m02=f*a+h*c+p*u,e.m03=m*i+d*r+v*l,e.m04=m*o+d*s+v*_,e.m05=m*a+d*c+v*u,e.m06=g*i+y*r+A*l,e.m07=g*o+y*s+A*_,e.m08=g*a+y*c+A*u,e}static transform(e,t,n){const i=t.m00,o=t.m01,a=t.m02,r=t.m03,s=t.m04,c=t.m05,l=t.m06,_=t.m07,u=t.m08,f=n.x,h=n.y;return e.m00=i,e.m01=o,e.m02=a,e.m03=r,e.m04=s,e.m05=c,e.m06=f*i+h*r+l,e.m07=f*o+h*s+_,e.m08=f*a+h*c+u,e}static scale(e,t,n){const i=n.x,o=n.y;return e.m00=i*t.m00,e.m01=i*t.m01,e.m02=i*t.m02,e.m03=o*t.m03,e.m04=o*t.m04,e.m05=o*t.m05,e.m06=t.m06,e.m07=t.m07,e.m08=t.m08,e}static rotate(e,t,n){const i=t.m00,o=t.m01,a=t.m02,r=t.m03,s=t.m04,c=t.m05,l=t.m06,_=t.m07,u=t.m08,f=Math.sin(n),h=Math.cos(n);return e.m00=h*i+f*r,e.m01=h*o+f*s,e.m02=h*a+f*c,e.m03=h*r-f*i,e.m04=h*s-f*o,e.m05=h*c-f*a,e.m06=l,e.m07=_,e.m08=u,e}static fromMat4(e,t){return e.m00=t.m00,e.m01=t.m01,e.m02=t.m02,e.m03=t.m04,e.m04=t.m05,e.m05=t.m06,e.m06=t.m08,e.m07=t.m09,e.m08=t.m10,e}static fromViewUp(e,t,n){return Gn.lengthSqr(t)<dn*dn?(qn.identity(e),e):(Gn.normalize(Yn,Gn.cross(Yn,n||Gn.UNIT_Y,t)),Gn.lengthSqr(Yn)<dn*dn?(qn.identity(e),e):(Gn.cross(Xn,t,Yn),qn.set(e,Yn.x,Yn.y,Yn.z,Xn.x,Xn.y,Xn.z,t.x,t.y,t.z),e))}static fromTranslation(e,t){return e.m00=1,e.m01=0,e.m02=0,e.m03=0,e.m04=1,e.m05=0,e.m06=t.x,e.m07=t.y,e.m08=1,e}static fromScaling(e,t){return e.m00=t.x,e.m01=0,e.m02=0,e.m03=0,e.m04=t.y,e.m05=0,e.m06=0,e.m07=0,e.m08=1,e}static fromRotation(e,t){const n=Math.sin(t),i=Math.cos(t);return e.m00=i,e.m01=n,e.m02=0,e.m03=-n,e.m04=i,e.m05=0,e.m06=0,e.m07=0,e.m08=1,e}static fromQuat(e,t){const n=t.x,i=t.y,o=t.z,a=t.w,r=n+n,s=i+i,c=o+o,l=n*r,_=i*r,u=i*s,f=o*r,h=o*s,p=o*c,m=a*r,d=a*s,v=a*c;return e.m00=1-u-p,e.m03=_-v,e.m06=f+d,e.m01=_+v,e.m04=1-l-p,e.m07=h-m,e.m02=f-d,e.m05=h+m,e.m08=1-l-u,e}static inverseTransposeMat4(e,t){const n=t.m00,i=t.m01,o=t.m02,a=t.m03,r=t.m04,s=t.m05,c=t.m06,l=t.m07,_=t.m08,u=t.m09,f=t.m10,h=t.m11,p=t.m12,m=t.m13,d=t.m14,v=t.m15,g=n*s-i*r,y=n*c-o*r,A=n*l-a*r,x=i*c-o*s,b=i*l-a*s,C=o*l-a*c,S=_*m-u*p,E=_*d-f*p,w=_*v-h*p,T=u*d-f*m,P=u*v-h*m,I=f*v-h*d;let R=g*I-y*P+A*T+x*w-b*E+C*S;return R?(R=1/R,e.m00=(s*I-c*P+l*T)*R,e.m01=(c*w-r*I-l*E)*R,e.m02=(r*P-s*w+l*S)*R,e.m03=(o*P-i*I-a*T)*R,e.m04=(n*I-o*w+a*E)*R,e.m05=(i*w-n*P-a*S)*R,e.m06=(m*C-d*b+v*x)*R,e.m07=(d*A-p*C-v*y)*R,e.m08=(p*b-m*A+v*g)*R,e):null}static toArray(e,t,n=0){return e[n+0]=t.m00,e[n+1]=t.m01,e[n+2]=t.m02,e[n+3]=t.m03,e[n+4]=t.m04,e[n+5]=t.m05,e[n+6]=t.m06,e[n+7]=t.m07,e[n+8]=t.m08,e}static fromArray(e,t,n=0){return e.m00=t[n+0],e.m01=t[n+1],e.m02=t[n+2],e.m03=t[n+3],e.m04=t[n+4],e.m05=t[n+5],e.m06=t[n+6],e.m07=t[n+7],e.m08=t[n+8],e}static add(e,t,n){return e.m00=t.m00+n.m00,e.m01=t.m01+n.m01,e.m02=t.m02+n.m02,e.m03=t.m03+n.m03,e.m04=t.m04+n.m04,e.m05=t.m05+n.m05,e.m06=t.m06+n.m06,e.m07=t.m07+n.m07,e.m08=t.m08+n.m08,e}static subtract(e,t,n){return e.m00=t.m00-n.m00,e.m01=t.m01-n.m01,e.m02=t.m02-n.m02,e.m03=t.m03-n.m03,e.m04=t.m04-n.m04,e.m05=t.m05-n.m05,e.m06=t.m06-n.m06,e.m07=t.m07-n.m07,e.m08=t.m08-n.m08,e}static multiplyScalar(e,t,n){return e.m00=t.m00*n,e.m01=t.m01*n,e.m02=t.m02*n,e.m03=t.m03*n,e.m04=t.m04*n,e.m05=t.m05*n,e.m06=t.m06*n,e.m07=t.m07*n,e.m08=t.m08*n,e}static multiplyScalarAndAdd(e,t,n,i){return e.m00=n.m00*i+t.m00,e.m01=n.m01*i+t.m01,e.m02=n.m02*i+t.m02,e.m03=n.m03*i+t.m03,e.m04=n.m04*i+t.m04,e.m05=n.m05*i+t.m05,e.m06=n.m06*i+t.m06,e.m07=n.m07*i+t.m07,e.m08=n.m08*i+t.m08,e}static strictEquals(e,t){return e.m00===t.m00&&e.m01===t.m01&&e.m02===t.m02&&e.m03===t.m03&&e.m04===t.m04&&e.m05===t.m05&&e.m06===t.m06&&e.m07===t.m07&&e.m08===t.m08}static equals(e,t,n=dn){return Math.abs(e.m00-t.m00)<=n*Math.max(1,Math.abs(e.m00),Math.abs(t.m00))&&Math.abs(e.m01-t.m01)<=n*Math.max(1,Math.abs(e.m01),Math.abs(t.m01))&&Math.abs(e.m02-t.m02)<=n*Math.max(1,Math.abs(e.m02),Math.abs(t.m02))&&Math.abs(e.m03-t.m03)<=n*Math.max(1,Math.abs(e.m03),Math.abs(t.m03))&&Math.abs(e.m04-t.m04)<=n*Math.max(1,Math.abs(e.m04),Math.abs(t.m04))&&Math.abs(e.m05-t.m05)<=n*Math.max(1,Math.abs(e.m05),Math.abs(t.m05))&&Math.abs(e.m06-t.m06)<=n*Math.max(1,Math.abs(e.m06),Math.abs(t.m06))&&Math.abs(e.m07-t.m07)<=n*Math.max(1,Math.abs(e.m07),Math.abs(t.m07))&&Math.abs(e.m08-t.m08)<=n*Math.max(1,Math.abs(e.m08),Math.abs(t.m08))}get m00(){return this._array[0]}set m00(e){this._array[0]=e}get m01(){return this._array[1]}set m01(e){this._array[1]=e}get m02(){return this._array[2]}set m02(e){this._array[2]=e}get m03(){return this._array[3]}set m03(e){this._array[3]=e}get m04(){return this._array[4]}set m04(e){this._array[4]=e}get m05(){return this._array[5]}set m05(e){this._array[5]=e}get m06(){return this._array[6]}set m06(e){this._array[6]=e}get m07(){return this._array[7]}set m07(e){this._array[7]=e}get m08(){return this._array[8]}set m08(e){this._array[8]=e}constructor(e=1,t=0,n=0,i=0,o=1,a=0,r=0,s=0,c=1){if(super(),e&&"object"==typeof e)if(ArrayBuffer.isView(e))this._array=e,this._array.set([1,0,0,0,1,0,0,0,1]);else{const t=e.array;this._array=jn.createFloatArray(9),this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2],this._array[3]=t[3],this._array[4]=t[4],this._array[5]=t[5],this._array[6]=t[6],this._array[7]=t[7],this._array[8]=t[8]}else this._array=jn.createFloatArray(9),this._array[0]=e,this._array[1]=t,this._array[2]=n,this._array[3]=i,this._array[4]=o,this._array[5]=a,this._array[6]=r,this._array[7]=s,this._array[8]=c}clone(){const e=this._array;return new qn(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}set(e=1,t=0,n=0,i=0,o=1,a=0,r=0,s=0,c=1){if(e&&"object"==typeof e){const t=e.array;this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2],this._array[3]=t[3],this._array[4]=t[4],this._array[5]=t[5],this._array[6]=t[6],this._array[7]=t[7],this._array[8]=t[8]}else this._array[0]=e,this._array[1]=t,this._array[2]=n,this._array[3]=i,this._array[4]=o,this._array[5]=a,this._array[6]=r,this._array[7]=s,this._array[8]=c;return this}equals(e,t=dn){const n=e.array;return Math.abs(this._array[0]-n[0])<=t*Math.max(1,Math.abs(this._array[0]),Math.abs(n[0]))&&Math.abs(this._array[1]-n[1])<=t*Math.max(1,Math.abs(this._array[1]),Math.abs(n[1]))&&Math.abs(this._array[2]-n[2])<=t*Math.max(1,Math.abs(this._array[2]),Math.abs(n[2]))&&Math.abs(this._array[3]-n[3])<=t*Math.max(1,Math.abs(this._array[3]),Math.abs(n[3]))&&Math.abs(this._array[4]-n[4])<=t*Math.max(1,Math.abs(this._array[4]),Math.abs(n[4]))&&Math.abs(this._array[5]-n[5])<=t*Math.max(1,Math.abs(this._array[5]),Math.abs(n[5]))&&Math.abs(this._array[6]-n[6])<=t*Math.max(1,Math.abs(this._array[6]),Math.abs(n[6]))&&Math.abs(this._array[7]-n[7])<=t*Math.max(1,Math.abs(this._array[7]),Math.abs(n[7]))&&Math.abs(this._array[8]-n[8])<=t*Math.max(1,Math.abs(this._array[8]),Math.abs(n[8]))}strictEquals(e){const t=e.array;return this._array[0]===t[0]&&this._array[1]===t[1]&&this._array[2]===t[2]&&this._array[3]===t[3]&&this._array[4]===t[4]&&this._array[5]===t[5]&&this._array[6]===t[6]&&this._array[7]===t[7]&&this._array[8]===t[8]}toString(){return`[\n${this._array[0]}, ${this._array[1]}, ${this._array[2]},\n${this._array[3]},\n${this._array[4]}, ${this._array[5]},\n${this._array[6]}, ${this._array[7]},\n${this._array[8]}\n]`}identity(){return this._array[0]=1,this._array[1]=0,this._array[2]=0,this._array[3]=0,this._array[4]=1,this._array[5]=0,this._array[6]=0,this._array[7]=0,this._array[8]=1,this}transpose(){const e=this._array[1],t=this._array[2],n=this._array[5];return this._array[1]=this._array[3],this._array[2]=this._array[6],this._array[3]=e,this._array[5]=this._array[7],this._array[6]=t,this._array[7]=n,this}invert(){const e=this._array[0],t=this._array[1],n=this._array[2],i=this._array[3],o=this._array[4],a=this._array[5],r=this._array[6],s=this._array[7],c=this._array[8],l=c*o-a*s,_=-c*i+a*r,u=s*i-o*r;let f=e*l+t*_+n*u;return 0===f?(this.set(0,0,0,0,0,0,0,0,0),this):(f=1/f,this._array[0]=l*f,this._array[1]=(-c*t+n*s)*f,this._array[2]=(a*t-n*o)*f,this._array[3]=_*f,this._array[4]=(c*e-n*r)*f,this._array[5]=(-a*e+n*i)*f,this._array[6]=u*f,this._array[7]=(-s*e+t*r)*f,this._array[8]=(o*e-t*i)*f,this)}determinant(){const e=this._array[0],t=this._array[1],n=this._array[2],i=this._array[3],o=this._array[4],a=this._array[5],r=this._array[6],s=this._array[7],c=this._array[8];return e*(c*o-a*s)+t*(-c*i+a*r)+n*(s*i-o*r)}add(e){const t=e.array;return this._array[0]+=t[0],this._array[1]+=t[1],this._array[2]+=t[2],this._array[3]+=t[3],this._array[4]+=t[4],this._array[5]+=t[5],this._array[6]+=t[6],this._array[7]+=t[7],this._array[8]+=t[8],this}subtract(e){const t=e.array;return this._array[0]-=t[0],this._array[1]-=t[1],this._array[2]-=t[2],this._array[3]-=t[3],this._array[4]-=t[4],this._array[5]-=t[5],this._array[6]-=t[6],this._array[7]-=t[7],this._array[8]-=t[8],this}multiply(e){const t=this._array[0],n=this._array[1],i=this._array[2],o=this._array[3],a=this._array[4],r=this._array[5],s=this._array[6],c=this._array[7],l=this._array[8],_=e.array,u=_[0],f=_[1],h=_[2],p=_[3],m=_[4],d=_[5],v=_[6],g=_[7],y=_[8];return this._array[0]=u*t+f*o+h*s,this._array[1]=u*n+f*a+h*c,this._array[2]=u*i+f*r+h*l,this._array[3]=p*t+m*o+d*s,this._array[4]=p*n+m*a+d*c,this._array[5]=p*i+m*r+d*l,this._array[6]=v*t+g*o+y*s,this._array[7]=v*n+g*a+y*c,this._array[8]=v*i+g*r+y*l,this}multiplyScalar(e){return this._array[0]*=e,this._array[1]*=e,this._array[2]*=e,this._array[3]*=e,this._array[4]*=e,this._array[5]*=e,this._array[6]*=e,this._array[7]*=e,this._array[8]*=e,this}scale(e){const t=e.array[0],n=e.array[1];return this._array[0]*=t,this._array[1]*=t,this._array[2]*=t,this._array[3]*=n,this._array[4]*=n,this._array[5]*=n,this}rotate(e){const t=this._array[0],n=this._array[1],i=this._array[2],o=this._array[3],a=this._array[4],r=this._array[5],s=this._array[6],c=this._array[7],l=this._array[8],_=Math.sin(e),u=Math.cos(e);return this._array[0]=u*t+_*o,this._array[1]=u*n+_*a,this._array[2]=u*i+_*r,this._array[3]=u*o-_*t,this._array[4]=u*a-_*n,this._array[5]=u*r-_*i,this._array[6]=s,this._array[7]=c,this._array[8]=l,this}fromQuat(e){const t=e.x,n=e.y,i=e.z,o=e.w,a=t+t,r=n+n,s=i+i,c=t*a,l=n*a,_=n*r,u=i*a,f=i*r,h=i*s,p=o*a,m=o*r,d=o*s;return this._array[0]=1-_-h,this._array[3]=l-d,this._array[6]=u+m,this._array[1]=l+d,this._array[4]=1-c-h,this._array[7]=f-p,this._array[2]=u-m,this._array[5]=f+p,this._array[8]=1-c-_,this}}e("eC",qn),qn.IDENTITY=Object.freeze(new qn);const Yn=new Gn,Xn=new Gn;Ln(qn.prototype,["m00","m01","m02","m03","m04","m05","m06","m07","m08"]),Rt.fastDefine("cc.Mat3",qn,{m00:1,m01:0,m02:0,m03:0,m04:1,m05:0,m06:0,m07:0,m08:1}),c.Mat3=qn;class Qn extends jn{static clone(e){return new Qn(e.x,e.y,e.z,e.w)}static copy(e,t){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}static set(e,t,n,i,o){return e.x=t,e.y=n,e.z=i,e.w=o,e}static identity(e){return e.x=0,e.y=0,e.z=0,e.w=1,e}static rotationTo(e,t,n){const i=Gn.dot(t,n);return i<-.999999?(Gn.cross(Jn,Gn.UNIT_X,t),Jn.length()<1e-6&&Gn.cross(Jn,Gn.UNIT_Y,t),Gn.normalize(Jn,Jn),Qn.fromAxisAngle(e,Jn,Math.PI),e):i>.999999?(e.x=0,e.y=0,e.z=0,e.w=1,e):(Gn.cross(Jn,t,n),e.x=Jn.x,e.y=Jn.y,e.z=Jn.z,e.w=1+i,Qn.normalize(e,e))}static getAxisAngle(e,t){const n=2*Math.acos(t.w),i=Math.sin(n/2);return 0!==i?(e.x=t.x/i,e.y=t.y/i,e.z=t.z/i):(e.x=1,e.y=0,e.z=0),n}static multiply(e,t,n){const i=t.x*n.w+t.w*n.x+t.y*n.z-t.z*n.y,o=t.y*n.w+t.w*n.y+t.z*n.x-t.x*n.z,a=t.z*n.w+t.w*n.z+t.x*n.y-t.y*n.x,r=t.w*n.w-t.x*n.x-t.y*n.y-t.z*n.z;return e.x=i,e.y=o,e.z=a,e.w=r,e}static multiplyScalar(e,t,n){return e.x=t.x*n,e.y=t.y*n,e.z=t.z*n,e.w=t.w*n,e}static scaleAndAdd(e,t,n,i){return e.x=t.x+n.x*i,e.y=t.y+n.y*i,e.z=t.z+n.z*i,e.w=t.w+n.w*i,e}static rotateX(e,t,n){n*=.5;const i=Math.sin(n),o=Math.cos(n),{x:a,y:r,z:s,w:c}=t;return e.x=a*o+c*i,e.y=r*o+s*i,e.z=s*o-r*i,e.w=c*o-a*i,e}static rotateY(e,t,n){n*=.5;const i=Math.sin(n),o=Math.cos(n),{x:a,y:r,z:s,w:c}=t;return e.x=a*o-s*i,e.y=r*o+c*i,e.z=s*o+a*i,e.w=c*o-r*i,e}static rotateZ(e,t,n){n*=.5;const i=Math.sin(n),o=Math.cos(n),{x:a,y:r,z:s,w:c}=t;return e.x=a*o+r*i,e.y=r*o-a*i,e.z=s*o+c*i,e.w=c*o-s*i,e}static rotateAround(e,t,n,i){return Qn.invert(Kn,t),Gn.transformQuat(Jn,n,Kn),Qn.fromAxisAngle(Kn,Jn,i),Qn.multiply(e,t,Kn),e}static rotateAroundLocal(e,t,n,i){return Qn.fromAxisAngle(Kn,n,i),Qn.multiply(e,t,Kn),e}static calculateW(e,t){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=Math.sqrt(Math.abs(1-t.x*t.x-t.y*t.y-t.z*t.z)),e}static dot(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w}static lerp(e,t,n,i){return e.x=t.x+i*(n.x-t.x),e.y=t.y+i*(n.y-t.y),e.z=t.z+i*(n.z-t.z),e.w=t.w+i*(n.w-t.w),e}static slerp(e,t,n,i){let o=0,a=0,r=n.x,s=n.y,c=n.z,l=n.w,_=t.x*n.x+t.y*n.y+t.z*n.z+t.w*n.w;if(_<0&&(_=-_,r=-r,s=-s,c=-c,l=-l),1-_>1e-6){const e=Math.acos(_),t=Math.sin(e);o=Math.sin((1-i)*e)/t,a=Math.sin(i*e)/t}else o=1-i,a=i;return e.x=o*t.x+a*r,e.y=o*t.y+a*s,e.z=o*t.z+a*c,e.w=o*t.w+a*l,e}static sqlerp(e,t,n,i,o,a){return Qn.slerp(Kn,t,o,a),Qn.slerp(Zn,n,i,a),Qn.slerp(e,Kn,Zn,2*a*(1-a)),e}static invert(e,t){const n=t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w,i=n?1/n:0;return e.x=-t.x*i,e.y=-t.y*i,e.z=-t.z*i,e.w=t.w*i,e}static conjugate(e,t){return e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=t.w,e}static len(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w)}static lengthSqr(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w}static normalize(e,t){let n=t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w;return n>0&&(n=1/Math.sqrt(n),e.x=t.x*n,e.y=t.y*n,e.z=t.z*n,e.w=t.w*n),e}static fromAxes(e,t,n,i){return qn.set($n,t.x,t.y,t.z,n.x,n.y,n.z,i.x,i.y,i.z),Qn.normalize(e,Qn.fromMat3(e,$n))}static fromViewUp(e,t,n){return qn.fromViewUp($n,t,n),Qn.normalize(e,Qn.fromMat3(e,$n))}static fromAxisAngle(e,t,n){n*=.5;const i=Math.sin(n);return e.x=i*t.x,e.y=i*t.y,e.z=i*t.z,e.w=Math.cos(n),e}static fromMat3(e,t){const{m00:n,m03:i,m06:o,m01:a,m04:r,m07:s,m02:c,m05:l,m08:_}=t,u=n+r+_;if(u>0){const t=.5/Math.sqrt(u+1);e.w=.25/t,e.x=(l-s)*t,e.y=(o-c)*t,e.z=(a-i)*t}else if(n>r&&n>_){const t=2*Math.sqrt(1+n-r-_);e.w=(l-s)/t,e.x=.25*t,e.y=(i+a)/t,e.z=(o+c)/t}else if(r>_){const t=2*Math.sqrt(1+r-n-_);e.w=(o-c)/t,e.x=(i+a)/t,e.y=.25*t,e.z=(s+l)/t}else{const t=2*Math.sqrt(1+_-n-r);e.w=(a-i)/t,e.x=(o+c)/t,e.y=(s+l)/t,e.z=.25*t}return e}static fromEuler(e,t,n,i){t*=ei,n*=ei,i*=ei;const o=Math.sin(t),a=Math.cos(t),r=Math.sin(n),s=Math.cos(n),c=Math.sin(i),l=Math.cos(i);return e.x=o*s*l+a*r*c,e.y=a*r*l+o*s*c,e.z=a*s*c-o*r*l,e.w=a*s*l-o*r*c,e}static fromAngleZ(e,t){return t*=ei,e.x=e.y=0,e.z=Math.sin(t),e.w=Math.cos(t),e}static toAxisX(e,t){const n=2*t.y,i=2*t.z;return e.x=1-n*t.y-i*t.z,e.y=n*t.x+i*t.w,e.z=i*t.x+n*t.w,e}static toAxisY(e,t){const n=2*t.x,i=2*t.y,o=2*t.z;return e.x=i*t.x-o*t.w,e.y=1-n*t.x-o*t.z,e.z=o*t.y+n*t.w,e}static toAxisZ(e,t){const n=2*t.x,i=2*t.y,o=2*t.z;return e.x=o*t.x-i*t.w,e.y=o*t.y-n*t.w,e.z=1-n*t.x-i*t.y,e}static toEuler(e,t,n){const{x:i,y:o,z:a,w:r}=t;let s=0,c=0,l=0;const _=i*o+a*r;if(_>.499999)s=0,c=Cn(2*Math.atan2(i,r)),l=90;else if(_<-.499999)s=0,c=-Cn(2*Math.atan2(i,r)),l=-90;else{const e=i*i,t=o*o,u=a*a;s=Cn(Math.atan2(2*i*r-2*o*a,1-2*e-2*u)),c=Cn(Math.atan2(2*o*r-2*i*a,1-2*t-2*u)),l=Cn(Math.asin(2*_)),n&&(s=-180*Math.sign(s+1e-6)+s,c=-180*Math.sign(c+1e-6)+c,l=180*Math.sign(l+1e-6)-l)}return e.x=s,e.y=c,e.z=l,e}static toArray(e,t,n=0){return e[n+0]=t.x,e[n+1]=t.y,e[n+2]=t.z,e[n+3]=t.w,e}static fromArray(e,t,n=0){return e.x=t[n+0],e.y=t[n+1],e.z=t[n+2],e.w=t[n+3],e}static strictEquals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}static equals(e,t,n=dn){return Math.abs(e.x-t.x)<=n*Math.max(1,Math.abs(e.x),Math.abs(t.x))&&Math.abs(e.y-t.y)<=n*Math.max(1,Math.abs(e.y),Math.abs(t.y))&&Math.abs(e.z-t.z)<=n*Math.max(1,Math.abs(e.z),Math.abs(t.z))&&Math.abs(e.w-t.w)<=n*Math.max(1,Math.abs(e.w),Math.abs(t.w))}get x(){return this._array[0]}set x(e){this._array[0]=e}get y(){return this._array[1]}set y(e){this._array[1]=e}get z(){return this._array[2]}set z(e){this._array[2]=e}get w(){return this._array[3]}set w(e){this._array[3]=e}constructor(e,t,n,i){if(super(),e&&"object"==typeof e)if(ArrayBuffer.isView(e))this._array=e,this._array.fill(0),this._array[3]=1;else{const t=e.array;this._array=jn.createFloatArray(4),this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2],this._array[3]=t[3]}else this._array=jn.createFloatArray(4),this._array[0]=e||0,this._array[1]=t||0,this._array[2]=n||0,this._array[3]=null!=i?i:1}clone(){return new Qn(this._array[0],this._array[1],this._array[2],this._array[3])}set(e,t,n,i){if(e&&"object"==typeof e){const t=e.array;this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2],this._array[3]=t[3]}else this._array[0]=e||0,this._array[1]=t||0,this._array[2]=n||0,this._array[3]=null!=i?i:1;return this}equals(e,t=dn){const n=e.array;return Math.abs(this._array[0]-n[0])<=t*Math.max(1,Math.abs(this._array[0]),Math.abs(n[0]))&&Math.abs(this._array[1]-n[1])<=t*Math.max(1,Math.abs(this._array[1]),Math.abs(n[1]))&&Math.abs(this._array[2]-n[2])<=t*Math.max(1,Math.abs(this._array[2]),Math.abs(n[2]))&&Math.abs(this._array[3]-n[3])<=t*Math.max(1,Math.abs(this._array[3]),Math.abs(n[3]))}strictEquals(e){const t=e.array;return e&&this._array[0]===t[0]&&this._array[1]===t[1]&&this._array[2]===t[2]&&this._array[3]===t[3]}getEulerAngles(e){return Qn.toEuler(e,this)}lerp(e,t){const n=e.array;return this._array[0]+=t*(n[0]-this._array[0]),this._array[1]+=t*(n[1]-this._array[1]),this._array[2]+=t*(n[2]-this._array[2]),this._array[3]+=t*(n[3]-this._array[3]),this}slerp(e,t){return Qn.slerp(this,this,e,t)}length(){const e=this._array;return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3])}lengthSqr(){const e=this._array;return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]}}e("bN",Qn),Qn.IDENTITY=Object.freeze(new Qn),Ln(Qn.prototype,["x","y","z","w"]);const Kn=new Qn,Zn=new Qn,Jn=new Gn,$n=new qn,ei=.5*Math.PI/180;function ti(e=0,t=0,n=0,i=1){return new Qn(e,t,n,i)}Rt.fastDefine("cc.Quat",Qn,{x:0,y:0,z:0,w:1}),c.Quat=Qn,c.quat=ti;const ni=e("e5",Object.freeze([Object.freeze([1,0,0,1]),Object.freeze([0,1,-1,0]),Object.freeze([-1,0,0,-1]),Object.freeze([0,-1,1,0])]));class ii extends jn{static clone(e){return new ii(e.m00,e.m01,e.m02,e.m03,e.m04,e.m05,e.m06,e.m07,e.m08,e.m09,e.m10,e.m11,e.m12,e.m13,e.m14,e.m15)}static copy(e,t){return e.m00=t.m00,e.m01=t.m01,e.m02=t.m02,e.m03=t.m03,e.m04=t.m04,e.m05=t.m05,e.m06=t.m06,e.m07=t.m07,e.m08=t.m08,e.m09=t.m09,e.m10=t.m10,e.m11=t.m11,e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15,e}static set(e,t,n,i,o,a,r,s,c,l,_,u,f,h,p,m,d){return e.m00=t,e.m01=n,e.m02=i,e.m03=o,e.m04=a,e.m05=r,e.m06=s,e.m07=c,e.m08=l,e.m09=_,e.m10=u,e.m11=f,e.m12=h,e.m13=p,e.m14=m,e.m15=d,e}static identity(e){return e.m00=1,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=1,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=1,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}static transpose(e,t){if(e===t){const n=t.m01,i=t.m02,o=t.m03,a=t.m06,r=t.m07,s=t.m11;e.m01=t.m04,e.m02=t.m08,e.m03=t.m12,e.m04=n,e.m06=t.m09,e.m07=t.m13,e.m08=i,e.m09=a,e.m11=t.m14,e.m12=o,e.m13=r,e.m14=s}else e.m00=t.m00,e.m01=t.m04,e.m02=t.m08,e.m03=t.m12,e.m04=t.m01,e.m05=t.m05,e.m06=t.m09,e.m07=t.m13,e.m08=t.m02,e.m09=t.m06,e.m10=t.m10,e.m11=t.m14,e.m12=t.m03,e.m13=t.m07,e.m14=t.m11,e.m15=t.m15;return e}static invert(e,t){const n=t.m00,i=t.m01,o=t.m02,a=t.m03,r=t.m04,s=t.m05,c=t.m06,l=t.m07,_=t.m08,u=t.m09,f=t.m10,h=t.m11,p=t.m12,m=t.m13,d=t.m14,v=t.m15,g=n*s-i*r,y=n*c-o*r,A=n*l-a*r,x=i*c-o*s,b=i*l-a*s,C=o*l-a*c,S=_*m-u*p,E=_*d-f*p,w=_*v-h*p,T=u*d-f*m,P=u*v-h*m,I=f*v-h*d;let R=g*I-y*P+A*T+x*w-b*E+C*S;return 0===R?(e.m00=0,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=0,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=0,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=0,e):(R=1/R,e.m00=(s*I-c*P+l*T)*R,e.m01=(o*P-i*I-a*T)*R,e.m02=(m*C-d*b+v*x)*R,e.m03=(f*b-u*C-h*x)*R,e.m04=(c*w-r*I-l*E)*R,e.m05=(n*I-o*w+a*E)*R,e.m06=(d*A-p*C-v*y)*R,e.m07=(_*C-f*A+h*y)*R,e.m08=(r*P-s*w+l*S)*R,e.m09=(i*w-n*P-a*S)*R,e.m10=(p*b-m*A+v*g)*R,e.m11=(u*A-_*b-h*g)*R,e.m12=(s*E-r*T-c*S)*R,e.m13=(n*T-i*E+o*S)*R,e.m14=(m*y-p*x-d*g)*R,e.m15=(_*x-u*y+f*g)*R,e)}static determinant(e){const t=e.m00,n=e.m01,i=e.m02,o=e.m03,a=e.m04,r=e.m05,s=e.m06,c=e.m07,l=e.m08,_=e.m09,u=e.m10,f=e.m11,h=e.m12,p=e.m13,m=e.m14,d=e.m15;return(t*r-n*a)*(u*d-f*m)-(t*s-i*a)*(_*d-f*p)+(t*c-o*a)*(_*m-u*p)+(n*s-i*r)*(l*d-f*h)-(n*c-o*r)*(l*m-u*h)+(i*c-o*s)*(l*p-_*h)}static multiply(e,t,n){const i=t.m00,o=t.m01,a=t.m02,r=t.m03,s=t.m04,c=t.m05,l=t.m06,_=t.m07,u=t.m08,f=t.m09,h=t.m10,p=t.m11,m=t.m12,d=t.m13,v=t.m14,g=t.m15;let y=n.m00,A=n.m01,x=n.m02,b=n.m03;return e.m00=y*i+A*s+x*u+b*m,e.m01=y*o+A*c+x*f+b*d,e.m02=y*a+A*l+x*h+b*v,e.m03=y*r+A*_+x*p+b*g,y=n.m04,A=n.m05,x=n.m06,b=n.m07,e.m04=y*i+A*s+x*u+b*m,e.m05=y*o+A*c+x*f+b*d,e.m06=y*a+A*l+x*h+b*v,e.m07=y*r+A*_+x*p+b*g,y=n.m08,A=n.m09,x=n.m10,b=n.m11,e.m08=y*i+A*s+x*u+b*m,e.m09=y*o+A*c+x*f+b*d,e.m10=y*a+A*l+x*h+b*v,e.m11=y*r+A*_+x*p+b*g,y=n.m12,A=n.m13,x=n.m14,b=n.m15,e.m12=y*i+A*s+x*u+b*m,e.m13=y*o+A*c+x*f+b*d,e.m14=y*a+A*l+x*h+b*v,e.m15=y*r+A*_+x*p+b*g,e}static transform(e,t,n){const i=n.x,o=n.y,a=n.z;if(t===e)e.m12=t.m00*i+t.m04*o+t.m08*a+t.m12,e.m13=t.m01*i+t.m05*o+t.m09*a+t.m13,e.m14=t.m02*i+t.m06*o+t.m10*a+t.m14,e.m15=t.m03*i+t.m07*o+t.m11*a+t.m15;else{const n=t.m00,r=t.m01,s=t.m02,c=t.m03,l=t.m04,_=t.m05,u=t.m06,f=t.m07,h=t.m08,p=t.m09,m=t.m10,d=t.m11;t.m12,t.m13,t.m14,t.m15,e.m00=n,e.m01=r,e.m02=s,e.m03=c,e.m04=l,e.m05=_,e.m06=u,e.m07=f,e.m08=h,e.m09=p,e.m10=m,e.m11=d,e.m12=n*i+l*o+h*a+t.m12,e.m13=r*i+_*o+p*a+t.m13,e.m14=s*i+u*o+m*a+t.m14,e.m15=c*i+f*o+d*a+t.m15}return e}static translate(e,t,n){return console.warn("function changed"),t===e?(e.m12+=n.x,e.m13+=n.y,e.m14+=n.z):(e.m00=t.m00,e.m01=t.m01,e.m02=t.m02,e.m03=t.m03,e.m04=t.m04,e.m05=t.m05,e.m06=t.m06,e.m07=t.m07,e.m08=t.m08,e.m09=t.m09,e.m10=t.m10,e.m11=t.m11,e.m12+=n.x,e.m13+=n.y,e.m14+=n.z,e.m15=t.m15),e}static scale(e,t,n){const i=n.x,o=n.y,a=n.z;return e.m00=t.m00*i,e.m01=t.m01*i,e.m02=t.m02*i,e.m03=t.m03*i,e.m04=t.m04*o,e.m05=t.m05*o,e.m06=t.m06*o,e.m07=t.m07*o,e.m08=t.m08*a,e.m09=t.m09*a,e.m10=t.m10*a,e.m11=t.m11*a,e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15,e}static rotate(e,t,n,i){let o=i.x,a=i.y,r=i.z,s=Math.sqrt(o*o+a*a+r*r);if(Math.abs(s)<dn)return null;s=1/s,o*=s,a*=s,r*=s;const c=Math.sin(n),l=Math.cos(n),_=1-l,u=t.m00,f=t.m01,h=t.m02,p=t.m03,m=t.m04,d=t.m05,v=t.m06,g=t.m07,y=t.m08,A=t.m09,x=t.m10,b=t.m11,C=o*o*_+l,S=a*o*_+r*c,E=r*o*_-a*c,w=o*a*_-r*c,T=a*a*_+l,P=r*a*_+o*c,I=o*r*_+a*c,R=a*r*_-o*c,N=r*r*_+l;return e.m00=u*C+m*S+y*E,e.m01=f*C+d*S+A*E,e.m02=h*C+v*S+x*E,e.m03=p*C+g*S+b*E,e.m04=u*w+m*T+y*P,e.m05=f*w+d*T+A*P,e.m06=h*w+v*T+x*P,e.m07=p*w+g*T+b*P,e.m08=u*I+m*R+y*N,e.m09=f*I+d*R+A*N,e.m10=h*I+v*R+x*N,e.m11=p*I+g*R+b*N,t!==e&&(e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15),e}static rotateX(e,t,n){const i=Math.sin(n),o=Math.cos(n),a=t.m04,r=t.m05,s=t.m06,c=t.m07,l=t.m08,_=t.m09,u=t.m10,f=t.m11;return t!==e&&(e.m00=t.m00,e.m01=t.m01,e.m02=t.m02,e.m03=t.m03,e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15),e.m04=a*o+l*i,e.m05=r*o+_*i,e.m06=s*o+u*i,e.m07=c*o+f*i,e.m08=l*o-a*i,e.m09=_*o-r*i,e.m10=u*o-s*i,e.m11=f*o-c*i,e}static rotateY(e,t,n){const i=Math.sin(n),o=Math.cos(n),a=t.m00,r=t.m01,s=t.m02,c=t.m03,l=t.m08,_=t.m09,u=t.m10,f=t.m11;return t!==e&&(e.m04=t.m04,e.m05=t.m05,e.m06=t.m06,e.m07=t.m07,e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15),e.m00=a*o-l*i,e.m01=r*o-_*i,e.m02=s*o-u*i,e.m03=c*o-f*i,e.m08=a*i+l*o,e.m09=r*i+_*o,e.m10=s*i+u*o,e.m11=c*i+f*o,e}static rotateZ(e,t,n){const i=Math.sin(n),o=Math.cos(n),a=t.m00,r=t.m01,s=t.m02,c=t.m03,l=t.m04,_=t.m05,u=t.m06,f=t.m07;return t!==e&&(e.m08=t.m08,e.m09=t.m09,e.m10=t.m10,e.m11=t.m11,e.m12=t.m12,e.m13=t.m13,e.m14=t.m14,e.m15=t.m15),e.m00=a*o+l*i,e.m01=r*o+_*i,e.m02=s*o+u*i,e.m03=c*o+f*i,e.m04=l*o-a*i,e.m05=_*o-r*i,e.m06=u*o-s*i,e.m07=f*o-c*i,e}static fromTranslation(e,t){return e.m00=1,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=1,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=1,e.m11=0,e.m12=t.x,e.m13=t.y,e.m14=t.z,e.m15=1,e}static fromScaling(e,t){return e.m00=t.x,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=t.y,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=t.z,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}static fromRotation(e,t,n){let i=n.x,o=n.y,a=n.z,r=Math.sqrt(i*i+o*o+a*a);if(Math.abs(r)<dn)return null;r=1/r,i*=r,o*=r,a*=r;const s=Math.sin(t),c=Math.cos(t),l=1-c;return e.m00=i*i*l+c,e.m01=o*i*l+a*s,e.m02=a*i*l-o*s,e.m03=0,e.m04=i*o*l-a*s,e.m05=o*o*l+c,e.m06=a*o*l+i*s,e.m07=0,e.m08=i*a*l+o*s,e.m09=o*a*l-i*s,e.m10=a*a*l+c,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}static fromXRotation(e,t){const n=Math.sin(t),i=Math.cos(t);return e.m00=1,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=i,e.m06=n,e.m07=0,e.m08=0,e.m09=-n,e.m10=i,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}static fromYRotation(e,t){const n=Math.sin(t),i=Math.cos(t);return e.m00=i,e.m01=0,e.m02=-n,e.m03=0,e.m04=0,e.m05=1,e.m06=0,e.m07=0,e.m08=n,e.m09=0,e.m10=i,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}static fromZRotation(e,t){const n=Math.sin(t),i=Math.cos(t);return e.m00=i,e.m01=n,e.m02=0,e.m03=0,e.m04=-n,e.m05=i,e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=1,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}static fromRT(e,t,n){const i=t.x,o=t.y,a=t.z,r=t.w,s=i+i,c=o+o,l=a+a,_=i*s,u=i*c,f=i*l,h=o*c,p=o*l,m=a*l,d=r*s,v=r*c,g=r*l;return e.m00=1-(h+m),e.m01=u+g,e.m02=f-v,e.m03=0,e.m04=u-g,e.m05=1-(_+m),e.m06=p+d,e.m07=0,e.m08=f+v,e.m09=p-d,e.m10=1-(_+h),e.m11=0,e.m12=n.x,e.m13=n.y,e.m14=n.z,e.m15=1,e}static getTranslation(e,t){return e.x=t.m12,e.y=t.m13,e.z=t.m14,e}static getScaling(e,t){const n=ai.m00=t.m00,i=ai.m01=t.m01,o=ai.m02=t.m02,a=ai.m03=t.m04,r=ai.m04=t.m05,s=ai.m05=t.m06,c=ai.m06=t.m08,l=ai.m07=t.m09,_=ai.m08=t.m10;return e.x=Math.sqrt(n*n+i*i+o*o),e.y=Math.sqrt(a*a+r*r+s*s),e.z=Math.sqrt(c*c+l*l+_*_),qn.determinant(ai)<0&&(e.x*=-1),e}static getRotation(e,t){const n=t.m00+t.m05+t.m10;let i=0;return n>0?(i=2*Math.sqrt(n+1),e.w=.25*i,e.x=(t.m06-t.m09)/i,e.y=(t.m08-t.m02)/i,e.z=(t.m01-t.m04)/i):t.m00>t.m05&&t.m00>t.m10?(i=2*Math.sqrt(1+t.m00-t.m05-t.m10),e.w=(t.m06-t.m09)/i,e.x=.25*i,e.y=(t.m01+t.m04)/i,e.z=(t.m08+t.m02)/i):t.m05>t.m10?(i=2*Math.sqrt(1+t.m05-t.m00-t.m10),e.w=(t.m08-t.m02)/i,e.x=(t.m01+t.m04)/i,e.y=.25*i,e.z=(t.m06+t.m09)/i):(i=2*Math.sqrt(1+t.m10-t.m00-t.m05),e.w=(t.m01-t.m04)/i,e.x=(t.m08+t.m02)/i,e.y=(t.m06+t.m09)/i,e.z=.25*i),e}static toRTS(e,t,n,i){i.x=Gn.set(oi,e.m00,e.m01,e.m02).length(),ai.m00=e.m00/i.x,ai.m01=e.m01/i.x,ai.m02=e.m02/i.x,i.y=Gn.set(oi,e.m04,e.m05,e.m06).length(),ai.m03=e.m04/i.y,ai.m04=e.m05/i.y,ai.m05=e.m06/i.y,i.z=Gn.set(oi,e.m08,e.m09,e.m10).length(),ai.m06=e.m08/i.z,ai.m07=e.m09/i.z,ai.m08=e.m10/i.z,qn.determinant(ai)<0&&(i.x*=-1,ai.m00*=-1,ai.m01*=-1,ai.m02*=-1),Qn.fromMat3(t,ai),Gn.set(n,e.m12,e.m13,e.m14)}static fromRTS(e,t,n,i){const o=t.x,a=t.y,r=t.z,s=t.w,c=o+o,l=a+a,_=r+r,u=o*c,f=o*l,h=o*_,p=a*l,m=a*_,d=r*_,v=s*c,g=s*l,y=s*_,A=i.x,x=i.y,b=i.z;return e.m00=(1-(p+d))*A,e.m01=(f+y)*A,e.m02=(h-g)*A,e.m03=0,e.m04=(f-y)*x,e.m05=(1-(u+d))*x,e.m06=(m+v)*x,e.m07=0,e.m08=(h+g)*b,e.m09=(m-v)*b,e.m10=(1-(u+p))*b,e.m11=0,e.m12=n.x,e.m13=n.y,e.m14=n.z,e.m15=1,e}static fromRTSOrigin(e,t,n,i,o){const a=t.x,r=t.y,s=t.z,c=t.w,l=a+a,_=r+r,u=s+s,f=a*l,h=a*_,p=a*u,m=r*_,d=r*u,v=s*u,g=c*l,y=c*_,A=c*u,x=i.x,b=i.y,C=i.z,S=o.x,E=o.y,w=o.z;return e.m00=(1-(m+v))*x,e.m01=(h+A)*x,e.m02=(p-y)*x,e.m03=0,e.m04=(h-A)*b,e.m05=(1-(f+v))*b,e.m06=(d+g)*b,e.m07=0,e.m08=(p+y)*C,e.m09=(d-g)*C,e.m10=(1-(f+m))*C,e.m11=0,e.m12=n.x+S-(e.m00*S+e.m04*E+e.m08*w),e.m13=n.y+E-(e.m01*S+e.m05*E+e.m09*w),e.m14=n.z+w-(e.m02*S+e.m06*E+e.m10*w),e.m15=1,e}static fromQuat(e,t){const n=t.x,i=t.y,o=t.z,a=t.w,r=n+n,s=i+i,c=o+o,l=n*r,_=i*r,u=i*s,f=o*r,h=o*s,p=o*c,m=a*r,d=a*s,v=a*c;return e.m00=1-u-p,e.m01=_+v,e.m02=f-d,e.m03=0,e.m04=_-v,e.m05=1-l-p,e.m06=h+m,e.m07=0,e.m08=f+d,e.m09=h-m,e.m10=1-l-u,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e}static frustum(e,t,n,i,o,a,r){const s=1/(n-t),c=1/(o-i),l=1/(a-r);return e.m00=2*a*s,e.m01=0,e.m02=0,e.m03=0,e.m04=0,e.m05=2*a*c,e.m06=0,e.m07=0,e.m08=(n+t)*s,e.m09=(o+i)*c,e.m10=(r+a)*l,e.m11=-1,e.m12=0,e.m13=0,e.m14=r*a*2*l,e.m15=0,e}static perspective(e,t,n,i,o,a=!0,r=-1,s=1,c=0){const l=1/Math.tan(t/2),_=1/(i-o),u=a?l/n:l,f=(a?l:l*n)*s,h=ni[c];return e.m00=u*h[0],e.m01=u*h[1],e.m02=0,e.m03=0,e.m04=f*h[2],e.m05=f*h[3],e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=(o-r*i)*_,e.m11=-1,e.m12=0,e.m13=0,e.m14=o*i*_*(1-r),e.m15=0,e}static ortho(e,t,n,i,o,a,r,s=-1,c=1,l=0){const _=1/(t-n),u=1/(i-o)*c,f=1/(a-r),h=-2*_,p=-2*u,m=(t+n)*_,d=(o+i)*u,v=ni[l];return e.m00=h*v[0],e.m01=h*v[1],e.m02=0,e.m03=0,e.m04=p*v[2],e.m05=p*v[3],e.m06=0,e.m07=0,e.m08=0,e.m09=0,e.m10=f*(1-s),e.m11=0,e.m12=m*v[0]+d*v[2],e.m13=m*v[1]+d*v[3],e.m14=(a-s*r)*f,e.m15=1,e}static lookAt(e,t,n,i){const o=t.x,a=t.y,r=t.z,s=i.x,c=i.y,l=i.z;let _=o-n.x,u=a-n.y,f=r-n.z,h=1/Math.sqrt(_*_+u*u+f*f);_*=h,u*=h,f*=h;let p=c*f-l*u,m=l*_-s*f,d=s*u-c*_;h=1/Math.sqrt(p*p+m*m+d*d),p*=h,m*=h,d*=h;const v=u*d-f*m,g=f*p-_*d,y=_*m-u*p;return e.m00=p,e.m01=v,e.m02=_,e.m03=0,e.m04=m,e.m05=g,e.m06=u,e.m07=0,e.m08=d,e.m09=y,e.m10=f,e.m11=0,e.m12=-(p*o+m*a+d*r),e.m13=-(v*o+g*a+y*r),e.m14=-(_*o+u*a+f*r),e.m15=1,e}static inverseTranspose(e,t){const n=t.m00,i=t.m01,o=t.m02,a=t.m03,r=t.m04,s=t.m05,c=t.m06,l=t.m07,_=t.m08,u=t.m09,f=t.m10,h=t.m11,p=t.m12,m=t.m13,d=t.m14,v=t.m15,g=n*s-i*r,y=n*c-o*r,A=n*l-a*r,x=i*c-o*s,b=i*l-a*s,C=o*l-a*c,S=_*m-u*p,E=_*d-f*p,w=_*v-h*p,T=u*d-f*m,P=u*v-h*m,I=f*v-h*d;let R=g*I-y*P+A*T+x*w-b*E+C*S;return R?(R=1/R,e.m00=(s*I-c*P+l*T)*R,e.m01=(c*w-r*I-l*E)*R,e.m02=(r*P-s*w+l*S)*R,e.m03=0,e.m04=(o*P-i*I-a*T)*R,e.m05=(n*I-o*w+a*E)*R,e.m06=(i*w-n*P-a*S)*R,e.m07=0,e.m08=(m*C-d*b+v*x)*R,e.m09=(d*A-p*C-v*y)*R,e.m10=(p*b-m*A+v*g)*R,e.m11=0,e.m12=0,e.m13=0,e.m14=0,e.m15=1,e):null}static toArray(e,t,n=0){return e[n+0]=t.m00,e[n+1]=t.m01,e[n+2]=t.m02,e[n+3]=t.m03,e[n+4]=t.m04,e[n+5]=t.m05,e[n+6]=t.m06,e[n+7]=t.m07,e[n+8]=t.m08,e[n+9]=t.m09,e[n+10]=t.m10,e[n+11]=t.m11,e[n+12]=t.m12,e[n+13]=t.m13,e[n+14]=t.m14,e[n+15]=t.m15,e}static fromArray(e,t,n=0){return e.m00=t[n+0],e.m01=t[n+1],e.m02=t[n+2],e.m03=t[n+3],e.m04=t[n+4],e.m05=t[n+5],e.m06=t[n+6],e.m07=t[n+7],e.m08=t[n+8],e.m09=t[n+9],e.m10=t[n+10],e.m11=t[n+11],e.m12=t[n+12],e.m13=t[n+13],e.m14=t[n+14],e.m15=t[n+15],e}static add(e,t,n){return e.m00=t.m00+n.m00,e.m01=t.m01+n.m01,e.m02=t.m02+n.m02,e.m03=t.m03+n.m03,e.m04=t.m04+n.m04,e.m05=t.m05+n.m05,e.m06=t.m06+n.m06,e.m07=t.m07+n.m07,e.m08=t.m08+n.m08,e.m09=t.m09+n.m09,e.m10=t.m10+n.m10,e.m11=t.m11+n.m11,e.m12=t.m12+n.m12,e.m13=t.m13+n.m13,e.m14=t.m14+n.m14,e.m15=t.m15+n.m15,e}static subtract(e,t,n){return e.m00=t.m00-n.m00,e.m01=t.m01-n.m01,e.m02=t.m02-n.m02,e.m03=t.m03-n.m03,e.m04=t.m04-n.m04,e.m05=t.m05-n.m05,e.m06=t.m06-n.m06,e.m07=t.m07-n.m07,e.m08=t.m08-n.m08,e.m09=t.m09-n.m09,e.m10=t.m10-n.m10,e.m11=t.m11-n.m11,e.m12=t.m12-n.m12,e.m13=t.m13-n.m13,e.m14=t.m14-n.m14,e.m15=t.m15-n.m15,e}static multiplyScalar(e,t,n){return e.m00=t.m00*n,e.m01=t.m01*n,e.m02=t.m02*n,e.m03=t.m03*n,e.m04=t.m04*n,e.m05=t.m05*n,e.m06=t.m06*n,e.m07=t.m07*n,e.m08=t.m08*n,e.m09=t.m09*n,e.m10=t.m10*n,e.m11=t.m11*n,e.m12=t.m12*n,e.m13=t.m13*n,e.m14=t.m14*n,e.m15=t.m15*n,e}static multiplyScalarAndAdd(e,t,n,i){return e.m00=t.m00+n.m00*i,e.m01=t.m01+n.m01*i,e.m02=t.m02+n.m02*i,e.m03=t.m03+n.m03*i,e.m04=t.m04+n.m04*i,e.m05=t.m05+n.m05*i,e.m06=t.m06+n.m06*i,e.m07=t.m07+n.m07*i,e.m08=t.m08+n.m08*i,e.m09=t.m09+n.m09*i,e.m10=t.m10+n.m10*i,e.m11=t.m11+n.m11*i,e.m12=t.m12+n.m12*i,e.m13=t.m13+n.m13*i,e.m14=t.m14+n.m14*i,e.m15=t.m15+n.m15*i,e}static strictEquals(e,t){return e.m00===t.m00&&e.m01===t.m01&&e.m02===t.m02&&e.m03===t.m03&&e.m04===t.m04&&e.m05===t.m05&&e.m06===t.m06&&e.m07===t.m07&&e.m08===t.m08&&e.m09===t.m09&&e.m10===t.m10&&e.m11===t.m11&&e.m12===t.m12&&e.m13===t.m13&&e.m14===t.m14&&e.m15===t.m15}static equals(e,t,n=dn){return Math.abs(e.m00-t.m00)<=n*Math.max(1,Math.abs(e.m00),Math.abs(t.m00))&&Math.abs(e.m01-t.m01)<=n*Math.max(1,Math.abs(e.m01),Math.abs(t.m01))&&Math.abs(e.m02-t.m02)<=n*Math.max(1,Math.abs(e.m02),Math.abs(t.m02))&&Math.abs(e.m03-t.m03)<=n*Math.max(1,Math.abs(e.m03),Math.abs(t.m03))&&Math.abs(e.m04-t.m04)<=n*Math.max(1,Math.abs(e.m04),Math.abs(t.m04))&&Math.abs(e.m05-t.m05)<=n*Math.max(1,Math.abs(e.m05),Math.abs(t.m05))&&Math.abs(e.m06-t.m06)<=n*Math.max(1,Math.abs(e.m06),Math.abs(t.m06))&&Math.abs(e.m07-t.m07)<=n*Math.max(1,Math.abs(e.m07),Math.abs(t.m07))&&Math.abs(e.m08-t.m08)<=n*Math.max(1,Math.abs(e.m08),Math.abs(t.m08))&&Math.abs(e.m09-t.m09)<=n*Math.max(1,Math.abs(e.m09),Math.abs(t.m09))&&Math.abs(e.m10-t.m10)<=n*Math.max(1,Math.abs(e.m10),Math.abs(t.m10))&&Math.abs(e.m11-t.m11)<=n*Math.max(1,Math.abs(e.m11),Math.abs(t.m11))&&Math.abs(e.m12-t.m12)<=n*Math.max(1,Math.abs(e.m12),Math.abs(t.m12))&&Math.abs(e.m13-t.m13)<=n*Math.max(1,Math.abs(e.m13),Math.abs(t.m13))&&Math.abs(e.m14-t.m14)<=n*Math.max(1,Math.abs(e.m14),Math.abs(t.m14))&&Math.abs(e.m15-t.m15)<=n*Math.max(1,Math.abs(e.m15),Math.abs(t.m15))}get m00(){return this._array[0]}set m00(e){this._array[0]=e}get m01(){return this._array[1]}set m01(e){this._array[1]=e}get m02(){return this._array[2]}set m02(e){this._array[2]=e}get m03(){return this._array[3]}set m03(e){this._array[3]=e}get m04(){return this._array[4]}set m04(e){this._array[4]=e}get m05(){return this._array[5]}set m05(e){this._array[5]=e}get m06(){return this._array[6]}set m06(e){this._array[6]=e}get m07(){return this._array[7]}set m07(e){this._array[7]=e}get m08(){return this._array[8]}set m08(e){this._array[8]=e}get m09(){return this._array[9]}set m09(e){this._array[9]=e}get m10(){return this._array[10]}set m10(e){this._array[10]=e}get m11(){return this._array[11]}set m11(e){this._array[11]=e}get m12(){return this._array[12]}set m12(e){this._array[12]=e}get m13(){return this._array[13]}set m13(e){this._array[13]=e}get m14(){return this._array[14]}set m14(e){this._array[14]=e}get m15(){return this._array[15]}set m15(e){this._array[15]=e}constructor(e=1,t=0,n=0,i=0,o=0,a=1,r=0,s=0,c=0,l=0,_=1,u=0,f=0,h=0,p=0,m=1){if(super(),e&&"object"==typeof e)if(ArrayBuffer.isView(e))this._array=e,this._array.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);else{const t=e.array;this._array=jn.createFloatArray(16),this._array[0]=t[0],this._array[1]=t[1],this._array[2]=t[2],this._array[3]=t[3],this._array[4]=t[4],this._array[5]=t[5],this._array[6]=t[6],this._array[7]=t[7],this._array[8]=t[8],this._array[9]=t[9],this._array[10]=t[10],this._array[11]=t[11],this._array[12]=t[12],this._array[13]=t[13],this._array[14]=t[14],this._array[15]=t[15]}else this._array=jn.createFloatArray(16),this._array[0]=e,this._array[1]=t,this._array[2]=n,this._array[3]=i,this._array[4]=o,this._array[5]=a,this._array[6]=r,this._array[7]=s,this._array[8]=c,this._array[9]=l,this._array[10]=_,this._array[11]=u,this._array[12]=f,this._array[13]=h,this._array[14]=p,this._array[15]=m}clone(){const e=this._array;return new ii(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}set(e=1,t=0,n=0,i=0,o=0,a=1,r=0,s=0,c=0,l=0,_=1,u=0,f=0,h=0,p=0,m=1){if(e&&"object"==typeof e){const t=e.array;this._array[1]=t[1],this._array[2]=t[2],this._array[3]=t[3],this._array[4]=t[4],this._array[5]=t[5],this._array[6]=t[6],this._array[7]=t[7],this._array[8]=t[8],this._array[9]=t[9],this._array[10]=t[10],this._array[11]=t[11],this._array[12]=t[12],this._array[13]=t[13],this._array[14]=t[14],this._array[15]=t[15],this._array[0]=t[0]}else this._array[1]=t,this._array[2]=n,this._array[3]=i,this._array[4]=o,this._array[5]=a,this._array[6]=r,this._array[7]=s,this._array[8]=c,this._array[9]=l,this._array[10]=_,this._array[11]=u,this._array[12]=f,this._array[13]=h,this._array[14]=p,this._array[15]=m,this._array[0]=e;return this}equals(e,t=dn){const n=e.array;return Math.abs(this._array[0]-n[0])<=t*Math.max(1,Math.abs(this._array[0]),Math.abs(n[0]))&&Math.abs(this._array[1]-n[1])<=t*Math.max(1,Math.abs(this._array[1]),Math.abs(n[1]))&&Math.abs(this._array[2]-n[2])<=t*Math.max(1,Math.abs(this._array[2]),Math.abs(n[2]))&&Math.abs(this._array[3]-n[3])<=t*Math.max(1,Math.abs(this._array[3]),Math.abs(n[3]))&&Math.abs(this._array[4]-n[4])<=t*Math.max(1,Math.abs(this._array[4]),Math.abs(n[4]))&&Math.abs(this._array[5]-n[5])<=t*Math.max(1,Math.abs(this._array[5]),Math.abs(n[5]))&&Math.abs(this._array[6]-n[6])<=t*Math.max(1,Math.abs(this._array[6]),Math.abs(n[6]))&&Math.abs(this._array[7]-n[7])<=t*Math.max(1,Math.abs(this._array[7]),Math.abs(n[7]))&&Math.abs(this._array[8]-n[8])<=t*Math.max(1,Math.abs(this._array[8]),Math.abs(n[8]))&&Math.abs(this._array[9]-n[9])<=t*Math.max(1,Math.abs(this._array[9]),Math.abs(n[9]))&&Math.abs(this._array[10]-n[10])<=t*Math.max(1,Math.abs(this._array[10]),Math.abs(n[10]))&&Math.abs(this._array[11]-n[11])<=t*Math.max(1,Math.abs(this._array[11]),Math.abs(n[11]))&&Math.abs(this._array[12]-n[12])<=t*Math.max(1,Math.abs(this._array[12]),Math.abs(n[12]))&&Math.abs(this._array[13]-n[13])<=t*Math.max(1,Math.abs(this._array[13]),Math.abs(n[13]))&&Math.abs(this._array[14]-n[14])<=t*Math.max(1,Math.abs(this._array[14]),Math.abs(n[14]))&&Math.abs(this._array[15]-n[15])<=t*Math.max(1,Math.abs(this._array[15]),Math.abs(n[15]))}strictEquals(e){const t=e.array;return this._array[0]===e.m00&&this._array[1]===t[1]&&this._array[2]===t[2]&&this._array[3]===t[3]&&this._array[4]===t[4]&&this._array[5]===t[5]&&this._array[6]===t[6]&&this._array[7]===t[7]&&this._array[8]===t[8]&&this._array[9]===t[9]&&this._array[10]===t[10]&&this._array[11]===t[11]&&this._array[12]===t[12]&&this._array[13]===t[13]&&this._array[14]===t[14]&&this._array[15]===t[15]}toString(){return`[\n${this._array[0]}, ${this._array[1]}, ${this._array[2]}, ${this._array[3]},\n${this._array[4]}, ${this._array[5]}, ${this._array[6]}, ${this._array[7]},\n${this._array[8]}, ${this._array[9]}, ${this._array[10]}, ${this._array[11]},\n${this._array[12]}, ${this._array[13]}, ${this._array[14]}, ${this._array[15]}\n]`}identity(){return this._array[0]=1,this._array[1]=0,this._array[2]=0,this._array[3]=0,this._array[4]=0,this._array[5]=1,this._array[6]=0,this._array[7]=0,this._array[8]=0,this._array[9]=0,this._array[10]=1,this._array[11]=0,this._array[12]=0,this._array[13]=0,this._array[14]=0,this._array[15]=1,this}zero(){return this.m00=0,this.m01=0,this.m02=0,this.m03=0,this.m04=0,this.m05=0,this.m06=0,this.m07=0,this.m08=0,this.m09=0,this.m10=0,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=0,this}transpose(){const e=this._array[1],t=this._array[2],n=this._array[3],i=this._array[6],o=this._array[7],a=this._array[11];return this._array[1]=this._array[4],this._array[2]=this._array[8],this._array[3]=this._array[12],this._array[4]=e,this._array[6]=this._array[9],this._array[7]=this._array[13],this._array[8]=t,this._array[9]=i,this._array[11]=this._array[14],this._array[12]=n,this._array[13]=o,this._array[14]=a,this}invert(){const e=this._array[0],t=this._array[1],n=this._array[2],i=this._array[3],o=this._array[4],a=this._array[5],r=this._array[6],s=this._array[7],c=this._array[8],l=this._array[9],_=this._array[10],u=this._array[11],f=this._array[12],h=this._array[13],p=this._array[14],m=this._array[15],d=e*a-t*o,v=e*r-n*o,g=e*s-i*o,y=t*r-n*a,A=t*s-i*a,x=n*s-i*r,b=c*h-l*f,C=c*p-_*f,S=c*m-u*f,E=l*p-_*h,w=l*m-u*h,T=_*m-u*p;let P=d*T-v*w+g*E+y*S-A*C+x*b;return 0===P?(this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),this):(P=1/P,this._array[0]=(a*T-r*w+s*E)*P,this._array[1]=(n*w-t*T-i*E)*P,this._array[2]=(h*x-p*A+m*y)*P,this._array[3]=(_*A-l*x-u*y)*P,this._array[4]=(r*S-o*T-s*C)*P,this._array[5]=(e*T-n*S+i*C)*P,this._array[6]=(p*g-f*x-m*v)*P,this._array[7]=(c*x-_*g+u*v)*P,this._array[8]=(o*w-a*S+s*b)*P,this._array[9]=(t*S-e*w-i*b)*P,this._array[10]=(f*A-h*g+m*d)*P,this._array[11]=(l*g-c*A-u*d)*P,this._array[12]=(a*C-o*E-r*b)*P,this._array[13]=(e*E-t*C+n*b)*P,this._array[14]=(h*v-f*y-p*d)*P,this._array[15]=(c*y-l*v+_*d)*P,this)}determinant(){const e=this._array[0],t=this._array[1],n=this._array[2],i=this._array[3],o=this._array[4],a=this._array[5],r=this._array[6],s=this._array[7],c=this._array[8],l=this._array[9],_=this._array[10],u=this._array[11],f=this._array[12],h=this._array[13],p=this._array[14],m=this._array[15];return(e*a-t*o)*(_*m-u*p)-(e*r-n*o)*(l*m-u*h)+(e*s-i*o)*(l*p-_*h)+(t*r-n*a)*(c*m-u*f)-(t*s-i*a)*(c*p-_*f)+(n*s-i*r)*(c*h-l*f)}add(e){const t=e.array;return this._array[0]+=t[0],this._array[1]+=t[1],this._array[2]+=t[2],this._array[3]+=t[3],this._array[4]+=t[4],this._array[5]+=t[5],this._array[6]+=t[6],this._array[7]+=t[7],this._array[8]+=t[8],this._array[9]+=t[9],this._array[10]+=t[10],this._array[11]+=t[11],this._array[12]+=t[12],this._array[13]+=t[13],this._array[14]+=t[14],this._array[15]+=t[15],this}subtract(e){const t=e.array;return this._array[0]-=t[0],this._array[1]-=t[1],this._array[2]-=t[2],this._array[3]-=t[3],this._array[4]-=t[4],this._array[5]-=t[5],this._array[6]-=t[6],this._array[7]-=t[7],this._array[8]-=t[8],this._array[9]-=t[9],this._array[10]-=t[10],this._array[11]-=t[11],this._array[12]-=t[12],this._array[13]-=t[13],this._array[14]-=t[14],this._array[15]-=t[15],this}multiply(e){const t=this._array[0],n=this._array[1],i=this._array[2],o=this._array[3],a=this._array[4],r=this._array[5],s=this._array[6],c=this._array[7],l=this._array[8],_=this._array[9],u=this._array[10],f=this._array[11],h=this._array[12],p=this._array[13],m=this._array[14],d=this._array[15],v=e.array;let g=v[0],y=v[1],A=v[2],x=v[3];return this._array[0]=g*t+y*a+A*l+x*h,this._array[1]=g*n+y*r+A*_+x*p,this._array[2]=g*i+y*s+A*u+x*m,this._array[3]=g*o+y*c+A*f+x*d,g=v[4],y=v[5],A=v[6],x=v[7],this._array[4]=g*t+y*a+A*l+x*h,this._array[5]=g*n+y*r+A*_+x*p,this._array[6]=g*i+y*s+A*u+x*m,this._array[7]=g*o+y*c+A*f+x*d,g=v[8],y=v[9],A=v[10],x=v[11],this._array[8]=g*t+y*a+A*l+x*h,this._array[9]=g*n+y*r+A*_+x*p,this._array[10]=g*i+y*s+A*u+x*m,this._array[11]=g*o+y*c+A*f+x*d,g=v[12],y=v[13],A=v[14],x=v[15],this._array[12]=g*t+y*a+A*l+x*h,this._array[13]=g*n+y*r+A*_+x*p,this._array[14]=g*i+y*s+A*u+x*m,this._array[15]=g*o+y*c+A*f+x*d,this}multiplyScalar(e){return this._array[0]*=e,this._array[1]*=e,this._array[2]*=e,this._array[3]*=e,this._array[4]*=e,this._array[5]*=e,this._array[6]*=e,this._array[7]*=e,this._array[8]*=e,this._array[9]*=e,this._array[10]*=e,this._array[11]*=e,this._array[12]*=e,this._array[13]*=e,this._array[14]*=e,this._array[15]*=e,this}translate(e){console.warn("function changed");const t=e.array;return this._array[12]+=t[0],this._array[13]+=t[1],this._array[14]+=t[2],this}scale(e){const t=e.array,n=t[0],i=t[1],o=t[2];return this._array[0]*=n,this._array[1]*=n,this._array[2]*=n,this._array[3]*=n,this._array[4]*=i,this._array[5]*=i,this._array[6]*=i,this._array[7]*=i,this._array[8]*=o,this._array[9]*=o,this._array[10]*=o,this._array[11]*=o,this}rotate(e,t){let n=t.x,i=t.y,o=t.z,a=Math.sqrt(n*n+i*i+o*o);if(Math.abs(a)<dn)return null;a=1/a,n*=a,i*=a,o*=a;const r=Math.sin(e),s=Math.cos(e),c=1-s,l=this._array[0],_=this._array[1],u=this._array[2],f=this._array[3],h=this._array[4],p=this._array[5],m=this._array[6],d=this._array[7],v=this._array[8],g=this._array[9],y=this._array[10],A=this._array[11],x=n*n*c+s,b=i*n*c+o*r,C=o*n*c-i*r,S=n*i*c-o*r,E=i*i*c+s,w=o*i*c+n*r,T=n*o*c+i*r,P=i*o*c-n*r,I=o*o*c+s;return this._array[0]=l*x+h*b+v*C,this._array[1]=_*x+p*b+g*C,this._array[2]=u*x+m*b+y*C,this._array[3]=f*x+d*b+A*C,this._array[4]=l*S+h*E+v*w,this._array[5]=_*S+p*E+g*w,this._array[6]=u*S+m*E+y*w,this._array[7]=f*S+d*E+A*w,this._array[8]=l*T+h*P+v*I,this._array[9]=_*T+p*P+g*I,this._array[10]=u*T+m*P+y*I,this._array[11]=f*T+d*P+A*I,this}getTranslation(e){return e.x=this._array[12],e.y=this._array[13],e.z=this._array[14],e}getScale(e){const t=e.array,n=ai.array,i=n[0]=this._array[0],o=n[1]=this._array[1],a=n[2]=this._array[2],r=n[3]=this._array[4],s=n[4]=this._array[5],c=n[5]=this._array[6],l=n[6]=this._array[8],_=n[7]=this._array[9],u=n[8]=this._array[10];return t[0]=Math.sqrt(i*i+o*o+a*a),t[1]=Math.sqrt(r*r+s*s+c*c),t[2]=Math.sqrt(l*l+_*_+u*u),qn.determinant(ai)<0&&(e.x*=-1),e}getRotation(e){const t=this._array[0]+this._array[5]+this._array[10];let n=0;return t>0?(n=2*Math.sqrt(t+1),e.w=.25*n,e.x=(this._array[6]-this._array[9])/n,e.y=(this._array[8]-this._array[2])/n,e.z=(this._array[1]-this._array[4])/n):this._array[0]>this._array[5]&&this._array[0]>this._array[10]?(n=2*Math.sqrt(1+this._array[0]-this._array[5]-this._array[10]),e.w=(this._array[6]-this._array[9])/n,e.x=.25*n,e.y=(this._array[1]+this._array[4])/n,e.z=(this._array[8]+this._array[2])/n):this._array[5]>this._array[10]?(n=2*Math.sqrt(1+this._array[5]-this._array[0]-this._array[10]),e.w=(this._array[8]-this._array[2])/n,e.x=(this._array[1]+this._array[4])/n,e.y=.25*n,e.z=(this._array[6]+this._array[9])/n):(n=2*Math.sqrt(1+this._array[10]-this._array[0]-this._array[5]),e.w=(this._array[1]-this._array[4])/n,e.x=(this._array[8]+this._array[2])/n,e.y=(this._array[6]+this._array[9])/n,e.z=.25*n),e}fromRTS(e,t,n){const i=e.x,o=e.y,a=e.z,r=e.w,s=i+i,c=o+o,l=a+a,_=i*s,u=i*c,f=i*l,h=o*c,p=o*l,m=a*l,d=r*s,v=r*c,g=r*l,y=n.x,A=n.y,x=n.z;return this._array[0]=(1-(h+m))*y,this._array[1]=(u+g)*y,this._array[2]=(f-v)*y,this._array[3]=0,this._array[4]=(u-g)*A,this._array[5]=(1-(_+m))*A,this._array[6]=(p+d)*A,this._array[7]=0,this._array[8]=(f+v)*x,this._array[9]=(p-d)*x,this._array[10]=(1-(_+h))*x,this._array[11]=0,this._array[12]=t.x,this._array[13]=t.y,this._array[14]=t.z,this._array[15]=1,this}fromQuat(e){const t=e.x,n=e.y,i=e.z,o=e.w,a=t+t,r=n+n,s=i+i,c=t*a,l=n*a,_=n*r,u=i*a,f=i*r,h=i*s,p=o*a,m=o*r,d=o*s;return this._array[0]=1-_-h,this._array[1]=l+d,this._array[2]=u-m,this._array[3]=0,this._array[4]=l-d,this._array[5]=1-c-h,this._array[6]=f+p,this._array[7]=0,this._array[8]=u+m,this._array[9]=f-p,this._array[10]=1-c-_,this._array[11]=0,this._array[12]=0,this._array[13]=0,this._array[14]=0,this._array[15]=1,this}}e("c4",ii),ii.IDENTITY=Object.freeze(new ii);const oi=new Gn,ai=new qn;function ri(e,t,n,i,o,a,r,s,c,l,_,u,f,h,p,m){return new ii(e,t,n,i,o,a,r,s,c,l,_,u,f,h,p,m)}Ln(ii.prototype,["m00","m01","m02","m03","m04","m05","m06","m07","m08","m09","m10","m11","m12","m13","m14","m15"]),Rt.fastDefine("cc.Mat4",ii,{m00:1,m01:0,m02:0,m03:0,m04:0,m05:1,m06:0,m07:0,m08:0,m09:0,m10:1,m11:0,m12:0,m13:0,m14:0,m15:1}),c.Mat4=ii,c.mat4=ri;class si extends Ve{static clone(e){return new si(e.x,e.y)}static copy(e,t){return e.x=t.x,e.y=t.y,e}static set(e,t,n){return e.x=t,e.y=n,e}static add(e,t,n){return e.x=t.x+n.x,e.y=t.y+n.y,e}static subtract(e,t,n){return e.x=t.x-n.x,e.y=t.y-n.y,e}static multiply(e,t,n){return e.x=t.x*n.x,e.y=t.y*n.y,e}static divide(e,t,n){return e.x=t.x/n.x,e.y=t.y/n.y,e}static ceil(e,t){return e.x=Math.ceil(t.x),e.y=Math.ceil(t.y),e}static floor(e,t){return e.x=Math.floor(t.x),e.y=Math.floor(t.y),e}static min(e,t,n){return e.x=Math.min(t.x,n.x),e.y=Math.min(t.y,n.y),e}static max(e,t,n){return e.x=Math.max(t.x,n.x),e.y=Math.max(t.y,n.y),e}static round(e,t){return e.x=Math.round(t.x),e.y=Math.round(t.y),e}static multiplyScalar(e,t,n){return e.x=t.x*n,e.y=t.y*n,e}static scaleAndAdd(e,t,n,i){return e.x=t.x+n.x*i,e.y=t.y+n.y*i,e}static distance(e,t){const n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}static squaredDistance(e,t){const n=t.x-e.x,i=t.y-e.y;return n*n+i*i}static len(e){const t=e.x,n=e.y;return Math.sqrt(t*t+n*n)}static lengthSqr(e){const t=e.x,n=e.y;return t*t+n*n}static negate(e,t){return e.x=-t.x,e.y=-t.y,e}static inverse(e,t){return e.x=1/t.x,e.y=1/t.y,e}static inverseSafe(e,t){const n=t.x,i=t.y;return Math.abs(n)<dn?e.x=0:e.x=1/n,Math.abs(i)<dn?e.y=0:e.y=1/i,e}static normalize(e,t){const n=t.x,i=t.y;let o=n*n+i*i;return o>0&&(o=1/Math.sqrt(o),e.x=n*o,e.y=i*o),e}static dot(e,t){return e.x*t.x+e.y*t.y}static cross(e,t,n){return e.x=e.y=0,e.z=t.x*n.y-t.y*n.x,e}static lerp(e,t,n,i){const o=t.x,a=t.y;return e.x=o+i*(n.x-o),e.y=a+i*(n.y-a),e}static random(e,t){t=t||1;const n=2*Sn()*Math.PI;return e.x=Math.cos(n)*t,e.y=Math.sin(n)*t,e}static transformMat3(e,t,n){const i=t.x,o=t.y;return e.x=n.m00*i+n.m03*o+n.m06,e.y=n.m01*i+n.m04*o+n.m07,e}static transformMat4(e,t,n){const i=t.x,o=t.y;return e.x=n.m00*i+n.m04*o+n.m12,e.y=n.m01*i+n.m05*o+n.m13,e}static str(e){return`Vec2(${e.x}, ${e.y})`}static toArray(e,t,n=0){return e[n+0]=t.x,e[n+1]=t.y,e}static fromArray(e,t,n=0){return e.x=t[n+0],e.y=t[n+1],e}static strictEquals(e,t){return e.x===t.x&&e.y===t.y}static equals(e,t,n=dn){return Math.abs(e.x-t.x)<=n*Math.max(1,Math.abs(e.x),Math.abs(t.x))&&Math.abs(e.y-t.y)<=n*Math.max(1,Math.abs(e.y),Math.abs(t.y))}static angle(e,t){si.normalize(ci,e),si.normalize(li,t);const n=si.dot(ci,li);return n>1?0:n<-1?Math.PI:Math.acos(n)}constructor(e,t){super(),e&&"object"==typeof e?(this.x=e.x,this.y=e.y):(this.x=e||0,this.y=t||0)}clone(){return new si(this.x,this.y)}set(e,t){return e&&"object"==typeof e?(this.x=e.x,this.y=e.y):(this.x=e||0,this.y=t||0),this}equals(e,t=dn){return Math.abs(this.x-e.x)<=t*Math.max(1,Math.abs(this.x),Math.abs(e.x))&&Math.abs(this.y-e.y)<=t*Math.max(1,Math.abs(this.y),Math.abs(e.y))}equals2f(e,t,n=dn){return Math.abs(this.x-e)<=n*Math.max(1,Math.abs(this.x),Math.abs(e))&&Math.abs(this.y-t)<=n*Math.max(1,Math.abs(this.y),Math.abs(t))}strictEquals(e){return e&&this.x===e.x&&this.y===e.y}strictEquals2f(e,t){return this.x===e&&this.y===t}toString(){return`(${this.x.toFixed(2)}, ${this.y.toFixed(2)})`}lerp(e,t){const n=this.x,i=this.y;return this.x=n+t*(e.x-n),this.y=i+t*(e.y-i),this}clampf(e,t){return this.x=yn(this.x,e.x,t.x),this.y=yn(this.y,e.y,t.y),this}add(e){return this.x+=e.x,this.y+=e.y,this}add2f(e,t){return this.x+=e,this.y+=t,this}subtract(e){return this.x-=e.x,this.y-=e.y,this}subtract2f(e,t){return this.x-=e,this.y-=t,this}multiplyScalar(e){return"object"==typeof e&&console.warn("should use Vec2.multiply for vector * vector operation"),this.x*=e,this.y*=e,this}multiply(e){return"object"!=typeof e&&console.warn("should use Vec2.scale for vector * scalar operation"),this.x*=e.x,this.y*=e.y,this}multiply2f(e,t){return this.x*=e,this.y*=t,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divide2f(e,t){return this.x/=e,this.y/=t,this}negative(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSqr(){return this.x*this.x+this.y*this.y}normalize(){const e=this.x,t=this.y;let n=e*e+t*t;return n>0&&(n=1/Math.sqrt(n),this.x*=n,this.y*=n),this}angle(e){const t=this.lengthSqr(),n=e.lengthSqr();if(0===t||0===n)return console.warn("Can't get angle between zero vector"),0;let i=this.dot(e)/Math.sqrt(t*n);return i=yn(i,-1,1),Math.acos(i)}signAngle(e){const t=this.angle(e);return this.cross(e)<0?-t:t}rotate(e){const t=this.x,n=this.y,i=Math.sin(e),o=Math.cos(e);return this.x=o*t-i*n,this.y=i*t+o*n,this}project(e){const t=this.dot(e)/e.dot(e);return this.x=e.x*t,this.y=e.y*t,this}transformMat4(e){const t=this.x,n=this.y;return this.x=e.m00*t+e.m04*n+e.m12,this.y=e.m01*t+e.m05*n+e.m13,this}}e("cD",si),si.ZERO=Object.freeze(new si(0,0)),si.ONE=Object.freeze(new si(1,1)),si.NEG_ONE=Object.freeze(new si(-1,-1)),si.UNIT_X=Object.freeze(new si(1,0)),si.UNIT_Y=Object.freeze(new si(0,1));const ci=new si,li=new si;function _i(e,t){return new si(e,t)}Rt.fastDefine("cc.Vec2",si,{x:0,y:0}),c.Vec2=si,c.v2=_i;class ui extends Ve{static clone(e){return new ui(e.x,e.y,e.z,e.w)}static copy(e,t){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}static set(e,t,n,i,o){return e.x=t,e.y=n,e.z=i,e.w=o,e}static add(e,t,n){return e.x=t.x+n.x,e.y=t.y+n.y,e.z=t.z+n.z,e.w=t.w+n.w,e}static subtract(e,t,n){return e.x=t.x-n.x,e.y=t.y-n.y,e.z=t.z-n.z,e.w=t.w-n.w,e}static multiply(e,t,n){return e.x=t.x*n.x,e.y=t.y*n.y,e.z=t.z*n.z,e.w=t.w*n.w,e}static divide(e,t,n){return e.x=t.x/n.x,e.y=t.y/n.y,e.z=t.z/n.z,e.w=t.w/n.w,e}static ceil(e,t){return e.x=Math.ceil(t.x),e.y=Math.ceil(t.y),e.z=Math.ceil(t.z),e.w=Math.ceil(t.w),e}static floor(e,t){return e.x=Math.floor(t.x),e.y=Math.floor(t.y),e.z=Math.floor(t.z),e.w=Math.floor(t.w),e}static min(e,t,n){return e.x=Math.min(t.x,n.x),e.y=Math.min(t.y,n.y),e.z=Math.min(t.z,n.z),e.w=Math.min(t.w,n.w),e}static max(e,t,n){return e.x=Math.max(t.x,n.x),e.y=Math.max(t.y,n.y),e.z=Math.max(t.z,n.z),e.w=Math.max(t.w,n.w),e}static round(e,t){return e.x=Math.round(t.x),e.y=Math.round(t.y),e.z=Math.round(t.z),e.w=Math.round(t.w),e}static multiplyScalar(e,t,n){return e.x=t.x*n,e.y=t.y*n,e.z=t.z*n,e.w=t.w*n,e}static scaleAndAdd(e,t,n,i){return e.x=t.x+n.x*i,e.y=t.y+n.y*i,e.z=t.z+n.z*i,e.w=t.w+n.w*i,e}static distance(e,t){const n=t.x-e.x,i=t.y-e.y,o=t.z-e.z,a=t.w-e.w;return Math.sqrt(n*n+i*i+o*o+a*a)}static squaredDistance(e,t){const n=t.x-e.x,i=t.y-e.y,o=t.z-e.z,a=t.w-e.w;return n*n+i*i+o*o+a*a}static len(e){const t=e.x,n=e.y,i=e.z,o=e.w;return Math.sqrt(t*t+n*n+i*i+o*o)}static lengthSqr(e){const t=e.x,n=e.y,i=e.z,o=e.w;return t*t+n*n+i*i+o*o}static negate(e,t){return e.x=-t.x,e.y=-t.y,e.z=-t.z,e.w=-t.w,e}static inverse(e,t){return e.x=1/t.x,e.y=1/t.y,e.z=1/t.z,e.w=1/t.w,e}static inverseSafe(e,t){const n=t.x,i=t.y,o=t.z,a=t.w;return Math.abs(n)<dn?e.x=0:e.x=1/n,Math.abs(i)<dn?e.y=0:e.y=1/i,Math.abs(o)<dn?e.z=0:e.z=1/o,Math.abs(a)<dn?e.w=0:e.w=1/a,e}static normalize(e,t){const n=t.x,i=t.y,o=t.z,a=t.w;let r=n*n+i*i+o*o+a*a;return r>0&&(r=1/Math.sqrt(r),e.x=n*r,e.y=i*r,e.z=o*r,e.w=a*r),e}static dot(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w}static lerp(e,t,n,i){return e.x=t.x+i*(n.x-t.x),e.y=t.y+i*(n.y-t.y),e.z=t.z+i*(n.z-t.z),e.w=t.w+i*(n.w-t.w),e}static random(e,t){t=t||1;const n=2*Sn()*Math.PI,i=2*Sn()-1,o=Math.sqrt(1-i*i);return e.x=o*Math.cos(n)*t,e.y=o*Math.sin(n)*t,e.z=i*t,e.w=0,e}static transformMat4(e,t,n){const i=t.x,o=t.y,a=t.z,r=t.w;return e.x=n.m00*i+n.m04*o+n.m08*a+n.m12*r,e.y=n.m01*i+n.m05*o+n.m09*a+n.m13*r,e.z=n.m02*i+n.m06*o+n.m10*a+n.m14*r,e.w=n.m03*i+n.m07*o+n.m11*a+n.m15*r,e}static transformAffine(e,t,n){const i=t.x,o=t.y,a=t.z,r=t.w;return e.x=n.m00*i+n.m01*o+n.m02*a+n.m03*r,e.y=n.m04*i+n.m05*o+n.m06*a+n.m07*r,e.x=n.m08*i+n.m09*o+n.m10*a+n.m11*r,e.w=t.w,e}static transformQuat(e,t,n){const{x:i,y:o,z:a}=t,r=n.x,s=n.y,c=n.z,l=n.w,_=l*i+s*a-c*o,u=l*o+c*i-r*a,f=l*a+r*o-s*i,h=-r*i-s*o-c*a;return e.x=_*l+h*-r+u*-c-f*-s,e.y=u*l+h*-s+f*-r-_*-c,e.z=f*l+h*-c+_*-s-u*-r,e.w=t.w,e}static toArray(e,t,n=0){return e[n+0]=t.x,e[n+1]=t.y,e[n+2]=t.z,e[n+3]=t.w,e}static fromArray(e,t,n=0){return e.x=t[n+0],e.y=t[n+1],e.z=t[n+2],e.w=t[n+3],e}static strictEquals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}static equals(e,t,n=dn){return Math.abs(e.x-t.x)<=n*Math.max(1,Math.abs(e.x),Math.abs(t.x))&&Math.abs(e.y-t.y)<=n*Math.max(1,Math.abs(e.y),Math.abs(t.y))&&Math.abs(e.z-t.z)<=n*Math.max(1,Math.abs(e.z),Math.abs(t.z))&&Math.abs(e.w-t.w)<=n*Math.max(1,Math.abs(e.w),Math.abs(t.w))}constructor(e,t,n,i){super(),e&&"object"==typeof e?(this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w):(this.x=e||0,this.y=t||0,this.z=n||0,this.w=i||0)}clone(){return new ui(this.x,this.y,this.z,this.w)}set(e,t,n,i){return e&&"object"==typeof e?(this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w):(this.x=e||0,this.y=t||0,this.z=n||0,this.w=i||0),this}equals(e,t=dn){return Math.abs(this.x-e.x)<=t*Math.max(1,Math.abs(this.x),Math.abs(e.x))&&Math.abs(this.y-e.y)<=t*Math.max(1,Math.abs(this.y),Math.abs(e.y))&&Math.abs(this.z-e.z)<=t*Math.max(1,Math.abs(this.z),Math.abs(e.z))&&Math.abs(this.w-e.w)<=t*Math.max(1,Math.abs(this.w),Math.abs(e.w))}equals4f(e,t,n,i,o=dn){return Math.abs(this.x-e)<=o*Math.max(1,Math.abs(this.x),Math.abs(e))&&Math.abs(this.y-t)<=o*Math.max(1,Math.abs(this.y),Math.abs(t))&&Math.abs(this.z-n)<=o*Math.max(1,Math.abs(this.z),Math.abs(n))&&Math.abs(this.w-i)<=o*Math.max(1,Math.abs(this.w),Math.abs(i))}strictEquals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w}strictEquals4f(e,t,n,i){return this.x===e&&this.y===t&&this.z===n&&this.w===i}lerp(e,t){const n=this.x,i=this.y,o=this.z,a=this.w;return this.x=n+t*(e.x-n),this.y=i+t*(e.y-i),this.z=o+t*(e.z-o),this.w=a+t*(e.w-a),this}toString(){return`(${this.x.toFixed(2)}, ${this.y.toFixed(2)}, ${this.z.toFixed(2)}, ${this.w.toFixed(2)})`}clampf(e,t){return this.x=yn(this.x,e.x,t.x),this.y=yn(this.y,e.y,t.y),this.z=yn(this.z,e.z,t.z),this.w=yn(this.w,e.w,t.w),this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}add4f(e,t,n,i){return this.x+=e,this.y+=t,this.z+=n,this.w+=i,this}subtract(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subtract4f(e,t,n,i){return this.x-=e,this.y-=t,this.z-=n,this.w-=i,this}multiplyScalar(e){return"object"==typeof e&&console.warn("should use Vec4.multiply for vector * vector operation"),this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}multiply(e){return"object"!=typeof e&&console.warn("should use Vec4.scale for vector * scalar operation"),this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiply4f(e,t,n,i){return this.x*=e,this.y*=t,this.z*=n,this.w*=i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divide4f(e,t,n,i){return this.x/=e,this.y/=t,this.z/=n,this.w/=i,this}negative(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}cross(e){const{x:t,y:n,z:i}=this,{x:o,y:a,z:r}=e;return this.x=n*r-i*a,this.y=i*o-t*r,this.z=t*a-n*o,this}length(){const e=this.x,t=this.y,n=this.z,i=this.w;return Math.sqrt(e*e+t*t+n*n+i*i)}lengthSqr(){const e=this.x,t=this.y,n=this.z,i=this.w;return e*e+t*t+n*n+i*i}normalize(){const e=this.x,t=this.y,n=this.z,i=this.w;let o=e*e+t*t+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),this.x=e*o,this.y=t*o,this.z=n*o,this.w=i*o),this}transformMat4(e){const t=this.x,n=this.y,i=this.z,o=this.w;return this.x=e.m00*t+e.m04*n+e.m08*i+e.m12*o,this.y=e.m01*t+e.m05*n+e.m09*i+e.m13*o,this.z=e.m02*t+e.m06*n+e.m10*i+e.m14*o,this.w=e.m03*t+e.m07*n+e.m11*i+e.m15*o,this}}function fi(e,t,n,i){return new ui(e,t,n,i)}e("bX",ui),ui.ZERO=Object.freeze(new ui(0,0,0,0)),ui.ONE=Object.freeze(new ui(1,1,1,1)),ui.NEG_ONE=Object.freeze(new ui(-1,-1,-1,-1)),Rt.fastDefine("cc.Vec4",ui,{x:0,y:0,z:0,w:0}),c.Vec4=ui,c.v4=fi,an(si,"Vec2",[{name:"sub",newName:"subtract",target:si,targetName:"Vec2"},{name:"mul",newName:"multiply",target:si,targetName:"Vec2"},{name:"div",newName:"divide",target:si,targetName:"Vec2"},{name:"dist",newName:"distance",target:si,targetName:"Vec2"},{name:"sqrDist",newName:"squaredDistance",target:si,targetName:"Vec2"},{name:"mag",newName:"len",target:si,targetName:"Vec2"},{name:"sqrMag",newName:"lengthSqr",target:si,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:si,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:si,targetName:"Vec2"}]),an(si.prototype,"Vec2",[{name:"mag",newName:"length",target:si.prototype,targetName:"Vec2"},{name:"magSqr",newName:"lengthSqr",target:si.prototype,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:si.prototype,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:si.prototype,targetName:"Vec2"}]),an(Gn,"Vec3",[{name:"sub",newName:"subtract",target:Gn,targetName:"Vec3"},{name:"mul",newName:"multiply",target:Gn,targetName:"Vec3"},{name:"div",newName:"divide",target:Gn,targetName:"Vec3"},{name:"dist",newName:"distance",target:Gn,targetName:"Vec3"},{name:"sqrDist",newName:"squaredDistance",target:Gn,targetName:"Vec3"},{name:"mag",newName:"len",target:Gn,targetName:"Vec3"},{name:"sqrMag",newName:"lengthSqr",target:Gn,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:Gn,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:Gn,targetName:"Vec3"}]),an(Gn.prototype,"Vec3",[{name:"mag",newName:"length",target:Gn.prototype,targetName:"Vec3"},{name:"magSqr",newName:"lengthSqr",target:Gn.prototype,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:Gn.prototype,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:Gn.prototype,targetName:"Vec3"}]),an(ui,"Vec4",[{name:"sub",newName:"subtract",target:ui,targetName:"Vec4"},{name:"mul",newName:"multiply",target:ui,targetName:"Vec4"},{name:"div",newName:"divide",target:ui,targetName:"Vec4"},{name:"dist",newName:"distance",target:ui,targetName:"Vec4"},{name:"sqrDist",newName:"squaredDistance",target:ui,targetName:"Vec4"},{name:"mag",newName:"len",target:ui,targetName:"Vec4"},{name:"sqrMag",newName:"lengthSqr",target:ui,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:ui,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:ui,targetName:"Vec4"}]),an(ui.prototype,"Vec4",[{name:"mag",newName:"length",target:ui.prototype,targetName:"Vec4"},{name:"magSqr",newName:"lengthSqr",target:ui.prototype,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:ui.prototype,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:ui.prototype,targetName:"Vec4"}]),an(Qn,"Quat",[{name:"mag",newName:"len",target:Qn,targetName:"Quat"},{name:"mul",newName:"multiply",target:Qn,targetName:"Quat"},{name:"sqrMag",newName:"lengthSqr",target:Qn,targetName:"Quat"},{name:"scale",newName:"multiplyScalar",target:Qn,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:Qn,targetName:"Quat"}]),an(Qn.prototype,"Quat",[{name:"scale",newName:"multiplyScalar",target:Qn.prototype,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:Qn.prototype,targetName:"Quat"}]),an(Un,"Color",[{name:"sub",newName:"subtract",target:Un,targetName:"Color"},{name:"mul",newName:"multiply",target:Un,targetName:"Color"},{name:"div",newName:"divide",target:Un,targetName:"Color"},{name:"exactEquals",newName:"strictEquals",target:Un,targetName:"Color"},{name:"fromHex",newName:"fromHEX",customFunction(...e){const t=e[1].toString(16);return c.Color.fromHEX(e[0],t)}}]),an(qn,"Mat3",[{name:"sub",newName:"subtract",target:qn,targetName:"Mat3"},{name:"mul",newName:"multiply",target:qn,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:qn,targetName:"Mat3"},{name:"transfrom",newName:"transform",target:qn,targetName:"Mat3"}]),an(qn.prototype,"Mat3",[{name:"sub",newName:"subtract",target:qn.prototype,targetName:"Mat3"},{name:"mul",newName:"multiply",target:qn.prototype,targetName:"Mat3"},{name:"mulScalar",newName:"multiplyScalar",target:qn.prototype,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:qn.prototype,targetName:"Mat3"}]),an(ii,"Mat4",[{name:"sub",newName:"subtract",target:ii,targetName:"Mat4"},{name:"mul",newName:"multiply",target:ii,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:ii,targetName:"Mat4"}]),an(ii.prototype,"Mat4",[{name:"sub",newName:"subtract",target:ii.prototype,targetName:"Mat4"},{name:"mul",newName:"multiply",target:ii.prototype,targetName:"Mat4"},{name:"mulScalar",newName:"multiplyScalar",target:ii.prototype,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:ii.prototype,targetName:"Mat4"}]);class hi{static identity(){return new hi}static clone(e){return new hi(e.a,e.b,e.c,e.d,e.tx,e.ty)}static concat(e,t,n){const i=t.a,o=t.b,a=t.c,r=t.d,s=t.tx,c=t.ty;e.a=i*n.a+o*n.c,e.b=i*n.b+o*n.d,e.c=a*n.a+r*n.c,e.d=a*n.b+r*n.d,e.tx=s*n.a+c*n.c+n.tx,e.ty=s*n.b+c*n.d+n.ty}static invert(e,t){const n=1/(t.a*t.d-t.b*t.c);e.a=n*t.d,e.b=-n*t.b,e.c=-n*t.c,e.d=n*t.a,e.tx=n*(t.c*t.ty-t.d*t.tx),e.ty=n*(t.b*t.tx-t.a*t.ty)}static fromMat4(e,t){e.a=t.m00,e.b=t.m01,e.c=t.m04,e.d=t.m05,e.tx=t.m12,e.ty=t.m13}static transformVec2(e,t,n,i){let o,a;void 0===i?(i=n,o=t.x,a=t.y):(o=t,a=n),e.x=i.a*o+i.c*a+i.tx,e.y=i.b*o+i.d*a+i.ty}static transformSize(e,t,n){e.width=n.a*t.width+n.c*t.height,e.height=n.b*t.width+n.d*t.height}static transformRect(e,t,n){const i=t.x+t.width,o=t.y+t.height,a=n.a*t.x+n.c*t.y+n.tx,r=n.b*t.x+n.d*t.y+n.ty,s=n.a*i+n.c*t.y+n.tx,c=n.b*i+n.d*t.y+n.ty,l=n.a*t.x+n.c*o+n.tx,_=n.b*t.x+n.d*o+n.ty,u=n.a*i+n.c*o+n.tx,f=n.b*i+n.d*o+n.ty,h=Math.min(a,s,l,u),p=Math.max(a,s,l,u),m=Math.min(r,c,_,f),d=Math.max(r,c,_,f);e.x=h,e.y=m,e.width=p-h,e.height=d-m}static transformObb(e,t,n,i,o,a){const r=a.a*o.x+a.c*o.y+a.tx,s=a.b*o.x+a.d*o.y+a.ty,c=a.a*o.width,l=a.b*o.width,_=a.c*o.height,u=a.d*o.height;t.x=r,t.y=s,n.x=c+r,n.y=l+s,e.x=_+r,e.y=u+s,i.x=c+_+r,i.y=l+u+s}constructor(e=1,t=0,n=0,i=1,o=0,a=0){this.a=e,this.b=t,this.c=n,this.d=i,this.tx=o,this.ty=a}}e("eD",hi),c.AffineTransform=hi;class pi extends Ve{static lerp(e,t,n,i){return e.width=t.width+(n.width-t.width)*i,e.height=t.height+(n.height-t.height)*i,e}set x(e){this.width=e}get x(){return this.width}set y(e){this.height=e}get y(){return this.height}constructor(e,t){super(),e&&"object"==typeof e?(this.width=e.width,this.height=e.height):(this.width=e||0,this.height=t||0)}clone(){return new pi(this.width,this.height)}set(e,t){return e&&"object"==typeof e?(this.height=e.height,this.width=e.width):(this.width=e||0,this.height=t||0),this}equals(e){return this.width===e.width&&this.height===e.height}lerp(e,t){return this.width+=(e.width-this.width)*t,this.height+=(e.height-this.height)*t,this}toString(){return`(${this.width.toFixed(2)}, ${this.height.toFixed(2)})`}}function mi(e=0,t=0){return new pi(e,t)}e("cJ",pi),pi.ZERO=Object.freeze(new pi(0,0)),pi.ONE=Object.freeze(new pi(1,1)),Rt.fastDefine("cc.Size",pi,{width:0,height:0}),c.size=mi,c.Size=pi;class di extends Ve{static fromMinMax(e,t,n){const i=Math.min(t.x,n.x),o=Math.min(t.y,n.y),a=Math.max(t.x,n.x),r=Math.max(t.y,n.y);return e.x=i,e.y=o,e.width=a-i,e.height=r-o,e}static lerp(e,t,n,i){const o=t.x,a=t.y,r=t.width,s=t.height;return e.x=o+(n.x-o)*i,e.y=a+(n.y-a)*i,e.width=r+(n.width-r)*i,e.height=s+(n.height-s)*i,e}static intersection(e,t,n){const i=t.x,o=t.y,a=t.x+t.width,r=t.y+t.height,s=n.x,c=n.y,l=n.x+n.width,_=n.y+n.height;return e.x=Math.max(i,s),e.y=Math.max(o,c),e.width=Math.min(a,l)-e.x,e.height=Math.min(r,_)-e.y,e}static union(e,t,n){const i=t.x,o=t.y,a=t.width,r=t.height,s=n.x,c=n.y,l=n.width,_=n.height;return e.x=Math.min(i,s),e.y=Math.min(o,c),e.width=Math.max(i+a,s+l)-e.x,e.height=Math.max(o+r,c+_)-e.y,e}get xMin(){return this.x}set xMin(e){this.width+=this.x-e,this.x=e}get yMin(){return this.y}set yMin(e){this.height+=this.y-e,this.y=e}get xMax(){return this.x+this.width}set xMax(e){this.width=e-this.x}get yMax(){return this.y+this.height}set yMax(e){this.height=e-this.y}get center(){return new si(this.x+.5*this.width,this.y+.5*this.height)}set center(e){this.x=e.x-.5*this.width,this.y=e.y-.5*this.height}get origin(){return new si(this.x,this.y)}set origin(e){this.x=e.x,this.y=e.y}get size(){return new pi(this.width,this.height)}set size(e){this.width=e.width,this.height=e.height}set z(e){this.width=e}get z(){return this.width}set w(e){this.height=e}get w(){return this.height}constructor(e,t,n,i){super(),e&&"object"==typeof e?(this.y=e.y,this.width=e.width,this.height=e.height,this.x=e.x):(this.x=e||0,this.y=t||0,this.width=n||0,this.height=i||0)}clone(){return new di(this.x,this.y,this.width,this.height)}set(e,t,n,i){return e&&"object"==typeof e?(this.y=e.y,this.width=e.width,this.height=e.height,this.x=e.x):(this.x=e||0,this.y=t||0,this.width=n||0,this.height=i||0),this}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}lerp(e,t){const n=this.x,i=this.y,o=this.width,a=this.height;return this.x=n+(e.x-n)*t,this.y=i+(e.y-i)*t,this.width=o+(e.width-o)*t,this.height=a+(e.height-a)*t,this}toString(){return`(${this.x.toFixed(2)}, ${this.y.toFixed(2)}, ${this.width.toFixed(2)}, ${this.height.toFixed(2)})`}intersects(e){const t=this.x+this.width,n=this.y+this.height,i=e.x+e.width,o=e.y+e.height;return!(t<e.x||i<this.x||n<e.y||o<this.y)}contains(e){return this.x<=e.x&&this.x+this.width>=e.x&&this.y<=e.y&&this.y+this.height>=e.y}containsRect(e){return this.x<=e.x&&this.x+this.width>=e.x+e.width&&this.y<=e.y&&this.y+this.height>=e.y+e.height}transformMat4(e){const t=this.x,n=this.y,i=t+this.width,o=n+this.height,a=e.m00*t+e.m04*n+e.m12,r=e.m01*t+e.m05*n+e.m13,s=e.m00*i+e.m04*n+e.m12,c=e.m01*i+e.m05*n+e.m13,l=e.m00*t+e.m04*o+e.m12,_=e.m01*t+e.m05*o+e.m13,u=e.m00*i+e.m04*o+e.m12,f=e.m01*i+e.m05*o+e.m13,h=Math.min(a,s,l,u),p=Math.max(a,s,l,u),m=Math.min(r,c,_,f),d=Math.max(r,c,_,f);return this.x=h,this.y=m,this.width=p-h,this.height=d-m,this}transformMat4ToPoints(e,t,n,i,o){const a=this.x,r=this.y,s=a+this.width,c=r+this.height;t.x=e.m00*a+e.m04*r+e.m12,t.y=e.m01*a+e.m05*r+e.m13,o.x=e.m00*s+e.m04*r+e.m12,o.y=e.m01*s+e.m05*r+e.m13,n.x=e.m00*a+e.m04*c+e.m12,n.y=e.m01*a+e.m05*c+e.m13,i.x=e.m00*s+e.m04*c+e.m12,i.y=e.m01*s+e.m05*c+e.m13}}function vi(e=0,t=0,n=0,i=0){return new di(e,t,n,i)}e("cI",di),Rt.fastDefine("cc.Rect",di,{x:0,y:0,width:0,height:0}),c.Rect=di,c.rect=vi;var gi=Object.freeze({__proto__:null,bits:on,Vec2:si,v2:_i,Vec3:Gn,v3:Wn,Vec4:ui,v4:fi,Quat:Qn,quat:ti,Mat3:qn,Mat4:ii,mat4:ri,AffineTransform:hi,Size:pi,size:mi,Rect:di,rect:vi,Color:Un,color:Bn,EPSILON:dn,equals:vn,approx:gn,clamp:yn,clamp01:An,lerp:xn,toRadian:bn,toDegree:Cn,random:Sn,randomRange:En,randomRangeInt:wn,pseudoRandom:Tn,pseudoRandomRange:Pn,pseudoRandomRangeInt:In,nextPow2:Rn,repeat:Nn,pingPong:Dn,inverseLerp:Mn,absMaxComponent:On,absMax:zn,enumerableProps:Ln,MATH_FLOAT_ARRAY:kn,MathBase:jn});let yi;e("ev",gi),function(e){e[e.PORTRAIT=1]="PORTRAIT",e[e.PORTRAIT_UPSIDE_DOWN=2]="PORTRAIT_UPSIDE_DOWN",e[e.LANDSCAPE_LEFT=4]="LANDSCAPE_LEFT",e[e.LANDSCAPE_RIGHT=8]="LANDSCAPE_RIGHT",e[e.LANDSCAPE=12]="LANDSCAPE"}(yi||(yi={}));const Ai={0:yi.PORTRAIT,"-90":yi.LANDSCAPE_LEFT,90:yi.LANDSCAPE_RIGHT,180:yi.PORTRAIT_UPSIDE_DOWN},xi=e("dC",new class extends Yt{constructor(){super(),this._registerEvent()}_registerEvent(){jsb.onResize=e=>{0!==e.width&&0!==e.height&&(e.width/=Kt.pixelRatio,e.height/=Kt.pixelRatio,window.resize(e.width,e.height),this.emit("window-resize"))},jsb.onOrientationChanged=()=>{this.emit("orientation-change")}}get supportFullScreen(){return!1}get isFullScreen(){return!1}get windowSize(){return new pi(window.innerWidth,window.innerHeight)}set windowSize(e){console.warn("Setting window size is not supported yet.")}get orientation(){return Ai[jsb.device.getDeviceOrientation()]}get safeAreaEdge(){const e=jsb.device.getSafeAreaEdge();let t=e.x,n=e.z,i=e.y,o=e.w;return this.orientation===yi.PORTRAIT?t<n?t=n:n=t:i<o?i=o:o=i,{top:t,bottom:n,left:i,right:o}}requestFullScreen(){return Promise.reject(new Error("request fullscreen has not been supported yet on this platform."))}exitFullScreen(){return Promise.reject(new Error("exit fullscreen has not been supported yet on this platform."))}}),bi=xi.windowSize,Ci=Kt.pixelRatio,Si=e("bp",{NetworkType:k,Language:B,OS:j,Platform:G,BrowserType:U,isNative:Kt.isNative,isBrowser:Kt.isBrowser,isMobile:Kt.isMobile,isLittleEndian:Kt.isLittleEndian,platform:Kt.platform,language:Kt.language,languageCode:Kt.nativeLanguage,os:Kt.os,osVersion:Kt.osVersion,osMainVersion:Kt.osMainVersion,browserType:Kt.browserType,browserVersion:Kt.browserVersion,windowPixelResolution:{width:bi.width*Ci,height:bi.height*Ci},capabilities:{canvas:Kt.supportCapability.canvas,opengl:Kt.supportCapability.gl,webp:Kt.supportCapability.webp,imageBitmap:Kt.supportCapability.imageBitmap,touches:!1,mouse:!1,keyboard:!1,accelerometer:!1},localStorage:{},getNetworkType:()=>Kt.networkType,getBatteryLevel:()=>Kt.getBatteryLevel(),garbageCollect(){Kt.triggerGC()},isObjectValid:e=>null!=e,dump(){let e="";e+=`isMobile : ${this.isMobile}\r\n`,e+=`language : ${this.language}\r\n`,e+=`browserType : ${this.browserType}\r\n`,e+=`browserVersion : ${this.browserVersion}\r\n`,e+=`capabilities : ${JSON.stringify(this.capabilities)}\r\n`,e+=`os : ${this.os}\r\n`,e+=`osVersion : ${this.osVersion}\r\n`,e+=`platform : ${this.platform}\r\n`,e+=`Using ${c.game.renderType===c.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS"} renderer.\r\n`,v(e)},openURL(e){Kt.openURL(e)},now:()=>Kt.now(),restartVM(){Kt.restartJSVM()},getSafeAreaRect(){const e=c.view,t=xi.safeAreaEdge,n=xi.windowSize,i=new si(t.left,n.height-t.bottom),o=new si(n.width-t.right,t.top),a={left:0,top:0,width:n.width,height:n.height};e.convertToLocationInView(i.x,i.y,a,i),e.convertToLocationInView(o.x,o.y,a,o),e._convertPointWithScale(i),e._convertPointWithScale(o);const r=i.x,s=i.y,l=o.x-i.x,_=o.y-i.y;return new di(r,s,l,_)}});!function(){try{let e=Si.localStorage=window.localStorage;e.setItem("storage",""),e.removeItem("storage"),e=null}catch(e){const t=function(){P(5200)};Si.localStorage={getItem:t,setItem:t,clear:t,removeItem:t}}const e=window,t=e.navigator,n=document,i=n.documentElement,o=Si.capabilities;(void 0!==i.ontouchstart||void 0!==n.ontouchstart||t.msPointerEnabled)&&(o.touches=!0),void 0!==i.onmouseup&&(o.mouse=!0),void 0!==i.onkeyup&&(o.keyboard=!0),(e.DeviceMotionEvent||e.DeviceOrientationEvent)&&(o.accelerometer=!0),Si.__isWebIOS14OrIPadOS14Env=(Si.os===j.IOS||Si.os===j.OSX)&&Kt.isBrowser&&/(OS 1[4-9])|(Version\/1[4-9])/.test(window.navigator.userAgent),xi.on("window-resize",(()=>{const e=xi.windowSize;Si.windowPixelResolution={width:Math.round(e.width*Ci),height:Math.round(e.height*Ci)}}))}(),c.sys=Si;const Ei=/(\.[^\.\/\?\\]*)(\?.*)?$/,wi=/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,Ti=/[^\.\/]+\/\.\.\//;function Pi(...e){let t="";for(const n of e)t=(t+(""===t?"":"/")+n).replace(/(\/|\\\\)$/,"");return t}function Ii(e){const t=Ei.exec(e);return t?t[1]:""}function Ri(e){if(e){const t=e.lastIndexOf(".");if(-1!==t)return e.substring(0,t)}return e}function Ni(e,t){const n=e.indexOf("?");n>0&&(e=e.substring(0,n));const i=/(\/|\\)([^\/\\]+)$/g.exec(e.replace(/(\/|\\)$/,""));if(!i)return e;const o=i[2];return t&&e.substring(e.length-t.length).toLowerCase()===t.toLowerCase()?o.substring(0,o.length-t.length):o}function Di(e){const t=wi.exec(e);return t?t[2]:""}function Mi(e,t){t=t||"";let n=e.indexOf("?"),i="";return n>0&&(i=e.substring(n),e=e.substring(0,n)),n=e.lastIndexOf("."),n<0?e+t+i:e.substring(0,n)+t+i}function Oi(e,t,n){if(0===t.indexOf("."))return Mi(e,t);let i=e.indexOf("?"),o="";const a=n?Ii(e):"";return i>0&&(o=e.substring(i),e=e.substring(0,i)),i=e.lastIndexOf("/"),i=i<=0?0:i+1,e.substring(0,i)+t+a+o}function zi(e){let t=e=String(e);do{t=e,e=e.replace(Ti,"")}while(t.length!==e.length);return e}function Li(e){return e.replace(/[\/\\]$/,"")}function Fi(){return Si.os===j.WINDOWS?"\\":"/"}e("eU",Object.freeze({__proto__:null,join:Pi,extname:Ii,mainFileName:Ri,basename:Ni,dirname:Di,changeExtname:Mi,changeBasename:Oi,_normalize:zi,stripSep:Li,getSeperator:Fi})),c.log=v,c.warn=g,c.error=y,c.assert=A,c._throw=C,c.logID=w,c.warnID=P,c.errorID=R,c.assertID=D,c.debug=F,c.path={join:Pi,extname:Ii,mainFileName:Ri,basename:Ni,dirname:Di,changeExtname:Mi,changeBasename:Oi,_normalize:zi,stripSep:Li,get sep(){return Fi()}};let Ui=0;const Bi={};var ki={addStage(e){if(void 0!==Bi[e])return;const t=1<<Ui;Bi[e]=t,Ui+=1},stageID(e){const t=Bi[e];return void 0===t?-1:t},stageIDs(e){let t=0;for(const n of e){const e=Bi[n];void 0!==e&&(t|=e)}return t}};const ji=ns.Node,Gi=ns.Scene,Vi=ns.Model,Hi=e("cr",ns.SkinningModel),Wi=e("cw",ns.BakedSkinningModel),qi=ns.light,Yi=ns.DirectionalLight,Xi=ns.SpotLight,Qi=ns.SphereLight,Ki=ns.Skybox,Zi=ns.Fog,Ji=ns.Ambient,$i=ns.Shadow,eo=ns.Camera,to=ns.RenderWindow,no=ns.RenderScene,io=e("da",ns.DrawBatch2D),oo=ns.Pass,ao=ns.SubModel,ro=ns.Root,so=ns.PipelineSharedSceneData,co=ns.AABB;class lo{get colorArray(){return this._colorArray}get albedoArray(){return this._albedoArray}set enabled(e){this._enabled=e,this._nativeObj.enabled=e}get enabled(){return this._enabled}get skyColor(){return this._skyColor}set skyColor(e){this._skyColor.set(e),Un.toArray(this._colorArray,this._skyColor),this._nativeObj.skyColor=this._skyColor}get skyIllum(){return this._skyIllum}set skyIllum(e){this._skyIllum=e,this._nativeObj.skyIllum=e}get groundAlbedo(){return this._groundAlbedo}set groundAlbedo(e){this._groundAlbedo.set(e),Gn.toArray(this._albedoArray,this._groundAlbedo),this._nativeObj.groundAlbedo=this._groundAlbedo}get native(){return this._nativeObj}constructor(){this._skyColor=new Un(51,128,204,1),this._groundAlbedo=new Un(51,51,51,255),this._albedoArray=Float32Array.from([.2,.2,.2,1]),this._colorArray=Float32Array.from([.2,.5,.8,1]),this._enabled=!1,this._skyIllum=0,this._nativeObj=new Ji}initialize(e){this.skyColor=e.skyColor,this.groundAlbedo=e.groundAlbedo,this.skyIllum=e.skyIllum}_destroy(){this._nativeObj=null}destroy(){this._destroy()}}lo.SUN_ILLUM=65e3,lo.SKY_ILLUM=2e4,c.Ambient=lo;const _o=new Gn,uo=new Gn,fo=new Gn,ho=new Gn,po=new Gn,mo=new Gn,vo=new Array(3),go=new Array(3);function yo(e,t){return Gn.dot(t.n,e)-t.d}function Ao(e,t,n){return Gn.copy(e,t),Gn.subtract(po,n.center,n.halfExtents),Gn.add(mo,n.center,n.halfExtents),e.x=e.x<po.x?po.x:e.x,e.y=e.y<po.y?po.y:e.y,e.z=e.z<po.z?po.z:e.z,e.x=e.x>mo.x?mo.x:e.x,e.y=e.y>mo.y?mo.y:e.y,e.z=e.z>mo.z?mo.z:e.z,e}function xo(e,t,n){Gn.set(_o,n.orientation.m00,n.orientation.m01,n.orientation.m02),Gn.set(uo,n.orientation.m03,n.orientation.m04,n.orientation.m05),Gn.set(fo,n.orientation.m06,n.orientation.m07,n.orientation.m08),vo[0]=_o,vo[1]=uo,vo[2]=fo,go[0]=n.halfExtents.x,go[1]=n.halfExtents.y,go[2]=n.halfExtents.z,Gn.subtract(ho,t,n.center),Gn.set(e,n.center.x,n.center.y,n.center.z);for(let t=0;t<3;t++){let n=Gn.dot(ho,vo[t]);n>go[t]&&(n=go[t]),n<-go[t]&&(n=-go[t]),e.x+=n*vo[t].x,e.y+=n*vo[t].y,e.z+=n*vo[t].z}return e}var bo=Object.freeze({__proto__:null,point_plane:yo,pt_point_plane:function(e,t,n){const i=yo(t,n);return Gn.subtract(e,t,Gn.multiplyScalar(e,n.n,i))},pt_point_aabb:Ao,pt_point_obb:xo,pt_point_line:function(e,t,n,i){Gn.subtract(_o,n,i);const o=_o,a=Gn.lengthSqr(o);if(0==a)Gn.copy(e,n);else{Gn.subtract(_o,t,n);const r=Gn.dot(_o,o)/a;r<0?Gn.copy(e,n):r>1?Gn.copy(e,i):Gn.scaleAndAdd(e,n,o,r)}}}),Co={SHAPE_RAY:1,SHAPE_LINE:2,SHAPE_SPHERE:4,SHAPE_AABB:8,SHAPE_OBB:16,SHAPE_PLANE:32,SHAPE_TRIANGLE:64,SHAPE_FRUSTUM:128,SHAPE_FRUSTUM_ACCURATE:256,SHAPE_CAPSULE:512};class So{static create(e,t,n,i,o,a){return new So(e,t,n,i,o,a)}static clone(e){return new So(e.s.x,e.s.y,e.s.z,e.e.x,e.e.y,e.e.z)}static copy(e,t){return Gn.copy(e.s,t.s),Gn.copy(e.e,t.e),e}static fromPoints(e,t,n){return Gn.copy(e.s,t),Gn.copy(e.e,n),e}static set(e,t,n,i,o,a,r){return e.s.x=t,e.s.y=n,e.s.z=i,e.e.x=o,e.e.y=a,e.e.z=r,e}static len(e){return Gn.distance(e.s,e.e)}get type(){return this._type}constructor(e=0,t=0,n=0,i=0,o=0,a=-1){this.s=void 0,this.e=void 0,this._type=void 0,this._type=Co.SHAPE_LINE,this.s=new Gn(e,t,n),this.e=new Gn(i,o,a)}length(){return Gn.distance(this.s,this.e)}}class Eo{static create(e=0,t=0,n=0,i=0,o=0,a=1){return new Eo(e,t,n,i,o,a)}static clone(e){return new Eo(e.o.x,e.o.y,e.o.z,e.d.x,e.d.y,e.d.z)}static copy(e,t){return Gn.copy(e.o,t.o),Gn.copy(e.d,t.d),e}static fromPoints(e,t,n){return Gn.copy(e.o,t),Gn.normalize(e.d,Gn.subtract(e.d,n,t)),e}static set(e,t,n,i,o,a,r){return e.o.x=t,e.o.y=n,e.o.z=i,e.d.x=o,e.d.y=a,e.d.z=r,e}get type(){return this._type}constructor(e=0,t=0,n=0,i=0,o=0,a=-1){this.o=void 0,this.d=void 0,this._type=void 0,this._type=Co.SHAPE_RAY,this.o=new Gn(e,t,n),this.d=new Gn(i,o,a)}computeHit(e,t){Gn.normalize(e,this.d),Gn.scaleAndAdd(e,this.o,e,t)}}const wo=new Gn,To=new Gn,Po=new Gn,Io=new Gn;function Ro(e){return Math.max(Math.max(e.x,e.y),e.z)}class No{static create(e,t,n,i){return new No(e,t,n,i)}static clone(e){return new No(e.center.x,e.center.y,e.center.z,e.radius)}static copy(e,t){return Gn.copy(e.center,t.center),e.radius=t.radius,e}static fromPoints(e,t,n){return Gn.multiplyScalar(e.center,Gn.add(wo,t,n),.5),e.radius=.5*Gn.subtract(wo,n,t).length(),e}static set(e,t,n,i,o){return e.center.x=t,e.center.y=n,e.center.z=i,e.radius=o,e}static mergePoint(e,t,n){if(t.radius<0)return e.center.set(n),e.radius=0,e;Gn.subtract(To,n,t.center);const i=To.length();if(i>t.radius){const n=.5*(i-t.radius);e.radius+=n,Gn.multiplyScalar(To,To,n/i),Gn.add(e.center,e.center,To)}return e}static mergeAABB(e,t,n){return n.getBoundary(Po,Io),No.mergePoint(e,t,Po),No.mergePoint(e,t,Io),e}get center(){return this._center}set center(e){this._center=e}get radius(){return this._radius}set radius(e){this._radius=e}get type(){return this._type}constructor(e=0,t=0,n=0,i=1){this._center=new Gn(0,0,0),this._radius=0,this._type=void 0,this._type=Co.SHAPE_SPHERE,this._center=new Gn(e,t,n),this._radius=i}destroy(){}clone(){return No.clone(this)}copy(e){return No.copy(this,e)}getBoundary(e,t){Gn.set(e,this.center.x-this.radius,this.center.y-this.radius,this.center.z-this.radius),Gn.set(t,this.center.x+this.radius,this.center.y+this.radius,this.center.z+this.radius)}transform(e,t,n,i,o){Gn.transformMat4(o.center,this.center,e),o.radius=this.radius*Ro(i)}translateAndRotate(e,t,n){Gn.transformMat4(n.center,this.center,e)}setScale(e,t){t.radius=this.radius*Ro(e)}}e("dW",No);class Do{static create(e=1,t=0,n=0,i=0,o=0,a=0,r=0,s=0,c=1){return new Do(e,t,n,i,o,a,r,s,c)}static clone(e){return new Do(e.a.x,e.a.y,e.a.z,e.b.x,e.b.y,e.b.z,e.c.x,e.c.y,e.c.z)}static copy(e,t){return Gn.copy(e.a,t.a),Gn.copy(e.b,t.b),Gn.copy(e.c,t.c),e}static fromPoints(e,t,n,i){return Gn.copy(e.a,t),Gn.copy(e.b,n),Gn.copy(e.c,i),e}static set(e,t,n,i,o,a,r,s,c,l){return e.a.x=t,e.a.y=n,e.a.z=i,e.b.x=o,e.b.y=a,e.b.z=r,e.c.x=s,e.c.y=c,e.c.z=l,e}get type(){return this._type}constructor(e=0,t=0,n=0,i=1,o=0,a=0,r=0,s=1,c=0){this.a=void 0,this.b=void 0,this.c=void 0,this._type=void 0,this._type=Co.SHAPE_TRIANGLE,this.a=new Gn(e,t,n),this.b=new Gn(i,o,a),this.c=new Gn(r,s,c)}}const Mo=(e,t,n)=>{for(let i=0;i<t.length;++i)e.length<=i&&e.push(new n),e[i].copy(t[i]);e.length=t.length};let Oo,zo,Lo,Fo,Uo,Bo,ko,jo,Go,Vo,Ho,Wo,qo,Yo,Xo,Qo,Ko,Zo,Jo,$o,ea,ta,na,ia,oa,aa,ra,sa,ca,la,_a,ua,fa,ha,pa,ma,da,va,ga,ya;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.BUFFER=1]="BUFFER",e[e.TEXTURE=2]="TEXTURE",e[e.RENDER_PASS=3]="RENDER_PASS",e[e.FRAMEBUFFER=4]="FRAMEBUFFER",e[e.SAMPLER=5]="SAMPLER",e[e.SHADER=6]="SHADER",e[e.DESCRIPTOR_SET_LAYOUT=7]="DESCRIPTOR_SET_LAYOUT",e[e.PIPELINE_LAYOUT=8]="PIPELINE_LAYOUT",e[e.PIPELINE_STATE=9]="PIPELINE_STATE",e[e.DESCRIPTOR_SET=10]="DESCRIPTOR_SET",e[e.INPUT_ASSEMBLER=11]="INPUT_ASSEMBLER",e[e.COMMAND_BUFFER=12]="COMMAND_BUFFER",e[e.QUEUE=13]="QUEUE",e[e.GLOBAL_BARRIER=14]="GLOBAL_BARRIER",e[e.TEXTURE_BARRIER=15]="TEXTURE_BARRIER",e[e.BUFFER_BARRIER=16]="BUFFER_BARRIER"}(Oo||(Oo=e("a",{}))),function(e){e[e.UNREADY=0]="UNREADY",e[e.FAILED=1]="FAILED",e[e.SUCCESS=2]="SUCCESS"}(zo||(zo=e("S",{}))),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.GLES2=1]="GLES2",e[e.GLES3=2]="GLES3",e[e.METAL=3]="METAL",e[e.VULKAN=4]="VULKAN",e[e.WEBGL=5]="WEBGL",e[e.WEBGL2=6]="WEBGL2",e[e.WEBGPU=7]="WEBGPU"}(Lo||(Lo=e("f",{}))),function(e){e[e.IDENTITY=0]="IDENTITY",e[e.ROTATE_90=1]="ROTATE_90",e[e.ROTATE_180=2]="ROTATE_180",e[e.ROTATE_270=3]="ROTATE_270"}(Fo||(Fo=e("g",{}))),function(e){e[e.COLOR_FLOAT=0]="COLOR_FLOAT",e[e.COLOR_HALF_FLOAT=1]="COLOR_HALF_FLOAT",e[e.TEXTURE_FLOAT=2]="TEXTURE_FLOAT",e[e.TEXTURE_HALF_FLOAT=3]="TEXTURE_HALF_FLOAT",e[e.TEXTURE_FLOAT_LINEAR=4]="TEXTURE_FLOAT_LINEAR",e[e.TEXTURE_HALF_FLOAT_LINEAR=5]="TEXTURE_HALF_FLOAT_LINEAR",e[e.FORMAT_R11G11B10F=6]="FORMAT_R11G11B10F",e[e.FORMAT_SRGB=7]="FORMAT_SRGB",e[e.FORMAT_ETC1=8]="FORMAT_ETC1",e[e.FORMAT_ETC2=9]="FORMAT_ETC2",e[e.FORMAT_DXT=10]="FORMAT_DXT",e[e.FORMAT_PVRTC=11]="FORMAT_PVRTC",e[e.FORMAT_ASTC=12]="FORMAT_ASTC",e[e.FORMAT_RGB8=13]="FORMAT_RGB8",e[e.ELEMENT_INDEX_UINT=14]="ELEMENT_INDEX_UINT",e[e.INSTANCED_ARRAYS=15]="INSTANCED_ARRAYS",e[e.MULTIPLE_RENDER_TARGETS=16]="MULTIPLE_RENDER_TARGETS",e[e.BLEND_MINMAX=17]="BLEND_MINMAX",e[e.COMPUTE_SHADER=18]="COMPUTE_SHADER",e[e.COUNT=19]="COUNT"}(Uo||(Uo=e("h",{}))),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A8=1]="A8",e[e.L8=2]="L8",e[e.LA8=3]="LA8",e[e.R8=4]="R8",e[e.R8SN=5]="R8SN",e[e.R8UI=6]="R8UI",e[e.R8I=7]="R8I",e[e.R16F=8]="R16F",e[e.R16UI=9]="R16UI",e[e.R16I=10]="R16I",e[e.R32F=11]="R32F",e[e.R32UI=12]="R32UI",e[e.R32I=13]="R32I",e[e.RG8=14]="RG8",e[e.RG8SN=15]="RG8SN",e[e.RG8UI=16]="RG8UI",e[e.RG8I=17]="RG8I",e[e.RG16F=18]="RG16F",e[e.RG16UI=19]="RG16UI",e[e.RG16I=20]="RG16I",e[e.RG32F=21]="RG32F",e[e.RG32UI=22]="RG32UI",e[e.RG32I=23]="RG32I",e[e.RGB8=24]="RGB8",e[e.SRGB8=25]="SRGB8",e[e.RGB8SN=26]="RGB8SN",e[e.RGB8UI=27]="RGB8UI",e[e.RGB8I=28]="RGB8I",e[e.RGB16F=29]="RGB16F",e[e.RGB16UI=30]="RGB16UI",e[e.RGB16I=31]="RGB16I",e[e.RGB32F=32]="RGB32F",e[e.RGB32UI=33]="RGB32UI",e[e.RGB32I=34]="RGB32I",e[e.RGBA8=35]="RGBA8",e[e.BGRA8=36]="BGRA8",e[e.SRGB8_A8=37]="SRGB8_A8",e[e.RGBA8SN=38]="RGBA8SN",e[e.RGBA8UI=39]="RGBA8UI",e[e.RGBA8I=40]="RGBA8I",e[e.RGBA16F=41]="RGBA16F",e[e.RGBA16UI=42]="RGBA16UI",e[e.RGBA16I=43]="RGBA16I",e[e.RGBA32F=44]="RGBA32F",e[e.RGBA32UI=45]="RGBA32UI",e[e.RGBA32I=46]="RGBA32I",e[e.R5G6B5=47]="R5G6B5",e[e.R11G11B10F=48]="R11G11B10F",e[e.RGB5A1=49]="RGB5A1",e[e.RGBA4=50]="RGBA4",e[e.RGB10A2=51]="RGB10A2",e[e.RGB10A2UI=52]="RGB10A2UI",e[e.RGB9E5=53]="RGB9E5",e[e.D16=54]="D16",e[e.D16S8=55]="D16S8",e[e.D24=56]="D24",e[e.D24S8=57]="D24S8",e[e.D32F=58]="D32F",e[e.D32F_S8=59]="D32F_S8",e[e.BC1=60]="BC1",e[e.BC1_ALPHA=61]="BC1_ALPHA",e[e.BC1_SRGB=62]="BC1_SRGB",e[e.BC1_SRGB_ALPHA=63]="BC1_SRGB_ALPHA",e[e.BC2=64]="BC2",e[e.BC2_SRGB=65]="BC2_SRGB",e[e.BC3=66]="BC3",e[e.BC3_SRGB=67]="BC3_SRGB",e[e.BC4=68]="BC4",e[e.BC4_SNORM=69]="BC4_SNORM",e[e.BC5=70]="BC5",e[e.BC5_SNORM=71]="BC5_SNORM",e[e.BC6H_UF16=72]="BC6H_UF16",e[e.BC6H_SF16=73]="BC6H_SF16",e[e.BC7=74]="BC7",e[e.BC7_SRGB=75]="BC7_SRGB",e[e.ETC_RGB8=76]="ETC_RGB8",e[e.ETC2_RGB8=77]="ETC2_RGB8",e[e.ETC2_SRGB8=78]="ETC2_SRGB8",e[e.ETC2_RGB8_A1=79]="ETC2_RGB8_A1",e[e.ETC2_SRGB8_A1=80]="ETC2_SRGB8_A1",e[e.ETC2_RGBA8=81]="ETC2_RGBA8",e[e.ETC2_SRGB8_A8=82]="ETC2_SRGB8_A8",e[e.EAC_R11=83]="EAC_R11",e[e.EAC_R11SN=84]="EAC_R11SN",e[e.EAC_RG11=85]="EAC_RG11",e[e.EAC_RG11SN=86]="EAC_RG11SN",e[e.PVRTC_RGB2=87]="PVRTC_RGB2",e[e.PVRTC_RGBA2=88]="PVRTC_RGBA2",e[e.PVRTC_RGB4=89]="PVRTC_RGB4",e[e.PVRTC_RGBA4=90]="PVRTC_RGBA4",e[e.PVRTC2_2BPP=91]="PVRTC2_2BPP",e[e.PVRTC2_4BPP=92]="PVRTC2_4BPP",e[e.ASTC_RGBA_4X4=93]="ASTC_RGBA_4X4",e[e.ASTC_RGBA_5X4=94]="ASTC_RGBA_5X4",e[e.ASTC_RGBA_5X5=95]="ASTC_RGBA_5X5",e[e.ASTC_RGBA_6X5=96]="ASTC_RGBA_6X5",e[e.ASTC_RGBA_6X6=97]="ASTC_RGBA_6X6",e[e.ASTC_RGBA_8X5=98]="ASTC_RGBA_8X5",e[e.ASTC_RGBA_8X6=99]="ASTC_RGBA_8X6",e[e.ASTC_RGBA_8X8=100]="ASTC_RGBA_8X8",e[e.ASTC_RGBA_10X5=101]="ASTC_RGBA_10X5",e[e.ASTC_RGBA_10X6=102]="ASTC_RGBA_10X6",e[e.ASTC_RGBA_10X8=103]="ASTC_RGBA_10X8",e[e.ASTC_RGBA_10X10=104]="ASTC_RGBA_10X10",e[e.ASTC_RGBA_12X10=105]="ASTC_RGBA_12X10",e[e.ASTC_RGBA_12X12=106]="ASTC_RGBA_12X12",e[e.ASTC_SRGBA_4X4=107]="ASTC_SRGBA_4X4",e[e.ASTC_SRGBA_5X4=108]="ASTC_SRGBA_5X4",e[e.ASTC_SRGBA_5X5=109]="ASTC_SRGBA_5X5",e[e.ASTC_SRGBA_6X5=110]="ASTC_SRGBA_6X5",e[e.ASTC_SRGBA_6X6=111]="ASTC_SRGBA_6X6",e[e.ASTC_SRGBA_8X5=112]="ASTC_SRGBA_8X5",e[e.ASTC_SRGBA_8X6=113]="ASTC_SRGBA_8X6",e[e.ASTC_SRGBA_8X8=114]="ASTC_SRGBA_8X8",e[e.ASTC_SRGBA_10X5=115]="ASTC_SRGBA_10X5",e[e.ASTC_SRGBA_10X6=116]="ASTC_SRGBA_10X6",e[e.ASTC_SRGBA_10X8=117]="ASTC_SRGBA_10X8",e[e.ASTC_SRGBA_10X10=118]="ASTC_SRGBA_10X10",e[e.ASTC_SRGBA_12X10=119]="ASTC_SRGBA_12X10",e[e.ASTC_SRGBA_12X12=120]="ASTC_SRGBA_12X12",e[e.COUNT=121]="COUNT"}(Bo||(Bo=e("i",{}))),function(e){e[e.NONE=0]="NONE",e[e.UNORM=1]="UNORM",e[e.SNORM=2]="SNORM",e[e.UINT=3]="UINT",e[e.INT=4]="INT",e[e.UFLOAT=5]="UFLOAT",e[e.FLOAT=6]="FLOAT"}(ko||(ko=e("j",{}))),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.BOOL=1]="BOOL",e[e.BOOL2=2]="BOOL2",e[e.BOOL3=3]="BOOL3",e[e.BOOL4=4]="BOOL4",e[e.INT=5]="INT",e[e.INT2=6]="INT2",e[e.INT3=7]="INT3",e[e.INT4=8]="INT4",e[e.UINT=9]="UINT",e[e.UINT2=10]="UINT2",e[e.UINT3=11]="UINT3",e[e.UINT4=12]="UINT4",e[e.FLOAT=13]="FLOAT",e[e.FLOAT2=14]="FLOAT2",e[e.FLOAT3=15]="FLOAT3",e[e.FLOAT4=16]="FLOAT4",e[e.MAT2=17]="MAT2",e[e.MAT2X3=18]="MAT2X3",e[e.MAT2X4=19]="MAT2X4",e[e.MAT3X2=20]="MAT3X2",e[e.MAT3=21]="MAT3",e[e.MAT3X4=22]="MAT3X4",e[e.MAT4X2=23]="MAT4X2",e[e.MAT4X3=24]="MAT4X3",e[e.MAT4=25]="MAT4",e[e.SAMPLER1D=26]="SAMPLER1D",e[e.SAMPLER1D_ARRAY=27]="SAMPLER1D_ARRAY",e[e.SAMPLER2D=28]="SAMPLER2D",e[e.SAMPLER2D_ARRAY=29]="SAMPLER2D_ARRAY",e[e.SAMPLER3D=30]="SAMPLER3D",e[e.SAMPLER_CUBE=31]="SAMPLER_CUBE",e[e.SAMPLER=32]="SAMPLER",e[e.TEXTURE1D=33]="TEXTURE1D",e[e.TEXTURE1D_ARRAY=34]="TEXTURE1D_ARRAY",e[e.TEXTURE2D=35]="TEXTURE2D",e[e.TEXTURE2D_ARRAY=36]="TEXTURE2D_ARRAY",e[e.TEXTURE3D=37]="TEXTURE3D",e[e.TEXTURE_CUBE=38]="TEXTURE_CUBE",e[e.IMAGE1D=39]="IMAGE1D",e[e.IMAGE1D_ARRAY=40]="IMAGE1D_ARRAY",e[e.IMAGE2D=41]="IMAGE2D",e[e.IMAGE2D_ARRAY=42]="IMAGE2D_ARRAY",e[e.IMAGE3D=43]="IMAGE3D",e[e.IMAGE_CUBE=44]="IMAGE_CUBE",e[e.SUBPASS_INPUT=45]="SUBPASS_INPUT",e[e.COUNT=46]="COUNT"}(jo||(jo=e("k",{}))),function(e){e[e.NONE=0]="NONE",e[e.TRANSFER_SRC=1]="TRANSFER_SRC",e[e.TRANSFER_DST=2]="TRANSFER_DST",e[e.INDEX=4]="INDEX",e[e.VERTEX=8]="VERTEX",e[e.UNIFORM=16]="UNIFORM",e[e.STORAGE=32]="STORAGE",e[e.INDIRECT=64]="INDIRECT"}(Go||(Go=e("B",{}))),function(e){e[e.NONE=0]="NONE"}(Vo||(Vo=e("c",{}))),function(e){e[e.NONE=0]="NONE",e[e.READ_ONLY=1]="READ_ONLY",e[e.WRITE_ONLY=2]="WRITE_ONLY",e[e.READ_WRITE=3]="READ_WRITE"}(Ho||(Ho=e("l",{}))),function(e){e[e.NONE=0]="NONE",e[e.DEVICE=1]="DEVICE",e[e.HOST=2]="HOST"}(Wo||(Wo=e("M",{}))),function(e){e[e.TEX1D=0]="TEX1D",e[e.TEX2D=1]="TEX2D",e[e.TEX3D=2]="TEX3D",e[e.CUBE=3]="CUBE",e[e.TEX1D_ARRAY=4]="TEX1D_ARRAY",e[e.TEX2D_ARRAY=5]="TEX2D_ARRAY"}(qo||(qo=e("n",{}))),function(e){e[e.NONE=0]="NONE",e[e.TRANSFER_SRC=1]="TRANSFER_SRC",e[e.TRANSFER_DST=2]="TRANSFER_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.COLOR_ATTACHMENT=16]="COLOR_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=32]="DEPTH_STENCIL_ATTACHMENT",e[e.INPUT_ATTACHMENT=64]="INPUT_ATTACHMENT"}(Yo||(Yo=e("o",{}))),function(e){e[e.NONE=0]="NONE",e[e.GEN_MIPMAP=1]="GEN_MIPMAP",e[e.IMMUTABLE=2]="IMMUTABLE",e[e.GENERAL_LAYOUT=4]="GENERAL_LAYOUT"}(Xo||(Xo=e("p",{}))),function(e){e[e.X1=1]="X1",e[e.X2=2]="X2",e[e.X4=4]="X4",e[e.X8=8]="X8",e[e.X16=16]="X16",e[e.X32=32]="X32",e[e.X64=64]="X64"}(Qo||(Qo=e("q",{}))),function(e){e[e.NONE=0]="NONE",e[e.POINT=1]="POINT",e[e.LINEAR=2]="LINEAR",e[e.ANISOTROPIC=3]="ANISOTROPIC"}(Ko||(Ko=e("F",{}))),function(e){e[e.WRAP=0]="WRAP",e[e.MIRROR=1]="MIRROR",e[e.CLAMP=2]="CLAMP",e[e.BORDER=3]="BORDER"}(Zo||(Zo=e("A",{}))),function(e){e[e.NEVER=0]="NEVER",e[e.LESS=1]="LESS",e[e.EQUAL=2]="EQUAL",e[e.LESS_EQUAL=3]="LESS_EQUAL",e[e.GREATER=4]="GREATER",e[e.NOT_EQUAL=5]="NOT_EQUAL",e[e.GREATER_EQUAL=6]="GREATER_EQUAL",e[e.ALWAYS=7]="ALWAYS"}(Jo||(Jo=e("d",{}))),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=1]="KEEP",e[e.REPLACE=2]="REPLACE",e[e.INCR=3]="INCR",e[e.DECR=4]="DECR",e[e.INVERT=5]="INVERT",e[e.INCR_WRAP=6]="INCR_WRAP",e[e.DECR_WRAP=7]="DECR_WRAP"}($o||($o=e("r",{}))),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_ALPHA=2]="SRC_ALPHA",e[e.DST_ALPHA=3]="DST_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=4]="ONE_MINUS_SRC_ALPHA",e[e.ONE_MINUS_DST_ALPHA=5]="ONE_MINUS_DST_ALPHA",e[e.SRC_COLOR=6]="SRC_COLOR",e[e.DST_COLOR=7]="DST_COLOR",e[e.ONE_MINUS_SRC_COLOR=8]="ONE_MINUS_SRC_COLOR",e[e.ONE_MINUS_DST_COLOR=9]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=10]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=11]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=12]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=13]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=14]="ONE_MINUS_CONSTANT_ALPHA"}(ea||(ea=e("s",{}))),function(e){e[e.ADD=0]="ADD",e[e.SUB=1]="SUB",e[e.REV_SUB=2]="REV_SUB",e[e.MIN=3]="MIN",e[e.MAX=4]="MAX"}(ta||(ta=e("t",{}))),function(e){e[e.NONE=0]="NONE",e[e.R=1]="R",e[e.G=2]="G",e[e.B=4]="B",e[e.A=8]="A",e[e.ALL=15]="ALL"}(na||(na=e("u",{}))),function(e){e[e.NONE=0]="NONE",e[e.VERTEX=1]="VERTEX",e[e.CONTROL=2]="CONTROL",e[e.EVALUATION=4]="EVALUATION",e[e.GEOMETRY=8]="GEOMETRY",e[e.FRAGMENT=16]="FRAGMENT",e[e.COMPUTE=32]="COMPUTE",e[e.ALL=63]="ALL"}(ia||(ia=e("v",{}))),function(e){e[e.LOAD=0]="LOAD",e[e.CLEAR=1]="CLEAR",e[e.DISCARD=2]="DISCARD"}(oa||(oa=e("L",{}))),function(e){e[e.STORE=0]="STORE",e[e.DISCARD=1]="DISCARD"}(aa||(aa=e("w",{}))),function(e){e[e.NONE=0]="NONE",e[e.INDIRECT_BUFFER=1]="INDIRECT_BUFFER",e[e.INDEX_BUFFER=2]="INDEX_BUFFER",e[e.VERTEX_BUFFER=3]="VERTEX_BUFFER",e[e.VERTEX_SHADER_READ_UNIFORM_BUFFER=4]="VERTEX_SHADER_READ_UNIFORM_BUFFER",e[e.VERTEX_SHADER_READ_TEXTURE=5]="VERTEX_SHADER_READ_TEXTURE",e[e.VERTEX_SHADER_READ_OTHER=6]="VERTEX_SHADER_READ_OTHER",e[e.FRAGMENT_SHADER_READ_UNIFORM_BUFFER=7]="FRAGMENT_SHADER_READ_UNIFORM_BUFFER",e[e.FRAGMENT_SHADER_READ_TEXTURE=8]="FRAGMENT_SHADER_READ_TEXTURE",e[e.FRAGMENT_SHADER_READ_COLOR_INPUT_ATTACHMENT=9]="FRAGMENT_SHADER_READ_COLOR_INPUT_ATTACHMENT",e[e.FRAGMENT_SHADER_READ_DEPTH_STENCIL_INPUT_ATTACHMENT=10]="FRAGMENT_SHADER_READ_DEPTH_STENCIL_INPUT_ATTACHMENT",e[e.FRAGMENT_SHADER_READ_OTHER=11]="FRAGMENT_SHADER_READ_OTHER",e[e.COLOR_ATTACHMENT_READ=12]="COLOR_ATTACHMENT_READ",e[e.DEPTH_STENCIL_ATTACHMENT_READ=13]="DEPTH_STENCIL_ATTACHMENT_READ",e[e.COMPUTE_SHADER_READ_UNIFORM_BUFFER=14]="COMPUTE_SHADER_READ_UNIFORM_BUFFER",e[e.COMPUTE_SHADER_READ_TEXTURE=15]="COMPUTE_SHADER_READ_TEXTURE",e[e.COMPUTE_SHADER_READ_OTHER=16]="COMPUTE_SHADER_READ_OTHER",e[e.TRANSFER_READ=17]="TRANSFER_READ",e[e.HOST_READ=18]="HOST_READ",e[e.PRESENT=19]="PRESENT",e[e.VERTEX_SHADER_WRITE=20]="VERTEX_SHADER_WRITE",e[e.FRAGMENT_SHADER_WRITE=21]="FRAGMENT_SHADER_WRITE",e[e.COLOR_ATTACHMENT_WRITE=22]="COLOR_ATTACHMENT_WRITE",e[e.DEPTH_STENCIL_ATTACHMENT_WRITE=23]="DEPTH_STENCIL_ATTACHMENT_WRITE",e[e.COMPUTE_SHADER_WRITE=24]="COMPUTE_SHADER_WRITE",e[e.TRANSFER_WRITE=25]="TRANSFER_WRITE",e[e.HOST_PREINITIALIZED=26]="HOST_PREINITIALIZED",e[e.HOST_WRITE=27]="HOST_WRITE"}(ra||(ra=e("x",{}))),function(e){e[e.NONE=0]="NONE",e[e.SAMPLE_ZERO=1]="SAMPLE_ZERO",e[e.AVERAGE=2]="AVERAGE",e[e.MIN=3]="MIN",e[e.MAX=4]="MAX"}(sa||(sa=e("R",{}))),function(e){e[e.GRAPHICS=0]="GRAPHICS",e[e.COMPUTE=1]="COMPUTE",e[e.RAY_TRACING=2]="RAY_TRACING"}(ca||(ca=e("y",{}))),function(e){e[e.POINT_LIST=0]="POINT_LIST",e[e.LINE_LIST=1]="LINE_LIST",e[e.LINE_STRIP=2]="LINE_STRIP",e[e.LINE_LOOP=3]="LINE_LOOP",e[e.LINE_LIST_ADJACENCY=4]="LINE_LIST_ADJACENCY",e[e.LINE_STRIP_ADJACENCY=5]="LINE_STRIP_ADJACENCY",e[e.ISO_LINE_LIST=6]="ISO_LINE_LIST",e[e.TRIANGLE_LIST=7]="TRIANGLE_LIST",e[e.TRIANGLE_STRIP=8]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=9]="TRIANGLE_FAN",e[e.TRIANGLE_LIST_ADJACENCY=10]="TRIANGLE_LIST_ADJACENCY",e[e.TRIANGLE_STRIP_ADJACENCY=11]="TRIANGLE_STRIP_ADJACENCY",e[e.TRIANGLE_PATCH_ADJACENCY=12]="TRIANGLE_PATCH_ADJACENCY",e[e.QUAD_PATCH_LIST=13]="QUAD_PATCH_LIST"}(la||(la=e("z",{}))),function(e){e[e.FILL=0]="FILL",e[e.POINT=1]="POINT",e[e.LINE=2]="LINE"}(_a||(_a=e("E",{}))),function(e){e[e.GOURAND=0]="GOURAND",e[e.FLAT=1]="FLAT"}(ua||(ua=e("H",{}))),function(e){e[e.NONE=0]="NONE",e[e.FRONT=1]="FRONT",e[e.BACK=2]="BACK"}(fa||(fa=e("I",{}))),function(e){e[e.NONE=0]="NONE",e[e.VIEWPORT=1]="VIEWPORT",e[e.SCISSOR=2]="SCISSOR",e[e.LINE_WIDTH=4]="LINE_WIDTH",e[e.DEPTH_BIAS=8]="DEPTH_BIAS",e[e.BLEND_CONSTANTS=16]="BLEND_CONSTANTS",e[e.DEPTH_BOUNDS=32]="DEPTH_BOUNDS",e[e.STENCIL_WRITE_MASK=64]="STENCIL_WRITE_MASK",e[e.STENCIL_COMPARE_MASK=128]="STENCIL_COMPARE_MASK"}(ha||(ha=e("J",{}))),function(e){e[e.FRONT=1]="FRONT",e[e.BACK=2]="BACK",e[e.ALL=3]="ALL"}(pa||(pa=e("K",{}))),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.UNIFORM_BUFFER=1]="UNIFORM_BUFFER",e[e.DYNAMIC_UNIFORM_BUFFER=2]="DYNAMIC_UNIFORM_BUFFER",e[e.STORAGE_BUFFER=4]="STORAGE_BUFFER",e[e.DYNAMIC_STORAGE_BUFFER=8]="DYNAMIC_STORAGE_BUFFER",e[e.SAMPLER_TEXTURE=16]="SAMPLER_TEXTURE",e[e.SAMPLER=32]="SAMPLER",e[e.TEXTURE=64]="TEXTURE",e[e.STORAGE_IMAGE=128]="STORAGE_IMAGE",e[e.INPUT_ATTACHMENT=256]="INPUT_ATTACHMENT"}(ma||(ma=e("N",{}))),function(e){e[e.GRAPHICS=0]="GRAPHICS",e[e.COMPUTE=1]="COMPUTE",e[e.TRANSFER=2]="TRANSFER"}(da||(da=e("Q",{}))),function(e){e[e.PRIMARY=0]="PRIMARY",e[e.SECONDARY=1]="SECONDARY"}(va||(va=e("C",{}))),function(e){e[e.NONE=0]="NONE",e[e.COLOR=1]="COLOR",e[e.DEPTH=2]="DEPTH",e[e.STENCIL=4]="STENCIL",e[e.DEPTH_STENCIL=6]="DEPTH_STENCIL",e[e.ALL=7]="ALL"}(ga||(ga=e("U",{})));class Aa{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}}e("V",Aa);class xa{constructor(e=0,t=0,n=0,i=0,o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0,f=0,h=0,p=0,m=1,d=0,v=0,g=new Aa,y=new Aa,A=-1,x=1,b=1){this.maxVertexAttributes=e,this.maxVertexUniformVectors=t,this.maxFragmentUniformVectors=n,this.maxTextureUnits=i,this.maxImageUnits=o,this.maxVertexTextureUnits=a,this.maxColorRenderTargets=r,this.maxShaderStorageBufferBindings=s,this.maxShaderStorageBlockSize=c,this.maxUniformBufferBindings=l,this.maxUniformBlockSize=_,this.maxTextureSize=u,this.maxCubeMapTextureSize=f,this.depthBits=h,this.stencilBits=p,this.uboOffsetAlignment=m,this.maxComputeSharedMemorySize=d,this.maxComputeWorkGroupInvocations=v,this.maxComputeWorkGroupSize=g,this.maxComputeWorkGroupCount=y,this.clipSpaceMinZ=A,this.screenSpaceSignY=x,this.clipSpaceSignY=b}copy(e){return this.maxVertexAttributes=e.maxVertexAttributes,this.maxVertexUniformVectors=e.maxVertexUniformVectors,this.maxFragmentUniformVectors=e.maxFragmentUniformVectors,this.maxTextureUnits=e.maxTextureUnits,this.maxImageUnits=e.maxImageUnits,this.maxVertexTextureUnits=e.maxVertexTextureUnits,this.maxColorRenderTargets=e.maxColorRenderTargets,this.maxShaderStorageBufferBindings=e.maxShaderStorageBufferBindings,this.maxShaderStorageBlockSize=e.maxShaderStorageBlockSize,this.maxUniformBufferBindings=e.maxUniformBufferBindings,this.maxUniformBlockSize=e.maxUniformBlockSize,this.maxTextureSize=e.maxTextureSize,this.maxCubeMapTextureSize=e.maxCubeMapTextureSize,this.depthBits=e.depthBits,this.stencilBits=e.stencilBits,this.uboOffsetAlignment=e.uboOffsetAlignment,this.maxComputeSharedMemorySize=e.maxComputeSharedMemorySize,this.maxComputeWorkGroupInvocations=e.maxComputeWorkGroupInvocations,this.maxComputeWorkGroupSize.copy(e.maxComputeWorkGroupSize),this.maxComputeWorkGroupCount.copy(e.maxComputeWorkGroupCount),this.clipSpaceMinZ=e.clipSpaceMinZ,this.screenSpaceSignY=e.screenSpaceSignY,this.clipSpaceSignY=e.clipSpaceSignY,this}}e("W",xa);class ba{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}}e("X",ba);class Ca{constructor(e=0,t=0,n=0,i=0){this.x=e,this.y=t,this.width=n,this.height=i}copy(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}}e("Y",Ca);class Sa{constructor(e=0,t=0,n=1){this.width=e,this.height=t,this.depth=n}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this}}e("Z",Sa);class Ea{constructor(e=0,t=0,n=1){this.mipLevel=e,this.baseArrayLayer=t,this.layerCount=n}copy(e){return this.mipLevel=e.mipLevel,this.baseArrayLayer=e.baseArrayLayer,this.layerCount=e.layerCount,this}}e("_",Ea);class wa{constructor(e=0,t=1,n=0,i=1){this.baseMipLevel=e,this.levelCount=t,this.baseArrayLayer=n,this.layerCount=i}copy(e){return this.baseMipLevel=e.baseMipLevel,this.levelCount=e.levelCount,this.baseArrayLayer=e.baseArrayLayer,this.layerCount=e.layerCount,this}}e("$",wa);class Ta{constructor(e=new Ea,t=new ba,n=new Ea,i=new ba,o=new Sa){this.srcSubres=e,this.srcOffset=t,this.dstSubres=n,this.dstOffset=i,this.extent=o}copy(e){return this.srcSubres.copy(e.srcSubres),this.srcOffset.copy(e.srcOffset),this.dstSubres.copy(e.dstSubres),this.dstOffset.copy(e.dstOffset),this.extent.copy(e.extent),this}}e("a0",Ta);class Pa{constructor(e=new Ea,t=new ba,n=new Sa,i=new Ea,o=new ba,a=new Sa){this.srcSubres=e,this.srcOffset=t,this.srcExtent=n,this.dstSubres=i,this.dstOffset=o,this.dstExtent=a}copy(e){return this.srcSubres.copy(e.srcSubres),this.srcOffset.copy(e.srcOffset),this.srcExtent.copy(e.srcExtent),this.dstSubres.copy(e.dstSubres),this.dstOffset.copy(e.dstOffset),this.dstExtent.copy(e.dstExtent),this}}e("a1",Pa);class Ia{constructor(e=0,t=0,n=new ba,i=new Sa,o=new Ea){this.buffStride=e,this.buffTexHeight=t,this.texOffset=n,this.texExtent=i,this.texSubres=o}copy(e){return this.buffStride=e.buffStride,this.buffTexHeight=e.buffTexHeight,this.texOffset.copy(e.texOffset),this.texExtent.copy(e.texExtent),this.texSubres.copy(e.texSubres),this}}e("a2",Ia);class Ra{constructor(e=0,t=0,n=0,i=0,o=0,a=1){this.left=e,this.top=t,this.width=n,this.height=i,this.minDepth=o,this.maxDepth=a}copy(e){return this.left=e.left,this.top=e.top,this.width=e.width,this.height=e.height,this.minDepth=e.minDepth,this.maxDepth=e.maxDepth,this}}e("a3",Ra);class Na{constructor(e=0,t=0,n=0,i=0){this.x=e,this.y=t,this.z=n,this.w=i}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}}e("e",Na);class Da{constructor(e=[],t=[],n=0){this.bufferOffsets=e,this.samplerOffsets=t,this.flexibleSet=n}copy(e){return this.bufferOffsets=e.bufferOffsets.slice(),this.samplerOffsets=e.samplerOffsets.slice(),this.flexibleSet=e.flexibleSet,this}}e("a4",Da);class Ma{constructor(e=Go.NONE,t=Wo.NONE,n=0,i=0,o=Vo.NONE){this.usage=e,this.memUsage=t,this.size=n,this.stride=i,this.flags=o}copy(e){return this.usage=e.usage,this.memUsage=e.memUsage,this.size=e.size,this.stride=e.stride,this.flags=e.flags,this}}e("a5",Ma);class Oa{constructor(e=null,t=0,n=0){this.buffer=e,this.offset=t,this.range=n}copy(e){return this.buffer=e.buffer,this.offset=e.offset,this.range=e.range,this}}e("a6",Oa);class za{constructor(e=0,t=0,n=0,i=0,o=0,a=0,r=0){this.vertexCount=e,this.firstVertex=t,this.indexCount=n,this.firstIndex=i,this.vertexOffset=o,this.instanceCount=a,this.firstInstance=r}copy(e){return this.vertexCount=e.vertexCount,this.firstVertex=e.firstVertex,this.indexCount=e.indexCount,this.firstIndex=e.firstIndex,this.vertexOffset=e.vertexOffset,this.instanceCount=e.instanceCount,this.firstInstance=e.firstInstance,this}}e("a7",za);class La{constructor(e=0,t=0,n=0,i=null,o=0){this.groupCountX=e,this.groupCountY=t,this.groupCountZ=n,this.indirectBuffer=i,this.indirectOffset=o}copy(e){return this.groupCountX=e.groupCountX,this.groupCountY=e.groupCountY,this.groupCountZ=e.groupCountZ,this.indirectBuffer=e.indirectBuffer,this.indirectOffset=e.indirectOffset,this}}e("a8",La);class Fa{constructor(e=[]){this.drawInfos=e}copy(e){return Mo(this.drawInfos,e.drawInfos,za),this}}e("a9",Fa);class Ua{constructor(e=qo.TEX2D,t=Yo.NONE,n=Bo.UNKNOWN,i=0,o=0,a=Xo.NONE,r=1,s=1,c=Qo.X1,l=1){this.type=e,this.usage=t,this.format=n,this.width=i,this.height=o,this.flags=a,this.layerCount=r,this.levelCount=s,this.samples=c,this.depth=l}copy(e){return this.type=e.type,this.usage=e.usage,this.format=e.format,this.width=e.width,this.height=e.height,this.flags=e.flags,this.layerCount=e.layerCount,this.levelCount=e.levelCount,this.samples=e.samples,this.depth=e.depth,this}}e("aa",Ua);class Ba{constructor(e=null,t=qo.TEX2D,n=Bo.UNKNOWN,i=0,o=1,a=0,r=1){this.texture=e,this.type=t,this.format=n,this.baseLevel=i,this.levelCount=o,this.baseLayer=a,this.layerCount=r}copy(e){return this.texture=e.texture,this.type=e.type,this.format=e.format,this.baseLevel=e.baseLevel,this.levelCount=e.levelCount,this.baseLayer=e.baseLayer,this.layerCount=e.layerCount,this}}e("ab",Ba);class ka{constructor(e=Ko.LINEAR,t=Ko.LINEAR,n=Ko.NONE,i=Zo.WRAP,o=Zo.WRAP,a=Zo.WRAP,r=0,s=Jo.ALWAYS,c=new Na,l=0){this.minFilter=e,this.magFilter=t,this.mipFilter=n,this.addressU=i,this.addressV=o,this.addressW=a,this.maxAnisotropy=r,this.cmpFunc=s,this.borderColor=c,this.mipLODBias=l}copy(e){return this.minFilter=e.minFilter,this.magFilter=e.magFilter,this.mipFilter=e.mipFilter,this.addressU=e.addressU,this.addressV=e.addressV,this.addressW=e.addressW,this.maxAnisotropy=e.maxAnisotropy,this.cmpFunc=e.cmpFunc,this.borderColor.copy(e.borderColor),this.mipLODBias=e.mipLODBias,this}}e("ac",ka);class ja{constructor(e="",t=jo.UNKNOWN,n=0){this.name=e,this.type=t,this.count=n}copy(e){return this.name=e.name,this.type=e.type,this.count=e.count,this}}e("ad",ja);class Ga{constructor(e=0,t=0,n="",i=[],o=0){this.set=e,this.binding=t,this.name=n,this.members=i,this.count=o}copy(e){return this.set=e.set,this.binding=e.binding,this.name=e.name,Mo(this.members,e.members,ja),this.count=e.count,this}}e("ae",Ga);class Va{constructor(e=0,t=0,n="",i=jo.UNKNOWN,o=0){this.set=e,this.binding=t,this.name=n,this.type=i,this.count=o}copy(e){return this.set=e.set,this.binding=e.binding,this.name=e.name,this.type=e.type,this.count=e.count,this}}e("af",Va);class Ha{constructor(e=0,t=0,n="",i=0){this.set=e,this.binding=t,this.name=n,this.count=i}copy(e){return this.set=e.set,this.binding=e.binding,this.name=e.name,this.count=e.count,this}}e("ag",Ha);class Wa{constructor(e=0,t=0,n="",i=jo.UNKNOWN,o=0){this.set=e,this.binding=t,this.name=n,this.type=i,this.count=o}copy(e){return this.set=e.set,this.binding=e.binding,this.name=e.name,this.type=e.type,this.count=e.count,this}}e("ah",Wa);class qa{constructor(e=0,t=0,n="",i=jo.UNKNOWN,o=0,a=Ho.READ_WRITE){this.set=e,this.binding=t,this.name=n,this.type=i,this.count=o,this.memoryAccess=a}copy(e){return this.set=e.set,this.binding=e.binding,this.name=e.name,this.type=e.type,this.count=e.count,this.memoryAccess=e.memoryAccess,this}}e("ai",qa);class Ya{constructor(e=0,t=0,n="",i=0,o=Ho.READ_WRITE){this.set=e,this.binding=t,this.name=n,this.count=i,this.memoryAccess=o}copy(e){return this.set=e.set,this.binding=e.binding,this.name=e.name,this.count=e.count,this.memoryAccess=e.memoryAccess,this}}e("aj",Ya);class Xa{constructor(e=0,t=0,n="",i=0){this.set=e,this.binding=t,this.name=n,this.count=i}copy(e){return this.set=e.set,this.binding=e.binding,this.name=e.name,this.count=e.count,this}}e("ak",Xa);class Qa{constructor(e=ia.NONE,t=""){this.stage=e,this.source=t}copy(e){return this.stage=e.stage,this.source=e.source,this}}e("al",Qa);class Ka{constructor(e="",t=Bo.UNKNOWN,n=!1,i=0,o=!1,a=0){this.name=e,this.format=t,this.isNormalized=n,this.stream=i,this.isInstanced=o,this.location=a}copy(e){return this.name=e.name,this.format=e.format,this.isNormalized=e.isNormalized,this.stream=e.stream,this.isInstanced=e.isInstanced,this.location=e.location,this}}e("am",Ka);class Za{constructor(e="",t=[],n=[],i=[],o=[],a=[],r=[],s=[],c=[],l=[]){this.name=e,this.stages=t,this.attributes=n,this.blocks=i,this.buffers=o,this.samplerTextures=a,this.samplers=r,this.textures=s,this.images=c,this.subpassInputs=l}copy(e){return this.name=e.name,Mo(this.stages,e.stages,Qa),Mo(this.attributes,e.attributes,Ka),Mo(this.blocks,e.blocks,Ga),Mo(this.buffers,e.buffers,Ya),Mo(this.samplerTextures,e.samplerTextures,Va),Mo(this.samplers,e.samplers,Ha),Mo(this.textures,e.textures,Wa),Mo(this.images,e.images,qa),Mo(this.subpassInputs,e.subpassInputs,Xa),this}}e("an",Za);class Ja{constructor(e=[],t=[],n=null,i=null){this.attributes=e,this.vertexBuffers=t,this.indexBuffer=n,this.indirectBuffer=i}copy(e){return Mo(this.attributes,e.attributes,Ka),this.vertexBuffers=e.vertexBuffers.slice(),this.indexBuffer=e.indexBuffer,this.indirectBuffer=e.indirectBuffer,this}}e("ao",Ja);class $a{constructor(e=Bo.UNKNOWN,t=Qo.X1,n=oa.CLEAR,i=aa.STORE,o=[],a=[ra.PRESENT],r=!1){this.format=e,this.sampleCount=t,this.loadOp=n,this.storeOp=i,this.beginAccesses=o,this.endAccesses=a,this.isGeneralLayout=r}copy(e){return this.format=e.format,this.sampleCount=e.sampleCount,this.loadOp=e.loadOp,this.storeOp=e.storeOp,this.beginAccesses=e.beginAccesses.slice(),this.endAccesses=e.endAccesses.slice(),this.isGeneralLayout=e.isGeneralLayout,this}}e("ap",$a);class er{constructor(e=Bo.UNKNOWN,t=Qo.X1,n=oa.CLEAR,i=aa.STORE,o=oa.CLEAR,a=aa.STORE,r=[],s=[ra.DEPTH_STENCIL_ATTACHMENT_WRITE],c=!1){this.format=e,this.sampleCount=t,this.depthLoadOp=n,this.depthStoreOp=i,this.stencilLoadOp=o,this.stencilStoreOp=a,this.beginAccesses=r,this.endAccesses=s,this.isGeneralLayout=c}copy(e){return this.format=e.format,this.sampleCount=e.sampleCount,this.depthLoadOp=e.depthLoadOp,this.depthStoreOp=e.depthStoreOp,this.stencilLoadOp=e.stencilLoadOp,this.stencilStoreOp=e.stencilStoreOp,this.beginAccesses=e.beginAccesses.slice(),this.endAccesses=e.endAccesses.slice(),this.isGeneralLayout=e.isGeneralLayout,this}}e("aq",er);class tr{constructor(e=[],t=[],n=[],i=[],o=-1,a=-1,r=sa.NONE,s=sa.NONE){this.inputs=e,this.colors=t,this.resolves=n,this.preserves=i,this.depthStencil=o,this.depthStencilResolve=a,this.depthResolveMode=r,this.stencilResolveMode=s}copy(e){return this.inputs=e.inputs.slice(),this.colors=e.colors.slice(),this.resolves=e.resolves.slice(),this.preserves=e.preserves.slice(),this.depthStencil=e.depthStencil,this.depthStencilResolve=e.depthStencilResolve,this.depthResolveMode=e.depthResolveMode,this.stencilResolveMode=e.stencilResolveMode,this}}e("ar",tr);class ir{constructor(e=0,t=0,n=[],i=[]){this.srcSubpass=e,this.dstSubpass=t,this.srcAccesses=n,this.dstAccesses=i}copy(e){return this.srcSubpass=e.srcSubpass,this.dstSubpass=e.dstSubpass,this.srcAccesses=e.srcAccesses.slice(),this.dstAccesses=e.dstAccesses.slice(),this}}e("as",ir);class or{constructor(e=[],t=new er,n=[],i=[]){this.colorAttachments=e,this.depthStencilAttachment=t,this.subpasses=n,this.dependencies=i}copy(e){return Mo(this.colorAttachments,e.colorAttachments,$a),this.depthStencilAttachment.copy(e.depthStencilAttachment),Mo(this.subpasses,e.subpasses,tr),Mo(this.dependencies,e.dependencies,ir),this}}e("at",or);class ar{constructor(e=[],t=[]){this.prevAccesses=e,this.nextAccesses=t}copy(e){return this.prevAccesses=e.prevAccesses.slice(),this.nextAccesses=e.nextAccesses.slice(),this}}e("G",ar);class rr{constructor(e=[],t=[],n=!1,i=null,o=null){this.prevAccesses=e,this.nextAccesses=t,this.discardContents=n,this.srcQueue=i,this.dstQueue=o}copy(e){return this.prevAccesses=e.prevAccesses.slice(),this.nextAccesses=e.nextAccesses.slice(),this.discardContents=e.discardContents,this.srcQueue=e.srcQueue,this.dstQueue=e.dstQueue,this}}e("T",rr);class sr{constructor(e=null,t=[],n=null){this.renderPass=e,this.colorTextures=t,this.depthStencilTexture=n}copy(e){return this.renderPass=e.renderPass,this.colorTextures=e.colorTextures.slice(),this.depthStencilTexture=e.depthStencilTexture,this}}e("au",sr);class cr{constructor(e=-1,t=ma.UNKNOWN,n=0,i=ia.NONE,o=[]){this.binding=e,this.descriptorType=t,this.count=n,this.stageFlags=i,this.immutableSamplers=o}copy(e){return this.binding=e.binding,this.descriptorType=e.descriptorType,this.count=e.count,this.stageFlags=e.stageFlags,this.immutableSamplers=e.immutableSamplers.slice(),this}}e("av",cr);class lr{constructor(e=[]){this.bindings=e}copy(e){return Mo(this.bindings,e.bindings,cr),this}}e("aw",lr);class _r{constructor(e=null){this.layout=e}copy(e){return this.layout=e.layout,this}}e("ax",_r);class ur{constructor(e=[]){this.setLayouts=e}copy(e){return this.setLayouts=e.setLayouts.slice(),this}}e("ay",ur);class fr{constructor(e=[]){this.attributes=e}copy(e){return Mo(this.attributes,e.attributes,Ka),this}}e("az",fr);class hr{constructor(e=null,t=va.PRIMARY){this.queue=e,this.type=t}copy(e){return this.queue=e.queue,this.type=e.type,this}}e("aA",hr);class pr{constructor(e=da.GRAPHICS){this.type=e}copy(e){return this.type=e.type,this}}e("aB",pr);class mr{constructor(e="",t=0,n=0,i=ko.NONE,o=!1,a=!1,r=!1,s=!1){this.name=e,this.size=t,this.count=n,this.type=i,this.hasAlpha=o,this.hasDepth=a,this.hasStencil=r,this.isCompressed=s}}e("aC",mr);class dr{constructor(e=0,t=0){this.bufferSize=e,this.textureSize=t}copy(e){return this.bufferSize=e.bufferSize,this.textureSize=e.textureSize,this}}e("aD",dr);class vr{constructor(e=0,t=0,n=0){this.writeMask=e,this.compareMask=t,this.reference=n}copy(e){return this.writeMask=e.writeMask,this.compareMask=e.compareMask,this.reference=e.reference,this}}e("aE",vr);class gr{constructor(e=new Ra,t=new Ca,n=new Na,i=1,o=0,a=0,r=0,s=0,c=0,l=new vr,_=new vr){this.viewport=e,this.scissor=t,this.blendConstant=n,this.lineWidth=i,this.depthBiasConstant=o,this.depthBiasClamp=a,this.depthBiasSlope=r,this.depthMinBounds=s,this.depthMaxBounds=c,this.stencilStatesFront=l,this.stencilStatesBack=_}copy(e){return this.viewport.copy(e.viewport),this.scissor.copy(e.scissor),this.blendConstant.copy(e.blendConstant),this.lineWidth=e.lineWidth,this.depthBiasConstant=e.depthBiasConstant,this.depthBiasClamp=e.depthBiasClamp,this.depthBiasSlope=e.depthBiasSlope,this.depthMinBounds=e.depthMinBounds,this.depthMaxBounds=e.depthMaxBounds,this.stencilStatesFront.copy(e.stencilStatesFront),this.stencilStatesBack.copy(e.stencilStatesBack),this}}e("aF",gr);class yr{get gfxType(){return this._gfxType}constructor(e){this._gfxType=Oo.UNKNOWN,this._gfxType=e}}e("O",yr);class Ar{constructor(e,t=!0,n=!0,i=1,o=1,a=1,r=new Da){this.canvasElm=e,this.isAntialias=t,this.isPremultipliedAlpha=n,this.devicePixelRatio=i,this.width=o,this.height=a,this.bindingMappingInfo=r}}e("aG",Ar),function(e){e.ATTR_POSITION="a_position",e.ATTR_NORMAL="a_normal",e.ATTR_TANGENT="a_tangent",e.ATTR_BITANGENT="a_bitangent",e.ATTR_WEIGHTS="a_weights",e.ATTR_JOINTS="a_joints",e.ATTR_COLOR="a_color",e.ATTR_COLOR1="a_color1",e.ATTR_COLOR2="a_color2",e.ATTR_TEX_COORD="a_texCoord",e.ATTR_TEX_COORD1="a_texCoord1",e.ATTR_TEX_COORD2="a_texCoord2",e.ATTR_TEX_COORD3="a_texCoord3",e.ATTR_TEX_COORD4="a_texCoord4",e.ATTR_TEX_COORD5="a_texCoord5",e.ATTR_TEX_COORD6="a_texCoord6",e.ATTR_TEX_COORD7="a_texCoord7",e.ATTR_TEX_COORD8="a_texCoord8",e.ATTR_BATCH_ID="a_batch_id",e.ATTR_BATCH_UV="a_batch_uv"}(ya||(ya=e("aH",{})));const xr=e("aI",Object.freeze([new mr("UNKNOWN",0,0,ko.NONE,!1,!1,!1,!1),new mr("A8",1,1,ko.UNORM,!0,!1,!1,!1),new mr("L8",1,1,ko.UNORM,!1,!1,!1,!1),new mr("LA8",1,2,ko.UNORM,!0,!1,!1,!1),new mr("R8",1,1,ko.UNORM,!1,!1,!1,!1),new mr("R8SN",1,1,ko.SNORM,!1,!1,!1,!1),new mr("R8UI",1,1,ko.UINT,!1,!1,!1,!1),new mr("R8I",1,1,ko.INT,!1,!1,!1,!1),new mr("R16F",2,1,ko.FLOAT,!1,!1,!1,!1),new mr("R16UI",2,1,ko.UINT,!1,!1,!1,!1),new mr("R16I",2,1,ko.INT,!1,!1,!1,!1),new mr("R32F",4,1,ko.FLOAT,!1,!1,!1,!1),new mr("R32UI",4,1,ko.UINT,!1,!1,!1,!1),new mr("R32I",4,1,ko.INT,!1,!1,!1,!1),new mr("RG8",2,2,ko.UNORM,!1,!1,!1,!1),new mr("RG8SN",2,2,ko.SNORM,!1,!1,!1,!1),new mr("RG8UI",2,2,ko.UINT,!1,!1,!1,!1),new mr("RG8I",2,2,ko.INT,!1,!1,!1,!1),new mr("RG16F",4,2,ko.FLOAT,!1,!1,!1,!1),new mr("RG16UI",4,2,ko.UINT,!1,!1,!1,!1),new mr("RG16I",4,2,ko.INT,!1,!1,!1,!1),new mr("RG32F",8,2,ko.FLOAT,!1,!1,!1,!1),new mr("RG32UI",8,2,ko.UINT,!1,!1,!1,!1),new mr("RG32I",8,2,ko.INT,!1,!1,!1,!1),new mr("RGB8",3,3,ko.UNORM,!1,!1,!1,!1),new mr("SRGB8",3,3,ko.UNORM,!1,!1,!1,!1),new mr("RGB8SN",3,3,ko.SNORM,!1,!1,!1,!1),new mr("RGB8UI",3,3,ko.UINT,!1,!1,!1,!1),new mr("RGB8I",3,3,ko.INT,!1,!1,!1,!1),new mr("RGB16F",6,3,ko.FLOAT,!1,!1,!1,!1),new mr("RGB16UI",6,3,ko.UINT,!1,!1,!1,!1),new mr("RGB16I",6,3,ko.INT,!1,!1,!1,!1),new mr("RGB32F",12,3,ko.FLOAT,!1,!1,!1,!1),new mr("RGB32UI",12,3,ko.UINT,!1,!1,!1,!1),new mr("RGB32I",12,3,ko.INT,!1,!1,!1,!1),new mr("RGBA8",4,4,ko.UNORM,!0,!1,!1,!1),new mr("BGRA8",4,4,ko.UNORM,!0,!1,!1,!1),new mr("SRGB8_A8",4,4,ko.UNORM,!0,!1,!1,!1),new mr("RGBA8SN",4,4,ko.SNORM,!0,!1,!1,!1),new mr("RGBA8UI",4,4,ko.UINT,!0,!1,!1,!1),new mr("RGBA8I",4,4,ko.INT,!0,!1,!1,!1),new mr("RGBA16F",8,4,ko.FLOAT,!0,!1,!1,!1),new mr("RGBA16UI",8,4,ko.UINT,!0,!1,!1,!1),new mr("RGBA16I",8,4,ko.INT,!0,!1,!1,!1),new mr("RGBA32F",16,4,ko.FLOAT,!0,!1,!1,!1),new mr("RGBA32UI",16,4,ko.UINT,!0,!1,!1,!1),new mr("RGBA32I",16,4,ko.INT,!0,!1,!1,!1),new mr("R5G6B5",2,3,ko.UNORM,!1,!1,!1,!1),new mr("R11G11B10F",4,3,ko.FLOAT,!1,!1,!1,!1),new mr("RGB5A1",2,4,ko.UNORM,!0,!1,!1,!1),new mr("RGBA4",2,4,ko.UNORM,!0,!1,!1,!1),new mr("RGB10A2",2,4,ko.UNORM,!0,!1,!1,!1),new mr("RGB10A2UI",2,4,ko.UINT,!0,!1,!1,!1),new mr("RGB9E5",2,4,ko.FLOAT,!0,!1,!1,!1),new mr("D16",2,1,ko.UINT,!1,!0,!1,!1),new mr("D16S8",3,2,ko.UINT,!1,!0,!0,!1),new mr("D24",3,1,ko.UINT,!1,!0,!1,!1),new mr("D24S8",4,2,ko.UINT,!1,!0,!0,!1),new mr("D32F",4,1,ko.FLOAT,!1,!0,!1,!1),new mr("D32FS8",5,2,ko.FLOAT,!1,!0,!0,!1),new mr("BC1",1,3,ko.UNORM,!1,!1,!1,!0),new mr("BC1_ALPHA",1,4,ko.UNORM,!0,!1,!1,!0),new mr("BC1_SRGB",1,3,ko.UNORM,!1,!1,!1,!0),new mr("BC1_SRGB_ALPHA",1,4,ko.UNORM,!0,!1,!1,!0),new mr("BC2",1,4,ko.UNORM,!0,!1,!1,!0),new mr("BC2_SRGB",1,4,ko.UNORM,!0,!1,!1,!0),new mr("BC3",1,4,ko.UNORM,!0,!1,!1,!0),new mr("BC3_SRGB",1,4,ko.UNORM,!0,!1,!1,!0),new mr("BC4",1,1,ko.UNORM,!1,!1,!1,!0),new mr("BC4_SNORM",1,1,ko.SNORM,!1,!1,!1,!0),new mr("BC5",1,2,ko.UNORM,!1,!1,!1,!0),new mr("BC5_SNORM",1,2,ko.SNORM,!1,!1,!1,!0),new mr("BC6H_UF16",1,3,ko.UFLOAT,!1,!1,!1,!0),new mr("BC6H_SF16",1,3,ko.FLOAT,!1,!1,!1,!0),new mr("BC7",1,4,ko.UNORM,!0,!1,!1,!0),new mr("BC7_SRGB",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ETC_RGB8",1,3,ko.UNORM,!1,!1,!1,!0),new mr("ETC2_RGB8",1,3,ko.UNORM,!1,!1,!1,!0),new mr("ETC2_SRGB8",1,3,ko.UNORM,!1,!1,!1,!0),new mr("ETC2_RGB8_A1",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ETC2_SRGB8_A1",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ETC2_RGBA8",2,4,ko.UNORM,!0,!1,!1,!0),new mr("ETC2_SRGB8_A8",2,4,ko.UNORM,!0,!1,!1,!0),new mr("EAC_R11",1,1,ko.UNORM,!1,!1,!1,!0),new mr("EAC_R11SN",1,1,ko.SNORM,!1,!1,!1,!0),new mr("EAC_RG11",2,2,ko.UNORM,!1,!1,!1,!0),new mr("EAC_RG11SN",2,2,ko.SNORM,!1,!1,!1,!0),new mr("PVRTC_RGB2",2,3,ko.UNORM,!1,!1,!1,!0),new mr("PVRTC_RGBA2",2,4,ko.UNORM,!0,!1,!1,!0),new mr("PVRTC_RGB4",2,3,ko.UNORM,!1,!1,!1,!0),new mr("PVRTC_RGBA4",2,4,ko.UNORM,!0,!1,!1,!0),new mr("PVRTC2_2BPP",2,4,ko.UNORM,!0,!1,!1,!0),new mr("PVRTC2_4BPP",2,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_4x4",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_5x4",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_5x5",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_6x5",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_6x6",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_8x5",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_8x6",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_8x8",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_10x5",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_10x6",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_10x8",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_10x10",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_12x10",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_RGBA_12x12",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_4x4",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_5x4",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_5x5",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_6x5",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_6x6",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_8x5",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_8x6",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_8x8",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_10x5",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_10x6",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_10x8",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_10x10",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_12x10",1,4,ko.UNORM,!0,!1,!1,!0),new mr("ASTC_SRGBA_12x12",1,4,ko.UNORM,!0,!1,!1,!0)])),br=e("D",ma.UNIFORM_BUFFER|ma.DYNAMIC_UNIFORM_BUFFER|ma.STORAGE_BUFFER|ma.DYNAMIC_STORAGE_BUFFER),Cr=e("b",ma.SAMPLER_TEXTURE|ma.SAMPLER|ma.TEXTURE|ma.STORAGE_IMAGE|ma.INPUT_ATTACHMENT),Sr=e("aJ",ma.DYNAMIC_STORAGE_BUFFER|ma.DYNAMIC_UNIFORM_BUFFER),Er=e("aK",28);function wr(e){return e>0&&0==(e&e-1)}function Tr(e,t,n,i){if(!xr[e].isCompressed)return t*n*i*xr[e].size;switch(e){case Bo.BC1:case Bo.BC1_ALPHA:case Bo.BC1_SRGB:case Bo.BC1_SRGB_ALPHA:return Math.ceil(t/4)*Math.ceil(n/4)*8*i;case Bo.BC2:case Bo.BC2_SRGB:case Bo.BC3:case Bo.BC3_SRGB:case Bo.BC4:case Bo.BC4_SNORM:case Bo.BC6H_SF16:case Bo.BC6H_UF16:case Bo.BC7:case Bo.BC7_SRGB:return Math.ceil(t/4)*Math.ceil(n/4)*16*i;case Bo.BC5:case Bo.BC5_SNORM:return Math.ceil(t/4)*Math.ceil(n/4)*32*i;case Bo.ETC_RGB8:case Bo.ETC2_RGB8:case Bo.ETC2_SRGB8:case Bo.ETC2_RGB8_A1:case Bo.EAC_R11:case Bo.EAC_R11SN:return Math.ceil(t/4)*Math.ceil(n/4)*8*i;case Bo.ETC2_RGBA8:case Bo.ETC2_SRGB8_A1:case Bo.EAC_RG11:case Bo.EAC_RG11SN:return Math.ceil(t/4)*Math.ceil(n/4)*16*i;case Bo.PVRTC_RGB2:case Bo.PVRTC_RGBA2:case Bo.PVRTC2_2BPP:return Math.ceil(Math.max(t,16)*Math.max(n,8)/4)*i;case Bo.PVRTC_RGB4:case Bo.PVRTC_RGBA4:case Bo.PVRTC2_4BPP:return Math.ceil(Math.max(t,8)*Math.max(n,8)/2)*i;case Bo.ASTC_RGBA_4X4:case Bo.ASTC_SRGBA_4X4:return Math.ceil(t/4)*Math.ceil(n/4)*16*i;case Bo.ASTC_RGBA_5X4:case Bo.ASTC_SRGBA_5X4:return Math.ceil(t/5)*Math.ceil(n/4)*16*i;case Bo.ASTC_RGBA_5X5:case Bo.ASTC_SRGBA_5X5:return Math.ceil(t/5)*Math.ceil(n/5)*16*i;case Bo.ASTC_RGBA_6X5:case Bo.ASTC_SRGBA_6X5:return Math.ceil(t/6)*Math.ceil(n/5)*16*i;case Bo.ASTC_RGBA_6X6:case Bo.ASTC_SRGBA_6X6:return Math.ceil(t/6)*Math.ceil(n/6)*16*i;case Bo.ASTC_RGBA_8X5:case Bo.ASTC_SRGBA_8X5:return Math.ceil(t/8)*Math.ceil(n/5)*16*i;case Bo.ASTC_RGBA_8X6:case Bo.ASTC_SRGBA_8X6:return Math.ceil(t/8)*Math.ceil(n/6)*16*i;case Bo.ASTC_RGBA_8X8:case Bo.ASTC_SRGBA_8X8:return Math.ceil(t/8)*Math.ceil(n/8)*16*i;case Bo.ASTC_RGBA_10X5:case Bo.ASTC_SRGBA_10X5:return Math.ceil(t/10)*Math.ceil(n/5)*16*i;case Bo.ASTC_RGBA_10X6:case Bo.ASTC_SRGBA_10X6:return Math.ceil(t/10)*Math.ceil(n/6)*16*i;case Bo.ASTC_RGBA_10X8:case Bo.ASTC_SRGBA_10X8:return Math.ceil(t/10)*Math.ceil(n/8)*16*i;case Bo.ASTC_RGBA_10X10:case Bo.ASTC_SRGBA_10X10:return Math.ceil(t/10)*Math.ceil(n/10)*16*i;case Bo.ASTC_RGBA_12X10:case Bo.ASTC_SRGBA_12X10:return Math.ceil(t/12)*Math.ceil(n/10)*16*i;case Bo.ASTC_RGBA_12X12:case Bo.ASTC_SRGBA_12X12:return Math.ceil(t/12)*Math.ceil(n/12)*16*i;default:return 0}}function Pr(e,t,n,i,o){let a=0;for(let r=0;r<o;++r)a+=Tr(e,t,n,i),t=Math.max(t>>1,1),n=Math.max(n>>1,1);return a}const Ir=[0,4,8,12,16,4,8,12,16,4,8,12,16,4,8,12,16,16,24,32,24,36,48,32,48,64,4,4,4,4,4,4];function Rr(e){return Ir[e]||0}function Nr(e){const t=e.size/e.count;switch(e.type){case ko.UNORM:case ko.UINT:switch(t){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array}break;case ko.SNORM:case ko.INT:switch(t){case 1:return Int8Array;case 2:return Int16Array;case 4:return Int32Array}break;case ko.FLOAT:return Float32Array}return Float32Array}var Dr=Object.freeze({__proto__:null,get ObjectType(){return Oo},get Status(){return zo},get API(){return Lo},get SurfaceTransform(){return Fo},get Feature(){return Uo},get Format(){return Bo},get FormatType(){return ko},get Type(){return jo},get BufferUsageBit(){return Go},get BufferFlagBit(){return Vo},get MemoryAccessBit(){return Ho},get MemoryUsageBit(){return Wo},get TextureType(){return qo},get TextureUsageBit(){return Yo},get TextureFlagBit(){return Xo},get SampleCount(){return Qo},get Filter(){return Ko},get Address(){return Zo},get ComparisonFunc(){return Jo},get StencilOp(){return $o},get BlendFactor(){return ea},get BlendOp(){return ta},get ColorMask(){return na},get ShaderStageFlagBit(){return ia},get LoadOp(){return oa},get StoreOp(){return aa},get AccessType(){return ra},get ResolveMode(){return sa},get PipelineBindPoint(){return ca},get PrimitiveMode(){return la},get PolygonMode(){return _a},get ShadeModel(){return ua},get CullMode(){return fa},get DynamicStateFlagBit(){return ha},get StencilFace(){return pa},get DescriptorType(){return ma},get QueueType(){return da},get CommandBufferType(){return va},get ClearFlagBit(){return ga},Size:Aa,DeviceCaps:xa,Offset:ba,Rect:Ca,Extent:Sa,TextureSubresLayers:Ea,TextureSubresRange:wa,TextureCopy:Ta,TextureBlit:Pa,BufferTextureCopy:Ia,Viewport:Ra,Color:Na,BindingMappingInfo:Da,BufferInfo:Ma,BufferViewInfo:Oa,DrawInfo:za,DispatchInfo:La,IndirectBuffer:Fa,TextureInfo:Ua,TextureViewInfo:Ba,SamplerInfo:ka,Uniform:ja,UniformBlock:Ga,UniformSamplerTexture:Va,UniformSampler:Ha,UniformTexture:Wa,UniformStorageImage:qa,UniformStorageBuffer:Ya,UniformInputAttachment:Xa,ShaderStage:Qa,Attribute:Ka,ShaderInfo:Za,InputAssemblerInfo:Ja,ColorAttachment:$a,DepthStencilAttachment:er,SubpassInfo:tr,SubpassDependency:ir,RenderPassInfo:or,GlobalBarrierInfo:ar,TextureBarrierInfo:rr,FramebufferInfo:sr,DescriptorSetLayoutBinding:cr,DescriptorSetLayoutInfo:lr,DescriptorSetInfo:_r,PipelineLayoutInfo:ur,InputState:fr,CommandBufferInfo:hr,QueueInfo:pr,FormatInfo:mr,MemoryStatus:dr,DynamicStencilStates:vr,DynamicStates:gr,Obj:yr,DeviceInfo:Ar,get AttributeName(){return ya},FormatInfos:xr,DESCRIPTOR_BUFFER_TYPE:br,DESCRIPTOR_SAMPLER_TYPE:Cr,DESCRIPTOR_DYNAMIC_TYPE:Sr,DRAW_INFO_SIZE:Er,IsPowerOf2:wr,FormatSize:Tr,FormatSurfaceSize:Pr,GetTypeSize:Rr,getTypedArrayConstructor:Nr});class Mr{constructor(e=!1,t=_a.FILL,n=ua.GOURAND,i=fa.BACK,o=!0,a=!1,r=0,s=0,c=0,l=!0,_=!1,u=1){this._nativeObj=void 0,this._isDiscard=!1,this._polygonMode=_a.FILL,this._shadeModel=ua.GOURAND,this._cullMode=fa.BACK,this._isFrontFaceCCW=!0,this._depthBiasEnabled=!1,this._depthBias=0,this._depthBiasClamp=0,this._depthBiasSlop=0,this._isDepthClip=!0,this._isMultisample=!1,this._lineWidth=1,this._nativeObj=new gfx.RasterizerState,this.assignProperties(e,t,n,i,o,a,r,s,c,l,_,u)}get native(){return this._nativeObj}get isDiscard(){return this._isDiscard}set isDiscard(e){this._isDiscard=e,this._nativeObj.isDiscard=e}get polygonMode(){return this._polygonMode}set polygonMode(e){this._polygonMode=e,this._nativeObj.polygonMode=e}get shadeModel(){return this._shadeModel}set shadeModel(e){this._shadeModel=e,this._nativeObj.shadeModel=e}get cullMode(){return this._cullMode}set cullMode(e){this._cullMode=e,this._nativeObj.cullMode=e}get isFrontFaceCCW(){return this._isFrontFaceCCW}set isFrontFaceCCW(e){this._isFrontFaceCCW=e,this._nativeObj.isFrontFaceCCW=e}get depthBiasEnabled(){return this._depthBiasEnabled}set depthBiasEnabled(e){this._depthBiasEnabled=e,this._nativeObj.depthBiasEnabled=e}get depthBias(){return this._depthBias}set depthBias(e){this._depthBias=e,this._nativeObj.depthBias=e}get depthBiasClamp(){return this._depthBiasClamp}set depthBiasClamp(e){this._depthBiasClamp=e,this._nativeObj.depthBiasClamp=e}get depthBiasSlop(){return this._depthBiasSlop}set depthBiasSlop(e){this._depthBiasSlop=e,this._nativeObj.depthBiasSlop=e}get isDepthClip(){return this._isDepthClip}set isDepthClip(e){this._isDepthClip=e,this._nativeObj.isDepthClip=e}get isMultisample(){return this._isMultisample}set isMultisample(e){this._isMultisample=e,this._nativeObj.isMultisample=e}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this._nativeObj.lineWidth=e}reset(){this.assignProperties(!1,_a.FILL,ua.GOURAND,fa.BACK,!0,!1,0,0,0,!0,!1,1)}assign(e){e&&this.assignProperties(e.isDiscard,e.polygonMode,e.shadeModel,e.cullMode,e.isFrontFaceCCW,e.depthBiasEnabled,e.depthBias,e.depthBiasClamp,e.depthBiasSlop,e.isDepthClip,e.isMultisample,e.lineWidth)}destroy(){this._nativeObj=null}assignProperties(e,t,n,i,o,a,r,s,c,l,_,u){void 0!==e&&(this.isDiscard=e),void 0!==t&&(this.polygonMode=t),void 0!==n&&(this.shadeModel=n),void 0!==i&&(this.cullMode=i),void 0!==o&&(this.isFrontFaceCCW=o),void 0!==a&&(this.depthBiasEnabled=a),void 0!==r&&(this.depthBias=r),void 0!==s&&(this.depthBiasClamp=s),void 0!==c&&(this.depthBiasSlop=c),void 0!==l&&(this.isDepthClip=l),void 0!==_&&(this.isMultisample=_),void 0!==u&&(this.lineWidth=u)}}class Or{constructor(e=!0,t=!0,n=Jo.LESS,i=!1,o=Jo.ALWAYS,a=65535,r=65535,s=$o.KEEP,c=$o.KEEP,l=$o.KEEP,_=1,u=!1,f=Jo.ALWAYS,h=65535,p=65535,m=$o.KEEP,d=$o.KEEP,v=$o.KEEP,g=1){this._nativeObj=void 0,this._depthTest=!0,this._depthWrite=!0,this._depthFunc=Jo.LESS,this._stencilTestFront=!1,this._stencilFuncFront=Jo.ALWAYS,this._stencilReadMaskFront=65535,this._stencilWriteMaskFront=65535,this._stencilFailOpFront=$o.KEEP,this._stencilZFailOpFront=$o.KEEP,this._stencilPassOpFront=$o.KEEP,this._stencilRefFront=1,this._stencilTestBack=!1,this._stencilFuncBack=Jo.ALWAYS,this._stencilReadMaskBack=65535,this._stencilWriteMaskBack=65535,this._stencilFailOpBack=$o.KEEP,this._stencilZFailOpBack=$o.KEEP,this._stencilPassOpBack=$o.KEEP,this._stencilRefBack=1,this._nativeObj=new gfx.DepthStencilState,this.assignProperties(e,t,n,i,o,a,r,s,c,l,_,u,f,h,p,m,d,v,g)}get native(){return this._nativeObj}get depthTest(){return this._depthTest}set depthTest(e){this._depthTest=e,this._nativeObj.depthTest=e}get depthWrite(){return this._depthWrite}set depthWrite(e){this._depthWrite=e,this._nativeObj.depthWrite=e}get depthFunc(){return this._depthFunc}set depthFunc(e){this._depthFunc=e,this._nativeObj.depthFunc=e}get stencilTestFront(){return this._stencilTestFront}set stencilTestFront(e){this._stencilTestFront=e,this._nativeObj.stencilTestFront=e}get stencilFuncFront(){return this._stencilFuncFront}set stencilFuncFront(e){this._stencilFuncFront=e,this._nativeObj.stencilFuncFront=e}get stencilReadMaskFront(){return this._stencilReadMaskFront}set stencilReadMaskFront(e){this._stencilReadMaskFront=e,this._nativeObj.stencilReadMaskFront=e}get stencilWriteMaskFront(){return this._stencilWriteMaskFront}set stencilWriteMaskFront(e){this._stencilWriteMaskFront=e,this._nativeObj.stencilWriteMaskFront=e}get stencilFailOpFront(){return this._stencilFailOpFront}set stencilFailOpFront(e){this._stencilFailOpFront=e,this._nativeObj.stencilFailOpFront=e}get stencilZFailOpFront(){return this._stencilZFailOpFront}set stencilZFailOpFront(e){this._stencilZFailOpFront=e,this._nativeObj.stencilZFailOpFront=e}get stencilPassOpFront(){return this._stencilPassOpFront}set stencilPassOpFront(e){this._stencilPassOpFront=e,this._nativeObj.stencilPassOpFront=e}get stencilRefFront(){return this._stencilRefFront}set stencilRefFront(e){this._stencilRefFront=e,this._nativeObj.stencilRefFront=e}get stencilTestBack(){return this._stencilTestBack}set stencilTestBack(e){this._stencilTestBack=e,this._nativeObj.stencilTestBack=e}get stencilFuncBack(){return this._stencilFuncBack}set stencilFuncBack(e){this._stencilFuncBack=e,this._nativeObj.stencilFuncBack=e}get stencilReadMaskBack(){return this._stencilReadMaskBack}set stencilReadMaskBack(e){this._stencilReadMaskBack=e,this._nativeObj.stencilReadMaskBack=e}get stencilWriteMaskBack(){return this._stencilWriteMaskBack}set stencilWriteMaskBack(e){this._stencilWriteMaskBack=e,this._nativeObj.stencilWriteMaskBack=e}get stencilFailOpBack(){return this._stencilFailOpBack}set stencilFailOpBack(e){this._stencilFailOpBack=e,this._nativeObj.stencilFailOpBack=e}get stencilZFailOpBack(){return this._stencilZFailOpBack}set stencilZFailOpBack(e){this._stencilZFailOpBack=e,this._nativeObj.stencilZFailOpBack=e}get stencilPassOpBack(){return this._stencilPassOpBack}set stencilPassOpBack(e){this._stencilPassOpBack=e,this._nativeObj.stencilPassOpBack=e}get stencilRefBack(){return this._stencilRefBack}set stencilRefBack(e){this._stencilRefBack=e,this._nativeObj.stencilRefBack=e}reset(){this.assignProperties(!0,!0,Jo.LESS,!1,Jo.ALWAYS,65535,65535,$o.KEEP,$o.KEEP,$o.KEEP,1,!1,Jo.ALWAYS,65535,65535,$o.KEEP,$o.KEEP,$o.KEEP,1)}assign(e){e&&this.assignProperties(e.depthTest,e.depthWrite,e.depthFunc,e.stencilTestFront,e.stencilFuncFront,e.stencilReadMaskFront,e.stencilWriteMaskFront,e.stencilFailOpFront,e.stencilZFailOpFront,e.stencilPassOpFront,e.stencilRefFront,e.stencilTestBack,e.stencilFuncBack,e.stencilReadMaskBack,e.stencilWriteMaskBack,e.stencilFailOpBack,e.stencilZFailOpBack,e.stencilPassOpBack,e.stencilRefBack)}destroy(){this._nativeObj=null}assignProperties(e,t,n,i,o,a,r,s,c,l,_,u,f,h,p,m,d,v,g){void 0!==e&&(this.depthTest=e),void 0!==t&&(this.depthWrite=t),void 0!==n&&(this.depthFunc=n),void 0!==i&&(this.stencilTestFront=i),void 0!==o&&(this.stencilFuncFront=o),void 0!==a&&(this.stencilReadMaskFront=a),void 0!==r&&(this.stencilWriteMaskFront=r),void 0!==s&&(this.stencilFailOpFront=s),void 0!==c&&(this.stencilZFailOpFront=c),void 0!==l&&(this.stencilPassOpFront=l),void 0!==_&&(this.stencilRefFront=_),void 0!==u&&(this.stencilTestBack=u),void 0!==f&&(this.stencilFuncBack=f),void 0!==h&&(this.stencilReadMaskBack=h),void 0!==p&&(this.stencilWriteMaskBack=p),void 0!==m&&(this.stencilFailOpBack=m),void 0!==d&&(this.stencilZFailOpBack=d),void 0!==v&&(this.stencilPassOpBack=v),void 0!==g&&(this.stencilRefBack=g)}}class zr{get native(){return this._nativeObj}constructor(e=!1,t=ea.ONE,n=ea.ZERO,i=ta.ADD,o=ea.ONE,a=ea.ZERO,r=ta.ADD,s=na.ALL){this._nativeObj=void 0,this._blend=!1,this._blendSrc=ea.ONE,this._blendDst=ea.ZERO,this._blendEq=ta.ADD,this._blendSrcAlpha=ea.ONE,this._blendDstAlpha=ea.ZERO,this._blendAlphaEq=ta.ADD,this._blendColorMask=na.ALL,this._nativeObj=new gfx.BlendTarget,this.assignProperties(e,t,n,i,o,a,r,s)}get blend(){return this._blend}set blend(e){this._blend=e,this._nativeObj.blend=e}get blendSrc(){return this._blendSrc}set blendSrc(e){this._blendSrc=e,this._nativeObj.blendSrc=e}get blendDst(){return this._blendDst}set blendDst(e){this._blendDst=e,this._nativeObj.blendDst=e}get blendEq(){return this._blendEq}set blendEq(e){this._blendEq=e,this._nativeObj.blendEq=e}get blendSrcAlpha(){return this._blendSrcAlpha}set blendSrcAlpha(e){this._blendSrcAlpha=e,this._nativeObj.blendSrcAlpha=e}get blendDstAlpha(){return this._blendDstAlpha}set blendDstAlpha(e){this._blendDstAlpha=e,this._nativeObj.blendDstAlpha=e}get blendAlphaEq(){return this._blendAlphaEq}set blendAlphaEq(e){this._blendAlphaEq=e,this._nativeObj.blendAlphaEq=e}get blendColorMask(){return this._blendColorMask}set blendColorMask(e){this._blendColorMask=e,this._nativeObj.blendColorMask=e}reset(){this.assignProperties(!1,ea.ONE,ea.ZERO,ta.ADD,ea.ONE,ea.ZERO,ta.ADD,na.ALL)}destroy(){this._nativeObj=null}assign(e){e&&this.assignProperties(e.blend,e.blendSrc,e.blendDst,e.blendEq,e.blendSrcAlpha,e.blendDstAlpha,e.blendAlphaEq,e.blendColorMask)}assignProperties(e,t,n,i,o,a,r,s){void 0!==e&&(this.blend=e),void 0!==t&&(this.blendSrc=t),void 0!==n&&(this.blendDst=n),void 0!==i&&(this.blendEq=i),void 0!==o&&(this.blendSrcAlpha=o),void 0!==a&&(this.blendDstAlpha=a),void 0!==r&&(this.blendAlphaEq=r),void 0!==s&&(this.blendColorMask=s)}}class Lr{_setTargets(e){this.targets=e;const t="$__nativeObj";this._syncTargetsToNativeObj(t),function(e,t,n,i,o){for(let a=0,r=t.length;a<r;a++){let r=t[a],s=r[n].$__nativeObj||r[n];r[n]=new Proxy(s,{get:(e,t)=>t===i?e:Reflect.get(e,t),set:(t,n,i)=>(Reflect.set(t,n,i),o(e),!0)})}}(this,this.targets,"_nativeObj",t,(e=>{e._syncTargetsToNativeObj(t)}))}_syncTargetsToNativeObj(e){const t=this.targets.map((t=>t.native[e]||t.native));this._nativeObj.targets=t}get native(){return this._nativeObj}constructor(e=!1,t=!1,n=new Na,i=[new zr]){this.targets=void 0,this._blendColor=void 0,this._nativeObj=void 0,this._isA2C=!1,this._isIndepend=!1,this._nativeObj=new gfx.BlendState,this._setTargets(i),this.blendColor=n,this.isA2c=e,this.isIndepend=t}get isA2c(){return this._isA2C}set isA2c(e){this._isA2C=e,this._nativeObj.isA2C=e}get isIndepend(){return this._isIndepend}set isIndepend(e){this._isIndepend=e,this._nativeObj.isIndepend=e}get blendColor(){return this._blendColor}set blendColor(e){this._blendColor=e,this._nativeObj.blendColor=e}setTarget(e,t){let n=this.targets[e];n||(n=this.targets[e]=new zr),n.assign(t),this._setTargets(this.targets)}reset(){this.isA2c=!1,this.isIndepend=!1,this.blendColor=new Na(0,0,0,0);const e=this.targets;for(let t=1,n=e.length;t<n;++t)e[t].destroy();e.length=1,e[0].reset(),this._setTargets(e)}destroy(){for(let e=0,t=this.targets.length;e<t;++e)this.targets[e].destroy();this.targets=null,this._nativeObj=null}}const Fr=gfx.PipelineState,Ur=gfx.PipelineStateInfo;Ge(Bo),e("aQ",class{constructor(){this._canvas=null,this._canvas2D=null,this._gfxAPI=Lo.UNKNOWN,this._transform=Fo.IDENTITY,this._deviceName="",this._renderer="",this._vendor="",this._version="",this._features=new Array(Uo.COUNT),this._queue=null,this._cmdBuff=null,this._devicePixelRatio=1,this._width=0,this._height=0,this._colorFmt=Bo.UNKNOWN,this._depthStencilFmt=Bo.UNKNOWN,this._numDrawCalls=0,this._numInstances=0,this._numTris=0,this._memoryStatus=new dr,this._caps=new xa}get canvas(){return this._canvas}get canvas2D(){return this._canvas2D}get gfxAPI(){return this._gfxAPI}get queue(){return this._queue}get commandBuffer(){return this._cmdBuff}get devicePixelRatio(){return this._devicePixelRatio}get width(){return this._width}get height(){return this._height}get renderer(){return this._renderer}get vendor(){return this._vendor}get colorFormat(){return this._colorFmt}get depthStencilFormat(){return this._depthStencilFmt}get numDrawCalls(){return this._numDrawCalls}get numInstances(){return this._numInstances}get numTris(){return this._numTris}get memoryStatus(){return this._memoryStatus}get capabilities(){return this._caps}get surfaceTransform(){return this._transform}hasFeature(e){return this._features[e]}});const Br=String.prototype.charCodeAt;function kr(e){return this[e]}function jr(e,t){let n=e.length,i=t^n,o=0;const a="string"==typeof e?Br:kr;for(;n>=4;){let t=255&a.call(e,o)|(255&a.call(e,++o))<<8|(255&a.call(e,++o))<<16|(255&a.call(e,++o))<<24;t=1540483477*(65535&t)+((1540483477*(t>>>16)&65535)<<16),t^=t>>>24,t=1540483477*(65535&t)+((1540483477*(t>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^t,n-=4,++o}switch(n){case 3:i^=(255&a.call(e,o+2))<<16;case 2:i^=(255&a.call(e,o+1))<<8;case 1:i^=255&a.call(e,o),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)}return i^=i>>>13,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>15,i>>>0}class Gr extends yr{get id(){return this._id}get name(){return this._name}get attributes(){return this._attributes}get blocks(){return this._blocks}get samplers(){return this._samplers}constructor(e){super(Oo.SHADER),this._device=void 0,this._id=void 0,this._name="",this._stages=[],this._attributes=[],this._blocks=[],this._samplers=[],this._device=e,this._id=Gr._shaderIdGen++}}e("aR",Gr),Gr._shaderIdGen=0;class Vr extends yr{get type(){return this._type}get usage(){return this._usage}get format(){return this._format}get width(){return this._width}get height(){return this._height}get depth(){return this._depth}get layerCount(){return this._layerCount}get levelCount(){return this._levelCount}get samples(){return this._samples}get flags(){return this._flags}get size(){return this._size}constructor(e){super(Oo.TEXTURE),this._device=void 0,this._type=qo.TEX2D,this._usage=Yo.NONE,this._format=Bo.UNKNOWN,this._width=0,this._height=0,this._depth=1,this._layerCount=1,this._levelCount=1,this._samples=Qo.X1,this._flags=Xo.NONE,this._isPowerOf2=!1,this._size=0,this._device=e}}e("aS",Vr);const Hr={Obj:"GFXObject",DRAW_INFO_SIZE:"GFX_DRAW_INFO_SIZE",DESCRIPTOR_BUFFER_TYPE:"",DESCRIPTOR_SAMPLER_TYPE:"",DESCRIPTOR_DYNAMIC_TYPE:"",getTypedArrayConstructor:""};for(const e in c.gfx){if("__esModule"===e)continue;let t=Hr[e];""===t?t=e:void 0===t&&(t=`GFX${e}`),an(c,"cc",[{name:t,newName:e,target:c.gfx,targetName:"cc.gfx"}])}const Wr=Object.assign({},Dr);Wr.Device=gfx.Device,Wr.Buffer=gfx.Buffer,Wr.Texture=gfx.Texture,Wr.Sampler=gfx.Sampler,Wr.Shader=gfx.Shader,Wr.InputAssembler=gfx.InputAssembler,Wr.RenderPass=gfx.RenderPass,Wr.Framebuffer=gfx.Framebuffer,Wr.DescriptorSet=gfx.DescriptorSet,Wr.DescriptorSetLayout=gfx.DescriptorSetLayout,Wr.PipelineLayout=gfx.PipelineLayout,Wr.PipelineState=gfx.PipelineState,Wr.CommandBuffer=gfx.CommandBuffer,Wr.Queue=gfx.Queue,c.gfx=Wr,e("aT",zr);const qr=e("aU",Lr),Yr=e("aV",Mr),Xr=e("aW",Or);let Qr;e("aX",Fr),e("aY",Ur),Wr.BlendTarget=zr,Wr.BlendState=Lr,Wr.RasterizerState=Mr,Wr.DepthStencilState=Or,Wr.PipelineStateInfo=Ur,function(e){e[e.ALL=0]="ALL",e[e.CLOSEST=1]="CLOSEST",e[e.ANY=2]="ANY"}(Qr||(Qr={}));const Kr=function(){const e=new Gn(0,0,0);return function(t,n){const i=Gn.dot(t.d,n.n);if(Math.abs(i)<Number.EPSILON)return 0;Gn.multiplyScalar(e,n.n,n.d);const o=Gn.dot(Gn.subtract(e,e,t.o),n.n)/i;return o<0?0:o}}(),Zr=function(){const e=new Gn(0,0,0),t=new Gn(0,0,0),n=new Gn(0,0,0),i=new Gn(0,0,0),o=new Gn(0,0,0);return function(a,r,s){Gn.subtract(e,r.b,r.a),Gn.subtract(t,r.c,r.a),Gn.cross(n,a.d,t);const c=Gn.dot(e,n);if(c<Number.EPSILON&&(!s||c>-Number.EPSILON))return 0;const l=1/c;Gn.subtract(i,a.o,r.a);const _=Gn.dot(i,n)*l;if(_<0||_>1)return 0;Gn.cross(o,i,e);const u=Gn.dot(a.d,o)*l;if(u<0||_+u>1)return 0;const f=Gn.dot(t,o)*l;return f<0?0:f}}(),Jr=function(){const e=new Gn(0,0,0);return function(t,n){const i=n.radius,o=n.center,a=t.o,r=t.d,s=i*i;Gn.subtract(e,o,a);const c=e.lengthSqr(),l=Gn.dot(e,r),_=s-(c-l*l);if(_<0)return 0;const u=Math.sqrt(_),f=c<s?l+u:l-u;return f<0?0:f}}(),$r=function(){const e=new Gn,t=new Gn;return function(n,i){return Gn.subtract(e,i.center,i.halfExtents),Gn.add(t,i.center,i.halfExtents),es(n,e,t)}}();function es(e,t,n){const i=e.o,o=e.d,a=1/o.x,r=1/o.y,s=1/o.z,c=(t.x-i.x)*a,l=(n.x-i.x)*a,_=(t.y-i.y)*r,u=(n.y-i.y)*r,f=(t.z-i.z)*s,h=(n.z-i.z)*s,p=Math.max(Math.max(Math.min(c,l),Math.min(_,u)),Math.min(f,h)),m=Math.min(Math.min(Math.max(c,l),Math.max(_,u)),Math.max(f,h));return m<0||p>m?0:p>0?p:m}const ts=function(){let e=new Gn,t=new Gn,n=new Gn;const i=new Gn,o=new Gn,a=new Gn,r=new Gn,s=new Array(3),c=new Array(3),l=new Array(3),_=new Array(6);return function(u,f){s[0]=f.halfExtents.x,s[1]=f.halfExtents.y,s[2]=f.halfExtents.z,e=f.center,t=u.o,n=u.d,Gn.set(i,f.orientation.m00,f.orientation.m01,f.orientation.m02),Gn.set(o,f.orientation.m03,f.orientation.m04,f.orientation.m05),Gn.set(a,f.orientation.m06,f.orientation.m07,f.orientation.m08),Gn.subtract(r,e,t),c[0]=Gn.dot(i,n),c[1]=Gn.dot(o,n),c[2]=Gn.dot(a,n),l[0]=Gn.dot(i,r),l[1]=Gn.dot(o,r),l[2]=Gn.dot(a,r);for(let e=0;e<3;++e){if(0===c[e]){if(-l[e]-s[e]>0||-l[e]+s[e]<0)return 0;c[e]=1e-7}_[2*e+0]=(l[e]+s[e])/c[e],_[2*e+1]=(l[e]-s[e])/c[e]}const h=Math.max(Math.max(Math.min(_[0],_[1]),Math.min(_[2],_[3])),Math.min(_[4],_[5])),p=Math.min(Math.min(Math.max(_[0],_[1]),Math.max(_[2],_[3])),Math.max(_[4],_[5]));return p<0||h>p?0:h>0?h:p}}(),is=function(){const e=new Gn,t=new Gn,n=new Gn,i=new Gn,o=new Gn,a=new Gn,r=new Gn,s=new No;return function(c,l){const _=l.radius*l.radius,u=Gn.normalize(e,c.d),f=l.ellipseCenter0,h=l.ellipseCenter1,p=Gn.subtract(t,h,f);if(p.equals(Gn.ZERO))return s.radius=l.radius,s.center.set(l.ellipseCenter0),Os.raySphere(c,s);const m=c.o,d=Gn.subtract(n,m,f),v=Gn.cross(i,u,p),g=v.lengthSqr();if(0===g){s.radius=l.radius;const e=Gn.subtract(o,h,m);return d.lengthSqr()<e.lengthSqr()?s.center.set(l.ellipseCenter0):s.center.set(l.ellipseCenter1),Os.raySphere(c,s)}const y=Gn.cross(o,d,p),A=p.lengthSqr(),x=2*Gn.dot(v,y),b=x*x-4*g*(y.lengthSqr()-_*A);if(b<0)return 0;const C=(-x-Math.sqrt(b))/(2*g);if(C<0){s.radius=l.radius;const e=Gn.subtract(a,h,m);return d.lengthSqr()<e.lengthSqr()?s.center.set(l.ellipseCenter0):s.center.set(l.ellipseCenter1),Os.raySphere(c,s)}{const e=Gn.scaleAndAdd(a,c.o,u,C),t=Gn.subtract(r,e,f),n=Gn.dot(t,p)/A;return n>=0&&n<=1?C:n<0?(s.radius=l.radius,s.center.set(l.ellipseCenter0),Os.raySphere(c,s)):n>1?(s.radius=l.radius,s.center.set(l.ellipseCenter1),Os.raySphere(c,s)):0}}}(),os=function(){const e=Do.create(),t={distance:1/0,doubleSided:!1,mode:Qr.ANY};let n=0;const i=(e,t,i,o,a,r)=>{e===Qr.CLOSEST?(n>t||0===n)&&(n=t,r&&(0===r.length?r.push({distance:t,vertexIndex0:i/3,vertexIndex1:o/3,vertexIndex2:a/3}):(r[0].distance=t,r[0].vertexIndex0=i/3,r[0].vertexIndex1=o/3,r[0].vertexIndex2=a/3))):(n=t,r&&r.push({distance:t,vertexIndex0:i/3,vertexIndex1:o/3,vertexIndex2:a/3}))};return function(o,a,r){if(n=0,0===a.geometricInfo.positions.length)return n;const s=void 0===r?t:r;if(es(o,a.geometricInfo.boundingBox.min,a.geometricInfo.boundingBox.max)){const t=a.primitiveMode,{positions:n,indices:r}=a.geometricInfo;((t,n,o,a,r)=>{if(o===la.TRIANGLE_LIST){const o=n.length;for(let s=0;s<o;s+=3){const o=3*n[s],c=3*n[s+1],l=3*n[s+2];Gn.set(e.a,t[o],t[o+1],t[o+2]),Gn.set(e.b,t[c],t[c+1],t[c+2]),Gn.set(e.c,t[l],t[l+1],t[l+2]);const _=Os.rayTriangle(a,e,r.doubleSided);if(!(0===_||_>r.distance)&&(i(r.mode,_,o,c,l,r.result),r.mode===Qr.ANY))return _}}else if(o===la.TRIANGLE_STRIP){const o=n.length-2;let s=0;for(let c=0;c<o;c+=1){const o=3*n[c-s],l=3*n[c+s+1],_=3*n[c+2];Gn.set(e.a,t[o],t[o+1],t[o+2]),Gn.set(e.b,t[l],t[l+1],t[l+2]),Gn.set(e.c,t[_],t[_+1],t[_+2]),s=~s;const u=Os.rayTriangle(a,e,r.doubleSided);if(!(0===u||u>r.distance)&&(i(r.mode,u,o,l,_,r.result),r.mode===Qr.ANY))return u}}else if(o===la.TRIANGLE_FAN){const o=n.length-1,s=3*n[0];Gn.set(e.a,t[s],t[s+1],t[s+2]);for(let c=1;c<o;c+=1){const o=3*n[c],l=3*n[c+1];Gn.set(e.b,t[o],t[o+1],t[o+2]),Gn.set(e.c,t[l],t[l+1],t[l+2]);const _=Os.rayTriangle(a,e,r.doubleSided);if(!(0===_||_>r.distance)&&(i(r.mode,_,s,o,l,r.result),r.mode===Qr.ANY))return _}}})(n,r,t,o,s)}return n}}(),as=function(){let e=0;const t={distance:1/0,doubleSided:!1,mode:Qr.ANY};return function(n,i,o){e=0;const a=void 0===o?t:o,r=i.renderingSubMeshes.length,s=i.struct.minPosition,c=i.struct.maxPosition;if(s&&c&&!es(n,s,c))return e;for(let t=0;t<r;t++){const o=i.renderingSubMeshes[t],r=os(n,o,a);if(r)if(a.mode===Qr.CLOSEST)(0===e||e>r)&&(e=r,a.subIndices&&(a.subIndices[0]=t));else if(e=r,a.subIndices&&a.subIndices.push(t),a.mode===Qr.ANY)return r}return e&&a.mode===Qr.CLOSEST&&(a.result&&(a.result[0].distance=e,a.result.length=1),a.subIndices&&(a.subIndices.length=1)),e}}(),rs=function(){let e=0;const t={distance:1/0,doubleSided:!1,mode:Qr.ANY},n=new Eo,i=new ii;return function(o,a,r){e=0;const s=void 0===r?t:r,c=a.worldBounds;if(c&&!$r(o,c))return e;Eo.copy(n,o),a.node&&(ii.invert(i,a.node.getWorldMatrix(i)),Gn.transformMat4(n.o,o.o,i),Gn.transformMat4Normal(n.d,o.d,i));const l=a.subModels;for(let t=0;t<l.length;t++){const i=l[t].subMesh,o=os(n,i,s);if(o)if(s.mode===Qr.CLOSEST)(0===e||e>o)&&(e=o,s.subIndices&&(s.subIndices[0]=t));else if(e=o,s.subIndices&&s.subIndices.push(t),s.mode===Qr.ANY)return o}return e&&s.mode===Qr.CLOSEST&&(s.result&&(s.result[0].distance=e,s.result.length=1),s.subIndices&&(s.subIndices.length=1)),e}}(),ss=function(){const e=new Gn(0,0,0);return function(t,n){Gn.subtract(e,t.e,t.s);const i=(n.d-Gn.dot(t.s,n.n))/Gn.dot(e,n.n);return i<0||i>1?0:i}}(),cs=function(){const e=new Gn(0,0,0),t=new Gn(0,0,0),n=new Gn(0,0,0),i=new Gn(0,0,0),o=new Gn(0,0,0),a=new Gn(0,0,0);return function(r,s,c){Gn.subtract(e,s.b,s.a),Gn.subtract(t,s.c,s.a),Gn.subtract(n,r.s,r.e),Gn.cross(o,e,t);const l=Gn.dot(n,o);if(l<=0)return 0;Gn.subtract(i,r.s,s.a);const _=Gn.dot(i,o);if(_<0||_>l)return 0;Gn.cross(a,n,i);let u=Gn.dot(t,a);if(u<0||u>l)return 0;let f=-Gn.dot(e,a);if(f<0||u+f>l)return 0;if(c){const e=1/l;u*=e,f*=e;const t=1-u-f;Gn.set(c,s.a.x*t+s.b.x*u+s.c.x*f,s.a.y*t+s.b.y*u+s.c.y*f,s.a.z*t+s.b.z*u+s.c.z*f)}return 1}}(),ls=new Eo;function _s(e,t){ls.o.set(e.s),Gn.subtract(ls.d,e.e,e.s),ls.d.normalize();const n=$r(ls,t);return n<=e.length()?n:0}function us(e,t){ls.o.set(e.s),Gn.subtract(ls.d,e.e,e.s),ls.d.normalize();const n=ts(ls,t);return n<=e.length()?n:0}function fs(e,t){ls.o.set(e.s),Gn.subtract(ls.d,e.e,e.s),ls.d.normalize();const n=Jr(ls,t);return n<=e.length()?n:0}const hs=function(){const e=new Gn,t=new Gn,n=new Gn,i=new Gn;return function(o,a){return Gn.subtract(e,o.center,o.halfExtents),Gn.add(t,o.center,o.halfExtents),Gn.subtract(n,a.center,a.halfExtents),Gn.add(i,a.center,a.halfExtents),e.x<=i.x&&t.x>=n.x&&e.y<=i.y&&t.y>=n.y&&e.z<=i.z&&t.z>=n.z}}();function ps(e,t,n,i,o,a){Gn.set(a[0],e.x+n.x*t.x+i.x*t.y+o.x*t.z,e.y+n.y*t.x+i.y*t.y+o.y*t.z,e.z+n.z*t.x+i.z*t.y+o.z*t.z),Gn.set(a[1],e.x-n.x*t.x+i.x*t.y+o.x*t.z,e.y-n.y*t.x+i.y*t.y+o.y*t.z,e.z-n.z*t.x+i.z*t.y+o.z*t.z),Gn.set(a[2],e.x+n.x*t.x-i.x*t.y+o.x*t.z,e.y+n.y*t.x-i.y*t.y+o.y*t.z,e.z+n.z*t.x-i.z*t.y+o.z*t.z),Gn.set(a[3],e.x+n.x*t.x+i.x*t.y-o.x*t.z,e.y+n.y*t.x+i.y*t.y-o.y*t.z,e.z+n.z*t.x+i.z*t.y-o.z*t.z),Gn.set(a[4],e.x-n.x*t.x-i.x*t.y-o.x*t.z,e.y-n.y*t.x-i.y*t.y-o.y*t.z,e.z-n.z*t.x-i.z*t.y-o.z*t.z),Gn.set(a[5],e.x+n.x*t.x-i.x*t.y-o.x*t.z,e.y+n.y*t.x-i.y*t.y-o.y*t.z,e.z+n.z*t.x-i.z*t.y-o.z*t.z),Gn.set(a[6],e.x-n.x*t.x+i.x*t.y-o.x*t.z,e.y-n.y*t.x+i.y*t.y-o.y*t.z,e.z-n.z*t.x+i.z*t.y-o.z*t.z),Gn.set(a[7],e.x-n.x*t.x-i.x*t.y+o.x*t.z,e.y-n.y*t.x-i.y*t.y+o.y*t.z,e.z-n.z*t.x-i.z*t.y+o.z*t.z)}function ms(e,t){let n=Gn.dot(t,e[0]),i=n;for(let o=1;o<8;++o){const a=Gn.dot(t,e[o]);n=a<n?a:n,i=a>i?a:i}return[n,i]}const ds=function(){const e=new Array(15);for(let t=0;t<15;t++)e[t]=new Gn(0,0,0);const t=new Array(8),n=new Array(8);for(let e=0;e<8;e++)t[e]=new Gn(0,0,0),n[e]=new Gn(0,0,0);const i=new Gn,o=new Gn;return function(a,r){Gn.set(e[0],1,0,0),Gn.set(e[1],0,1,0),Gn.set(e[2],0,0,1),Gn.set(e[3],r.orientation.m00,r.orientation.m01,r.orientation.m02),Gn.set(e[4],r.orientation.m03,r.orientation.m04,r.orientation.m05),Gn.set(e[5],r.orientation.m06,r.orientation.m07,r.orientation.m08);for(let t=0;t<3;++t)Gn.cross(e[6+3*t],e[t],e[0]),Gn.cross(e[7+3*t],e[t],e[1]),Gn.cross(e[7+3*t],e[t],e[2]);Gn.subtract(i,a.center,a.halfExtents),Gn.add(o,a.center,a.halfExtents),function(e,t,n){Gn.set(n[0],e.x,t.y,t.z),Gn.set(n[1],e.x,t.y,e.z),Gn.set(n[2],e.x,e.y,t.z),Gn.set(n[3],e.x,e.y,e.z),Gn.set(n[4],t.x,t.y,t.z),Gn.set(n[5],t.x,t.y,e.z),Gn.set(n[6],t.x,e.y,t.z),Gn.set(n[7],t.x,e.y,e.z)}(i,o,t),ps(r.center,r.halfExtents,e[3],e[4],e[5],n);for(let i=0;i<15;++i){const o=ms(t,e[i]),a=ms(n,e[i]);if(a[0]>o[1]||o[0]>a[1])return 0}return 1}}(),vs=function(e,t){const n=e.halfExtents.x*Math.abs(t.n.x)+e.halfExtents.y*Math.abs(t.n.y)+e.halfExtents.z*Math.abs(t.n.z),i=Gn.dot(t.n,e.center);return i+n<t.d?-1:i-n>t.d?0:1},gs=function(e,t){for(let n=0;n<t.planes.length;n++)if(-1===vs(e,t.planes[n]))return 0;return 1},ys=function(){const e=new Array(8);let t=0,n=0;for(let t=0;t<e.length;t++)e[t]=new Gn(0,0,0);return function(i,o){let a=0,r=!1;for(let e=0;e<o.planes.length;e++){if(a=vs(i,o.planes[e]),-1===a)return 0;1===a&&(r=!0)}if(!r)return 1;for(let t=0;t<o.vertices.length;t++)Gn.subtract(e[t],o.vertices[t],i.center);t=0,n=0;for(let a=0;a<o.vertices.length;a++)e[a].x>i.halfExtents.x?t++:e[a].x<-i.halfExtents.x&&n++;if(t===o.vertices.length||n===o.vertices.length)return 0;t=0,n=0;for(let a=0;a<o.vertices.length;a++)e[a].y>i.halfExtents.y?t++:e[a].y<-i.halfExtents.y&&n++;if(t===o.vertices.length||n===o.vertices.length)return 0;t=0,n=0;for(let a=0;a<o.vertices.length;a++)e[a].z>i.halfExtents.z?t++:e[a].z<-i.halfExtents.z&&n++;return t===o.vertices.length||n===o.vertices.length?0:1}}(),As=function(){const e=new Gn(0,0,0),t=new qn;return function(n,i){return Gn.subtract(e,i,n.center),Gn.transformMat3(e,e,qn.transpose(t,n.orientation)),o=e,a=n.halfExtents,Math.abs(o.x)<a.x&&Math.abs(o.y)<a.y&&Math.abs(o.z)<a.z;var o,a}}(),xs=function(){const e=function(e,t,n,i){return Math.abs(e.x*t+e.y*n+e.z*i)};return function(t,n){const i=t.halfExtents.x*e(n.n,t.orientation.m00,t.orientation.m01,t.orientation.m02)+t.halfExtents.y*e(n.n,t.orientation.m03,t.orientation.m04,t.orientation.m05)+t.halfExtents.z*e(n.n,t.orientation.m06,t.orientation.m07,t.orientation.m08),o=Gn.dot(n.n,t.center);return o+i<n.d?-1:o-i>n.d?0:1}}(),bs=function(e,t){for(let n=0;n<t.planes.length;n++)if(-1===xs(e,t.planes[n]))return 0;return 1},Cs=function(){const e=new Array(8);let t=0,n=0,i=0;for(let t=0;t<e.length;t++)e[t]=new Gn(0,0,0);const o=function(e,t,n,i){return e.x*t+e.y*n+e.z*i};return function(a,r){let s=0,c=!1;for(let e=0;e<r.planes.length;e++){if(s=xs(a,r.planes[e]),-1===s)return 0;1===s&&(c=!0)}if(!c)return 1;for(let t=0;t<r.vertices.length;t++)Gn.subtract(e[t],r.vertices[t],a.center);n=0,i=0;for(let s=0;s<r.vertices.length;s++)t=o(e[s],a.orientation.m00,a.orientation.m01,a.orientation.m02),t>a.halfExtents.x?n++:t<-a.halfExtents.x&&i++;if(n===r.vertices.length||i===r.vertices.length)return 0;n=0,i=0;for(let s=0;s<r.vertices.length;s++)t=o(e[s],a.orientation.m03,a.orientation.m04,a.orientation.m05),t>a.halfExtents.y?n++:t<-a.halfExtents.y&&i++;if(n===r.vertices.length||i===r.vertices.length)return 0;n=0,i=0;for(let s=0;s<r.vertices.length;s++)t=o(e[s],a.orientation.m06,a.orientation.m07,a.orientation.m08),t>a.halfExtents.z?n++:t<-a.halfExtents.z&&i++;return n===r.vertices.length||i===r.vertices.length?0:1}}(),Ss=function(){const e=new Array(15);for(let t=0;t<15;t++)e[t]=new Gn(0,0,0);const t=new Array(8),n=new Array(8);for(let e=0;e<8;e++)t[e]=new Gn(0,0,0),n[e]=new Gn(0,0,0);return function(i,o){Gn.set(e[0],i.orientation.m00,i.orientation.m01,i.orientation.m02),Gn.set(e[1],i.orientation.m03,i.orientation.m04,i.orientation.m05),Gn.set(e[2],i.orientation.m06,i.orientation.m07,i.orientation.m08),Gn.set(e[3],o.orientation.m00,o.orientation.m01,o.orientation.m02),Gn.set(e[4],o.orientation.m03,o.orientation.m04,o.orientation.m05),Gn.set(e[5],o.orientation.m06,o.orientation.m07,o.orientation.m08);for(let t=0;t<3;++t)Gn.cross(e[6+3*t],e[t],e[3]),Gn.cross(e[7+3*t],e[t],e[4]),Gn.cross(e[8+3*t],e[t],e[5]);ps(i.center,i.halfExtents,e[0],e[1],e[2],t),ps(o.center,o.halfExtents,e[3],e[4],e[5],n);for(let i=0;i<15;++i){const o=ms(t,e[i]),a=ms(n,e[i]);if(a[0]>o[1]||o[0]>a[1])return 0}return 1}}(),Es=function(){const e=new No,t=new Gn,n=new Gn,i=new Gn,o=new Array(8);for(let e=0;e<8;e++)o[e]=new Gn;const a=new Array(8);for(let e=0;e<8;e++)a[e]=new Gn;return function(r,s){if(0===Gn.squaredDistance(s.ellipseCenter0,s.ellipseCenter1))return e.radius=s.radius,e.center.set(s.ellipseCenter0),Os.sphereOBB(e,r);{t.x=r.orientation.m00,t.y=r.orientation.m01,t.z=r.orientation.m02,n.x=r.orientation.m03,n.y=r.orientation.m04,n.z=r.orientation.m05,i.x=r.orientation.m06,i.y=r.orientation.m07,i.z=r.orientation.m08,ps(r.center,r.halfExtents,t,n,i,o);const e=a,c=Gn.copy(e[0],t),l=Gn.copy(e[1],n),_=Gn.copy(e[2],i);Gn.subtract(e[3],s.center,r.center).normalize();const u=Gn.subtract(e[4],s.ellipseCenter0,s.ellipseCenter1);u.normalize(),Gn.cross(e[5],c,u),Gn.cross(e[6],l,u),Gn.cross(e[7],_,u);for(let t=0;t<8;++t){const n=ms(o,e[t]),i=Gn.dot(e[t],s.ellipseCenter0),a=Gn.dot(e[t],s.ellipseCenter1),r=Math.max(i,a),c=Math.min(i,a)-s.radius,l=r+s.radius;if(c>n[1]||n[0]>l)return 0}return 1}}}(),ws=function(e,t){const n=Gn.dot(t.n,e.center),i=e.radius*t.n.length();return n+i<t.d?-1:n-i>t.d?0:1},Ts=function(e,t){for(let n=0;n<t.planes.length;n++)if(-1===ws(e,t.planes[n]))return 0;return 1},Ps=function(){const e=new Gn(0,0,0),t=[1,-1,1,-1,1,-1];return function(n,i){for(let o=0;o<6;o++){const a=i.planes[o],r=n.radius,s=n.center,c=a.n,l=a.d,_=Gn.dot(c,s);if(_+r<l)return 0;if(!(_-r>l)){Gn.add(e,s,Gn.multiplyScalar(e,c,r));for(let n=0;n<6;n++){if(n===o||n===o+t[o])continue;const a=i.planes[n];if(Gn.dot(a.n,e)<a.d)return 0}}}return 1}}(),Is=function(e,t){const n=e.radius+t.radius;return Gn.squaredDistance(e.center,t.center)<n*n},Rs=function(){const e=new Gn;return function(t,n){return Ao(e,t.center,n),Gn.squaredDistance(t.center,e)<t.radius*t.radius}}(),Ns=function(){const e=new Gn;return function(t,n){return xo(e,t.center,n),Gn.squaredDistance(t.center,e)<t.radius*t.radius}}(),Ds=function(){const e=new Gn,t=new Gn;return function(n,i){const o=n.radius+i.radius,a=o*o,r=Gn.squaredDistance(i.ellipseCenter0,i.ellipseCenter1);if(0===r)return Gn.squaredDistance(n.center,i.center)<a;{Gn.subtract(e,n.center,i.ellipseCenter0),Gn.subtract(t,i.ellipseCenter1,i.ellipseCenter0);const o=Gn.dot(e,t)/r;return o<0?Gn.squaredDistance(n.center,i.ellipseCenter0)<a:o>1?Gn.squaredDistance(n.center,i.ellipseCenter1)<a:(Gn.scaleAndAdd(e,i.ellipseCenter0,t,o),Gn.squaredDistance(n.center,e)<a)}}}(),Ms=function(){const e=new Gn,t=new Gn,n=new Gn,i=new Gn,o=new Gn,a=new Gn;return function(r,s){const c=Gn.subtract(e,r.ellipseCenter1,r.ellipseCenter0),l=Gn.subtract(t,s.ellipseCenter1,s.ellipseCenter0),_=Gn.subtract(n,r.ellipseCenter0,s.ellipseCenter0),u=Gn.dot(c,c),f=Gn.dot(c,l),h=Gn.dot(l,l),p=Gn.dot(c,_),m=Gn.dot(l,_),d=u*h-f*f;let v,g,y=d,A=d;d<dn?(v=0,y=1,g=m,A=h):(v=f*m-h*p,g=u*m-f*p,v<0?(v=0,g=m,A=h):v>y&&(v=y,g=m+f,A=h)),g<0?(g=0,-p<0?v=0:-p>u?v=y:(v=-p,y=u)):g>A&&(g=A,-p+f<0?v=0:-p+f>u?v=y:(v=-p+f,y=u));const x=Math.abs(v)<dn?0:v/y,b=Math.abs(g)<dn?0:g/A,C=i;C.set(_),C.add(Gn.multiplyScalar(o,c,x)),C.subtract(Gn.multiplyScalar(a,l,b));const S=r.radius+s.radius;return C.lengthSqr()<S*S}}(),Os={raySphere:Jr,rayAABB:$r,rayOBB:ts,rayPlane:Kr,rayTriangle:Zr,rayCapsule:is,raySubMesh:os,rayMesh:as,rayModel:rs,lineSphere:fs,lineAABB:_s,lineOBB:us,linePlane:ss,lineTriangle:cs,sphereWithSphere:Is,sphereAABB:Rs,sphereOBB:Ns,spherePlane:ws,sphereFrustum:Ts,sphereFrustumAccurate:Ps,sphereCapsule:Ds,aabbWithAABB:hs,aabbWithOBB:ds,aabbPlane:vs,aabbFrustum:gs,aabbFrustumAccurate:ys,obbWithOBB:Ss,obbPlane:xs,obbFrustum:bs,obbFrustumAccurate:Cs,obbPoint:As,obbCapsule:Es,capsuleWithCapsule:Ms,resolve(e,t,n=null){const i=e._type,o=t._type,a=this[i|o];return i<o?a(e,t,n):a(t,e,n)}};Os[Co.SHAPE_RAY|Co.SHAPE_SPHERE]=Jr,Os[Co.SHAPE_RAY|Co.SHAPE_AABB]=$r,Os[Co.SHAPE_RAY|Co.SHAPE_OBB]=ts,Os[Co.SHAPE_RAY|Co.SHAPE_PLANE]=Kr,Os[Co.SHAPE_RAY|Co.SHAPE_TRIANGLE]=Zr,Os[Co.SHAPE_RAY|Co.SHAPE_CAPSULE]=is,Os[Co.SHAPE_LINE|Co.SHAPE_SPHERE]=fs,Os[Co.SHAPE_LINE|Co.SHAPE_AABB]=_s,Os[Co.SHAPE_LINE|Co.SHAPE_OBB]=us,Os[Co.SHAPE_LINE|Co.SHAPE_PLANE]=ss,Os[Co.SHAPE_LINE|Co.SHAPE_TRIANGLE]=cs,Os[Co.SHAPE_SPHERE]=Is,Os[Co.SHAPE_SPHERE|Co.SHAPE_AABB]=Rs,Os[Co.SHAPE_SPHERE|Co.SHAPE_OBB]=Ns,Os[Co.SHAPE_SPHERE|Co.SHAPE_PLANE]=ws,Os[Co.SHAPE_SPHERE|Co.SHAPE_FRUSTUM]=Ts,Os[Co.SHAPE_SPHERE|Co.SHAPE_FRUSTUM_ACCURATE]=Ps,Os[Co.SHAPE_SPHERE|Co.SHAPE_CAPSULE]=Ds,Os[Co.SHAPE_AABB]=hs,Os[Co.SHAPE_AABB|Co.SHAPE_OBB]=ds,Os[Co.SHAPE_AABB|Co.SHAPE_PLANE]=vs,Os[Co.SHAPE_AABB|Co.SHAPE_FRUSTUM]=gs,Os[Co.SHAPE_AABB|Co.SHAPE_FRUSTUM_ACCURATE]=ys,Os[Co.SHAPE_OBB]=Ss,Os[Co.SHAPE_OBB|Co.SHAPE_PLANE]=xs,Os[Co.SHAPE_OBB|Co.SHAPE_FRUSTUM]=bs,Os[Co.SHAPE_OBB|Co.SHAPE_FRUSTUM_ACCURATE]=Cs,Os[Co.SHAPE_OBB|Co.SHAPE_CAPSULE]=Es,Os[Co.SHAPE_CAPSULE]=Ms,an(So.prototype,"line",[{name:"mag",newName:"len"},{name:"magnitude",newName:"len"}]),rn(Os,"intersect",[{name:"line_quad"}]);const zs=new Gn(0,0,0),Ls=new Gn(0,0,0),Fs=c.mat4(),Us=c.v4();class Bs{static create(e,t,n,i){return new Bs(e,t,n,i)}static clone(e){return new Bs(e.n.x,e.n.y,e.n.z,e.d)}static copy(e,t){return Gn.copy(e.n,t.n),e.d=t.d,e}static fromPoints(e,t,n,i){return Gn.subtract(zs,n,t),Gn.subtract(Ls,i,t),Gn.normalize(e.n,Gn.cross(e.n,zs,Ls)),e.d=Gn.dot(e.n,t),e}static set(e,t,n,i,o){return e.n.x=t,e.n.y=n,e.n.z=i,e.d=o,e}static fromNormalAndPoint(e,t,n){return Gn.copy(e.n,t),e.d=Gn.dot(t,n),e}static normalize(e,t){const n=t.n.length();return Gn.normalize(e.n,t.n),n>0&&(e.d=t.d/n),e}get type(){return this._type}set x(e){this.n.x=e}get x(){return this.n.x}set y(e){this.n.y=e}get y(){return this.n.y}set z(e){this.n.z=e}get z(){return this.n.z}set w(e){this.d=e}get w(){return this.d}constructor(e=0,t=1,n=0,i=0){this.n=void 0,this.d=void 0,this._type=void 0,this._type=Co.SHAPE_PLANE,this.n=new Gn(e,t,n),this.d=i}transform(e){ii.invert(Fs,e),ii.transpose(Fs,Fs),ui.set(Us,this.n.x,this.n.y,this.n.z,this.d),ui.transformMat4(Us,Us,Fs),Gn.set(this.n,Us.x,Us.y,Us.z),this.d=Us.w}}const ks=jsb.NativeBufferPool;var js;jsb.NativeObjectPool,jsb.NativeBufferAllocator,function(e){e[e.UINT32=0]="UINT32",e[e.FLOAT32=1]="FLOAT32",e[e.NEVER=2]="NEVER"}(js||(js={}));class Gs{constructor(e,t,n,i,o=8){this._dataType=void 0,this._dataMembers=void 0,this._elementCount=void 0,this._entryBits=void 0,this._stride=void 0,this._entriesPerChunk=void 0,this._entryMask=void 0,this._chunkMask=void 0,this._poolFlag=void 0,this._arrayBuffers=[],this._freeLists=[],this._uint32BufferViews=[],this._float32BufferViews=[],this._hasUint32=!1,this._hasFloat32=!1,this._nativePool=void 0,this._elementCount=i.COUNT,this._entryBits=o,this._dataType=t,this._dataMembers=n,this._stride=4*this._elementCount,this._entriesPerChunk=1<<o,this._entryMask=this._entriesPerChunk-1,this._poolFlag=1<<30,this._chunkMask=~(this._entryMask|this._poolFlag),this._nativePool=new ks(e,o,this._stride);let a=js.NEVER,r=!1,s=!1;for(const e in t){if(r=this._hasFloat32,s=this._hasUint32,s&&r)break;a=t[e],r||a!==js.FLOAT32?s||a!==js.UINT32||(this._hasUint32=!0):this._hasFloat32=!0}}alloc(){let e=0;for(;e<this._freeLists.length;e++){const t=this._freeLists[e];if(t.length){const n=t[t.length-1];return t.length--,(e<<this._entryBits)+n+this._poolFlag}}const t=this._nativePool.allocateNewChunk(),n=[],i=[],o=[],a=this._hasFloat32,r=this._hasUint32;for(let e=0;e<this._entriesPerChunk;e++)a&&n.push(new Float32Array(t,this._stride*e,this._elementCount)),r&&i.push(new Uint32Array(t,this._stride*e,this._elementCount)),e&&o.push(e);return r&&this._uint32BufferViews.push(i),a&&this._float32BufferViews.push(n),this._freeLists.push(o),this._arrayBuffers.push(t),(e<<this._entryBits)+this._poolFlag}getBuffer(e){const t=(this._chunkMask&e)>>this._entryBits,n=this._entryMask&e;return(this._hasFloat32?this._float32BufferViews:this._uint32BufferViews)[t][n]}getTypedArray(e,t){const n=(this._chunkMask&e)>>this._entryBits,i=this._entryMask&e,o=t,a=(this._dataType[t]===js.UINT32?this._uint32BufferViews:this._float32BufferViews)[n][i],r=this._dataMembers[t];return a.subarray(o,o+r)}free(e){const t=(this._chunkMask&e)>>this._entryBits,n=this._entryMask&e;(this._hasUint32?this._uint32BufferViews:this._float32BufferViews)[t][n].fill(0),this._freeLists[t].push(n)}}let Vs,Hs;!function(e){e[e.NODE=0]="NODE",e[e.PASS=1]="PASS",e[e.AABB=2]="AABB"}(Vs||(Vs={})),function(e){e[e.DIRTY_FLAG=0]="DIRTY_FLAG",e[e.LAYER=1]="LAYER",e[e.WORLD_SCALE=2]="WORLD_SCALE",e[e.WORLD_POSITION=5]="WORLD_POSITION",e[e.WORLD_ROTATION=8]="WORLD_ROTATION",e[e.WORLD_MATRIX=12]="WORLD_MATRIX",e[e.LOCAL_SCALE=28]="LOCAL_SCALE",e[e.LOCAL_POSITION=31]="LOCAL_POSITION",e[e.LOCAL_ROTATION=34]="LOCAL_ROTATION",e[e.COUNT=38]="COUNT"}(Hs||(Hs={}));const Ws={[Hs.DIRTY_FLAG]:js.UINT32,[Hs.LAYER]:js.UINT32,[Hs.WORLD_SCALE]:js.FLOAT32,[Hs.WORLD_POSITION]:js.FLOAT32,[Hs.WORLD_ROTATION]:js.FLOAT32,[Hs.WORLD_MATRIX]:js.FLOAT32,[Hs.LOCAL_SCALE]:js.FLOAT32,[Hs.LOCAL_POSITION]:js.FLOAT32,[Hs.LOCAL_ROTATION]:js.FLOAT32,[Hs.COUNT]:js.NEVER},qs={[Hs.DIRTY_FLAG]:Hs.LAYER-Hs.DIRTY_FLAG,[Hs.LAYER]:Hs.WORLD_SCALE-Hs.LAYER,[Hs.WORLD_SCALE]:Hs.WORLD_POSITION-Hs.WORLD_SCALE,[Hs.WORLD_POSITION]:Hs.WORLD_ROTATION-Hs.WORLD_POSITION,[Hs.WORLD_ROTATION]:Hs.WORLD_MATRIX-Hs.WORLD_ROTATION,[Hs.WORLD_MATRIX]:Hs.LOCAL_SCALE-Hs.WORLD_MATRIX,[Hs.LOCAL_SCALE]:Hs.LOCAL_POSITION-Hs.LOCAL_SCALE,[Hs.LOCAL_POSITION]:Hs.LOCAL_ROTATION-Hs.LOCAL_POSITION,[Hs.LOCAL_ROTATION]:Hs.COUNT-Hs.LOCAL_ROTATION,[Hs.COUNT]:1},Ys=new Gs(Vs.NODE,Ws,qs,Hs);let Xs;!function(e){e[e.PRIORITY=0]="PRIORITY",e[e.STAGE=1]="STAGE",e[e.PHASE=2]="PHASE",e[e.PRIMITIVE=3]="PRIMITIVE",e[e.BATCHING_SCHEME=4]="BATCHING_SCHEME",e[e.DYNAMIC_STATE=5]="DYNAMIC_STATE",e[e.HASH=6]="HASH",e[e.COUNT=7]="COUNT"}(Xs||(Xs={}));const Qs={[Xs.PRIORITY]:js.UINT32,[Xs.STAGE]:js.UINT32,[Xs.PHASE]:js.UINT32,[Xs.PRIMITIVE]:js.UINT32,[Xs.BATCHING_SCHEME]:js.UINT32,[Xs.DYNAMIC_STATE]:js.UINT32,[Xs.HASH]:js.UINT32,[Xs.COUNT]:js.NEVER},Ks={[Xs.PRIORITY]:Xs.STAGE-Xs.PRIORITY,[Xs.STAGE]:Xs.PHASE-Xs.STAGE,[Xs.PHASE]:Xs.PRIMITIVE-Xs.PHASE,[Xs.PRIMITIVE]:Xs.BATCHING_SCHEME-Xs.PRIMITIVE,[Xs.BATCHING_SCHEME]:Xs.DYNAMIC_STATE-Xs.BATCHING_SCHEME,[Xs.DYNAMIC_STATE]:Xs.HASH-Xs.DYNAMIC_STATE,[Xs.HASH]:Xs.COUNT-Xs.HASH,[Xs.COUNT]:1},Zs=new Gs(Vs.PASS,Qs,Ks,Xs);let Js;!function(e){e[e.CENTER=0]="CENTER",e[e.HALFEXTENTS=3]="HALFEXTENTS",e[e.COUNT=6]="COUNT"}(Js||(Js={}));const $s={[Js.CENTER]:js.FLOAT32,[Js.HALFEXTENTS]:js.FLOAT32,[Js.COUNT]:js.NEVER},ec={[Js.CENTER]:Js.HALFEXTENTS-Js.CENTER,[Js.HALFEXTENTS]:Js.COUNT-Js.HALFEXTENTS,[Js.COUNT]:1},tc=new Gs(Vs.AABB,$s,ec,Js),nc=new Gn,ic=new Gn,oc=new Gn,ac=new Gn,rc=new qn,sc=(e,t,n)=>{rc.m00=Math.abs(n.m00),rc.m01=Math.abs(n.m01),rc.m02=Math.abs(n.m02),rc.m03=Math.abs(n.m04),rc.m04=Math.abs(n.m05),rc.m05=Math.abs(n.m06),rc.m06=Math.abs(n.m08),rc.m07=Math.abs(n.m09),rc.m08=Math.abs(n.m10),Gn.transformMat3(e,t,rc)};class cc{static create(e,t,n,i,o,a){return new cc(e,t,n,i,o,a)}static clone(e){return new cc(e.center.x,e.center.y,e.center.z,e.halfExtents.x,e.halfExtents.y,e.halfExtents.z)}static copy(e,t){return Gn.copy(e.center,t.center),Gn.copy(e.halfExtents,t.halfExtents),e}static fromPoints(e,t,n){return Gn.add(nc,n,t),Gn.subtract(ic,n,t),Gn.multiplyScalar(e.center,nc,.5),Gn.multiplyScalar(e.halfExtents,ic,.5),e}static set(e,t,n,i,o,a,r){return e.center.set(t,n,i),e.halfExtents.set(o,a,r),e}static merge(e,t,n){return Gn.subtract(nc,t.center,t.halfExtents),Gn.subtract(ic,n.center,n.halfExtents),Gn.add(oc,t.center,t.halfExtents),Gn.add(ac,n.center,n.halfExtents),Gn.max(ac,oc,ac),Gn.min(oc,nc,ic),cc.fromPoints(e,oc,ac)}static toBoundingSphere(e,t){t.getBoundary(nc,ic),e.center.set(nc),e.radius=0,Gn.subtract(oc,ic,e.center);const n=oc.length(),i=.5*n;return e.radius+=i,Gn.multiplyScalar(oc,oc,i/n),Gn.add(e.center,e.center,oc),e}static transform(e,t,n){return Gn.transformMat4(e.center,t.center,n),sc(e.halfExtents,t.halfExtents,n),e}get type(){return this._type}constructor(e=0,t=0,n=0,i=1,o=1,a=1){return this.center=void 0,this.halfExtents=void 0,this._type=void 0,this._aabbHandle=0,this._type=Co.SHAPE_AABB,this._aabbHandle=tc.alloc(),this.center=new Gn(tc.getTypedArray(this._aabbHandle,Js.CENTER)),this.halfExtents=new Gn(tc.getTypedArray(this._aabbHandle,Js.HALFEXTENTS)),this.center.set(e,t,n),this.halfExtents.set(i,o,a),this._nativeObj=new co,void this._nativeObj.initWithData(tc.getBuffer(this._aabbHandle))}get native(){return this._nativeObj}getBoundary(e,t){Gn.subtract(e,this.center,this.halfExtents),Gn.add(t,this.center,this.halfExtents)}transform(e,t,n,i,o){Gn.transformMat4(o.center,this.center,e),sc(o.halfExtents,this.halfExtents,e)}clone(){return cc.clone(this)}copy(e){return cc.copy(this,e)}}e("bM",cc);const lc=new Gn,_c=new Gn,uc=new qn;class fc{static create(e,t,n,i,o,a,r,s,c,l,_,u,f,h,p){return new fc(e,t,n,i,o,a,r,s,c,l,_,u,f,h,p)}static clone(e){return new fc(e.center.x,e.center.y,e.center.z,e.halfExtents.x,e.halfExtents.y,e.halfExtents.z,e.orientation.m00,e.orientation.m01,e.orientation.m02,e.orientation.m03,e.orientation.m04,e.orientation.m05,e.orientation.m06,e.orientation.m07,e.orientation.m08)}static copy(e,t){return Gn.copy(e.center,t.center),Gn.copy(e.halfExtents,t.halfExtents),qn.copy(e.orientation,t.orientation),e}static fromPoints(e,t,n){return Gn.multiplyScalar(e.center,Gn.add(lc,t,n),.5),Gn.multiplyScalar(e.halfExtents,Gn.subtract(_c,n,t),.5),qn.identity(e.orientation),e}static set(e,t,n,i,o,a,r,s,c,l,_,u,f,h,p,m){return Gn.set(e.center,t,n,i),Gn.set(e.halfExtents,o,a,r),qn.set(e.orientation,s,c,l,_,u,f,h,p,m),e}get type(){return this._type}constructor(e=0,t=0,n=0,i=1,o=1,a=1,r=1,s=0,c=0,l=0,_=1,u=0,f=0,h=0,p=1){this.center=void 0,this.halfExtents=void 0,this.orientation=void 0,this._type=void 0,this._type=Co.SHAPE_OBB,this.center=new Gn(e,t,n),this.halfExtents=new Gn(i,o,a),this.orientation=new qn(r,s,c,l,_,u,f,h,p)}getBoundary(e,t){var n,i,o;n=lc,i=this.halfExtents,o=this.orientation,uc.m00=Math.abs(o.m00),uc.m01=Math.abs(o.m01),uc.m02=Math.abs(o.m02),uc.m03=Math.abs(o.m03),uc.m04=Math.abs(o.m04),uc.m05=Math.abs(o.m05),uc.m06=Math.abs(o.m06),uc.m07=Math.abs(o.m07),uc.m08=Math.abs(o.m08),Gn.transformMat3(n,i,uc),Gn.subtract(e,this.center,lc),Gn.add(t,this.center,lc)}transform(e,t,n,i,o){Gn.transformMat4(o.center,this.center,e),qn.fromQuat(o.orientation,n),Gn.multiply(o.halfExtents,this.halfExtents,i)}translateAndRotate(e,t,n){Gn.transformMat4(n.center,this.center,e),qn.fromQuat(n.orientation,t)}setScale(e,t){Gn.multiply(t.halfExtents,this.halfExtents,e)}}class hc{get type(){return this._type}constructor(e=.5,t=.5,n=1){this._type=void 0,this.radius=void 0,this.halfHeight=void 0,this.axis=void 0,this.center=void 0,this.rotation=void 0,this.ellipseCenter0=void 0,this.ellipseCenter1=void 0,this._type=Co.SHAPE_CAPSULE,this.radius=e,this.halfHeight=t,this.axis=n,this.center=new Gn,this.rotation=new Qn,this.ellipseCenter0=new Gn(0,t,0),this.ellipseCenter1=new Gn(0,-t,0),this.updateCache()}transform(e,t,n,i,o){const a=i,r=On(a);o.radius=this.radius*Math.abs(r);let s=(this.halfHeight+this.radius)*Math.abs(a.y)-o.radius;s<0&&(s=0),o.halfHeight=s,Gn.transformMat4(o.center,this.center,e),Qn.multiply(o.rotation,this.rotation,n),o.updateCache()}updateCache(){this.updateLocalCenter(),Gn.transformQuat(this.ellipseCenter0,this.ellipseCenter0,this.rotation),Gn.transformQuat(this.ellipseCenter1,this.ellipseCenter1,this.rotation),this.ellipseCenter0.add(this.center),this.ellipseCenter1.add(this.center)}updateLocalCenter(){const e=this.halfHeight;switch(this.axis){case 0:this.ellipseCenter0.set(e,0,0),this.ellipseCenter1.set(-e,0,0);break;case 1:this.ellipseCenter0.set(0,e,0),this.ellipseCenter1.set(0,-e,0);break;case 2:this.ellipseCenter0.set(0,0,e),this.ellipseCenter1.set(0,0,-e)}}}const pc=new Array(8);pc[0]=new Gn(1,1,1),pc[1]=new Gn(-1,1,1),pc[2]=new Gn(-1,-1,1),pc[3]=new Gn(1,-1,1),pc[4]=new Gn(1,1,-1),pc[5]=new Gn(-1,1,-1),pc[6]=new Gn(-1,-1,-1),pc[7]=new Gn(1,-1,-1);class mc{set accurate(e){this._type=e?Co.SHAPE_FRUSTUM_ACCURATE:Co.SHAPE_FRUSTUM}static create(){return new mc}static clone(e){return mc.copy(new mc,e)}static copy(e,t){e._type=t._type;for(let n=0;n<6;++n)Bs.copy(e.planes[n],t.planes[n]);for(let n=0;n<8;++n)Gn.copy(e.vertices[n],t.vertices[n]);return e}get type(){return this._type}constructor(){this._type=void 0,this.planes=void 0,this.vertices=void 0,this._type=Co.SHAPE_FRUSTUM,this.planes=new Array(6);for(let e=0;e<6;++e)this.planes[e]=Bs.create(0,0,0,0);this.vertices=new Array(8);for(let e=0;e<8;++e)this.vertices[e]=new Gn}update(e,t){if(Gn.set(this.planes[0].n,e.m03+e.m00,e.m07+e.m04,e.m11+e.m08),this.planes[0].d=-(e.m15+e.m12),Gn.set(this.planes[1].n,e.m03-e.m00,e.m07-e.m04,e.m11-e.m08),this.planes[1].d=-(e.m15-e.m12),Gn.set(this.planes[2].n,e.m03+e.m01,e.m07+e.m05,e.m11+e.m09),this.planes[2].d=-(e.m15+e.m13),Gn.set(this.planes[3].n,e.m03-e.m01,e.m07-e.m05,e.m11-e.m09),this.planes[3].d=-(e.m15-e.m13),Gn.set(this.planes[4].n,e.m03+e.m02,e.m07+e.m06,e.m11+e.m10),this.planes[4].d=-(e.m15+e.m14),Gn.set(this.planes[5].n,e.m03-e.m02,e.m07-e.m06,e.m11-e.m10),this.planes[5].d=-(e.m15-e.m14),this._type===Co.SHAPE_FRUSTUM_ACCURATE){for(let e=0;e<6;e++){const t=this.planes[e],n=1/t.n.length();Gn.multiplyScalar(t.n,t.n,n),t.d*=n}for(let e=0;e<8;e++)Gn.transformMat4(this.vertices[e],pc[e],t)}}transform(e){if(this._type===Co.SHAPE_FRUSTUM_ACCURATE){for(let t=0;t<8;t++)Gn.transformMat4(this.vertices[t],this.vertices[t],e);Bs.fromPoints(this.planes[0],this.vertices[1],this.vertices[5],this.vertices[6]),Bs.fromPoints(this.planes[1],this.vertices[3],this.vertices[7],this.vertices[4]),Bs.fromPoints(this.planes[2],this.vertices[6],this.vertices[7],this.vertices[3]),Bs.fromPoints(this.planes[3],this.vertices[0],this.vertices[4],this.vertices[5]),Bs.fromPoints(this.planes[4],this.vertices[2],this.vertices[3],this.vertices[0]),Bs.fromPoints(this.planes[0],this.vertices[7],this.vertices[6],this.vertices[5])}}}function dc(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function vc(e,t,n,i,o){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}let gc,yc;mc.createOrtho=(()=>{const e=new Gn;return(t,n,i,o,a,r)=>{const s=n/2,c=i/2;Gn.set(e,s,c,o),Gn.transformMat4(t.vertices[0],e,r),Gn.set(e,-s,c,o),Gn.transformMat4(t.vertices[1],e,r),Gn.set(e,-s,-c,o),Gn.transformMat4(t.vertices[2],e,r),Gn.set(e,s,-c,o),Gn.transformMat4(t.vertices[3],e,r),Gn.set(e,s,c,a),Gn.transformMat4(t.vertices[4],e,r),Gn.set(e,-s,c,a),Gn.transformMat4(t.vertices[5],e,r),Gn.set(e,-s,-c,a),Gn.transformMat4(t.vertices[6],e,r),Gn.set(e,s,-c,a),Gn.transformMat4(t.vertices[7],e,r),Bs.fromPoints(t.planes[0],t.vertices[1],t.vertices[6],t.vertices[5]),Bs.fromPoints(t.planes[1],t.vertices[3],t.vertices[4],t.vertices[7]),Bs.fromPoints(t.planes[2],t.vertices[6],t.vertices[3],t.vertices[7]),Bs.fromPoints(t.planes[3],t.vertices[0],t.vertices[5],t.vertices[4]),Bs.fromPoints(t.planes[4],t.vertices[2],t.vertices[0],t.vertices[3]),Bs.fromPoints(t.planes[0],t.vertices[7],t.vertices[5],t.vertices[6])}})(),function(e){e[e.Default=0]="Default",e[e.Normal=1]="Normal",e[e.Loop=2]="Loop",e[e.ShouldWrap=4]="ShouldWrap",e[e.Clamp=8]="Clamp",e[e.PingPong=22]="PingPong",e[e.Reverse=36]="Reverse"}(gc||(gc={})),function(e){e[e.Default=gc.Default]="Default",e[e.Normal=gc.Normal]="Normal",e[e.Reverse=gc.Reverse]="Reverse",e[e.Loop=gc.Loop]="Loop",e[e.LoopReverse=gc.Loop|gc.Reverse]="LoopReverse",e[e.PingPong=gc.PingPong]="PingPong",e[e.PingPongReverse=gc.PingPong|gc.Reverse]="PingPongReverse"}(yc||(yc={})),Ge(yc);class Ac{constructor(e){this.ratio=0,this.time=0,this.direction=1,this.stopped=!0,this.iterations=0,this.frameIndex=void 0,e&&this.set(e)}set(e){this.ratio=e.ratio,this.time=e.time,this.direction=e.direction,this.stopped=e.stopped,this.iterations=e.iterations,this.frameIndex=e.frameIndex}}function xc(e,t,n=1e-6){let i=0,o=e.length-1,a=o>>>1;for(;i<=o;a=i+o>>>1){const r=e[a];if(r>t+n)o=a-1;else{if(!(r<t-n))return a;i=a+1}}return~i}const bc=()=>{},Cc=()=>bc,Sc=Ec((()=>{}));function Ec(e){return function(t){return"function"==typeof t?e(t):function(n){return e(n,t)}}}function wc(e){return t=>n=>{!function(e,t,n){const i=Pc(e);if(i){const e=Ic(i,"proto");Ic(e,"editor")[t]=n}}(n,e,t)}}const Tc="__ccclassCache__";function Pc(e){return Ic(e,Tc)}function Ic(e,t){return e[t]||(e[t]={})}const Rc=e("bH",Ec(((e,t)=>{let n=Fe.getSuper(e);n===Object&&(n=null);const i={name:t,extends:n,ctor:e},o=e[Tc];if(o){const t=o.proto;t&&Fe.mixin(i,t),e[Tc]=void 0}return Rt(i)}))),Nc=e("cX",wc("requireComponent")),Dc=e("bZ",wc("executionOrder")),Mc=e("cS",Sc);function Oc(e,t,n){let i=null;function o(e,t,n){const o=Pc(e.constructor);if(o){const a=Ic(o,"proto"),r=Ic(a,"properties");!function(e,t,n,i,o,a){let r;const s=o&&(o.get||o.set);i&&(r=At(i,s));const c=t[n],l=Fe.mixin(c||{},r||i||{});if(s)o.get&&(l.get=o.get),o.set&&(l.set=o.set);else if(o)o.initializer&&(l.default=function(e){let t;try{t=e()}catch(t){return e}return"object"!=typeof t||null===t?t:e}(o.initializer));else{const t=a.default||(a.default=function(e){let t;try{t=new e}catch(e){return{}}return t}(e));t.hasOwnProperty(n)&&(l.default=t[n])}t[n]=l}(e.constructor,r,t,i,n,o)}}return void 0===e?Oc({type:void 0}):void 0===t?(i=e,o):void o(e,t,n)}const zc=e("bJ",((e,t,n)=>Oc(Fc({}))(e,t,n))),Lc=e("dz",((e,t,n)=>Oc({editorOnly:!0})(e,t,n)));function Fc(e){return e.__noImplicit=!0,"serializable"in e||(e.serializable=!0),e}const Uc=bc,Bc=e("bV",Sc),kc=e("b_",Cc),jc=e("e9",Sc),Gc=Cc,Vc=Cc,Hc=e("bY",Cc),Wc=e("bT",bc),qc=e("c0",Cc),Yc=(e("dX",bc),e("cY",Cc)),Xc=e("b$",Cc),Qc=e("cb",Cc),Kc=e("dk",Cc),Zc=e("dl",Cc),Jc=Cc,$c=e("ca",bc),el=e("cU",Cc),tl=(e("cf",Cc),e("dO",bc),e("cZ",bc),e("bW",bc)),nl=rl(_t),il=rl(ut),ol=rl(ft),al=e("cM",rl(ht));function rl(e){return Oc({type:e})}const sl=e("cC",((e,t,n)=>Oc({__noImplicit:!0,override:!0})(e,t,n)));let cl;var ll,_l,ul,fl;let hl,pl,ml,dl=Rc("cc.KeyframeCurve")((cl=Symbol.iterator,ul=vc((_l=class{constructor(){dc(this,"_times",ul,this),dc(this,"_values",fl,this)}get keyFramesCount(){return this._times.length}get rangeMin(){return this._times[0]}get rangeMax(){return this._times[this._values.length-1]}[cl](){let e=0;return{next:()=>{if(e>=this._times.length)return{done:!0,value:void 0};{const t=[this._times[e],this._values[e]];return++e,{done:!1,value:t}}}}}keyframes(){return this}times(){return this._times}values(){return this._values}getKeyframeTime(e){return this._times[e]}getKeyframeValue(e){return this._values[e]}addKeyFrame(e,t){return this._insertNewKeyframe(e,t)}removeKeyframe(e){this._times.splice(e,1),this._values.splice(e,1)}indexOfKeyframe(e){return xc(this._times,e)}updateTime(e,t){const n=this._values[e];this.removeKeyframe(e),this._insertNewKeyframe(t,n)}assignSorted(e,t){if(void 0!==t)this.setKeyframes(e.slice(),t.slice());else{const t=Array.from(e);this.setKeyframes(t.map((([e])=>e)),t.map((([,e])=>e)))}}clear(){this._times.length=0,this._values.length=0}searchKeyframe(e){return xc(this._times,e)}setKeyframes(e,t){e.length,t.length,function(e){e.every(((e,t,n)=>0===t||e>n[t-1]||gn(e,n[t-1],1e-6)))}(e),this._times=e,this._values=t}_insertNewKeyframe(e,t){const n=this._times,i=this._values,o=n.length,a=xc(n,e);if(a>=0)return a;const r=~a;return 0===r?(n.unshift(e),i.unshift(t)):r===o?(n.push(e),i.push(t)):(n.splice(r-1,0,e),i.splice(r-1,0,t)),r}}).prototype,"_times",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fl=vc(_l.prototype,"_values",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ll=_l))||ll;function vl(e){return e>-1e-9&&e<1e-9}!function(e){e[e.LINEAR=0]="LINEAR",e[e.CONSTANT=1]="CONSTANT",e[e.CUBIC=2]="CUBIC"}(hl||(hl=e("g6",{}))),function(e){e[e.LINEAR=0]="LINEAR",e[e.CLAMP=1]="CLAMP",e[e.LOOP=2]="LOOP",e[e.PING_PONG=3]="PING_PONG"}(pl||(pl=e("g7",{}))),function(e){e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.BOTH=3]="BOTH"}(ml||(ml=e("g8",{})));const gl=Object;var yl=Object.freeze({__proto__:null,uniquelyReferenced:Uc,ccclass:Rc,property:Oc,requireComponent:Nc,executionOrder:Dc,disallowMultiple:Mc,executeInEditMode:Bc,menu:kc,playOnFocus:jc,inspector:Gc,icon:Vc,help:Hc,type:rl,integer:nl,float:il,boolean:ol,string:al});e("e3",yl);class Al{constructor(e){this._map=null,this._count=0,e?(this._map=e,this._count=Object.keys(e).length):(this._map=Fe.createMap(!0),this._count=0)}add(e,t){return e in this._map||this._count++,this._map[e]=t}get(e){return this._map[e]}has(e){return e in this._map}remove(e){const t=this._map[e];return e in this._map&&(delete this._map[e],this._count--),t}clear(){0!==this._count&&(this._map=Fe.createMap(!0),this._count=0)}forEach(e){for(const t in this._map)e(this._map[t],t)}find(e){for(const t in this._map)if(e(this._map[t],t))return this._map[t];return null}get count(){return this._count}destroy(){this._map=null}}class xl{constructor(e,t){this.id=xl._pipelineId++,this.name="",this.pipes=[],this.name=e;for(let e=0,n=t.length;e<n;e++)this.pipes.push(t[e])}insert(e,t){return t>this.pipes.length?(P(4921),this):(this.pipes.splice(t,0,e),this)}append(e){return this.pipes.push(e),this}remove(e){return this.pipes.splice(e,1),this}sync(e){const t=this.pipes;if(0===t.length)return null;e.isFinish=!1;for(let n=0,i=t.length;n<i;){const o=(0,t[n])(e);if(o)return e.isFinish=!0,o;n++,n!==i&&(e.input=e.output,e.output=null)}return e.isFinish=!0,e.output}async(e){0!==this.pipes.length&&(e.isFinish=!1,this._flow(0,e))}_flow(e,t){(0,this.pipes[e])(t,(n=>{n?(t.isFinish=!0,t.dispatch("complete",n)):++e<this.pipes.length?(t.input=t.output,t.output=null,this._flow(e,t)):(t.isFinish=!0,t.dispatch("complete",n,t.output))}))}}xl._pipelineId=0;const bl=new Al,Cl=new Al,Sl=new Al,El=new Al,wl=new xl("normal load",[]),Tl=new xl("fetch",[]),Pl=new xl("transform url",[]);let Il;!function(e){e.UUID="uuid",e.PATH="path",e.DIR="dir",e.URL="url",e.SCENE="scene"}(Il||(Il={}));const Rl={default:{priority:0},preload:{maxConcurrency:6,maxRequestsPerFrame:2,priority:-1},scene:{maxConcurrency:20,maxRequestsPerFrame:20,priority:1},bundle:{maxConcurrency:20,maxRequestsPerFrame:20,priority:2},remote:{maxRetryCount:4}};let Nl;!function(e){e.RESOURCES="resources",e.MAIN="main",e.START_SCENE="start-scene"}(Nl||(Nl={}));class Dl{static create(e){let t;return 0!==Dl._deadPool.length?(t=Dl._deadPool.pop(),t.set(e)):t=new Dl(e),t}constructor(e){this.id=Dl._taskId++,this.onComplete=null,this.onProgress=null,this.onError=null,this.source=null,this.output=null,this.input=null,this.progress=null,this.options=null,this.isFinish=!0,this.set(e)}set(e=Object.create(null)){this.onComplete=e.onComplete||null,this.onProgress=e.onProgress||null,this.onError=e.onError||null,this.source=this.input=e.input,this.output=null,this.progress=e.progress,this.options=e.options||Object.create(null)}dispatch(e,t,n,i,o){switch(e){case"complete":this.onComplete&&this.onComplete(t,n);break;case"progress":this.onProgress&&this.onProgress(t,n,i,o);break;case"error":this.onError&&this.onError(t,n,i,o);break;default:{const a=`on${e[0].toUpperCase()}${e.substr(1)}`;"function"==typeof this[a]&&this[a](t,n,i,o);break}}}recycle(){Dl._deadPool.length!==Dl.MAX_DEAD_NUM&&(this.onComplete=null,this.onProgress=null,this.onError=null,this.source=this.output=this.input=null,this.progress=null,this.options=null,Dl._deadPool.push(this))}}Dl.MAX_DEAD_NUM=500,Dl._taskId=0,Dl._deadPool=[];const Ml="0123456789abcdef".split(""),Ol=["","","",""],zl=Ol.concat(Ol,"-",Ol,"-",Ol,"-",Ol,"-",Ol,Ol,Ol),Ll=zl.map(((e,t)=>"-"===e?NaN:t)).filter(isFinite);function Fl(e){const t=e.split("@")[0];if(22!==t.length)return e;zl[0]=e[0],zl[1]=e[1];for(let t=2,n=2;t<22;t+=2){const i=Ye[e.charCodeAt(t)],o=Ye[e.charCodeAt(t+1)];zl[Ll[n++]]=Ml[i>>2],zl[Ll[n++]]=Ml[(3&i)<<2|o>>4],zl[Ll[n++]]=Ml[15&o]}return e.replace(t,zl.join(""))}const Ul=/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-@]{8,}).*/;function Bl(e){const t=Ul.exec(e);return t?t[1]:""}function kl(e,t){(t=t||Object.create(null)).__isNative__=t.isNative,t.ext=t.nativeExt;const n=El.find((t=>!!t.getAssetInfo(e)));return n&&(t.bundle=n.name),Vl(e,t)}function jl(e){return!!e&&(e instanceof c.SceneAsset||e instanceof c.Scene)}function Gl(e){return e&&(46===e.charCodeAt(0)&&47===e.charCodeAt(1)?e=e.slice(2):47===e.charCodeAt(0)&&(e=e.slice(1))),e}function Vl(e,t){const n=Dl.create({input:e,options:t}),i=[];try{const e=Pl.sync(n);for(const t of e){const e=t.url;t.recycle(),i.push(e)}}catch(e){for(const e of n.output)e.recycle();y(e.message,e.stack)}return n.recycle(),i.length>1?i:i[0]}var Hl=Object.freeze({__proto__:null,getUuidFromURL:Bl,getUrlWithUuid:kl,isScene:jl,normalize:Gl,transform:Vl,decodeUuid:Fl});class Wl{constructor(e,t){this.type=void 0,this.bubbles=void 0,this.target=null,this.currentTarget=null,this.eventPhase=0,this.propagationStopped=!1,this.propagationImmediateStopped=!1,this.type=e,this.bubbles=!!t}unuse(){this.type=Wl.NO_TYPE,this.target=null,this.currentTarget=null,this.eventPhase=Wl.NONE,this.propagationStopped=!1,this.propagationImmediateStopped=!1}reuse(e,t){this.type=e,this.bubbles=t||!1}isStopped(){return this.propagationStopped||this.propagationImmediateStopped}getCurrentTarget(){return this.currentTarget}getType(){return this.type}}e("dw",Wl),Wl.NO_TYPE="no_type",Wl.TOUCH="touch",Wl.MOUSE="mouse",Wl.KEYBOARD="keyboard",Wl.ACCELERATION="acceleration",Wl.NONE=0,Wl.CAPTURING_PHASE=1,Wl.AT_TARGET=2,Wl.BUBBLING_PHASE=3,c.Event=Wl;const ql=new class{constructor(){this._finalizationRegistry=null}registerGCObject(e){return e}unregisterGCObject(e){}init(){}finalizationRegistryCallback(e){e.destroy()}destroy(){}};var Yl;let Xl=Rc("cc.GCObject")(Yl=class extends Lt{constructor(...e){return super(...e),ql.registerGCObject(this)}equals(e){return!!e&&e===this}destroy(){return ql.unregisterGCObject(this),super.destroy()}})||Yl;var Ql,Kl,Zl,Jl;let $l=e("bK",Rc("cc.Asset")((Jl=class extends(qt(Xl)){static deserialize(e){return c.deserialize(e)}get nativeUrl(){if(!this._nativeUrl){if(!this._native)return"";const e=this._native;if(47===e.charCodeAt(0))return e.slice(1);46===e.charCodeAt(0)?this._nativeUrl=kl(this._uuid,{nativeExt:e,isNative:!0}):this._nativeUrl=kl(this._uuid,{__nativeName__:e,nativeExt:Ii(e),isNative:!0})}return this._nativeUrl}get _nativeAsset(){return this._file}set _nativeAsset(e){this._file=e}constructor(...e){super(...e),this.loaded=!0,dc(this,"_native",Zl,this),this._nativeUrl="",this._file=null,this._ref=0,Object.defineProperty(this,"_uuid",{value:"",writable:!0})}toString(){return this.nativeUrl}serialize(){}_setRawAsset(e,t=!0){this._native=!1!==t?e||"":`/${e}`}get _nativeDep(){if(this._native)return{__isNative__:!0,uuid:this._uuid,ext:this._native}}get refCount(){return this._ref}addRef(){return this._ref++,this}decRef(e=!0){return this._ref>0&&this._ref--,e&&c.assetManager._releaseManager.tryRelease(this),this}onLoaded(){}initDefault(e){e&&(this._uuid=e),this.isDefault=!0}validate(){return!0}destroy(){return x(O(12101,this._uuid)),super.destroy()}},Zl=vc((Kl=Jl).prototype,"_native",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),vc(Kl.prototype,"_nativeAsset",[Oc],Object.getOwnPropertyDescriptor(Kl.prototype,"_nativeAsset"),Kl.prototype),Ql=Kl))||Ql);var e_,t_,n_;$l.prototype.createNode=null,c.Asset=$l;let i_=e("fa",Rc("cc.Script")(e_=class extends $l{})||e_);c._Script=i_;let o_=e("fb",Rc("cc.JavaScript")(t_=class extends i_{})||t_);c._JavaScript=o_;let a_=e("fc",Rc("cc.TypeScript")(n_=class extends i_{})||n_);var r_,s_,c_,l_,__,u_,f_,h_,p_,m_,d_;c._TypeScript=a_;const v_=new K("Comp"),g_=Lt.Flags.IsOnLoadCalled;let y_=e("cc",(r_=Rc("cc.Component"),s_=Yc(),c_=rl(i_),l_=Xc(),r_((d_=m_=class extends Lt{constructor(...e){super(...e),dc(this,"node",f_,this),dc(this,"_enabled",h_,this),dc(this,"__prefab",p_,this),this._sceneGetter=null,this._id=v_.getNewId()}get name(){if(this._name)return this._name;let e=ce(this);const t=e.lastIndexOf(".");return t>=0&&(e=e.slice(t+1)),`${this.node.name}<${e}>`}set name(e){this._name=e}get uuid(){return this._id}get __scriptAsset(){return null}get enabled(){return this._enabled}set enabled(e){if(this._enabled!==e&&(this._enabled=e,this.node.activeInHierarchy)){const t=c.director._compScheduler;e?t.enableComp(this):t.disableComp(this)}}get enabledInHierarchy(){return this._enabled&&this.node&&this.node.activeInHierarchy}get _isOnLoadCalled(){return this._objFlags&g_}_getRenderScene(){return this._sceneGetter?this._sceneGetter():this.node.scene._renderScene}addComponent(e){return this.node.addComponent(e)}getComponent(e){return this.node.getComponent(e)}getComponents(e){return this.node.getComponents(e)}getComponentInChildren(e){return this.node.getComponentInChildren(e)}getComponentsInChildren(e){return this.node.getComponentsInChildren(e)}destroy(){return!!super.destroy()&&(this._enabled&&this.node.activeInHierarchy&&c.director._compScheduler.disableComp(this),!0)}_onPreDestroy(){this.unscheduleAllCallbacks(),c.director._nodeActivator.destroyComp(this),this.node._removeComponent(this)}_instantiate(e){return e||(e=c.instantiate._clone(this,this)),e&&(e.node=null),e}schedule(e,t=0,n=c.macro.REPEAT_FOREVER,i=0){D(e,1619),D((t=t||0)>=0,1620),n=Number.isNaN(n)?c.macro.REPEAT_FOREVER:n,i=i||0;const o=c.director.getScheduler(),a=o.isTargetPaused(this);o.schedule(e,this,t,n,i,a)}scheduleOnce(e,t=0){this.schedule(e,0,0,t)}unschedule(e){e&&c.director.getScheduler().unschedule(e,this)}unscheduleAllCallbacks(){c.director.getScheduler().unscheduleAllForTarget(this)}},m_.system=null,vc((u_=d_).prototype,"__scriptAsset",[s_,c_,l_,tl],Object.getOwnPropertyDescriptor(u_.prototype,"__scriptAsset"),u_.prototype),f_=vc(u_.prototype,"node",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h_=vc(u_.prototype,"_enabled",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p_=vc(u_.prototype,"__prefab",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),__=u_))||__));const A_=y_.prototype;var x_,b_,C_;A_.update=null,A_.lateUpdate=null,A_.__preload=null,A_.onLoad=null,A_.start=null,A_.onEnable=null,A_.onDisable=null,A_.onDestroy=null,A_.onFocusInEditor=null,A_.onLostFocusInEditor=null,A_.resetInEditor=null,A_._getLocalBounds=null,A_.onRestore=null,y_._requireComponent=null,y_._executionOrder=0,ie(y_,"_registerEditorProps",((e,t)=>{const n=t.requireComponent;n&&(e._requireComponent=n);const i=t.executionOrder;i&&"number"==typeof i&&(e._executionOrder=i)})),c.Component=y_;let S_=e("fP",Rc("cc.MissingScript")(x_=Gc()((C_=vc((b_=class extends y_{static safeFindClass(e){const t=De(e);if(t)return t;c.deserialize.reportMissingClass(e)}constructor(){super(),dc(this,"_$erialized",C_,this)}onLoad(){P(4600,this.node.name)}}).prototype,"_$erialized",[zc,Lc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x_=b_))||x_)||x_);c._MissingScript=S_;const E_=e("f4",Symbol("[[Serialize]]")),w_=e("f3",Symbol("[[Deserialize]]"));class T_{constructor(e,t){this._document=void 0,this._chunks=void 0,this._document=e,this._chunks=t}get document(){return this._document}get chunks(){return this._chunks}}function P_(e){const t=e;return{chunks:t.chunks,document:t.document}}function I_(e){if(e.length<16)throw new R_(O(13102));const t=new DataView(e.buffer,e.byteOffset,e.byteLength);if(1313817411!==t.getUint32(0,!0))throw new R_(O(13100));const n=t.getUint32(4,!0);if(1!==n)throw new R_(O(13101,n));if(t.getUint32(8,!0)!==t.byteLength)throw new R_(O(13102));let i=12;const o=t.getUint32(i,!0);i+=4;const a=new Uint8Array(t.buffer,i+t.byteOffset,o);i+=o;const r=function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);if("Buffer"in globalThis){const{Buffer:t}=globalThis;return t.from(e.buffer,e.byteOffset,e.byteLength).toString()}throw new Error(O(13104))}(a);let s;try{s=JSON.parse(r)}catch(e){throw new R_(e)}const c=[];for(;i<t.byteLength;){i%8!=0&&(i+=8-i%8);const e=t.getUint32(i,!0);i+=4,c.push(new Uint8Array(t.buffer,i+t.byteOffset,e)),i+=e}if(i!==t.byteLength)throw new R_(O(13102));return new T_(s,c)}class R_ extends Error{}function N_(e,t,n,i,o){if(t instanceof c.ValueType){o||e.push("if(prop){");const i=ce(t);e.push(`s._deserializeFastDefinedObject(o${n},prop,${i});`),o||e.push(`}else o${n}=null;`)}else e.push(`\nif (prop) {\n    s._deserializeAndAssignField(o, prop, ${i});\n} else {\n    o${n}=null;\n}\n`)}c.internal.parseCCONJson=P_,c.internal.decodeCCONBinary=I_,c.internal.CCON=T_;const D_="$_$type",M_="$_$default",O_="$_$formerlySerializedAs";class z_{constructor(e,t,n,i,o){this.deserializedList=void 0,this.deserializedData=void 0,this._ignoreEditorOnly=void 0,this.result=e,this.customEnv=i,this.deserializedList=[],this.deserializedData=null,this._classFinder=t,this._reportMissingClass=n,this._onDereferenced=null==t?void 0:t.onDereferenced}reset(e,t,n,i,o){this.result=e,this.customEnv=i,this._classFinder=t,this._reportMissingClass=n,this._onDereferenced=null==t?void 0:t.onDereferenced}clear(){this.result=null,this.customEnv=null,this.deserializedList.length=0,this.deserializedData=null,this._classFinder=null,this._reportMissingClass=null,this._onDereferenced=null}deserialize(e){let t,n=!1;e instanceof T_?(n=!0,t=e.document,e.chunks.length>0&&(e.chunks.length,this._mainBinChunk=e.chunks[0])):t=e,this._serializedData=t,this._context={fromCCON:n};const i=Array.isArray(t)?t[0]:t;return this.deserializedData=this._deserializeObject(i,0),this._serializedData=void 0,this._mainBinChunk=void 0,this._context=void 0,this.deserializedData}_deserializeObject(e,t,n,i){switch(e.__type__){case"TypedArray":return this._deserializeTypedArrayView(e);case"TypedArrayRef":return this._deserializeTypedArrayViewRef(e);default:return e.__type__?this._deserializeTypeTaggedObject(e,t,n,i):Array.isArray(e)?this._deserializeArray(e):this._deserializePlainObject(e)}}_deserializeTypedArrayView(e){return globalThis[e.ctor].from(e.array)}_deserializeTypedArrayViewRef(e){const{offset:t,length:n,ctor:i}=e;return new globalThis[i](this._mainBinChunk.buffer,this._mainBinChunk.byteOffset+t,n)}_deserializeArray(e){const t=new Array(e.length);let n;for(let i=0;i<e.length;i++)n=e[i],"object"==typeof n&&n?this._deserializeAndAssignField(t,n,`${i}`)&&(t[i]=null):t[i]=n;return t}_deserializePlainObject(e){const t={};return this._fillPlainObject(t,e),t}_deserializeTypeTaggedObject(e,t,n,i){const o=e.__type__,a=this._classFinder(o,e,n,i);if(!a)return this._classFinder===De&&this._reportMissingClass(o),null;{const n=(e=>{const n=new e;return t>=0&&(this.deserializedList[t]=n),n})(a);return this._deserializeInto(e,n,a),n}}_deserializeInto(e,t,n,i=!1){i||!t[w_]?t._deserialize?t._deserialize(e.content,this):c.Class._isCCClass(n)?this._deserializeFireClass(t,e,n):this._deserializeFastDefinedObject(t,e,n):this._runCustomizedDeserialize(e,t,n)}_runCustomizedDeserialize(e,t,n){const i={readProperty:t=>{const n=e[t];return"object"==typeof n&&n?this._deserializeObjectField(n):n},readThis:()=>{this._deserializeInto(e,t,n,!0)},readSuper:()=>{const i=Ae(n);i&&this._deserializeInto(e,t,i)}};t[w_](i,this._context)}_deserializeFireClass(e,t,n){let i;n.hasOwnProperty("__deserialize__")?i=n.__deserialize__:(i=function(e,t){const n=st(t),i=t.__values__,o=["var prop;"],a=We.test(Oe(t));for(let e=0;e<i.length;e++){const t=i[e];let r,s;Rt.IDENTIFIER_RE.test(t)?(s=`"${t}"`,r=`.${t}`):(s=Rt.escapeForJS(t),r=`[${s}]`);let c=r;if(n[t+O_]){const e=n[t+O_];c=Rt.IDENTIFIER_RE.test(e)?`.${e}`:`[${Rt.escapeForJS(e)}]`}o.push(`prop=d${c};`),o.push('if(typeof (prop)!=="undefined"){');const l=Rt.getDefault(n[t+M_]);if(a){let e;const i=n[t+D_];if(void 0===l&&i)e=i instanceof lt;else{const t=typeof l;e="string"===t||"number"===t||"boolean"===t}e?o.push(`o${r}=prop;`):N_(o,l,r,s,!0)}else o.push(`if(typeof (prop)!=="object"){o${r}=prop;}else{`),N_(o,l,r,s,!1),o.push("}");o.push("}")}return(c.js.isChildClassOf(t,c._BaseNode)||c.js.isChildClassOf(t,c.Component))&&o.push("d._id&&(o._id=d._id);"),"_$erialized"===i[i.length-1]&&(o.push("o._$erialized=JSON.parse(JSON.stringify(d));"),o.push("s._fillPlainObject(o._$erialized,d);")),Function("s","o","d","k",o.join(""))}(0,n),ie(n,"__deserialize__",i,!0)),i(this,e,t,n)}_deserializeAndAssignField(e,t,n){const i=t.__id__;if("number"==typeof i){const t=this.deserializedList[i];if(t)e[n]=t;else{var o;const t=this._serializedData[i];e[n]=this._deserializeObject(t,i,void 0,n),null===(o=this._onDereferenced)||void 0===o||o.call(this,this.deserializedList,i,e,n)}}else{const i=t.__uuid__;if(i){const o=t.__expectedType__;this.result.push(e,n,i,o)}else e[n]=this._deserializeObject(t,-1)}return!1}_deserializeObjectField(e){const t=e.__id__;if("number"==typeof t){const e=this.deserializedList[t];if(e)return e;{const e=this._serializedData[t];return this._deserializeObject(e,t,void 0,void 0)}}if(e.__uuid__)throw e.__expectedType__,new Error("Asset reference field serialization is currently not supported in custom serialization.");return this._deserializeObject(e,-1)}_fillPlainObject(e,t){for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n];"object"!=typeof i?"__type__"!==n&&(e[n]=i):i?this._deserializeAndAssignField(e,i,n)&&(e[n]=null):e[n]=null}}_deserializeFastDefinedObject(e,t,n){if(n===c.Vec2)return e.x=t.x||0,void(e.y=t.y||0);if(n===c.Vec3)return e.x=t.x||0,e.y=t.y||0,void(e.z=t.z||0);if(n===c.Color){e.r=t.r||0,e.g=t.g||0,e.b=t.b||0;const n=t.a;return void(e.a=void 0===n?255:n)}if(n===c.Size)return e.width=t.width||0,void(e.height=t.height||0);const i=st(n),o=n.__values__;for(let n=0;n<o.length;n++){const a=o[n];let r=t[a];void 0!==r||t.hasOwnProperty(a)||(r=Rt.getDefault(i[a+M_])),"object"!=typeof r?e[a]=r:r?this._deserializeAndAssignField(e,r,a):e[a]=null}}}z_.pool=new class extends ze{constructor(){super((e=>{e.clear()}),1)}get(e,t,n,i,o){const a=this._get();return a?(a.reset(e,t,n,i,o),a):new z_(e,t,n,i,o)}};const L_=[si,Gn,ui,Qn,Un,pi,di,ii];function F_(e,t){e.x=t[1],e.y=t[2],e.z=t[3],e.w=t[4]}const U_=[(e,t)=>{e.x=t[1],e.y=t[2]},(e,t)=>{e.x=t[1],e.y=t[2],e.z=t[3]},F_,F_,(e,t)=>{e._val=t[1]},(e,t)=>{e.width=t[1],e.height=t[2]},(e,t)=>{e.x=t[1],e.y=t[2],e.width=t[3],e.height=t[4]},(e,t)=>{ii.fromArray(e,t,1)}];class B_{constructor(){this.uuidObjList=null,this.uuidPropList=null,this.uuidList=null,this.uuidTypeList=[]}init(e){e?(this.uuidObjList=e[8],this.uuidPropList=e[9],this.uuidList=e[10]):this.uuidList||(this.uuidList=[],this.uuidObjList=[],this.uuidPropList=[],this.uuidTypeList=[])}reset(){this.uuidList&&(this.uuidList.length=0,this.uuidObjList.length=0,this.uuidPropList.length=0,this.uuidTypeList.length=0)}push(e,t,n,i){this.uuidObjList.push(e),this.uuidPropList.push(t),this.uuidList.push(n),this.uuidTypeList.push(i||"")}}function k_(e,t){const n=e[4][t[0]],i=n[0],o=new(0,i[0]),a=i[1],r=i[2],s=n[n.length-1];let c=1;for(;c<s;++c)o[a[n[c]]]=t[c];for(;c<t.length;++c){const s=a[n[c]],l=i[n[c]+r];(0,q_[l])(e,o,s,t[c])}return o}function j_(e,t,n){const i=new t;return i._deserialize?i._deserialize(n,e[0]):R(5303,ce(t)),i}function G_(e,t,n,i){i>=0?t[n]=e[5][i]:e[7][3*~i]=t}function V_(e){return(t,n,i,o)=>{n[i]=o;for(let n=0;n<o.length;++n)e(t,o,n,o[n])}}function H_(e,t,n,i){t[n]=null,e[8][i]=t}function W_(e,t,n,i){t[n]=k_(e,i)}e("e$",B_),B_.pool=new ze((e=>{e.reset()}),5),B_.pool.get=function(){return this._get()||new B_};const q_=new Array(13);function Y_(e,t,n){return e||n(t),Object}function X_(e,t,n,i,o,a,r){let s=e(t);if(!s){if(o)return void(n[i]=(c=n,l=i,_=t,function(){const t=e(_)||Y_(a,_,r);return c[l]=t,new t}));s=Y_(a,t,r)}var c,l,_;n[i]=s}function Q_(e,t,n,i){const o=n||De,a=e[3];for(let e=0;e<a.length;++e){const r=a[e];"string"!=typeof r?X_(o,r[0],r,0,t,n,i):X_(o,r,a,e,t,n,i)}}function K_(e){const t=e[4];if(t){const n=e[3];for(let e=0;e<t.length;++e){const i=t[e];i[0]=n[i[0]]}}}function Z_(e,t,n){"string"==typeof e&&(e=JSON.parse(e));const i=!t;let o;if(t=t||B_.pool.get(),function(e){if(Array.isArray(e)){const t=e[0];return"number"==typeof t||t instanceof J_}return!1}(e)){t.init(e),n=n||{};let i=e[0],r=!1;if("object"==typeof i&&(r=i.preprocessed,i=i.version),i<1)throw new Error(O(5304,i));var a;n._version=i,n.result=t,e[0]=n,r||(Q_(e,!1,n.classFinder,null!==(a=n.reportMissingClass)&&void 0!==a?a:Z_.reportMissingClass),K_(e)),c.game._isCloning=!0;const s=e[5],l=function(e){const t=e[5],n=e[6],i=0===n?0:n.length;let o=t[t.length-1],a=t.length-i;"number"!=typeof o?o=0:(o<0&&(o=~o),--a);let r=0;for(;r<a;++r)t[r]=k_(e,t[r]);const s=e[3];for(let o=0;o<i;++o,++r){let i=n[o];const a=t[r];if(i>=0){const n=s[i];t[r]=j_(e,n,a)}else i=~i,(0,q_[i])(e,t,r,a)}return o}(e);c.game._isCloning=!1,e[7]&&function(e,t,n){const i=e.length-1;let o=0;const a=3*e[i];for(;o<a;o+=3){const i=e[o],a=t[e[o+2]],r=e[o+1];r>=0?i[n[r]]=a:i[~r]=a}for(;o<i;o+=3){const i=t[e[o]],a=t[e[o+2]],r=e[o+1];r>=0?i[n[r]]=a:i[~r]=a}}(e[7],s,e[2]),function(e){const t=e[5],n=e[2],i=e[1],o=e[8],a=e[9],r=e[10];for(let e=0;e<o.length;++e){const s=o[e];"number"==typeof s&&(o[e]=t[s]);let c=a[e];"number"==typeof c&&(c=c>=0?n[c]:~c,a[e]=c);const l=r[e];"number"==typeof l&&(r[e]=i[l])}}(e),o=s[l]}else o=function(e,t,n){var i;const o=(n=n||{}).classFinder||De,a=n.createAssetRefs||Si.platform===G.EDITOR_CORE,r=n.customEnv,s=n.ignoreEditorOnly,l=null!==(i=n.reportMissingClass)&&void 0!==i?i:c.deserialize.reportMissingClass;t.init();const _=z_.pool.get(t,o,l,r,s);c.game._isCloning=!0;const u=_.deserialize(e);return c.game._isCloning=!1,z_.pool.put(_),a&&t.assignAssetsBy(EditorExtends.serialize.asAsset),u}(e,t,n);return i&&B_.pool.put(t),o}q_[0]=function(e,t,n,i){t[n]=i},q_[1]=G_,q_[2]=V_(G_),q_[3]=V_(H_),q_[4]=W_,q_[5]=function(e,t,n,i){U_[i[0]](t[n],i)},q_[6]=H_,q_[7]=function(e,t,n,i){t[n].set(i)},q_[8]=function(e,t,n,i){const o=new L_[i[0]];U_[i[0]](o,i),t[n]=o},q_[9]=V_(W_),q_[10]=function(e,t,n,i){const o=e[3][i[0]];t[n]=j_(e,o,i[1])},q_[11]=function(e,t,n,i){const o=i[0];t[n]=o;for(let t=1;t<i.length;t+=3){const n=i[t],a=i[t+1],r=i[t+2];(0,q_[a])(e,o,n,r)}},q_[12]=function(e,t,n,i){const o=i[0];t[n]=o;for(let t=0;t<o.length;++t){const n=o[t],a=i[t+1];0!==a&&(0,q_[a])(e,o,t,n)}},Z_.Details=B_,Z_.reportMissingClass=function(e){P(5302,e)};class J_{constructor(e){this.preprocessed=!0,this.version=e}}function $_(e,t,n){return[1,0,0,[e],0,n?[t,-1]:[t],[0],0,[],[],[]]}c.deserialize=Z_;const eu=Lt.Flags.Destroyed,tu=Lt.Flags.PersistentMask,nu=[];function iu(e){let t;if(e instanceof Lt){if(e._instantiate)return c.game._isCloning=!0,t=e._instantiate(null,!0),c.game._isCloning=!1,t;if(e instanceof c.Asset)throw new TypeError(O(6903))}return c.game._isCloning=!0,t=ou(e),c.game._isCloning=!1,t}function ou(e,t){let n;n=e._iN$t?e._iN$t:e.constructor?new(0,e.constructor):Object.create(null),au(e,n,t);for(let e=0,t=nu.length;e<t;++e)nu[e]._iN$t=null;return nu.length=0,n}function au(e,t,n){Fe.value(e,"_iN$t",t,!0),nu.push(e);const i=e.constructor;if(c.Class._isCCClass(i))!function(e,t,n,i){const o=e.__values__;for(let e=0;e<o.length;e++){const a=o[e],r=t[a];if("object"==typeof r&&r){const e=n[a];e instanceof Ve&&e.constructor===r.constructor?e.set(r):n[a]=r._iN$t||ru(r,i)}else n[a]=r}}(i,e,t,n);else for(const i in e){if(!e.hasOwnProperty(i)||95===i.charCodeAt(0)&&95===i.charCodeAt(1)&&"__type__"!==i)continue;const o=e[i];if("object"==typeof o&&o){if(o===t)continue;t[i]=o._iN$t||ru(o,n)}else t[i]=o}e instanceof Lt&&(t._objFlags&=tu)}function ru(e,t){if(e instanceof Ve)return e.clone();if(e instanceof c.Asset)return e;let n;if(ArrayBuffer.isView(e)){const t=e.length;n=new e.constructor(t),e._iN$t=n,nu.push(e);for(let i=0;i<t;++i)n[i]=e[i];return n}if(Array.isArray(e)){const i=e.length;n=new Array(i),e._iN$t=n,nu.push(e);for(let o=0;o<i;++o){const i=e[o];n[o]="object"==typeof i&&i?i._iN$t||ru(i,t):i}return n}if(e._objFlags&eu)return null;const i=e.constructor;if(c.Class._isCCClass(i)){if(t)if(t instanceof c.Component){if(e instanceof c._BaseNode||e instanceof c.Component)return e}else if(t instanceof c._BaseNode)if(e instanceof c._BaseNode){if(!e.isChildOf(t))return e}else if(e instanceof c.Component&&e.node&&!e.node.isChildOf(t))return e;n=new i}else if(i===Object)n={};else{if(i)return e;n=Object.create(null)}return au(e,n,t),n}var su,cu,lu,_u,uu,fu,hu,pu;let mu,du;function vu(e,t){return(t<<3)+e}function gu(e){return Au[e]}function yu(e){switch(e){case mu.Uint8:return Uint8Array;case mu.Uint16:return Uint16Array;case mu.Uint32:return Uint32Array;case mu.Int8:return Int8Array;case mu.Int16:return Int16Array;case mu.Int32:return Int32Array;case mu.Float32:return Float32Array;case mu.Float64:return Float64Array}}iu._clone=ou,c.instantiate=iu,function(e){e[e.Uint8=0]="Uint8",e[e.Uint16=1]="Uint16",e[e.Uint32=2]="Uint32",e[e.Int8=3]="Int8",e[e.Int16=4]="Int16",e[e.Int32=5]="Int32",e[e.Float32=6]="Float32",e[e.Float64=7]="Float64"}(mu||(mu={})),function(e){e[e.Scalar=0]="Scalar",e[e.Vec2=1]="Vec2",e[e.Vec3=2]="Vec3",e[e.Vec4=3]="Vec4",e[e.Quat=4]="Quat",e[e.Mat4=5]="Mat4"}(du||(du={})),e("f1",Rc("cc.CompactValueTypeArray")((pu=hu=class e{constructor(){dc(this,"_byteOffset",lu,this),dc(this,"_unitCount",_u,this),dc(this,"_unitElement",uu,this),dc(this,"_length",fu,this)}static lengthFor(e,t,n){return gu(t).requiredUnits*e.length*yu(n).BYTES_PER_ELEMENT}static compress(t,n,i,o,a,r){const s=gu(n),c=yu(i),l=s.requiredUnits*t.length,_=new c(o,a,l);for(let e=0;e<t.length;++e)s.compress(_,e,t[e]);const u=new e;return u._unitElement=vu(i,n),u._byteOffset=r,u._unitCount=l,u._length=t.length,u}decompress(e){const{storageUnit:t,elementType:n}={storageUnit:7&(i=this._unitElement),elementType:i>>3};var i;const o=gu(n),a=new(yu(t))(e,this._byteOffset,this._unitCount),r=new Array(this._length);for(let e=0;e<this._length;++e)r[e]=o.decompress(a,e);return r}},hu.StorageUnit=mu,hu.ElementType=du,lu=vc((cu=pu).prototype,"_byteOffset",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_u=vc(cu.prototype,"_unitCount",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),uu=vc(cu.prototype,"_unitElement",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return vu(mu.Uint8,du.Scalar)}}),fu=vc(cu.prototype,"_length",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),su=cu))||su);const Au={[du.Scalar]:{requiredUnits:1,compress(e,t,n){e[t]=n},decompress:(e,t)=>e[t]},[du.Vec2]:{requiredUnits:2,compress(e,t,n){e[2*t]=n.x,e[2*t+1]=n.y},decompress:(e,t)=>new Gn(e[2*t],e[2*t+1])},[du.Vec3]:{requiredUnits:3,compress(e,t,n){e[3*t]=n.x,e[3*t+1]=n.y,e[3*t+2]=n.z},decompress:(e,t)=>new Gn(e[3*t],e[3*t+1],e[3*t+2])},[du.Vec4]:{requiredUnits:4,compress(e,t,n){e[4*t]=n.x,e[4*t+1]=n.y,e[4*t+2]=n.z,e[4*t+3]=n.w},decompress:(e,t)=>new ui(e[4*t],e[4*t+1],e[4*t+2],e[4*t+3])},[du.Quat]:{requiredUnits:4,compress(e,t,n){e[4*t]=n.x,e[4*t+1]=n.y,e[4*t+2]=n.z,e[4*t+3]=n.w},decompress:(e,t)=>new Qn(e[4*t],e[4*t+1],e[4*t+2],e[4*t+3])},[du.Mat4]:{requiredUnits:16,compress(e,t,n){ii.toArray(e,n,16*t)},decompress:(e,t)=>ii.fromArray(new ii,e,16*t)}};function xu(){return 0}function bu(e){return e}function Cu(e){return e*e}function Su(e){return e*(2-e)}function Eu(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}function wu(e){return e*e*e}function Tu(e){return--e*e*e+1}function Pu(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}function Iu(e){return e*e*e*e}function Ru(e){return 1- --e*e*e*e}function Nu(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}function Du(e){return e*e*e*e*e}function Mu(e){return--e*e*e*e*e+1}function Ou(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}function zu(e){return 1===e?1:1-Math.cos(e*Math.PI/2)}function Lu(e){return Math.sin(e*Math.PI/2)}function Fu(e){return.5*(1-Math.cos(Math.PI*e))}function Uu(e){return 0===e?0:Math.pow(1024,e-1)}function Bu(e){return 1===e?1:1-Math.pow(2,-10*e)}function ku(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}function ju(e){return 1-Math.sqrt(1-e*e)}function Gu(e){return Math.sqrt(1- --e*e)}function Vu(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}function Hu(e){let t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4))}function Wu(e){let t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin(2*(e-t)*Math.PI/.4)+1)}function qu(e){let t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin(2*(e-t)*Math.PI/.4)*.5+1)}function Yu(e){if(1===e)return 1;const t=1.70158;return e*e*((t+1)*e-t)}function Xu(e){if(0===e)return 0;const t=1.70158;return--e*e*((t+1)*e+t)+1}function Qu(e){const t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}function Ku(e){return 1-Zu(1-e)}function Zu(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Ju(e){return e<.5?.5*Ku(2*e):.5*Zu(2*e-1)+.5}function $u(e){return e<=0?0:e>=1?1:e*e*(3-2*e)}function ef(e){return e<=0?0:e>=1?1:e*e*e*(e*(6*e-15)+10)}c._decorator=yl;const tf=ff(Cu,Su),nf=ff(wu,Tu),of=ff(Iu,Ru),af=ff(Du,Mu),rf=ff(zu,Lu),sf=ff(Uu,Bu),cf=ff(ju,Gu),lf=ff(Hu,Wu),_f=ff(Yu,Xu),uf=ff(Ku,Zu);function ff(e,t){return n=>n<.5?t(2*n)/2:e(2*n-1)/2+.5}var hf=Object.freeze({__proto__:null,constant:xu,linear:bu,quadIn:Cu,quadOut:Su,quadInOut:Eu,cubicIn:wu,cubicOut:Tu,cubicInOut:Pu,quartIn:Iu,quartOut:Ru,quartInOut:Nu,quintIn:Du,quintOut:Mu,quintInOut:Ou,sineIn:zu,sineOut:Lu,sineInOut:Fu,expoIn:Uu,expoOut:Bu,expoInOut:ku,circIn:ju,circOut:Gu,circInOut:Vu,elasticIn:Hu,elasticOut:Wu,elasticInOut:qu,backIn:Yu,backOut:Xu,backInOut:Qu,bounceIn:Ku,bounceOut:Zu,bounceInOut:Ju,smooth:$u,fade:ef,quadOutIn:tf,cubicOutIn:nf,quartOutIn:of,quintOutIn:af,sineOutIn:rf,expoOutIn:sf,circOutIn:cf,elasticOutIn:lf,backOutIn:_f,bounceOutIn:uf});let pf;e("ei",hf),function(e){e[e.LINEAR=0]="LINEAR",e[e.CONSTANT=1]="CONSTANT",e[e.QUAD_IN=2]="QUAD_IN",e[e.QUAD_OUT=3]="QUAD_OUT",e[e.QUAD_IN_OUT=4]="QUAD_IN_OUT",e[e.QUAD_OUT_IN=5]="QUAD_OUT_IN",e[e.CUBIC_IN=6]="CUBIC_IN",e[e.CUBIC_OUT=7]="CUBIC_OUT",e[e.CUBIC_IN_OUT=8]="CUBIC_IN_OUT",e[e.CUBIC_OUT_IN=9]="CUBIC_OUT_IN",e[e.QUART_IN=10]="QUART_IN",e[e.QUART_OUT=11]="QUART_OUT",e[e.QUART_IN_OUT=12]="QUART_IN_OUT",e[e.QUART_OUT_IN=13]="QUART_OUT_IN",e[e.QUINT_IN=14]="QUINT_IN",e[e.QUINT_OUT=15]="QUINT_OUT",e[e.QUINT_IN_OUT=16]="QUINT_IN_OUT",e[e.QUINT_OUT_IN=17]="QUINT_OUT_IN",e[e.SINE_IN=18]="SINE_IN",e[e.SINE_OUT=19]="SINE_OUT",e[e.SINE_IN_OUT=20]="SINE_IN_OUT",e[e.SINE_OUT_IN=21]="SINE_OUT_IN",e[e.EXPO_IN=22]="EXPO_IN",e[e.EXPO_OUT=23]="EXPO_OUT",e[e.EXPO_IN_OUT=24]="EXPO_IN_OUT",e[e.EXPO_OUT_IN=25]="EXPO_OUT_IN",e[e.CIRC_IN=26]="CIRC_IN",e[e.CIRC_OUT=27]="CIRC_OUT",e[e.CIRC_IN_OUT=28]="CIRC_IN_OUT",e[e.CIRC_OUT_IN=29]="CIRC_OUT_IN",e[e.ELASTIC_IN=30]="ELASTIC_IN",e[e.ELASTIC_OUT=31]="ELASTIC_OUT",e[e.ELASTIC_IN_OUT=32]="ELASTIC_IN_OUT",e[e.ELASTIC_OUT_IN=33]="ELASTIC_OUT_IN",e[e.BACK_IN=34]="BACK_IN",e[e.BACK_OUT=35]="BACK_OUT",e[e.BACK_IN_OUT=36]="BACK_IN_OUT",e[e.BACK_OUT_IN=37]="BACK_OUT_IN",e[e.BOUNCE_IN=38]="BOUNCE_IN",e[e.BOUNCE_OUT=39]="BOUNCE_OUT",e[e.BOUNCE_IN_OUT=40]="BOUNCE_IN_OUT",e[e.BOUNCE_OUT_IN=41]="BOUNCE_OUT_IN",e[e.SMOOTH=42]="SMOOTH",e[e.FADE=43]="FADE"}(pf||(pf={}));const mf={[pf.CONSTANT]:xu,[pf.LINEAR]:bu,[pf.QUAD_IN]:Cu,[pf.QUAD_OUT]:Su,[pf.QUAD_IN_OUT]:Eu,[pf.QUAD_OUT_IN]:tf,[pf.CUBIC_IN]:wu,[pf.CUBIC_OUT]:Tu,[pf.CUBIC_IN_OUT]:Pu,[pf.CUBIC_OUT_IN]:nf,[pf.QUART_IN]:Iu,[pf.QUART_OUT]:Ru,[pf.QUART_IN_OUT]:Nu,[pf.QUART_OUT_IN]:of,[pf.QUINT_IN]:Du,[pf.QUINT_OUT]:Mu,[pf.QUINT_IN_OUT]:Ou,[pf.QUINT_OUT_IN]:af,[pf.SINE_IN]:zu,[pf.SINE_OUT]:Lu,[pf.SINE_IN_OUT]:Fu,[pf.SINE_OUT_IN]:rf,[pf.EXPO_IN]:Uu,[pf.EXPO_OUT]:Bu,[pf.EXPO_IN_OUT]:ku,[pf.EXPO_OUT_IN]:sf,[pf.CIRC_IN]:ju,[pf.CIRC_OUT]:Gu,[pf.CIRC_IN_OUT]:Vu,[pf.CIRC_OUT_IN]:cf,[pf.ELASTIC_IN]:Hu,[pf.ELASTIC_OUT]:Wu,[pf.ELASTIC_IN_OUT]:qu,[pf.ELASTIC_OUT_IN]:lf,[pf.BACK_IN]:Yu,[pf.BACK_OUT]:Xu,[pf.BACK_IN_OUT]:Qu,[pf.BACK_OUT_IN]:_f,[pf.BOUNCE_IN]:Ku,[pf.BOUNCE_OUT]:Zu,[pf.BOUNCE_IN_OUT]:Ju,[pf.BOUNCE_OUT_IN]:uf,[pf.SMOOTH]:$u,[pf.FADE]:ef};function df(e){return mf[e]}var vf,gf,yf,Af,xf,bf,Cf,Sf,Ef,wf,Tf,Pf,If,Rf;let Nf=Rc("cc.RealKeyframeValue")(vf=Uc((yf=vc((gf=class extends gl{constructor({interpolationMode:e,tangentWeightMode:t,value:n,rightTangent:i,rightTangentWeight:o,leftTangent:a,leftTangentWeight:r,easingMethod:s,[Mt]:c}={}){super(),dc(this,"interpolationMode",yf,this),dc(this,"tangentWeightMode",Af,this),dc(this,"value",xf,this),dc(this,"rightTangent",bf,this),dc(this,"rightTangentWeight",Cf,this),dc(this,"leftTangent",Sf,this),dc(this,"leftTangentWeight",Ef,this),dc(this,"easingMethod",wf,this),this.value=null!=n?n:this.value,this.rightTangent=null!=i?i:this.rightTangent,this.rightTangentWeight=null!=o?o:this.rightTangentWeight,this.leftTangent=null!=a?a:this.leftTangent,this.leftTangentWeight=null!=r?r:this.leftTangentWeight,this.interpolationMode=null!=e?e:this.interpolationMode,this.tangentWeightMode=null!=t?t:this.tangentWeightMode,this.easingMethod=null!=s?s:this.easingMethod,c&&(this[Mt]=c)}}).prototype,"interpolationMode",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return hl.LINEAR}}),Af=vc(gf.prototype,"tangentWeightMode",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ml.NONE}}),xf=vc(gf.prototype,"value",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),bf=vc(gf.prototype,"rightTangent",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Cf=vc(gf.prototype,"rightTangentWeight",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Sf=vc(gf.prototype,"leftTangent",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ef=vc(gf.prototype,"leftTangentWeight",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wf=vc(gf.prototype,"easingMethod",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pf.LINEAR}}),vf=gf))||vf)||vf;function Df(e){return new Nf("number"==typeof e?{value:e}:e)}let Mf=e("dE",Rc("cc.RealCurve")((If=vc((Pf=class extends dl{constructor(...e){super(...e),dc(this,"preExtrapolation",If,this),dc(this,"postExtrapolation",Rf,this)}evaluate(e){const{_times:t,_values:n}=this,i=t.length;if(0===i)return 0;const o=t[0],a=t[i-1];if(e<o){const{preExtrapolation:r}=this,s=n[0];if(r===pl.CLAMP||i<2)return s.value;switch(r){case pl.LINEAR:return Qf(o,n[0].value,t[1],n[1].value,e);case pl.LOOP:e=Yf(e,o,a);break;case pl.PING_PONG:e=Xf(e,o,a);break;default:return s.value}}else if(e>a){const{postExtrapolation:r}=this,s=n[i-1];if(r===pl.CLAMP||i<2)return s.value;switch(r){case pl.LINEAR:return Qf(a,s.value,t[i-2],n[i-2].value,e);case pl.LOOP:e=Yf(e,o,a);break;case pl.PING_PONG:e=Xf(e,o,a);break;default:return s.value}}const r=xc(t,e);if(r>=0)return n[r].value;const s=~r,c=s-1,l=t[c],_=n[c],u=t[s];return function(e,t,n,i,o){const a=n-e;switch(t.interpolationMode){default:case hl.CONSTANT:return t.value;case hl.LINEAR:{const e=t.easingMethod===pf.LINEAR?o:df(t.easingMethod)(o);return xn(t.value,i.value,e)}case hl.CUBIC:{const r=1/3,{rightTangent:s,rightTangentWeight:c}=t,l=0!=(t.tangentWeightMode&ml.RIGHT),{leftTangent:_,leftTangentWeight:u}=i,f=0!=(i.tangentWeightMode&ml.LEFT);if(l||f){let h=0;if(l)h=c;else{const e=a,t=a*s;h=Math.sqrt(e*e+t*t)*r}const p=Math.atan(s),m=Math.cos(p)*h+e,d=Math.sin(p)*h+t.value;let v=0;if(f)v=u;else{const e=a,t=a*_;v=Math.sqrt(e*e+t*t)*r}const g=Math.atan(_),y=(m-e)/a,A=(-Math.cos(g)*v+n-e)/a,x=d,b=-Math.sin(g)*v+i.value,C=[0,0,0],S=function(e,t,n,i,o){const a=n/i,r=t/i,s=a*a,c=1/3*(-1/3*s+r),l=.5*(2/27*a*s-1/3*a*r+e/i),_=c*c*c,u=l*l+_;let f=0;if(vl(u)){if(vl(l))return o[0]=0,1;{const e=Math.cbrt(-l);return o[0]=2*e,o[1]=-e,2}}if(u<0){const e=1/3*Math.acos(-l/Math.sqrt(-_)),t=2*Math.sqrt(-c);o[0]=t*Math.cos(e),o[1]=-t*Math.cos(e+Math.PI/3),o[2]=-t*Math.cos(e-Math.PI/3),f=3}else{const e=Math.sqrt(u),t=Math.cbrt(e-l),n=-Math.cbrt(e+l);o[0]=t+n,f=1}const h=1/3*a;for(let e=0;e<f;++e)o[e]-=h;return f}(0-o,3*y,3*A-6*y,3*(y-A)+1,C),E=function(e,t,n){let i=n;if(1===t)i=e[0];else{i=-1/0;for(let n=0;n<t;++n){const t=e[n];t>=0&&t<=1&&t>i&&(i=t)}i===-1/0&&(i=0)}return i}(C,S,o);return Kf(t.value,x,b,i.value,E)}{const e=t.value+r*s*a,n=i.value-r*_*a;return Kf(t.value,e,n,i.value,o)}}}}(l,_,u,n[s],(e-l)/(u-l))}addKeyFrame(e,t){return super.addKeyFrame(e,Df(t))}assignSorted(e,t){if(void 0!==t)this.setKeyframes(e.slice(),t.map((e=>Df(e))));else{const t=Array.from(e);this.setKeyframes(t.map((([e])=>e)),t.map((([,e])=>Df(e))))}}isConstant(e){if(this._values.length<=1)return!0;const t=this._values[0].value;return this._values.every((n=>gn(n.value,t,e)))}[E_](e,t){if(!t.toCCON)return void e.writeThis();const{_times:n,_values:i}=this,o=n.length,a=new DataView(new ArrayBuffer(0+zf+zf+Lf+Ff*o+Hf*o));let r=0;a.setUint8(r,this.preExtrapolation),r+=zf,a.setUint8(r,this.postExtrapolation),r+=zf,a.setUint32(r,o,!0),r+=Lf,n.forEach(((e,t)=>a.setFloat32(r+Ff*t,e,!0))),r+=Ff*o;for(const e of i)r=Wf(a,e,r);const s=new Uint8Array(a.buffer,0,r);e.writeProperty("bytes",s);const c=i.map((e=>e[Mt]));c.some((e=>void 0!==e))&&e.writeProperty("keyframeValueEditorExtras",c)}[w_](e,t){if(!t.fromCCON)return void e.readThis();const n=e.readProperty("bytes"),i=new DataView(n.buffer,n.byteOffset,n.byteLength);let o=0;this.preExtrapolation=i.getUint8(o),o+=zf,this.postExtrapolation=i.getUint8(o),o+=zf;const a=i.getUint32(o,!0);o+=Lf;const r=Array.from({length:a},((e,t)=>i.getFloat32(o+Ff*t,!0)));o+=Ff*a;const s=new Array(a);for(let e=0;e<a;++e){const t=Df({});o=qf(i,t,o),s[e]=t}n.byteLength;const c=e.readProperty("keyframeValueEditorExtras");c&&(c.length,c.forEach(((e,t)=>s[t][Mt]=e))),this._times=r,this._values=s}}).prototype,"preExtrapolation",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pl.CLAMP}}),Rf=vc(Pf.prototype,"postExtrapolation",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pl.CLAMP}}),Tf=Pf))||Tf);var Of;!function(e){e[e.VALUE=1]="VALUE",e[e.INTERPOLATION_MODE=2]="INTERPOLATION_MODE",e[e.TANGENT_WEIGHT_MODE=4]="TANGENT_WEIGHT_MODE",e[e.LEFT_TANGENT=8]="LEFT_TANGENT",e[e.LEFT_TANGENT_WEIGHT=16]="LEFT_TANGENT_WEIGHT",e[e.RIGHT_TANGENT=32]="RIGHT_TANGENT",e[e.RIGHT_TANGENT_WEIGHT=64]="RIGHT_TANGENT_WEIGHT"}(Of||(Of={}));const zf=1,Lf=4,Ff=4,{interpolationMode:Uf,tangentWeightMode:Bf,leftTangent:kf,leftTangentWeight:jf,rightTangent:Gf,rightTangentWeight:Vf}=Df({}),Hf=26;function Wf(e,t,n){let i=0,o=n;const a=o;o+=4;const{value:r,interpolationMode:s,tangentWeightMode:c,rightTangent:l,rightTangentWeight:_,leftTangent:u,leftTangentWeight:f,easingMethod:h}=t;return e.setFloat32(o,r,!0),o+=4,s!==Uf&&(i|=Of.INTERPOLATION_MODE,e.setUint8(o,s),o+=1),c!==Bf&&(i|=Of.TANGENT_WEIGHT_MODE,e.setUint8(o,c),o+=1),u!==kf&&(i|=Of.LEFT_TANGENT,e.setFloat32(o,u,!0),o+=4),f!==jf&&(i|=Of.LEFT_TANGENT_WEIGHT,e.setFloat32(o,f,!0),o+=4),l!==Gf&&(i|=Of.RIGHT_TANGENT,e.setFloat32(o,l,!0),o+=4),_!==Vf&&(i|=Of.RIGHT_TANGENT_WEIGHT,e.setFloat32(o,_,!0),o+=4),i|=h<<8,e.setUint32(a,i,!0),o}function qf(e,t,n){let i=n;const o=e.getUint32(i,!0);i+=4,t.value=e.getFloat32(i,!0),i+=4,o&Of.INTERPOLATION_MODE&&(t.interpolationMode=e.getUint8(i),i+=1),o&Of.TANGENT_WEIGHT_MODE&&(t.tangentWeightMode=e.getUint8(i),i+=1),o&Of.LEFT_TANGENT&&(t.leftTangent=e.getFloat32(i,!0),i+=4),o&Of.LEFT_TANGENT_WEIGHT&&(t.leftTangentWeight=e.getFloat32(i,!0),i+=4),o&Of.RIGHT_TANGENT&&(t.rightTangent=e.getFloat32(i,!0),i+=4),o&Of.RIGHT_TANGENT_WEIGHT&&(t.rightTangentWeight=e.getFloat32(i,!0),i+=4);const a=(65280&o)>>8;return t.easingMethod=a,i}function Yf(e,t,n){return t+Nn(e-t,n-t)}function Xf(e,t,n){return t+Dn(e-t,n-t)}function Qf(e,t,n,i,o){return t+(i-t)/(n-e)*(o-e)}function Kf(e,t,n,i,o){const a=1-o;return a*a*a*e+3*a*a*o*t+3*a*o*o*n+o*o*o*i}function Zf(e,t,n,i,o){const a=1-o;return a*(a*(e+(3*t-e)*o)+3*n*o*o)+i*o*o*o}c.bezier=Zf;const Jf=Math.cos,$f=Math.acos,eh=Math.max,th=2*Math.PI,nh=Math.sqrt;function ih(e){return e<0?-Math.pow(-e,1/3):Math.pow(e,1/3)}function oh(e,t){const n=function(e,t){const n=t-0,i=t-e[0],o=3*n,a=3*i,r=3*(t-e[2]),s=1/(-n+a-r+(t-1)),c=1/3,l=(o-6*i+r)*s,_=l*c,u=(-o+a)*s,f=(3*u-l*l)*c,h=f*c,p=(2*l*l*l-9*l*u+n*s*27)/27,m=p/2,d=m*m+h*h*h;let v,g,y,A,x;if(d<0){const e=-f*c,t=nh(e*e*e),n=-p/(2*t),i=$f(n<-1?-1:n>1?1:n),o=2*ih(t);return y=o*Jf(i*c)-_,A=o*Jf((i+th)*c)-_,x=o*Jf((i+2*th)*c)-_,y>=0&&y<=1?A>=0&&A<=1?x>=0&&x<=1?eh(y,A,x):eh(y,A):x>=0&&x<=1?eh(y,x):y:A>=0&&A<=1?x>=0&&x<=1?eh(A,x):A:x}if(0===d)return v=m<0?ih(-m):-ih(m),y=2*v-_,A=-v-_,y>=0&&y<=1?A>=0&&A<=1?eh(y,A):y:A;{const e=nh(d);return v=ih(-m+e),g=ih(m+e),y=v-g-_,y}}(e,t),i=e[1];return((1-n)*(i+(e[3]-i)*n)*3+n*n)*n}var ah,rh,sh,ch,lh,_h,uh,fh,hh;let ph;c.bezierByTime=oh,function(e){e[e.SLERP=0]="SLERP",e[e.CONSTANT=1]="CONSTANT"}(ph||(ph=e("ga",{})));let mh=Rc("cc.QuatKeyframeValue")(ah=Uc((sh=vc((rh=class{constructor({value:e,interpolationMode:t,easingMethod:n}={}){dc(this,"interpolationMode",sh,this),dc(this,"value",ch,this),dc(this,"easingMethod",lh,this),this.value=e?Qn.clone(e):this.value,this.interpolationMode=null!=t?t:this.interpolationMode,this.easingMethod=null!=n?n:this.easingMethod}}).prototype,"interpolationMode",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ph.SLERP}}),ch=vc(rh.prototype,"value",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Qn.clone(Qn.IDENTITY)}}),lh=vc(rh.prototype,"easingMethod",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pf.LINEAR}}),ah=rh))||ah)||ah;function dh(e){return new mh(e)}let vh=e("g9",Rc("cc.QuatCurve")((fh=vc((uh=class extends dl{constructor(...e){super(...e),dc(this,"preExtrapolation",fh,this),dc(this,"postExtrapolation",hh,this)}evaluate(e,t){var n;null!==(n=t)&&void 0!==n||(t=new Qn);const{_times:i,_values:o,postExtrapolation:a,preExtrapolation:r}=this,s=i.length;if(0===s)return t;const c=i[0],l=i[s-1];if(e<c){const n=o[0];switch(r){case pl.LOOP:e=c+Nn(e-c,l-c);break;case pl.PING_PONG:e=c+Dn(e-c,l-c);break;case pl.CLAMP:default:return Qn.copy(t,n.value)}}else if(e>l){const n=o[s-1];switch(a){case pl.LOOP:e=c+Nn(e-c,l-c);break;case pl.PING_PONG:e=c+Dn(e-c,l-c);break;case pl.CLAMP:default:return Qn.copy(t,n.value)}}const _=xc(i,e);if(_>=0)return Qn.copy(t,o[_].value);const u=~_,f=u-1,h=i[f],p=o[f],m=i[u],d=o[u],v=(e-h)/(m-h);switch(p.interpolationMode){default:case ph.CONSTANT:return Qn.copy(t,p.value);case ph.SLERP:{const{easingMethod:e}=p,n=e===pf.LINEAR?v:Array.isArray(e)?oh(e,v):df(e)(v);return Qn.slerp(t,p.value,d.value,n)}}}addKeyFrame(e,t){const n=new mh(t);return super.addKeyFrame(e,n)}assignSorted(e,t){if(void 0!==t)this.setKeyframes(e.slice(),t.map((e=>dh(e))));else{const t=Array.from(e);this.setKeyframes(t.map((([e])=>e)),t.map((([,e])=>dh(e))))}}[E_](e,t){if(!t.toCCON)return void e.writeThis();const{_times:n,_values:i}=this;let o=!0;i.forEach(((e,t,[n])=>{o&&e.interpolationMode!==n.interpolationMode&&(o=!1)}));const a=n.length,r=Ch*(o?1:a),s=i.reduce(((e,{easingMethod:t})=>e+(Array.isArray(t)?Sh+4*wh:Sh)),0);let c=0;c+=yh+Ah+xh*a+4*bh*a+s+r+0;const l=new DataView(new ArrayBuffer(c));let _=0,u=0;o&&(u|=gh.INTERPOLATION_MODE),l.setUint32(_,u,!0),_+=yh,l.setUint32(_,a,!0),_+=Ah,n.forEach(((e,t)=>l.setFloat32(_+xh*t,e,!0))),_+=xh*a,i.forEach((({value:{x:e,y:t,z:n,w:i}},o)=>{const a=_+4*bh*o;l.setFloat32(a+0*bh,e,!0),l.setFloat32(a+1*bh,t,!0),l.setFloat32(a+2*bh,n,!0),l.setFloat32(a+3*bh,i,!0)})),_+=4*bh*a,i.forEach((({easingMethod:e})=>{Array.isArray(e)?(l.setUint8(_,Eh),++_,l.setFloat32(_+0*wh,e[0],!0),l.setFloat32(_+1*wh,e[1],!0),l.setFloat32(_+2*wh,e[2],!0),l.setFloat32(_+3*wh,e[3],!0),_+=4*wh):(l.setUint8(_,e),++_)}));const f=_;_+=r;let h=f;i.forEach((({interpolationMode:e})=>{l.setUint8(h,e),o||(h+=Ch)}));const p=new Uint8Array(l.buffer);e.writeProperty("bytes",p)}[w_](e,t){if(!t.fromCCON)return void e.readThis();const n=e.readProperty("bytes"),i=new DataView(n.buffer,n.byteOffset,n.byteLength);let o=0;const a=i.getUint32(o,!0);o+=yh;const r=a&gh.INTERPOLATION_MODE,s=i.getUint32(o,!0);o+=Ah;const c=Array.from({length:s},((e,t)=>i.getFloat32(o+xh*t,!0)));o+=xh*s;const l=o;o+=4*bh*s;const _=Array.from({length:s},((e,t)=>{const n=l+4*bh*t,a=i.getFloat32(n+0*bh,!0),r=i.getFloat32(n+1*bh,!0),s=i.getFloat32(n+2*bh,!0),c=i.getFloat32(n+3*bh,!0),_=i.getUint8(o);++o;const u=dh({value:{x:a,y:r,z:s,w:c}});return _!==Eh?u.easingMethod=_:(u.easingMethod=[i.getFloat32(o+0*wh,!0),i.getFloat32(o+1*wh,!0),i.getFloat32(o+2*wh,!0),i.getFloat32(o+3*wh,!0)],o+=4*wh),u}));if(r){const e=i.getUint8(o);++o;for(let t=0;t<s;++t)_[t].interpolationMode=e}else{for(let e=0;e<s;++e){const t=i.getUint8(o+e);_[e].interpolationMode=t}o+=s}this._times=c,this._values=_}}).prototype,"preExtrapolation",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pl.CLAMP}}),hh=vc(uh.prototype,"postExtrapolation",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pl.CLAMP}}),_h=uh))||_h);var gh;!function(e){e[e.INTERPOLATION_MODE=1]="INTERPOLATION_MODE"}(gh||(gh={}));const yh=1,Ah=4,xh=4,bh=4,Ch=1,Sh=1,Eh=255,wh=4;var Th;let Ph=e("gb",Rc("cc.ObjectCurve")(Th=class extends dl{evaluate(e){const t=this.searchKeyframe(e);if(t>=0)return this._values[t];const n=yn(~t-1,0,this._values.length-1);return this._values[n]}})||Th);var Ih,Rh,Nh,Dh,Mh;class Oh{constructor(){this.time=0,this.value=0,this.inTangent=0,this.outTangent=0}}Rt.fastDefine("cc.Keyframe",Oh,{time:0,value:0,inTangent:0,outTangent:0});class zh{constructor(){this.index=void 0,this.time=void 0,this.endTime=void 0,this.coefficient=void 0,this.index=-1,this.time=0,this.endTime=0,this.coefficient=new Float32Array(4)}evaluate(e){return t=e-this.time,n=this.coefficient,t*(t*(t*n[0]+n[1])+n[2])+n[3];var t,n}}let Lh=e("dF",Rc("cc.AnimationCurve")((Mh=Dh=class{get _internalCurve(){return this._curve}get keyFrames(){return Array.from(this._curve.keyframes()).map((([e,t])=>{const n=new Oh;return n.time=e,n.value=t.value,n.inTangent=t.leftTangent,n.outTangent=t.rightTangent,n}))}set keyFrames(e){this._curve.assignSorted(e.map((e=>[e.time,{interpolationMode:hl.CUBIC,value:e.value,leftTangent:e.inTangent,rightTangent:e.outTangent}])))}get preWrapMode(){return Uh(this._curve.preExtrapolation)}set preWrapMode(e){this._curve.preExtrapolation=Fh(e)}get postWrapMode(){return Uh(this._curve.postExtrapolation)}set postWrapMode(e){this._curve.postExtrapolation=Fh(e)}constructor(e=null){if(dc(this,"_curve",Nh,this),this.cachedKey=void 0,e instanceof Mf)this._curve=e;else{const t=new Mf;this._curve=t,t.preExtrapolation=pl.LOOP,t.postExtrapolation=pl.CLAMP,e?t.assignSorted(e.map((e=>[e.time,{interpolationMode:hl.CUBIC,value:e.value,leftTangent:e.inTangent,rightTangent:e.outTangent}]))):t.assignSorted([[0,{interpolationMode:hl.CUBIC,value:1}],[1,{interpolationMode:hl.CUBIC,value:1}]])}this.cachedKey=new zh}addKey(e){e?this._curve.addKeyFrame(e.time,{interpolationMode:hl.CUBIC,value:e.value,leftTangent:e.inTangent,rightTangent:e.outTangent}):this._curve.clear()}evaluate_slow(e){return this._curve.evaluate(e)}evaluate(e){const{cachedKey:t,_curve:n}=this,i=n.keyFramesCount-1;let o=e;const a=e<0?n.preExtrapolation:n.postExtrapolation,r=n.getKeyframeTime(0),s=n.getKeyframeTime(i);switch(a){case pl.LOOP:o=Nn(e-r,s-r)+r;break;case pl.PING_PONG:o=Dn(e-r,s-r)+r;break;case pl.CLAMP:default:o=yn(e,r,s)}if(o>=t.time&&o<t.endTime)return t.evaluate(o);const c=this.findIndex(t,o),l=Math.min(c+1,i);return this.calcOptimizedKey(t,c,l),t.evaluate(o)}calcOptimizedKey(e,t,n){const i=this._curve.getKeyframeTime(t),o=this._curve.getKeyframeTime(n),{value:a,leftTangent:r}=this._curve.getKeyframeValue(t),{value:s,rightTangent:c}=this._curve.getKeyframeValue(n);e.index=t,e.time=i,e.endTime=o;const l=o-i,_=s-a,u=1/(l*l),f=r*l,h=c*l;e.coefficient[0]=(f+h-_-_)*u/l,e.coefficient[1]=(_+_+_-f-f-h)*u,e.coefficient[2]=r,e.coefficient[3]=a}findIndex(e,t){const{_curve:n}=this,i=n.keyFramesCount,o=e.index;if(-1!==o)if(t>n.getKeyframeTime(o))for(let e=0;e<3;e++){const a=o+e;if(a+1<i&&n.getKeyframeTime(a+1)>t)return a}else for(let e=0;e<3;e++){const i=o-e;if(i>=0&&n.getKeyframeTime(i-1)<=t)return i-1}let a,r=0,s=i;for(;s-r>1;)a=Math.floor((r+s)/2),n.getKeyframeTime(a)>=t?s=a:r=a;return r}},Dh.defaultKF=[{time:0,value:1,inTangent:0,outTangent:0},{time:1,value:1,inTangent:0,outTangent:0}],Nh=vc((Rh=Mh).prototype,"_curve",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ih=Rh))||Ih);function Fh(e){switch(e){default:case gc.Default:case gc.Normal:case gc.Clamp:return pl.CLAMP;case gc.PingPong:return pl.PING_PONG;case gc.Loop:return pl.LOOP}}function Uh(e){switch(e){default:case pl.LINEAR:case pl.CLAMP:return gc.Clamp;case pl.PING_PONG:return gc.PingPong;case pl.LOOP:return gc.Loop}}function Bh(e,t){console.warn(`${e} is deprecated, please use ${t} instead.`)}an(Os,"intersect",[{name:"ray_aabb",newName:"rayAABB"},{name:"ray_plane",newName:"rayPlane"},{name:"ray_triangle",newName:"rayTriangle"},{name:"ray_sphere",newName:"raySphere"},{name:"ray_obb",newName:"rayOBB"},{name:"ray_capsule",newName:"rayCapsule"},{name:"ray_subMesh",newName:"raySubMesh"},{name:"ray_mesh",newName:"rayMesh"},{name:"ray_model",newName:"rayModel"},{name:"line_plane",newName:"linePlane"},{name:"line_triangle",newName:"lineTriangle"},{name:"line_aabb",newName:"lineAABB"},{name:"line_obb",newName:"lineOBB"},{name:"line_sphere",newName:"lineSphere"},{name:"aabb_aabb",newName:"aabbWithAABB"},{name:"aabb_obb",newName:"aabbWithOBB"},{name:"aabb_plane",newName:"aabbPlane"},{name:"aabb_frustum",newName:"aabbFrustum"},{name:"aabbFrustum_accurate",newName:"aabbFrustumAccurate"},{name:"obb_point",newName:"obbPoint"},{name:"obb_plane",newName:"obbPlane"},{name:"obb_frustum",newName:"obbFrustum"},{name:"obbFrustum_accurate",newName:"obbFrustumAccurate"},{name:"obb_obb",newName:"obbWithOBB"},{name:"obb_capsule",newName:"obbCapsule"},{name:"sphere_plane",newName:"spherePlane"},{name:"sphere_frustum",newName:"sphereFrustum"},{name:"sphereFrustum_accurate",newName:"sphereFrustumAccurate"},{name:"sphere_sphere",newName:"sphereWithSphere"},{name:"sphere_aabb",newName:"sphereAABB"},{name:"sphere_obb",newName:"sphereOBB"},{name:"sphere_capsule",newName:"sphereCapsule"},{name:"capsule_capsule",newName:"capsuleWithCapsule"}]);var kh=Object.freeze({__proto__:null,distance:bo,enums:Co,intersect:Os,Line:So,Plane:Bs,Ray:Eo,Triangle:Do,Sphere:No,AABB:cc,OBB:fc,Capsule:hc,Frustum:mc,Keyframe:Oh,AnimationCurve:Lh,get ERaycastMode(){return Qr},line:class extends So{constructor(){super(),Bh("line","Line")}},plane:class extends Bs{constructor(){super(),Bh("plane","Plane")}},ray:class extends Eo{constructor(){super(),Bh("ray","Ray")}},triangle:class extends Do{constructor(){super(),Bh("triangle","Triangle")}},sphere:class extends No{constructor(){super(),Bh("sphere","Sphere")}},aabb:class extends cc{constructor(){super(),Bh("aabb","AABB")}},obb:class extends fc{constructor(){super(),Bh("obb","OBB")}},capsule:class extends hc{constructor(){super(),Bh("capsule","Capsule")}},frustum:class extends mc{constructor(){super(),Bh("frustum","Frustum")}}});e("ew",kh);const jh={NONE:0,IGNORE_RAYCAST:1<<20,GIZMOS:1<<21,EDITOR:1<<22,UI_3D:1<<23,SCENE_GIZMO:1<<24,UI_2D:1<<25,PROFILER:1<<28,DEFAULT:1<<30,ALL:4294967295};class Gh{static makeMaskInclude(e){let t=0;for(const n of e)t|=n;return t}static makeMaskExclude(e){return~Gh.makeMaskInclude(e)}static addLayer(e,t){void 0!==t?t>19||t<0?console.warn("maximum layers reached."):(Gh.Enum[e]=1<<t,Gh.Enum[t]=e,Gh.BitMask[e]=1<<t,Gh.BitMask[t]=e):console.warn("bitNum can't be undefined")}static deleteLayer(e){e>19||e<0?console.warn("do not change buildin layers."):(delete Gh.Enum[Gh.Enum[e]],delete Gh.Enum[e],delete Gh.BitMask[Gh.BitMask[e]],delete Gh.BitMask[e])}static nameToLayer(e){return void 0===e?(console.warn("name can't be undefined"),-1):$t(Gh.Enum[e])}static layerToName(e){return e>31||e<0?(console.warn("Unable to access unknown layer."),""):Gh.Enum[e]}}let Vh,Hh;e("d9",Gh),Gh.Enum=Be(jh),Gh.BitMask=Ue({...jh}),c.Layers=Gh,function(e){e[e.DEFAULT=100]="DEFAULT",e[e.UI=200]="UI"}(Vh||(Vh={})),c.RenderPassStage=Vh,function(e){e[e.MIN=0]="MIN",e[e.MAX=255]="MAX",e[e.DEFAULT=128]="DEFAULT"}(Hh||(Hh=e("d8",{})));const Wh={bindings:[],layouts:{}},qh={bindings:[],layouts:{}};let Yh;!function(e){e[e.UBO_GLOBAL=0]="UBO_GLOBAL",e[e.UBO_CAMERA=1]="UBO_CAMERA",e[e.UBO_SHADOW=2]="UBO_SHADOW",e[e.SAMPLER_SHADOWMAP=3]="SAMPLER_SHADOWMAP",e[e.SAMPLER_ENVIRONMENT=4]="SAMPLER_ENVIRONMENT",e[e.SAMPLER_SPOT_LIGHTING_MAP=5]="SAMPLER_SPOT_LIGHTING_MAP",e[e.SAMPLER_GBUFFER_ALBEDOMAP=6]="SAMPLER_GBUFFER_ALBEDOMAP",e[e.SAMPLER_GBUFFER_POSITIONMAP=7]="SAMPLER_GBUFFER_POSITIONMAP",e[e.SAMPLER_GBUFFER_NORMALMAP=8]="SAMPLER_GBUFFER_NORMALMAP",e[e.SAMPLER_GBUFFER_EMISSIVEMAP=9]="SAMPLER_GBUFFER_EMISSIVEMAP",e[e.SAMPLER_LIGHTING_RESULTMAP=10]="SAMPLER_LIGHTING_RESULTMAP",e[e.COUNT=11]="COUNT"}(Yh||(Yh={}));const Xh=Yh.SAMPLER_SHADOWMAP,Qh=Yh.COUNT-Xh;let Kh;!function(e){e[e.UBO_LOCAL=0]="UBO_LOCAL",e[e.UBO_FORWARD_LIGHTS=1]="UBO_FORWARD_LIGHTS",e[e.UBO_SKINNING_ANIMATION=2]="UBO_SKINNING_ANIMATION",e[e.UBO_SKINNING_TEXTURE=3]="UBO_SKINNING_TEXTURE",e[e.UBO_MORPH=4]="UBO_MORPH",e[e.SAMPLER_JOINTS=5]="SAMPLER_JOINTS",e[e.SAMPLER_MORPH_POSITION=6]="SAMPLER_MORPH_POSITION",e[e.SAMPLER_MORPH_NORMAL=7]="SAMPLER_MORPH_NORMAL",e[e.SAMPLER_MORPH_TANGENT=8]="SAMPLER_MORPH_TANGENT",e[e.SAMPLER_LIGHTMAP=9]="SAMPLER_LIGHTMAP",e[e.SAMPLER_SPRITE=10]="SAMPLER_SPRITE",e[e.SAMPLER_REFLECTION=11]="SAMPLER_REFLECTION",e[e.STORAGE_REFLECTION=12]="STORAGE_REFLECTION",e[e.COUNT=13]="COUNT"}(Kh||(Kh=e("df",{})));const Zh=Kh.SAMPLER_JOINTS,Jh=Kh.COUNT-Zh;let $h;!function(e){e[e.GLOBAL=0]="GLOBAL",e[e.MATERIAL=1]="MATERIAL",e[e.LOCAL=2]="LOCAL"}($h||($h={}));const ep=new Da;ep.bufferOffsets=[0,Xh+Zh,Xh],ep.samplerOffsets=[-Xh,Qh+Jh,Qh-Zh],ep.flexibleSet=1;class tp{}tp.TIME_OFFSET=0,tp.NATIVE_SIZE_OFFSET=tp.TIME_OFFSET+4,tp.SCREEN_SIZE_OFFSET=tp.NATIVE_SIZE_OFFSET+4,tp.COUNT=tp.SCREEN_SIZE_OFFSET+4,tp.SIZE=4*tp.COUNT,tp.NAME="CCGlobal",tp.BINDING=Yh.UBO_GLOBAL,tp.DESCRIPTOR=new cr(tp.BINDING,ma.UNIFORM_BUFFER,1,ia.ALL),tp.LAYOUT=new Ga($h.GLOBAL,tp.BINDING,tp.NAME,[new ja("cc_time",jo.FLOAT4,1),new ja("cc_screenSize",jo.FLOAT4,1),new ja("cc_nativeSize",jo.FLOAT4,1)],1),Wh.layouts[tp.NAME]=tp.LAYOUT,Wh.bindings[tp.BINDING]=tp.DESCRIPTOR;class np{}np.MAT_VIEW_OFFSET=0,np.MAT_VIEW_INV_OFFSET=np.MAT_VIEW_OFFSET+16,np.MAT_PROJ_OFFSET=np.MAT_VIEW_INV_OFFSET+16,np.MAT_PROJ_INV_OFFSET=np.MAT_PROJ_OFFSET+16,np.MAT_VIEW_PROJ_OFFSET=np.MAT_PROJ_INV_OFFSET+16,np.MAT_VIEW_PROJ_INV_OFFSET=np.MAT_VIEW_PROJ_OFFSET+16,np.CAMERA_POS_OFFSET=np.MAT_VIEW_PROJ_INV_OFFSET+16,np.SCREEN_SCALE_OFFSET=np.CAMERA_POS_OFFSET+4,np.EXPOSURE_OFFSET=np.SCREEN_SCALE_OFFSET+4,np.MAIN_LIT_DIR_OFFSET=np.EXPOSURE_OFFSET+4,np.MAIN_LIT_COLOR_OFFSET=np.MAIN_LIT_DIR_OFFSET+4,np.AMBIENT_SKY_OFFSET=np.MAIN_LIT_COLOR_OFFSET+4,np.AMBIENT_GROUND_OFFSET=np.AMBIENT_SKY_OFFSET+4,np.GLOBAL_FOG_COLOR_OFFSET=np.AMBIENT_GROUND_OFFSET+4,np.GLOBAL_FOG_BASE_OFFSET=np.GLOBAL_FOG_COLOR_OFFSET+4,np.GLOBAL_FOG_ADD_OFFSET=np.GLOBAL_FOG_BASE_OFFSET+4,np.COUNT=np.GLOBAL_FOG_ADD_OFFSET+4,np.SIZE=4*np.COUNT,np.NAME="CCCamera",np.BINDING=Yh.UBO_CAMERA,np.DESCRIPTOR=new cr(np.BINDING,ma.UNIFORM_BUFFER,1,ia.ALL),np.LAYOUT=new Ga($h.GLOBAL,np.BINDING,np.NAME,[new ja("cc_matView",jo.MAT4,1),new ja("cc_matViewInv",jo.MAT4,1),new ja("cc_matProj",jo.MAT4,1),new ja("cc_matProjInv",jo.MAT4,1),new ja("cc_matViewProj",jo.MAT4,1),new ja("cc_matViewProjInv",jo.MAT4,1),new ja("cc_cameraPos",jo.FLOAT4,1),new ja("cc_screenScale",jo.FLOAT4,1),new ja("cc_exposure",jo.FLOAT4,1),new ja("cc_mainLitDir",jo.FLOAT4,1),new ja("cc_mainLitColor",jo.FLOAT4,1),new ja("cc_ambientSky",jo.FLOAT4,1),new ja("cc_ambientGround",jo.FLOAT4,1),new ja("cc_fogColor",jo.FLOAT4,1),new ja("cc_fogBase",jo.FLOAT4,1),new ja("cc_fogAdd",jo.FLOAT4,1)],1),Wh.layouts[np.NAME]=np.LAYOUT,Wh.bindings[np.BINDING]=np.DESCRIPTOR;class ip{}ip.MAT_LIGHT_PLANE_PROJ_OFFSET=0,ip.MAT_LIGHT_VIEW_OFFSET=ip.MAT_LIGHT_PLANE_PROJ_OFFSET+16,ip.MAT_LIGHT_VIEW_PROJ_OFFSET=ip.MAT_LIGHT_VIEW_OFFSET+16,ip.SHADOW_NEAR_FAR_LINEAR_SATURATION_INFO_OFFSET=ip.MAT_LIGHT_VIEW_PROJ_OFFSET+16,ip.SHADOW_WIDTH_HEIGHT_PCF_BIAS_INFO_OFFSET=ip.SHADOW_NEAR_FAR_LINEAR_SATURATION_INFO_OFFSET+4,ip.SHADOW_LIGHT_PACKING_NBIAS_NULL_INFO_OFFSET=ip.SHADOW_WIDTH_HEIGHT_PCF_BIAS_INFO_OFFSET+4,ip.SHADOW_COLOR_OFFSET=ip.SHADOW_LIGHT_PACKING_NBIAS_NULL_INFO_OFFSET+4,ip.COUNT=ip.SHADOW_COLOR_OFFSET+4,ip.SIZE=4*ip.COUNT,ip.NAME="CCShadow",ip.BINDING=Yh.UBO_SHADOW,ip.DESCRIPTOR=new cr(ip.BINDING,ma.UNIFORM_BUFFER,1,ia.ALL),ip.LAYOUT=new Ga($h.GLOBAL,ip.BINDING,ip.NAME,[new ja("cc_matLightPlaneProj",jo.MAT4,1),new ja("cc_matLightView",jo.MAT4,1),new ja("cc_matLightViewProj",jo.MAT4,1),new ja("cc_shadowNFLSInfo",jo.FLOAT4,1),new ja("cc_shadowWHPBInfo",jo.FLOAT4,1),new ja("cc_shadowLPNNInfo",jo.FLOAT4,1),new ja("cc_shadowColor",jo.FLOAT4,1)],1),Wh.layouts[ip.NAME]=ip.LAYOUT,Wh.bindings[ip.BINDING]=ip.DESCRIPTOR;const op=Yh.SAMPLER_SHADOWMAP,ap=new cr(op,ma.SAMPLER_TEXTURE,1,ia.FRAGMENT),rp=new Va($h.GLOBAL,op,"cc_shadowMap",jo.SAMPLER2D,1);Wh.layouts.cc_shadowMap=rp,Wh.bindings[op]=ap;const sp=Yh.SAMPLER_GBUFFER_ALBEDOMAP,cp=new cr(sp,ma.SAMPLER_TEXTURE,1,ia.FRAGMENT),lp=new Va($h.GLOBAL,sp,"cc_gbuffer_albedoMap",jo.SAMPLER2D,1);Wh.layouts.cc_gbuffer_albedoMap=lp,Wh.bindings[sp]=cp;const _p=Yh.SAMPLER_GBUFFER_POSITIONMAP,up=new cr(_p,ma.SAMPLER_TEXTURE,1,ia.FRAGMENT),fp=new Va($h.GLOBAL,_p,"cc_gbuffer_positionMap",jo.SAMPLER2D,1);Wh.layouts.cc_gbuffer_positionMap=fp,Wh.bindings[_p]=up;const hp=Yh.SAMPLER_GBUFFER_NORMALMAP,pp=new cr(hp,ma.SAMPLER_TEXTURE,1,ia.FRAGMENT),mp=new Va($h.GLOBAL,hp,"cc_gbuffer_normalMap",jo.SAMPLER2D,1);Wh.layouts.cc_gbuffer_normalMap=mp,Wh.bindings[hp]=pp;const dp=Yh.SAMPLER_LIGHTING_RESULTMAP,vp=new cr(dp,ma.SAMPLER_TEXTURE,1,ia.FRAGMENT),gp=new Va($h.GLOBAL,dp,"cc_lighting_resultMap",jo.SAMPLER2D,1);Wh.layouts.cc_lighting_resultMap=gp,Wh.bindings[dp]=vp;const yp=Yh.SAMPLER_GBUFFER_EMISSIVEMAP,Ap=new cr(yp,ma.SAMPLER_TEXTURE,1,ia.FRAGMENT),xp=new Va($h.GLOBAL,yp,"cc_gbuffer_emissiveMap",jo.SAMPLER2D,1);Wh.layouts.cc_gbuffer_emissiveMap=xp,Wh.bindings[yp]=Ap;const bp=Yh.SAMPLER_ENVIRONMENT,Cp=new cr(bp,ma.SAMPLER_TEXTURE,1,ia.FRAGMENT),Sp=new Va($h.GLOBAL,bp,"cc_environment",jo.SAMPLER_CUBE,1);Wh.layouts.cc_environment=Sp,Wh.bindings[bp]=Cp;const Ep=Yh.SAMPLER_SPOT_LIGHTING_MAP,wp=new cr(Ep,ma.SAMPLER_TEXTURE,1,ia.FRAGMENT),Tp=new Va($h.GLOBAL,Ep,"cc_spotLightingMap",jo.SAMPLER2D,1);Wh.layouts.cc_spotLightingMap=Tp,Wh.bindings[Ep]=wp;class Pp{}e("dg",Pp),Pp.MAT_WORLD_OFFSET=0,Pp.MAT_WORLD_IT_OFFSET=Pp.MAT_WORLD_OFFSET+16,Pp.LIGHTINGMAP_UVPARAM=Pp.MAT_WORLD_IT_OFFSET+16,Pp.COUNT=Pp.LIGHTINGMAP_UVPARAM+4,Pp.SIZE=4*Pp.COUNT,Pp.NAME="CCLocal",Pp.BINDING=Kh.UBO_LOCAL,Pp.DESCRIPTOR=new cr(Pp.BINDING,ma.UNIFORM_BUFFER,1,ia.VERTEX|ia.COMPUTE),Pp.LAYOUT=new Ga($h.LOCAL,Pp.BINDING,Pp.NAME,[new ja("cc_matWorld",jo.MAT4,1),new ja("cc_matWorldIT",jo.MAT4,1),new ja("cc_lightingMapUVParam",jo.FLOAT4,1)],1),qh.layouts[Pp.NAME]=Pp.LAYOUT,qh.bindings[Pp.BINDING]=Pp.DESCRIPTOR;class Ip{}Ip.BATCHING_COUNT=10,Ip.MAT_WORLDS_OFFSET=0,Ip.COUNT=16*Ip.BATCHING_COUNT,Ip.SIZE=4*Ip.COUNT,Ip.NAME="CCLocalBatched",Ip.BINDING=Kh.UBO_LOCAL,Ip.DESCRIPTOR=new cr(Ip.BINDING,ma.UNIFORM_BUFFER,1,ia.VERTEX|ia.COMPUTE),Ip.LAYOUT=new Ga($h.LOCAL,Ip.BINDING,Ip.NAME,[new ja("cc_matWorlds",jo.MAT4,Ip.BATCHING_COUNT)],1),qh.layouts[Ip.NAME]=Ip.LAYOUT,qh.bindings[Ip.BINDING]=Ip.DESCRIPTOR;class Rp{}Rp.LIGHTS_PER_PASS=1,Rp.LIGHT_POS_OFFSET=0,Rp.LIGHT_COLOR_OFFSET=Rp.LIGHT_POS_OFFSET+4*Rp.LIGHTS_PER_PASS,Rp.LIGHT_SIZE_RANGE_ANGLE_OFFSET=Rp.LIGHT_COLOR_OFFSET+4*Rp.LIGHTS_PER_PASS,Rp.LIGHT_DIR_OFFSET=Rp.LIGHT_SIZE_RANGE_ANGLE_OFFSET+4*Rp.LIGHTS_PER_PASS,Rp.COUNT=Rp.LIGHT_DIR_OFFSET+4*Rp.LIGHTS_PER_PASS,Rp.SIZE=4*Rp.COUNT,Rp.NAME="CCForwardLight",Rp.BINDING=Kh.UBO_FORWARD_LIGHTS,Rp.DESCRIPTOR=new cr(Rp.BINDING,ma.DYNAMIC_UNIFORM_BUFFER,1,ia.FRAGMENT),Rp.LAYOUT=new Ga($h.LOCAL,Rp.BINDING,Rp.NAME,[new ja("cc_lightPos",jo.FLOAT4,Rp.LIGHTS_PER_PASS),new ja("cc_lightColor",jo.FLOAT4,Rp.LIGHTS_PER_PASS),new ja("cc_lightSizeRangeAngle",jo.FLOAT4,Rp.LIGHTS_PER_PASS),new ja("cc_lightDir",jo.FLOAT4,Rp.LIGHTS_PER_PASS)],1),qh.layouts[Rp.NAME]=Rp.LAYOUT,qh.bindings[Rp.BINDING]=Rp.DESCRIPTOR;class Np{}e("cx",Np),Np.JOINTS_TEXTURE_INFO_OFFSET=0,Np.COUNT=Np.JOINTS_TEXTURE_INFO_OFFSET+4,Np.SIZE=4*Np.COUNT,Np.NAME="CCSkinningTexture",Np.BINDING=Kh.UBO_SKINNING_TEXTURE,Np.DESCRIPTOR=new cr(Np.BINDING,ma.UNIFORM_BUFFER,1,ia.VERTEX),Np.LAYOUT=new Ga($h.LOCAL,Np.BINDING,Np.NAME,[new ja("cc_jointTextureInfo",jo.FLOAT4,1)],1),qh.layouts[Np.NAME]=Np.LAYOUT,qh.bindings[Np.BINDING]=Np.DESCRIPTOR;class Dp{}e("cp",Dp),Dp.JOINTS_ANIM_INFO_OFFSET=0,Dp.COUNT=Dp.JOINTS_ANIM_INFO_OFFSET+4,Dp.SIZE=4*Dp.COUNT,Dp.NAME="CCSkinningAnimation",Dp.BINDING=Kh.UBO_SKINNING_ANIMATION,Dp.DESCRIPTOR=new cr(Dp.BINDING,ma.UNIFORM_BUFFER,1,ia.VERTEX),Dp.LAYOUT=new Ga($h.LOCAL,Dp.BINDING,Dp.NAME,[new ja("cc_jointAnimInfo",jo.FLOAT4,1)],1),qh.layouts[Dp.NAME]=Dp.LAYOUT,qh.bindings[Dp.BINDING]=Dp.DESCRIPTOR,e("cz","a_jointAnimInfo");class Mp{}e("cv",Mp),Mp.JOINTS_OFFSET=0,Mp.COUNT=Mp.JOINTS_OFFSET+360,Mp.SIZE=4*Mp.COUNT,Mp.NAME="CCSkinning",Mp.BINDING=Kh.UBO_SKINNING_TEXTURE,Mp.DESCRIPTOR=new cr(Mp.BINDING,ma.UNIFORM_BUFFER,1,ia.VERTEX),Mp.LAYOUT=new Ga($h.LOCAL,Mp.BINDING,Mp.NAME,[new ja("cc_joints",jo.FLOAT4,90)],1),qh.layouts[Mp.NAME]=Mp.LAYOUT,qh.bindings[Mp.BINDING]=Mp.DESCRIPTOR;class Op{}e("bw",Op),Op.MAX_MORPH_TARGET_COUNT=60,Op.OFFSET_OF_WEIGHTS=0,Op.OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH=4*Op.MAX_MORPH_TARGET_COUNT,Op.OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT=Op.OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH+4,Op.OFFSET_OF_VERTICES_COUNT=Op.OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT+4,Op.COUNT_BASE_4_BYTES=4*Math.ceil(Op.MAX_MORPH_TARGET_COUNT/4)+4,Op.SIZE=4*Op.COUNT_BASE_4_BYTES,Op.NAME="CCMorph",Op.BINDING=Kh.UBO_MORPH,Op.DESCRIPTOR=new cr(Op.BINDING,ma.UNIFORM_BUFFER,1,ia.VERTEX),Op.LAYOUT=new Ga($h.LOCAL,Op.BINDING,Op.NAME,[new ja("cc_displacementWeights",jo.FLOAT4,Op.MAX_MORPH_TARGET_COUNT/4),new ja("cc_displacementTextureInfo",jo.FLOAT4,1)],1),qh.layouts[Op.NAME]=Op.LAYOUT,qh.bindings[Op.BINDING]=Op.DESCRIPTOR;const zp=e("cy",Kh.SAMPLER_JOINTS),Lp=new cr(zp,ma.SAMPLER_TEXTURE,1,ia.VERTEX),Fp=new Va($h.LOCAL,zp,"cc_jointTexture",jo.SAMPLER2D,1);qh.layouts.cc_jointTexture=Fp,qh.bindings[zp]=Lp;const Up=e("bG",Kh.SAMPLER_MORPH_POSITION),Bp=new cr(Up,ma.SAMPLER_TEXTURE,1,ia.VERTEX),kp=new Va($h.LOCAL,Up,"cc_PositionDisplacements",jo.SAMPLER2D,1);qh.layouts.cc_PositionDisplacements=kp,qh.bindings[Up]=Bp;const jp=e("bF",Kh.SAMPLER_MORPH_NORMAL),Gp=new cr(jp,ma.SAMPLER_TEXTURE,1,ia.VERTEX),Vp=new Va($h.LOCAL,jp,"cc_NormalDisplacements",jo.SAMPLER2D,1);qh.layouts.cc_NormalDisplacements=Vp,qh.bindings[jp]=Gp;const Hp=e("bE",Kh.SAMPLER_MORPH_TANGENT),Wp=new cr(Hp,ma.SAMPLER_TEXTURE,1,ia.VERTEX),qp=new Va($h.LOCAL,Hp,"cc_TangentDisplacements",jo.SAMPLER2D,1);qh.layouts.cc_TangentDisplacements=qp,qh.bindings[Hp]=Wp;const Yp=Kh.SAMPLER_LIGHTMAP,Xp=new cr(Yp,ma.SAMPLER_TEXTURE,1,ia.FRAGMENT),Qp=new Va($h.LOCAL,Yp,"cc_lightingMap",jo.SAMPLER2D,1);qh.layouts.cc_lightingMap=Qp,qh.bindings[Yp]=Xp;const Kp=Kh.SAMPLER_SPRITE,Zp=new cr(Kp,ma.SAMPLER_TEXTURE,1,ia.FRAGMENT),Jp=new Va($h.LOCAL,Kp,"cc_spriteTexture",jo.SAMPLER2D,1);qh.layouts.cc_spriteTexture=Jp,qh.bindings[Kp]=Zp;const $p=Kh.SAMPLER_REFLECTION,em=new cr($p,ma.SAMPLER_TEXTURE,1,ia.FRAGMENT),tm=new Va($h.LOCAL,$p,"cc_reflectionTexture",jo.SAMPLER2D,1);qh.layouts.cc_reflectionTexture=tm,qh.bindings[$p]=em;const nm=Kh.STORAGE_REFLECTION,im=new cr(nm,ma.STORAGE_IMAGE,1,ia.COMPUTE),om=new qa($h.LOCAL,nm,"cc_reflectionStorage",jo.IMAGE2D,1);qh.layouts.cc_reflectionStorage=om,qh.bindings[nm]=im;const am=Gh.makeMaskExclude([Gh.BitMask.UI_2D,Gh.BitMask.GIZMOS,Gh.BitMask.EDITOR,Gh.BitMask.SCENE_GIZMO,Gh.BitMask.PROFILER]);let rm,sm,cm,lm,_m;Gh.makeMaskExclude([Gh.BitMask.UI_2D,Gh.BitMask.PROFILER]),Gh.Enum.ALL,function(e){e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL"}(rm||(rm={})),function(e){e[e.ORTHO=0]="ORTHO",e[e.PERSPECTIVE=1]="PERSPECTIVE"}(sm||(sm={})),function(e){e[e.F1_8=0]="F1_8",e[e.F2_0=1]="F2_0",e[e.F2_2=2]="F2_2",e[e.F2_5=3]="F2_5",e[e.F2_8=4]="F2_8",e[e.F3_2=5]="F3_2",e[e.F3_5=6]="F3_5",e[e.F4_0=7]="F4_0",e[e.F4_5=8]="F4_5",e[e.F5_0=9]="F5_0",e[e.F5_6=10]="F5_6",e[e.F6_3=11]="F6_3",e[e.F7_1=12]="F7_1",e[e.F8_0=13]="F8_0",e[e.F9_0=14]="F9_0",e[e.F10_0=15]="F10_0",e[e.F11_0=16]="F11_0",e[e.F13_0=17]="F13_0",e[e.F14_0=18]="F14_0",e[e.F16_0=19]="F16_0",e[e.F18_0=20]="F18_0",e[e.F20_0=21]="F20_0",e[e.F22_0=22]="F22_0"}(cm||(cm={})),function(e){e[e.ISO100=0]="ISO100",e[e.ISO200=1]="ISO200",e[e.ISO400=2]="ISO400",e[e.ISO800=3]="ISO800"}(lm||(lm={})),function(e){e[e.D1=0]="D1",e[e.D2=1]="D2",e[e.D4=2]="D4",e[e.D8=3]="D8",e[e.D15=4]="D15",e[e.D30=5]="D30",e[e.D60=6]="D60",e[e.D125=7]="D125",e[e.D250=8]="D250",e[e.D500=9]="D500",e[e.D1000=10]="D1000",e[e.D2000=11]="D2000",e[e.D4000=12]="D4000"}(_m||(_m={}));const um=[1.8,2,2.2,2.5,2.8,3.2,3.5,4,4.5,5,5.6,6.3,7.1,8,9,10,11,13,14,16,18,20,22],fm=[1,.5,1/4,1/8,1/15,1/30,1/60,.008,.004,.002,.001,5e-4,1/4e3],hm=[100,200,400,800],pm=new Gn,mm=new Gn,dm=new ii,vm=ga.STENCIL<<1,gm=[];class ym{constructor(e){if(this.isWindowSize=!0,this.screenScale=void 0,this._device=void 0,this._scene=null,this._node=null,this._name=null,this._enabled=!1,this._proj=-1,this._aspect=void 0,this._orthoHeight=10,this._fovAxis=rm.VERTICAL,this._fov=bn(45),this._nearClip=1,this._farClip=1e3,this._clearColor=new Na(.2,.2,.2,1),this._viewport=new di(0,0,1,1),this._curTransform=Fo.IDENTITY,this._isProjDirty=!0,this._matView=new ii,this._matViewInv=null,this._matProj=new ii,this._matProjInv=new ii,this._matViewProj=new ii,this._matViewProjInv=new ii,this._frustum=new mc,this._forward=new Gn,this._position=new Gn,this._priority=0,this._aperture=cm.F16_0,this._apertureValue=void 0,this._shutter=_m.D125,this._shutterValue=0,this._iso=lm.ISO100,this._isoValue=0,this._ec=0,this._window=null,this._width=1,this._height=1,this._clearFlag=ga.NONE,this._clearDepth=1,this._visibility=am,this._exposure=0,this._clearStencil=0,this._device=e,this._apertureValue=um[this._aperture],this._shutterValue=fm[this._shutter],this._isoValue=hm[this._iso],this._aspect=this.screenScale=1,!gm.length){const t=e.capabilities.clipSpaceSignY;gm[Fo.IDENTITY]=new ii(1,0,0,0,0,t),gm[Fo.ROTATE_90]=new ii(0,1,0,0,-t,0),gm[Fo.ROTATE_180]=new ii(-1,0,0,0,0,-t),gm[Fo.ROTATE_270]=new ii(0,-1,0,0,t,0)}}_setWidth(e){this._width=e,this._nativeObj.width=e}_setHeight(e){this._height=e,this._nativeObj.height=e}_setScene(e){this._scene=e,this._nativeObj.scene=e?e.native:null}_init(e){this._nativeObj=new eo,this._scene&&(this._nativeObj.scene=this._scene.native),this._nativeObj.frustum=this._frustum}initialize(e){this._init(e),this.node=e.node,this._setWidth(1),this._setHeight(1),this.clearFlag=ga.NONE,this.clearDepth=1,this.visibility=am,this._name=e.name,this._proj=e.projection,this._priority=e.priority||0,this._aspect=this.screenScale=1,this.updateExposure(),this.changeTargetWindow(e.window)}_destroy(){this._nativeObj=null}destroy(){this._window&&(this._window.detachCamera(this),this.window=null),this._name=null,this._destroy()}attachToScene(e){this._enabled=!0,this._setScene(e)}detachFromScene(){this._enabled=!1,this._setScene(null)}resize(e,t){this._window&&(this._setWidth(e),this._setHeight(t),this._aspect=e*this._viewport.width/(t*this._viewport.height),this._isProjDirty=!0)}setFixedSize(e,t){this._setWidth(e),this._setHeight(t),this._aspect=e*this._viewport.width/(t*this._viewport.height),this.isWindowSize=!1}update(e=!1){if(!this._node)return;let t=!1;(this._node.hasChangedFlags||e)&&(ii.invert(this._matView,this._node.worldMatrix),this._nativeObj.matView=this._matView,this._forward.x=-this._matView.m02,this._forward.y=-this._matView.m06,this._forward.z=-this._matView.m10,this._node.getWorldPosition(this._position),this._nativeObj.position=this._position,this._nativeObj.forward=this._forward,t=!0);let n=this._device.surfaceTransform;if(this._isProjDirty||this._curTransform!==n){var i;this._curTransform=n;const e=this._device.capabilities.clipSpaceSignY;if((null===(i=this.window)||void 0===i?void 0:i.hasOffScreenAttachments)&&(n=Fo.IDENTITY),this._proj===sm.PERSPECTIVE)ii.perspective(this._matProj,this._fov,this._aspect,this._nearClip,this._farClip,this._fovAxis===rm.VERTICAL,this._device.capabilities.clipSpaceMinZ,e,n);else{const t=this._orthoHeight*this._aspect,i=this._orthoHeight;ii.ortho(this._matProj,-t,t,-i,i,this._nearClip,this._farClip,this._device.capabilities.clipSpaceMinZ,e,n)}ii.invert(this._matProjInv,this._matProj),this._nativeObj.matProj=this._matProj,this._nativeObj.matProjInv=this._matProjInv,t=!0,this._isProjDirty=!1}t&&(ii.multiply(this._matViewProj,this._matProj,this._matView),ii.invert(this._matViewProjInv,this._matViewProj),this._frustum.update(this._matViewProj,this._matViewProjInv),this._nativeObj.matViewProj=this._matViewProj,this._nativeObj.matViewProjInv=this._matViewProjInv,this._nativeObj.frustum=this._frustum)}set node(e){this._node=e,this._nativeObj.node=this._node.native}get node(){return this._node}set enabled(e){this._enabled=e}get enabled(){return this._enabled}set orthoHeight(e){this._orthoHeight=e,this._isProjDirty=!0}get orthoHeight(){return this._orthoHeight}set projectionType(e){this._proj=e,this._isProjDirty=!0}get projectionType(){return this._proj}set fovAxis(e){this._fovAxis=e,this._isProjDirty=!0}get fovAxis(){return this._fovAxis}set fov(e){this._fov=e,this._isProjDirty=!0}get fov(){return this._fov}set nearClip(e){this._nearClip=e,this._isProjDirty=!0}get nearClip(){return this._nearClip}set farClip(e){this._farClip=e,this._isProjDirty=!0}get farClip(){return this._farClip}set clearColor(e){this._clearColor.x=e.x,this._clearColor.y=e.y,this._clearColor.z=e.z,this._clearColor.w=e.w,this._nativeObj.clearColor=this._clearColor}get clearColor(){return this._clearColor}get viewport(){return this._viewport}set viewport(e){const{x:t,width:n,height:i}=e,o=this._device.capabilities.clipSpaceSignY<0?1-e.y-i:e.y;switch(this._device.surfaceTransform){case Fo.ROTATE_90:this._viewport.x=1-o-i,this._viewport.y=t,this._viewport.width=i,this._viewport.height=n;break;case Fo.ROTATE_180:this._viewport.x=1-t-n,this._viewport.y=1-o-i,this._viewport.width=n,this._viewport.height=i;break;case Fo.ROTATE_270:this._viewport.x=o,this._viewport.y=1-t-n,this._viewport.width=i,this._viewport.height=n;break;case Fo.IDENTITY:this._viewport.x=t,this._viewport.y=o,this._viewport.width=n,this._viewport.height=i}this._nativeObj.viewPort=this._viewport,this.resize(this.width,this.height)}get scene(){return this._scene}get name(){return this._name}get width(){return this._width}get height(){return this._height}get aspect(){return this._aspect}set matView(e){this._matView=e,this._nativeObj.matView=this._matView}get matView(){return this._matView}set matViewInv(e){this._matViewInv=e}get matViewInv(){return this._matViewInv||this._node.worldMatrix}set matProj(e){this._matProj=e,this._nativeObj.matProj=this._matProj}get matProj(){return this._matProj}set matProjInv(e){this._matProjInv=e,this._nativeObj.matProjInv=this._matProjInv}get matProjInv(){return this._matProjInv}set matViewProj(e){this._matViewProj=e,this._nativeObj.matViewProj=this._matViewProj}get matViewProj(){return this._matViewProj}set matViewProjInv(e){this._matViewProjInv=e,this._nativeObj.matViewProjInv=this._matViewProjInv}get matViewProjInv(){return this._matViewProjInv}set frustum(e){this._frustum=e,this._nativeObj.frustum=this._frustum}get frustum(){return this._frustum}set window(e){this._window=e,e&&(this._nativeObj.window=this._window.native)}get window(){return this._window}set forward(e){this._forward=e,this._nativeObj.forward=this._forward}get forward(){return this._forward}set position(e){this._position=e,this._nativeObj.position=this._position}get position(){return this._position}set visibility(e){this._visibility=e,this._nativeObj.visibility=this._visibility}get visibility(){return this._visibility}get priority(){return this._priority}set priority(e){this._priority=e}set aperture(e){this._aperture=e,this._apertureValue=um[this._aperture],this.updateExposure()}get aperture(){return this._aperture}get apertureValue(){return this._apertureValue}set shutter(e){this._shutter=e,this._shutterValue=fm[this._shutter],this.updateExposure()}get shutter(){return this._shutter}get shutterValue(){return this._shutterValue}set iso(e){this._iso=e,this._isoValue=hm[this._iso],this.updateExposure()}get iso(){return this._iso}get isoValue(){return this._isoValue}set ec(e){this._ec=e}get ec(){return this._ec}get exposure(){return this._exposure}get clearFlag(){return this._clearFlag}set clearFlag(e){this._clearFlag=e,this._nativeObj.clearFlag=e}get clearDepth(){return this._clearDepth}set clearDepth(e){this._clearDepth=e,this._nativeObj.clearDepth=e}get clearStencil(){return this._clearStencil}set clearStencil(e){this._clearStencil=e,this._nativeObj.clearStencil=e}get native(){return this._nativeObj}changeTargetWindow(e=null){this._window&&this._window.detachCamera(this);const t=e||c.director.root.mainWindow;t&&(t.attachCamera(this),this.window=t,this.resize(t.width,t.height))}detachCamera(){this._window&&this._window.detachCamera(this)}screenPointToRay(e,t,n){if(!this._node)return null;const i=this.width,o=this.height,a=this._viewport.x*i,r=this._viewport.y*o,s=this._viewport.width*i,c=this._viewport.height*o,l=this._proj===sm.PERSPECTIVE,_=this._device.capabilities.clipSpaceSignY,u=ni[this._curTransform];Gn.set(pm,(t-a)/s*2-1,(n-r)/c*2-1,l?1:-1);const{x:f,y:h}=pm;return pm.x=f*u[0]+h*u[2]*_,pm.y=f*u[1]+h*u[3]*_,Gn.transformMat4(l?pm:e.o,pm,this._matViewProjInv),l?(this._node.getWorldPosition(mm),Eo.fromPoints(e,mm,pm)):Gn.transformQuat(e.d,Gn.FORWARD,this._node.worldRotation),e}screenToWorld(e,t){const n=this.width,i=this.height,o=this._viewport.x*n,a=this._viewport.y*i,r=this._viewport.width*n,s=this._viewport.height*i,c=this._device.capabilities.clipSpaceSignY,l=ni[this._curTransform];if(this._proj===sm.PERSPECTIVE){Gn.set(e,(t.x-o)/r*2-1,(t.y-a)/s*2-1,1);const{x:n,y:i}=e;e.x=n*l[0]+i*l[2]*c,e.y=n*l[1]+i*l[3]*c,Gn.transformMat4(e,e,this._matViewProjInv),this._node&&this._node.getWorldPosition(pm),Gn.lerp(e,pm,e,xn(this._nearClip/this._farClip,1,t.z))}else{Gn.set(e,(t.x-o)/r*2-1,(t.y-a)/s*2-1,2*t.z-1);const{x:n,y:i}=e;e.x=n*l[0]+i*l[2]*c,e.y=n*l[1]+i*l[3]*c,Gn.transformMat4(e,e,this._matViewProjInv)}return e}worldToScreen(e,t){const n=this.width,i=this.height,o=this._viewport.x*n,a=this._viewport.y*i,r=this._viewport.width*n,s=this._viewport.height*i,c=this._device.capabilities.clipSpaceSignY,l=ni[this._curTransform];Gn.transformMat4(e,t,this._matViewProj);const{x:_,y:u}=e;return e.x=_*l[0]+u*l[2]*c,e.y=_*l[1]+u*l[3]*c,e.x=o+.5*(e.x+1)*r,e.y=a+.5*(e.y+1)*s,e.z=.5*e.z+.5,e}worldMatrixToScreen(e,t,n,i){ii.multiply(e,this._matViewProj,t),ii.multiply(e,gm[this._curTransform],e);const o=n/2,a=i/2;return ii.identity(dm),ii.transform(dm,dm,Gn.set(pm,o,a,0)),ii.scale(dm,dm,Gn.set(pm,o,a,1)),ii.multiply(e,dm,e),e}setExposure(e){this._exposure=.833333/2**e,this._nativeObj.exposure=this._exposure}updateExposure(){const e=Math.log2(this._apertureValue*this._apertureValue/this._shutterValue*100/this._isoValue);this.setExposure(e)}}let Am,xm,bm,Cm=1024;var Sm,Em,wm,Tm;function Pm(e){return!!(c.sys.capabilities.imageBitmap&&e instanceof ImageBitmap)}!function(e){e[e.RGB565=Bo.R5G6B5]="RGB565",e[e.RGB5A1=Bo.RGB5A1]="RGB5A1",e[e.RGBA4444=Bo.RGBA4]="RGBA4444",e[e.RGB888=Bo.RGB8]="RGB888",e[e.RGB32F=Bo.RGB32F]="RGB32F",e[e.RGBA8888=Bo.RGBA8]="RGBA8888",e[e.RGBA32F=Bo.RGBA32F]="RGBA32F",e[e.A8=Bo.A8]="A8",e[e.I8=Bo.L8]="I8",e[e.AI8=Bo.LA8]="AI8",e[e.RGB_PVRTC_2BPPV1=Bo.PVRTC_RGB2]="RGB_PVRTC_2BPPV1",e[e.RGBA_PVRTC_2BPPV1=Bo.PVRTC_RGBA2]="RGBA_PVRTC_2BPPV1",e[e.RGB_A_PVRTC_2BPPV1=Cm++]="RGB_A_PVRTC_2BPPV1",e[e.RGB_PVRTC_4BPPV1=Bo.PVRTC_RGB4]="RGB_PVRTC_4BPPV1",e[e.RGBA_PVRTC_4BPPV1=Bo.PVRTC_RGBA4]="RGBA_PVRTC_4BPPV1",e[e.RGB_A_PVRTC_4BPPV1=Cm++]="RGB_A_PVRTC_4BPPV1",e[e.RGB_ETC1=Bo.ETC_RGB8]="RGB_ETC1",e[e.RGBA_ETC1=Cm++]="RGBA_ETC1",e[e.RGB_ETC2=Bo.ETC2_RGB8]="RGB_ETC2",e[e.RGBA_ETC2=Bo.ETC2_RGBA8]="RGBA_ETC2",e[e.RGBA_ASTC_4x4=Bo.ASTC_RGBA_4X4]="RGBA_ASTC_4x4",e[e.RGBA_ASTC_5x4=Bo.ASTC_RGBA_5X4]="RGBA_ASTC_5x4",e[e.RGBA_ASTC_5x5=Bo.ASTC_RGBA_5X5]="RGBA_ASTC_5x5",e[e.RGBA_ASTC_6x5=Bo.ASTC_RGBA_6X5]="RGBA_ASTC_6x5",e[e.RGBA_ASTC_6x6=Bo.ASTC_RGBA_6X6]="RGBA_ASTC_6x6",e[e.RGBA_ASTC_8x5=Bo.ASTC_RGBA_8X5]="RGBA_ASTC_8x5",e[e.RGBA_ASTC_8x6=Bo.ASTC_RGBA_8X6]="RGBA_ASTC_8x6",e[e.RGBA_ASTC_8x8=Bo.ASTC_RGBA_8X8]="RGBA_ASTC_8x8",e[e.RGBA_ASTC_10x5=Bo.ASTC_RGBA_10X5]="RGBA_ASTC_10x5",e[e.RGBA_ASTC_10x6=Bo.ASTC_RGBA_10X6]="RGBA_ASTC_10x6",e[e.RGBA_ASTC_10x8=Bo.ASTC_RGBA_10X8]="RGBA_ASTC_10x8",e[e.RGBA_ASTC_10x10=Bo.ASTC_RGBA_10X10]="RGBA_ASTC_10x10",e[e.RGBA_ASTC_12x10=Bo.ASTC_RGBA_12X10]="RGBA_ASTC_12x10",e[e.RGBA_ASTC_12x12=Bo.ASTC_RGBA_12X12]="RGBA_ASTC_12x12"}(Am||(Am=e("cF",{}))),function(e){e[e.REPEAT=Zo.WRAP]="REPEAT",e[e.CLAMP_TO_EDGE=Zo.CLAMP]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=Zo.MIRROR]="MIRRORED_REPEAT",e[e.CLAMP_TO_BORDER=Zo.BORDER]="CLAMP_TO_BORDER"}(xm||(xm=e("dH",{}))),function(e){e[e.NONE=Ko.NONE]="NONE",e[e.LINEAR=Ko.LINEAR]="LINEAR",e[e.NEAREST=Ko.POINT]="NEAREST"}(bm||(bm=e("cE",{})));let Im,Rm=e("by",Rc("cc.ImageAsset")((Tm=wm=class e extends $l{get _nativeAsset(){return this._nativeData}set _nativeAsset(e){e instanceof HTMLElement||Pm(e)||(e.format=e.format||this._format),this.reset(e)}get data(){return this._nativeData&&!0!==(e=this._nativeData)._compressed&&(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||Pm(e))?this._nativeData:this._nativeData&&this._nativeData._data;var e}get width(){return this._nativeData.width||this._width}get height(){return this._nativeData.height||this._height}get format(){return this._format}get isCompressed(){return this._format>=Am.RGB_ETC1&&this._format<=Am.RGBA_ASTC_12x12||this._format>=Am.RGB_A_PVRTC_2BPPV1&&this._format<=Am.RGBA_ETC1}get url(){return this.nativeUrl}constructor(e){super(),this._nativeData=void 0,this._exportedExts=void 0,this._format=Am.RGBA8888,this._width=0,this._height=0,this._nativeData={_data:null,width:0,height:0,format:0,_compressed:!1},void 0!==e&&this.reset(e)}reset(e){Pm(e)||e instanceof HTMLElement?this._nativeData=e:(this._nativeData=e,this._format=e.format)}destroy(){return this.data&&this.data instanceof HTMLImageElement?(this.data.src="",this._setRawAsset(""),this.data.destroy()):Pm(this.data)&&this.data.close&&this.data.close(),super.destroy()}_serialize(){}_deserialize(t){let n="";"string"==typeof t?n=t:(this._width=t.w,this._height=t.h,n=t.fmt);const i=c.director.root?c.director.root.device:null,o=n.split("_");let a="",r=Number.MAX_VALUE,s=this._format,l="";const _=c.macro.SUPPORT_TEXTURE_FORMATS;for(const t of o){const n=t.split("@"),o=parseInt(n[0],void 0),u=e.extnames[o]||n[0],f=_.indexOf(u);if(-1!==f&&f<r){const e=n[1]?parseInt(n[1]):this._format;if(!(".astc"!==u||i&&i.hasFeature(Uo.FORMAT_ASTC)))continue;if(!(".pvr"!==u||i&&i.hasFeature(Uo.FORMAT_PVRTC)))continue;if(!(e!==Am.RGB_ETC1&&e!==Am.RGBA_ETC1||i&&i.hasFeature(Uo.FORMAT_ETC1)))continue;if(!(e!==Am.RGB_ETC2&&e!==Am.RGBA_ETC2||i&&i.hasFeature(Uo.FORMAT_ETC2)))continue;if(".webp"===u&&!c.sys.capabilities.webp)continue;r=f,l=u,s=e}else a||(a=u)}l?(this._setRawAsset(l),this._format=s):a?(this._setRawAsset(a),P(3120,a,a)):P(3121)}initDefault(t){if(super.initDefault(t),e._sharedPlaceHolderCanvas)this.reset(e._sharedPlaceHolderCanvas);else{const t=document.createElement("canvas"),n=t.getContext("2d"),i=t.width=t.height=2;n.fillStyle="#ff00ff",n.fillRect(0,0,i,i),this.reset(t),e._sharedPlaceHolderCanvas=t}}validate(){return!!this.data}},wm.extnames=[".png",".jpg",".jpeg",".bmp",".webp",".pvr",".pkm",".astc"],wm._sharedPlaceHolderCanvas=null,vc((Em=Tm).prototype,"_nativeAsset",[sl],Object.getOwnPropertyDescriptor(Em.prototype,"_nativeAsset"),Em.prototype),Sm=Em))||Sm);c.ImageAsset=Rm,function(e){e[e.minFilter=0]="minFilter",e[e.magFilter=1]="magFilter",e[e.mipFilter=2]="mipFilter",e[e.addressU=3]="addressU",e[e.addressV=4]="addressV",e[e.addressW=5]="addressW",e[e.maxAnisotropy=6]="maxAnisotropy",e[e.cmpFunc=7]="cmpFunc",e[e.mipLODBias=8]="mipLODBias",e[e.total=9]="total"}(Im||(Im={}));const Nm=[Ko.LINEAR,Ko.LINEAR,Ko.NONE,Zo.WRAP,Zo.WRAP,Zo.WRAP,0,Jo.NEVER,0],Dm=zm(Nm),Mm=new Na,Om=new ka;function zm(e){let t=0,n=0;for(let i=0;i<Nm.length;i++)switch(t=e[i]||Nm[i],i){case Im.minFilter:n|=t;break;case Im.magFilter:n|=t<<2;break;case Im.mipFilter:n|=t<<4;break;case Im.addressU:n|=t<<6;break;case Im.addressV:n|=t<<8;break;case Im.addressW:n|=t<<10;break;case Im.maxAnisotropy:n|=t<<12;break;case Im.cmpFunc:n|=t<<16;break;case Im.mipLODBias:n|=t<<28}return n}const Lm=e("bA",new class{constructor(){this._cache={}}getSampler(e,t){t||(t=Dm);const n=this._cache[t];return n||(Om.minFilter=3&t,Om.magFilter=t>>2&3,Om.mipFilter=t>>4&3,Om.addressU=t>>6&3,Om.addressV=t>>8&3,Om.addressW=t>>10&3,Om.maxAnisotropy=t>>12&15,Om.cmpFunc=t>>16&15,Om.mipLODBias=t>>28&15,Om.borderColor=Mm,this._cache[t]=e.createSampler(Om))}});var Fm,Um,Bm,km,jm,Gm,Vm,Hm,Wm,qm,Ym,Xm;c.samplerLib=Lm;const Qm=new K("Tex");let Km=e("c_",Rc("cc.TextureBase")((Xm=Ym=class extends $l{get isCompressed(){return this._format>=Am.RGB_ETC1&&this._format<=Am.RGBA_ASTC_12x12||this._format>=Am.RGB_A_PVRTC_2BPPV1&&this._format<=Am.RGBA_ETC1}get width(){return this._width}get height(){return this._height}constructor(){super(),dc(this,"_format",Bm,this),dc(this,"_minFilter",km,this),dc(this,"_magFilter",jm,this),dc(this,"_mipFilter",Gm,this),dc(this,"_wrapS",Vm,this),dc(this,"_wrapT",Hm,this),dc(this,"_wrapR",Wm,this),dc(this,"_anisotropy",qm,this),this._width=1,this._height=1,this._id=void 0,this._samplerInfo=[],this._samplerHash=0,this._gfxSampler=null,this._gfxDevice=null,this._textureHash=0,this._id=Qm.getNewId(),this._gfxDevice=this._getGFXDevice(),this._textureHash=jr(this._id,666)}getId(){return this._id}getPixelFormat(){return this._format}getAnisotropy(){return this._anisotropy}setWrapMode(e,t,n){this._wrapS=e,this._samplerInfo[Im.addressU]=e,this._wrapT=t,this._samplerInfo[Im.addressV]=t,void 0!==n&&(this._wrapR=n,this._samplerInfo[Im.addressW]=n),this._samplerHash=zm(this._samplerInfo),this._gfxDevice&&(this._gfxSampler=Lm.getSampler(this._gfxDevice,this._samplerHash))}setFilters(e,t){this._minFilter=e,this._samplerInfo[Im.minFilter]=e,this._magFilter=t,this._samplerInfo[Im.magFilter]=t,this._samplerHash=zm(this._samplerInfo),this._gfxDevice&&(this._gfxSampler=Lm.getSampler(this._gfxDevice,this._samplerHash))}setMipFilter(e){this._mipFilter=e,this._samplerInfo[Im.mipFilter]=e,this._samplerHash=zm(this._samplerInfo),this._gfxDevice&&(this._gfxSampler=Lm.getSampler(this._gfxDevice,this._samplerHash))}setAnisotropy(e){this._anisotropy=e,this._samplerInfo[Im.maxAnisotropy]=e,this._samplerHash=zm(this._samplerInfo),this._gfxDevice&&(this._gfxSampler=Lm.getSampler(this._gfxDevice,this._samplerHash))}destroy(){var e;const t=super.destroy();return t&&(null===(e=c.director.root)||void 0===e?void 0:e.batcher2D)&&c.director.root.batcher2D._releaseDescriptorSetCache(this._textureHash),t}getHash(){return this._textureHash}getGFXTexture(){return null}getSamplerHash(){return this._samplerHash}getGFXSampler(){return this._gfxSampler||(this._gfxDevice?this._gfxSampler=Lm.getSampler(this._gfxDevice,this._samplerHash):R(9302)),this._gfxSampler}_serialize(e){return""}_deserialize(e,t){const n=e.split(",");n.unshift(""),n.length>=5&&(this.setFilters(parseInt(n[1]),parseInt(n[2])),this.setWrapMode(parseInt(n[3]),parseInt(n[4]))),n.length>=7&&(this.setMipFilter(parseInt(n[5])),this.setAnisotropy(parseInt(n[6])))}_getGFXDevice(){return c.director.root?c.director.root.device:null}_getGFXFormat(){return this._getGFXPixelFormat(this._format)}_setGFXFormat(e){this._format=void 0===e?Am.RGBA8888:e}_getGFXPixelFormat(e){return e===Am.RGBA_ETC1?e=Am.RGB_ETC1:e===Am.RGB_A_PVRTC_4BPPV1?e=Am.RGB_PVRTC_4BPPV1:e===Am.RGB_A_PVRTC_2BPPV1&&(e=Am.RGB_PVRTC_2BPPV1),e}},Ym.PixelFormat=Am,Ym.WrapMode=xm,Ym.Filter=bm,Bm=vc((Um=Xm).prototype,"_format",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Am.RGBA8888}}),km=vc(Um.prototype,"_minFilter",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return bm.LINEAR}}),jm=vc(Um.prototype,"_magFilter",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return bm.LINEAR}}),Gm=vc(Um.prototype,"_mipFilter",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return bm.NONE}}),Vm=vc(Um.prototype,"_wrapS",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xm.REPEAT}}),Hm=vc(Um.prototype,"_wrapT",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xm.REPEAT}}),Wm=vc(Um.prototype,"_wrapR",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xm.REPEAT}}),qm=vc(Um.prototype,"_anisotropy",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fm=Um))||Fm);c.TextureBase=Km;const Zm=new WeakMap,Jm=new WeakSet,$m=new WeakSet;function ed(e,t){let n;n=S_.safeFindClass;const i=B_.pool.get();let o;try{o=Z_(e,i,{classFinder:n,customEnv:t})}catch(e){throw y(e),B_.pool.put(i),e}o._uuid=t.__uuid__||"";const a=i.uuidList,r=i.uuidObjList,s=i.uuidPropList,c=i.uuidTypeList||[],l=[];for(let e=0;e<a.length;e++){const t=a[e];l[e]={uuid:Fl(t),owner:r[e],prop:s[e],type:Fe._getClassById(c[e])}}return Zm.set(o,l),o._native&&Jm.add(o),B_.pool.put(i),o}var td,nd=new class{constructor(){this._depends=new Al}init(){this._depends.clear()}getNativeDep(e){const t=this._depends.get(e);return t&&t.nativeDep?{...t.nativeDep}:null}getDeps(e){return this._depends.has(e)?this._depends.get(e).deps:[]}getDepsRecursively(e){const t=Object.create(null),n=[];return this._descend(e,t,n),n}remove(e){this._depends.remove(e)}parse(e,t){let n=null;if(Array.isArray(t)||t.__type__||t instanceof T_){if(this._depends.has(e))return this._depends.get(e);if(Array.isArray(t)&&!function(e){const t=e[5],n=t[t.length-1];return"number"==typeof n&&n<0}(t))n={deps:this._parseDepsFromJson(t)};else try{const i=ed(t,{__uuid__:e});n=this._parseDepsFromAsset(i),n.nativeDep&&(n.nativeDep.uuid=e),Sl.add(`${e}@import`,i)}catch(t){Cl.remove(`${e}@import`),n={deps:[]}}}else{if(this._depends.has(e)&&(n=this._depends.get(e),n.parsedFromExistAsset))return n;n=this._parseDepsFromAsset(t)}return this._depends.add(e,n),n}_parseDepsFromAsset(e){const t={deps:[],parsedFromExistAsset:!0},n=Zm.get(e);for(let e=0,i=n.length;e<i;e++)t.deps.push(n[e].uuid);return Jm.has(e)&&(t.nativeDep=e._nativeDep),t}_parseDepsFromJson(e){const t=function(e){const t=e[1];return e[10].map((e=>t[e]))}(e);return t.forEach(((e,n)=>t[n]=Fl(e))),t}_descend(e,t,n){const i=this.getDeps(e);for(let e=0;e<i.length;e++){const o=i[e];t[o]||(t[o]=!0,n.push(o),this._descend(o,t,n))}}};const id=[new Ia];function od(e){return e&&0==(e&e-1)}let ad=Rc("cc.SimpleTexture")(td=class extends Km{constructor(...e){super(...e),this._gfxTexture=null,this._mipmapLevel=1,this._textureWidth=0,this._textureHeight=0}get mipmapLevel(){return this._mipmapLevel}getGFXTexture(){return this._gfxTexture}destroy(){return this._tryDestroyTexture(),super.destroy()}updateImage(){this.updateMipmaps(0)}updateMipmaps(e=0,t){}uploadData(e,t=0,n=0){if(!this._gfxTexture||this._mipmapLevel<=t)return;const i=this._getGFXDevice();if(!i)return;const o=id[0];o.texExtent.width=this._textureWidth>>t,o.texExtent.height=this._textureHeight>>t,o.texSubres.mipLevel=t,o.texSubres.baseArrayLayer=n,ArrayBuffer.isView(e)?i.copyBuffersToTexture([e],this._gfxTexture,id):i.copyTexImagesToTexture([e],this._gfxTexture,id)}_assignImage(e,t,n){const i=e.data;if(i&&(this.uploadData(i,t,n),this._checkTextureLoaded(),He.CLEANUP_IMAGE_CACHE)){const t=nd.getDeps(this._uuid),n=t.indexOf(e._uuid);-1!==n&&(q(t,n),e.decRef())}}_checkTextureLoaded(){this._textureReady()}_textureReady(){this.loaded=!0,this.emit("load")}_setMipmapLevel(e){this._mipmapLevel=e<1?1:e}_getGfxTextureCreateInfo(e){return null}_tryReset(){if(this._tryDestroyTexture(),0===this._mipmapLevel)return;const e=this._getGFXDevice();e&&this._createTexture(e)}_createTexture(e){if(0===this._width||0===this._height)return;let t=Xo.NONE;this._mipFilter!==bm.NONE&&function(e,t,n){return!(e.gfxAPI===Lo.WEBGL)||od(t)&&od(n)}(e,this._width,this._height)&&(this._mipmapLevel=function(e,t){let n=Math.max(e,t),i=0;for(;n;)n>>=1,i++;return i}(this._width,this._height),t=Xo.GEN_MIPMAP);const n=this._getGfxTextureCreateInfo({usage:Yo.SAMPLED|Yo.TRANSFER_DST,format:this._getGFXFormat(),levelCount:this._mipmapLevel,flags:t|Xo.IMMUTABLE});if(!n)return;const i=e.createTexture(n);this._textureWidth=n.width,this._textureHeight=n.height,this._gfxTexture=i}_tryDestroyTexture(){this._gfxTexture&&(this._gfxTexture.destroy(),this._gfxTexture=null)}})||td;var rd,sd,cd,ld,_d;c.SimpleTexture=ad;let ud=e("bz",(rd=Rc("cc.Texture2D"),sd=rl([Rm]),rd((_d=vc((ld=class extends ad{constructor(...e){super(...e),dc(this,"_mipmaps",_d,this)}get mipmaps(){return this._mipmaps}set mipmaps(e){if(this._mipmaps=e,this._setMipmapLevel(this._mipmaps.length),this._mipmaps.length>0){const e=this._mipmaps[0];this.reset({width:e.width,height:e.height,format:e.format,mipmapLevel:this._mipmaps.length}),this._mipmaps.forEach(((e,t)=>{this._assignImage(e,t)}))}else this.reset({width:0,height:0,mipmapLevel:this._mipmaps.length})}get image(){return 0===this._mipmaps.length?null:this._mipmaps[0]}set image(e){this.mipmaps=e?[e]:[]}initialize(){this.mipmaps=this._mipmaps}onLoaded(){this.initialize()}reset(e){this._width=e.width,this._height=e.height,this._setGFXFormat(e.format),this._setMipmapLevel(e.mipmapLevel||1),this._tryReset()}create(e,t,n=Am.RGBA8888,i=1){this.reset({width:e,height:t,format:n,mipmapLevel:i})}toString(){return 0!==this._mipmaps.length?this._mipmaps[0].url:""}updateMipmaps(e=0,t){if(e>=this._mipmaps.length)return;const n=Math.min(void 0===t?this._mipmaps.length:t,this._mipmaps.length-e);for(let t=0;t<n;++t){const n=e+t;this._assignImage(this._mipmaps[n],n)}}getHtmlElementObj(){return this._mipmaps[0]&&this._mipmaps[0].data instanceof HTMLElement?this._mipmaps[0].data:null}destroy(){return this._mipmaps=[],super.destroy()}description(){return`<cc.Texture2D | Name = ${this._mipmaps[0]?this._mipmaps[0].url:""} | Dimension = ${this.width} x ${this.height}>`}releaseTexture(){this.destroy()}_serialize(e){return null}_deserialize(e,t){const n=e;super._deserialize(n.base,t),this._mipmaps=new Array(n.mipmaps.length);for(let e=0;e<n.mipmaps.length;++e){if(this._mipmaps[e]=new Rm,!n.mipmaps[e])continue;const i=n.mipmaps[e];t.result.push(this._mipmaps,`${e}`,i,Fe._getClassId(Rm))}}_getGfxTextureCreateInfo(e){const t=new Ua(qo.TEX2D);return t.width=this._width,t.height=this._height,Object.assign(t,e)}initDefault(e){super.initDefault(e);const t=new Rm;t.initDefault(),this.image=t}validate(){return this.mipmaps&&0!==this.mipmaps.length}}).prototype,"_mipmaps",[sd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cd=ld))||cd));var fd,hd,pd,md,dd,vd,gd;c.Texture2D=ud,function(e){e[e.right=0]="right",e[e.left=1]="left",e[e.top=2]="top",e[e.bottom=3]="bottom",e[e.front=4]="front",e[e.back=5]="back"}(gd||(gd={}));let yd=e("f9",Rc("cc.TextureCube")((vd=dd=class e extends ad{constructor(...e){super(...e),dc(this,"isRGBE",pd,this),dc(this,"_mipmaps",md,this)}get mipmaps(){return this._mipmaps}set mipmaps(e){if(this._mipmaps=e,this._setMipmapLevel(this._mipmaps.length),this._mipmaps.length>0){const e=this._mipmaps[0].front;this.reset({width:e.width,height:e.height,format:e.format,mipmapLevel:this._mipmaps.length}),this._mipmaps.forEach(((e,t)=>{Ad(e,((e,n)=>{this._assignImage(e,t,n)}))}))}else this.reset({width:0,height:0,mipmapLevel:this._mipmaps.length})}get image(){return 0===this._mipmaps.length?null:this._mipmaps[0]}set image(e){this.mipmaps=e?[e]:[]}static fromTexture2DArray(t,n){const i=[],o=t.length/6;for(let e=0;e<o;e++){const n=6*e;i.push({front:t[n+gd.front].image,back:t[n+gd.back].image,left:t[n+gd.left].image,right:t[n+gd.right].image,top:t[n+gd.top].image,bottom:t[n+gd.bottom].image})}return(n=n||new e).mipmaps=i,n}onLoaded(){this.mipmaps=this._mipmaps}reset(e){this._width=e.width,this._height=e.height,this._setGFXFormat(e.format),this._setMipmapLevel(e.mipmapLevel||1),this._tryReset()}updateMipmaps(e=0,t){if(e>=this._mipmaps.length)return;const n=Math.min(void 0===t?this._mipmaps.length:t,this._mipmaps.length-e);for(let t=0;t<n;++t){const n=e+t;Ad(this._mipmaps[n],((e,t)=>{this._assignImage(e,n,t)}))}}destroy(){return this._mipmaps=[],super.destroy()}releaseTexture(){this.mipmaps=[]}_serialize(e){return null}_deserialize(e,t){const n=e;super._deserialize(n.base,t),this.isRGBE=n.rgbe,this._mipmaps=new Array(n.mipmaps.length);for(let e=0;e<n.mipmaps.length;++e){this._mipmaps[e]={front:new Rm,back:new Rm,left:new Rm,right:new Rm,top:new Rm,bottom:new Rm};const i=n.mipmaps[e],o=Fe._getClassId(Rm);t.result.push(this._mipmaps[e],"front",i.front,o),t.result.push(this._mipmaps[e],"back",i.back,o),t.result.push(this._mipmaps[e],"left",i.left,o),t.result.push(this._mipmaps[e],"right",i.right,o),t.result.push(this._mipmaps[e],"top",i.top,o),t.result.push(this._mipmaps[e],"bottom",i.bottom,o)}}_getGfxTextureCreateInfo(e){const t=new Ua(qo.CUBE);return t.width=this._width,t.height=this._height,t.layerCount=6,Object.assign(t,e),t}initDefault(e){super.initDefault(e);const t=new Rm;t.initDefault(),this.mipmaps=[{front:t,back:t,top:t,bottom:t,left:t,right:t}]}validate(){return 0!==this._mipmaps.length&&!this._mipmaps.find((e=>!(e.top&&e.bottom&&e.front&&e.back&&e.left&&e.right)))}},dd.FaceIndex=gd,pd=vc((hd=vd).prototype,"isRGBE",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),md=vc(hd.prototype,"_mipmaps",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fd=hd))||fd);function Ad(e,t){t(e.front,gd.front),t(e.back,gd.back),t(e.left,gd.left),t(e.right,gd.right),t(e.top,gd.top),t(e.bottom,gd.bottom)}c.TextureCube=yd;const xd=e("fQ",[{name:"billboard",techniques:[{name:"add",passes:[{rasterizerState:{cullMode:0},blendState:{targets:[{blend:!0,blendSrc:2,blendDst:1,blendSrcAlpha:2,blendDstAlpha:1}]},program:"billboard|vert:vs_main|tinted-fs:add",depthStencilState:{depthTest:!0,depthWrite:!1},properties:{mainTexture:{value:"grey",type:28},mainTiling_Offset:{value:[1,1,0,0],type:16},tintColor:{value:[.5,.5,.5,.5],type:16}}}]}],shaders:[{name:"billboard|vert:vs_main|tinted-fs:add",hash:308883658,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:50,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:38},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplerTextures:[]}},defines:[{name:"CC_USE_HDR",type:"boolean"}],blocks:[{name:"Constants",defines:[],binding:0,stageFlags:1,members:[{name:"mainTiling_Offset",type:16,count:1},{name:"frameTile_velLenScale",type:16,count:1},{name:"scale",type:16,count:1}]},{name:"builtin",defines:[],binding:1,stageFlags:1,members:[{name:"cc_size_rotation",type:16,count:1}]},{name:"FragConstants",defines:[],binding:2,stageFlags:16,members:[{name:"tintColor",type:16,count:1}]}],samplerTextures:[{name:"mainTexture",type:28,count:1,defines:[],stageFlags:16,binding:3}],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:1},{name:"a_color",type:16,count:1,defines:[],stageFlags:1,format:44,location:2}]}]},{name:"clear-stencil",techniques:[{passes:[{blendState:{targets:[{blend:!0}]},rasterizerState:{cullMode:0},program:"clear-stencil|sprite-vs:vert|sprite-fs:frag",depthStencilState:{depthTest:!1,depthWrite:!1}}]}],shaders:[{name:"clear-stencil|sprite-vs:vert|sprite-fs:frag",hash:3507038093,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:0,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:0},globals:{blocks:[],samplerTextures:[]},locals:{blocks:[],samplerTextures:[]}},defines:[],blocks:[],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0}]}]},{name:"graphics",techniques:[{passes:[{blendState:{targets:[{blend:!0,blendSrc:1,blendDst:4,blendSrcAlpha:1,blendDstAlpha:4}]},rasterizerState:{cullMode:0},program:"graphics|vs:vert|fs:frag",depthStencilState:{depthTest:!1,depthWrite:!1}}]}],shaders:[{name:"graphics|vs:vert|fs:frag",hash:3113634185,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:46,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:0},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplerTextures:[]}},defines:[],blocks:[],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_color",type:16,count:1,defines:[],stageFlags:1,format:44,location:1},{name:"a_dist",type:13,count:1,defines:[],stageFlags:1,format:11,location:2}]}]},{name:"particle-gpu",techniques:[{name:"add",passes:[{rasterizerState:{cullMode:0},blendState:{targets:[{blend:!0,blendSrc:2,blendDst:1,blendSrcAlpha:2,blendDstAlpha:1}]},program:"particle-gpu|particle-vs-gpu:gpvs_main|tinted-fs:add",depthStencilState:{depthTest:!0,depthWrite:!1},properties:{mainTexture:{value:"grey",type:28},mainTiling_Offset:{value:[1,1,0,0],type:16},tintColor:{value:[.5,.5,.5,.5],type:16}}}]}],shaders:[{name:"particle-gpu|particle-vs-gpu:gpvs_main|tinted-fs:add",hash:3001336778,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:60,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:38},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplerTextures:[]}},defines:[{name:"CC_RENDER_MODE",type:"number",range:[0,4]},{name:"COLOR_OVER_TIME_MODULE_ENABLE",type:"boolean"},{name:"ROTATION_OVER_TIME_MODULE_ENABLE",type:"boolean"},{name:"SIZE_OVER_TIME_MODULE_ENABLE",type:"boolean"},{name:"FORCE_OVER_TIME_MODULE_ENABLE",type:"boolean"},{name:"VELOCITY_OVER_TIME_MODULE_ENABLE",type:"boolean"},{name:"TEXTURE_ANIMATION_MODULE_ENABLE",type:"boolean"},{name:"CC_USE_WORLD_SPACE",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"}],blocks:[{name:"Constants",defines:[],binding:0,stageFlags:1,members:[{name:"mainTiling_Offset",type:16,count:1},{name:"frameTile_velLenScale",type:16,count:1},{name:"scale",type:16,count:1}]},{name:"SampleConstants",defines:[],binding:1,stageFlags:1,members:[{name:"u_sampleInfo",type:16,count:1}]},{name:"TickConstants",defines:[],binding:2,stageFlags:1,members:[{name:"u_worldRot",type:16,count:1},{name:"u_timeDelta",type:16,count:1}]},{name:"ColorConstant",defines:["COLOR_OVER_TIME_MODULE_ENABLE"],binding:3,stageFlags:1,members:[{name:"u_color_mode",type:5,count:1}]},{name:"RotationConstant",defines:["ROTATION_OVER_TIME_MODULE_ENABLE"],binding:4,stageFlags:1,members:[{name:"u_rotation_mode",type:5,count:1}]},{name:"SizeConstant",defines:["SIZE_OVER_TIME_MODULE_ENABLE"],binding:5,stageFlags:1,members:[{name:"u_size_mode",type:5,count:1}]},{name:"ForceConstant",defines:["FORCE_OVER_TIME_MODULE_ENABLE"],binding:6,stageFlags:1,members:[{name:"u_force_mode",type:5,count:1},{name:"u_force_space",type:5,count:1}]},{name:"VelocityConstant",defines:["VELOCITY_OVER_TIME_MODULE_ENABLE"],binding:7,stageFlags:1,members:[{name:"u_velocity_mode",type:5,count:1},{name:"u_velocity_space",type:5,count:1}]},{name:"AnimationConstant",defines:["TEXTURE_ANIMATION_MODULE_ENABLE"],binding:8,stageFlags:1,members:[{name:"u_anim_info",type:16,count:1}]},{name:"FragConstants",defines:[],binding:9,stageFlags:16,members:[{name:"tintColor",type:16,count:1}]}],samplerTextures:[{name:"color_over_time_tex0",type:28,count:1,defines:["COLOR_OVER_TIME_MODULE_ENABLE"],stageFlags:1,binding:10},{name:"rotation_over_time_tex0",type:28,count:1,defines:["ROTATION_OVER_TIME_MODULE_ENABLE"],stageFlags:1,binding:11},{name:"size_over_time_tex0",type:28,count:1,defines:["SIZE_OVER_TIME_MODULE_ENABLE"],stageFlags:1,binding:12},{name:"force_over_time_tex0",type:28,count:1,defines:["FORCE_OVER_TIME_MODULE_ENABLE"],stageFlags:1,binding:13},{name:"velocity_over_time_tex0",type:28,count:1,defines:["VELOCITY_OVER_TIME_MODULE_ENABLE"],stageFlags:1,binding:14},{name:"texture_animation_tex0",type:28,count:1,defines:["TEXTURE_ANIMATION_MODULE_ENABLE"],stageFlags:1,binding:15},{name:"mainTexture",type:28,count:1,defines:[],stageFlags:16,binding:16}],attributes:[{name:"a_position_starttime",type:16,count:1,defines:[],stageFlags:1,format:44,location:0},{name:"a_size_uv",type:16,count:1,defines:[],stageFlags:1,format:44,location:1},{name:"a_rotation_uv",type:16,count:1,defines:[],stageFlags:1,format:44,location:2},{name:"a_color",type:16,count:1,defines:[],stageFlags:1,format:44,location:3},{name:"a_dir_life",type:16,count:1,defines:[],stageFlags:1,format:44,location:4},{name:"a_rndSeed",type:13,count:1,defines:[],stageFlags:1,format:11,location:5},{name:"a_texCoord",type:15,count:1,defines:["CC_RENDER_MODE"],stageFlags:1,format:32,location:6},{name:"a_texCoord3",type:15,count:1,defines:["CC_RENDER_MODE"],stageFlags:1,format:32,location:7},{name:"a_normal",type:15,count:1,defines:["CC_RENDER_MODE"],stageFlags:1,format:32,location:8},{name:"a_color1",type:16,count:1,defines:["CC_RENDER_MODE"],stageFlags:1,format:44,location:9}]}]},{name:"particle-trail",techniques:[{name:"add",passes:[{rasterizerState:{cullMode:0},blendState:{targets:[{blend:!0,blendSrc:2,blendDst:1,blendSrcAlpha:2,blendDstAlpha:1}]},program:"particle-trail|particle-trail:vs_main|tinted-fs:add",depthStencilState:{depthTest:!0,depthWrite:!1},properties:{mainTexture:{value:"grey",type:28},mainTiling_Offset:{value:[1,1,0,0],type:16},frameTile_velLenScale:{value:[1,1,0,0],type:16},tintColor:{value:[.5,.5,.5,.5],type:16}}}]}],shaders:[{name:"particle-trail|particle-trail:vs_main|tinted-fs:add",hash:2637621064,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:49,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:38},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplerTextures:[]}},defines:[{name:"CC_RENDER_MODE",type:"number",range:[0,4]},{name:"CC_DRAW_WIRE_FRAME",type:"boolean"},{name:"CC_USE_WORLD_SPACE",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"}],blocks:[{name:"Constants",defines:[],binding:0,stageFlags:1,members:[{name:"mainTiling_Offset",type:16,count:1},{name:"frameTile_velLenScale",type:16,count:1},{name:"scale",type:16,count:1}]},{name:"FragConstants",defines:[],binding:1,stageFlags:16,members:[{name:"tintColor",type:16,count:1}]}],samplerTextures:[{name:"mainTexture",type:28,count:1,defines:[],stageFlags:16,binding:2}],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_texCoord",type:16,count:1,defines:[],stageFlags:1,format:44,location:1},{name:"a_texCoord1",type:15,count:1,defines:[],stageFlags:1,format:32,location:2},{name:"a_texCoord2",type:15,count:1,defines:[],stageFlags:1,format:32,location:3},{name:"a_color",type:16,count:1,defines:[],stageFlags:1,format:44,location:4}]}]},{name:"particle",techniques:[{name:"add",passes:[{rasterizerState:{cullMode:0},blendState:{targets:[{blend:!0,blendSrc:2,blendDst:1,blendSrcAlpha:2,blendDstAlpha:1}]},program:"particle|particle-vs-legacy:lpvs_main|tinted-fs:add",depthStencilState:{depthTest:!0,depthWrite:!1},properties:{mainTexture:{value:"grey",type:28},mainTiling_Offset:{value:[1,1,0,0],type:16},tintColor:{value:[.5,.5,.5,.5],type:16}}}]}],shaders:[{name:"particle|particle-vs-legacy:lpvs_main|tinted-fs:add",hash:1675533382,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:49,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:38},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplerTextures:[]}},defines:[{name:"CC_RENDER_MODE",type:"number",range:[0,4]},{name:"CC_USE_WORLD_SPACE",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"}],blocks:[{name:"Constants",defines:[],binding:0,stageFlags:1,members:[{name:"mainTiling_Offset",type:16,count:1},{name:"frameTile_velLenScale",type:16,count:1},{name:"scale",type:16,count:1}]},{name:"FragConstants",defines:[],binding:1,stageFlags:16,members:[{name:"tintColor",type:16,count:1}]}],samplerTextures:[{name:"mainTexture",type:28,count:1,defines:[],stageFlags:16,binding:2}],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_texCoord",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord1",type:15,count:1,defines:[],stageFlags:1,format:32,location:2},{name:"a_texCoord2",type:15,count:1,defines:[],stageFlags:1,format:32,location:3},{name:"a_color",type:16,count:1,defines:[],stageFlags:1,format:44,location:4},{name:"a_color1",type:15,count:1,defines:["CC_RENDER_MODE"],stageFlags:1,format:32,location:8},{name:"a_texCoord3",type:15,count:1,defines:["CC_RENDER_MODE"],stageFlags:1,format:32,location:6},{name:"a_normal",type:15,count:1,defines:["CC_RENDER_MODE"],stageFlags:1,format:32,location:7}]}]},{name:"spine",techniques:[{passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendDstAlpha:4}]},rasterizerState:{cullMode:0},program:"spine|sprite-vs:vert|sprite-fs:frag",depthStencilState:{depthTest:!1,depthWrite:!1},properties:{alphaThreshold:{value:[.5],type:13}}}]}],shaders:[{name:"spine|sprite-vs:vert|sprite-fs:frag",hash:1867464226,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:46,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:1},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCLocal",defines:["USE_LOCAL"]}],samplerTextures:[{name:"cc_spriteTexture",defines:[]}]}},defines:[{name:"USE_LOCAL",type:"boolean"},{name:"TWO_COLORED",type:"boolean"},{name:"USE_ALPHA_TEST",type:"boolean"}],blocks:[{name:"ALPHA_TEST_DATA",defines:["USE_ALPHA_TEST"],binding:0,stageFlags:16,members:[{name:"alphaThreshold",type:13,count:1}]}],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:1},{name:"a_color",type:16,count:1,defines:[],stageFlags:1,format:44,location:2},{name:"a_color2",type:16,count:1,defines:["TWO_COLORED"],stageFlags:1,format:44,location:3}]}]},{name:"sprite",techniques:[{passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendDstAlpha:4}]},rasterizerState:{cullMode:0},program:"sprite|sprite-vs:vert|sprite-fs:frag",depthStencilState:{depthTest:!1,depthWrite:!1},properties:{alphaThreshold:{value:[.5],type:13}}}]}],shaders:[{name:"sprite|sprite-vs:vert|sprite-fs:frag",hash:1559944983,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:46,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:1},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCLocal",defines:["USE_LOCAL"]}],samplerTextures:[{name:"cc_spriteTexture",defines:["USE_TEXTURE"]}]}},defines:[{name:"USE_LOCAL",type:"boolean"},{name:"SAMPLE_FROM_RT",type:"boolean"},{name:"USE_PIXEL_ALIGNMENT",type:"boolean"},{name:"CC_USE_EMBEDDED_ALPHA",type:"boolean"},{name:"USE_ALPHA_TEST",type:"boolean"},{name:"USE_TEXTURE",type:"boolean"},{name:"IS_GRAY",type:"boolean"}],blocks:[{name:"ALPHA_TEST_DATA",defines:["USE_ALPHA_TEST"],binding:0,stageFlags:16,members:[{name:"alphaThreshold",type:13,count:1}]}],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:1},{name:"a_color",type:16,count:1,defines:[],stageFlags:1,format:44,location:2}]}]},{name:"standard",techniques:[{name:"opaque",passes:[{program:"standard|standard-vs|standard-fs",properties:{tilingOffset:{value:[1,1,0,0],type:16},mainColor:{value:[1,1,1,1],type:16,handleInfo:["albedo",0,16]},albedoScale:{value:[1,1,1],type:15,handleInfo:["albedoScaleAndCutoff",0,15]},alphaThreshold:{value:[.5],type:13,handleInfo:["albedoScaleAndCutoff",3,13]},occlusion:{value:[1],type:13,handleInfo:["pbrParams",0,13]},roughness:{value:[.8],type:13,handleInfo:["pbrParams",1,13]},metallic:{value:[.6],type:13,handleInfo:["pbrParams",2,13]},SpecularIntensity:{value:[.5],type:13,handleInfo:["pbrParams",3,13]},normalStrenth:{value:[1],type:13,handleInfo:["miscParams",0,13]},emissive:{value:[0,0,0,1],type:16},emissiveScale:{value:[1,1,1],type:15,handleInfo:["emissiveScaleParam",0,15]},mainTexture:{value:"grey",type:28,handleInfo:["albedoMap",0,28]},normalMap:{value:"normal",type:28},pbrMap:{value:"grey",type:28},metallicRoughnessMap:{value:"grey",type:28},occlusionMap:{value:"white",type:28},emissiveMap:{value:"grey",type:28},albedo:{type:16,value:[1,1,1,1]},albedoScaleAndCutoff:{type:16,value:[1,1,1,.5]},pbrParams:{type:16,value:[1,.8,.6,.5]},miscParams:{type:16,value:[1,0,0,0]},emissiveScaleParam:{type:16,value:[1,1,1,0]},albedoMap:{type:28,value:"grey"}}},{phase:"deferred",propertyIndex:0,blendState:{targets:[{blend:!1},{blend:!1},{blend:!1},{blend:!1}]},program:"standard|standard-vs|standard-fs",properties:{tilingOffset:{value:[1,1,0,0],type:16},mainColor:{value:[1,1,1,1],type:16,handleInfo:["albedo",0,16]},albedoScale:{value:[1,1,1],type:15,handleInfo:["albedoScaleAndCutoff",0,15]},alphaThreshold:{value:[.5],type:13,handleInfo:["albedoScaleAndCutoff",3,13]},occlusion:{value:[1],type:13,handleInfo:["pbrParams",0,13]},roughness:{value:[.8],type:13,handleInfo:["pbrParams",1,13]},metallic:{value:[.6],type:13,handleInfo:["pbrParams",2,13]},SpecularIntensity:{value:[.5],type:13,handleInfo:["pbrParams",3,13]},normalStrenth:{value:[1],type:13,handleInfo:["miscParams",0,13]},emissive:{value:[0,0,0,1],type:16},emissiveScale:{value:[1,1,1],type:15,handleInfo:["emissiveScaleParam",0,15]},mainTexture:{value:"grey",type:28,handleInfo:["albedoMap",0,28]},normalMap:{value:"normal",type:28},pbrMap:{value:"grey",type:28},metallicRoughnessMap:{value:"grey",type:28},occlusionMap:{value:"white",type:28},emissiveMap:{value:"grey",type:28},albedo:{type:16,value:[1,1,1,1]},albedoScaleAndCutoff:{type:16,value:[1,1,1,.5]},pbrParams:{type:16,value:[1,.8,.6,.5]},miscParams:{type:16,value:[1,0,0,0]},emissiveScaleParam:{type:16,value:[1,1,1,0]},albedoMap:{type:28,value:"grey"}}},{phase:"forward-add",propertyIndex:0,embeddedMacros:{CC_FORWARD_ADD:!0},blendState:{targets:[{blend:!0,blendSrc:1,blendDst:1,blendSrcAlpha:0,blendDstAlpha:1}]},program:"standard|standard-vs|standard-fs",depthStencilState:{depthFunc:2,depthTest:!0,depthWrite:!1},properties:{tilingOffset:{value:[1,1,0,0],type:16},mainColor:{value:[1,1,1,1],type:16,handleInfo:["albedo",0,16]},albedoScale:{value:[1,1,1],type:15,handleInfo:["albedoScaleAndCutoff",0,15]},alphaThreshold:{value:[.5],type:13,handleInfo:["albedoScaleAndCutoff",3,13]},occlusion:{value:[1],type:13,handleInfo:["pbrParams",0,13]},roughness:{value:[.8],type:13,handleInfo:["pbrParams",1,13]},metallic:{value:[.6],type:13,handleInfo:["pbrParams",2,13]},SpecularIntensity:{value:[.5],type:13,handleInfo:["pbrParams",3,13]},normalStrenth:{value:[1],type:13,handleInfo:["miscParams",0,13]},emissive:{value:[0,0,0,1],type:16},emissiveScale:{value:[1,1,1],type:15,handleInfo:["emissiveScaleParam",0,15]},mainTexture:{value:"grey",type:28,handleInfo:["albedoMap",0,28]},normalMap:{value:"normal",type:28},pbrMap:{value:"grey",type:28},metallicRoughnessMap:{value:"grey",type:28},occlusionMap:{value:"white",type:28},emissiveMap:{value:"grey",type:28},albedo:{type:16,value:[1,1,1,1]},albedoScaleAndCutoff:{type:16,value:[1,1,1,.5]},pbrParams:{type:16,value:[1,.8,.6,.5]},miscParams:{type:16,value:[1,0,0,0]},emissiveScaleParam:{type:16,value:[1,1,1,0]},albedoMap:{type:28,value:"grey"}}},{phase:"shadow-caster",propertyIndex:0,rasterizerState:{cullMode:1},program:"standard|shadow-caster-vs:vert|shadow-caster-fs:frag",properties:{tilingOffset:{value:[1,1,0,0],type:16},mainColor:{value:[1,1,1,1],type:16,handleInfo:["albedo",0,16]},albedoScale:{value:[1,1,1],type:15,handleInfo:["albedoScaleAndCutoff",0,15]},alphaThreshold:{value:[.5],type:13,handleInfo:["albedoScaleAndCutoff",3,13]},occlusion:{value:[1],type:13,handleInfo:["pbrParams",0,13]},roughness:{value:[.8],type:13,handleInfo:["pbrParams",1,13]},metallic:{value:[.6],type:13,handleInfo:["pbrParams",2,13]},normalStrenth:{value:[1],type:13,handleInfo:["pbrParams",3,13]},emissive:{value:[0,0,0,1],type:16},emissiveScale:{value:[1,1,1],type:15,handleInfo:["emissiveScaleParam",0,15]},mainTexture:{value:"grey",type:28,handleInfo:["albedoMap",0,28]},albedo:{type:16,value:[1,1,1,1]},albedoScaleAndCutoff:{type:16,value:[1,1,1,.5]},pbrParams:{type:16,value:[1,.8,.6,1]},emissiveScaleParam:{type:16,value:[1,1,1,0]},albedoMap:{type:28,value:"grey"}}}]}],shaders:[{name:"standard|standard-vs|standard-fs",hash:3887038508,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:217,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:60},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]},{name:"CCShadow",defines:[]}],samplerTextures:[{name:"cc_shadowMap",defines:["CC_RECEIVE_SHADOW"]},{name:"cc_spotLightingMap",defines:["CC_RECEIVE_SHADOW"]},{name:"cc_environment",defines:["CC_USE_IBL"]}]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]},{name:"CCForwardLight",defines:["CC_FORWARD_ADD"]}],samplerTextures:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"cc_lightingMap",defines:["USE_LIGHTMAP","!USE_BATCHING","!CC_FORWARD_ADD"]}]}},defines:[{name:"CC_USE_MORPH",type:"boolean"},{name:"CC_MORPH_TARGET_COUNT",type:"number",range:[2,8]},{name:"CC_MORPH_PRECOMPUTED",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean"},{name:"CC_USE_SKINNING",type:"boolean"},{name:"CC_USE_BAKED_ANIMATION",type:"boolean"},{name:"USE_INSTANCING",type:"boolean"},{name:"USE_BATCHING",type:"boolean"},{name:"USE_LIGHTMAP",type:"boolean"},{name:"CC_USE_FOG",type:"number",range:[0,4]},{name:"CC_FORWARD_ADD",type:"boolean"},{name:"CC_RECEIVE_SHADOW",type:"boolean"},{name:"USE_VERTEX_COLOR",type:"boolean"},{name:"USE_NORMAL_MAP",type:"boolean"},{name:"HAS_SECOND_UV",type:"boolean"},{name:"SAMPLE_FROM_RT",type:"boolean"},{name:"CC_USE_IBL",type:"number",range:[0,2]},{name:"CC_USE_HDR",type:"boolean"},{name:"USE_ALBEDO_MAP",type:"boolean"},{name:"ALBEDO_UV",type:"string",options:["v_uv","v_uv1"]},{name:"NORMAL_UV",type:"string",options:["v_uv","v_uv1"]},{name:"PBR_UV",type:"string",options:["v_uv","v_uv1"]},{name:"USE_PBR_MAP",type:"boolean"},{name:"USE_METALLIC_ROUGHNESS_MAP",type:"boolean"},{name:"USE_OCCLUSION_MAP",type:"boolean"},{name:"USE_EMISSIVE_MAP",type:"boolean"},{name:"EMISSIVE_UV",type:"string",options:["v_uv","v_uv1"]},{name:"USE_ALPHA_TEST",type:"boolean"},{name:"ALPHA_TEST_CHANNEL",type:"string",options:["a","r"]},{name:"CC_PIPELINE_TYPE",type:"number",range:[0,1]},{name:"CC_STANDARD_TRANSPARENT",type:"boolean"}],blocks:[{name:"Constants",defines:[],binding:0,stageFlags:17,members:[{name:"tilingOffset",type:16,count:1},{name:"albedo",type:16,count:1},{name:"albedoScaleAndCutoff",type:16,count:1},{name:"pbrParams",type:16,count:1},{name:"miscParams",type:16,count:1},{name:"emissive",type:16,count:1},{name:"emissiveScaleParam",type:16,count:1}]}],samplerTextures:[{name:"albedoMap",type:28,count:1,defines:["USE_ALBEDO_MAP"],stageFlags:16,binding:1},{name:"normalMap",type:28,count:1,defines:["USE_NORMAL_MAP"],stageFlags:16,binding:2},{name:"pbrMap",type:28,count:1,defines:["USE_PBR_MAP"],stageFlags:16,binding:3},{name:"metallicRoughnessMap",type:28,count:1,defines:["USE_METALLIC_ROUGHNESS_MAP"],stageFlags:16,binding:4},{name:"occlusionMap",type:28,count:1,defines:["USE_OCCLUSION_MAP"],stageFlags:16,binding:5},{name:"emissiveMap",type:28,count:1,defines:["USE_EMISSIVE_MAP"],stageFlags:16,binding:6}],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2},{name:"a_tangent",type:16,count:1,defines:[],stageFlags:1,format:44,location:3},{name:"a_vertexId",type:13,count:1,defines:["CC_USE_MORPH"],stageFlags:1,format:11,location:6},{name:"a_joints",type:"u32vec4",count:1,defines:["CC_USE_SKINNING"],stageFlags:1,location:4},{name:"a_weights",type:16,count:1,defines:["CC_USE_SKINNING"],stageFlags:1,format:44,location:5},{name:"a_jointAnimInfo",type:16,count:1,defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:7},{name:"a_matWorld0",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:8},{name:"a_matWorld1",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:9},{name:"a_matWorld2",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:10},{name:"a_lightingMapUVParam",type:16,count:1,defines:["USE_INSTANCING","USE_LIGHTMAP"],stageFlags:1,format:44,isInstanced:!0,location:11},{name:"a_dyn_batch_id",type:13,count:1,defines:["!USE_INSTANCING","USE_BATCHING"],stageFlags:1,format:11,location:12},{name:"a_color",type:16,count:1,defines:["USE_VERTEX_COLOR"],stageFlags:1,format:44,location:13},{name:"a_texCoord1",type:14,count:1,defines:[],stageFlags:1,format:21,location:14}]},{name:"standard|shadow-caster-vs:vert|shadow-caster-fs:frag",hash:3621922986,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:180,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:23},globals:{blocks:[{name:"CCShadow",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]}],samplerTextures:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}]}},defines:[{name:"CC_USE_MORPH",type:"boolean"},{name:"CC_MORPH_TARGET_COUNT",type:"number",range:[2,8]},{name:"CC_MORPH_PRECOMPUTED",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean"},{name:"CC_USE_SKINNING",type:"boolean"},{name:"CC_USE_BAKED_ANIMATION",type:"boolean"},{name:"USE_INSTANCING",type:"boolean"},{name:"USE_BATCHING",type:"boolean"},{name:"USE_LIGHTMAP",type:"boolean"},{name:"HAS_SECOND_UV",type:"boolean"},{name:"USE_ALBEDO_MAP",type:"boolean"},{name:"ALBEDO_UV",type:"string",options:["v_uv","v_uv1"]},{name:"USE_ALPHA_TEST",type:"boolean"},{name:"ALPHA_TEST_CHANNEL",type:"string",options:["a","r"]}],blocks:[{name:"Constants",defines:[],binding:0,stageFlags:17,members:[{name:"tilingOffset",type:16,count:1},{name:"albedo",type:16,count:1},{name:"albedoScaleAndCutoff",type:16,count:1},{name:"pbrParams",type:16,count:1},{name:"miscParams",type:16,count:1},{name:"emissive",type:16,count:1},{name:"emissiveScaleParam",type:16,count:1}]}],samplerTextures:[{name:"albedoMap",type:28,count:1,defines:["USE_ALBEDO_MAP"],stageFlags:16,binding:1}],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2},{name:"a_tangent",type:16,count:1,defines:[],stageFlags:1,format:44,location:3},{name:"a_vertexId",type:13,count:1,defines:["CC_USE_MORPH"],stageFlags:1,format:11,location:6},{name:"a_joints",type:"u32vec4",count:1,defines:["CC_USE_SKINNING"],stageFlags:1,location:4},{name:"a_weights",type:16,count:1,defines:["CC_USE_SKINNING"],stageFlags:1,format:44,location:5},{name:"a_jointAnimInfo",type:16,count:1,defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:7},{name:"a_matWorld0",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:8},{name:"a_matWorld1",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:9},{name:"a_matWorld2",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:10},{name:"a_lightingMapUVParam",type:16,count:1,defines:["USE_INSTANCING","USE_LIGHTMAP"],stageFlags:1,format:44,isInstanced:!0,location:11},{name:"a_dyn_batch_id",type:13,count:1,defines:["!USE_INSTANCING","USE_BATCHING"],stageFlags:1,format:11,location:12},{name:"a_texCoord1",type:14,count:1,defines:[],stageFlags:1,format:21,location:13}]}]},{name:"terrain",techniques:[{name:"opaque",passes:[{program:"terrain|terrain-vs|terrain-fs",properties:{UVScale:{value:[1,1,1,1],type:16},lightMapUVParam:{value:[0,0,0,0],type:16},metallic:{value:[0,0,0,0],type:16},roughness:{value:[1,1,1,1],type:16},weightMap:{value:"black",type:28},detailMap0:{value:"grey",type:28},detailMap1:{value:"grey",type:28},detailMap2:{value:"grey",type:28},detailMap3:{value:"grey",type:28},normalMap0:{value:"normal",type:28},normalMap1:{value:"normal",type:28},normalMap2:{value:"normal",type:28},normalMap3:{value:"normal",type:28},lightMap:{value:"grey",type:28}}},{phase:"deferred",propertyIndex:0,blendState:{targets:[{blend:!1},{blend:!1},{blend:!1},{blend:!1}]},program:"terrain|terrain-vs|terrain-fs",properties:{UVScale:{value:[1,1,1,1],type:16},lightMapUVParam:{value:[0,0,0,0],type:16},metallic:{value:[0,0,0,0],type:16},roughness:{value:[1,1,1,1],type:16},weightMap:{value:"black",type:28},detailMap0:{value:"grey",type:28},detailMap1:{value:"grey",type:28},detailMap2:{value:"grey",type:28},detailMap3:{value:"grey",type:28},normalMap0:{value:"normal",type:28},normalMap1:{value:"normal",type:28},normalMap2:{value:"normal",type:28},normalMap3:{value:"normal",type:28},lightMap:{value:"grey",type:28}}},{phase:"forward-add",propertyIndex:0,embeddedMacros:{CC_FORWARD_ADD:!0},blendState:{targets:[{blend:!0,blendSrc:1,blendDst:1,blendSrcAlpha:0,blendDstAlpha:1}]},program:"terrain|terrain-vs|terrain-fs",depthStencilState:{depthFunc:2,depthTest:!0,depthWrite:!1},properties:{UVScale:{value:[1,1,1,1],type:16},lightMapUVParam:{value:[0,0,0,0],type:16},metallic:{value:[0,0,0,0],type:16},roughness:{value:[1,1,1,1],type:16},weightMap:{value:"black",type:28},detailMap0:{value:"grey",type:28},detailMap1:{value:"grey",type:28},detailMap2:{value:"grey",type:28},detailMap3:{value:"grey",type:28},normalMap0:{value:"normal",type:28},normalMap1:{value:"normal",type:28},normalMap2:{value:"normal",type:28},normalMap3:{value:"normal",type:28},lightMap:{value:"grey",type:28}}},{phase:"shadow-add",propertyIndex:0,rasterizerState:{cullMode:2},program:"terrain|shadow-caster-vs:vert|shadow-caster-fs:frag"}]}],shaders:[{name:"terrain|terrain-vs|terrain-fs",hash:1309646336,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:64,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:55},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]},{name:"CCShadow",defines:[]}],samplerTextures:[{name:"cc_shadowMap",defines:["CC_RECEIVE_SHADOW"]},{name:"cc_spotLightingMap",defines:["CC_RECEIVE_SHADOW"]},{name:"cc_environment",defines:["CC_USE_IBL"]}]},locals:{blocks:[{name:"CCLocal",defines:[]},{name:"CCForwardLight",defines:["CC_FORWARD_ADD"]}],samplerTextures:[{name:"cc_lightingMap",defines:["USE_LIGHTMAP","!USE_BATCHING","!CC_FORWARD_ADD"]}]}},defines:[{name:"CC_USE_FOG",type:"number",range:[0,4]},{name:"CC_FORWARD_ADD",type:"boolean"},{name:"CC_RECEIVE_SHADOW",type:"boolean"},{name:"USE_NORMALMAP",type:"boolean"},{name:"USE_LIGHTMAP",type:"boolean"},{name:"CC_USE_IBL",type:"number",range:[0,2]},{name:"USE_BATCHING",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"},{name:"LAYERS",type:"number",range:[0,4]},{name:"USE_PBR",type:"boolean"},{name:"CC_PIPELINE_TYPE",type:"number",range:[0,1]},{name:"CC_STANDARD_TRANSPARENT",type:"boolean"}],blocks:[{name:"TexCoords",defines:[],binding:0,stageFlags:1,members:[{name:"UVScale",type:16,count:1},{name:"lightMapUVParam",type:16,count:1}]},{name:"PbrParams",defines:[],binding:1,stageFlags:16,members:[{name:"metallic",type:16,count:1},{name:"roughness",type:16,count:1}]}],samplerTextures:[{name:"weightMap",type:28,count:1,defines:[],stageFlags:16,binding:2},{name:"detailMap0",type:28,count:1,defines:[],stageFlags:16,binding:3},{name:"detailMap1",type:28,count:1,defines:[],stageFlags:16,binding:4},{name:"detailMap2",type:28,count:1,defines:[],stageFlags:16,binding:5},{name:"detailMap3",type:28,count:1,defines:[],stageFlags:16,binding:6},{name:"normalMap0",type:28,count:1,defines:[],stageFlags:16,binding:7},{name:"normalMap1",type:28,count:1,defines:[],stageFlags:16,binding:8},{name:"normalMap2",type:28,count:1,defines:[],stageFlags:16,binding:9},{name:"normalMap3",type:28,count:1,defines:[],stageFlags:16,binding:10},{name:"lightMap",type:28,count:1,defines:[],stageFlags:16,binding:11}],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2}]},{name:"terrain|shadow-caster-vs:vert|shadow-caster-fs:frag",hash:1471860764,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:62,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:0},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]},{name:"CCShadow",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCLocal",defines:[]}],samplerTextures:[]}},defines:[],blocks:[],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2}]}]},{name:"unlit",techniques:[{name:"opaque",passes:[{program:"unlit|unlit-vs:vert|unlit-fs:frag",properties:{mainTexture:{value:"grey",type:28},tilingOffset:{value:[1,1,0,0],type:16},mainColor:{value:[1,1,1,1],type:16},colorScale:{value:[1,1,1],type:15,handleInfo:["colorScaleAndCutoff",0,15]},alphaThreshold:{value:[.5],type:13,handleInfo:["colorScaleAndCutoff",3,13]},color:{type:16,handleInfo:["mainColor",0,16]},colorScaleAndCutoff:{type:16,value:[1,1,1,.5]}}}]}],shaders:[{name:"unlit|unlit-vs:vert|unlit-fs:frag",hash:1017648509,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:195,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:39},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]}],samplerTextures:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}]}},defines:[{name:"CC_USE_MORPH",type:"boolean"},{name:"CC_MORPH_TARGET_COUNT",type:"number",range:[2,8]},{name:"CC_MORPH_PRECOMPUTED",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean"},{name:"CC_USE_SKINNING",type:"boolean"},{name:"CC_USE_BAKED_ANIMATION",type:"boolean"},{name:"USE_INSTANCING",type:"boolean"},{name:"USE_BATCHING",type:"boolean"},{name:"USE_LIGHTMAP",type:"boolean"},{name:"CC_USE_FOG",type:"number",range:[0,4]},{name:"CC_FORWARD_ADD",type:"boolean"},{name:"USE_VERTEX_COLOR",type:"boolean"},{name:"USE_TEXTURE",type:"boolean"},{name:"SAMPLE_FROM_RT",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"},{name:"USE_ALPHA_TEST",type:"boolean"},{name:"ALPHA_TEST_CHANNEL",type:"string",options:["a","r","g","b"]}],blocks:[{name:"TexCoords",defines:["USE_TEXTURE"],binding:0,stageFlags:1,members:[{name:"tilingOffset",type:16,count:1}]},{name:"Constant",defines:[],binding:1,stageFlags:16,members:[{name:"mainColor",type:16,count:1},{name:"colorScaleAndCutoff",type:16,count:1}]}],samplerTextures:[{name:"mainTexture",type:28,count:1,defines:["USE_TEXTURE"],stageFlags:16,binding:2}],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2},{name:"a_tangent",type:16,count:1,defines:[],stageFlags:1,format:44,location:3},{name:"a_vertexId",type:13,count:1,defines:["CC_USE_MORPH"],stageFlags:1,format:11,location:6},{name:"a_joints",type:"u32vec4",count:1,defines:["CC_USE_SKINNING"],stageFlags:1,location:4},{name:"a_weights",type:16,count:1,defines:["CC_USE_SKINNING"],stageFlags:1,format:44,location:5},{name:"a_jointAnimInfo",type:16,count:1,defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:7},{name:"a_matWorld0",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:8},{name:"a_matWorld1",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:9},{name:"a_matWorld2",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:10},{name:"a_lightingMapUVParam",type:16,count:1,defines:["USE_INSTANCING","USE_LIGHTMAP"],stageFlags:1,format:44,isInstanced:!0,location:11},{name:"a_dyn_batch_id",type:13,count:1,defines:["!USE_INSTANCING","USE_BATCHING"],stageFlags:1,format:11,location:12},{name:"a_color",type:16,count:1,defines:["USE_VERTEX_COLOR"],stageFlags:1,format:44,location:13}]}]},{name:"deferred-lighting",techniques:[{passes:[{phase:"deferred-lighting",program:"deferred-lighting|lighting-vs|lighting-fs",depthStencilState:{depthFunc:4,depthTest:!0,depthWrite:!1}}]}],shaders:[{name:"deferred-lighting|lighting-vs|lighting-fs",hash:1887156831,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:37,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:53},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]},{name:"CCShadow",defines:[]}],samplerTextures:[{name:"cc_shadowMap",defines:["CC_RECEIVE_SHADOW"]},{name:"cc_spotLightingMap",defines:["CC_RECEIVE_SHADOW"]},{name:"cc_environment",defines:["CC_USE_IBL"]},{name:"cc_gbuffer_albedoMap",defines:[]},{name:"cc_gbuffer_positionMap",defines:[]},{name:"cc_gbuffer_normalMap",defines:[]},{name:"cc_gbuffer_emissiveMap",defines:[]}]},locals:{blocks:[{name:"CCForwardLight",defines:[]}],samplerTextures:[]}},defines:[{name:"CC_RECEIVE_SHADOW",type:"boolean"},{name:"CC_USE_IBL",type:"number",range:[0,2]},{name:"USE_LIGHTMAP",type:"boolean"},{name:"USE_BATCHING",type:"boolean"},{name:"CC_FORWARD_ADD",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"},{name:"CC_PIPELINE_TYPE",type:"number",range:[0,1]},{name:"CC_STANDARD_TRANSPARENT",type:"boolean"},{name:"CC_USE_FOG",type:"number",range:[0,4]}],blocks:[],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2},{name:"a_tangent",type:16,count:1,defines:[],stageFlags:1,format:44,location:3}]}]},{name:"planar-shadow",techniques:[{passes:[{phase:"planarShadow",blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendDstAlpha:4}]},program:"planar-shadow|planar-shadow-vs:vert|planar-shadow-fs:frag",depthStencilState:{depthTest:!0,depthWrite:!1,stencilTestFront:!0,stencilFuncFront:5,stencilPassOpFront:2,stencilRefBack:128,stencilRefFront:128,stencilReadMaskBack:128,stencilReadMaskFront:128,stencilWriteMaskBack:128,stencilWriteMaskFront:128}}]}],shaders:[{name:"planar-shadow|planar-shadow-vs:vert|planar-shadow-fs:frag",hash:649108546,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:210,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:53},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]},{name:"CCShadow",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]}],samplerTextures:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}]}},defines:[{name:"CC_USE_MORPH",type:"boolean"},{name:"CC_MORPH_TARGET_COUNT",type:"number",range:[2,8]},{name:"CC_MORPH_PRECOMPUTED",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean"},{name:"CC_USE_SKINNING",type:"boolean"},{name:"CC_USE_BAKED_ANIMATION",type:"boolean"},{name:"USE_INSTANCING",type:"boolean"},{name:"USE_BATCHING",type:"boolean"},{name:"USE_LIGHTMAP",type:"boolean"},{name:"CC_USE_HDR",type:"boolean"}],blocks:[],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2},{name:"a_tangent",type:16,count:1,defines:[],stageFlags:1,format:44,location:3},{name:"a_vertexId",type:13,count:1,defines:["CC_USE_MORPH"],stageFlags:1,format:11,location:6},{name:"a_joints",type:"u32vec4",count:1,defines:["CC_USE_SKINNING"],stageFlags:1,location:4},{name:"a_weights",type:16,count:1,defines:["CC_USE_SKINNING"],stageFlags:1,format:44,location:5},{name:"a_jointAnimInfo",type:16,count:1,defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:7},{name:"a_matWorld0",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:8},{name:"a_matWorld1",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:9},{name:"a_matWorld2",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:10},{name:"a_lightingMapUVParam",type:16,count:1,defines:["USE_INSTANCING","USE_LIGHTMAP"],stageFlags:1,format:44,isInstanced:!0,location:11},{name:"a_dyn_batch_id",type:13,count:1,defines:["!USE_INSTANCING","USE_BATCHING"],stageFlags:1,format:11,location:12}]}]},{name:"post-process",techniques:[{passes:[{phase:"post-process",blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendSrcAlpha:2,blendDstAlpha:4}]},program:"post-process|post-process-vs|post-process-fs",depthStencilState:{depthTest:!1,depthWrite:!1}}]}],shaders:[{name:"post-process|post-process-vs|post-process-fs",hash:1780456825,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:145,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:37},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[{name:"cc_lighting_resultMap",defines:[]}]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]}],samplerTextures:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}]}},defines:[{name:"CC_USE_MORPH",type:"boolean"},{name:"CC_MORPH_TARGET_COUNT",type:"number",range:[2,8]},{name:"CC_MORPH_PRECOMPUTED",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean"},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean"},{name:"CC_USE_SKINNING",type:"boolean"},{name:"CC_USE_BAKED_ANIMATION",type:"boolean"},{name:"USE_INSTANCING",type:"boolean"}],blocks:[],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2},{name:"a_tangent",type:16,count:1,defines:[],stageFlags:1,format:44,location:3},{name:"a_vertexId",type:13,count:1,defines:["CC_USE_MORPH"],stageFlags:1,format:11,location:6},{name:"a_joints",type:"u32vec4",count:1,defines:["CC_USE_SKINNING"],stageFlags:1,location:4},{name:"a_weights",type:16,count:1,defines:["CC_USE_SKINNING"],stageFlags:1,format:44,location:5},{name:"a_jointAnimInfo",type:16,count:1,defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:7}]}]},{name:"skybox",techniques:[{passes:[{rasterizerState:{cullMode:0},program:"skybox|sky-vs:vert|sky-fs:frag",priority:245,depthStencilState:{depthTest:!0,depthWrite:!1}}]}],shaders:[{name:"skybox|sky-vs:vert|sky-fs:frag",hash:3169038185,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:37,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:37},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[{name:"cc_environment",defines:[]}]},locals:{blocks:[],samplerTextures:[]}},defines:[{name:"CC_USE_IBL",type:"number",range:[0,2]},{name:"CC_USE_HDR",type:"boolean"},{name:"USE_RGBE_CUBEMAP",type:"boolean"}],blocks:[],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2},{name:"a_tangent",type:16,count:1,defines:[],stageFlags:1,format:44,location:3}]}]},{name:"profiler",techniques:[{passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendDstAlpha:4}]},rasterizerState:{cullMode:0},program:"profiler|profiler-vs:vert|profiler-fs:frag",depthStencilState:{depthTest:!1,depthWrite:!1}}]}],shaders:[{name:"profiler|profiler-vs:vert|profiler-fs:frag",hash:3552712539,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:58,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:37},globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[],samplerTextures:[]}},defines:[{name:"CC_USE_HDR",type:"boolean"}],blocks:[{name:"Constants",defines:[],binding:0,stageFlags:1,members:[{name:"offset",type:16,count:1}]},{name:"PerFrameInfo",defines:[],binding:1,stageFlags:1,members:[{name:"digits",type:16,count:20}]}],samplerTextures:[{name:"mainTexture",type:28,count:1,defines:[],stageFlags:16,binding:2}],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_color",type:16,count:1,defines:[],stageFlags:1,format:44,location:1}]}]},{name:"splash-screen",techniques:[{name:"default",passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendDstAlpha:4}]},rasterizerState:{cullMode:0},program:"splash-screen|splash-screen-vs:vert|splash-screen-fs:frag",depthStencilState:{depthTest:!1,depthWrite:!1},properties:{mainTexture:{value:"grey",type:28},resolution:{value:[640,960],type:14,handleInfo:["u_buffer0",0,14]},precent:{value:[.5],type:13,handleInfo:["u_buffer0",2,13]},scale:{value:[200,500],type:14,handleInfo:["u_buffer1",0,14]},translate:{value:[320,480],type:14,handleInfo:["u_buffer1",2,14]},u_buffer0:{type:16,value:[640,960,.5,0]},u_buffer1:{type:16,value:[200,500,320,480]}}}]}],shaders:[{name:"splash-screen|splash-screen-vs:vert|splash-screen-fs:frag",hash:1349506124,builtins:{statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:6,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:0},globals:{blocks:[],samplerTextures:[]},locals:{blocks:[],samplerTextures:[]}},defines:[],blocks:[{name:"Constant",defines:[],binding:0,stageFlags:1,members:[{name:"u_buffer0",type:16,count:1},{name:"u_buffer1",type:16,count:1},{name:"u_projection",type:25,count:1}]}],samplerTextures:[{name:"mainTexture",type:28,count:1,defines:[],stageFlags:16,binding:1}],attributes:[{name:"a_position",type:14,count:1,defines:[],stageFlags:1,format:21,location:0},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:1}]}]}]),bd=4026531840,Cd=264241152,Sd=3145728,Ed=1032192;let wd;!function(e){e[e.BUFFER=0]="BUFFER",e[e.TEXTURE=1]="TEXTURE"}(wd||(wd={}));const Td=(e,t,n,i,o=0)=>e<<28&bd|i<<22&Cd|t<<20&Sd|n<<14&Ed|16383&o,Pd=e=>(e&bd)>>>28,Id=e=>(e&Cd)>>>22,Rd=e=>(e&Ed)>>>14,Nd=e=>16383&e,Dd=(e,t)=>e&~Cd|t<<22&Cd,Md={[jo.UNKNOWN]:()=>console.warn("illegal uniform handle"),[jo.INT]:(e,t,n=0)=>e[n],[jo.INT2]:(e,t,n=0)=>si.fromArray(t,e,n),[jo.INT3]:(e,t,n=0)=>Gn.fromArray(t,e,n),[jo.INT4]:(e,t,n=0)=>ui.fromArray(t,e,n),[jo.FLOAT]:(e,t,n=0)=>e[n],[jo.FLOAT2]:(e,t,n=0)=>si.fromArray(t,e,n),[jo.FLOAT3]:(e,t,n=0)=>Gn.fromArray(t,e,n),[jo.FLOAT4]:(e,t,n=0)=>ui.fromArray(t,e,n),[jo.MAT3]:(e,t,n=0)=>qn.fromArray(t,e,n),[jo.MAT4]:(e,t,n=0)=>ii.fromArray(t,e,n)},Od={[jo.UNKNOWN]:()=>console.warn("illegal uniform handle"),[jo.INT]:(e,t,n=0)=>e[n]=t,[jo.INT2]:(e,t,n=0)=>si.toArray(e,t,n),[jo.INT3]:(e,t,n=0)=>Gn.toArray(e,t,n),[jo.INT4]:(e,t,n=0)=>ui.toArray(e,t,n),[jo.FLOAT]:(e,t,n=0)=>e[n]=t,[jo.FLOAT2]:(e,t,n=0)=>si.toArray(e,t,n),[jo.FLOAT3]:(e,t,n=0)=>Gn.toArray(e,t,n),[jo.FLOAT4]:(e,t,n=0)=>ui.toArray(e,t,n),[jo.MAT3]:(e,t,n=0)=>qn.toArray(e,t,n),[jo.MAT4]:(e,t,n=0)=>ii.toArray(e,t,n)},zd=[Object.freeze([0]),Object.freeze([0,0]),Object.freeze([0,0,0,0]),Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])];function Ld(e){switch(e){case jo.BOOL:case jo.INT:case jo.UINT:case jo.FLOAT:return zd[0];case jo.BOOL2:case jo.INT2:case jo.UINT2:case jo.FLOAT2:return zd[1];case jo.BOOL4:case jo.INT4:case jo.UINT4:case jo.FLOAT4:return zd[2];case jo.MAT4:return zd[3];case jo.SAMPLER2D:return"default-texture";case jo.SAMPLER_CUBE:return"default-cube-texture"}return zd[0]}function Fd(e,t){const n=Object.entries(t);let i=!1;for(let t=0;t<n.length;t++)e[n[t][0]]!==n[t][1]&&(e[n[t][0]]=n[t][1],i=!0);return i}const Ud=new lr;function Bd(e){return Math.ceil(Math.log2(Math.max(e,2)))}function kd(e,t){switch(e.type){case"boolean":return"number"==typeof t?t.toString():t?"1":"0";case"string":return void 0!==t?t:e.options[0];case"number":return void 0!==t?t.toString():e.range[0].toString();default:return console.warn(`unknown define type '${e.type}'`),"-1"}}function jd(e,t,n,i,o){const a=e.builtins[i],r=[];for(let e=0;e<a.blocks.length;e++){const t=a.blocks[e],i=n.layouts[t.name],s=i&&n.bindings.find((e=>e.binding===i.binding));i&&s&&s.descriptorType&br?(r.push(i),o&&!o.includes(s)&&o.push(s)):console.warn(`builtin UBO '${t.name}' not available!`)}Array.prototype.unshift.apply(t.gfxBlocks,r);const s=[];for(let e=0;e<a.samplerTextures.length;e++){const t=a.samplerTextures[e],i=n.layouts[t.name],r=i&&n.bindings.find((e=>e.binding===i.binding));i&&r&&r.descriptorType&Cr?(s.push(i),o&&!o.includes(r)&&o.push(r)):console.warn(`builtin samplerTexture '${t.name}' not available!`)}Array.prototype.unshift.apply(t.gfxSamplerTextures,s),o&&o.sort(((e,t)=>e.binding-t.binding))}function Gd(e){return e.members.reduce(((e,t)=>e+Rr(t.type)*t.count),0)}function Vd(e,t){for(let n=0;n<e.length;n++){const i=e[n];if("!"===i[0]){if(t[i.slice(1)])return!1}else if(!t[i])return!1}return!0}function Hd(e){switch(e.gfxAPI){case Lo.GLES2:case Lo.WEBGL:return"glsl1";case Lo.GLES3:case Lo.WEBGL2:return"glsl3";default:return"glsl4"}}const Wd=new class{constructor(){this._templates={},this._cache={},this._templateInfos={}}register(e){for(let t=0;t<e.shaders.length;t++)this.define(e.shaders[t]).effectName=e.name}define(e){const t=this._templates[e.name];if(t&&t.hash===e.hash)return t;const n={...e};let i=0;for(let e=0;e<n.defines.length;e++){const t=n.defines[e];let o=1;if("number"===t.type){const e=t.range;o=Bd(e[1]-e[0]+1),t._map=t=>t-e[0]}else"string"===t.type?(o=Bd(t.options.length),t._map=e=>Math.max(0,t.options.findIndex((t=>t===e)))):"boolean"===t.type&&(t._map=e=>e?1:0);t._offset=i,i+=o}i>31&&(n.uber=!0),n.constantMacros="";for(const e in n.builtins.statistics)n.constantMacros+=`#define ${e} ${n.builtins.statistics[e]}\n`;if(this._templates[e.name]=n,!this._templateInfos[n.hash]){const e={};e.samplerStartBinding=n.blocks.length,e.gfxBlocks=[],e.gfxSamplerTextures=[],e.bindings=[],e.blockSizes=[];for(let t=0;t<n.blocks.length;t++){const i=n.blocks[t];e.blockSizes.push(Gd(i)),e.bindings.push(new cr(i.binding,i.descriptorType||ma.UNIFORM_BUFFER,1,i.stageFlags)),e.gfxBlocks.push(new Ga($h.MATERIAL,i.binding,i.name,i.members.map((e=>new ja(e.name,e.type,e.count))),1))}for(let t=0;t<n.samplerTextures.length;t++){const i=n.samplerTextures[t];e.bindings.push(new cr(i.binding,i.descriptorType||ma.SAMPLER_TEXTURE,i.count,i.stageFlags)),e.gfxSamplerTextures.push(new Va($h.MATERIAL,i.binding,i.name,i.type,i.count))}e.gfxAttributes=[];for(let t=0;t<n.attributes.length;t++){const i=n.attributes[t];e.gfxAttributes.push(new Ka(i.name,i.format,i.isNormalized,0,i.isInstanced,i.location))}jd(n,e,qh,"locals"),e.gfxStages=[],e.gfxStages.push(new Qa(ia.VERTEX,"")),e.gfxStages.push(new Qa(ia.FRAGMENT,"")),e.handleMap=function(e){const t={};for(let n=0;n<e.blocks.length;n++){const i=e.blocks[n],o=i.members;let a=0;for(let e=0;e<o.length;e++){const n=o[e];t[n.name]=Td(wd.BUFFER,$h.MATERIAL,i.binding,n.type,a),a+=(Rr(n.type)>>2)*n.count}}for(let n=0;n<e.samplerTextures.length;n++){const i=e.samplerTextures[n];t[i.name]=Td(wd.TEXTURE,$h.MATERIAL,i.binding,i.type)}return t}(n),e.setLayouts=[],this._templateInfos[n.hash]=e}return n}getTemplate(e){return this._templates[e]}getTemplateInfo(e){const t=this._templates[e].hash;return this._templateInfos[t]}getDescriptorSetLayout(e,t,n=!1){const i=this._templates[t],o=this._templateInfos[i.hash];return o.setLayouts.length||(Ud.bindings=o.bindings,o.setLayouts[$h.MATERIAL]=e.createDescriptorSetLayout(Ud),Ud.bindings=qh.bindings,o.setLayouts[$h.LOCAL]=e.createDescriptorSetLayout(Ud)),o.setLayouts[n?$h.LOCAL:$h.MATERIAL]}hasProgram(e){return void 0!==this._templates[e]}getKey(e,t){const n=this._templates[e],i=n.defines;if(n.uber){let e="";for(let n=0;n<i.length;n++){const o=i[n],a=t[o.name];if(!a||!o._map)continue;const r=o._map(a);e+=`${o._offset}${r}|`}return`${e}${n.hash}`}let o=0;for(let e=0;e<i.length;e++){const n=i[e],a=t[n.name];a&&n._map&&(o|=n._map(a)<<n._offset)}return`${o.toString(16)}|${n.hash}`}destroyShaderByDefines(e){const t=Object.keys(e);if(!t.length)return;const n=t.map((t=>{let n=e[t];return"boolean"==typeof n&&(n=n?"1":"0"),new RegExp(`${t}${n}`)})),i=Object.keys(this._cache).filter((e=>n.every((t=>t.test(this._cache[e].name)))));for(let e=0;e<i.length;e++){const t=i[e],n=this._cache[t];x(`destroyed shader ${n.name}`),n.destroy(),delete this._cache[t]}}getGFXShader(e,t,n,i,o){Object.assign(n,i.macros),o||(o=this.getKey(t,n));const a=this._cache[o];if(a)return a;const r=this._templates[t],s=this._templateInfos[r.hash];s.pipelineLayout||(this.getDescriptorSetLayout(e,t),jd(r,s,Wh,"globals"),s.setLayouts[$h.GLOBAL]=i.descriptorSetLayout,s.pipelineLayout=e.createPipelineLayout(new ur(s.setLayouts)));const c=function(e,t){const n=[];for(let i=0;i<t.length;i++){const o=t[i],a=o.name,r=e[a],s=kd(o,r),c=!r||"0"===r;n.push({name:a,value:s,isDefault:c})}return n}(n,r.defines),l=i.constantMacros+r.constantMacros+c.reduce(((e,t)=>`${e}#define ${t.name} ${t.value}\n`),"");let _=r.glsl3;const u=Hd(e);u?_=r[u]:console.error("Invalid GFX API!"),s.gfxStages[0].source=l+_.vert,s.gfxStages[1].source=l+_.frag;const f=function(e,t,n){const i=[],o=e.attributes,a=t.gfxAttributes;for(let e=0;e<o.length;e++)Vd(o[e].defines,n)&&i.push(a[e]);return i}(r,s,n),h=function(e,t){return e+t.reduce(((e,t)=>t.isDefault?e:`${e}|${t.name}${t.value}`),"")}(t,c),p=new Za(h,s.gfxStages,f,s.gfxBlocks);return p.samplerTextures=s.gfxSamplerTextures,this._cache[o]=e.createShader(p)}};c.programLib=Wd;const qd={glsl1:[[{vert:"\nprecision mediump float;\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matViewInv;\nuniform highp mat4 cc_matViewProj;\nuniform highp mat4 cc_matWorld;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\nmat3 m = mat3(xAxis,yAxis,zAxis);\nfloat trace = m[0][0] + m[1][1] + m[2][2];\nvec4 quat;\nif (trace > 0.) {\nfloat s = 0.5 / sqrt(trace + 1.0);\nquat.w = 0.25 / s;\nquat.x = (m[2][1] - m[1][2]) * s;\nquat.y = (m[0][2] - m[2][0]) * s;\nquat.z = (m[1][0] - m[0][1]) * s;\n} else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\nfloat s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\nquat.w = (m[2][1] - m[1][2]) / s;\nquat.x = 0.25 * s;\nquat.y = (m[0][1] + m[1][0]) / s;\nquat.z = (m[0][2] + m[2][0]) / s;\n} else if (m[1][1] > m[2][2]) {\nfloat s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\nquat.w = (m[0][2] - m[2][0]) / s;\nquat.x = (m[0][1] + m[1][0]) / s;\nquat.y = 0.25 * s;\nquat.z = (m[1][2] + m[2][1]) / s;\n} else {\nfloat s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\nquat.w = (m[1][0] - m[0][1]) / s;\nquat.x = (m[0][2] + m[2][0]) / s;\nquat.y = (m[1][2] + m[2][1]) / s;\nquat.z = 0.25 * s;\n}\nfloat len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\nif (len > 0.) {\nlen = 1. / sqrt(len);\nquat.x = quat.x * len;\nquat.y = quat.y * len;\nquat.z = quat.z * len;\nquat.w = quat.w * len;\n}\nreturn quat;\n}\nvec4 quaternionFromEuler (vec3 angle){\nfloat x = angle.x / 2.;\nfloat y = angle.y / 2.;\nfloat z = angle.z / 2.;\nfloat sx = sin(x);\nfloat cx = cos(x);\nfloat sy = sin(y);\nfloat cy = cos(y);\nfloat sz = sin(z);\nfloat cz = cos(z);\nvec4 quat = vec4(0);\nquat.x = sx * cy * cz + cx * sy * sz;\nquat.y = cx * sy * cz + sx * cy * sz;\nquat.z = cx * cy * sz - sx * sy * cz;\nquat.w = cx * cy * cz - sx * sy * sz;\nreturn quat;\n}\nvec4 quatMultiply (vec4 a, vec4 b){\nvec4 quat;\nquat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\nquat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\nquat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\nquat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\nreturn quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\nfloat ix = q.w * v.x + q.y * v.z - q.z * v.y;\nfloat iy = q.w * v.y + q.z * v.x - q.x * v.z;\nfloat iz = q.w * v.z + q.x * v.y - q.y * v.x;\nfloat iw = -q.x * v.x - q.y * v.y - q.z * v.z;\nv.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\nv.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\nv.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\nvec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\nvec4 rotQuat = quatMultiply(viewQuat, q);\nrotateVecFromQuat(pos, rotQuat);\nreturn pos;\n}\nvarying mediump vec2 uv;\nvarying mediump vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n, mat4 viewInv\n) {\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\nvec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\nvec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n}\nattribute vec3 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nuniform vec4 cc_size_rotation;\nvec4 vs_main() {\nvec4 pos = vec4(a_position, 1);\npos = cc_matWorld * pos;\nvec2 vertOffset = a_texCoord.xy - 0.5;\ncomputeVertPos(pos, vertOffset, quaternionFromEuler(vec3(0., 0., cc_size_rotation.z)), vec3(cc_size_rotation.xy, 0.), cc_matViewInv);\npos = cc_matViewProj * pos;\nuv = a_texCoord.xy;\ncolor = a_color;\nreturn pos;\n}\nvoid main() { gl_Position = vs_main(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nvarying vec2 uv;\nvarying vec4 color;\nuniform sampler2D mainTexture;\nuniform vec4 tintColor;\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture2D(mainTexture, uv);\nreturn CCFragOutput(col);\n}\nvoid main() { gl_FragColor = add(); }"}],[{vert:"\nprecision highp float;\nattribute vec3 a_position;\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nvec4 frag () {\nvec4 o = vec4(1.0);\nreturn o;\n}\nvoid main() { gl_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nuniform highp mat4 cc_matViewProj;\nuniform highp mat4 cc_matWorld;\nattribute vec3 a_position;\nattribute vec4 a_color;\nvarying vec4 v_color;\nattribute float a_dist;\nvarying float v_dist;\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\npos = cc_matViewProj * cc_matWorld * pos;\nv_color = a_color;\nv_dist = a_dist;\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives: enable\n#endif\nprecision highp float;\nvarying vec4 v_color;\nvarying float v_dist;\nvec4 frag () {\nvec4 o = v_color;\n#ifdef GL_OES_standard_derivatives\nfloat aa = fwidth(v_dist);\n#else\nfloat aa = 0.05;\n#endif\nfloat alpha = 1. - smoothstep(-aa, 0., abs(v_dist) - 1.0);\no.rgb *= o.a;\no *= alpha;\nreturn o;\n}\nvoid main() { gl_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\nmat3 m = mat3(xAxis,yAxis,zAxis);\nfloat trace = m[0][0] + m[1][1] + m[2][2];\nvec4 quat;\nif (trace > 0.) {\nfloat s = 0.5 / sqrt(trace + 1.0);\nquat.w = 0.25 / s;\nquat.x = (m[2][1] - m[1][2]) * s;\nquat.y = (m[0][2] - m[2][0]) * s;\nquat.z = (m[1][0] - m[0][1]) * s;\n} else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\nfloat s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\nquat.w = (m[2][1] - m[1][2]) / s;\nquat.x = 0.25 * s;\nquat.y = (m[0][1] + m[1][0]) / s;\nquat.z = (m[0][2] + m[2][0]) / s;\n} else if (m[1][1] > m[2][2]) {\nfloat s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\nquat.w = (m[0][2] - m[2][0]) / s;\nquat.x = (m[0][1] + m[1][0]) / s;\nquat.y = 0.25 * s;\nquat.z = (m[1][2] + m[2][1]) / s;\n} else {\nfloat s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\nquat.w = (m[1][0] - m[0][1]) / s;\nquat.x = (m[0][2] + m[2][0]) / s;\nquat.y = (m[1][2] + m[2][1]) / s;\nquat.z = 0.25 * s;\n}\nfloat len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\nif (len > 0.) {\nlen = 1. / sqrt(len);\nquat.x = quat.x * len;\nquat.y = quat.y * len;\nquat.z = quat.z * len;\nquat.w = quat.w * len;\n}\nreturn quat;\n}\nmat4 matrixFromRT (vec4 q, vec3 p){\nfloat x2 = q.x + q.x;\nfloat y2 = q.y + q.y;\nfloat z2 = q.z + q.z;\nfloat xx = q.x * x2;\nfloat xy = q.x * y2;\nfloat xz = q.x * z2;\nfloat yy = q.y * y2;\nfloat yz = q.y * z2;\nfloat zz = q.z * z2;\nfloat wx = q.w * x2;\nfloat wy = q.w * y2;\nfloat wz = q.w * z2;\nreturn mat4(\n1. - (yy + zz), xy + wz, xz - wy, 0,\nxy - wz, 1. - (xx + zz), yz + wx, 0,\nxz + wy, yz - wx, 1. - (xx + yy), 0,\np.x, p.y, p.z, 1\n);\n}\nmat4 matFromRTS (vec4 q, vec3 t, vec3 s){\nfloat x = q.x, y = q.y, z = q.z, w = q.w;\nfloat x2 = x + x;\nfloat y2 = y + y;\nfloat z2 = z + z;\nfloat xx = x * x2;\nfloat xy = x * y2;\nfloat xz = x * z2;\nfloat yy = y * y2;\nfloat yz = y * z2;\nfloat zz = z * z2;\nfloat wx = w * x2;\nfloat wy = w * y2;\nfloat wz = w * z2;\nfloat sx = s.x;\nfloat sy = s.y;\nfloat sz = s.z;\nreturn mat4((1. - (yy + zz)) * sx, (xy + wz) * sx, (xz - wy) * sx, 0,\n(xy - wz) * sy, (1. - (xx + zz)) * sy, (yz + wx) * sy, 0,\n(xz + wy) * sz, (yz - wx) * sz, (1. - (xx + yy)) * sz, 0,\nt.x, t.y, t.z, 1);\n}\nvec4 quatMultiply (vec4 a, vec4 b){\nvec4 quat;\nquat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\nquat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\nquat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\nquat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\nreturn quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\nfloat ix = q.w * v.x + q.y * v.z - q.z * v.y;\nfloat iy = q.w * v.y + q.z * v.x - q.x * v.z;\nfloat iz = q.w * v.z + q.x * v.y - q.y * v.x;\nfloat iw = -q.x * v.x - q.y * v.y - q.z * v.z;\nv.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\nv.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\nv.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\nvec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\nvec4 rotQuat = quatMultiply(viewQuat, q);\nrotateVecFromQuat(pos, rotQuat);\nreturn pos;\n}\nuniform vec4 mainTiling_Offset;\nuniform vec4 frameTile_velLenScale;\nuniform vec4 scale;\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matViewInv;\nuniform highp mat4 cc_matViewProj;\nuniform highp vec4 cc_cameraPos;\nuniform highp mat4 cc_matWorld;\nvarying mediump vec2 uv;\nvarying mediump vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n, mat4 viewInv\n#endif\n#if CC_RENDER_MODE == 1\n, vec3 eye\n, vec4 velocity\n, float velocityScale\n, float lengthScale\n, float xIndex\n#endif\n) {\n#if CC_RENDER_MODE == 0\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\nvec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\nvec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n#elif CC_RENDER_MODE == 1\nvec3 camRight = normalize(cross(pos.xyz - eye, velocity.xyz)) * s.x;\nvec3 camUp = velocity.xyz * velocityScale + normalize(velocity.xyz) * lengthScale * s.y;\npos.xyz += (camRight * abs(vertOffset.x) * sign(vertOffset.y)) - camUp * xIndex;\n#elif CC_RENDER_MODE == 2\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = vec3(1, 0, 0);\nvec3 camY = vec3(0, 0, -1);\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, cross(camX, camY), q);\n#elif CC_RENDER_MODE == 3\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nrotateVecFromQuat(viewSpaceVert, q);\nvec3 camX = normalize(vec3(cc_matView[0][0], cc_matView[1][0], cc_matView[2][0]));\nvec3 camY = vec3(0, 1, 0);\nvec3 offset = camX * viewSpaceVert.x + camY * viewSpaceVert.y;\npos.xyz += offset;\n#else\npos.x += vertOffset.x;\npos.y += vertOffset.y;\n#endif\n}\nvec2 computeUV (float frameIndex, vec2 vertIndex, vec2 frameTile){\nvec2 aniUV = vec2(0, floor(frameIndex * frameTile.y));\naniUV.x = floor(frameIndex * frameTile.x * frameTile.y - aniUV.y * frameTile.x);\n#if CC_RENDER_MODE != 4\nvertIndex.y = 1. - vertIndex.y;\n#endif\nreturn (aniUV.xy + vertIndex) / vec2(frameTile.x, frameTile.y);\n}\nuniform vec4 u_sampleInfo;\nuniform vec4 u_worldRot;\nuniform vec4 u_timeDelta;\nattribute vec4 a_position_starttime;\nattribute vec4 a_size_uv;\nattribute vec4 a_rotation_uv;\nattribute vec4 a_color;\nattribute vec4 a_dir_life;\nattribute float a_rndSeed;\n#if CC_RENDER_MODE == 4\nattribute vec3 a_texCoord;\nattribute vec3 a_texCoord3;\nattribute vec3 a_normal;\nattribute vec4 a_color1;\n#endif\nvec3 unpackCurveData (sampler2D tex, vec2 coord) {\nvec4 a = texture2D(tex, coord);\nvec4 b = texture2D(tex, coord + u_sampleInfo.y);\nfloat c = fract(coord.x * u_sampleInfo.x);\nreturn mix(a.xyz, b.xyz, c);\n}\nvec3 unpackCurveData (sampler2D tex, vec2 coord, out float w) {\nvec4 a = texture2D(tex, coord);\nvec4 b = texture2D(tex, coord + u_sampleInfo.y);\nfloat c = fract(coord.x * u_sampleInfo.x);\nw = mix(a.w, b.w, c);\nreturn mix(a.xyz, b.xyz, c);\n}\nfloat pseudoRandom (float seed) {\nseed = mod(seed, 233280.);\nfloat q = (seed * 9301. + 49297.) / 233280.;\nreturn fract(q);\n}\n#if COLOR_OVER_TIME_MODULE_ENABLE\nuniform sampler2D color_over_time_tex0;\nuniform int u_color_mode;\n#endif\n#if ROTATION_OVER_TIME_MODULE_ENABLE\nuniform sampler2D rotation_over_time_tex0;\nuniform int u_rotation_mode;\n#endif\n#if SIZE_OVER_TIME_MODULE_ENABLE\nuniform sampler2D size_over_time_tex0;\nuniform int u_size_mode;\n#endif\n#if FORCE_OVER_TIME_MODULE_ENABLE\nuniform sampler2D force_over_time_tex0;\nuniform int u_force_mode;\nuniform int u_force_space;\n#endif\n#if VELOCITY_OVER_TIME_MODULE_ENABLE\nuniform sampler2D velocity_over_time_tex0;\nuniform int u_velocity_mode;\nuniform int u_velocity_space;\n#endif\n#if TEXTURE_ANIMATION_MODULE_ENABLE\nuniform sampler2D texture_animation_tex0;\nuniform vec4 u_anim_info;\n#endif\nfloat repeat (float t, float length) {\nreturn t - floor(t / length) * length;\n}\nvec4 rotateQuat (vec4 p, vec4 q) {\nvec3 iv = cross(q.xyz, p.xyz) + q.w * p.xyz;\nvec3 res = p.xyz + 2.0 * cross(q.xyz, iv);\nreturn vec4(res.xyz, p.w);\n}\nvec4 toQuat(vec3 rotation) {\nvec3 rotTmp = rotation;\nfloat mulFactor = 1.0;\nif (rotTmp.x > 10.0 * 0.5) {\nrotTmp.x -= 10.0;\nmulFactor = -1.0;\n}\nvec4 rot = vec4(rotTmp, 0.0);\nrot.w = mulFactor * sqrt(1.0 - rot.x * rot.x - rot.y * rot.y - rot.z * rot.z);\nreturn rot;\n}\nmat3 QuatToMat3(vec4 q) {\nvec3 m0 = vec3(\n1.0 - 2.0 * q.y * q.y - 2.0 * q.z * q.z,\n2.0 * q.x * q.y + 2.0 * q.w * q.z,\n2.0 * q.x * q.z - 2.0 * q.w * q.y);\nvec3 m1 = vec3(\n2.0 * q.x * q.y - 2.0 * q.w * q.z,\n1.0 - 2.0 * q.x * q.x - 2.0 * q.z * q.z,\n2.0 * q.y * q.z + 2.0 * q.w * q.x);\nvec3 m2 = vec3(\n2.0 * q.x * q.z + 2.0 * q.w * q.y,\n2.0 * q.y * q.z - 2.0 * q.w * q.x,\n1.0 - 2.0 * q.x * q.x - 2.0 * q.y * q.y);\nreturn mat3(m0, m1, m2);\n}\nvec4 Mat3ToQuat(mat3 mat) {\nfloat tr = mat[0][0] + mat[1][1] + mat[2][2];\nfloat qw, qx, qy, qz;\nif (tr > 0.0) {\nfloat S = sqrt(tr + 1.0) * 2.0;\nfloat invS = 1.0 / S;\nqw = 0.25 * S;\nqx = (mat[1][2] - mat[2][1]) * invS;\nqy = (mat[2][0] - mat[0][2]) * invS;\nqz = (mat[0][1] - mat[1][0]) * invS;\n} else if ((mat[0][0] > mat[1][1])&&(mat[0][0] > mat[2][2])) {\nfloat S = sqrt(1.0 + mat[0][0] - mat[1][1] - mat[2][2]) * 2.0;\nfloat invS = 1.0 / S;\nqw = (mat[1][2] - mat[2][1]) * invS;\nqx = 0.25 * S;\nqy = (mat[1][0] + mat[0][1]) * invS;\nqz = (mat[2][0] + mat[0][2]) * invS;\n} else if (mat[1][1] > mat[2][2]) {\nfloat S = sqrt(1.0 + mat[1][1] - mat[0][0] - mat[2][2]) * 2.0;\nfloat invS = 1.0 / S;\nqw = (mat[2][0] - mat[0][2]) * invS;\nqx = (mat[1][0] + mat[0][1]) * invS;\nqy = 0.25 * S;\nqz = (mat[2][1] + mat[1][2]) * invS;\n} else {\nfloat S = sqrt(1.0 + mat[2][2] - mat[0][0] - mat[1][1]) * 2.0;\nfloat invS = 1.0 / S;\nqw = (mat[0][1] - mat[1][0]) * invS;\nqx = (mat[2][0] + mat[0][2]) * invS;\nqy = (mat[2][1] + mat[1][2]) * invS;\nqz = 0.25 * S;\n}\nreturn vec4(qx, qy, qz, qw);\n}\nvec4 EulerToQuat(vec3 euler) {\nvec3 er = euler * 0.5;\nfloat x = er.x, y = er.y, z = er.z;\nfloat sx = sin(x);\nfloat cx = cos(x);\nfloat sy = sin(y);\nfloat cy = cos(y);\nfloat sz = sin(z);\nfloat cz = cos(z);\nvec4 quat;\nquat.x = sx * cy * cz + cx * sy * sz;\nquat.y = cx * sy * cz + sx * cy * sz;\nquat.z = cx * cy * sz - sx * sy * cz;\nquat.w = cx * cy * cz - sx * sy * sz;\nreturn quat;\n}\nvec4 gpvs_main () {\nfloat activeTime = u_timeDelta.x - a_position_starttime.w;\nfloat normalizedTime = clamp(activeTime / a_dir_life.w, 0.0, 1.0);\nvec2 timeCoord0 = vec2(normalizedTime, 0.);\nvec2 timeCoord1 = vec2(normalizedTime, 1.);\n#if CC_RENDER_MODE == 4\nvec2 vertIdx = vec2(a_texCoord.x, a_texCoord.y);\n#else\nvec2 vertIdx = vec2(a_size_uv.w, a_rotation_uv.w);\n#endif\nvec4 velocity = vec4(a_dir_life.xyz, 0.);\nvec4 pos = vec4(a_position_starttime.xyz, 1.);\nvec3 size = a_size_uv.xyz;\n#if SIZE_OVER_TIME_MODULE_ENABLE\nif (u_size_mode == 1) {\nsize *= unpackCurveData(size_over_time_tex0, timeCoord0);\n} else {\nvec3 size_0 = unpackCurveData(size_over_time_tex0, timeCoord0);\nvec3 size_1 = unpackCurveData(size_over_time_tex0, timeCoord1);\nfloat factor_s = pseudoRandom(a_rndSeed + 39825.);\nsize *= mix(size_0, size_1, factor_s);\n}\n#endif\nvec3 compScale = scale.xyz * size;\n#if FORCE_OVER_TIME_MODULE_ENABLE\nvec3 forceAnim = vec3(0.);\nif (u_force_mode == 1) {\nforceAnim = unpackCurveData(force_over_time_tex0, timeCoord0);\n} else {\nvec3 force_0 = unpackCurveData(force_over_time_tex0, timeCoord0);\nvec3 force_1 = unpackCurveData(force_over_time_tex0, timeCoord1);\nfloat factor_f =  pseudoRandom(a_rndSeed + 212165.);\nforceAnim = mix(force_0, force_1, factor_f);\n}\nvec4 forceTrack = vec4(forceAnim, 0.);\nif (u_force_space == 0) {\nforceTrack = rotateQuat(forceTrack, u_worldRot);\n}\nvelocity.xyz += forceTrack.xyz;\n#endif\n#if VELOCITY_OVER_TIME_MODULE_ENABLE\nfloat speedModifier0 = 1.;\nfloat speedModifier1 = 1.;\nvec3 velocityAnim = vec3(0.);\nif (u_velocity_mode == 1) {\nvelocityAnim = unpackCurveData(velocity_over_time_tex0, timeCoord0, speedModifier0);\n} else {\nvec3 vectory_0 = unpackCurveData(velocity_over_time_tex0, timeCoord0, speedModifier0);\nvec3 vectory_1 = unpackCurveData(velocity_over_time_tex0, timeCoord1, speedModifier1);\nfloat factor_v = pseudoRandom(a_rndSeed + 197866.);\nvelocityAnim = mix(vectory_0, vectory_1, factor_v);\nspeedModifier0 = mix(speedModifier0, speedModifier1, factor_v);\n}\nvec4 velocityTrack = vec4(velocityAnim, 0.);\nif (u_velocity_space == 0) {\nvelocityTrack = rotateQuat(velocityTrack, u_worldRot);\n}\nvelocity.xyz += velocityTrack.xyz;\nvelocity.xyz *= speedModifier0;\n#endif\npos.xyz += velocity.xyz * normalizedTime * a_dir_life.w;\n#if !CC_USE_WORLD_SPACE\npos = cc_matWorld * pos;\n#if CC_RENDER_MODE == 1\nvelocity = rotateQuat(velocity, u_worldRot);\n#endif\n#endif\nvec3 startRotation = a_rotation_uv.xyz;\nvec4 rot = toQuat(startRotation);\n#if ROTATION_OVER_TIME_MODULE_ENABLE\nif (u_rotation_mode == 1) {\nvec3 euler = unpackCurveData(rotation_over_time_tex0, timeCoord0) * normalizedTime * a_dir_life.w;\nvec4 quat = EulerToQuat(euler);\nmat3 mLocal = QuatToMat3(quat);\nmat3 mStart = QuatToMat3(rot);\nrot = Mat3ToQuat(mStart * mLocal);\n} else {\nvec3 rotation_0 = unpackCurveData(rotation_over_time_tex0, timeCoord0);\nvec3 rotation_1 = unpackCurveData(rotation_over_time_tex0, timeCoord1);\nfloat factor_r = pseudoRandom(a_rndSeed + 125292.);\nvec3 euler = mix(rotation_0, rotation_1, factor_r) * normalizedTime * a_dir_life.w;\n#if CC_RENDER_MODE == 3 || CC_RENDER_MODE == 2\neuler = vec3(0.0, 0.0, euler.z);\n#endif\nvec4 quat = EulerToQuat(euler);\nmat3 mLocal = QuatToMat3(quat);\nmat3 mStart = QuatToMat3(rot);\nrot = Mat3ToQuat(mStart * mLocal);\n}\n#endif\n#if COLOR_OVER_TIME_MODULE_ENABLE\nif (u_color_mode == 1) {\ncolor = a_color * texture2D(color_over_time_tex0, timeCoord0);\n} else {\nvec4 color_0 = texture2D(color_over_time_tex0, timeCoord0);\nvec4 color_1 = texture2D(color_over_time_tex0, timeCoord1);\nfloat factor_c = pseudoRandom(a_rndSeed + 91041.);\ncolor = a_color * mix(color_0, color_1, factor_c);\n}\n#else\ncolor = a_color;\n#endif\n#if CC_RENDER_MODE != 4\nvec2 cornerOffset = vec2((vertIdx - 0.5));\n#if CC_RENDER_MODE == 1\nrot = vec4(0.0, 0.0, 0.0, 1.0);\n#endif\ncomputeVertPos(pos, cornerOffset, rot, compScale\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n, cc_matViewInv\n#endif\n#if CC_RENDER_MODE == 1\n, cc_cameraPos.xyz\n, velocity\n, frameTile_velLenScale.z\n, frameTile_velLenScale.w\n, a_size_uv.w\n#endif\n);\n#else\nmat4 xformNoScale = matrixFromRT(rot, pos.xyz);\nmat4 xform = matFromRTS(rot, pos.xyz, compScale);\npos = xform * vec4(a_texCoord3, 1);\nvec4 normal = xformNoScale * vec4(a_normal, 0);\ncolor *= a_color1;\n#endif\npos = cc_matViewProj * pos;\nfloat frameIndex = 0.;\n#if TEXTURE_ANIMATION_MODULE_ENABLE\nfloat startFrame = 0.;\nvec3 frameInfo = vec3(0.);\nif (int(u_anim_info.x) == 1) {\nframeInfo = unpackCurveData(texture_animation_tex0, timeCoord0);\n} else {\nvec3 frameInfo0 = unpackCurveData(texture_animation_tex0, timeCoord0);\nvec3 frameInfo1 = unpackCurveData(texture_animation_tex0, timeCoord1);\nfloat factor_t = pseudoRandom(a_rndSeed + 90794.);\nframeInfo = mix(frameInfo0, frameInfo1, factor_t);\n}\nstartFrame = frameInfo.x / u_anim_info.y;\nframeIndex = repeat(u_anim_info.z * (frameInfo.y + startFrame), 1.);\n#endif\nuv = computeUV(frameIndex, vertIdx, frameTile_velLenScale.xy) * mainTiling_Offset.xy + mainTiling_Offset.zw;\nreturn pos;\n}\nvoid main() { gl_Position = gpvs_main(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nvarying vec2 uv;\nvarying vec4 color;\nuniform sampler2D mainTexture;\nuniform vec4 tintColor;\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture2D(mainTexture, uv);\nreturn CCFragOutput(col);\n}\nvoid main() { gl_FragColor = add(); }"}],[{vert:"\nprecision mediump float;\nuniform vec4 mainTiling_Offset;\nuniform highp mat4 cc_matViewProj;\nuniform highp vec4 cc_cameraPos;\nuniform highp mat4 cc_matWorld;\nvarying mediump vec2 uv;\nvarying mediump vec4 color;\nattribute vec3 a_position;\nattribute vec4 a_texCoord;\nattribute vec3 a_texCoord1;\nattribute vec3 a_texCoord2;\nattribute vec4 a_color;\n#if CC_DRAW_WIRE_FRAME\nvarying vec3 vBarycentric;\n#endif\nvec4 vs_main() {\nhighp vec4 pos = vec4(a_position, 1);\nvec4 velocity = vec4(a_texCoord1.xyz, 0);\n#if !CC_USE_WORLD_SPACE\npos = cc_matWorld * pos;\nvelocity = cc_matWorld * velocity;\n#endif\nfloat vertOffset = (a_texCoord.x - 0.5) * a_texCoord.y;\nvec3 camUp = normalize(cross(pos.xyz - cc_cameraPos.xyz, velocity.xyz));\npos.xyz += camUp * vertOffset;\npos = cc_matViewProj * pos;\nuv = a_texCoord.zw * mainTiling_Offset.xy + mainTiling_Offset.zw;;\ncolor = a_color;\n#if CC_DRAW_WIRE_FRAME\nvBarycentric = a_texCoord2;\n#endif\nreturn pos;\n}\nvoid main() { gl_Position = vs_main(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nvarying vec2 uv;\nvarying vec4 color;\n#if CC_DRAW_WIRE_FRAME\nvarying vec3 vBarycentric;\n#endif\nuniform sampler2D mainTexture;\nuniform vec4 tintColor;\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture2D(mainTexture, uv);\n#if CC_DRAW_WIRE_FRAME\nif (any(lessThan(vBarycentric, vec3(0.02)))) {\ncol = vec4(0., 1., 1., 1.);\n}\n#endif\nreturn CCFragOutput(col);\n}\nvoid main() { gl_FragColor = add(); }"}],[{vert:"\nprecision highp float;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\nmat3 m = mat3(xAxis,yAxis,zAxis);\nfloat trace = m[0][0] + m[1][1] + m[2][2];\nvec4 quat;\nif (trace > 0.) {\nfloat s = 0.5 / sqrt(trace + 1.0);\nquat.w = 0.25 / s;\nquat.x = (m[2][1] - m[1][2]) * s;\nquat.y = (m[0][2] - m[2][0]) * s;\nquat.z = (m[1][0] - m[0][1]) * s;\n} else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\nfloat s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\nquat.w = (m[2][1] - m[1][2]) / s;\nquat.x = 0.25 * s;\nquat.y = (m[0][1] + m[1][0]) / s;\nquat.z = (m[0][2] + m[2][0]) / s;\n} else if (m[1][1] > m[2][2]) {\nfloat s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\nquat.w = (m[0][2] - m[2][0]) / s;\nquat.x = (m[0][1] + m[1][0]) / s;\nquat.y = 0.25 * s;\nquat.z = (m[1][2] + m[2][1]) / s;\n} else {\nfloat s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\nquat.w = (m[1][0] - m[0][1]) / s;\nquat.x = (m[0][2] + m[2][0]) / s;\nquat.y = (m[1][2] + m[2][1]) / s;\nquat.z = 0.25 * s;\n}\nfloat len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\nif (len > 0.) {\nlen = 1. / sqrt(len);\nquat.x = quat.x * len;\nquat.y = quat.y * len;\nquat.z = quat.z * len;\nquat.w = quat.w * len;\n}\nreturn quat;\n}\nmat4 matrixFromRT (vec4 q, vec3 p){\nfloat x2 = q.x + q.x;\nfloat y2 = q.y + q.y;\nfloat z2 = q.z + q.z;\nfloat xx = q.x * x2;\nfloat xy = q.x * y2;\nfloat xz = q.x * z2;\nfloat yy = q.y * y2;\nfloat yz = q.y * z2;\nfloat zz = q.z * z2;\nfloat wx = q.w * x2;\nfloat wy = q.w * y2;\nfloat wz = q.w * z2;\nreturn mat4(\n1. - (yy + zz), xy + wz, xz - wy, 0,\nxy - wz, 1. - (xx + zz), yz + wx, 0,\nxz + wy, yz - wx, 1. - (xx + yy), 0,\np.x, p.y, p.z, 1\n);\n}\nmat4 matFromRTS (vec4 q, vec3 t, vec3 s){\nfloat x = q.x, y = q.y, z = q.z, w = q.w;\nfloat x2 = x + x;\nfloat y2 = y + y;\nfloat z2 = z + z;\nfloat xx = x * x2;\nfloat xy = x * y2;\nfloat xz = x * z2;\nfloat yy = y * y2;\nfloat yz = y * z2;\nfloat zz = z * z2;\nfloat wx = w * x2;\nfloat wy = w * y2;\nfloat wz = w * z2;\nfloat sx = s.x;\nfloat sy = s.y;\nfloat sz = s.z;\nreturn mat4((1. - (yy + zz)) * sx, (xy + wz) * sx, (xz - wy) * sx, 0,\n(xy - wz) * sy, (1. - (xx + zz)) * sy, (yz + wx) * sy, 0,\n(xz + wy) * sz, (yz - wx) * sz, (1. - (xx + yy)) * sz, 0,\nt.x, t.y, t.z, 1);\n}\nvec4 quatMultiply (vec4 a, vec4 b){\nvec4 quat;\nquat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\nquat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\nquat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\nquat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\nreturn quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\nfloat ix = q.w * v.x + q.y * v.z - q.z * v.y;\nfloat iy = q.w * v.y + q.z * v.x - q.x * v.z;\nfloat iz = q.w * v.z + q.x * v.y - q.y * v.x;\nfloat iw = -q.x * v.x - q.y * v.y - q.z * v.z;\nv.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\nv.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\nv.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\nvec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\nvec4 rotQuat = quatMultiply(viewQuat, q);\nrotateVecFromQuat(pos, rotQuat);\nreturn pos;\n}\nuniform vec4 mainTiling_Offset;\nuniform vec4 frameTile_velLenScale;\nuniform vec4 scale;\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matViewInv;\nuniform highp mat4 cc_matViewProj;\nuniform highp vec4 cc_cameraPos;\nuniform highp mat4 cc_matWorld;\nvarying mediump vec2 uv;\nvarying mediump vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n, mat4 viewInv\n#endif\n#if CC_RENDER_MODE == 1\n, vec3 eye\n, vec4 velocity\n, float velocityScale\n, float lengthScale\n, float xIndex\n#endif\n) {\n#if CC_RENDER_MODE == 0\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\nvec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\nvec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n#elif CC_RENDER_MODE == 1\nvec3 camRight = normalize(cross(pos.xyz - eye, velocity.xyz)) * s.x;\nvec3 camUp = velocity.xyz * velocityScale + normalize(velocity.xyz) * lengthScale * s.y;\npos.xyz += (camRight * abs(vertOffset.x) * sign(vertOffset.y)) - camUp * xIndex;\n#elif CC_RENDER_MODE == 2\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = vec3(1, 0, 0);\nvec3 camY = vec3(0, 0, -1);\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, cross(camX, camY), q);\n#elif CC_RENDER_MODE == 3\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nrotateVecFromQuat(viewSpaceVert, q);\nvec3 camX = normalize(vec3(cc_matView[0][0], cc_matView[1][0], cc_matView[2][0]));\nvec3 camY = vec3(0, 1, 0);\nvec3 offset = camX * viewSpaceVert.x + camY * viewSpaceVert.y;\npos.xyz += offset;\n#else\npos.x += vertOffset.x;\npos.y += vertOffset.y;\n#endif\n}\nvec2 computeUV (float frameIndex, vec2 vertIndex, vec2 frameTile){\nvec2 aniUV = vec2(0, floor(frameIndex * frameTile.y));\naniUV.x = floor(frameIndex * frameTile.x * frameTile.y - aniUV.y * frameTile.x);\n#if CC_RENDER_MODE != 4\nvertIndex.y = 1. - vertIndex.y;\n#endif\nreturn (aniUV.xy + vertIndex) / vec2(frameTile.x, frameTile.y);\n}\nattribute vec3 a_position;\nattribute vec3 a_texCoord;\nattribute vec3 a_texCoord1;\nattribute vec3 a_texCoord2;\nattribute vec4 a_color;\n#if CC_RENDER_MODE == 1\nattribute vec3 a_color1;\n#endif\n#if CC_RENDER_MODE == 4\nattribute vec3 a_texCoord3;\nattribute vec3 a_normal;\nattribute vec4 a_color1;\n#endif\nvec4 lpvs_main () {\nvec3 compScale = scale.xyz * a_texCoord1;\nvec4 pos = vec4(a_position, 1);\n#if CC_RENDER_MODE == 1\nvec4 velocity = vec4(a_color1.xyz, 0);\n#endif\n#if !CC_USE_WORLD_SPACE\npos = cc_matWorld * pos;\n#if CC_RENDER_MODE == 1\nvelocity = cc_matWorld * velocity;\n#endif\n#endif\nvec3 rotTmp = a_texCoord2;\nfloat mulFactor = 1.0;\nif (rotTmp.x > 10.0 * 0.5) {\nrotTmp.x -= 10.0;\nmulFactor = -1.0;\n}\nvec4 rot = vec4(rotTmp, 0.0);\nrot.w = mulFactor * sqrt(1.0 - rot.x * rot.x - rot.y * rot.y - rot.z * rot.z);\n#if CC_RENDER_MODE != 4\nvec2 cornerOffset = vec2((a_texCoord.xy - 0.5));\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\ncomputeVertPos(pos, cornerOffset, rot, compScale, cc_matViewInv);\n#elif CC_RENDER_MODE == 1\ncomputeVertPos(pos, cornerOffset, rot, compScale, cc_cameraPos.xyz, velocity, frameTile_velLenScale.z, frameTile_velLenScale.w, a_texCoord.x);\n#elif 2\ncomputeVertPos(pos, cornerOffset, rot, compScale);\n#endif\ncolor = a_color;\n#else\nmat4 xformNoScale = matrixFromRT(rot, pos.xyz);\nmat4 xform = matFromRTS(rot, pos.xyz, compScale);\npos = xform * vec4(a_texCoord3, 1);\nvec4 normal = xformNoScale * vec4(a_normal, 0);\ncolor = a_color * a_color1;\n#endif\nuv = computeUV(a_texCoord.z, a_texCoord.xy, frameTile_velLenScale.xy) * mainTiling_Offset.xy + mainTiling_Offset.zw;\npos = cc_matViewProj * pos;\nreturn pos;\n}\nvoid main() { gl_Position = lpvs_main(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nvarying vec2 uv;\nvarying vec4 color;\nuniform sampler2D mainTexture;\nuniform vec4 tintColor;\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture2D(mainTexture, uv);\nreturn CCFragOutput(col);\n}\nvoid main() { gl_FragColor = add(); }"}],[{vert:"\nprecision highp float;\nuniform highp mat4 cc_matViewProj;\n#if USE_LOCAL\nuniform highp mat4 cc_matWorld;\n#endif\nattribute vec3 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 v_light;\nvarying vec2 uv0;\n#if TWO_COLORED\nattribute vec4 a_color2;\nvarying vec4 v_dark;\n#endif\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\n#if USE_LOCAL\npos = cc_matWorld * pos;\n#endif\npos = cc_matViewProj * pos;\nuv0 = a_texCoord;\nv_light = a_color;\n#if TWO_COLORED\nv_dark = a_color2;\n#endif\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\n#if USE_ALPHA_TEST\nuniform float alphaThreshold;\n#endif\nvoid ALPHA_TEST (in vec4 color) {\n#if USE_ALPHA_TEST\nif (color.a < alphaThreshold) discard;\n#endif\n}\nvoid ALPHA_TEST (in float alpha) {\n#if USE_ALPHA_TEST\nif (alpha < alphaThreshold) discard;\n#endif\n}\nvarying vec4 v_light;\n#if TWO_COLORED\nvarying vec4 v_dark;\n#endif\nvarying vec2 uv0;\nuniform sampler2D cc_spriteTexture;\nvec4 frag () {\nvec4 o = vec4(1, 1, 1, 1);\n#if TWO_COLORED\nvec4 texColor = vec4(1, 1, 1, 1);\ntexColor *= texture2D(cc_spriteTexture, uv0);\no.a = texColor.a * v_light.a;\no.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n#else\no *= texture2D(cc_spriteTexture, uv0);\no *= v_light;\n#endif\nALPHA_TEST(o);\nreturn o;\n}\nvoid main() { gl_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matProj;\nuniform highp mat4 cc_matViewProj;\nuniform highp vec4 cc_cameraPos;\n#if USE_LOCAL\nuniform highp mat4 cc_matWorld;\n#endif\n#if SAMPLE_FROM_RT\n#endif\nattribute vec3 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 color;\nvarying vec2 uv0;\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\n#if USE_LOCAL\npos = cc_matWorld * pos;\n#endif\n#if USE_PIXEL_ALIGNMENT\npos = cc_matView * pos;\npos.xyz = floor(pos.xyz);\npos = cc_matProj * pos;\n#else\npos = cc_matViewProj * pos;\n#endif\nuv0 = a_texCoord;\n#if SAMPLE_FROM_RT\nuv0 = cc_cameraPos.w > 1.0 ? vec2(uv0.x, 1.0 - uv0.y) : uv0;\n#endif\ncolor = a_color;\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nvec4 CCSampleWithAlphaSeparated(sampler2D tex, vec2 uv) {\n#if CC_USE_EMBEDDED_ALPHA\nreturn vec4(texture2D(tex, uv).rgb, texture2D(tex, uv + vec2(0.0, 0.5)).r);\n#else\nreturn texture2D(tex, uv);\n#endif\n}\n#if USE_ALPHA_TEST\nuniform float alphaThreshold;\n#endif\nvoid ALPHA_TEST (in vec4 color) {\n#if USE_ALPHA_TEST\nif (color.a < alphaThreshold) discard;\n#endif\n}\nvoid ALPHA_TEST (in float alpha) {\n#if USE_ALPHA_TEST\nif (alpha < alphaThreshold) discard;\n#endif\n}\nvarying vec4 color;\n#if USE_TEXTURE\nvarying vec2 uv0;\nuniform sampler2D cc_spriteTexture;\n#endif\nvec4 frag () {\nvec4 o = vec4(1, 1, 1, 1);\n#if USE_TEXTURE\no *= CCSampleWithAlphaSeparated(cc_spriteTexture, uv0);\n#if IS_GRAY\nfloat gray  = 0.2126 * o.r + 0.7152 * o.g + 0.0722 * o.b;\no.r = o.g = o.b = gray;\n#endif\n#endif\no *= color;\nALPHA_TEST(o);\nreturn o;\n}\nvoid main() { gl_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\nattribute float a_vertexId;\nint getVertexId() {\nreturn int(a_vertexId);\n}\nuniform vec4 cc_displacementWeights[15];\nuniform vec4 cc_displacementTextureInfo;\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 uv = getPixelCoordFromLocation(location, cc_displacementTextureInfo.xy);\nreturn texture2D(tex, uv);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture2D(tex, x)),\ndecode32(texture2D(tex, y)),\ndecode32(texture2D(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nuniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nuniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nuniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nattribute vec4 a_joints;\nattribute vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nattribute highp vec4 a_jointAnimInfo;\n#endif\nuniform highp vec4 cc_jointTextureInfo;\nuniform highp vec4 cc_jointAnimInfo;\nuniform highp sampler2D cc_jointTexture;\n#else\nuniform highp vec4 cc_joints[90];\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matProj;\nuniform highp vec4 cc_cameraPos;\nuniform mediump vec4 cc_fogBase;\nuniform mediump vec4 cc_fogAdd;\n#if USE_INSTANCING\nattribute vec4 a_matWorld0;\nattribute vec4 a_matWorld1;\nattribute vec4 a_matWorld2;\n#if USE_LIGHTMAP\nattribute vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nattribute float a_dyn_batch_id;\nuniform highp mat4 cc_matWorlds[10];\n#else\nuniform highp mat4 cc_matWorld;\nuniform highp mat4 cc_matWorldIT;\nuniform highp vec4 cc_lightingMapUVParam;\n#endif\nuniform vec4 tilingOffset;\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nvarying float v_fog_factor;\nvarying highp vec4 v_shadowPos;\nuniform highp mat4 cc_matLightViewProj;\n#if CC_RECEIVE_SHADOW\nuniform sampler2D cc_shadowMap;\nuniform sampler2D cc_spotLightingMap;\n#endif\n#if USE_VERTEX_COLOR\nattribute vec4 a_color;\nvarying vec4 v_color;\n#endif\nvarying vec3 v_position;\nvarying vec3 v_normal;\nvarying vec2 v_uv;\nvarying vec2 v_uv1;\n#if USE_NORMAL_MAP\nvarying vec3 v_tangent;\nvarying vec3 v_bitangent;\n#endif\n#if HAS_SECOND_UV || USE_LIGHTMAP\nattribute vec2 a_texCoord1;\n#endif\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nvarying vec3 v_luv;\nvoid CCLightingMapCaclUV()\n{\n#if !USE_INSTANCING\nv_luv.xy = cc_lightingMapUVParam.xy + a_texCoord1 * cc_lightingMapUVParam.zw;\nv_luv.z = cc_lightingMapUVParam.z;\n#else\nv_luv.xy = a_lightingMapUVParam.xy + a_texCoord1 * a_lightingMapUVParam.zw;\nv_luv.z = a_lightingMapUVParam.z;\n#endif\n}\n#endif\nvoid main () {\nStandardVertInput In;\nIn.position = vec4(a_position, 1.0);\nIn.normal = a_normal;\nIn.tangent = a_tangent;\n#if CC_USE_MORPH\napplyMorph(In);\n#endif\n#if CC_USE_SKINNING\nCCSkin(In);\n#endif\nmat4 matWorld, matWorldIT;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\nmatWorldIT = matWorld;\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\nmatWorldIT = matWorld;\n#else\nmatWorld = cc_matWorld;\nmatWorldIT = cc_matWorldIT;\n#endif\nvec4 pos = matWorld * In.position;\nv_position = pos.xyz;\nv_normal = normalize((matWorldIT * vec4(In.normal, 0.0)).xyz);\n#if USE_NORMAL_MAP\nv_tangent = normalize((matWorld * vec4(In.tangent.xyz, 0.0)).xyz);\nv_bitangent = cross(v_normal, v_tangent) * In.tangent.w;\n#endif\nv_uv = a_texCoord * tilingOffset.xy + tilingOffset.zw;\n#if SAMPLE_FROM_RT\nv_uv = cc_cameraPos.w > 1.0 ? vec2(v_uv.x, 1.0 - v_uv.y) : v_uv;\n#endif\n#if HAS_SECOND_UV\nv_uv1 = a_texCoord1 * tilingOffset.xy + tilingOffset.zw;\n#if SAMPLE_FROM_RT\nv_uv1 = cc_cameraPos.w > 1.0 ? vec2(v_uv1.x, 1.0 - v_uv1.y) : v_uv1;\n#endif\n#endif\n#if USE_VERTEX_COLOR\nv_color = a_color;\n#endif\n#if CC_USE_FOG == 0\nv_fog_factor = LinearFog(pos);\n#elif CC_USE_FOG == 1\nv_fog_factor = ExpFog(pos);\n#elif CC_USE_FOG == 2\nv_fog_factor = ExpSquaredFog(pos);\n#elif CC_USE_FOG == 3\nv_fog_factor = LayeredFog(pos);\n#else\nv_fog_factor = 1.0;\n#endif\nv_shadowPos = cc_matLightViewProj * pos;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nCCLightingMapCaclUV();\n#endif\ngl_Position = cc_matProj * (cc_matView * matWorld) * In.position;\n}",frag:"\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers: enable\n#endif\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod: enable\n#endif\nprecision highp float;\nuniform highp vec4 cc_cameraPos;\nuniform mediump vec4 cc_exposure;\nuniform mediump vec4 cc_mainLitDir;\nuniform mediump vec4 cc_mainLitColor;\nuniform mediump vec4 cc_ambientSky;\nuniform mediump vec4 cc_ambientGround;\nuniform mediump vec4 cc_fogColor;\nuniform vec4 albedo;\nuniform vec4 albedoScaleAndCutoff;\nuniform vec4 pbrParams;\nuniform vec4 miscParams;\nuniform vec4 emissive;\nuniform vec4 emissiveScaleParam;\nvarying float v_fog_factor;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nuniform highp mat4 cc_matLightView;\nuniform lowp vec4 cc_shadowNFLSInfo;\nuniform lowp vec4 cc_shadowWHPBInfo;\nuniform lowp vec4 cc_shadowLPNNInfo;\n#if CC_RECEIVE_SHADOW\nuniform sampler2D cc_shadowMap;\nuniform sampler2D cc_spotLightingMap;\nfloat CCGetLinearDepth (vec3 worldPos) {\nvec4 viewStartPos = cc_matLightView * vec4(worldPos.xyz, 1.0);\nfloat dist = length(viewStartPos.xyz);\nreturn cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\n}\nfloat CCGetShadowFactorHard (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture2D(cc_shadowMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture2D(cc_shadowMap, clipPos.xy).x;\n}\nshadow = step(clipPos.z- cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetShadowFactorSoft (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetDepth = clipPos.z - cc_shadowWHPBInfo.w;\nvec2 oneTap = 1.0 / cc_shadowWHPBInfo.xy;\nvec2 clipPos_offset = clipPos.xy + oneTap;\nfloat block0, block1, block2, block3;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock1 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)).x);\nblock2 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)).x);\nblock3 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)).x);\n}\nfloat coefX   = mod(clipPos.x, oneTap.x) * cc_shadowWHPBInfo.x;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block2, block3, coefX);\nfloat coefY   = mod(clipPos.y, oneTap.y) * cc_shadowWHPBInfo.y;\nreturn mix(resultX, resultY, coefY);\n}\nfloat CCGetShadowFactorSoft2X (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat bias = cc_shadowWHPBInfo.w;\nfloat offsetDepth = clipPos.z - bias;\nvec2 mapSize = cc_shadowWHPBInfo.xy;\nvec2 oneTap = 1.0 / mapSize;\nfloat clipPos_offset_L = clipPos.x - oneTap.x;\nfloat clipPos_offset_R = clipPos.x + oneTap.x;\nfloat clipPos_offset_U = clipPos.y - oneTap.y;\nfloat clipPos_offset_D = clipPos.y + oneTap.y;\nfloat block0, block1, block2, block3, block4, block5, block6, block7, block8;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock4 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock5 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock6 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock7 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock8 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)).x);\nblock1 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)).x);\nblock2 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)).x);\nblock3 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)).x);\nblock4 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock5 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)).x);\nblock6 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)).x);\nblock7 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)).x);\nblock8 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)).x);\n}\nfloat coefX = mod(clipPos.x, oneTap.x) * mapSize.x;\nfloat coefY = mod(clipPos.y, oneTap.y) * mapSize.y;\nfloat shadow = 0.0;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block3, block4, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block1, block2, coefX);\nresultY = mix(block4, block5, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block3, block4, coefX);\nresultY = mix(block6, block7, coefX);\nshadow += mix(resultX, resultY, coefY);\nresultX = mix(block4, block5, coefX);\nresultY = mix(block7, block8, coefX);\nshadow += mix(resultX, resultY, coefY);\nreturn shadow * 0.25;\n}\nfloat CCGetSpotLightShadowFactorHard (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture2D(cc_spotLightingMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture2D(cc_spotLightingMap, clipPos.xy).x;\n}\nshadow = step(depth - cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetSpotLightShadowFactorSoft (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfloat closestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n} else {\nfloat closestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\nreturn shadow / 5.0;\n}\nfloat CCGetSpotLightShadowFactorSoft2X (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = dot(texture2D(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n}\n}\n} else {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = texture2D(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\n}\n}\nreturn shadow / 9.0;\n}\n#endif\n#if CC_USE_IBL\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec4 fragTextureLod (sampler2D tex, vec2 coord, float lod) {\n#ifdef GL_EXT_shader_texture_lod\nreturn texture2DLodEXT(tex, coord, lod);\n#else\nreturn texture2D(tex, coord, lod);\n#endif\n}\nvec4 fragTextureLod (samplerCube tex, vec3 coord, float lod) {\n#ifdef GL_EXT_shader_texture_lod\nreturn textureCubeLodEXT(tex, coord, lod);\n#else\nreturn textureCube(tex, coord, lod);\n#endif\n}\n#endif\nfloat GGXMobile (float roughness, float NoH, vec3 H, vec3 N) {\nvec3 NxH = cross(N, H);\nfloat OneMinusNoHSqr = dot(NxH, NxH);\nfloat a = roughness * roughness;\nfloat n = NoH * a;\nfloat p = a / (OneMinusNoHSqr + n * n);\nreturn p * p;\n}\nfloat CalcSpecular (float roughness, float NoH, vec3 H, vec3 N) {\nreturn (roughness * 0.25 + 0.25) * GGXMobile(roughness, NoH, H, N);\n}\nvec3 BRDFApprox (vec3 specular, float roughness, float NoV) {\nconst vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);\nconst vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NoV)) * r.x + r.y;\nvec2 AB = vec2(-1.04, 1.04) * a004 + r.zw;\nAB.y *= clamp(50.0 * specular.g, 0.0, 1.0);\nreturn specular * AB.x + AB.y;\n}\nstruct StandardSurface {\nvec4 albedo;\nvec3 position;\nvec3 normal;\nvec3 emissive;\nvec3 lightmap;\nfloat lightmap_test;\nfloat roughness;\nfloat metallic;\nfloat occlusion;\n};\nvec4 CCStandardShadingBase (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.0);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 L = normalize(-cc_mainLitDir.xyz);\nvec3 H = normalize(L + V);\nfloat NH = max(dot(N, H), 0.0);\nfloat NL = max(dot(N, L), 0.0);\nvec3 finalColor = NL * cc_mainLitColor.rgb * cc_mainLitColor.w;\nvec3 diffuseContrib = diffuse;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nif (s.lightmap_test > 0.0001) {\nfinalColor = s.lightmap.rgb;\n}\n#else\ndiffuseContrib /= 3.14159265359;\n#endif\nvec3 specularContrib = specular * CalcSpecular(s.roughness, NH, H, N);\nvec3 dirlightContrib = (diffuseContrib + specularContrib);\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (NL > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nvec3 projWorldPos = shadowPos.xyz + (1.0 - NL) * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetShadowFactorSoft2X(pos);\nelse if (pcf > 0.9) shadow = CCGetShadowFactorSoft(pos);\nelse shadow = CCGetShadowFactorHard(pos);\nshadow = mix(shadow, 1.0, cc_shadowNFLSInfo.w);\n}\n}\n#endif\ndirlightContrib *= shadow;\nfinalColor *= dirlightContrib;\nfloat fAmb = 0.5 - N.y * 0.5;\nvec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\nfinalColor += (ambDiff.rgb * diffuse) * s.occlusion;\n#if CC_USE_IBL\nvec3 R = normalize(reflect(-V, N));\nvec4 envmap = fragTextureLod(cc_environment, R, s.roughness * cc_ambientGround.w);\n#if CC_USE_IBL == 2\nvec3 env = unpackRGBE(envmap);\n#else\nvec3 env = SRGBToLinear(envmap.rgb);\n#endif\nfinalColor += env * cc_ambientSky.w * specular * s.occlusion;\n#endif\n#if CC_USE_HDR\ns.emissive *= cc_exposure.w;\n#endif\nfinalColor += s.emissive;\nreturn vec4(finalColor, s.albedo.a);\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nvarying highp vec4 v_shadowPos;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nvarying vec3 v_luv;\nuniform sampler2D cc_lightingMap;\nvec3 UnpackLightingmap(vec4 color) {\nvec3 c;\nfloat e = 1.0 + color.a * (8.0 - 1.0);\nc.r = color.r * e;\nc.g = color.g * e;\nc.b = color.b * e;\nreturn c;\n}\n#endif\nvarying vec3 v_position;\nvarying vec2 v_uv;\nvarying vec2 v_uv1;\nvarying vec3 v_normal;\n#if USE_VERTEX_COLOR\nvarying vec4 v_color;\n#endif\n#if USE_ALBEDO_MAP\nuniform sampler2D albedoMap;\n#endif\n#if USE_NORMAL_MAP\nvarying vec3 v_tangent;\nvarying vec3 v_bitangent;\nuniform sampler2D normalMap;\n#endif\n#if USE_PBR_MAP\nuniform sampler2D pbrMap;\n#endif\n#if USE_METALLIC_ROUGHNESS_MAP\nuniform sampler2D metallicRoughnessMap;\n#endif\n#if USE_OCCLUSION_MAP\nuniform sampler2D occlusionMap;\n#endif\n#if USE_EMISSIVE_MAP\nuniform sampler2D emissiveMap;\n#endif\n#if USE_ALPHA_TEST\n#endif\nvoid surf (out StandardSurface s) {\nvec4 baseColor = albedo;\n#if USE_VERTEX_COLOR\nbaseColor.rgb *= SRGBToLinear(v_color.rgb);\nbaseColor.a *= v_color.a;\n#endif\n#if USE_ALBEDO_MAP\nvec4 texColor = texture2D(albedoMap, ALBEDO_UV);\ntexColor.rgb = SRGBToLinear(texColor.rgb);\nbaseColor *= texColor;\n#endif\ns.albedo = baseColor;\ns.albedo.rgb *= albedoScaleAndCutoff.xyz;\n#if USE_ALPHA_TEST\nif (s.albedo.ALPHA_TEST_CHANNEL < albedoScaleAndCutoff.w) discard;\n#endif\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nvec4 lightColor = texture2D(cc_lightingMap, v_luv.xy);\ns.lightmap = UnpackLightingmap(lightColor);\ns.lightmap_test = v_luv.z;\n#endif\ns.normal = v_normal;\n#if USE_NORMAL_MAP\nvec3 nmmp = texture2D(normalMap, NORMAL_UV).xyz - vec3(0.5);\ns.normal =\n(nmmp.x * miscParams.x) * normalize(v_tangent) +\n(nmmp.y * miscParams.x) * normalize(v_bitangent) +\nnmmp.z * normalize(s.normal);\n#endif\ns.position = v_position;\nvec4 pbr = pbrParams;\n#if USE_PBR_MAP\nvec4 res = texture2D(pbrMap, PBR_UV);\npbr.x *= res.r;\npbr.y *= res.g;\npbr.z *= res.b;\npbr.w *= res.w;\n#endif\n#if USE_METALLIC_ROUGHNESS_MAP\nvec4 metallicRoughness = texture2D(metallicRoughnessMap, PBR_UV);\npbr.z *= metallicRoughness.b;\npbr.y *= metallicRoughness.g;\n#endif\n#if USE_OCCLUSION_MAP\npbr.x *= texture2D(occlusionMap, PBR_UV).r;\n#endif\ns.occlusion = clamp(pbr.x, 0.0, 0.96);\ns.roughness = clamp(pbr.y, 0.04, 1.0);\ns.metallic = pbr.z;\ns.emissive = emissive.rgb * emissiveScaleParam.xyz;\n#if USE_EMISSIVE_MAP\ns.emissive *= SRGBToLinear(texture2D(emissiveMap, EMISSIVE_UV).rgb);\n#endif\n}\n#if CC_FORWARD_ADD\n#if CC_PIPELINE_TYPE == 0\n# define LIGHTS_PER_PASS 1\n#else\n# define LIGHTS_PER_PASS 10\n#endif\nuniform highp vec4 cc_lightPos[LIGHTS_PER_PASS];\nuniform vec4 cc_lightColor[LIGHTS_PER_PASS];\nuniform vec4 cc_lightSizeRangeAngle[LIGHTS_PER_PASS];\nuniform vec4 cc_lightDir[LIGHTS_PER_PASS];\nfloat SmoothDistAtt (float distSqr, float invSqrAttRadius) {\nfloat factor = distSqr * invSqrAttRadius;\nfloat smoothFactor = clamp(1.0 - factor * factor, 0.0, 1.0);\nreturn smoothFactor * smoothFactor;\n}\nfloat GetDistAtt (float distSqr, float invSqrAttRadius) {\nfloat attenuation = 1.0 / max(distSqr, 0.01*0.01);\nattenuation *= SmoothDistAtt(distSqr , invSqrAttRadius);\nreturn attenuation;\n}\nfloat GetAngleAtt (vec3 L, vec3 litDir, float litAngleScale, float litAngleOffset) {\nfloat cd = dot(litDir, L);\nfloat attenuation = clamp(cd * litAngleScale + litAngleOffset, 0.0, 1.0);\nreturn (attenuation * attenuation);\n}\nvec4 CCStandardShadingAdditive (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 diffuseContrib = diffuse / 3.14159265359;\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.001);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 finalColor = vec3(0.0);\nint numLights = CC_PIPELINE_TYPE == 0 ? LIGHTS_PER_PASS : int(cc_lightDir[0].w);\nfor (int i = 0; i < LIGHTS_PER_PASS; i++) {\nif (i >= numLights) break;\nvec3 SLU = cc_lightPos[i].xyz - s.position;\nvec3 SL = normalize(SLU);\nvec3 SH = normalize(SL + V);\nfloat SNL = max(dot(N, SL), 0.001);\nfloat SNH = max(dot(N, SH), 0.0);\nfloat distSqr = dot(SLU, SLU);\nfloat litRadius = cc_lightSizeRangeAngle[i].x;\nfloat litRadiusSqr = litRadius * litRadius;\nfloat illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\nfloat attRadiusSqrInv = 1.0 / max(cc_lightSizeRangeAngle[i].y, 0.01);\nattRadiusSqrInv *= attRadiusSqrInv;\nfloat att = GetDistAtt(distSqr, attRadiusSqrInv);\nvec3 lspec = specular * CalcSpecular(s.roughness, SNH, SH, N);\nif (cc_lightPos[i].w > 0.0) {\nfloat cosInner = max(dot(-cc_lightDir[i].xyz, SL), 0.01);\nfloat cosOuter = cc_lightSizeRangeAngle[i].z;\nfloat litAngleScale = 1.0 / max(0.001, cosInner - cosOuter);\nfloat litAngleOffset = -cosOuter * litAngleScale;\natt *= GetAngleAtt(SL, -cc_lightDir[i].xyz, litAngleScale, litAngleOffset);\n}\nvec3 lightColor = cc_lightColor[i].rgb;\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (cc_lightPos[i].w > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nfloat cosAngle = clamp(1.0 - dot(N, normalize(cc_lightPos[i].xyz - s.position.xyz)), 0.0, 1.0);\nvec3 projWorldPos = shadowPos.xyz + cosAngle * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetSpotLightShadowFactorSoft2X(pos, s.position);\nelse if (pcf > 0.9) shadow = CCGetSpotLightShadowFactorSoft(pos, s.position);\nelse shadow = CCGetSpotLightShadowFactorHard(pos, s.position);\n}\n}\n#endif\nlightColor *= shadow;\nfinalColor += SNL * lightColor * cc_lightColor[i].w * illum * att * (diffuseContrib + lspec);\n}\nreturn vec4(finalColor, 0.0);\n}\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingAdditive(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\ngl_FragData[0] = CCFragOutput(color);\n}\n#elif (CC_PIPELINE_TYPE == 0 || CC_STANDARD_TRANSPARENT)\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingBase(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\ngl_FragData[0] = CCFragOutput(color);\n}\n#elif CC_PIPELINE_TYPE == 1\nvoid main () {\nStandardSurface s; surf(s);\ngl_FragData[0] = s.albedo;\ngl_FragData[1] = vec4(s.position, s.roughness);\ngl_FragData[2] = vec4(s.normal, s.metallic);\ngl_FragData[3] = vec4(s.emissive, s.occlusion);\n}\n#endif"},{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\nattribute float a_vertexId;\nint getVertexId() {\nreturn int(a_vertexId);\n}\nuniform vec4 cc_displacementWeights[15];\nuniform vec4 cc_displacementTextureInfo;\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 uv = getPixelCoordFromLocation(location, cc_displacementTextureInfo.xy);\nreturn texture2D(tex, uv);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture2D(tex, x)),\ndecode32(texture2D(tex, y)),\ndecode32(texture2D(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nuniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nuniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nuniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nattribute vec4 a_joints;\nattribute vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nattribute highp vec4 a_jointAnimInfo;\n#endif\nuniform highp vec4 cc_jointTextureInfo;\nuniform highp vec4 cc_jointAnimInfo;\nuniform highp sampler2D cc_jointTexture;\n#else\nuniform highp vec4 cc_joints[90];\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\n#if USE_INSTANCING\nattribute vec4 a_matWorld0;\nattribute vec4 a_matWorld1;\nattribute vec4 a_matWorld2;\n#if USE_LIGHTMAP\nattribute vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nattribute float a_dyn_batch_id;\nuniform highp mat4 cc_matWorlds[10];\n#else\nuniform highp mat4 cc_matWorld;\nuniform highp mat4 cc_matWorldIT;\n#endif\nuniform vec4 tilingOffset;\nuniform highp mat4 cc_matLightViewProj;\n#if HAS_SECOND_UV || USE_LIGHTMAP\nattribute vec2 a_texCoord1;\n#endif\nvarying vec2 v_uv;\nvarying vec2 v_uv1;\nvarying vec4 v_worldPos;\nvarying float v_clip_depth;\nvec4 vert () {\nStandardVertInput In;\nIn.position = vec4(a_position, 1.0);\nIn.normal = a_normal;\nIn.tangent = a_tangent;\n#if CC_USE_MORPH\napplyMorph(In);\n#endif\n#if CC_USE_SKINNING\nCCSkin(In);\n#endif\nmat4 matWorld, matWorldIT;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\nmatWorldIT = matWorld;\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\nmatWorldIT = matWorld;\n#else\nmatWorld = cc_matWorld;\nmatWorldIT = cc_matWorldIT;\n#endif\nv_worldPos = matWorld * In.position;\nvec4 clipPos = cc_matLightViewProj * v_worldPos;\nv_uv = a_texCoord * tilingOffset.xy + tilingOffset.zw;\n#if HAS_SECOND_UV\nv_uv1 = a_texCoord1 * tilingOffset.xy + tilingOffset.zw;\n#endif\nv_clip_depth = clipPos.z / clipPos.w * 0.5 + 0.5;\nreturn clipPos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nuniform vec4 albedo;\nuniform vec4 albedoScaleAndCutoff;\nvec4 packDepthToRGBA (float depth) {\nvec4 ret = vec4(1.0, 255.0, 65025.0, 160581375.0) * depth;\nret = fract(ret);\nret -= ret.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\nreturn ret;\n}\nuniform highp mat4 cc_matLightView;\nuniform lowp vec4 cc_shadowNFLSInfo;\nuniform lowp vec4 cc_shadowLPNNInfo;\nvarying vec2 v_uv;\nvarying vec2 v_uv1;\nvarying vec4 v_worldPos;\nvarying float v_clip_depth;\n#if USE_ALBEDO_MAP\nuniform sampler2D albedoMap;\n#endif\n#if USE_ALPHA_TEST\n#endif\nvec4 frag () {\nvec4 baseColor = albedo;\n#if USE_ALBEDO_MAP\nbaseColor *= texture2D(albedoMap, ALBEDO_UV);\n#endif\n#if USE_ALPHA_TEST\nif (baseColor.ALPHA_TEST_CHANNEL < albedoScaleAndCutoff.w) discard;\n#endif\nif(cc_shadowLPNNInfo.x > 0.000001 && cc_shadowLPNNInfo.x < 1.999999) {\nif (cc_shadowNFLSInfo.z > 0.000001) {\nvec4 viewStartPos = cc_matLightView * v_worldPos;\nfloat dist = length(viewStartPos.xyz);\nfloat linearDepth = cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\nreturn vec4(linearDepth, 1.0, 1.0, 1.0);\n}\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nreturn packDepthToRGBA(v_clip_depth);\n}\nreturn vec4(v_clip_depth, 1.0, 1.0, 1.0);\n}\nvoid main() { gl_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nuniform highp mat4 cc_matViewProj;\nuniform highp vec4 cc_cameraPos;\nuniform mediump vec4 cc_fogBase;\nuniform mediump vec4 cc_fogAdd;\nuniform highp mat4 cc_matWorld;\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nvarying float v_fog_factor;\nvarying highp vec4 v_shadowPos;\nuniform highp mat4 cc_matLightViewProj;\n#if CC_RECEIVE_SHADOW\nuniform sampler2D cc_shadowMap;\nuniform sampler2D cc_spotLightingMap;\n#endif\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nvarying highp vec3 v_position;\nvarying mediump vec3 v_normal;\n#if USE_NORMALMAP\nvarying mediump vec3 v_tangent;\nvarying mediump vec3 v_binormal;\n#endif\nvarying mediump vec2 uvw;\nvarying mediump vec2 uv0;\nvarying mediump vec2 uv1;\nvarying mediump vec2 uv2;\nvarying mediump vec2 uv3;\nvarying mediump vec3 luv;\nvarying mediump vec3 diffuse;\nuniform vec4 UVScale;\nuniform vec4 lightMapUVParam;\nvoid main () {\nvec3 worldPos;\nworldPos.x = cc_matWorld[3][0] + a_position.x;\nworldPos.y = cc_matWorld[3][1] + a_position.y;\nworldPos.z = cc_matWorld[3][2] + a_position.z;\nvec4 pos = vec4(worldPos, 1.0);\npos = cc_matViewProj * pos;\nuvw = a_texCoord;\nuv0 = a_position.xz * UVScale.x;\nuv1 = a_position.xz * UVScale.y;\nuv2 = a_position.xz * UVScale.z;\nuv3 = a_position.xz * UVScale.w;\n#if USE_LIGHTMAP\nluv.xy = lightMapUVParam.xy + a_texCoord * lightMapUVParam.zw;\nluv.z = lightMapUVParam.z;\n#endif\nv_position = worldPos;\nv_normal = a_normal;\n#if CC_USE_FOG == 0\nv_fog_factor = LinearFog(vec4(worldPos, 1.0));\n#elif CC_USE_FOG == 1\nv_fog_factor = ExpFog(vec4(worldPos, 1.0));\n#elif CC_USE_FOG == 2\nv_fog_factor = ExpSquaredFog(vec4(worldPos, 1.0));\n#elif CC_USE_FOG == 3\nv_fog_factor = LayeredFog(vec4(worldPos, 1.0));\n#else\nv_fog_factor = 1.0;\n#endif\n#if USE_NORMALMAP\nv_tangent = vec3(1.0, 0.0, 0.0);\nv_binormal = vec3(0.0, 0.0, 1.0);\nv_binormal = cross(v_tangent, a_normal);\nv_tangent = cross(a_normal, v_binormal);\n#endif\nv_shadowPos = cc_matLightViewProj * vec4(worldPos, 1.0);\ngl_Position = pos;\n}",frag:"\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers: enable\n#endif\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod: enable\n#endif\nprecision highp float;\nuniform highp vec4 cc_cameraPos;\nuniform mediump vec4 cc_exposure;\nuniform mediump vec4 cc_mainLitDir;\nuniform mediump vec4 cc_mainLitColor;\nuniform mediump vec4 cc_ambientSky;\nuniform mediump vec4 cc_ambientGround;\nuniform mediump vec4 cc_fogColor;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nuniform highp mat4 cc_matLightView;\nuniform lowp vec4 cc_shadowNFLSInfo;\nuniform lowp vec4 cc_shadowWHPBInfo;\nuniform lowp vec4 cc_shadowLPNNInfo;\n#if CC_RECEIVE_SHADOW\nuniform sampler2D cc_shadowMap;\nuniform sampler2D cc_spotLightingMap;\nfloat CCGetLinearDepth (vec3 worldPos) {\nvec4 viewStartPos = cc_matLightView * vec4(worldPos.xyz, 1.0);\nfloat dist = length(viewStartPos.xyz);\nreturn cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\n}\nfloat CCGetShadowFactorHard (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture2D(cc_shadowMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture2D(cc_shadowMap, clipPos.xy).x;\n}\nshadow = step(clipPos.z- cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetShadowFactorSoft (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetDepth = clipPos.z - cc_shadowWHPBInfo.w;\nvec2 oneTap = 1.0 / cc_shadowWHPBInfo.xy;\nvec2 clipPos_offset = clipPos.xy + oneTap;\nfloat block0, block1, block2, block3;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock1 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)).x);\nblock2 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)).x);\nblock3 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)).x);\n}\nfloat coefX   = mod(clipPos.x, oneTap.x) * cc_shadowWHPBInfo.x;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block2, block3, coefX);\nfloat coefY   = mod(clipPos.y, oneTap.y) * cc_shadowWHPBInfo.y;\nreturn mix(resultX, resultY, coefY);\n}\nfloat CCGetShadowFactorSoft2X (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat bias = cc_shadowWHPBInfo.w;\nfloat offsetDepth = clipPos.z - bias;\nvec2 mapSize = cc_shadowWHPBInfo.xy;\nvec2 oneTap = 1.0 / mapSize;\nfloat clipPos_offset_L = clipPos.x - oneTap.x;\nfloat clipPos_offset_R = clipPos.x + oneTap.x;\nfloat clipPos_offset_U = clipPos.y - oneTap.y;\nfloat clipPos_offset_D = clipPos.y + oneTap.y;\nfloat block0, block1, block2, block3, block4, block5, block6, block7, block8;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock4 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock5 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock6 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock7 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock8 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)).x);\nblock1 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)).x);\nblock2 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)).x);\nblock3 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)).x);\nblock4 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock5 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)).x);\nblock6 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)).x);\nblock7 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)).x);\nblock8 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)).x);\n}\nfloat coefX = mod(clipPos.x, oneTap.x) * mapSize.x;\nfloat coefY = mod(clipPos.y, oneTap.y) * mapSize.y;\nfloat shadow = 0.0;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block3, block4, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block1, block2, coefX);\nresultY = mix(block4, block5, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block3, block4, coefX);\nresultY = mix(block6, block7, coefX);\nshadow += mix(resultX, resultY, coefY);\nresultX = mix(block4, block5, coefX);\nresultY = mix(block7, block8, coefX);\nshadow += mix(resultX, resultY, coefY);\nreturn shadow * 0.25;\n}\nfloat CCGetSpotLightShadowFactorHard (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture2D(cc_spotLightingMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture2D(cc_spotLightingMap, clipPos.xy).x;\n}\nshadow = step(depth - cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetSpotLightShadowFactorSoft (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfloat closestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n} else {\nfloat closestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\nreturn shadow / 5.0;\n}\nfloat CCGetSpotLightShadowFactorSoft2X (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = dot(texture2D(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n}\n}\n} else {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = texture2D(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\n}\n}\nreturn shadow / 9.0;\n}\n#endif\n#if CC_USE_IBL\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec4 fragTextureLod (sampler2D tex, vec2 coord, float lod) {\n#ifdef GL_EXT_shader_texture_lod\nreturn texture2DLodEXT(tex, coord, lod);\n#else\nreturn texture2D(tex, coord, lod);\n#endif\n}\nvec4 fragTextureLod (samplerCube tex, vec3 coord, float lod) {\n#ifdef GL_EXT_shader_texture_lod\nreturn textureCubeLodEXT(tex, coord, lod);\n#else\nreturn textureCube(tex, coord, lod);\n#endif\n}\n#endif\nfloat GGXMobile (float roughness, float NoH, vec3 H, vec3 N) {\nvec3 NxH = cross(N, H);\nfloat OneMinusNoHSqr = dot(NxH, NxH);\nfloat a = roughness * roughness;\nfloat n = NoH * a;\nfloat p = a / (OneMinusNoHSqr + n * n);\nreturn p * p;\n}\nfloat CalcSpecular (float roughness, float NoH, vec3 H, vec3 N) {\nreturn (roughness * 0.25 + 0.25) * GGXMobile(roughness, NoH, H, N);\n}\nvec3 BRDFApprox (vec3 specular, float roughness, float NoV) {\nconst vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);\nconst vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NoV)) * r.x + r.y;\nvec2 AB = vec2(-1.04, 1.04) * a004 + r.zw;\nAB.y *= clamp(50.0 * specular.g, 0.0, 1.0);\nreturn specular * AB.x + AB.y;\n}\nstruct StandardSurface {\nvec4 albedo;\nvec3 position;\nvec3 normal;\nvec3 emissive;\nvec3 lightmap;\nfloat lightmap_test;\nfloat roughness;\nfloat metallic;\nfloat occlusion;\n};\nvec4 CCStandardShadingBase (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.0);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 L = normalize(-cc_mainLitDir.xyz);\nvec3 H = normalize(L + V);\nfloat NH = max(dot(N, H), 0.0);\nfloat NL = max(dot(N, L), 0.0);\nvec3 finalColor = NL * cc_mainLitColor.rgb * cc_mainLitColor.w;\nvec3 diffuseContrib = diffuse;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nif (s.lightmap_test > 0.0001) {\nfinalColor = s.lightmap.rgb;\n}\n#else\ndiffuseContrib /= 3.14159265359;\n#endif\nvec3 specularContrib = specular * CalcSpecular(s.roughness, NH, H, N);\nvec3 dirlightContrib = (diffuseContrib + specularContrib);\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (NL > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nvec3 projWorldPos = shadowPos.xyz + (1.0 - NL) * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetShadowFactorSoft2X(pos);\nelse if (pcf > 0.9) shadow = CCGetShadowFactorSoft(pos);\nelse shadow = CCGetShadowFactorHard(pos);\nshadow = mix(shadow, 1.0, cc_shadowNFLSInfo.w);\n}\n}\n#endif\ndirlightContrib *= shadow;\nfinalColor *= dirlightContrib;\nfloat fAmb = 0.5 - N.y * 0.5;\nvec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\nfinalColor += (ambDiff.rgb * diffuse) * s.occlusion;\n#if CC_USE_IBL\nvec3 R = normalize(reflect(-V, N));\nvec4 envmap = fragTextureLod(cc_environment, R, s.roughness * cc_ambientGround.w);\n#if CC_USE_IBL == 2\nvec3 env = unpackRGBE(envmap);\n#else\nvec3 env = SRGBToLinear(envmap.rgb);\n#endif\nfinalColor += env * cc_ambientSky.w * specular * s.occlusion;\n#endif\n#if CC_USE_HDR\ns.emissive *= cc_exposure.w;\n#endif\nfinalColor += s.emissive;\nreturn vec4(finalColor, s.albedo.a);\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nvarying float v_fog_factor;\nvarying highp vec4 v_shadowPos;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nvarying vec3 v_luv;\nuniform sampler2D cc_lightingMap;\nvec3 UnpackLightingmap(vec4 color) {\nvec3 c;\nfloat e = 1.0 + color.a * (8.0 - 1.0);\nc.r = color.r * e;\nc.g = color.g * e;\nc.b = color.b * e;\nreturn c;\n}\n#endif\nvarying highp vec3 v_position;\nvarying mediump vec3 v_normal;\n#if USE_NORMALMAP\nvarying mediump vec3 v_tangent;\nvarying mediump vec3 v_binormal;\n#endif\nvarying mediump vec2 uvw;\nvarying mediump vec2 uv0;\nvarying mediump vec2 uv1;\nvarying mediump vec2 uv2;\nvarying mediump vec2 uv3;\nvarying mediump vec3 diffuse;\nvarying mediump vec3 luv;\nuniform vec4 metallic;\nuniform vec4 roughness;\nuniform sampler2D weightMap;\nuniform sampler2D detailMap0;\nuniform sampler2D detailMap1;\nuniform sampler2D detailMap2;\nuniform sampler2D detailMap3;\nuniform sampler2D normalMap0;\nuniform sampler2D normalMap1;\nuniform sampler2D normalMap2;\nuniform sampler2D normalMap3;\nuniform sampler2D lightMap;\nvoid surf (out StandardSurface s) {\n#if LAYERS > 1\nvec4 w = texture2D(weightMap, uvw);\n#endif\nvec4 baseColor = vec4(0, 0, 0, 0);\n#if LAYERS == 1\nbaseColor = texture2D(detailMap0, uv0);\n#elif LAYERS == 2\nbaseColor += texture2D(detailMap0, uv0) * w.r;\nbaseColor += texture2D(detailMap1, uv1) * w.g;\n#elif LAYERS == 3\nbaseColor += texture2D(detailMap0, uv0) * w.r;\nbaseColor += texture2D(detailMap1, uv1) * w.g;\nbaseColor += texture2D(detailMap2, uv2) * w.b;\n#elif LAYERS == 4\nbaseColor += texture2D(detailMap0, uv0) * w.r;\nbaseColor += texture2D(detailMap1, uv1) * w.g;\nbaseColor += texture2D(detailMap2, uv2) * w.b;\nbaseColor += texture2D(detailMap3, uv3) * w.a;\n#else\nbaseColor = texture2D(detailMap0, uv0);\n#endif\ns.position = v_position;\n#if USE_NORMALMAP\nvec4 baseNormal = vec4(0, 0, 0, 0);\n#if LAYERS == 1\nbaseNormal = texture2D(normalMap0, uv0);\n#elif LAYERS == 2\nbaseNormal += texture2D(normalMap0, uv0) * w.r;\nbaseNormal += texture2D(normalMap1, uv1) * w.g;\n#elif LAYERS == 3\nbaseNormal += texture2D(normalMap0, uv0) * w.r;\nbaseNormal += texture2D(normalMap1, uv1) * w.g;\nbaseNormal += texture2D(normalMap2, uv2) * w.b;\n#elif LAYERS == 4\nbaseNormal += texture2D(normalMap0, uv0) * w.r;\nbaseNormal += texture2D(normalMap1, uv1) * w.g;\nbaseNormal += texture2D(normalMap2, uv2) * w.b;\nbaseNormal += texture2D(normalMap3, uv3) * w.a;\n#else\nbaseNormal = texture2D(normalMap0, uv0);\n#endif\nvec3 nmmp = baseNormal.xyz - vec3(0.5);\ns.normal =\nnmmp.x * normalize(v_tangent) +\nnmmp.y * normalize(v_binormal) +\nnmmp.z * normalize(v_normal);\n#else\ns.normal = v_normal;\n#endif\ns.albedo = vec4(SRGBToLinear(baseColor.rgb), 1.0);\ns.occlusion = 1.0;\n#if USE_PBR\ns.roughness = 0.0;\n#if LAYERS == 1\ns.roughness = roughness.x;\n#elif LAYERS == 2\ns.roughness += roughness.x * w.r;\ns.roughness += roughness.y * w.g;\n#elif LAYERS == 3\ns.roughness += roughness.x * w.r;\ns.roughness += roughness.y * w.g;\ns.roughness += roughness.z * w.b;\n#elif LAYERS == 4\ns.roughness += roughness.x * w.r;\ns.roughness += roughness.y * w.g;\ns.roughness += roughness.z * w.b;\ns.roughness += roughness.w * w.a;\n#else\ns.roughness = 1.0;\n#endif\ns.metallic = 0.0;\n#if LAYERS == 1\ns.metallic = metallic.x;\n#elif LAYERS == 2\ns.metallic += metallic.x * w.r;\ns.metallic += metallic.y * w.g;\n#elif LAYERS == 3\ns.metallic += metallic.x * w.r;\ns.metallic += metallic.y * w.g;\ns.metallic += metallic.z * w.b;\n#elif LAYERS == 4\ns.metallic += metallic.x * w.r;\ns.metallic += metallic.y * w.g;\ns.metallic += metallic.z * w.b;\ns.metallic += metallic.w * w.a;\n#else\ns.metallic = 0.0;\n#endif\n#else\ns.roughness = 1.0;\ns.metallic = 0.0;\n#endif\ns.emissive = vec3(0.0, 0.0, 0.0);\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nvec4 lightColor = texture2D(lightMap, luv.xy);\ns.lightmap = UnpackLightingmap(lightColor);\ns.lightmap_test = luv.z;\n#endif\n}\n#if CC_FORWARD_ADD\n#if CC_PIPELINE_TYPE == 0\n# define LIGHTS_PER_PASS 1\n#else\n# define LIGHTS_PER_PASS 10\n#endif\nuniform highp vec4 cc_lightPos[LIGHTS_PER_PASS];\nuniform vec4 cc_lightColor[LIGHTS_PER_PASS];\nuniform vec4 cc_lightSizeRangeAngle[LIGHTS_PER_PASS];\nuniform vec4 cc_lightDir[LIGHTS_PER_PASS];\nfloat SmoothDistAtt (float distSqr, float invSqrAttRadius) {\nfloat factor = distSqr * invSqrAttRadius;\nfloat smoothFactor = clamp(1.0 - factor * factor, 0.0, 1.0);\nreturn smoothFactor * smoothFactor;\n}\nfloat GetDistAtt (float distSqr, float invSqrAttRadius) {\nfloat attenuation = 1.0 / max(distSqr, 0.01*0.01);\nattenuation *= SmoothDistAtt(distSqr , invSqrAttRadius);\nreturn attenuation;\n}\nfloat GetAngleAtt (vec3 L, vec3 litDir, float litAngleScale, float litAngleOffset) {\nfloat cd = dot(litDir, L);\nfloat attenuation = clamp(cd * litAngleScale + litAngleOffset, 0.0, 1.0);\nreturn (attenuation * attenuation);\n}\nvec4 CCStandardShadingAdditive (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 diffuseContrib = diffuse / 3.14159265359;\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.001);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 finalColor = vec3(0.0);\nint numLights = CC_PIPELINE_TYPE == 0 ? LIGHTS_PER_PASS : int(cc_lightDir[0].w);\nfor (int i = 0; i < LIGHTS_PER_PASS; i++) {\nif (i >= numLights) break;\nvec3 SLU = cc_lightPos[i].xyz - s.position;\nvec3 SL = normalize(SLU);\nvec3 SH = normalize(SL + V);\nfloat SNL = max(dot(N, SL), 0.001);\nfloat SNH = max(dot(N, SH), 0.0);\nfloat distSqr = dot(SLU, SLU);\nfloat litRadius = cc_lightSizeRangeAngle[i].x;\nfloat litRadiusSqr = litRadius * litRadius;\nfloat illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\nfloat attRadiusSqrInv = 1.0 / max(cc_lightSizeRangeAngle[i].y, 0.01);\nattRadiusSqrInv *= attRadiusSqrInv;\nfloat att = GetDistAtt(distSqr, attRadiusSqrInv);\nvec3 lspec = specular * CalcSpecular(s.roughness, SNH, SH, N);\nif (cc_lightPos[i].w > 0.0) {\nfloat cosInner = max(dot(-cc_lightDir[i].xyz, SL), 0.01);\nfloat cosOuter = cc_lightSizeRangeAngle[i].z;\nfloat litAngleScale = 1.0 / max(0.001, cosInner - cosOuter);\nfloat litAngleOffset = -cosOuter * litAngleScale;\natt *= GetAngleAtt(SL, -cc_lightDir[i].xyz, litAngleScale, litAngleOffset);\n}\nvec3 lightColor = cc_lightColor[i].rgb;\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (cc_lightPos[i].w > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nfloat cosAngle = clamp(1.0 - dot(N, normalize(cc_lightPos[i].xyz - s.position.xyz)), 0.0, 1.0);\nvec3 projWorldPos = shadowPos.xyz + cosAngle * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetSpotLightShadowFactorSoft2X(pos, s.position);\nelse if (pcf > 0.9) shadow = CCGetSpotLightShadowFactorSoft(pos, s.position);\nelse shadow = CCGetSpotLightShadowFactorHard(pos, s.position);\n}\n}\n#endif\nlightColor *= shadow;\nfinalColor += SNL * lightColor * cc_lightColor[i].w * illum * att * (diffuseContrib + lspec);\n}\nreturn vec4(finalColor, 0.0);\n}\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingAdditive(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\ngl_FragData[0] = CCFragOutput(color);\n}\n#elif (CC_PIPELINE_TYPE == 0 || CC_STANDARD_TRANSPARENT)\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingBase(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\ngl_FragData[0] = CCFragOutput(color);\n}\n#elif CC_PIPELINE_TYPE == 1\nvoid main () {\nStandardSurface s; surf(s);\ngl_FragData[0] = s.albedo;\ngl_FragData[1] = vec4(s.position, s.roughness);\ngl_FragData[2] = vec4(s.normal, s.metallic);\ngl_FragData[3] = vec4(s.emissive, s.occlusion);\n}\n#endif"},{vert:"\nprecision highp float;\nuniform highp mat4 cc_matWorld;\nuniform highp mat4 cc_matLightViewProj;\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nvarying vec2 v_clip_depth;\nvec4 vert () {\nvec4 worldPos;\nworldPos.x = cc_matWorld[3][0] + a_position.x;\nworldPos.y = cc_matWorld[3][1] + a_position.y;\nworldPos.z = cc_matWorld[3][2] + a_position.z;\nworldPos.w = 1.0;\nvec4 clipPos = cc_matLightViewProj * worldPos;\nv_clip_depth = clipPos.zw;\nreturn clipPos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nvec4 packDepthToRGBA (float depth) {\nvec4 ret = vec4(1.0, 255.0, 65025.0, 160581375.0) * depth;\nret = fract(ret);\nret -= ret.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\nreturn ret;\n}\nvarying vec2 v_clip_depth;\nvec4 frag () {\nreturn packDepthToRGBA(v_clip_depth.x / v_clip_depth.y * 0.5 + 0.5);\n}\nvoid main() { gl_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\nattribute float a_vertexId;\nint getVertexId() {\nreturn int(a_vertexId);\n}\nuniform vec4 cc_displacementWeights[15];\nuniform vec4 cc_displacementTextureInfo;\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 uv = getPixelCoordFromLocation(location, cc_displacementTextureInfo.xy);\nreturn texture2D(tex, uv);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture2D(tex, x)),\ndecode32(texture2D(tex, y)),\ndecode32(texture2D(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nuniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nuniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nuniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nattribute vec4 a_joints;\nattribute vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nattribute highp vec4 a_jointAnimInfo;\n#endif\nuniform highp vec4 cc_jointTextureInfo;\nuniform highp vec4 cc_jointAnimInfo;\nuniform highp sampler2D cc_jointTexture;\n#else\nuniform highp vec4 cc_joints[90];\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matProj;\nuniform highp vec4 cc_cameraPos;\nuniform mediump vec4 cc_fogBase;\nuniform mediump vec4 cc_fogAdd;\n#if USE_INSTANCING\nattribute vec4 a_matWorld0;\nattribute vec4 a_matWorld1;\nattribute vec4 a_matWorld2;\n#if USE_LIGHTMAP\nattribute vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nattribute float a_dyn_batch_id;\nuniform highp mat4 cc_matWorlds[10];\n#else\nuniform highp mat4 cc_matWorld;\n#endif\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nvarying float v_fog_factor;\n#if USE_VERTEX_COLOR\nattribute lowp vec4 a_color;\nvarying lowp vec4 v_color;\n#endif\n#if USE_TEXTURE\nvarying vec2 v_uv;\nuniform vec4 tilingOffset;\n#endif\nvec4 vert () {\nvec4 position;\nposition = vec4(a_position, 1.0);\n#if CC_USE_MORPH\napplyMorph(position);\n#endif\n#if CC_USE_SKINNING\nCCSkin(position);\n#endif\nmat4 matWorld;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\n#else\nmatWorld = cc_matWorld;\n#endif\n#if USE_TEXTURE\nv_uv = a_texCoord * tilingOffset.xy + tilingOffset.zw;\n#if SAMPLE_FROM_RT\nv_uv = cc_cameraPos.w > 1.0 ? vec2(v_uv.x, 1.0 - v_uv.y) : v_uv;\n#endif\n#endif\n#if USE_VERTEX_COLOR\nv_color = a_color;\n#endif\n#if CC_USE_FOG == 0\nv_fog_factor = LinearFog(matWorld * position);\n#elif CC_USE_FOG == 1\nv_fog_factor = ExpFog(matWorld * position);\n#elif CC_USE_FOG == 2\nv_fog_factor = ExpSquaredFog(matWorld * position);\n#elif CC_USE_FOG == 3\nv_fog_factor = LayeredFog(matWorld * position);\n#else\nv_fog_factor = 1.0;\n#endif\nreturn cc_matProj * (cc_matView * matWorld) * position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nuniform mediump vec4 cc_exposure;\nuniform mediump vec4 cc_fogColor;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nvarying float v_fog_factor;\n#if USE_ALPHA_TEST\n#endif\n#if USE_TEXTURE\nvarying vec2 v_uv;\nuniform sampler2D mainTexture;\n#endif\nuniform vec4 mainColor;\nuniform vec4 colorScaleAndCutoff;\n#if USE_VERTEX_COLOR\nvarying lowp vec4 v_color;\n#endif\nvec4 frag () {\nvec4 o = mainColor;\no.rgb *= colorScaleAndCutoff.xyz;\n#if USE_VERTEX_COLOR\no *= v_color;\n#endif\n#if USE_TEXTURE\no *= texture2D(mainTexture, v_uv);\n#endif\n#if USE_ALPHA_TEST\nif (o.ALPHA_TEST_CHANNEL < colorScaleAndCutoff.w) discard;\n#endif\no = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, o.rgb, v_fog_factor), o.a);\nreturn CCFragOutput(o);\n}\nvoid main() { gl_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\nuniform highp vec4 cc_cameraPos;\nvarying vec2 v_uv;\nvoid main () {\nvec4 position;\nposition = vec4(a_position, 1.0);\nposition.xy = cc_cameraPos.w == 0.0 ? vec2(position.xy.x, -position.xy.y) : position.xy;\ngl_Position = vec4(position.x, position.y, 1.0, 1.0);\nv_uv = a_texCoord;\n}",frag:"\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod: enable\n#endif\nprecision highp float;\nuniform highp vec4 cc_cameraPos;\nuniform mediump vec4 cc_exposure;\nuniform mediump vec4 cc_mainLitDir;\nuniform mediump vec4 cc_mainLitColor;\nuniform mediump vec4 cc_ambientSky;\nuniform mediump vec4 cc_ambientGround;\nuniform mediump vec4 cc_fogColor;\nuniform mediump vec4 cc_fogBase;\nuniform mediump vec4 cc_fogAdd;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nuniform highp mat4 cc_matLightView;\nuniform highp mat4 cc_matLightViewProj;\nuniform lowp vec4 cc_shadowNFLSInfo;\nuniform lowp vec4 cc_shadowWHPBInfo;\nuniform lowp vec4 cc_shadowLPNNInfo;\n#if CC_RECEIVE_SHADOW\nuniform sampler2D cc_shadowMap;\nuniform sampler2D cc_spotLightingMap;\nfloat CCGetLinearDepth (vec3 worldPos) {\nvec4 viewStartPos = cc_matLightView * vec4(worldPos.xyz, 1.0);\nfloat dist = length(viewStartPos.xyz);\nreturn cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\n}\nfloat CCGetShadowFactorHard (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture2D(cc_shadowMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture2D(cc_shadowMap, clipPos.xy).x;\n}\nshadow = step(clipPos.z- cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetShadowFactorSoft (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetDepth = clipPos.z - cc_shadowWHPBInfo.w;\nvec2 oneTap = 1.0 / cc_shadowWHPBInfo.xy;\nvec2 clipPos_offset = clipPos.xy + oneTap;\nfloat block0, block1, block2, block3;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock1 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)).x);\nblock2 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)).x);\nblock3 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)).x);\n}\nfloat coefX   = mod(clipPos.x, oneTap.x) * cc_shadowWHPBInfo.x;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block2, block3, coefX);\nfloat coefY   = mod(clipPos.y, oneTap.y) * cc_shadowWHPBInfo.y;\nreturn mix(resultX, resultY, coefY);\n}\nfloat CCGetShadowFactorSoft2X (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat bias = cc_shadowWHPBInfo.w;\nfloat offsetDepth = clipPos.z - bias;\nvec2 mapSize = cc_shadowWHPBInfo.xy;\nvec2 oneTap = 1.0 / mapSize;\nfloat clipPos_offset_L = clipPos.x - oneTap.x;\nfloat clipPos_offset_R = clipPos.x + oneTap.x;\nfloat clipPos_offset_U = clipPos.y - oneTap.y;\nfloat clipPos_offset_D = clipPos.y + oneTap.y;\nfloat block0, block1, block2, block3, block4, block5, block6, block7, block8;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock4 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock5 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock6 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock7 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock8 = step(offsetDepth, dot(texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)).x);\nblock1 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)).x);\nblock2 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)).x);\nblock3 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)).x);\nblock4 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock5 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)).x);\nblock6 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)).x);\nblock7 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)).x);\nblock8 = step(offsetDepth, texture2D(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)).x);\n}\nfloat coefX = mod(clipPos.x, oneTap.x) * mapSize.x;\nfloat coefY = mod(clipPos.y, oneTap.y) * mapSize.y;\nfloat shadow = 0.0;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block3, block4, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block1, block2, coefX);\nresultY = mix(block4, block5, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block3, block4, coefX);\nresultY = mix(block6, block7, coefX);\nshadow += mix(resultX, resultY, coefY);\nresultX = mix(block4, block5, coefX);\nresultY = mix(block7, block8, coefX);\nshadow += mix(resultX, resultY, coefY);\nreturn shadow * 0.25;\n}\nfloat CCGetSpotLightShadowFactorHard (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture2D(cc_spotLightingMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture2D(cc_spotLightingMap, clipPos.xy).x;\n}\nshadow = step(depth - cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetSpotLightShadowFactorSoft (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfloat closestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n} else {\nfloat closestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture2D(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\nreturn shadow / 5.0;\n}\nfloat CCGetSpotLightShadowFactorSoft2X (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = dot(texture2D(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n}\n}\n} else {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = texture2D(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\n}\n}\nreturn shadow / 9.0;\n}\n#endif\n#if CC_USE_IBL\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec4 fragTextureLod (sampler2D tex, vec2 coord, float lod) {\n#ifdef GL_EXT_shader_texture_lod\nreturn texture2DLodEXT(tex, coord, lod);\n#else\nreturn texture2D(tex, coord, lod);\n#endif\n}\nvec4 fragTextureLod (samplerCube tex, vec3 coord, float lod) {\n#ifdef GL_EXT_shader_texture_lod\nreturn textureCubeLodEXT(tex, coord, lod);\n#else\nreturn textureCube(tex, coord, lod);\n#endif\n}\n#endif\nfloat GGXMobile (float roughness, float NoH, vec3 H, vec3 N) {\nvec3 NxH = cross(N, H);\nfloat OneMinusNoHSqr = dot(NxH, NxH);\nfloat a = roughness * roughness;\nfloat n = NoH * a;\nfloat p = a / (OneMinusNoHSqr + n * n);\nreturn p * p;\n}\nfloat CalcSpecular (float roughness, float NoH, vec3 H, vec3 N) {\nreturn (roughness * 0.25 + 0.25) * GGXMobile(roughness, NoH, H, N);\n}\nvec3 BRDFApprox (vec3 specular, float roughness, float NoV) {\nconst vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);\nconst vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NoV)) * r.x + r.y;\nvec2 AB = vec2(-1.04, 1.04) * a004 + r.zw;\nAB.y *= clamp(50.0 * specular.g, 0.0, 1.0);\nreturn specular * AB.x + AB.y;\n}\nstruct StandardSurface {\nvec4 albedo;\nvec3 position;\nvec3 normal;\nvec3 emissive;\nvec3 lightmap;\nfloat lightmap_test;\nfloat roughness;\nfloat metallic;\nfloat occlusion;\n};\nvec4 CCStandardShadingBase (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.0);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 L = normalize(-cc_mainLitDir.xyz);\nvec3 H = normalize(L + V);\nfloat NH = max(dot(N, H), 0.0);\nfloat NL = max(dot(N, L), 0.0);\nvec3 finalColor = NL * cc_mainLitColor.rgb * cc_mainLitColor.w;\nvec3 diffuseContrib = diffuse;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nif (s.lightmap_test > 0.0001) {\nfinalColor = s.lightmap.rgb;\n}\n#else\ndiffuseContrib /= 3.14159265359;\n#endif\nvec3 specularContrib = specular * CalcSpecular(s.roughness, NH, H, N);\nvec3 dirlightContrib = (diffuseContrib + specularContrib);\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (NL > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nvec3 projWorldPos = shadowPos.xyz + (1.0 - NL) * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetShadowFactorSoft2X(pos);\nelse if (pcf > 0.9) shadow = CCGetShadowFactorSoft(pos);\nelse shadow = CCGetShadowFactorHard(pos);\nshadow = mix(shadow, 1.0, cc_shadowNFLSInfo.w);\n}\n}\n#endif\ndirlightContrib *= shadow;\nfinalColor *= dirlightContrib;\nfloat fAmb = 0.5 - N.y * 0.5;\nvec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\nfinalColor += (ambDiff.rgb * diffuse) * s.occlusion;\n#if CC_USE_IBL\nvec3 R = normalize(reflect(-V, N));\nvec4 envmap = fragTextureLod(cc_environment, R, s.roughness * cc_ambientGround.w);\n#if CC_USE_IBL == 2\nvec3 env = unpackRGBE(envmap);\n#else\nvec3 env = SRGBToLinear(envmap.rgb);\n#endif\nfinalColor += env * cc_ambientSky.w * specular * s.occlusion;\n#endif\n#if CC_USE_HDR\ns.emissive *= cc_exposure.w;\n#endif\nfinalColor += s.emissive;\nreturn vec4(finalColor, s.albedo.a);\n}\n#if CC_PIPELINE_TYPE == 0\n# define LIGHTS_PER_PASS 1\n#else\n# define LIGHTS_PER_PASS 10\n#endif\nuniform highp vec4 cc_lightPos[LIGHTS_PER_PASS];\nuniform vec4 cc_lightColor[LIGHTS_PER_PASS];\nuniform vec4 cc_lightSizeRangeAngle[LIGHTS_PER_PASS];\nuniform vec4 cc_lightDir[LIGHTS_PER_PASS];\nfloat SmoothDistAtt (float distSqr, float invSqrAttRadius) {\nfloat factor = distSqr * invSqrAttRadius;\nfloat smoothFactor = clamp(1.0 - factor * factor, 0.0, 1.0);\nreturn smoothFactor * smoothFactor;\n}\nfloat GetDistAtt (float distSqr, float invSqrAttRadius) {\nfloat attenuation = 1.0 / max(distSqr, 0.01*0.01);\nattenuation *= SmoothDistAtt(distSqr , invSqrAttRadius);\nreturn attenuation;\n}\nfloat GetAngleAtt (vec3 L, vec3 litDir, float litAngleScale, float litAngleOffset) {\nfloat cd = dot(litDir, L);\nfloat attenuation = clamp(cd * litAngleScale + litAngleOffset, 0.0, 1.0);\nreturn (attenuation * attenuation);\n}\nvec4 CCStandardShadingAdditive (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 diffuseContrib = diffuse / 3.14159265359;\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.001);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 finalColor = vec3(0.0);\nint numLights = CC_PIPELINE_TYPE == 0 ? LIGHTS_PER_PASS : int(cc_lightDir[0].w);\nfor (int i = 0; i < LIGHTS_PER_PASS; i++) {\nif (i >= numLights) break;\nvec3 SLU = cc_lightPos[i].xyz - s.position;\nvec3 SL = normalize(SLU);\nvec3 SH = normalize(SL + V);\nfloat SNL = max(dot(N, SL), 0.001);\nfloat SNH = max(dot(N, SH), 0.0);\nfloat distSqr = dot(SLU, SLU);\nfloat litRadius = cc_lightSizeRangeAngle[i].x;\nfloat litRadiusSqr = litRadius * litRadius;\nfloat illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\nfloat attRadiusSqrInv = 1.0 / max(cc_lightSizeRangeAngle[i].y, 0.01);\nattRadiusSqrInv *= attRadiusSqrInv;\nfloat att = GetDistAtt(distSqr, attRadiusSqrInv);\nvec3 lspec = specular * CalcSpecular(s.roughness, SNH, SH, N);\nif (cc_lightPos[i].w > 0.0) {\nfloat cosInner = max(dot(-cc_lightDir[i].xyz, SL), 0.01);\nfloat cosOuter = cc_lightSizeRangeAngle[i].z;\nfloat litAngleScale = 1.0 / max(0.001, cosInner - cosOuter);\nfloat litAngleOffset = -cosOuter * litAngleScale;\natt *= GetAngleAtt(SL, -cc_lightDir[i].xyz, litAngleScale, litAngleOffset);\n}\nvec3 lightColor = cc_lightColor[i].rgb;\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (cc_lightPos[i].w > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nfloat cosAngle = clamp(1.0 - dot(N, normalize(cc_lightPos[i].xyz - s.position.xyz)), 0.0, 1.0);\nvec3 projWorldPos = shadowPos.xyz + cosAngle * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetSpotLightShadowFactorSoft2X(pos, s.position);\nelse if (pcf > 0.9) shadow = CCGetSpotLightShadowFactorSoft(pos, s.position);\nelse shadow = CCGetSpotLightShadowFactorHard(pos, s.position);\n}\n}\n#endif\nlightColor *= shadow;\nfinalColor += SNL * lightColor * cc_lightColor[i].w * illum * att * (diffuseContrib + lspec);\n}\nreturn vec4(finalColor, 0.0);\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nvarying vec2 v_uv;\nuniform sampler2D cc_gbuffer_albedoMap;\nuniform sampler2D cc_gbuffer_positionMap;\nuniform sampler2D cc_gbuffer_normalMap;\nuniform sampler2D cc_gbuffer_emissiveMap;\nvoid main () {\nStandardSurface s;\nvec4 albedoMap = texture2D(cc_gbuffer_albedoMap,v_uv);\nvec4 positionMap = texture2D(cc_gbuffer_positionMap,v_uv);\nvec4 normalMap = texture2D(cc_gbuffer_normalMap,v_uv);\nvec4 emissiveMap = texture2D(cc_gbuffer_emissiveMap,v_uv);\ns.albedo = albedoMap;\ns.position = positionMap.xyz;\ns.roughness = positionMap.w;\ns.normal = normalMap.xyz;\ns.metallic = normalMap.w;\ns.emissive = emissiveMap.xyz;\ns.occlusion = emissiveMap.w;\nfloat fogFactor;\n#if CC_USE_FOG == 0\nfogFactor = LinearFog(vec4(s.position, 1));\n#elif CC_USE_FOG == 1\nfogFactor = ExpFog(vec4(s.position, 1));\n#elif CC_USE_FOG == 2\nfogFactor = ExpSquaredFog(vec4(s.position, 1));\n#elif CC_USE_FOG == 3\nfogFactor = LayeredFog(vec4(s.position, 1));\n#else\nfogFactor = 1.0;\n#endif\nvec4 shadowPos;\nshadowPos = cc_matLightViewProj * vec4(s.position, 1);\nvec4 color = CCStandardShadingBase(s, shadowPos) +\nCCStandardShadingAdditive(s, shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, fogFactor), color.a);\ngl_FragColor = CCFragOutput(color);\n}"}],[{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\nattribute float a_vertexId;\nint getVertexId() {\nreturn int(a_vertexId);\n}\nuniform vec4 cc_displacementWeights[15];\nuniform vec4 cc_displacementTextureInfo;\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 uv = getPixelCoordFromLocation(location, cc_displacementTextureInfo.xy);\nreturn texture2D(tex, uv);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture2D(tex, x)),\ndecode32(texture2D(tex, y)),\ndecode32(texture2D(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nuniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nuniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nuniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nattribute vec4 a_joints;\nattribute vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nattribute highp vec4 a_jointAnimInfo;\n#endif\nuniform highp vec4 cc_jointTextureInfo;\nuniform highp vec4 cc_jointAnimInfo;\nuniform highp sampler2D cc_jointTexture;\n#else\nuniform highp vec4 cc_joints[90];\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matProj;\n#if USE_INSTANCING\nattribute vec4 a_matWorld0;\nattribute vec4 a_matWorld1;\nattribute vec4 a_matWorld2;\n#if USE_LIGHTMAP\nattribute vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nattribute float a_dyn_batch_id;\nuniform highp mat4 cc_matWorlds[10];\n#else\nuniform highp mat4 cc_matWorld;\n#endif\nuniform highp mat4 cc_matLightPlaneProj;\nvec4 vert () {\nvec4 position;\nposition = vec4(a_position, 1.0);\n#if CC_USE_MORPH\napplyMorph(position);\n#endif\n#if CC_USE_SKINNING\nCCSkin(position);\n#endif\nmat4 matWorld;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\n#else\nmatWorld = cc_matWorld;\n#endif\nposition = cc_matProj * (cc_matView * cc_matLightPlaneProj * matWorld) * position;\nposition.z -= 0.0001;\nreturn position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform lowp vec4 cc_shadowColor;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nvec4 frag () {\nreturn CCFragOutput(cc_shadowColor);\n}\nvoid main() { gl_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\nattribute float a_vertexId;\nint getVertexId() {\nreturn int(a_vertexId);\n}\nuniform vec4 cc_displacementWeights[15];\nuniform vec4 cc_displacementTextureInfo;\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 uv = getPixelCoordFromLocation(location, cc_displacementTextureInfo.xy);\nreturn texture2D(tex, uv);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture2D(tex, x)),\ndecode32(texture2D(tex, y)),\ndecode32(texture2D(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nuniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nuniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nuniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nattribute vec4 a_joints;\nattribute vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nattribute highp vec4 a_jointAnimInfo;\n#endif\nuniform highp vec4 cc_jointTextureInfo;\nuniform highp vec4 cc_jointAnimInfo;\nuniform highp sampler2D cc_jointTexture;\n#else\nuniform highp vec4 cc_joints[90];\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nuniform highp vec4 cc_cameraPos;\nvarying vec2 v_uv;\nvoid main () {\nStandardVertInput In;\nIn.position = vec4(a_position, 1.0);\nIn.normal = a_normal;\nIn.tangent = a_tangent;\n#if CC_USE_MORPH\napplyMorph(In);\n#endif\n#if CC_USE_SKINNING\nCCSkin(In);\n#endif\nIn.position.xy = cc_cameraPos.w == 0.0 ? vec2(In.position.xy.x, -In.position.xy.y) : In.position.xy;\ngl_Position = In.position;\ngl_Position.y = gl_Position.y;\nv_uv = a_texCoord;\n}",frag:"\nprecision highp float;\nuniform mediump vec4 cc_screenSize;\nvarying vec2 v_uv;\nuniform sampler2D cc_lighting_resultMap;\nvoid texcoords(vec2 fragCoord, vec2 resolution,\nout vec2 v_rgbNW, out vec2 v_rgbNE,\nout vec2 v_rgbSW, out vec2 v_rgbSE,\nout vec2 v_rgbM) {\nvec2 inverseVP = 1.0 / resolution.xy;\nv_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\nv_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\nv_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\nv_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\nv_rgbM = vec2(fragCoord * inverseVP);\n}\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\nvec2 v_rgbNW, vec2 v_rgbNE,\nvec2 v_rgbSW, vec2 v_rgbSE,\nvec2 v_rgbM) {\nvec4 color;\nmediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\nvec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\nvec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\nvec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\nvec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\nvec4 texColor = texture2D(tex, v_rgbM);\nvec3 rgbM  = texColor.xyz;\nvec3 luma = vec3(0.299, 0.587, 0.114);\nfloat lumaNW = dot(rgbNW, luma);\nfloat lumaNE = dot(rgbNE, luma);\nfloat lumaSW = dot(rgbSW, luma);\nfloat lumaSE = dot(rgbSE, luma);\nfloat lumaM  = dot(rgbM,  luma);\nfloat lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\nfloat lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\nmediump vec2 dir;\ndir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\ndir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\nfloat dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n(0.25 * (1.0 / 8.0)), (1.0/ 128.0));\nfloat rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\ndir = min(vec2(8.0, 8.0),\nmax(vec2(-8.0, -8.0),\ndir * rcpDirMin)) * inverseVP;\nvec3 rgbA = 0.5 * (\ntexture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\ntexture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\nvec3 rgbB = rgbA * 0.5 + 0.25 * (\ntexture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\ntexture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\nfloat lumaB = dot(rgbB, luma);\nif ((lumaB < lumaMin) || (lumaB > lumaMax))\ncolor = vec4(rgbA, texColor.a);\nelse\ncolor = vec4(rgbB, texColor.a);\nreturn color;\n}\nvoid main () {\nmediump vec2 v_rgbNW;\nmediump vec2 v_rgbNE;\nmediump vec2 v_rgbSW;\nmediump vec2 v_rgbSE;\nmediump vec2 v_rgbM;\nvec2 resolution = cc_screenSize.xy;\nvec2 fragCoord = v_uv * resolution;\ntexcoords(fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\ngl_FragColor = fxaa(cc_lighting_resultMap, fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}"}],[{vert:"\nprecision highp float;\nuniform highp mat4 cc_matView;\nuniform highp mat4 cc_matProj;\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\nvarying mediump vec4 viewDir;\nvec4 vert () {\nviewDir = vec4(a_position, 1.0);\nmat4 matViewRotOnly = mat4(mat3(cc_matView));\nmat4 matProj = cc_matProj;\nif (matProj[3].w > 0.0) {\nvec2 scale = vec2(48.0, 24.0);\nmatProj[0].xy *= scale;\nmatProj[1].xy *= scale;\nmatProj[2].zw = vec2(-1.0);\nmatProj[3].zw = vec2(0.0);\n}\nvec4 pos = matProj * matViewRotOnly * viewDir;\npos.z = 0.99999 * pos.w;\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_ambientSky;\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nvarying mediump vec4 viewDir;\nvec4 frag () {\n#if USE_RGBE_CUBEMAP\nvec3 c = unpackRGBE(textureCube(cc_environment, viewDir.xyz));\n#else\nvec3 c = SRGBToLinear(textureCube(cc_environment, viewDir.xyz).rgb);\n#endif\nreturn CCFragOutput(vec4(c * cc_ambientSky.w, 1.0));\n}\nvoid main() { gl_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nuniform highp mat4 cc_matViewProj;\nattribute vec3 a_position;\nattribute vec4 a_color;\nvarying vec2 v_uv;\nuniform vec4 offset;\nuniform vec4 digits[20];\nfloat getComponent(vec4 v, float i) {\nif (i < 1.0) { return v.x; }\nelse if (i < 2.0) { return v.y; }\nelse if (i < 3.0) { return v.z; }\nelse { return v.w; }\n}\nvec4 vert () {\nvec4 position = cc_matViewProj * vec4(a_position, 1.0);\nposition.xy += offset.xy;\nv_uv = a_color.xy;\nif (a_color.z >= 0.0) {\nfloat n = getComponent(digits[int(a_color.z)], a_color.w);\nv_uv += vec2(offset.z * n, 0.0);\n}\nreturn position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nuniform mediump vec4 cc_exposure;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nvarying vec2 v_uv;\nuniform sampler2D mainTexture;\nvec4 frag () {\nreturn CCFragOutput(texture2D(mainTexture, v_uv));\n}\nvoid main() { gl_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 v_uv;\nvarying float v_percent;\nuniform vec4 u_buffer0;\nuniform vec4 u_buffer1;\nuniform mat4 u_projection;\nvec4 vert () {\nvec2 worldPos = a_position * u_buffer1.xy + u_buffer1.zw;\nvec2 clipSpace = worldPos / u_buffer0.xy * 2.0 - 1.0;\nvec4 screenPos = u_projection * vec4(clipSpace, 0.0, 1.0);\nv_uv = a_texCoord;\nv_percent = u_buffer0.z;\nreturn screenPos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nvarying vec2 v_uv;\nvarying float v_percent;\nuniform sampler2D mainTexture;\nvec4 frag () {\nvec4 color = texture2D(mainTexture, v_uv);\nfloat precent = clamp(v_percent, 0.0, 1.0);\ncolor.xyz *= precent;\nreturn color;\n}\nvoid main() { gl_FragColor = frag(); }"}]],glsl3:[[{vert:"\nprecision mediump float;\nlayout(std140) uniform Constants {\nvec4 mainTiling_Offset;\nvec4 frameTile_velLenScale;\nvec4 scale;\n};\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\nmat3 m = mat3(xAxis,yAxis,zAxis);\nfloat trace = m[0][0] + m[1][1] + m[2][2];\nvec4 quat;\nif (trace > 0.) {\nfloat s = 0.5 / sqrt(trace + 1.0);\nquat.w = 0.25 / s;\nquat.x = (m[2][1] - m[1][2]) * s;\nquat.y = (m[0][2] - m[2][0]) * s;\nquat.z = (m[1][0] - m[0][1]) * s;\n} else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\nfloat s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\nquat.w = (m[2][1] - m[1][2]) / s;\nquat.x = 0.25 * s;\nquat.y = (m[0][1] + m[1][0]) / s;\nquat.z = (m[0][2] + m[2][0]) / s;\n} else if (m[1][1] > m[2][2]) {\nfloat s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\nquat.w = (m[0][2] - m[2][0]) / s;\nquat.x = (m[0][1] + m[1][0]) / s;\nquat.y = 0.25 * s;\nquat.z = (m[1][2] + m[2][1]) / s;\n} else {\nfloat s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\nquat.w = (m[1][0] - m[0][1]) / s;\nquat.x = (m[0][2] + m[2][0]) / s;\nquat.y = (m[1][2] + m[2][1]) / s;\nquat.z = 0.25 * s;\n}\nfloat len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\nif (len > 0.) {\nlen = 1. / sqrt(len);\nquat.x = quat.x * len;\nquat.y = quat.y * len;\nquat.z = quat.z * len;\nquat.w = quat.w * len;\n}\nreturn quat;\n}\nvec4 quaternionFromEuler (vec3 angle){\nfloat x = angle.x / 2.;\nfloat y = angle.y / 2.;\nfloat z = angle.z / 2.;\nfloat sx = sin(x);\nfloat cx = cos(x);\nfloat sy = sin(y);\nfloat cy = cos(y);\nfloat sz = sin(z);\nfloat cz = cos(z);\nvec4 quat = vec4(0);\nquat.x = sx * cy * cz + cx * sy * sz;\nquat.y = cx * sy * cz + sx * cy * sz;\nquat.z = cx * cy * sz - sx * sy * cz;\nquat.w = cx * cy * cz - sx * sy * sz;\nreturn quat;\n}\nvec4 quatMultiply (vec4 a, vec4 b){\nvec4 quat;\nquat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\nquat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\nquat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\nquat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\nreturn quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\nfloat ix = q.w * v.x + q.y * v.z - q.z * v.y;\nfloat iy = q.w * v.y + q.z * v.x - q.x * v.z;\nfloat iz = q.w * v.z + q.x * v.y - q.y * v.x;\nfloat iw = -q.x * v.x - q.y * v.y - q.z * v.z;\nv.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\nv.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\nv.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\nvec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\nvec4 rotQuat = quatMultiply(viewQuat, q);\nrotateVecFromQuat(pos, rotQuat);\nreturn pos;\n}\nout mediump vec2 uv;\nout mediump vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n, mat4 viewInv\n) {\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\nvec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\nvec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n}\nin vec3 a_position;\nin vec2 a_texCoord;\nin vec4 a_color;\nlayout(std140) uniform builtin {\nvec4 cc_size_rotation;\n};\nvec4 vs_main() {\nvec4 pos = vec4(a_position, 1);\npos = cc_matWorld * pos;\nvec2 vertOffset = a_texCoord.xy - 0.5;\ncomputeVertPos(pos, vertOffset, quaternionFromEuler(vec3(0., 0., cc_size_rotation.z)), vec3(cc_size_rotation.xy, 0.), cc_matViewInv);\npos = cc_matViewProj * pos;\nuv = a_texCoord.xy;\ncolor = a_color;\nreturn pos;\n}\nvoid main() { gl_Position = vs_main(); }",frag:"\nprecision mediump float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nin vec2 uv;\nin vec4 color;\nuniform sampler2D mainTexture;\nlayout(std140) uniform FragConstants {\nvec4 tintColor;\n};\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\nreturn CCFragOutput(col);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"}],[{vert:"\nprecision highp float;\nin vec3 a_position;\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nvec4 frag () {\nvec4 o = vec4(1.0);\nreturn o;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nin vec3 a_position;\nin vec4 a_color;\nout vec4 v_color;\nin float a_dist;\nout float v_dist;\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\npos = cc_matViewProj * cc_matWorld * pos;\nv_color = a_color;\nv_dist = a_dist;\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nin vec4 v_color;\nin float v_dist;\nvec4 frag () {\nvec4 o = v_color;\nfloat aa = fwidth(v_dist);\nfloat alpha = 1. - smoothstep(-aa, 0., abs(v_dist) - 1.0);\no.rgb *= o.a;\no *= alpha;\nreturn o;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\nmat3 m = mat3(xAxis,yAxis,zAxis);\nfloat trace = m[0][0] + m[1][1] + m[2][2];\nvec4 quat;\nif (trace > 0.) {\nfloat s = 0.5 / sqrt(trace + 1.0);\nquat.w = 0.25 / s;\nquat.x = (m[2][1] - m[1][2]) * s;\nquat.y = (m[0][2] - m[2][0]) * s;\nquat.z = (m[1][0] - m[0][1]) * s;\n} else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\nfloat s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\nquat.w = (m[2][1] - m[1][2]) / s;\nquat.x = 0.25 * s;\nquat.y = (m[0][1] + m[1][0]) / s;\nquat.z = (m[0][2] + m[2][0]) / s;\n} else if (m[1][1] > m[2][2]) {\nfloat s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\nquat.w = (m[0][2] - m[2][0]) / s;\nquat.x = (m[0][1] + m[1][0]) / s;\nquat.y = 0.25 * s;\nquat.z = (m[1][2] + m[2][1]) / s;\n} else {\nfloat s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\nquat.w = (m[1][0] - m[0][1]) / s;\nquat.x = (m[0][2] + m[2][0]) / s;\nquat.y = (m[1][2] + m[2][1]) / s;\nquat.z = 0.25 * s;\n}\nfloat len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\nif (len > 0.) {\nlen = 1. / sqrt(len);\nquat.x = quat.x * len;\nquat.y = quat.y * len;\nquat.z = quat.z * len;\nquat.w = quat.w * len;\n}\nreturn quat;\n}\nmat4 matrixFromRT (vec4 q, vec3 p){\nfloat x2 = q.x + q.x;\nfloat y2 = q.y + q.y;\nfloat z2 = q.z + q.z;\nfloat xx = q.x * x2;\nfloat xy = q.x * y2;\nfloat xz = q.x * z2;\nfloat yy = q.y * y2;\nfloat yz = q.y * z2;\nfloat zz = q.z * z2;\nfloat wx = q.w * x2;\nfloat wy = q.w * y2;\nfloat wz = q.w * z2;\nreturn mat4(\n1. - (yy + zz), xy + wz, xz - wy, 0,\nxy - wz, 1. - (xx + zz), yz + wx, 0,\nxz + wy, yz - wx, 1. - (xx + yy), 0,\np.x, p.y, p.z, 1\n);\n}\nmat4 matFromRTS (vec4 q, vec3 t, vec3 s){\nfloat x = q.x, y = q.y, z = q.z, w = q.w;\nfloat x2 = x + x;\nfloat y2 = y + y;\nfloat z2 = z + z;\nfloat xx = x * x2;\nfloat xy = x * y2;\nfloat xz = x * z2;\nfloat yy = y * y2;\nfloat yz = y * z2;\nfloat zz = z * z2;\nfloat wx = w * x2;\nfloat wy = w * y2;\nfloat wz = w * z2;\nfloat sx = s.x;\nfloat sy = s.y;\nfloat sz = s.z;\nreturn mat4((1. - (yy + zz)) * sx, (xy + wz) * sx, (xz - wy) * sx, 0,\n(xy - wz) * sy, (1. - (xx + zz)) * sy, (yz + wx) * sy, 0,\n(xz + wy) * sz, (yz - wx) * sz, (1. - (xx + yy)) * sz, 0,\nt.x, t.y, t.z, 1);\n}\nvec4 quatMultiply (vec4 a, vec4 b){\nvec4 quat;\nquat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\nquat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\nquat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\nquat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\nreturn quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\nfloat ix = q.w * v.x + q.y * v.z - q.z * v.y;\nfloat iy = q.w * v.y + q.z * v.x - q.x * v.z;\nfloat iz = q.w * v.z + q.x * v.y - q.y * v.x;\nfloat iw = -q.x * v.x - q.y * v.y - q.z * v.z;\nv.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\nv.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\nv.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\nvec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\nvec4 rotQuat = quatMultiply(viewQuat, q);\nrotateVecFromQuat(pos, rotQuat);\nreturn pos;\n}\nlayout(std140) uniform Constants {\nvec4 mainTiling_Offset;\nvec4 frameTile_velLenScale;\nvec4 scale;\n};\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nout mediump vec2 uv;\nout mediump vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n, mat4 viewInv\n#endif\n#if CC_RENDER_MODE == 1\n, vec3 eye\n, vec4 velocity\n, float velocityScale\n, float lengthScale\n, float xIndex\n#endif\n) {\n#if CC_RENDER_MODE == 0\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\nvec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\nvec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n#elif CC_RENDER_MODE == 1\nvec3 camRight = normalize(cross(pos.xyz - eye, velocity.xyz)) * s.x;\nvec3 camUp = velocity.xyz * velocityScale + normalize(velocity.xyz) * lengthScale * s.y;\npos.xyz += (camRight * abs(vertOffset.x) * sign(vertOffset.y)) - camUp * xIndex;\n#elif CC_RENDER_MODE == 2\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = vec3(1, 0, 0);\nvec3 camY = vec3(0, 0, -1);\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, cross(camX, camY), q);\n#elif CC_RENDER_MODE == 3\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nrotateVecFromQuat(viewSpaceVert, q);\nvec3 camX = normalize(vec3(cc_matView[0][0], cc_matView[1][0], cc_matView[2][0]));\nvec3 camY = vec3(0, 1, 0);\nvec3 offset = camX * viewSpaceVert.x + camY * viewSpaceVert.y;\npos.xyz += offset;\n#else\npos.x += vertOffset.x;\npos.y += vertOffset.y;\n#endif\n}\nvec2 computeUV (float frameIndex, vec2 vertIndex, vec2 frameTile){\nvec2 aniUV = vec2(0, floor(frameIndex * frameTile.y));\naniUV.x = floor(frameIndex * frameTile.x * frameTile.y - aniUV.y * frameTile.x);\n#if CC_RENDER_MODE != 4\nvertIndex.y = 1. - vertIndex.y;\n#endif\nreturn (aniUV.xy + vertIndex) / vec2(frameTile.x, frameTile.y);\n}\nlayout(std140) uniform SampleConstants {\nvec4 u_sampleInfo;\n};\nlayout(std140) uniform TickConstants {\nvec4 u_worldRot;\nvec4 u_timeDelta;\n};\nin vec4 a_position_starttime;\nin vec4 a_size_uv;\nin vec4 a_rotation_uv;\nin vec4 a_color;\nin vec4 a_dir_life;\nin float a_rndSeed;\n#if CC_RENDER_MODE == 4\nin vec3 a_texCoord;\nin vec3 a_texCoord3;\nin vec3 a_normal;\nin vec4 a_color1;\n#endif\nvec3 unpackCurveData (sampler2D tex, vec2 coord) {\nvec4 a = texture(tex, coord);\nvec4 b = texture(tex, coord + u_sampleInfo.y);\nfloat c = fract(coord.x * u_sampleInfo.x);\nreturn mix(a.xyz, b.xyz, c);\n}\nvec3 unpackCurveData (sampler2D tex, vec2 coord, out float w) {\nvec4 a = texture(tex, coord);\nvec4 b = texture(tex, coord + u_sampleInfo.y);\nfloat c = fract(coord.x * u_sampleInfo.x);\nw = mix(a.w, b.w, c);\nreturn mix(a.xyz, b.xyz, c);\n}\nfloat pseudoRandom (float seed) {\nseed = mod(seed, 233280.);\nfloat q = (seed * 9301. + 49297.) / 233280.;\nreturn fract(q);\n}\n#if COLOR_OVER_TIME_MODULE_ENABLE\nuniform sampler2D color_over_time_tex0;\nlayout(std140) uniform ColorConstant {\nint u_color_mode;\n};\n#endif\n#if ROTATION_OVER_TIME_MODULE_ENABLE\nuniform sampler2D rotation_over_time_tex0;\nlayout(std140) uniform RotationConstant {\nint u_rotation_mode;\n};\n#endif\n#if SIZE_OVER_TIME_MODULE_ENABLE\nuniform sampler2D size_over_time_tex0;\nlayout(std140) uniform SizeConstant {\nint u_size_mode;\n};\n#endif\n#if FORCE_OVER_TIME_MODULE_ENABLE\nuniform sampler2D force_over_time_tex0;\nlayout(std140) uniform ForceConstant {\nint u_force_mode;\nint u_force_space;\n};\n#endif\n#if VELOCITY_OVER_TIME_MODULE_ENABLE\nuniform sampler2D velocity_over_time_tex0;\nlayout(std140) uniform VelocityConstant {\nint u_velocity_mode;\nint u_velocity_space;\n};\n#endif\n#if TEXTURE_ANIMATION_MODULE_ENABLE\nuniform sampler2D texture_animation_tex0;\nlayout(std140) uniform AnimationConstant {\nvec4 u_anim_info;\n};\n#endif\nfloat repeat (float t, float length) {\nreturn t - floor(t / length) * length;\n}\nvec4 rotateQuat (vec4 p, vec4 q) {\nvec3 iv = cross(q.xyz, p.xyz) + q.w * p.xyz;\nvec3 res = p.xyz + 2.0 * cross(q.xyz, iv);\nreturn vec4(res.xyz, p.w);\n}\nvec4 toQuat(vec3 rotation) {\nvec3 rotTmp = rotation;\nfloat mulFactor = 1.0;\nif (rotTmp.x > 10.0 * 0.5) {\nrotTmp.x -= 10.0;\nmulFactor = -1.0;\n}\nvec4 rot = vec4(rotTmp, 0.0);\nrot.w = mulFactor * sqrt(1.0 - rot.x * rot.x - rot.y * rot.y - rot.z * rot.z);\nreturn rot;\n}\nmat3 QuatToMat3(vec4 q) {\nvec3 m0 = vec3(\n1.0 - 2.0 * q.y * q.y - 2.0 * q.z * q.z,\n2.0 * q.x * q.y + 2.0 * q.w * q.z,\n2.0 * q.x * q.z - 2.0 * q.w * q.y);\nvec3 m1 = vec3(\n2.0 * q.x * q.y - 2.0 * q.w * q.z,\n1.0 - 2.0 * q.x * q.x - 2.0 * q.z * q.z,\n2.0 * q.y * q.z + 2.0 * q.w * q.x);\nvec3 m2 = vec3(\n2.0 * q.x * q.z + 2.0 * q.w * q.y,\n2.0 * q.y * q.z - 2.0 * q.w * q.x,\n1.0 - 2.0 * q.x * q.x - 2.0 * q.y * q.y);\nreturn mat3(m0, m1, m2);\n}\nvec4 Mat3ToQuat(mat3 mat) {\nfloat tr = mat[0][0] + mat[1][1] + mat[2][2];\nfloat qw, qx, qy, qz;\nif (tr > 0.0) {\nfloat S = sqrt(tr + 1.0) * 2.0;\nfloat invS = 1.0 / S;\nqw = 0.25 * S;\nqx = (mat[1][2] - mat[2][1]) * invS;\nqy = (mat[2][0] - mat[0][2]) * invS;\nqz = (mat[0][1] - mat[1][0]) * invS;\n} else if ((mat[0][0] > mat[1][1])&&(mat[0][0] > mat[2][2])) {\nfloat S = sqrt(1.0 + mat[0][0] - mat[1][1] - mat[2][2]) * 2.0;\nfloat invS = 1.0 / S;\nqw = (mat[1][2] - mat[2][1]) * invS;\nqx = 0.25 * S;\nqy = (mat[1][0] + mat[0][1]) * invS;\nqz = (mat[2][0] + mat[0][2]) * invS;\n} else if (mat[1][1] > mat[2][2]) {\nfloat S = sqrt(1.0 + mat[1][1] - mat[0][0] - mat[2][2]) * 2.0;\nfloat invS = 1.0 / S;\nqw = (mat[2][0] - mat[0][2]) * invS;\nqx = (mat[1][0] + mat[0][1]) * invS;\nqy = 0.25 * S;\nqz = (mat[2][1] + mat[1][2]) * invS;\n} else {\nfloat S = sqrt(1.0 + mat[2][2] - mat[0][0] - mat[1][1]) * 2.0;\nfloat invS = 1.0 / S;\nqw = (mat[0][1] - mat[1][0]) * invS;\nqx = (mat[2][0] + mat[0][2]) * invS;\nqy = (mat[2][1] + mat[1][2]) * invS;\nqz = 0.25 * S;\n}\nreturn vec4(qx, qy, qz, qw);\n}\nvec4 EulerToQuat(vec3 euler) {\nvec3 er = euler * 0.5;\nfloat x = er.x, y = er.y, z = er.z;\nfloat sx = sin(x);\nfloat cx = cos(x);\nfloat sy = sin(y);\nfloat cy = cos(y);\nfloat sz = sin(z);\nfloat cz = cos(z);\nvec4 quat;\nquat.x = sx * cy * cz + cx * sy * sz;\nquat.y = cx * sy * cz + sx * cy * sz;\nquat.z = cx * cy * sz - sx * sy * cz;\nquat.w = cx * cy * cz - sx * sy * sz;\nreturn quat;\n}\nvec4 gpvs_main () {\nfloat activeTime = u_timeDelta.x - a_position_starttime.w;\nfloat normalizedTime = clamp(activeTime / a_dir_life.w, 0.0, 1.0);\nvec2 timeCoord0 = vec2(normalizedTime, 0.);\nvec2 timeCoord1 = vec2(normalizedTime, 1.);\n#if CC_RENDER_MODE == 4\nvec2 vertIdx = vec2(a_texCoord.x, a_texCoord.y);\n#else\nvec2 vertIdx = vec2(a_size_uv.w, a_rotation_uv.w);\n#endif\nvec4 velocity = vec4(a_dir_life.xyz, 0.);\nvec4 pos = vec4(a_position_starttime.xyz, 1.);\nvec3 size = a_size_uv.xyz;\n#if SIZE_OVER_TIME_MODULE_ENABLE\nif (u_size_mode == 1) {\nsize *= unpackCurveData(size_over_time_tex0, timeCoord0);\n} else {\nvec3 size_0 = unpackCurveData(size_over_time_tex0, timeCoord0);\nvec3 size_1 = unpackCurveData(size_over_time_tex0, timeCoord1);\nfloat factor_s = pseudoRandom(a_rndSeed + 39825.);\nsize *= mix(size_0, size_1, factor_s);\n}\n#endif\nvec3 compScale = scale.xyz * size;\n#if FORCE_OVER_TIME_MODULE_ENABLE\nvec3 forceAnim = vec3(0.);\nif (u_force_mode == 1) {\nforceAnim = unpackCurveData(force_over_time_tex0, timeCoord0);\n} else {\nvec3 force_0 = unpackCurveData(force_over_time_tex0, timeCoord0);\nvec3 force_1 = unpackCurveData(force_over_time_tex0, timeCoord1);\nfloat factor_f =  pseudoRandom(a_rndSeed + 212165.);\nforceAnim = mix(force_0, force_1, factor_f);\n}\nvec4 forceTrack = vec4(forceAnim, 0.);\nif (u_force_space == 0) {\nforceTrack = rotateQuat(forceTrack, u_worldRot);\n}\nvelocity.xyz += forceTrack.xyz;\n#endif\n#if VELOCITY_OVER_TIME_MODULE_ENABLE\nfloat speedModifier0 = 1.;\nfloat speedModifier1 = 1.;\nvec3 velocityAnim = vec3(0.);\nif (u_velocity_mode == 1) {\nvelocityAnim = unpackCurveData(velocity_over_time_tex0, timeCoord0, speedModifier0);\n} else {\nvec3 vectory_0 = unpackCurveData(velocity_over_time_tex0, timeCoord0, speedModifier0);\nvec3 vectory_1 = unpackCurveData(velocity_over_time_tex0, timeCoord1, speedModifier1);\nfloat factor_v = pseudoRandom(a_rndSeed + 197866.);\nvelocityAnim = mix(vectory_0, vectory_1, factor_v);\nspeedModifier0 = mix(speedModifier0, speedModifier1, factor_v);\n}\nvec4 velocityTrack = vec4(velocityAnim, 0.);\nif (u_velocity_space == 0) {\nvelocityTrack = rotateQuat(velocityTrack, u_worldRot);\n}\nvelocity.xyz += velocityTrack.xyz;\nvelocity.xyz *= speedModifier0;\n#endif\npos.xyz += velocity.xyz * normalizedTime * a_dir_life.w;\n#if !CC_USE_WORLD_SPACE\npos = cc_matWorld * pos;\n#if CC_RENDER_MODE == 1\nvelocity = rotateQuat(velocity, u_worldRot);\n#endif\n#endif\nvec3 startRotation = a_rotation_uv.xyz;\nvec4 rot = toQuat(startRotation);\n#if ROTATION_OVER_TIME_MODULE_ENABLE\nif (u_rotation_mode == 1) {\nvec3 euler = unpackCurveData(rotation_over_time_tex0, timeCoord0) * normalizedTime * a_dir_life.w;\nvec4 quat = EulerToQuat(euler);\nmat3 mLocal = QuatToMat3(quat);\nmat3 mStart = QuatToMat3(rot);\nrot = Mat3ToQuat(mStart * mLocal);\n} else {\nvec3 rotation_0 = unpackCurveData(rotation_over_time_tex0, timeCoord0);\nvec3 rotation_1 = unpackCurveData(rotation_over_time_tex0, timeCoord1);\nfloat factor_r = pseudoRandom(a_rndSeed + 125292.);\nvec3 euler = mix(rotation_0, rotation_1, factor_r) * normalizedTime * a_dir_life.w;\n#if CC_RENDER_MODE == 3 || CC_RENDER_MODE == 2\neuler = vec3(0.0, 0.0, euler.z);\n#endif\nvec4 quat = EulerToQuat(euler);\nmat3 mLocal = QuatToMat3(quat);\nmat3 mStart = QuatToMat3(rot);\nrot = Mat3ToQuat(mStart * mLocal);\n}\n#endif\n#if COLOR_OVER_TIME_MODULE_ENABLE\nif (u_color_mode == 1) {\ncolor = a_color * texture(color_over_time_tex0, timeCoord0);\n} else {\nvec4 color_0 = texture(color_over_time_tex0, timeCoord0);\nvec4 color_1 = texture(color_over_time_tex0, timeCoord1);\nfloat factor_c = pseudoRandom(a_rndSeed + 91041.);\ncolor = a_color * mix(color_0, color_1, factor_c);\n}\n#else\ncolor = a_color;\n#endif\n#if CC_RENDER_MODE != 4\nvec2 cornerOffset = vec2((vertIdx - 0.5));\n#if CC_RENDER_MODE == 1\nrot = vec4(0.0, 0.0, 0.0, 1.0);\n#endif\ncomputeVertPos(pos, cornerOffset, rot, compScale\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n, cc_matViewInv\n#endif\n#if CC_RENDER_MODE == 1\n, cc_cameraPos.xyz\n, velocity\n, frameTile_velLenScale.z\n, frameTile_velLenScale.w\n, a_size_uv.w\n#endif\n);\n#else\nmat4 xformNoScale = matrixFromRT(rot, pos.xyz);\nmat4 xform = matFromRTS(rot, pos.xyz, compScale);\npos = xform * vec4(a_texCoord3, 1);\nvec4 normal = xformNoScale * vec4(a_normal, 0);\ncolor *= a_color1;\n#endif\npos = cc_matViewProj * pos;\nfloat frameIndex = 0.;\n#if TEXTURE_ANIMATION_MODULE_ENABLE\nfloat startFrame = 0.;\nvec3 frameInfo = vec3(0.);\nif (int(u_anim_info.x) == 1) {\nframeInfo = unpackCurveData(texture_animation_tex0, timeCoord0);\n} else {\nvec3 frameInfo0 = unpackCurveData(texture_animation_tex0, timeCoord0);\nvec3 frameInfo1 = unpackCurveData(texture_animation_tex0, timeCoord1);\nfloat factor_t = pseudoRandom(a_rndSeed + 90794.);\nframeInfo = mix(frameInfo0, frameInfo1, factor_t);\n}\nstartFrame = frameInfo.x / u_anim_info.y;\nframeIndex = repeat(u_anim_info.z * (frameInfo.y + startFrame), 1.);\n#endif\nuv = computeUV(frameIndex, vertIdx, frameTile_velLenScale.xy) * mainTiling_Offset.xy + mainTiling_Offset.zw;\nreturn pos;\n}\nvoid main() { gl_Position = gpvs_main(); }",frag:"\nprecision mediump float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nin vec2 uv;\nin vec4 color;\nuniform sampler2D mainTexture;\nlayout(std140) uniform FragConstants {\nvec4 tintColor;\n};\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\nreturn CCFragOutput(col);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"}],[{vert:"\nprecision mediump float;\nlayout(std140) uniform Constants {\nvec4 mainTiling_Offset;\nvec4 frameTile_velLenScale;\nvec4 scale;\n};\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nout mediump vec2 uv;\nout mediump vec4 color;\nin vec3 a_position;\nin vec4 a_texCoord;\nin vec3 a_texCoord1;\nin vec3 a_texCoord2;\nin vec4 a_color;\n#if CC_DRAW_WIRE_FRAME\nout vec3 vBarycentric;\n#endif\nvec4 vs_main() {\nhighp vec4 pos = vec4(a_position, 1);\nvec4 velocity = vec4(a_texCoord1.xyz, 0);\n#if !CC_USE_WORLD_SPACE\npos = cc_matWorld * pos;\nvelocity = cc_matWorld * velocity;\n#endif\nfloat vertOffset = (a_texCoord.x - 0.5) * a_texCoord.y;\nvec3 camUp = normalize(cross(pos.xyz - cc_cameraPos.xyz, velocity.xyz));\npos.xyz += camUp * vertOffset;\npos = cc_matViewProj * pos;\nuv = a_texCoord.zw * mainTiling_Offset.xy + mainTiling_Offset.zw;;\ncolor = a_color;\n#if CC_DRAW_WIRE_FRAME\nvBarycentric = a_texCoord2;\n#endif\nreturn pos;\n}\nvoid main() { gl_Position = vs_main(); }",frag:"\nprecision mediump float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nin vec2 uv;\nin vec4 color;\n#if CC_DRAW_WIRE_FRAME\nin vec3 vBarycentric;\n#endif\nuniform sampler2D mainTexture;\nlayout(std140) uniform FragConstants {\nvec4 tintColor;\n};\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\n#if CC_DRAW_WIRE_FRAME\nif (any(lessThan(vBarycentric, vec3(0.02)))) {\ncol = vec4(0., 1., 1., 1.);\n}\n#endif\nreturn CCFragOutput(col);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"}],[{vert:"\nprecision highp float;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\nmat3 m = mat3(xAxis,yAxis,zAxis);\nfloat trace = m[0][0] + m[1][1] + m[2][2];\nvec4 quat;\nif (trace > 0.) {\nfloat s = 0.5 / sqrt(trace + 1.0);\nquat.w = 0.25 / s;\nquat.x = (m[2][1] - m[1][2]) * s;\nquat.y = (m[0][2] - m[2][0]) * s;\nquat.z = (m[1][0] - m[0][1]) * s;\n} else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\nfloat s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\nquat.w = (m[2][1] - m[1][2]) / s;\nquat.x = 0.25 * s;\nquat.y = (m[0][1] + m[1][0]) / s;\nquat.z = (m[0][2] + m[2][0]) / s;\n} else if (m[1][1] > m[2][2]) {\nfloat s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\nquat.w = (m[0][2] - m[2][0]) / s;\nquat.x = (m[0][1] + m[1][0]) / s;\nquat.y = 0.25 * s;\nquat.z = (m[1][2] + m[2][1]) / s;\n} else {\nfloat s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\nquat.w = (m[1][0] - m[0][1]) / s;\nquat.x = (m[0][2] + m[2][0]) / s;\nquat.y = (m[1][2] + m[2][1]) / s;\nquat.z = 0.25 * s;\n}\nfloat len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\nif (len > 0.) {\nlen = 1. / sqrt(len);\nquat.x = quat.x * len;\nquat.y = quat.y * len;\nquat.z = quat.z * len;\nquat.w = quat.w * len;\n}\nreturn quat;\n}\nmat4 matrixFromRT (vec4 q, vec3 p){\nfloat x2 = q.x + q.x;\nfloat y2 = q.y + q.y;\nfloat z2 = q.z + q.z;\nfloat xx = q.x * x2;\nfloat xy = q.x * y2;\nfloat xz = q.x * z2;\nfloat yy = q.y * y2;\nfloat yz = q.y * z2;\nfloat zz = q.z * z2;\nfloat wx = q.w * x2;\nfloat wy = q.w * y2;\nfloat wz = q.w * z2;\nreturn mat4(\n1. - (yy + zz), xy + wz, xz - wy, 0,\nxy - wz, 1. - (xx + zz), yz + wx, 0,\nxz + wy, yz - wx, 1. - (xx + yy), 0,\np.x, p.y, p.z, 1\n);\n}\nmat4 matFromRTS (vec4 q, vec3 t, vec3 s){\nfloat x = q.x, y = q.y, z = q.z, w = q.w;\nfloat x2 = x + x;\nfloat y2 = y + y;\nfloat z2 = z + z;\nfloat xx = x * x2;\nfloat xy = x * y2;\nfloat xz = x * z2;\nfloat yy = y * y2;\nfloat yz = y * z2;\nfloat zz = z * z2;\nfloat wx = w * x2;\nfloat wy = w * y2;\nfloat wz = w * z2;\nfloat sx = s.x;\nfloat sy = s.y;\nfloat sz = s.z;\nreturn mat4((1. - (yy + zz)) * sx, (xy + wz) * sx, (xz - wy) * sx, 0,\n(xy - wz) * sy, (1. - (xx + zz)) * sy, (yz + wx) * sy, 0,\n(xz + wy) * sz, (yz - wx) * sz, (1. - (xx + yy)) * sz, 0,\nt.x, t.y, t.z, 1);\n}\nvec4 quatMultiply (vec4 a, vec4 b){\nvec4 quat;\nquat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\nquat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\nquat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\nquat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\nreturn quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\nfloat ix = q.w * v.x + q.y * v.z - q.z * v.y;\nfloat iy = q.w * v.y + q.z * v.x - q.x * v.z;\nfloat iz = q.w * v.z + q.x * v.y - q.y * v.x;\nfloat iw = -q.x * v.x - q.y * v.y - q.z * v.z;\nv.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\nv.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\nv.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\nvec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\nvec4 rotQuat = quatMultiply(viewQuat, q);\nrotateVecFromQuat(pos, rotQuat);\nreturn pos;\n}\nlayout(std140) uniform Constants {\nvec4 mainTiling_Offset;\nvec4 frameTile_velLenScale;\nvec4 scale;\n};\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nout mediump vec2 uv;\nout mediump vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n, mat4 viewInv\n#endif\n#if CC_RENDER_MODE == 1\n, vec3 eye\n, vec4 velocity\n, float velocityScale\n, float lengthScale\n, float xIndex\n#endif\n) {\n#if CC_RENDER_MODE == 0\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\nvec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\nvec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n#elif CC_RENDER_MODE == 1\nvec3 camRight = normalize(cross(pos.xyz - eye, velocity.xyz)) * s.x;\nvec3 camUp = velocity.xyz * velocityScale + normalize(velocity.xyz) * lengthScale * s.y;\npos.xyz += (camRight * abs(vertOffset.x) * sign(vertOffset.y)) - camUp * xIndex;\n#elif CC_RENDER_MODE == 2\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = vec3(1, 0, 0);\nvec3 camY = vec3(0, 0, -1);\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, cross(camX, camY), q);\n#elif CC_RENDER_MODE == 3\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nrotateVecFromQuat(viewSpaceVert, q);\nvec3 camX = normalize(vec3(cc_matView[0][0], cc_matView[1][0], cc_matView[2][0]));\nvec3 camY = vec3(0, 1, 0);\nvec3 offset = camX * viewSpaceVert.x + camY * viewSpaceVert.y;\npos.xyz += offset;\n#else\npos.x += vertOffset.x;\npos.y += vertOffset.y;\n#endif\n}\nvec2 computeUV (float frameIndex, vec2 vertIndex, vec2 frameTile){\nvec2 aniUV = vec2(0, floor(frameIndex * frameTile.y));\naniUV.x = floor(frameIndex * frameTile.x * frameTile.y - aniUV.y * frameTile.x);\n#if CC_RENDER_MODE != 4\nvertIndex.y = 1. - vertIndex.y;\n#endif\nreturn (aniUV.xy + vertIndex) / vec2(frameTile.x, frameTile.y);\n}\nin vec3 a_position;\nin vec3 a_texCoord;\nin vec3 a_texCoord1;\nin vec3 a_texCoord2;\nin vec4 a_color;\n#if CC_RENDER_MODE == 1\nin vec3 a_color1;\n#endif\n#if CC_RENDER_MODE == 4\nin vec3 a_texCoord3;\nin vec3 a_normal;\nin vec4 a_color1;\n#endif\nvec4 lpvs_main () {\nvec3 compScale = scale.xyz * a_texCoord1;\nvec4 pos = vec4(a_position, 1);\n#if CC_RENDER_MODE == 1\nvec4 velocity = vec4(a_color1.xyz, 0);\n#endif\n#if !CC_USE_WORLD_SPACE\npos = cc_matWorld * pos;\n#if CC_RENDER_MODE == 1\nvelocity = cc_matWorld * velocity;\n#endif\n#endif\nvec3 rotTmp = a_texCoord2;\nfloat mulFactor = 1.0;\nif (rotTmp.x > 10.0 * 0.5) {\nrotTmp.x -= 10.0;\nmulFactor = -1.0;\n}\nvec4 rot = vec4(rotTmp, 0.0);\nrot.w = mulFactor * sqrt(1.0 - rot.x * rot.x - rot.y * rot.y - rot.z * rot.z);\n#if CC_RENDER_MODE != 4\nvec2 cornerOffset = vec2((a_texCoord.xy - 0.5));\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\ncomputeVertPos(pos, cornerOffset, rot, compScale, cc_matViewInv);\n#elif CC_RENDER_MODE == 1\ncomputeVertPos(pos, cornerOffset, rot, compScale, cc_cameraPos.xyz, velocity, frameTile_velLenScale.z, frameTile_velLenScale.w, a_texCoord.x);\n#elif 2\ncomputeVertPos(pos, cornerOffset, rot, compScale);\n#endif\ncolor = a_color;\n#else\nmat4 xformNoScale = matrixFromRT(rot, pos.xyz);\nmat4 xform = matFromRTS(rot, pos.xyz, compScale);\npos = xform * vec4(a_texCoord3, 1);\nvec4 normal = xformNoScale * vec4(a_normal, 0);\ncolor = a_color * a_color1;\n#endif\nuv = computeUV(a_texCoord.z, a_texCoord.xy, frameTile_velLenScale.xy) * mainTiling_Offset.xy + mainTiling_Offset.zw;\npos = cc_matViewProj * pos;\nreturn pos;\n}\nvoid main() { gl_Position = lpvs_main(); }",frag:"\nprecision mediump float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nin vec2 uv;\nin vec4 color;\nuniform sampler2D mainTexture;\nlayout(std140) uniform FragConstants {\nvec4 tintColor;\n};\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\nreturn CCFragOutput(col);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"}],[{vert:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\n#if USE_LOCAL\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\nin vec3 a_position;\nin vec2 a_texCoord;\nin vec4 a_color;\nout vec4 v_light;\nout vec2 uv0;\n#if TWO_COLORED\nin vec4 a_color2;\nout vec4 v_dark;\n#endif\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\n#if USE_LOCAL\npos = cc_matWorld * pos;\n#endif\npos = cc_matViewProj * pos;\nuv0 = a_texCoord;\nv_light = a_color;\n#if TWO_COLORED\nv_dark = a_color2;\n#endif\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\n#if USE_ALPHA_TEST\nlayout(std140) uniform ALPHA_TEST_DATA {\nfloat alphaThreshold;\n};\n#endif\nvoid ALPHA_TEST (in vec4 color) {\n#if USE_ALPHA_TEST\nif (color.a < alphaThreshold) discard;\n#endif\n}\nvoid ALPHA_TEST (in float alpha) {\n#if USE_ALPHA_TEST\nif (alpha < alphaThreshold) discard;\n#endif\n}\nin vec4 v_light;\n#if TWO_COLORED\nin vec4 v_dark;\n#endif\nin vec2 uv0;\nuniform sampler2D cc_spriteTexture;\nvec4 frag () {\nvec4 o = vec4(1, 1, 1, 1);\n#if TWO_COLORED\nvec4 texColor = vec4(1, 1, 1, 1);\ntexColor *= texture(cc_spriteTexture, uv0);\no.a = texColor.a * v_light.a;\no.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n#else\no *= texture(cc_spriteTexture, uv0);\no *= v_light;\n#endif\nALPHA_TEST(o);\nreturn o;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\n#if USE_LOCAL\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\n#if SAMPLE_FROM_RT\n#endif\nin vec3 a_position;\nin vec2 a_texCoord;\nin vec4 a_color;\nout vec4 color;\nout vec2 uv0;\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\n#if USE_LOCAL\npos = cc_matWorld * pos;\n#endif\n#if USE_PIXEL_ALIGNMENT\npos = cc_matView * pos;\npos.xyz = floor(pos.xyz);\npos = cc_matProj * pos;\n#else\npos = cc_matViewProj * pos;\n#endif\nuv0 = a_texCoord;\n#if SAMPLE_FROM_RT\nuv0 = cc_cameraPos.w > 1.0 ? vec2(uv0.x, 1.0 - uv0.y) : uv0;\n#endif\ncolor = a_color;\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nvec4 CCSampleWithAlphaSeparated(sampler2D tex, vec2 uv) {\n#if CC_USE_EMBEDDED_ALPHA\nreturn vec4(texture(tex, uv).rgb, texture(tex, uv + vec2(0.0, 0.5)).r);\n#else\nreturn texture(tex, uv);\n#endif\n}\n#if USE_ALPHA_TEST\nlayout(std140) uniform ALPHA_TEST_DATA {\nfloat alphaThreshold;\n};\n#endif\nvoid ALPHA_TEST (in vec4 color) {\n#if USE_ALPHA_TEST\nif (color.a < alphaThreshold) discard;\n#endif\n}\nvoid ALPHA_TEST (in float alpha) {\n#if USE_ALPHA_TEST\nif (alpha < alphaThreshold) discard;\n#endif\n}\nin vec4 color;\n#if USE_TEXTURE\nin vec2 uv0;\nuniform sampler2D cc_spriteTexture;\n#endif\nvec4 frag () {\nvec4 o = vec4(1, 1, 1, 1);\n#if USE_TEXTURE\no *= CCSampleWithAlphaSeparated(cc_spriteTexture, uv0);\n#if IS_GRAY\nfloat gray  = 0.2126 * o.r + 0.7152 * o.g + 0.0722 * o.b;\no.r = o.g = o.b = gray;\n#endif\n#endif\no *= color;\nALPHA_TEST(o);\nreturn o;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\n#if CC_USE_MORPH\nin float a_vertexId;\nint getVertexId() {\nreturn int(a_vertexId);\n}\nlayout(std140) uniform CCMorph {\nvec4 cc_displacementWeights[15];\nvec4 cc_displacementTextureInfo;\n};\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\nivec2 texSize = textureSize(tex, 0);\nreturn texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture(tex, x)),\ndecode32(texture(tex, y)),\ndecode32(texture(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nuniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nuniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nuniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nin vec4 a_joints;\nin vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nin highp vec4 a_jointAnimInfo;\n#endif\nlayout(std140) uniform CCSkinningTexture {\nhighp vec4 cc_jointTextureInfo;\n};\nlayout(std140) uniform CCSkinningAnimation {\nhighp vec4 cc_jointAnimInfo;\n};\nuniform highp sampler2D cc_jointTexture;\n#else\nlayout(std140) uniform CCSkinning {\nhighp vec4 cc_joints[30 * 3];\n};\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\n#if USE_INSTANCING\nin vec4 a_matWorld0;\nin vec4 a_matWorld1;\nin vec4 a_matWorld2;\n#if USE_LIGHTMAP\nin vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nin float a_dyn_batch_id;\nlayout(std140) uniform CCLocalBatched {\nhighp mat4 cc_matWorlds[10];\n};\n#else\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\nlayout(std140) uniform Constants {\nvec4 tilingOffset;\nvec4 albedo;\nvec4 albedoScaleAndCutoff;\nvec4 pbrParams;\nvec4 miscParams;\nvec4 emissive;\nvec4 emissiveScaleParam;\n};\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nout float v_fog_factor;\nout highp vec4 v_shadowPos;\nlayout(std140) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if CC_RECEIVE_SHADOW\nuniform sampler2D cc_shadowMap;\nuniform sampler2D cc_spotLightingMap;\n#endif\n#if USE_VERTEX_COLOR\nin vec4 a_color;\nout vec4 v_color;\n#endif\nout vec3 v_position;\nout vec3 v_normal;\nout vec2 v_uv;\nout vec2 v_uv1;\n#if USE_NORMAL_MAP\nout vec3 v_tangent;\nout vec3 v_bitangent;\n#endif\n#if HAS_SECOND_UV || USE_LIGHTMAP\nin vec2 a_texCoord1;\n#endif\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nout vec3 v_luv;\nvoid CCLightingMapCaclUV()\n{\n#if !USE_INSTANCING\nv_luv.xy = cc_lightingMapUVParam.xy + a_texCoord1 * cc_lightingMapUVParam.zw;\nv_luv.z = cc_lightingMapUVParam.z;\n#else\nv_luv.xy = a_lightingMapUVParam.xy + a_texCoord1 * a_lightingMapUVParam.zw;\nv_luv.z = a_lightingMapUVParam.z;\n#endif\n}\n#endif\nvoid main () {\nStandardVertInput In;\nIn.position = vec4(a_position, 1.0);\nIn.normal = a_normal;\nIn.tangent = a_tangent;\n#if CC_USE_MORPH\napplyMorph(In);\n#endif\n#if CC_USE_SKINNING\nCCSkin(In);\n#endif\nmat4 matWorld, matWorldIT;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\nmatWorldIT = matWorld;\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\nmatWorldIT = matWorld;\n#else\nmatWorld = cc_matWorld;\nmatWorldIT = cc_matWorldIT;\n#endif\nvec4 pos = matWorld * In.position;\nv_position = pos.xyz;\nv_normal = normalize((matWorldIT * vec4(In.normal, 0.0)).xyz);\n#if USE_NORMAL_MAP\nv_tangent = normalize((matWorld * vec4(In.tangent.xyz, 0.0)).xyz);\nv_bitangent = cross(v_normal, v_tangent) * In.tangent.w;\n#endif\nv_uv = a_texCoord * tilingOffset.xy + tilingOffset.zw;\n#if SAMPLE_FROM_RT\nv_uv = cc_cameraPos.w > 1.0 ? vec2(v_uv.x, 1.0 - v_uv.y) : v_uv;\n#endif\n#if HAS_SECOND_UV\nv_uv1 = a_texCoord1 * tilingOffset.xy + tilingOffset.zw;\n#if SAMPLE_FROM_RT\nv_uv1 = cc_cameraPos.w > 1.0 ? vec2(v_uv1.x, 1.0 - v_uv1.y) : v_uv1;\n#endif\n#endif\n#if USE_VERTEX_COLOR\nv_color = a_color;\n#endif\n#if CC_USE_FOG == 0\nv_fog_factor = LinearFog(pos);\n#elif CC_USE_FOG == 1\nv_fog_factor = ExpFog(pos);\n#elif CC_USE_FOG == 2\nv_fog_factor = ExpSquaredFog(pos);\n#elif CC_USE_FOG == 3\nv_fog_factor = LayeredFog(pos);\n#else\nv_fog_factor = 1.0;\n#endif\nv_shadowPos = cc_matLightViewProj * pos;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nCCLightingMapCaclUV();\n#endif\ngl_Position = cc_matProj * (cc_matView * matWorld) * In.position;\n}",frag:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(std140) uniform Constants {\nvec4 tilingOffset;\nvec4 albedo;\nvec4 albedoScaleAndCutoff;\nvec4 pbrParams;\nvec4 miscParams;\nvec4 emissive;\nvec4 emissiveScaleParam;\n};\nin float v_fog_factor;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nlayout(std140) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if CC_RECEIVE_SHADOW\nuniform sampler2D cc_shadowMap;\nuniform sampler2D cc_spotLightingMap;\nfloat CCGetLinearDepth (vec3 worldPos) {\nvec4 viewStartPos = cc_matLightView * vec4(worldPos.xyz, 1.0);\nfloat dist = length(viewStartPos.xyz);\nreturn cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\n}\nfloat CCGetShadowFactorHard (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_shadowMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_shadowMap, clipPos.xy).x;\n}\nshadow = step(clipPos.z- cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetShadowFactorSoft (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetDepth = clipPos.z - cc_shadowWHPBInfo.w;\nvec2 oneTap = 1.0 / cc_shadowWHPBInfo.xy;\nvec2 clipPos_offset = clipPos.xy + oneTap;\nfloat block0, block1, block2, block3;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)).x);\n}\nfloat coefX   = mod(clipPos.x, oneTap.x) * cc_shadowWHPBInfo.x;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block2, block3, coefX);\nfloat coefY   = mod(clipPos.y, oneTap.y) * cc_shadowWHPBInfo.y;\nreturn mix(resultX, resultY, coefY);\n}\nfloat CCGetShadowFactorSoft2X (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat bias = cc_shadowWHPBInfo.w;\nfloat offsetDepth = clipPos.z - bias;\nvec2 mapSize = cc_shadowWHPBInfo.xy;\nvec2 oneTap = 1.0 / mapSize;\nfloat clipPos_offset_L = clipPos.x - oneTap.x;\nfloat clipPos_offset_R = clipPos.x + oneTap.x;\nfloat clipPos_offset_U = clipPos.y - oneTap.y;\nfloat clipPos_offset_D = clipPos.y + oneTap.y;\nfloat block0, block1, block2, block3, block4, block5, block6, block7, block8;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock4 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock5 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock6 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock7 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock8 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)).x);\nblock4 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock5 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)).x);\nblock6 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)).x);\nblock7 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)).x);\nblock8 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)).x);\n}\nfloat coefX = mod(clipPos.x, oneTap.x) * mapSize.x;\nfloat coefY = mod(clipPos.y, oneTap.y) * mapSize.y;\nfloat shadow = 0.0;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block3, block4, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block1, block2, coefX);\nresultY = mix(block4, block5, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block3, block4, coefX);\nresultY = mix(block6, block7, coefX);\nshadow += mix(resultX, resultY, coefY);\nresultX = mix(block4, block5, coefX);\nresultY = mix(block7, block8, coefX);\nshadow += mix(resultX, resultY, coefY);\nreturn shadow * 0.25;\n}\nfloat CCGetSpotLightShadowFactorHard (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_spotLightingMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_spotLightingMap, clipPos.xy).x;\n}\nshadow = step(depth - cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetSpotLightShadowFactorSoft (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n} else {\nfloat closestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\nreturn shadow / 5.0;\n}\nfloat CCGetSpotLightShadowFactorSoft2X (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n}\n}\n} else {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\n}\n}\nreturn shadow / 9.0;\n}\n#endif\n#if CC_USE_IBL\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec4 fragTextureLod (sampler2D tex, vec2 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\nvec4 fragTextureLod (samplerCube tex, vec3 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\n#endif\nfloat GGXMobile (float roughness, float NoH, vec3 H, vec3 N) {\nvec3 NxH = cross(N, H);\nfloat OneMinusNoHSqr = dot(NxH, NxH);\nfloat a = roughness * roughness;\nfloat n = NoH * a;\nfloat p = a / (OneMinusNoHSqr + n * n);\nreturn p * p;\n}\nfloat CalcSpecular (float roughness, float NoH, vec3 H, vec3 N) {\nreturn (roughness * 0.25 + 0.25) * GGXMobile(roughness, NoH, H, N);\n}\nvec3 BRDFApprox (vec3 specular, float roughness, float NoV) {\nconst vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);\nconst vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NoV)) * r.x + r.y;\nvec2 AB = vec2(-1.04, 1.04) * a004 + r.zw;\nAB.y *= clamp(50.0 * specular.g, 0.0, 1.0);\nreturn specular * AB.x + AB.y;\n}\nstruct StandardSurface {\nvec4 albedo;\nvec3 position;\nvec3 normal;\nvec3 emissive;\nvec3 lightmap;\nfloat lightmap_test;\nfloat roughness;\nfloat metallic;\nfloat occlusion;\n};\nvec4 CCStandardShadingBase (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.0);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 L = normalize(-cc_mainLitDir.xyz);\nvec3 H = normalize(L + V);\nfloat NH = max(dot(N, H), 0.0);\nfloat NL = max(dot(N, L), 0.0);\nvec3 finalColor = NL * cc_mainLitColor.rgb * cc_mainLitColor.w;\nvec3 diffuseContrib = diffuse;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nif (s.lightmap_test > 0.0001) {\nfinalColor = s.lightmap.rgb;\n}\n#else\ndiffuseContrib /= 3.14159265359;\n#endif\nvec3 specularContrib = specular * CalcSpecular(s.roughness, NH, H, N);\nvec3 dirlightContrib = (diffuseContrib + specularContrib);\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (NL > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nvec3 projWorldPos = shadowPos.xyz + (1.0 - NL) * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetShadowFactorSoft2X(pos);\nelse if (pcf > 0.9) shadow = CCGetShadowFactorSoft(pos);\nelse shadow = CCGetShadowFactorHard(pos);\nshadow = mix(shadow, 1.0, cc_shadowNFLSInfo.w);\n}\n}\n#endif\ndirlightContrib *= shadow;\nfinalColor *= dirlightContrib;\nfloat fAmb = 0.5 - N.y * 0.5;\nvec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\nfinalColor += (ambDiff.rgb * diffuse) * s.occlusion;\n#if CC_USE_IBL\nvec3 R = normalize(reflect(-V, N));\nvec4 envmap = fragTextureLod(cc_environment, R, s.roughness * cc_ambientGround.w);\n#if CC_USE_IBL == 2\nvec3 env = unpackRGBE(envmap);\n#else\nvec3 env = SRGBToLinear(envmap.rgb);\n#endif\nfinalColor += env * cc_ambientSky.w * specular * s.occlusion;\n#endif\n#if CC_USE_HDR\ns.emissive *= cc_exposure.w;\n#endif\nfinalColor += s.emissive;\nreturn vec4(finalColor, s.albedo.a);\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nin highp vec4 v_shadowPos;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nin vec3 v_luv;\nuniform sampler2D cc_lightingMap;\nvec3 UnpackLightingmap(vec4 color) {\nvec3 c;\nfloat e = 1.0 + color.a * (8.0 - 1.0);\nc.r = color.r * e;\nc.g = color.g * e;\nc.b = color.b * e;\nreturn c;\n}\n#endif\nin vec3 v_position;\nin vec2 v_uv;\nin vec2 v_uv1;\nin vec3 v_normal;\n#if USE_VERTEX_COLOR\nin vec4 v_color;\n#endif\n#if USE_ALBEDO_MAP\nuniform sampler2D albedoMap;\n#endif\n#if USE_NORMAL_MAP\nin vec3 v_tangent;\nin vec3 v_bitangent;\nuniform sampler2D normalMap;\n#endif\n#if USE_PBR_MAP\nuniform sampler2D pbrMap;\n#endif\n#if USE_METALLIC_ROUGHNESS_MAP\nuniform sampler2D metallicRoughnessMap;\n#endif\n#if USE_OCCLUSION_MAP\nuniform sampler2D occlusionMap;\n#endif\n#if USE_EMISSIVE_MAP\nuniform sampler2D emissiveMap;\n#endif\n#if USE_ALPHA_TEST\n#endif\nvoid surf (out StandardSurface s) {\nvec4 baseColor = albedo;\n#if USE_VERTEX_COLOR\nbaseColor.rgb *= SRGBToLinear(v_color.rgb);\nbaseColor.a *= v_color.a;\n#endif\n#if USE_ALBEDO_MAP\nvec4 texColor = texture(albedoMap, ALBEDO_UV);\ntexColor.rgb = SRGBToLinear(texColor.rgb);\nbaseColor *= texColor;\n#endif\ns.albedo = baseColor;\ns.albedo.rgb *= albedoScaleAndCutoff.xyz;\n#if USE_ALPHA_TEST\nif (s.albedo.ALPHA_TEST_CHANNEL < albedoScaleAndCutoff.w) discard;\n#endif\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nvec4 lightColor = texture(cc_lightingMap, v_luv.xy);\ns.lightmap = UnpackLightingmap(lightColor);\ns.lightmap_test = v_luv.z;\n#endif\ns.normal = v_normal;\n#if USE_NORMAL_MAP\nvec3 nmmp = texture(normalMap, NORMAL_UV).xyz - vec3(0.5);\ns.normal =\n(nmmp.x * miscParams.x) * normalize(v_tangent) +\n(nmmp.y * miscParams.x) * normalize(v_bitangent) +\nnmmp.z * normalize(s.normal);\n#endif\ns.position = v_position;\nvec4 pbr = pbrParams;\n#if USE_PBR_MAP\nvec4 res = texture(pbrMap, PBR_UV);\npbr.x *= res.r;\npbr.y *= res.g;\npbr.z *= res.b;\npbr.w *= res.w;\n#endif\n#if USE_METALLIC_ROUGHNESS_MAP\nvec4 metallicRoughness = texture(metallicRoughnessMap, PBR_UV);\npbr.z *= metallicRoughness.b;\npbr.y *= metallicRoughness.g;\n#endif\n#if USE_OCCLUSION_MAP\npbr.x *= texture(occlusionMap, PBR_UV).r;\n#endif\ns.occlusion = clamp(pbr.x, 0.0, 0.96);\ns.roughness = clamp(pbr.y, 0.04, 1.0);\ns.metallic = pbr.z;\ns.emissive = emissive.rgb * emissiveScaleParam.xyz;\n#if USE_EMISSIVE_MAP\ns.emissive *= SRGBToLinear(texture(emissiveMap, EMISSIVE_UV).rgb);\n#endif\n}\n#if CC_FORWARD_ADD\n#if CC_PIPELINE_TYPE == 0\n# define LIGHTS_PER_PASS 1\n#else\n# define LIGHTS_PER_PASS 10\n#endif\nlayout(std140) uniform CCForwardLight {\nhighp vec4 cc_lightPos[LIGHTS_PER_PASS];\nvec4 cc_lightColor[LIGHTS_PER_PASS];\nvec4 cc_lightSizeRangeAngle[LIGHTS_PER_PASS];\nvec4 cc_lightDir[LIGHTS_PER_PASS];\n};\nfloat SmoothDistAtt (float distSqr, float invSqrAttRadius) {\nfloat factor = distSqr * invSqrAttRadius;\nfloat smoothFactor = clamp(1.0 - factor * factor, 0.0, 1.0);\nreturn smoothFactor * smoothFactor;\n}\nfloat GetDistAtt (float distSqr, float invSqrAttRadius) {\nfloat attenuation = 1.0 / max(distSqr, 0.01*0.01);\nattenuation *= SmoothDistAtt(distSqr , invSqrAttRadius);\nreturn attenuation;\n}\nfloat GetAngleAtt (vec3 L, vec3 litDir, float litAngleScale, float litAngleOffset) {\nfloat cd = dot(litDir, L);\nfloat attenuation = clamp(cd * litAngleScale + litAngleOffset, 0.0, 1.0);\nreturn (attenuation * attenuation);\n}\nvec4 CCStandardShadingAdditive (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 diffuseContrib = diffuse / 3.14159265359;\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.001);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 finalColor = vec3(0.0);\nint numLights = CC_PIPELINE_TYPE == 0 ? LIGHTS_PER_PASS : int(cc_lightDir[0].w);\nfor (int i = 0; i < LIGHTS_PER_PASS; i++) {\nif (i >= numLights) break;\nvec3 SLU = cc_lightPos[i].xyz - s.position;\nvec3 SL = normalize(SLU);\nvec3 SH = normalize(SL + V);\nfloat SNL = max(dot(N, SL), 0.001);\nfloat SNH = max(dot(N, SH), 0.0);\nfloat distSqr = dot(SLU, SLU);\nfloat litRadius = cc_lightSizeRangeAngle[i].x;\nfloat litRadiusSqr = litRadius * litRadius;\nfloat illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\nfloat attRadiusSqrInv = 1.0 / max(cc_lightSizeRangeAngle[i].y, 0.01);\nattRadiusSqrInv *= attRadiusSqrInv;\nfloat att = GetDistAtt(distSqr, attRadiusSqrInv);\nvec3 lspec = specular * CalcSpecular(s.roughness, SNH, SH, N);\nif (cc_lightPos[i].w > 0.0) {\nfloat cosInner = max(dot(-cc_lightDir[i].xyz, SL), 0.01);\nfloat cosOuter = cc_lightSizeRangeAngle[i].z;\nfloat litAngleScale = 1.0 / max(0.001, cosInner - cosOuter);\nfloat litAngleOffset = -cosOuter * litAngleScale;\natt *= GetAngleAtt(SL, -cc_lightDir[i].xyz, litAngleScale, litAngleOffset);\n}\nvec3 lightColor = cc_lightColor[i].rgb;\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (cc_lightPos[i].w > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nfloat cosAngle = clamp(1.0 - dot(N, normalize(cc_lightPos[i].xyz - s.position.xyz)), 0.0, 1.0);\nvec3 projWorldPos = shadowPos.xyz + cosAngle * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetSpotLightShadowFactorSoft2X(pos, s.position);\nelse if (pcf > 0.9) shadow = CCGetSpotLightShadowFactorSoft(pos, s.position);\nelse shadow = CCGetSpotLightShadowFactorHard(pos, s.position);\n}\n}\n#endif\nlightColor *= shadow;\nfinalColor += SNL * lightColor * cc_lightColor[i].w * illum * att * (diffuseContrib + lspec);\n}\nreturn vec4(finalColor, 0.0);\n}\nlayout(location = 0) out vec4 fragColorX;\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingAdditive(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\nfragColorX = CCFragOutput(color);\n}\n#elif (CC_PIPELINE_TYPE == 0 || CC_STANDARD_TRANSPARENT)\nlayout(location = 0) out vec4 fragColorX;\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingBase(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\nfragColorX = CCFragOutput(color);\n}\n#elif CC_PIPELINE_TYPE == 1\nlayout(location = 0) out vec4 fragColor0;\nlayout(location = 1) out vec4 fragColor1;\nlayout(location = 2) out vec4 fragColor2;\nlayout(location = 3) out vec4 fragColor3;\nvoid main () {\nStandardSurface s; surf(s);\nfragColor0 = s.albedo;\nfragColor1 = vec4(s.position, s.roughness);\nfragColor2 = vec4(s.normal, s.metallic);\nfragColor3 = vec4(s.emissive, s.occlusion);\n}\n#endif"},{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\n#if CC_USE_MORPH\nin float a_vertexId;\nint getVertexId() {\nreturn int(a_vertexId);\n}\nlayout(std140) uniform CCMorph {\nvec4 cc_displacementWeights[15];\nvec4 cc_displacementTextureInfo;\n};\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\nivec2 texSize = textureSize(tex, 0);\nreturn texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture(tex, x)),\ndecode32(texture(tex, y)),\ndecode32(texture(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nuniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nuniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nuniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nin vec4 a_joints;\nin vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nin highp vec4 a_jointAnimInfo;\n#endif\nlayout(std140) uniform CCSkinningTexture {\nhighp vec4 cc_jointTextureInfo;\n};\nlayout(std140) uniform CCSkinningAnimation {\nhighp vec4 cc_jointAnimInfo;\n};\nuniform highp sampler2D cc_jointTexture;\n#else\nlayout(std140) uniform CCSkinning {\nhighp vec4 cc_joints[30 * 3];\n};\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\n#if USE_INSTANCING\nin vec4 a_matWorld0;\nin vec4 a_matWorld1;\nin vec4 a_matWorld2;\n#if USE_LIGHTMAP\nin vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nin float a_dyn_batch_id;\nlayout(std140) uniform CCLocalBatched {\nhighp mat4 cc_matWorlds[10];\n};\n#else\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\nlayout(std140) uniform Constants {\nvec4 tilingOffset;\nvec4 albedo;\nvec4 albedoScaleAndCutoff;\nvec4 pbrParams;\nvec4 miscParams;\nvec4 emissive;\nvec4 emissiveScaleParam;\n};\nlayout(std140) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if HAS_SECOND_UV || USE_LIGHTMAP\nin vec2 a_texCoord1;\n#endif\nout vec2 v_uv;\nout vec2 v_uv1;\nout vec4 v_worldPos;\nout float v_clip_depth;\nvec4 vert () {\nStandardVertInput In;\nIn.position = vec4(a_position, 1.0);\nIn.normal = a_normal;\nIn.tangent = a_tangent;\n#if CC_USE_MORPH\napplyMorph(In);\n#endif\n#if CC_USE_SKINNING\nCCSkin(In);\n#endif\nmat4 matWorld, matWorldIT;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\nmatWorldIT = matWorld;\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\nmatWorldIT = matWorld;\n#else\nmatWorld = cc_matWorld;\nmatWorldIT = cc_matWorldIT;\n#endif\nv_worldPos = matWorld * In.position;\nvec4 clipPos = cc_matLightViewProj * v_worldPos;\nv_uv = a_texCoord * tilingOffset.xy + tilingOffset.zw;\n#if HAS_SECOND_UV\nv_uv1 = a_texCoord1 * tilingOffset.xy + tilingOffset.zw;\n#endif\nv_clip_depth = clipPos.z / clipPos.w * 0.5 + 0.5;\nreturn clipPos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nlayout(std140) uniform Constants {\nvec4 tilingOffset;\nvec4 albedo;\nvec4 albedoScaleAndCutoff;\nvec4 pbrParams;\nvec4 miscParams;\nvec4 emissive;\nvec4 emissiveScaleParam;\n};\nvec4 packDepthToRGBA (float depth) {\nvec4 ret = vec4(1.0, 255.0, 65025.0, 160581375.0) * depth;\nret = fract(ret);\nret -= ret.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\nreturn ret;\n}\nlayout(std140) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\nin vec2 v_uv;\nin vec2 v_uv1;\nin vec4 v_worldPos;\nin float v_clip_depth;\n#if USE_ALBEDO_MAP\nuniform sampler2D albedoMap;\n#endif\n#if USE_ALPHA_TEST\n#endif\nvec4 frag () {\nvec4 baseColor = albedo;\n#if USE_ALBEDO_MAP\nbaseColor *= texture(albedoMap, ALBEDO_UV);\n#endif\n#if USE_ALPHA_TEST\nif (baseColor.ALPHA_TEST_CHANNEL < albedoScaleAndCutoff.w) discard;\n#endif\nif(cc_shadowLPNNInfo.x > 0.000001 && cc_shadowLPNNInfo.x < 1.999999) {\nif (cc_shadowNFLSInfo.z > 0.000001) {\nvec4 viewStartPos = cc_matLightView * v_worldPos;\nfloat dist = length(viewStartPos.xyz);\nfloat linearDepth = cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\nreturn vec4(linearDepth, 1.0, 1.0, 1.0);\n}\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nreturn packDepthToRGBA(v_clip_depth);\n}\nreturn vec4(v_clip_depth, 1.0, 1.0, 1.0);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nout float v_fog_factor;\nout highp vec4 v_shadowPos;\nlayout(std140) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if CC_RECEIVE_SHADOW\nuniform sampler2D cc_shadowMap;\nuniform sampler2D cc_spotLightingMap;\n#endif\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nout highp vec3 v_position;\nout mediump vec3 v_normal;\n#if USE_NORMALMAP\nout mediump vec3 v_tangent;\nout mediump vec3 v_binormal;\n#endif\nout mediump vec2 uvw;\nout mediump vec2 uv0;\nout mediump vec2 uv1;\nout mediump vec2 uv2;\nout mediump vec2 uv3;\nout mediump vec3 luv;\nout mediump vec3 diffuse;\nlayout(std140) uniform TexCoords {\nvec4 UVScale;\nvec4 lightMapUVParam;\n};\nvoid main () {\nvec3 worldPos;\nworldPos.x = cc_matWorld[3][0] + a_position.x;\nworldPos.y = cc_matWorld[3][1] + a_position.y;\nworldPos.z = cc_matWorld[3][2] + a_position.z;\nvec4 pos = vec4(worldPos, 1.0);\npos = cc_matViewProj * pos;\nuvw = a_texCoord;\nuv0 = a_position.xz * UVScale.x;\nuv1 = a_position.xz * UVScale.y;\nuv2 = a_position.xz * UVScale.z;\nuv3 = a_position.xz * UVScale.w;\n#if USE_LIGHTMAP\nluv.xy = lightMapUVParam.xy + a_texCoord * lightMapUVParam.zw;\nluv.z = lightMapUVParam.z;\n#endif\nv_position = worldPos;\nv_normal = a_normal;\n#if CC_USE_FOG == 0\nv_fog_factor = LinearFog(vec4(worldPos, 1.0));\n#elif CC_USE_FOG == 1\nv_fog_factor = ExpFog(vec4(worldPos, 1.0));\n#elif CC_USE_FOG == 2\nv_fog_factor = ExpSquaredFog(vec4(worldPos, 1.0));\n#elif CC_USE_FOG == 3\nv_fog_factor = LayeredFog(vec4(worldPos, 1.0));\n#else\nv_fog_factor = 1.0;\n#endif\n#if USE_NORMALMAP\nv_tangent = vec3(1.0, 0.0, 0.0);\nv_binormal = vec3(0.0, 0.0, 1.0);\nv_binormal = cross(v_tangent, a_normal);\nv_tangent = cross(a_normal, v_binormal);\n#endif\nv_shadowPos = cc_matLightViewProj * vec4(worldPos, 1.0);\ngl_Position = pos;\n}",frag:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nlayout(std140) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if CC_RECEIVE_SHADOW\nuniform sampler2D cc_shadowMap;\nuniform sampler2D cc_spotLightingMap;\nfloat CCGetLinearDepth (vec3 worldPos) {\nvec4 viewStartPos = cc_matLightView * vec4(worldPos.xyz, 1.0);\nfloat dist = length(viewStartPos.xyz);\nreturn cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\n}\nfloat CCGetShadowFactorHard (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_shadowMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_shadowMap, clipPos.xy).x;\n}\nshadow = step(clipPos.z- cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetShadowFactorSoft (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetDepth = clipPos.z - cc_shadowWHPBInfo.w;\nvec2 oneTap = 1.0 / cc_shadowWHPBInfo.xy;\nvec2 clipPos_offset = clipPos.xy + oneTap;\nfloat block0, block1, block2, block3;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)).x);\n}\nfloat coefX   = mod(clipPos.x, oneTap.x) * cc_shadowWHPBInfo.x;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block2, block3, coefX);\nfloat coefY   = mod(clipPos.y, oneTap.y) * cc_shadowWHPBInfo.y;\nreturn mix(resultX, resultY, coefY);\n}\nfloat CCGetShadowFactorSoft2X (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat bias = cc_shadowWHPBInfo.w;\nfloat offsetDepth = clipPos.z - bias;\nvec2 mapSize = cc_shadowWHPBInfo.xy;\nvec2 oneTap = 1.0 / mapSize;\nfloat clipPos_offset_L = clipPos.x - oneTap.x;\nfloat clipPos_offset_R = clipPos.x + oneTap.x;\nfloat clipPos_offset_U = clipPos.y - oneTap.y;\nfloat clipPos_offset_D = clipPos.y + oneTap.y;\nfloat block0, block1, block2, block3, block4, block5, block6, block7, block8;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock4 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock5 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock6 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock7 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock8 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)).x);\nblock4 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock5 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)).x);\nblock6 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)).x);\nblock7 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)).x);\nblock8 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)).x);\n}\nfloat coefX = mod(clipPos.x, oneTap.x) * mapSize.x;\nfloat coefY = mod(clipPos.y, oneTap.y) * mapSize.y;\nfloat shadow = 0.0;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block3, block4, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block1, block2, coefX);\nresultY = mix(block4, block5, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block3, block4, coefX);\nresultY = mix(block6, block7, coefX);\nshadow += mix(resultX, resultY, coefY);\nresultX = mix(block4, block5, coefX);\nresultY = mix(block7, block8, coefX);\nshadow += mix(resultX, resultY, coefY);\nreturn shadow * 0.25;\n}\nfloat CCGetSpotLightShadowFactorHard (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_spotLightingMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_spotLightingMap, clipPos.xy).x;\n}\nshadow = step(depth - cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetSpotLightShadowFactorSoft (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n} else {\nfloat closestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\nreturn shadow / 5.0;\n}\nfloat CCGetSpotLightShadowFactorSoft2X (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n}\n}\n} else {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\n}\n}\nreturn shadow / 9.0;\n}\n#endif\n#if CC_USE_IBL\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec4 fragTextureLod (sampler2D tex, vec2 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\nvec4 fragTextureLod (samplerCube tex, vec3 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\n#endif\nfloat GGXMobile (float roughness, float NoH, vec3 H, vec3 N) {\nvec3 NxH = cross(N, H);\nfloat OneMinusNoHSqr = dot(NxH, NxH);\nfloat a = roughness * roughness;\nfloat n = NoH * a;\nfloat p = a / (OneMinusNoHSqr + n * n);\nreturn p * p;\n}\nfloat CalcSpecular (float roughness, float NoH, vec3 H, vec3 N) {\nreturn (roughness * 0.25 + 0.25) * GGXMobile(roughness, NoH, H, N);\n}\nvec3 BRDFApprox (vec3 specular, float roughness, float NoV) {\nconst vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);\nconst vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NoV)) * r.x + r.y;\nvec2 AB = vec2(-1.04, 1.04) * a004 + r.zw;\nAB.y *= clamp(50.0 * specular.g, 0.0, 1.0);\nreturn specular * AB.x + AB.y;\n}\nstruct StandardSurface {\nvec4 albedo;\nvec3 position;\nvec3 normal;\nvec3 emissive;\nvec3 lightmap;\nfloat lightmap_test;\nfloat roughness;\nfloat metallic;\nfloat occlusion;\n};\nvec4 CCStandardShadingBase (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.0);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 L = normalize(-cc_mainLitDir.xyz);\nvec3 H = normalize(L + V);\nfloat NH = max(dot(N, H), 0.0);\nfloat NL = max(dot(N, L), 0.0);\nvec3 finalColor = NL * cc_mainLitColor.rgb * cc_mainLitColor.w;\nvec3 diffuseContrib = diffuse;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nif (s.lightmap_test > 0.0001) {\nfinalColor = s.lightmap.rgb;\n}\n#else\ndiffuseContrib /= 3.14159265359;\n#endif\nvec3 specularContrib = specular * CalcSpecular(s.roughness, NH, H, N);\nvec3 dirlightContrib = (diffuseContrib + specularContrib);\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (NL > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nvec3 projWorldPos = shadowPos.xyz + (1.0 - NL) * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetShadowFactorSoft2X(pos);\nelse if (pcf > 0.9) shadow = CCGetShadowFactorSoft(pos);\nelse shadow = CCGetShadowFactorHard(pos);\nshadow = mix(shadow, 1.0, cc_shadowNFLSInfo.w);\n}\n}\n#endif\ndirlightContrib *= shadow;\nfinalColor *= dirlightContrib;\nfloat fAmb = 0.5 - N.y * 0.5;\nvec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\nfinalColor += (ambDiff.rgb * diffuse) * s.occlusion;\n#if CC_USE_IBL\nvec3 R = normalize(reflect(-V, N));\nvec4 envmap = fragTextureLod(cc_environment, R, s.roughness * cc_ambientGround.w);\n#if CC_USE_IBL == 2\nvec3 env = unpackRGBE(envmap);\n#else\nvec3 env = SRGBToLinear(envmap.rgb);\n#endif\nfinalColor += env * cc_ambientSky.w * specular * s.occlusion;\n#endif\n#if CC_USE_HDR\ns.emissive *= cc_exposure.w;\n#endif\nfinalColor += s.emissive;\nreturn vec4(finalColor, s.albedo.a);\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nin float v_fog_factor;\nin highp vec4 v_shadowPos;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nin vec3 v_luv;\nuniform sampler2D cc_lightingMap;\nvec3 UnpackLightingmap(vec4 color) {\nvec3 c;\nfloat e = 1.0 + color.a * (8.0 - 1.0);\nc.r = color.r * e;\nc.g = color.g * e;\nc.b = color.b * e;\nreturn c;\n}\n#endif\nin highp vec3 v_position;\nin mediump vec3 v_normal;\n#if USE_NORMALMAP\nin mediump vec3 v_tangent;\nin mediump vec3 v_binormal;\n#endif\nin mediump vec2 uvw;\nin mediump vec2 uv0;\nin mediump vec2 uv1;\nin mediump vec2 uv2;\nin mediump vec2 uv3;\nin mediump vec3 diffuse;\nin mediump vec3 luv;\nlayout(std140) uniform PbrParams {\nvec4 metallic;\nvec4 roughness;\n};\nuniform sampler2D weightMap;\nuniform sampler2D detailMap0;\nuniform sampler2D detailMap1;\nuniform sampler2D detailMap2;\nuniform sampler2D detailMap3;\nuniform sampler2D normalMap0;\nuniform sampler2D normalMap1;\nuniform sampler2D normalMap2;\nuniform sampler2D normalMap3;\nuniform sampler2D lightMap;\nvoid surf (out StandardSurface s) {\n#if LAYERS > 1\nvec4 w = texture(weightMap, uvw);\n#endif\nvec4 baseColor = vec4(0, 0, 0, 0);\n#if LAYERS == 1\nbaseColor = texture(detailMap0, uv0);\n#elif LAYERS == 2\nbaseColor += texture(detailMap0, uv0) * w.r;\nbaseColor += texture(detailMap1, uv1) * w.g;\n#elif LAYERS == 3\nbaseColor += texture(detailMap0, uv0) * w.r;\nbaseColor += texture(detailMap1, uv1) * w.g;\nbaseColor += texture(detailMap2, uv2) * w.b;\n#elif LAYERS == 4\nbaseColor += texture(detailMap0, uv0) * w.r;\nbaseColor += texture(detailMap1, uv1) * w.g;\nbaseColor += texture(detailMap2, uv2) * w.b;\nbaseColor += texture(detailMap3, uv3) * w.a;\n#else\nbaseColor = texture(detailMap0, uv0);\n#endif\ns.position = v_position;\n#if USE_NORMALMAP\nvec4 baseNormal = vec4(0, 0, 0, 0);\n#if LAYERS == 1\nbaseNormal = texture(normalMap0, uv0);\n#elif LAYERS == 2\nbaseNormal += texture(normalMap0, uv0) * w.r;\nbaseNormal += texture(normalMap1, uv1) * w.g;\n#elif LAYERS == 3\nbaseNormal += texture(normalMap0, uv0) * w.r;\nbaseNormal += texture(normalMap1, uv1) * w.g;\nbaseNormal += texture(normalMap2, uv2) * w.b;\n#elif LAYERS == 4\nbaseNormal += texture(normalMap0, uv0) * w.r;\nbaseNormal += texture(normalMap1, uv1) * w.g;\nbaseNormal += texture(normalMap2, uv2) * w.b;\nbaseNormal += texture(normalMap3, uv3) * w.a;\n#else\nbaseNormal = texture(normalMap0, uv0);\n#endif\nvec3 nmmp = baseNormal.xyz - vec3(0.5);\ns.normal =\nnmmp.x * normalize(v_tangent) +\nnmmp.y * normalize(v_binormal) +\nnmmp.z * normalize(v_normal);\n#else\ns.normal = v_normal;\n#endif\ns.albedo = vec4(SRGBToLinear(baseColor.rgb), 1.0);\ns.occlusion = 1.0;\n#if USE_PBR\ns.roughness = 0.0;\n#if LAYERS == 1\ns.roughness = roughness.x;\n#elif LAYERS == 2\ns.roughness += roughness.x * w.r;\ns.roughness += roughness.y * w.g;\n#elif LAYERS == 3\ns.roughness += roughness.x * w.r;\ns.roughness += roughness.y * w.g;\ns.roughness += roughness.z * w.b;\n#elif LAYERS == 4\ns.roughness += roughness.x * w.r;\ns.roughness += roughness.y * w.g;\ns.roughness += roughness.z * w.b;\ns.roughness += roughness.w * w.a;\n#else\ns.roughness = 1.0;\n#endif\ns.metallic = 0.0;\n#if LAYERS == 1\ns.metallic = metallic.x;\n#elif LAYERS == 2\ns.metallic += metallic.x * w.r;\ns.metallic += metallic.y * w.g;\n#elif LAYERS == 3\ns.metallic += metallic.x * w.r;\ns.metallic += metallic.y * w.g;\ns.metallic += metallic.z * w.b;\n#elif LAYERS == 4\ns.metallic += metallic.x * w.r;\ns.metallic += metallic.y * w.g;\ns.metallic += metallic.z * w.b;\ns.metallic += metallic.w * w.a;\n#else\ns.metallic = 0.0;\n#endif\n#else\ns.roughness = 1.0;\ns.metallic = 0.0;\n#endif\ns.emissive = vec3(0.0, 0.0, 0.0);\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nvec4 lightColor = texture(lightMap, luv.xy);\ns.lightmap = UnpackLightingmap(lightColor);\ns.lightmap_test = luv.z;\n#endif\n}\n#if CC_FORWARD_ADD\n#if CC_PIPELINE_TYPE == 0\n# define LIGHTS_PER_PASS 1\n#else\n# define LIGHTS_PER_PASS 10\n#endif\nlayout(std140) uniform CCForwardLight {\nhighp vec4 cc_lightPos[LIGHTS_PER_PASS];\nvec4 cc_lightColor[LIGHTS_PER_PASS];\nvec4 cc_lightSizeRangeAngle[LIGHTS_PER_PASS];\nvec4 cc_lightDir[LIGHTS_PER_PASS];\n};\nfloat SmoothDistAtt (float distSqr, float invSqrAttRadius) {\nfloat factor = distSqr * invSqrAttRadius;\nfloat smoothFactor = clamp(1.0 - factor * factor, 0.0, 1.0);\nreturn smoothFactor * smoothFactor;\n}\nfloat GetDistAtt (float distSqr, float invSqrAttRadius) {\nfloat attenuation = 1.0 / max(distSqr, 0.01*0.01);\nattenuation *= SmoothDistAtt(distSqr , invSqrAttRadius);\nreturn attenuation;\n}\nfloat GetAngleAtt (vec3 L, vec3 litDir, float litAngleScale, float litAngleOffset) {\nfloat cd = dot(litDir, L);\nfloat attenuation = clamp(cd * litAngleScale + litAngleOffset, 0.0, 1.0);\nreturn (attenuation * attenuation);\n}\nvec4 CCStandardShadingAdditive (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 diffuseContrib = diffuse / 3.14159265359;\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.001);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 finalColor = vec3(0.0);\nint numLights = CC_PIPELINE_TYPE == 0 ? LIGHTS_PER_PASS : int(cc_lightDir[0].w);\nfor (int i = 0; i < LIGHTS_PER_PASS; i++) {\nif (i >= numLights) break;\nvec3 SLU = cc_lightPos[i].xyz - s.position;\nvec3 SL = normalize(SLU);\nvec3 SH = normalize(SL + V);\nfloat SNL = max(dot(N, SL), 0.001);\nfloat SNH = max(dot(N, SH), 0.0);\nfloat distSqr = dot(SLU, SLU);\nfloat litRadius = cc_lightSizeRangeAngle[i].x;\nfloat litRadiusSqr = litRadius * litRadius;\nfloat illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\nfloat attRadiusSqrInv = 1.0 / max(cc_lightSizeRangeAngle[i].y, 0.01);\nattRadiusSqrInv *= attRadiusSqrInv;\nfloat att = GetDistAtt(distSqr, attRadiusSqrInv);\nvec3 lspec = specular * CalcSpecular(s.roughness, SNH, SH, N);\nif (cc_lightPos[i].w > 0.0) {\nfloat cosInner = max(dot(-cc_lightDir[i].xyz, SL), 0.01);\nfloat cosOuter = cc_lightSizeRangeAngle[i].z;\nfloat litAngleScale = 1.0 / max(0.001, cosInner - cosOuter);\nfloat litAngleOffset = -cosOuter * litAngleScale;\natt *= GetAngleAtt(SL, -cc_lightDir[i].xyz, litAngleScale, litAngleOffset);\n}\nvec3 lightColor = cc_lightColor[i].rgb;\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (cc_lightPos[i].w > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nfloat cosAngle = clamp(1.0 - dot(N, normalize(cc_lightPos[i].xyz - s.position.xyz)), 0.0, 1.0);\nvec3 projWorldPos = shadowPos.xyz + cosAngle * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetSpotLightShadowFactorSoft2X(pos, s.position);\nelse if (pcf > 0.9) shadow = CCGetSpotLightShadowFactorSoft(pos, s.position);\nelse shadow = CCGetSpotLightShadowFactorHard(pos, s.position);\n}\n}\n#endif\nlightColor *= shadow;\nfinalColor += SNL * lightColor * cc_lightColor[i].w * illum * att * (diffuseContrib + lspec);\n}\nreturn vec4(finalColor, 0.0);\n}\nlayout(location = 0) out vec4 fragColorX;\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingAdditive(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\nfragColorX = CCFragOutput(color);\n}\n#elif (CC_PIPELINE_TYPE == 0 || CC_STANDARD_TRANSPARENT)\nlayout(location = 0) out vec4 fragColorX;\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingBase(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\nfragColorX = CCFragOutput(color);\n}\n#elif CC_PIPELINE_TYPE == 1\nlayout(location = 0) out vec4 fragColor0;\nlayout(location = 1) out vec4 fragColor1;\nlayout(location = 2) out vec4 fragColor2;\nlayout(location = 3) out vec4 fragColor3;\nvoid main () {\nStandardSurface s; surf(s);\nfragColor0 = s.albedo;\nfragColor1 = vec4(s.position, s.roughness);\nfragColor2 = vec4(s.normal, s.metallic);\nfragColor3 = vec4(s.emissive, s.occlusion);\n}\n#endif"},{vert:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nlayout(std140) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nout vec2 v_clip_depth;\nvec4 vert () {\nvec4 worldPos;\nworldPos.x = cc_matWorld[3][0] + a_position.x;\nworldPos.y = cc_matWorld[3][1] + a_position.y;\nworldPos.z = cc_matWorld[3][2] + a_position.z;\nworldPos.w = 1.0;\nvec4 clipPos = cc_matLightViewProj * worldPos;\nv_clip_depth = clipPos.zw;\nreturn clipPos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nvec4 packDepthToRGBA (float depth) {\nvec4 ret = vec4(1.0, 255.0, 65025.0, 160581375.0) * depth;\nret = fract(ret);\nret -= ret.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\nreturn ret;\n}\nin vec2 v_clip_depth;\nvec4 frag () {\nreturn packDepthToRGBA(v_clip_depth.x / v_clip_depth.y * 0.5 + 0.5);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\n#if CC_USE_MORPH\nin float a_vertexId;\nint getVertexId() {\nreturn int(a_vertexId);\n}\nlayout(std140) uniform CCMorph {\nvec4 cc_displacementWeights[15];\nvec4 cc_displacementTextureInfo;\n};\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\nivec2 texSize = textureSize(tex, 0);\nreturn texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture(tex, x)),\ndecode32(texture(tex, y)),\ndecode32(texture(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nuniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nuniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nuniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nin vec4 a_joints;\nin vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nin highp vec4 a_jointAnimInfo;\n#endif\nlayout(std140) uniform CCSkinningTexture {\nhighp vec4 cc_jointTextureInfo;\n};\nlayout(std140) uniform CCSkinningAnimation {\nhighp vec4 cc_jointAnimInfo;\n};\nuniform highp sampler2D cc_jointTexture;\n#else\nlayout(std140) uniform CCSkinning {\nhighp vec4 cc_joints[30 * 3];\n};\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\n#if USE_INSTANCING\nin vec4 a_matWorld0;\nin vec4 a_matWorld1;\nin vec4 a_matWorld2;\n#if USE_LIGHTMAP\nin vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nin float a_dyn_batch_id;\nlayout(std140) uniform CCLocalBatched {\nhighp mat4 cc_matWorlds[10];\n};\n#else\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nout float v_fog_factor;\n#if USE_VERTEX_COLOR\nin lowp vec4 a_color;\nout lowp vec4 v_color;\n#endif\n#if USE_TEXTURE\nout vec2 v_uv;\nlayout(std140) uniform TexCoords {\nvec4 tilingOffset;\n};\n#endif\nvec4 vert () {\nvec4 position;\nposition = vec4(a_position, 1.0);\n#if CC_USE_MORPH\napplyMorph(position);\n#endif\n#if CC_USE_SKINNING\nCCSkin(position);\n#endif\nmat4 matWorld;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\n#else\nmatWorld = cc_matWorld;\n#endif\n#if USE_TEXTURE\nv_uv = a_texCoord * tilingOffset.xy + tilingOffset.zw;\n#if SAMPLE_FROM_RT\nv_uv = cc_cameraPos.w > 1.0 ? vec2(v_uv.x, 1.0 - v_uv.y) : v_uv;\n#endif\n#endif\n#if USE_VERTEX_COLOR\nv_color = a_color;\n#endif\n#if CC_USE_FOG == 0\nv_fog_factor = LinearFog(matWorld * position);\n#elif CC_USE_FOG == 1\nv_fog_factor = ExpFog(matWorld * position);\n#elif CC_USE_FOG == 2\nv_fog_factor = ExpSquaredFog(matWorld * position);\n#elif CC_USE_FOG == 3\nv_fog_factor = LayeredFog(matWorld * position);\n#else\nv_fog_factor = 1.0;\n#endif\nreturn cc_matProj * (cc_matView * matWorld) * position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nin float v_fog_factor;\n#if USE_ALPHA_TEST\n#endif\n#if USE_TEXTURE\nin vec2 v_uv;\nuniform sampler2D mainTexture;\n#endif\nlayout(std140) uniform Constant {\nvec4 mainColor;\nvec4 colorScaleAndCutoff;\n};\n#if USE_VERTEX_COLOR\nin lowp vec4 v_color;\n#endif\nvec4 frag () {\nvec4 o = mainColor;\no.rgb *= colorScaleAndCutoff.xyz;\n#if USE_VERTEX_COLOR\no *= v_color;\n#endif\n#if USE_TEXTURE\no *= texture(mainTexture, v_uv);\n#endif\n#if USE_ALPHA_TEST\nif (o.ALPHA_TEST_CHANNEL < colorScaleAndCutoff.w) discard;\n#endif\no = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, o.rgb, v_fog_factor), o.a);\nreturn CCFragOutput(o);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nout vec2 v_uv;\nvoid main () {\nvec4 position;\nposition = vec4(a_position, 1.0);\nposition.xy = cc_cameraPos.w == 0.0 ? vec2(position.xy.x, -position.xy.y) : position.xy;\ngl_Position = vec4(position.x, position.y, 1.0, 1.0);\nv_uv = a_texCoord;\n}",frag:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nlayout(std140) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if CC_RECEIVE_SHADOW\nuniform sampler2D cc_shadowMap;\nuniform sampler2D cc_spotLightingMap;\nfloat CCGetLinearDepth (vec3 worldPos) {\nvec4 viewStartPos = cc_matLightView * vec4(worldPos.xyz, 1.0);\nfloat dist = length(viewStartPos.xyz);\nreturn cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\n}\nfloat CCGetShadowFactorHard (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_shadowMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_shadowMap, clipPos.xy).x;\n}\nshadow = step(clipPos.z- cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetShadowFactorSoft (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetDepth = clipPos.z - cc_shadowWHPBInfo.w;\nvec2 oneTap = 1.0 / cc_shadowWHPBInfo.xy;\nvec2 clipPos_offset = clipPos.xy + oneTap;\nfloat block0, block1, block2, block3;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)).x);\n}\nfloat coefX   = mod(clipPos.x, oneTap.x) * cc_shadowWHPBInfo.x;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block2, block3, coefX);\nfloat coefY   = mod(clipPos.y, oneTap.y) * cc_shadowWHPBInfo.y;\nreturn mix(resultX, resultY, coefY);\n}\nfloat CCGetShadowFactorSoft2X (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat bias = cc_shadowWHPBInfo.w;\nfloat offsetDepth = clipPos.z - bias;\nvec2 mapSize = cc_shadowWHPBInfo.xy;\nvec2 oneTap = 1.0 / mapSize;\nfloat clipPos_offset_L = clipPos.x - oneTap.x;\nfloat clipPos_offset_R = clipPos.x + oneTap.x;\nfloat clipPos_offset_U = clipPos.y - oneTap.y;\nfloat clipPos_offset_D = clipPos.y + oneTap.y;\nfloat block0, block1, block2, block3, block4, block5, block6, block7, block8;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock4 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock5 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock6 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock7 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock8 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)).x);\nblock4 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock5 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)).x);\nblock6 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)).x);\nblock7 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)).x);\nblock8 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)).x);\n}\nfloat coefX = mod(clipPos.x, oneTap.x) * mapSize.x;\nfloat coefY = mod(clipPos.y, oneTap.y) * mapSize.y;\nfloat shadow = 0.0;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block3, block4, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block1, block2, coefX);\nresultY = mix(block4, block5, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block3, block4, coefX);\nresultY = mix(block6, block7, coefX);\nshadow += mix(resultX, resultY, coefY);\nresultX = mix(block4, block5, coefX);\nresultY = mix(block7, block8, coefX);\nshadow += mix(resultX, resultY, coefY);\nreturn shadow * 0.25;\n}\nfloat CCGetSpotLightShadowFactorHard (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_spotLightingMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_spotLightingMap, clipPos.xy).x;\n}\nshadow = step(depth - cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetSpotLightShadowFactorSoft (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n} else {\nfloat closestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\nreturn shadow / 5.0;\n}\nfloat CCGetSpotLightShadowFactorSoft2X (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n}\n}\n} else {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\n}\n}\nreturn shadow / 9.0;\n}\n#endif\n#if CC_USE_IBL\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec4 fragTextureLod (sampler2D tex, vec2 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\nvec4 fragTextureLod (samplerCube tex, vec3 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\n#endif\nfloat GGXMobile (float roughness, float NoH, vec3 H, vec3 N) {\nvec3 NxH = cross(N, H);\nfloat OneMinusNoHSqr = dot(NxH, NxH);\nfloat a = roughness * roughness;\nfloat n = NoH * a;\nfloat p = a / (OneMinusNoHSqr + n * n);\nreturn p * p;\n}\nfloat CalcSpecular (float roughness, float NoH, vec3 H, vec3 N) {\nreturn (roughness * 0.25 + 0.25) * GGXMobile(roughness, NoH, H, N);\n}\nvec3 BRDFApprox (vec3 specular, float roughness, float NoV) {\nconst vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);\nconst vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NoV)) * r.x + r.y;\nvec2 AB = vec2(-1.04, 1.04) * a004 + r.zw;\nAB.y *= clamp(50.0 * specular.g, 0.0, 1.0);\nreturn specular * AB.x + AB.y;\n}\nstruct StandardSurface {\nvec4 albedo;\nvec3 position;\nvec3 normal;\nvec3 emissive;\nvec3 lightmap;\nfloat lightmap_test;\nfloat roughness;\nfloat metallic;\nfloat occlusion;\n};\nvec4 CCStandardShadingBase (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.0);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 L = normalize(-cc_mainLitDir.xyz);\nvec3 H = normalize(L + V);\nfloat NH = max(dot(N, H), 0.0);\nfloat NL = max(dot(N, L), 0.0);\nvec3 finalColor = NL * cc_mainLitColor.rgb * cc_mainLitColor.w;\nvec3 diffuseContrib = diffuse;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nif (s.lightmap_test > 0.0001) {\nfinalColor = s.lightmap.rgb;\n}\n#else\ndiffuseContrib /= 3.14159265359;\n#endif\nvec3 specularContrib = specular * CalcSpecular(s.roughness, NH, H, N);\nvec3 dirlightContrib = (diffuseContrib + specularContrib);\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (NL > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nvec3 projWorldPos = shadowPos.xyz + (1.0 - NL) * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetShadowFactorSoft2X(pos);\nelse if (pcf > 0.9) shadow = CCGetShadowFactorSoft(pos);\nelse shadow = CCGetShadowFactorHard(pos);\nshadow = mix(shadow, 1.0, cc_shadowNFLSInfo.w);\n}\n}\n#endif\ndirlightContrib *= shadow;\nfinalColor *= dirlightContrib;\nfloat fAmb = 0.5 - N.y * 0.5;\nvec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\nfinalColor += (ambDiff.rgb * diffuse) * s.occlusion;\n#if CC_USE_IBL\nvec3 R = normalize(reflect(-V, N));\nvec4 envmap = fragTextureLod(cc_environment, R, s.roughness * cc_ambientGround.w);\n#if CC_USE_IBL == 2\nvec3 env = unpackRGBE(envmap);\n#else\nvec3 env = SRGBToLinear(envmap.rgb);\n#endif\nfinalColor += env * cc_ambientSky.w * specular * s.occlusion;\n#endif\n#if CC_USE_HDR\ns.emissive *= cc_exposure.w;\n#endif\nfinalColor += s.emissive;\nreturn vec4(finalColor, s.albedo.a);\n}\n#if CC_PIPELINE_TYPE == 0\n# define LIGHTS_PER_PASS 1\n#else\n# define LIGHTS_PER_PASS 10\n#endif\nlayout(std140) uniform CCForwardLight {\nhighp vec4 cc_lightPos[LIGHTS_PER_PASS];\nvec4 cc_lightColor[LIGHTS_PER_PASS];\nvec4 cc_lightSizeRangeAngle[LIGHTS_PER_PASS];\nvec4 cc_lightDir[LIGHTS_PER_PASS];\n};\nfloat SmoothDistAtt (float distSqr, float invSqrAttRadius) {\nfloat factor = distSqr * invSqrAttRadius;\nfloat smoothFactor = clamp(1.0 - factor * factor, 0.0, 1.0);\nreturn smoothFactor * smoothFactor;\n}\nfloat GetDistAtt (float distSqr, float invSqrAttRadius) {\nfloat attenuation = 1.0 / max(distSqr, 0.01*0.01);\nattenuation *= SmoothDistAtt(distSqr , invSqrAttRadius);\nreturn attenuation;\n}\nfloat GetAngleAtt (vec3 L, vec3 litDir, float litAngleScale, float litAngleOffset) {\nfloat cd = dot(litDir, L);\nfloat attenuation = clamp(cd * litAngleScale + litAngleOffset, 0.0, 1.0);\nreturn (attenuation * attenuation);\n}\nvec4 CCStandardShadingAdditive (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 diffuseContrib = diffuse / 3.14159265359;\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.001);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 finalColor = vec3(0.0);\nint numLights = CC_PIPELINE_TYPE == 0 ? LIGHTS_PER_PASS : int(cc_lightDir[0].w);\nfor (int i = 0; i < LIGHTS_PER_PASS; i++) {\nif (i >= numLights) break;\nvec3 SLU = cc_lightPos[i].xyz - s.position;\nvec3 SL = normalize(SLU);\nvec3 SH = normalize(SL + V);\nfloat SNL = max(dot(N, SL), 0.001);\nfloat SNH = max(dot(N, SH), 0.0);\nfloat distSqr = dot(SLU, SLU);\nfloat litRadius = cc_lightSizeRangeAngle[i].x;\nfloat litRadiusSqr = litRadius * litRadius;\nfloat illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\nfloat attRadiusSqrInv = 1.0 / max(cc_lightSizeRangeAngle[i].y, 0.01);\nattRadiusSqrInv *= attRadiusSqrInv;\nfloat att = GetDistAtt(distSqr, attRadiusSqrInv);\nvec3 lspec = specular * CalcSpecular(s.roughness, SNH, SH, N);\nif (cc_lightPos[i].w > 0.0) {\nfloat cosInner = max(dot(-cc_lightDir[i].xyz, SL), 0.01);\nfloat cosOuter = cc_lightSizeRangeAngle[i].z;\nfloat litAngleScale = 1.0 / max(0.001, cosInner - cosOuter);\nfloat litAngleOffset = -cosOuter * litAngleScale;\natt *= GetAngleAtt(SL, -cc_lightDir[i].xyz, litAngleScale, litAngleOffset);\n}\nvec3 lightColor = cc_lightColor[i].rgb;\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (cc_lightPos[i].w > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nfloat cosAngle = clamp(1.0 - dot(N, normalize(cc_lightPos[i].xyz - s.position.xyz)), 0.0, 1.0);\nvec3 projWorldPos = shadowPos.xyz + cosAngle * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetSpotLightShadowFactorSoft2X(pos, s.position);\nelse if (pcf > 0.9) shadow = CCGetSpotLightShadowFactorSoft(pos, s.position);\nelse shadow = CCGetSpotLightShadowFactorHard(pos, s.position);\n}\n}\n#endif\nlightColor *= shadow;\nfinalColor += SNL * lightColor * cc_lightColor[i].w * illum * att * (diffuseContrib + lspec);\n}\nreturn vec4(finalColor, 0.0);\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nin vec2 v_uv;\nuniform sampler2D cc_gbuffer_albedoMap;\nuniform sampler2D cc_gbuffer_positionMap;\nuniform sampler2D cc_gbuffer_normalMap;\nuniform sampler2D cc_gbuffer_emissiveMap;\nlayout(location = 0) out vec4 fragColor;\nvoid main () {\nStandardSurface s;\nvec4 albedoMap = texture(cc_gbuffer_albedoMap,v_uv);\nvec4 positionMap = texture(cc_gbuffer_positionMap,v_uv);\nvec4 normalMap = texture(cc_gbuffer_normalMap,v_uv);\nvec4 emissiveMap = texture(cc_gbuffer_emissiveMap,v_uv);\ns.albedo = albedoMap;\ns.position = positionMap.xyz;\ns.roughness = positionMap.w;\ns.normal = normalMap.xyz;\ns.metallic = normalMap.w;\ns.emissive = emissiveMap.xyz;\ns.occlusion = emissiveMap.w;\nfloat fogFactor;\n#if CC_USE_FOG == 0\nfogFactor = LinearFog(vec4(s.position, 1));\n#elif CC_USE_FOG == 1\nfogFactor = ExpFog(vec4(s.position, 1));\n#elif CC_USE_FOG == 2\nfogFactor = ExpSquaredFog(vec4(s.position, 1));\n#elif CC_USE_FOG == 3\nfogFactor = LayeredFog(vec4(s.position, 1));\n#else\nfogFactor = 1.0;\n#endif\nvec4 shadowPos;\nshadowPos = cc_matLightViewProj * vec4(s.position, 1);\nvec4 color = CCStandardShadingBase(s, shadowPos) +\nCCStandardShadingAdditive(s, shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, fogFactor), color.a);\nfragColor = CCFragOutput(color);\n}"}],[{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\n#if CC_USE_MORPH\nin float a_vertexId;\nint getVertexId() {\nreturn int(a_vertexId);\n}\nlayout(std140) uniform CCMorph {\nvec4 cc_displacementWeights[15];\nvec4 cc_displacementTextureInfo;\n};\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\nivec2 texSize = textureSize(tex, 0);\nreturn texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture(tex, x)),\ndecode32(texture(tex, y)),\ndecode32(texture(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nuniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nuniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nuniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nin vec4 a_joints;\nin vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nin highp vec4 a_jointAnimInfo;\n#endif\nlayout(std140) uniform CCSkinningTexture {\nhighp vec4 cc_jointTextureInfo;\n};\nlayout(std140) uniform CCSkinningAnimation {\nhighp vec4 cc_jointAnimInfo;\n};\nuniform highp sampler2D cc_jointTexture;\n#else\nlayout(std140) uniform CCSkinning {\nhighp vec4 cc_joints[30 * 3];\n};\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\n#if USE_INSTANCING\nin vec4 a_matWorld0;\nin vec4 a_matWorld1;\nin vec4 a_matWorld2;\n#if USE_LIGHTMAP\nin vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nin float a_dyn_batch_id;\nlayout(std140) uniform CCLocalBatched {\nhighp mat4 cc_matWorlds[10];\n};\n#else\nlayout(std140) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\nlayout(std140) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\nvec4 vert () {\nvec4 position;\nposition = vec4(a_position, 1.0);\n#if CC_USE_MORPH\napplyMorph(position);\n#endif\n#if CC_USE_SKINNING\nCCSkin(position);\n#endif\nmat4 matWorld;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\n#else\nmatWorld = cc_matWorld;\n#endif\nposition = cc_matProj * (cc_matView * cc_matLightPlaneProj * matWorld) * position;\nposition.z -= 0.0001;\nreturn position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nlayout(std140) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nvec4 frag () {\nreturn CCFragOutput(cc_shadowColor);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\n#if CC_USE_MORPH\nin float a_vertexId;\nint getVertexId() {\nreturn int(a_vertexId);\n}\nlayout(std140) uniform CCMorph {\nvec4 cc_displacementWeights[15];\nvec4 cc_displacementTextureInfo;\n};\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\nivec2 texSize = textureSize(tex, 0);\nreturn texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture(tex, x)),\ndecode32(texture(tex, y)),\ndecode32(texture(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nuniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nuniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nuniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nin vec4 a_joints;\nin vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nin highp vec4 a_jointAnimInfo;\n#endif\nlayout(std140) uniform CCSkinningTexture {\nhighp vec4 cc_jointTextureInfo;\n};\nlayout(std140) uniform CCSkinningAnimation {\nhighp vec4 cc_jointAnimInfo;\n};\nuniform highp sampler2D cc_jointTexture;\n#else\nlayout(std140) uniform CCSkinning {\nhighp vec4 cc_joints[30 * 3];\n};\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nout vec2 v_uv;\nvoid main () {\nStandardVertInput In;\nIn.position = vec4(a_position, 1.0);\nIn.normal = a_normal;\nIn.tangent = a_tangent;\n#if CC_USE_MORPH\napplyMorph(In);\n#endif\n#if CC_USE_SKINNING\nCCSkin(In);\n#endif\nIn.position.xy = cc_cameraPos.w == 0.0 ? vec2(In.position.xy.x, -In.position.xy.y) : In.position.xy;\ngl_Position = In.position;\ngl_Position.y = gl_Position.y;\nv_uv = a_texCoord;\n}",frag:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nin vec2 v_uv;\nuniform sampler2D cc_lighting_resultMap;\nlayout(location = 0) out vec4 fragColor;\nvoid texcoords(vec2 fragCoord, vec2 resolution,\nout vec2 v_rgbNW, out vec2 v_rgbNE,\nout vec2 v_rgbSW, out vec2 v_rgbSE,\nout vec2 v_rgbM) {\nvec2 inverseVP = 1.0 / resolution.xy;\nv_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\nv_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\nv_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\nv_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\nv_rgbM = vec2(fragCoord * inverseVP);\n}\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\nvec2 v_rgbNW, vec2 v_rgbNE,\nvec2 v_rgbSW, vec2 v_rgbSE,\nvec2 v_rgbM) {\nvec4 color;\nmediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\nvec3 rgbNW = texture(tex, v_rgbNW).xyz;\nvec3 rgbNE = texture(tex, v_rgbNE).xyz;\nvec3 rgbSW = texture(tex, v_rgbSW).xyz;\nvec3 rgbSE = texture(tex, v_rgbSE).xyz;\nvec4 texColor = texture(tex, v_rgbM);\nvec3 rgbM  = texColor.xyz;\nvec3 luma = vec3(0.299, 0.587, 0.114);\nfloat lumaNW = dot(rgbNW, luma);\nfloat lumaNE = dot(rgbNE, luma);\nfloat lumaSW = dot(rgbSW, luma);\nfloat lumaSE = dot(rgbSE, luma);\nfloat lumaM  = dot(rgbM,  luma);\nfloat lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\nfloat lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\nmediump vec2 dir;\ndir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\ndir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\nfloat dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n(0.25 * (1.0 / 8.0)), (1.0/ 128.0));\nfloat rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\ndir = min(vec2(8.0, 8.0),\nmax(vec2(-8.0, -8.0),\ndir * rcpDirMin)) * inverseVP;\nvec3 rgbA = 0.5 * (\ntexture(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\ntexture(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\nvec3 rgbB = rgbA * 0.5 + 0.25 * (\ntexture(tex, fragCoord * inverseVP + dir * -0.5).xyz +\ntexture(tex, fragCoord * inverseVP + dir * 0.5).xyz);\nfloat lumaB = dot(rgbB, luma);\nif ((lumaB < lumaMin) || (lumaB > lumaMax))\ncolor = vec4(rgbA, texColor.a);\nelse\ncolor = vec4(rgbB, texColor.a);\nreturn color;\n}\nvoid main () {\nmediump vec2 v_rgbNW;\nmediump vec2 v_rgbNE;\nmediump vec2 v_rgbSW;\nmediump vec2 v_rgbSE;\nmediump vec2 v_rgbM;\nvec2 resolution = cc_screenSize.xy;\nvec2 fragCoord = v_uv * resolution;\ntexcoords(fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\nfragColor = fxaa(cc_lighting_resultMap, fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}"}],[{vert:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\nout mediump vec4 viewDir;\nvec4 vert () {\nviewDir = vec4(a_position, 1.0);\nmat4 matViewRotOnly = mat4(mat3(cc_matView));\nmat4 matProj = cc_matProj;\nif (matProj[3].w > 0.0) {\nvec2 scale = vec2(48.0, 24.0);\nmatProj[0].xy *= scale;\nmatProj[1].xy *= scale;\nmatProj[2].zw = vec2(-1.0);\nmatProj[3].zw = vec2(0.0);\n}\nvec4 pos = matProj * matViewRotOnly * viewDir;\npos.z = 0.99999 * pos.w;\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nuniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nin mediump vec4 viewDir;\nvec4 frag () {\n#if USE_RGBE_CUBEMAP\nvec3 c = unpackRGBE(texture(cc_environment, viewDir.xyz));\n#else\nvec3 c = SRGBToLinear(texture(cc_environment, viewDir.xyz).rgb);\n#endif\nreturn CCFragOutput(vec4(c * cc_ambientSky.w, 1.0));\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nin vec3 a_position;\nin vec4 a_color;\nout vec2 v_uv;\nlayout(std140) uniform Constants {\nvec4 offset;\n};\nlayout(std140) uniform PerFrameInfo {\nvec4 digits[8 * 10 / 4];\n};\nfloat getComponent(vec4 v, float i) {\nif (i < 1.0) { return v.x; }\nelse if (i < 2.0) { return v.y; }\nelse if (i < 3.0) { return v.z; }\nelse { return v.w; }\n}\nvec4 vert () {\nvec4 position = cc_matViewProj * vec4(a_position, 1.0);\nposition.xy += offset.xy;\nv_uv = a_color.xy;\nif (a_color.z >= 0.0) {\nfloat n = getComponent(digits[int(a_color.z)], a_color.w);\nv_uv += vec2(offset.z * n, 0.0);\n}\nreturn position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nlayout(std140) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nin vec2 v_uv;\nuniform sampler2D mainTexture;\nvec4 frag () {\nreturn CCFragOutput(texture(mainTexture, v_uv));\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nin vec2 a_position;\nin vec2 a_texCoord;\nout vec2 v_uv;\nout float v_percent;\nlayout(std140) uniform Constant {\nvec4 u_buffer0;\nvec4 u_buffer1;\nmat4 u_projection;\n};\nvec4 vert () {\nvec2 worldPos = a_position * u_buffer1.xy + u_buffer1.zw;\nvec2 clipSpace = worldPos / u_buffer0.xy * 2.0 - 1.0;\nvec4 screenPos = u_projection * vec4(clipSpace, 0.0, 1.0);\nv_uv = a_texCoord;\nv_percent = u_buffer0.z;\nreturn screenPos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nin vec2 v_uv;\nin float v_percent;\nuniform sampler2D mainTexture;\nvec4 frag () {\nvec4 color = texture(mainTexture, v_uv);\nfloat precent = clamp(v_percent, 0.0, 1.0);\ncolor.xyz *= precent;\nreturn color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}]],glsl4:[[{vert:"\nprecision mediump float;\nlayout(set = 1, binding = 0) uniform Constants {\nvec4 mainTiling_Offset;\nvec4 frameTile_velLenScale;\nvec4 scale;\n};\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\nmat3 m = mat3(xAxis,yAxis,zAxis);\nfloat trace = m[0][0] + m[1][1] + m[2][2];\nvec4 quat;\nif (trace > 0.) {\nfloat s = 0.5 / sqrt(trace + 1.0);\nquat.w = 0.25 / s;\nquat.x = (m[2][1] - m[1][2]) * s;\nquat.y = (m[0][2] - m[2][0]) * s;\nquat.z = (m[1][0] - m[0][1]) * s;\n} else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\nfloat s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\nquat.w = (m[2][1] - m[1][2]) / s;\nquat.x = 0.25 * s;\nquat.y = (m[0][1] + m[1][0]) / s;\nquat.z = (m[0][2] + m[2][0]) / s;\n} else if (m[1][1] > m[2][2]) {\nfloat s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\nquat.w = (m[0][2] - m[2][0]) / s;\nquat.x = (m[0][1] + m[1][0]) / s;\nquat.y = 0.25 * s;\nquat.z = (m[1][2] + m[2][1]) / s;\n} else {\nfloat s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\nquat.w = (m[1][0] - m[0][1]) / s;\nquat.x = (m[0][2] + m[2][0]) / s;\nquat.y = (m[1][2] + m[2][1]) / s;\nquat.z = 0.25 * s;\n}\nfloat len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\nif (len > 0.) {\nlen = 1. / sqrt(len);\nquat.x = quat.x * len;\nquat.y = quat.y * len;\nquat.z = quat.z * len;\nquat.w = quat.w * len;\n}\nreturn quat;\n}\nvec4 quaternionFromEuler (vec3 angle){\nfloat x = angle.x / 2.;\nfloat y = angle.y / 2.;\nfloat z = angle.z / 2.;\nfloat sx = sin(x);\nfloat cx = cos(x);\nfloat sy = sin(y);\nfloat cy = cos(y);\nfloat sz = sin(z);\nfloat cz = cos(z);\nvec4 quat = vec4(0);\nquat.x = sx * cy * cz + cx * sy * sz;\nquat.y = cx * sy * cz + sx * cy * sz;\nquat.z = cx * cy * sz - sx * sy * cz;\nquat.w = cx * cy * cz - sx * sy * sz;\nreturn quat;\n}\nvec4 quatMultiply (vec4 a, vec4 b){\nvec4 quat;\nquat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\nquat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\nquat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\nquat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\nreturn quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\nfloat ix = q.w * v.x + q.y * v.z - q.z * v.y;\nfloat iy = q.w * v.y + q.z * v.x - q.x * v.z;\nfloat iz = q.w * v.z + q.x * v.y - q.y * v.x;\nfloat iw = -q.x * v.x - q.y * v.y - q.z * v.z;\nv.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\nv.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\nv.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\nvec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\nvec4 rotQuat = quatMultiply(viewQuat, q);\nrotateVecFromQuat(pos, rotQuat);\nreturn pos;\n}\nlayout(location = 0) out mediump vec2 uv;\nlayout(location = 1) out mediump vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n, mat4 viewInv\n) {\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\nvec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\nvec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n}\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec2 a_texCoord;\nlayout(location = 2) in vec4 a_color;\nlayout(set = 1, binding = 1) uniform builtin {\nvec4 cc_size_rotation;\n};\nvec4 vs_main() {\nvec4 pos = vec4(a_position, 1);\npos = cc_matWorld * pos;\nvec2 vertOffset = a_texCoord.xy - 0.5;\ncomputeVertPos(pos, vertOffset, quaternionFromEuler(vec3(0., 0., cc_size_rotation.z)), vec3(cc_size_rotation.xy, 0.), cc_matViewInv);\npos = cc_matViewProj * pos;\nuv = a_texCoord.xy;\ncolor = a_color;\nreturn pos;\n}\nvoid main() { gl_Position = vs_main(); }",frag:"\nprecision mediump float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nlayout(location = 0) in vec2 uv;\nlayout(location = 1) in vec4 color;\nlayout(set = 1, binding = 3) uniform sampler2D mainTexture;\nlayout(set = 1, binding = 2) uniform FragConstants {\nvec4 tintColor;\n};\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\nreturn CCFragOutput(col);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"}],[{vert:"\nprecision highp float;\nlayout(location = 0) in vec3 a_position;\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nvec4 frag () {\nvec4 o = vec4(1.0);\nreturn o;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec4 a_color;\nlayout(location = 0) out vec4 v_color;\nlayout(location = 2) in float a_dist;\nlayout(location = 1) out float v_dist;\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\npos = cc_matViewProj * cc_matWorld * pos;\nv_color = a_color;\nv_dist = a_dist;\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nlayout(location = 0) in vec4 v_color;\nlayout(location = 1) in float v_dist;\nvec4 frag () {\nvec4 o = v_color;\nfloat aa = fwidth(v_dist);\nfloat alpha = 1. - smoothstep(-aa, 0., abs(v_dist) - 1.0);\no.rgb *= o.a;\no *= alpha;\nreturn o;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\nmat3 m = mat3(xAxis,yAxis,zAxis);\nfloat trace = m[0][0] + m[1][1] + m[2][2];\nvec4 quat;\nif (trace > 0.) {\nfloat s = 0.5 / sqrt(trace + 1.0);\nquat.w = 0.25 / s;\nquat.x = (m[2][1] - m[1][2]) * s;\nquat.y = (m[0][2] - m[2][0]) * s;\nquat.z = (m[1][0] - m[0][1]) * s;\n} else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\nfloat s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\nquat.w = (m[2][1] - m[1][2]) / s;\nquat.x = 0.25 * s;\nquat.y = (m[0][1] + m[1][0]) / s;\nquat.z = (m[0][2] + m[2][0]) / s;\n} else if (m[1][1] > m[2][2]) {\nfloat s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\nquat.w = (m[0][2] - m[2][0]) / s;\nquat.x = (m[0][1] + m[1][0]) / s;\nquat.y = 0.25 * s;\nquat.z = (m[1][2] + m[2][1]) / s;\n} else {\nfloat s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\nquat.w = (m[1][0] - m[0][1]) / s;\nquat.x = (m[0][2] + m[2][0]) / s;\nquat.y = (m[1][2] + m[2][1]) / s;\nquat.z = 0.25 * s;\n}\nfloat len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\nif (len > 0.) {\nlen = 1. / sqrt(len);\nquat.x = quat.x * len;\nquat.y = quat.y * len;\nquat.z = quat.z * len;\nquat.w = quat.w * len;\n}\nreturn quat;\n}\nmat4 matrixFromRT (vec4 q, vec3 p){\nfloat x2 = q.x + q.x;\nfloat y2 = q.y + q.y;\nfloat z2 = q.z + q.z;\nfloat xx = q.x * x2;\nfloat xy = q.x * y2;\nfloat xz = q.x * z2;\nfloat yy = q.y * y2;\nfloat yz = q.y * z2;\nfloat zz = q.z * z2;\nfloat wx = q.w * x2;\nfloat wy = q.w * y2;\nfloat wz = q.w * z2;\nreturn mat4(\n1. - (yy + zz), xy + wz, xz - wy, 0,\nxy - wz, 1. - (xx + zz), yz + wx, 0,\nxz + wy, yz - wx, 1. - (xx + yy), 0,\np.x, p.y, p.z, 1\n);\n}\nmat4 matFromRTS (vec4 q, vec3 t, vec3 s){\nfloat x = q.x, y = q.y, z = q.z, w = q.w;\nfloat x2 = x + x;\nfloat y2 = y + y;\nfloat z2 = z + z;\nfloat xx = x * x2;\nfloat xy = x * y2;\nfloat xz = x * z2;\nfloat yy = y * y2;\nfloat yz = y * z2;\nfloat zz = z * z2;\nfloat wx = w * x2;\nfloat wy = w * y2;\nfloat wz = w * z2;\nfloat sx = s.x;\nfloat sy = s.y;\nfloat sz = s.z;\nreturn mat4((1. - (yy + zz)) * sx, (xy + wz) * sx, (xz - wy) * sx, 0,\n(xy - wz) * sy, (1. - (xx + zz)) * sy, (yz + wx) * sy, 0,\n(xz + wy) * sz, (yz - wx) * sz, (1. - (xx + yy)) * sz, 0,\nt.x, t.y, t.z, 1);\n}\nvec4 quatMultiply (vec4 a, vec4 b){\nvec4 quat;\nquat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\nquat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\nquat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\nquat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\nreturn quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\nfloat ix = q.w * v.x + q.y * v.z - q.z * v.y;\nfloat iy = q.w * v.y + q.z * v.x - q.x * v.z;\nfloat iz = q.w * v.z + q.x * v.y - q.y * v.x;\nfloat iw = -q.x * v.x - q.y * v.y - q.z * v.z;\nv.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\nv.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\nv.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\nvec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\nvec4 rotQuat = quatMultiply(viewQuat, q);\nrotateVecFromQuat(pos, rotQuat);\nreturn pos;\n}\nlayout(set = 1, binding = 0) uniform Constants {\nvec4 mainTiling_Offset;\nvec4 frameTile_velLenScale;\nvec4 scale;\n};\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nlayout(location = 0) out mediump vec2 uv;\nlayout(location = 1) out mediump vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n, mat4 viewInv\n#endif\n#if CC_RENDER_MODE == 1\n, vec3 eye\n, vec4 velocity\n, float velocityScale\n, float lengthScale\n, float xIndex\n#endif\n) {\n#if CC_RENDER_MODE == 0\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\nvec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\nvec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n#elif CC_RENDER_MODE == 1\nvec3 camRight = normalize(cross(pos.xyz - eye, velocity.xyz)) * s.x;\nvec3 camUp = velocity.xyz * velocityScale + normalize(velocity.xyz) * lengthScale * s.y;\npos.xyz += (camRight * abs(vertOffset.x) * sign(vertOffset.y)) - camUp * xIndex;\n#elif CC_RENDER_MODE == 2\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = vec3(1, 0, 0);\nvec3 camY = vec3(0, 0, -1);\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, cross(camX, camY), q);\n#elif CC_RENDER_MODE == 3\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nrotateVecFromQuat(viewSpaceVert, q);\nvec3 camX = normalize(vec3(cc_matView[0][0], cc_matView[1][0], cc_matView[2][0]));\nvec3 camY = vec3(0, 1, 0);\nvec3 offset = camX * viewSpaceVert.x + camY * viewSpaceVert.y;\npos.xyz += offset;\n#else\npos.x += vertOffset.x;\npos.y += vertOffset.y;\n#endif\n}\nvec2 computeUV (float frameIndex, vec2 vertIndex, vec2 frameTile){\nvec2 aniUV = vec2(0, floor(frameIndex * frameTile.y));\naniUV.x = floor(frameIndex * frameTile.x * frameTile.y - aniUV.y * frameTile.x);\n#if CC_RENDER_MODE != 4\nvertIndex.y = 1. - vertIndex.y;\n#endif\nreturn (aniUV.xy + vertIndex) / vec2(frameTile.x, frameTile.y);\n}\nlayout(set = 1, binding = 1) uniform SampleConstants {\nvec4 u_sampleInfo;\n};\nlayout(set = 1, binding = 2) uniform TickConstants {\nvec4 u_worldRot;\nvec4 u_timeDelta;\n};\nlayout(location = 0) in vec4 a_position_starttime;\nlayout(location = 1) in vec4 a_size_uv;\nlayout(location = 2) in vec4 a_rotation_uv;\nlayout(location = 3) in vec4 a_color;\nlayout(location = 4) in vec4 a_dir_life;\nlayout(location = 5) in float a_rndSeed;\n#if CC_RENDER_MODE == 4\nlayout(location = 6) in vec3 a_texCoord;\nlayout(location = 7) in vec3 a_texCoord3;\nlayout(location = 8) in vec3 a_normal;\nlayout(location = 9) in vec4 a_color1;\n#endif\nvec3 unpackCurveData (sampler2D tex, vec2 coord) {\nvec4 a = texture(tex, coord);\nvec4 b = texture(tex, coord + u_sampleInfo.y);\nfloat c = fract(coord.x * u_sampleInfo.x);\nreturn mix(a.xyz, b.xyz, c);\n}\nvec3 unpackCurveData (sampler2D tex, vec2 coord, out float w) {\nvec4 a = texture(tex, coord);\nvec4 b = texture(tex, coord + u_sampleInfo.y);\nfloat c = fract(coord.x * u_sampleInfo.x);\nw = mix(a.w, b.w, c);\nreturn mix(a.xyz, b.xyz, c);\n}\nfloat pseudoRandom (float seed) {\nseed = mod(seed, 233280.);\nfloat q = (seed * 9301. + 49297.) / 233280.;\nreturn fract(q);\n}\n#if COLOR_OVER_TIME_MODULE_ENABLE\nlayout(set = 1, binding = 10) uniform sampler2D color_over_time_tex0;\nlayout(set = 1, binding = 3) uniform ColorConstant {\nint u_color_mode;\n};\n#endif\n#if ROTATION_OVER_TIME_MODULE_ENABLE\nlayout(set = 1, binding = 11) uniform sampler2D rotation_over_time_tex0;\nlayout(set = 1, binding = 4) uniform RotationConstant {\nint u_rotation_mode;\n};\n#endif\n#if SIZE_OVER_TIME_MODULE_ENABLE\nlayout(set = 1, binding = 12) uniform sampler2D size_over_time_tex0;\nlayout(set = 1, binding = 5) uniform SizeConstant {\nint u_size_mode;\n};\n#endif\n#if FORCE_OVER_TIME_MODULE_ENABLE\nlayout(set = 1, binding = 13) uniform sampler2D force_over_time_tex0;\nlayout(set = 1, binding = 6) uniform ForceConstant {\nint u_force_mode;\nint u_force_space;\n};\n#endif\n#if VELOCITY_OVER_TIME_MODULE_ENABLE\nlayout(set = 1, binding = 14) uniform sampler2D velocity_over_time_tex0;\nlayout(set = 1, binding = 7) uniform VelocityConstant {\nint u_velocity_mode;\nint u_velocity_space;\n};\n#endif\n#if TEXTURE_ANIMATION_MODULE_ENABLE\nlayout(set = 1, binding = 15) uniform sampler2D texture_animation_tex0;\nlayout(set = 1, binding = 8) uniform AnimationConstant {\nvec4 u_anim_info;\n};\n#endif\nfloat repeat (float t, float length) {\nreturn t - floor(t / length) * length;\n}\nvec4 rotateQuat (vec4 p, vec4 q) {\nvec3 iv = cross(q.xyz, p.xyz) + q.w * p.xyz;\nvec3 res = p.xyz + 2.0 * cross(q.xyz, iv);\nreturn vec4(res.xyz, p.w);\n}\nvec4 toQuat(vec3 rotation) {\nvec3 rotTmp = rotation;\nfloat mulFactor = 1.0;\nif (rotTmp.x > 10.0 * 0.5) {\nrotTmp.x -= 10.0;\nmulFactor = -1.0;\n}\nvec4 rot = vec4(rotTmp, 0.0);\nrot.w = mulFactor * sqrt(1.0 - rot.x * rot.x - rot.y * rot.y - rot.z * rot.z);\nreturn rot;\n}\nmat3 QuatToMat3(vec4 q) {\nvec3 m0 = vec3(\n1.0 - 2.0 * q.y * q.y - 2.0 * q.z * q.z,\n2.0 * q.x * q.y + 2.0 * q.w * q.z,\n2.0 * q.x * q.z - 2.0 * q.w * q.y);\nvec3 m1 = vec3(\n2.0 * q.x * q.y - 2.0 * q.w * q.z,\n1.0 - 2.0 * q.x * q.x - 2.0 * q.z * q.z,\n2.0 * q.y * q.z + 2.0 * q.w * q.x);\nvec3 m2 = vec3(\n2.0 * q.x * q.z + 2.0 * q.w * q.y,\n2.0 * q.y * q.z - 2.0 * q.w * q.x,\n1.0 - 2.0 * q.x * q.x - 2.0 * q.y * q.y);\nreturn mat3(m0, m1, m2);\n}\nvec4 Mat3ToQuat(mat3 mat) {\nfloat tr = mat[0][0] + mat[1][1] + mat[2][2];\nfloat qw, qx, qy, qz;\nif (tr > 0.0) {\nfloat S = sqrt(tr + 1.0) * 2.0;\nfloat invS = 1.0 / S;\nqw = 0.25 * S;\nqx = (mat[1][2] - mat[2][1]) * invS;\nqy = (mat[2][0] - mat[0][2]) * invS;\nqz = (mat[0][1] - mat[1][0]) * invS;\n} else if ((mat[0][0] > mat[1][1])&&(mat[0][0] > mat[2][2])) {\nfloat S = sqrt(1.0 + mat[0][0] - mat[1][1] - mat[2][2]) * 2.0;\nfloat invS = 1.0 / S;\nqw = (mat[1][2] - mat[2][1]) * invS;\nqx = 0.25 * S;\nqy = (mat[1][0] + mat[0][1]) * invS;\nqz = (mat[2][0] + mat[0][2]) * invS;\n} else if (mat[1][1] > mat[2][2]) {\nfloat S = sqrt(1.0 + mat[1][1] - mat[0][0] - mat[2][2]) * 2.0;\nfloat invS = 1.0 / S;\nqw = (mat[2][0] - mat[0][2]) * invS;\nqx = (mat[1][0] + mat[0][1]) * invS;\nqy = 0.25 * S;\nqz = (mat[2][1] + mat[1][2]) * invS;\n} else {\nfloat S = sqrt(1.0 + mat[2][2] - mat[0][0] - mat[1][1]) * 2.0;\nfloat invS = 1.0 / S;\nqw = (mat[0][1] - mat[1][0]) * invS;\nqx = (mat[2][0] + mat[0][2]) * invS;\nqy = (mat[2][1] + mat[1][2]) * invS;\nqz = 0.25 * S;\n}\nreturn vec4(qx, qy, qz, qw);\n}\nvec4 EulerToQuat(vec3 euler) {\nvec3 er = euler * 0.5;\nfloat x = er.x, y = er.y, z = er.z;\nfloat sx = sin(x);\nfloat cx = cos(x);\nfloat sy = sin(y);\nfloat cy = cos(y);\nfloat sz = sin(z);\nfloat cz = cos(z);\nvec4 quat;\nquat.x = sx * cy * cz + cx * sy * sz;\nquat.y = cx * sy * cz + sx * cy * sz;\nquat.z = cx * cy * sz - sx * sy * cz;\nquat.w = cx * cy * cz - sx * sy * sz;\nreturn quat;\n}\nvec4 gpvs_main () {\nfloat activeTime = u_timeDelta.x - a_position_starttime.w;\nfloat normalizedTime = clamp(activeTime / a_dir_life.w, 0.0, 1.0);\nvec2 timeCoord0 = vec2(normalizedTime, 0.);\nvec2 timeCoord1 = vec2(normalizedTime, 1.);\n#if CC_RENDER_MODE == 4\nvec2 vertIdx = vec2(a_texCoord.x, a_texCoord.y);\n#else\nvec2 vertIdx = vec2(a_size_uv.w, a_rotation_uv.w);\n#endif\nvec4 velocity = vec4(a_dir_life.xyz, 0.);\nvec4 pos = vec4(a_position_starttime.xyz, 1.);\nvec3 size = a_size_uv.xyz;\n#if SIZE_OVER_TIME_MODULE_ENABLE\nif (u_size_mode == 1) {\nsize *= unpackCurveData(size_over_time_tex0, timeCoord0);\n} else {\nvec3 size_0 = unpackCurveData(size_over_time_tex0, timeCoord0);\nvec3 size_1 = unpackCurveData(size_over_time_tex0, timeCoord1);\nfloat factor_s = pseudoRandom(a_rndSeed + 39825.);\nsize *= mix(size_0, size_1, factor_s);\n}\n#endif\nvec3 compScale = scale.xyz * size;\n#if FORCE_OVER_TIME_MODULE_ENABLE\nvec3 forceAnim = vec3(0.);\nif (u_force_mode == 1) {\nforceAnim = unpackCurveData(force_over_time_tex0, timeCoord0);\n} else {\nvec3 force_0 = unpackCurveData(force_over_time_tex0, timeCoord0);\nvec3 force_1 = unpackCurveData(force_over_time_tex0, timeCoord1);\nfloat factor_f =  pseudoRandom(a_rndSeed + 212165.);\nforceAnim = mix(force_0, force_1, factor_f);\n}\nvec4 forceTrack = vec4(forceAnim, 0.);\nif (u_force_space == 0) {\nforceTrack = rotateQuat(forceTrack, u_worldRot);\n}\nvelocity.xyz += forceTrack.xyz;\n#endif\n#if VELOCITY_OVER_TIME_MODULE_ENABLE\nfloat speedModifier0 = 1.;\nfloat speedModifier1 = 1.;\nvec3 velocityAnim = vec3(0.);\nif (u_velocity_mode == 1) {\nvelocityAnim = unpackCurveData(velocity_over_time_tex0, timeCoord0, speedModifier0);\n} else {\nvec3 vectory_0 = unpackCurveData(velocity_over_time_tex0, timeCoord0, speedModifier0);\nvec3 vectory_1 = unpackCurveData(velocity_over_time_tex0, timeCoord1, speedModifier1);\nfloat factor_v = pseudoRandom(a_rndSeed + 197866.);\nvelocityAnim = mix(vectory_0, vectory_1, factor_v);\nspeedModifier0 = mix(speedModifier0, speedModifier1, factor_v);\n}\nvec4 velocityTrack = vec4(velocityAnim, 0.);\nif (u_velocity_space == 0) {\nvelocityTrack = rotateQuat(velocityTrack, u_worldRot);\n}\nvelocity.xyz += velocityTrack.xyz;\nvelocity.xyz *= speedModifier0;\n#endif\npos.xyz += velocity.xyz * normalizedTime * a_dir_life.w;\n#if !CC_USE_WORLD_SPACE\npos = cc_matWorld * pos;\n#if CC_RENDER_MODE == 1\nvelocity = rotateQuat(velocity, u_worldRot);\n#endif\n#endif\nvec3 startRotation = a_rotation_uv.xyz;\nvec4 rot = toQuat(startRotation);\n#if ROTATION_OVER_TIME_MODULE_ENABLE\nif (u_rotation_mode == 1) {\nvec3 euler = unpackCurveData(rotation_over_time_tex0, timeCoord0) * normalizedTime * a_dir_life.w;\nvec4 quat = EulerToQuat(euler);\nmat3 mLocal = QuatToMat3(quat);\nmat3 mStart = QuatToMat3(rot);\nrot = Mat3ToQuat(mStart * mLocal);\n} else {\nvec3 rotation_0 = unpackCurveData(rotation_over_time_tex0, timeCoord0);\nvec3 rotation_1 = unpackCurveData(rotation_over_time_tex0, timeCoord1);\nfloat factor_r = pseudoRandom(a_rndSeed + 125292.);\nvec3 euler = mix(rotation_0, rotation_1, factor_r) * normalizedTime * a_dir_life.w;\n#if CC_RENDER_MODE == 3 || CC_RENDER_MODE == 2\neuler = vec3(0.0, 0.0, euler.z);\n#endif\nvec4 quat = EulerToQuat(euler);\nmat3 mLocal = QuatToMat3(quat);\nmat3 mStart = QuatToMat3(rot);\nrot = Mat3ToQuat(mStart * mLocal);\n}\n#endif\n#if COLOR_OVER_TIME_MODULE_ENABLE\nif (u_color_mode == 1) {\ncolor = a_color * texture(color_over_time_tex0, timeCoord0);\n} else {\nvec4 color_0 = texture(color_over_time_tex0, timeCoord0);\nvec4 color_1 = texture(color_over_time_tex0, timeCoord1);\nfloat factor_c = pseudoRandom(a_rndSeed + 91041.);\ncolor = a_color * mix(color_0, color_1, factor_c);\n}\n#else\ncolor = a_color;\n#endif\n#if CC_RENDER_MODE != 4\nvec2 cornerOffset = vec2((vertIdx - 0.5));\n#if CC_RENDER_MODE == 1\nrot = vec4(0.0, 0.0, 0.0, 1.0);\n#endif\ncomputeVertPos(pos, cornerOffset, rot, compScale\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n, cc_matViewInv\n#endif\n#if CC_RENDER_MODE == 1\n, cc_cameraPos.xyz\n, velocity\n, frameTile_velLenScale.z\n, frameTile_velLenScale.w\n, a_size_uv.w\n#endif\n);\n#else\nmat4 xformNoScale = matrixFromRT(rot, pos.xyz);\nmat4 xform = matFromRTS(rot, pos.xyz, compScale);\npos = xform * vec4(a_texCoord3, 1);\nvec4 normal = xformNoScale * vec4(a_normal, 0);\ncolor *= a_color1;\n#endif\npos = cc_matViewProj * pos;\nfloat frameIndex = 0.;\n#if TEXTURE_ANIMATION_MODULE_ENABLE\nfloat startFrame = 0.;\nvec3 frameInfo = vec3(0.);\nif (int(u_anim_info.x) == 1) {\nframeInfo = unpackCurveData(texture_animation_tex0, timeCoord0);\n} else {\nvec3 frameInfo0 = unpackCurveData(texture_animation_tex0, timeCoord0);\nvec3 frameInfo1 = unpackCurveData(texture_animation_tex0, timeCoord1);\nfloat factor_t = pseudoRandom(a_rndSeed + 90794.);\nframeInfo = mix(frameInfo0, frameInfo1, factor_t);\n}\nstartFrame = frameInfo.x / u_anim_info.y;\nframeIndex = repeat(u_anim_info.z * (frameInfo.y + startFrame), 1.);\n#endif\nuv = computeUV(frameIndex, vertIdx, frameTile_velLenScale.xy) * mainTiling_Offset.xy + mainTiling_Offset.zw;\nreturn pos;\n}\nvoid main() { gl_Position = gpvs_main(); }",frag:"\nprecision mediump float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nlayout(location = 0) in vec2 uv;\nlayout(location = 1) in vec4 color;\nlayout(set = 1, binding = 16) uniform sampler2D mainTexture;\nlayout(set = 1, binding = 9) uniform FragConstants {\nvec4 tintColor;\n};\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\nreturn CCFragOutput(col);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"}],[{vert:"\nprecision mediump float;\nlayout(set = 1, binding = 0) uniform Constants {\nvec4 mainTiling_Offset;\nvec4 frameTile_velLenScale;\nvec4 scale;\n};\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nlayout(location = 0) out mediump vec2 uv;\nlayout(location = 1) out mediump vec4 color;\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec4 a_texCoord;\nlayout(location = 2) in vec3 a_texCoord1;\nlayout(location = 3) in vec3 a_texCoord2;\nlayout(location = 4) in vec4 a_color;\n#if CC_DRAW_WIRE_FRAME\nlayout(location = 2) out vec3 vBarycentric;\n#endif\nvec4 vs_main() {\nhighp vec4 pos = vec4(a_position, 1);\nvec4 velocity = vec4(a_texCoord1.xyz, 0);\n#if !CC_USE_WORLD_SPACE\npos = cc_matWorld * pos;\nvelocity = cc_matWorld * velocity;\n#endif\nfloat vertOffset = (a_texCoord.x - 0.5) * a_texCoord.y;\nvec3 camUp = normalize(cross(pos.xyz - cc_cameraPos.xyz, velocity.xyz));\npos.xyz += camUp * vertOffset;\npos = cc_matViewProj * pos;\nuv = a_texCoord.zw * mainTiling_Offset.xy + mainTiling_Offset.zw;;\ncolor = a_color;\n#if CC_DRAW_WIRE_FRAME\nvBarycentric = a_texCoord2;\n#endif\nreturn pos;\n}\nvoid main() { gl_Position = vs_main(); }",frag:"\nprecision mediump float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nlayout(location = 0) in vec2 uv;\nlayout(location = 1) in vec4 color;\n#if CC_DRAW_WIRE_FRAME\nlayout(location = 2) in vec3 vBarycentric;\n#endif\nlayout(set = 1, binding = 2) uniform sampler2D mainTexture;\nlayout(set = 1, binding = 1) uniform FragConstants {\nvec4 tintColor;\n};\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\n#if CC_DRAW_WIRE_FRAME\nif (any(lessThan(vBarycentric, vec3(0.02)))) {\ncol = vec4(0., 1., 1., 1.);\n}\n#endif\nreturn CCFragOutput(col);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"}],[{vert:"\nprecision highp float;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\nmat3 m = mat3(xAxis,yAxis,zAxis);\nfloat trace = m[0][0] + m[1][1] + m[2][2];\nvec4 quat;\nif (trace > 0.) {\nfloat s = 0.5 / sqrt(trace + 1.0);\nquat.w = 0.25 / s;\nquat.x = (m[2][1] - m[1][2]) * s;\nquat.y = (m[0][2] - m[2][0]) * s;\nquat.z = (m[1][0] - m[0][1]) * s;\n} else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\nfloat s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\nquat.w = (m[2][1] - m[1][2]) / s;\nquat.x = 0.25 * s;\nquat.y = (m[0][1] + m[1][0]) / s;\nquat.z = (m[0][2] + m[2][0]) / s;\n} else if (m[1][1] > m[2][2]) {\nfloat s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\nquat.w = (m[0][2] - m[2][0]) / s;\nquat.x = (m[0][1] + m[1][0]) / s;\nquat.y = 0.25 * s;\nquat.z = (m[1][2] + m[2][1]) / s;\n} else {\nfloat s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\nquat.w = (m[1][0] - m[0][1]) / s;\nquat.x = (m[0][2] + m[2][0]) / s;\nquat.y = (m[1][2] + m[2][1]) / s;\nquat.z = 0.25 * s;\n}\nfloat len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\nif (len > 0.) {\nlen = 1. / sqrt(len);\nquat.x = quat.x * len;\nquat.y = quat.y * len;\nquat.z = quat.z * len;\nquat.w = quat.w * len;\n}\nreturn quat;\n}\nmat4 matrixFromRT (vec4 q, vec3 p){\nfloat x2 = q.x + q.x;\nfloat y2 = q.y + q.y;\nfloat z2 = q.z + q.z;\nfloat xx = q.x * x2;\nfloat xy = q.x * y2;\nfloat xz = q.x * z2;\nfloat yy = q.y * y2;\nfloat yz = q.y * z2;\nfloat zz = q.z * z2;\nfloat wx = q.w * x2;\nfloat wy = q.w * y2;\nfloat wz = q.w * z2;\nreturn mat4(\n1. - (yy + zz), xy + wz, xz - wy, 0,\nxy - wz, 1. - (xx + zz), yz + wx, 0,\nxz + wy, yz - wx, 1. - (xx + yy), 0,\np.x, p.y, p.z, 1\n);\n}\nmat4 matFromRTS (vec4 q, vec3 t, vec3 s){\nfloat x = q.x, y = q.y, z = q.z, w = q.w;\nfloat x2 = x + x;\nfloat y2 = y + y;\nfloat z2 = z + z;\nfloat xx = x * x2;\nfloat xy = x * y2;\nfloat xz = x * z2;\nfloat yy = y * y2;\nfloat yz = y * z2;\nfloat zz = z * z2;\nfloat wx = w * x2;\nfloat wy = w * y2;\nfloat wz = w * z2;\nfloat sx = s.x;\nfloat sy = s.y;\nfloat sz = s.z;\nreturn mat4((1. - (yy + zz)) * sx, (xy + wz) * sx, (xz - wy) * sx, 0,\n(xy - wz) * sy, (1. - (xx + zz)) * sy, (yz + wx) * sy, 0,\n(xz + wy) * sz, (yz - wx) * sz, (1. - (xx + yy)) * sz, 0,\nt.x, t.y, t.z, 1);\n}\nvec4 quatMultiply (vec4 a, vec4 b){\nvec4 quat;\nquat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\nquat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\nquat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\nquat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\nreturn quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\nfloat ix = q.w * v.x + q.y * v.z - q.z * v.y;\nfloat iy = q.w * v.y + q.z * v.x - q.x * v.z;\nfloat iz = q.w * v.z + q.x * v.y - q.y * v.x;\nfloat iw = -q.x * v.x - q.y * v.y - q.z * v.z;\nv.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\nv.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\nv.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\nvec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\nvec4 rotQuat = quatMultiply(viewQuat, q);\nrotateVecFromQuat(pos, rotQuat);\nreturn pos;\n}\nlayout(set = 1, binding = 0) uniform Constants {\nvec4 mainTiling_Offset;\nvec4 frameTile_velLenScale;\nvec4 scale;\n};\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nlayout(location = 0) out mediump vec2 uv;\nlayout(location = 1) out mediump vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\n, mat4 viewInv\n#endif\n#if CC_RENDER_MODE == 1\n, vec3 eye\n, vec4 velocity\n, float velocityScale\n, float lengthScale\n, float xIndex\n#endif\n) {\n#if CC_RENDER_MODE == 0\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\nvec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\nvec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n#elif CC_RENDER_MODE == 1\nvec3 camRight = normalize(cross(pos.xyz - eye, velocity.xyz)) * s.x;\nvec3 camUp = velocity.xyz * velocityScale + normalize(velocity.xyz) * lengthScale * s.y;\npos.xyz += (camRight * abs(vertOffset.x) * sign(vertOffset.y)) - camUp * xIndex;\n#elif CC_RENDER_MODE == 2\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nvec3 camX = vec3(1, 0, 0);\nvec3 camY = vec3(0, 0, -1);\npos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, cross(camX, camY), q);\n#elif CC_RENDER_MODE == 3\nvec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\nrotateVecFromQuat(viewSpaceVert, q);\nvec3 camX = normalize(vec3(cc_matView[0][0], cc_matView[1][0], cc_matView[2][0]));\nvec3 camY = vec3(0, 1, 0);\nvec3 offset = camX * viewSpaceVert.x + camY * viewSpaceVert.y;\npos.xyz += offset;\n#else\npos.x += vertOffset.x;\npos.y += vertOffset.y;\n#endif\n}\nvec2 computeUV (float frameIndex, vec2 vertIndex, vec2 frameTile){\nvec2 aniUV = vec2(0, floor(frameIndex * frameTile.y));\naniUV.x = floor(frameIndex * frameTile.x * frameTile.y - aniUV.y * frameTile.x);\n#if CC_RENDER_MODE != 4\nvertIndex.y = 1. - vertIndex.y;\n#endif\nreturn (aniUV.xy + vertIndex) / vec2(frameTile.x, frameTile.y);\n}\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_texCoord;\nlayout(location = 2) in vec3 a_texCoord1;\nlayout(location = 3) in vec3 a_texCoord2;\nlayout(location = 4) in vec4 a_color;\n#if CC_RENDER_MODE == 1\nlayout(location = 8) in vec3 a_color1;\n#endif\n#if CC_RENDER_MODE == 4\nlayout(location = 6) in vec3 a_texCoord3;\nlayout(location = 7) in vec3 a_normal;\nlayout(location = 8) in vec4 a_color1;\n#endif\nvec4 lpvs_main () {\nvec3 compScale = scale.xyz * a_texCoord1;\nvec4 pos = vec4(a_position, 1);\n#if CC_RENDER_MODE == 1\nvec4 velocity = vec4(a_color1.xyz, 0);\n#endif\n#if !CC_USE_WORLD_SPACE\npos = cc_matWorld * pos;\n#if CC_RENDER_MODE == 1\nvelocity = cc_matWorld * velocity;\n#endif\n#endif\nvec3 rotTmp = a_texCoord2;\nfloat mulFactor = 1.0;\nif (rotTmp.x > 10.0 * 0.5) {\nrotTmp.x -= 10.0;\nmulFactor = -1.0;\n}\nvec4 rot = vec4(rotTmp, 0.0);\nrot.w = mulFactor * sqrt(1.0 - rot.x * rot.x - rot.y * rot.y - rot.z * rot.z);\n#if CC_RENDER_MODE != 4\nvec2 cornerOffset = vec2((a_texCoord.xy - 0.5));\n#if CC_RENDER_MODE == 0 || CC_RENDER_MODE == 3\ncomputeVertPos(pos, cornerOffset, rot, compScale, cc_matViewInv);\n#elif CC_RENDER_MODE == 1\ncomputeVertPos(pos, cornerOffset, rot, compScale, cc_cameraPos.xyz, velocity, frameTile_velLenScale.z, frameTile_velLenScale.w, a_texCoord.x);\n#elif 2\ncomputeVertPos(pos, cornerOffset, rot, compScale);\n#endif\ncolor = a_color;\n#else\nmat4 xformNoScale = matrixFromRT(rot, pos.xyz);\nmat4 xform = matFromRTS(rot, pos.xyz, compScale);\npos = xform * vec4(a_texCoord3, 1);\nvec4 normal = xformNoScale * vec4(a_normal, 0);\ncolor = a_color * a_color1;\n#endif\nuv = computeUV(a_texCoord.z, a_texCoord.xy, frameTile_velLenScale.xy) * mainTiling_Offset.xy + mainTiling_Offset.zw;\npos = cc_matViewProj * pos;\nreturn pos;\n}\nvoid main() { gl_Position = lpvs_main(); }",frag:"\nprecision mediump float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nlayout(location = 0) in vec2 uv;\nlayout(location = 1) in vec4 color;\nlayout(set = 1, binding = 2) uniform sampler2D mainTexture;\nlayout(set = 1, binding = 1) uniform FragConstants {\nvec4 tintColor;\n};\nvec4 add () {\nvec4 col = 2.0 * color * tintColor * texture(mainTexture, uv);\nreturn CCFragOutput(col);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = add(); }"}],[{vert:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\n#if USE_LOCAL\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec2 a_texCoord;\nlayout(location = 2) in vec4 a_color;\nlayout(location = 0) out vec4 v_light;\nlayout(location = 1) out vec2 uv0;\n#if TWO_COLORED\nlayout(location = 3) in vec4 a_color2;\nlayout(location = 2) out vec4 v_dark;\n#endif\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\n#if USE_LOCAL\npos = cc_matWorld * pos;\n#endif\npos = cc_matViewProj * pos;\nuv0 = a_texCoord;\nv_light = a_color;\n#if TWO_COLORED\nv_dark = a_color2;\n#endif\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\n#if USE_ALPHA_TEST\nlayout(set = 1, binding = 0) uniform ALPHA_TEST_DATA {\nfloat alphaThreshold;\n};\n#endif\nvoid ALPHA_TEST (in vec4 color) {\n#if USE_ALPHA_TEST\nif (color.a < alphaThreshold) discard;\n#endif\n}\nvoid ALPHA_TEST (in float alpha) {\n#if USE_ALPHA_TEST\nif (alpha < alphaThreshold) discard;\n#endif\n}\nlayout(location = 0) in vec4 v_light;\n#if TWO_COLORED\nlayout(location = 2) in vec4 v_dark;\n#endif\nlayout(location = 1) in vec2 uv0;\nlayout(set = 2, binding = 10) uniform sampler2D cc_spriteTexture;\nvec4 frag () {\nvec4 o = vec4(1, 1, 1, 1);\n#if TWO_COLORED\nvec4 texColor = vec4(1, 1, 1, 1);\ntexColor *= texture(cc_spriteTexture, uv0);\no.a = texColor.a * v_light.a;\no.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n#else\no *= texture(cc_spriteTexture, uv0);\no *= v_light;\n#endif\nALPHA_TEST(o);\nreturn o;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\n#if USE_LOCAL\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\n#if SAMPLE_FROM_RT\n#endif\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec2 a_texCoord;\nlayout(location = 2) in vec4 a_color;\nlayout(location = 0) out vec4 color;\nlayout(location = 1) out vec2 uv0;\nvec4 vert () {\nvec4 pos = vec4(a_position, 1);\n#if USE_LOCAL\npos = cc_matWorld * pos;\n#endif\n#if USE_PIXEL_ALIGNMENT\npos = cc_matView * pos;\npos.xyz = floor(pos.xyz);\npos = cc_matProj * pos;\n#else\npos = cc_matViewProj * pos;\n#endif\nuv0 = a_texCoord;\n#if SAMPLE_FROM_RT\nuv0 = cc_cameraPos.w > 1.0 ? vec2(uv0.x, 1.0 - uv0.y) : uv0;\n#endif\ncolor = a_color;\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nvec4 CCSampleWithAlphaSeparated(sampler2D tex, vec2 uv) {\n#if CC_USE_EMBEDDED_ALPHA\nreturn vec4(texture(tex, uv).rgb, texture(tex, uv + vec2(0.0, 0.5)).r);\n#else\nreturn texture(tex, uv);\n#endif\n}\n#if USE_ALPHA_TEST\nlayout(set = 1, binding = 0) uniform ALPHA_TEST_DATA {\nfloat alphaThreshold;\n};\n#endif\nvoid ALPHA_TEST (in vec4 color) {\n#if USE_ALPHA_TEST\nif (color.a < alphaThreshold) discard;\n#endif\n}\nvoid ALPHA_TEST (in float alpha) {\n#if USE_ALPHA_TEST\nif (alpha < alphaThreshold) discard;\n#endif\n}\nlayout(location = 0) in vec4 color;\n#if USE_TEXTURE\nlayout(location = 1) in vec2 uv0;\nlayout(set = 2, binding = 10) uniform sampler2D cc_spriteTexture;\n#endif\nvec4 frag () {\nvec4 o = vec4(1, 1, 1, 1);\n#if USE_TEXTURE\no *= CCSampleWithAlphaSeparated(cc_spriteTexture, uv0);\n#if IS_GRAY\nfloat gray  = 0.2126 * o.r + 0.7152 * o.g + 0.0722 * o.b;\no.r = o.g = o.b = gray;\n#endif\n#endif\no *= color;\nALPHA_TEST(o);\nreturn o;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"#extension GL_EXT_shader_explicit_arithmetic_types_int32: require\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\n#if CC_USE_MORPH\nint getVertexId() {\nreturn gl_VertexIndex;\n}\nlayout(set = 2, binding = 4) uniform CCMorph {\nvec4 cc_displacementWeights[15];\nvec4 cc_displacementTextureInfo;\n};\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\nivec2 texSize = textureSize(tex, 0);\nreturn texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture(tex, x)),\ndecode32(texture(tex, y)),\ndecode32(texture(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nlayout(set = 2, binding = 6) uniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nlayout(set = 2, binding = 7) uniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nlayout(set = 2, binding = 8) uniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nlayout(location = 4) in u32vec4 a_joints;\nlayout(location = 5) in vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nlayout(location = 7) in highp vec4 a_jointAnimInfo;\n#endif\nlayout(set = 2, binding = 3) uniform CCSkinningTexture {\nhighp vec4 cc_jointTextureInfo;\n};\nlayout(set = 2, binding = 2) uniform CCSkinningAnimation {\nhighp vec4 cc_jointAnimInfo;\n};\nlayout(set = 2, binding = 5) uniform highp sampler2D cc_jointTexture;\n#else\nlayout(set = 2, binding = 3) uniform CCSkinning {\nhighp vec4 cc_joints[30 * 3];\n};\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\n#if USE_INSTANCING\nlayout(location = 8) in vec4 a_matWorld0;\nlayout(location = 9) in vec4 a_matWorld1;\nlayout(location = 10) in vec4 a_matWorld2;\n#if USE_LIGHTMAP\nlayout(location = 11) in vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nlayout(location = 12) in float a_dyn_batch_id;\nlayout(set = 2, binding = 0) uniform CCLocalBatched {\nhighp mat4 cc_matWorlds[10];\n};\n#else\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\nlayout(set = 1, binding = 0) uniform Constants {\nvec4 tilingOffset;\nvec4 albedo;\nvec4 albedoScaleAndCutoff;\nvec4 pbrParams;\nvec4 miscParams;\nvec4 emissive;\nvec4 emissiveScaleParam;\n};\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nlayout(location = 0) out float v_fog_factor;\nlayout(location = 1) out highp vec4 v_shadowPos;\nlayout(set = 0, binding = 2) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if CC_RECEIVE_SHADOW\nlayout(set = 0, binding = 3) uniform sampler2D cc_shadowMap;\nlayout(set = 0, binding = 5) uniform sampler2D cc_spotLightingMap;\n#endif\n#if USE_VERTEX_COLOR\nlayout(location = 13) in vec4 a_color;\nlayout(location = 2) out vec4 v_color;\n#endif\nlayout(location = 3) out vec3 v_position;\nlayout(location = 4) out vec3 v_normal;\nlayout(location = 5) out vec2 v_uv;\nlayout(location = 6) out vec2 v_uv1;\n#if USE_NORMAL_MAP\nlayout(location = 7) out vec3 v_tangent;\nlayout(location = 8) out vec3 v_bitangent;\n#endif\n#if HAS_SECOND_UV || USE_LIGHTMAP\nlayout(location = 14) in vec2 a_texCoord1;\n#endif\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nlayout(location = 9) out vec3 v_luv;\nvoid CCLightingMapCaclUV()\n{\n#if !USE_INSTANCING\nv_luv.xy = cc_lightingMapUVParam.xy + a_texCoord1 * cc_lightingMapUVParam.zw;\nv_luv.z = cc_lightingMapUVParam.z;\n#else\nv_luv.xy = a_lightingMapUVParam.xy + a_texCoord1 * a_lightingMapUVParam.zw;\nv_luv.z = a_lightingMapUVParam.z;\n#endif\n}\n#endif\nvoid main () {\nStandardVertInput In;\nIn.position = vec4(a_position, 1.0);\nIn.normal = a_normal;\nIn.tangent = a_tangent;\n#if CC_USE_MORPH\napplyMorph(In);\n#endif\n#if CC_USE_SKINNING\nCCSkin(In);\n#endif\nmat4 matWorld, matWorldIT;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\nmatWorldIT = matWorld;\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\nmatWorldIT = matWorld;\n#else\nmatWorld = cc_matWorld;\nmatWorldIT = cc_matWorldIT;\n#endif\nvec4 pos = matWorld * In.position;\nv_position = pos.xyz;\nv_normal = normalize((matWorldIT * vec4(In.normal, 0.0)).xyz);\n#if USE_NORMAL_MAP\nv_tangent = normalize((matWorld * vec4(In.tangent.xyz, 0.0)).xyz);\nv_bitangent = cross(v_normal, v_tangent) * In.tangent.w;\n#endif\nv_uv = a_texCoord * tilingOffset.xy + tilingOffset.zw;\n#if SAMPLE_FROM_RT\nv_uv = cc_cameraPos.w > 1.0 ? vec2(v_uv.x, 1.0 - v_uv.y) : v_uv;\n#endif\n#if HAS_SECOND_UV\nv_uv1 = a_texCoord1 * tilingOffset.xy + tilingOffset.zw;\n#if SAMPLE_FROM_RT\nv_uv1 = cc_cameraPos.w > 1.0 ? vec2(v_uv1.x, 1.0 - v_uv1.y) : v_uv1;\n#endif\n#endif\n#if USE_VERTEX_COLOR\nv_color = a_color;\n#endif\n#if CC_USE_FOG == 0\nv_fog_factor = LinearFog(pos);\n#elif CC_USE_FOG == 1\nv_fog_factor = ExpFog(pos);\n#elif CC_USE_FOG == 2\nv_fog_factor = ExpSquaredFog(pos);\n#elif CC_USE_FOG == 3\nv_fog_factor = LayeredFog(pos);\n#else\nv_fog_factor = 1.0;\n#endif\nv_shadowPos = cc_matLightViewProj * pos;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nCCLightingMapCaclUV();\n#endif\ngl_Position = cc_matProj * (cc_matView * matWorld) * In.position;\n}",frag:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(set = 1, binding = 0) uniform Constants {\nvec4 tilingOffset;\nvec4 albedo;\nvec4 albedoScaleAndCutoff;\nvec4 pbrParams;\nvec4 miscParams;\nvec4 emissive;\nvec4 emissiveScaleParam;\n};\nlayout(location = 0) in float v_fog_factor;\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nlayout(set = 0, binding = 2) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if CC_RECEIVE_SHADOW\nlayout(set = 0, binding = 3) uniform sampler2D cc_shadowMap;\nlayout(set = 0, binding = 5) uniform sampler2D cc_spotLightingMap;\nfloat CCGetLinearDepth (vec3 worldPos) {\nvec4 viewStartPos = cc_matLightView * vec4(worldPos.xyz, 1.0);\nfloat dist = length(viewStartPos.xyz);\nreturn cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\n}\nfloat CCGetShadowFactorHard (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_shadowMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_shadowMap, clipPos.xy).x;\n}\nshadow = step(clipPos.z- cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetShadowFactorSoft (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetDepth = clipPos.z - cc_shadowWHPBInfo.w;\nvec2 oneTap = 1.0 / cc_shadowWHPBInfo.xy;\nvec2 clipPos_offset = clipPos.xy + oneTap;\nfloat block0, block1, block2, block3;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)).x);\n}\nfloat coefX   = mod(clipPos.x, oneTap.x) * cc_shadowWHPBInfo.x;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block2, block3, coefX);\nfloat coefY   = mod(clipPos.y, oneTap.y) * cc_shadowWHPBInfo.y;\nreturn mix(resultX, resultY, coefY);\n}\nfloat CCGetShadowFactorSoft2X (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat bias = cc_shadowWHPBInfo.w;\nfloat offsetDepth = clipPos.z - bias;\nvec2 mapSize = cc_shadowWHPBInfo.xy;\nvec2 oneTap = 1.0 / mapSize;\nfloat clipPos_offset_L = clipPos.x - oneTap.x;\nfloat clipPos_offset_R = clipPos.x + oneTap.x;\nfloat clipPos_offset_U = clipPos.y - oneTap.y;\nfloat clipPos_offset_D = clipPos.y + oneTap.y;\nfloat block0, block1, block2, block3, block4, block5, block6, block7, block8;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock4 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock5 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock6 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock7 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock8 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)).x);\nblock4 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock5 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)).x);\nblock6 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)).x);\nblock7 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)).x);\nblock8 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)).x);\n}\nfloat coefX = mod(clipPos.x, oneTap.x) * mapSize.x;\nfloat coefY = mod(clipPos.y, oneTap.y) * mapSize.y;\nfloat shadow = 0.0;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block3, block4, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block1, block2, coefX);\nresultY = mix(block4, block5, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block3, block4, coefX);\nresultY = mix(block6, block7, coefX);\nshadow += mix(resultX, resultY, coefY);\nresultX = mix(block4, block5, coefX);\nresultY = mix(block7, block8, coefX);\nshadow += mix(resultX, resultY, coefY);\nreturn shadow * 0.25;\n}\nfloat CCGetSpotLightShadowFactorHard (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_spotLightingMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_spotLightingMap, clipPos.xy).x;\n}\nshadow = step(depth - cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetSpotLightShadowFactorSoft (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n} else {\nfloat closestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\nreturn shadow / 5.0;\n}\nfloat CCGetSpotLightShadowFactorSoft2X (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n}\n}\n} else {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\n}\n}\nreturn shadow / 9.0;\n}\n#endif\n#if CC_USE_IBL\nlayout(set = 0, binding = 4) uniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec4 fragTextureLod (sampler2D tex, vec2 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\nvec4 fragTextureLod (samplerCube tex, vec3 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\n#endif\nfloat GGXMobile (float roughness, float NoH, vec3 H, vec3 N) {\nvec3 NxH = cross(N, H);\nfloat OneMinusNoHSqr = dot(NxH, NxH);\nfloat a = roughness * roughness;\nfloat n = NoH * a;\nfloat p = a / (OneMinusNoHSqr + n * n);\nreturn p * p;\n}\nfloat CalcSpecular (float roughness, float NoH, vec3 H, vec3 N) {\nreturn (roughness * 0.25 + 0.25) * GGXMobile(roughness, NoH, H, N);\n}\nvec3 BRDFApprox (vec3 specular, float roughness, float NoV) {\nconst vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);\nconst vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NoV)) * r.x + r.y;\nvec2 AB = vec2(-1.04, 1.04) * a004 + r.zw;\nAB.y *= clamp(50.0 * specular.g, 0.0, 1.0);\nreturn specular * AB.x + AB.y;\n}\nstruct StandardSurface {\nvec4 albedo;\nvec3 position;\nvec3 normal;\nvec3 emissive;\nvec3 lightmap;\nfloat lightmap_test;\nfloat roughness;\nfloat metallic;\nfloat occlusion;\n};\nvec4 CCStandardShadingBase (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.0);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 L = normalize(-cc_mainLitDir.xyz);\nvec3 H = normalize(L + V);\nfloat NH = max(dot(N, H), 0.0);\nfloat NL = max(dot(N, L), 0.0);\nvec3 finalColor = NL * cc_mainLitColor.rgb * cc_mainLitColor.w;\nvec3 diffuseContrib = diffuse;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nif (s.lightmap_test > 0.0001) {\nfinalColor = s.lightmap.rgb;\n}\n#else\ndiffuseContrib /= 3.14159265359;\n#endif\nvec3 specularContrib = specular * CalcSpecular(s.roughness, NH, H, N);\nvec3 dirlightContrib = (diffuseContrib + specularContrib);\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (NL > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nvec3 projWorldPos = shadowPos.xyz + (1.0 - NL) * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetShadowFactorSoft2X(pos);\nelse if (pcf > 0.9) shadow = CCGetShadowFactorSoft(pos);\nelse shadow = CCGetShadowFactorHard(pos);\nshadow = mix(shadow, 1.0, cc_shadowNFLSInfo.w);\n}\n}\n#endif\ndirlightContrib *= shadow;\nfinalColor *= dirlightContrib;\nfloat fAmb = 0.5 - N.y * 0.5;\nvec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\nfinalColor += (ambDiff.rgb * diffuse) * s.occlusion;\n#if CC_USE_IBL\nvec3 R = normalize(reflect(-V, N));\nvec4 envmap = fragTextureLod(cc_environment, R, s.roughness * cc_ambientGround.w);\n#if CC_USE_IBL == 2\nvec3 env = unpackRGBE(envmap);\n#else\nvec3 env = SRGBToLinear(envmap.rgb);\n#endif\nfinalColor += env * cc_ambientSky.w * specular * s.occlusion;\n#endif\n#if CC_USE_HDR\ns.emissive *= cc_exposure.w;\n#endif\nfinalColor += s.emissive;\nreturn vec4(finalColor, s.albedo.a);\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nlayout(location = 1) in highp vec4 v_shadowPos;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nlayout(location = 9) in vec3 v_luv;\nlayout(set = 2, binding = 9) uniform sampler2D cc_lightingMap;\nvec3 UnpackLightingmap(vec4 color) {\nvec3 c;\nfloat e = 1.0 + color.a * (8.0 - 1.0);\nc.r = color.r * e;\nc.g = color.g * e;\nc.b = color.b * e;\nreturn c;\n}\n#endif\nlayout(location = 3) in vec3 v_position;\nlayout(location = 5) in vec2 v_uv;\nlayout(location = 6) in vec2 v_uv1;\nlayout(location = 4) in vec3 v_normal;\n#if USE_VERTEX_COLOR\nlayout(location = 2) in vec4 v_color;\n#endif\n#if USE_ALBEDO_MAP\nlayout(set = 1, binding = 1) uniform sampler2D albedoMap;\n#endif\n#if USE_NORMAL_MAP\nlayout(location = 7) in vec3 v_tangent;\nlayout(location = 8) in vec3 v_bitangent;\nlayout(set = 1, binding = 2) uniform sampler2D normalMap;\n#endif\n#if USE_PBR_MAP\nlayout(set = 1, binding = 3) uniform sampler2D pbrMap;\n#endif\n#if USE_METALLIC_ROUGHNESS_MAP\nlayout(set = 1, binding = 4) uniform sampler2D metallicRoughnessMap;\n#endif\n#if USE_OCCLUSION_MAP\nlayout(set = 1, binding = 5) uniform sampler2D occlusionMap;\n#endif\n#if USE_EMISSIVE_MAP\nlayout(set = 1, binding = 6) uniform sampler2D emissiveMap;\n#endif\n#if USE_ALPHA_TEST\n#endif\nvoid surf (out StandardSurface s) {\nvec4 baseColor = albedo;\n#if USE_VERTEX_COLOR\nbaseColor.rgb *= SRGBToLinear(v_color.rgb);\nbaseColor.a *= v_color.a;\n#endif\n#if USE_ALBEDO_MAP\nvec4 texColor = texture(albedoMap, ALBEDO_UV);\ntexColor.rgb = SRGBToLinear(texColor.rgb);\nbaseColor *= texColor;\n#endif\ns.albedo = baseColor;\ns.albedo.rgb *= albedoScaleAndCutoff.xyz;\n#if USE_ALPHA_TEST\nif (s.albedo.ALPHA_TEST_CHANNEL < albedoScaleAndCutoff.w) discard;\n#endif\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nvec4 lightColor = texture(cc_lightingMap, v_luv.xy);\ns.lightmap = UnpackLightingmap(lightColor);\ns.lightmap_test = v_luv.z;\n#endif\ns.normal = v_normal;\n#if USE_NORMAL_MAP\nvec3 nmmp = texture(normalMap, NORMAL_UV).xyz - vec3(0.5);\ns.normal =\n(nmmp.x * miscParams.x) * normalize(v_tangent) +\n(nmmp.y * miscParams.x) * normalize(v_bitangent) +\nnmmp.z * normalize(s.normal);\n#endif\ns.position = v_position;\nvec4 pbr = pbrParams;\n#if USE_PBR_MAP\nvec4 res = texture(pbrMap, PBR_UV);\npbr.x *= res.r;\npbr.y *= res.g;\npbr.z *= res.b;\npbr.w *= res.w;\n#endif\n#if USE_METALLIC_ROUGHNESS_MAP\nvec4 metallicRoughness = texture(metallicRoughnessMap, PBR_UV);\npbr.z *= metallicRoughness.b;\npbr.y *= metallicRoughness.g;\n#endif\n#if USE_OCCLUSION_MAP\npbr.x *= texture(occlusionMap, PBR_UV).r;\n#endif\ns.occlusion = clamp(pbr.x, 0.0, 0.96);\ns.roughness = clamp(pbr.y, 0.04, 1.0);\ns.metallic = pbr.z;\ns.emissive = emissive.rgb * emissiveScaleParam.xyz;\n#if USE_EMISSIVE_MAP\ns.emissive *= SRGBToLinear(texture(emissiveMap, EMISSIVE_UV).rgb);\n#endif\n}\n#if CC_FORWARD_ADD\n#if CC_PIPELINE_TYPE == 0\n# define LIGHTS_PER_PASS 1\n#else\n# define LIGHTS_PER_PASS 10\n#endif\nlayout(set = 2, binding = 1) uniform CCForwardLight {\nhighp vec4 cc_lightPos[LIGHTS_PER_PASS];\nvec4 cc_lightColor[LIGHTS_PER_PASS];\nvec4 cc_lightSizeRangeAngle[LIGHTS_PER_PASS];\nvec4 cc_lightDir[LIGHTS_PER_PASS];\n};\nfloat SmoothDistAtt (float distSqr, float invSqrAttRadius) {\nfloat factor = distSqr * invSqrAttRadius;\nfloat smoothFactor = clamp(1.0 - factor * factor, 0.0, 1.0);\nreturn smoothFactor * smoothFactor;\n}\nfloat GetDistAtt (float distSqr, float invSqrAttRadius) {\nfloat attenuation = 1.0 / max(distSqr, 0.01*0.01);\nattenuation *= SmoothDistAtt(distSqr , invSqrAttRadius);\nreturn attenuation;\n}\nfloat GetAngleAtt (vec3 L, vec3 litDir, float litAngleScale, float litAngleOffset) {\nfloat cd = dot(litDir, L);\nfloat attenuation = clamp(cd * litAngleScale + litAngleOffset, 0.0, 1.0);\nreturn (attenuation * attenuation);\n}\nvec4 CCStandardShadingAdditive (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 diffuseContrib = diffuse / 3.14159265359;\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.001);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 finalColor = vec3(0.0);\nint numLights = CC_PIPELINE_TYPE == 0 ? LIGHTS_PER_PASS : int(cc_lightDir[0].w);\nfor (int i = 0; i < LIGHTS_PER_PASS; i++) {\nif (i >= numLights) break;\nvec3 SLU = cc_lightPos[i].xyz - s.position;\nvec3 SL = normalize(SLU);\nvec3 SH = normalize(SL + V);\nfloat SNL = max(dot(N, SL), 0.001);\nfloat SNH = max(dot(N, SH), 0.0);\nfloat distSqr = dot(SLU, SLU);\nfloat litRadius = cc_lightSizeRangeAngle[i].x;\nfloat litRadiusSqr = litRadius * litRadius;\nfloat illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\nfloat attRadiusSqrInv = 1.0 / max(cc_lightSizeRangeAngle[i].y, 0.01);\nattRadiusSqrInv *= attRadiusSqrInv;\nfloat att = GetDistAtt(distSqr, attRadiusSqrInv);\nvec3 lspec = specular * CalcSpecular(s.roughness, SNH, SH, N);\nif (cc_lightPos[i].w > 0.0) {\nfloat cosInner = max(dot(-cc_lightDir[i].xyz, SL), 0.01);\nfloat cosOuter = cc_lightSizeRangeAngle[i].z;\nfloat litAngleScale = 1.0 / max(0.001, cosInner - cosOuter);\nfloat litAngleOffset = -cosOuter * litAngleScale;\natt *= GetAngleAtt(SL, -cc_lightDir[i].xyz, litAngleScale, litAngleOffset);\n}\nvec3 lightColor = cc_lightColor[i].rgb;\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (cc_lightPos[i].w > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nfloat cosAngle = clamp(1.0 - dot(N, normalize(cc_lightPos[i].xyz - s.position.xyz)), 0.0, 1.0);\nvec3 projWorldPos = shadowPos.xyz + cosAngle * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetSpotLightShadowFactorSoft2X(pos, s.position);\nelse if (pcf > 0.9) shadow = CCGetSpotLightShadowFactorSoft(pos, s.position);\nelse shadow = CCGetSpotLightShadowFactorHard(pos, s.position);\n}\n}\n#endif\nlightColor *= shadow;\nfinalColor += SNL * lightColor * cc_lightColor[i].w * illum * att * (diffuseContrib + lspec);\n}\nreturn vec4(finalColor, 0.0);\n}\nlayout(location = 0) out vec4 fragColorX;\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingAdditive(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\nfragColorX = CCFragOutput(color);\n}\n#elif (CC_PIPELINE_TYPE == 0 || CC_STANDARD_TRANSPARENT)\nlayout(location = 0) out vec4 fragColorX;\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingBase(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\nfragColorX = CCFragOutput(color);\n}\n#elif CC_PIPELINE_TYPE == 1\nlayout(location = 0) out vec4 fragColor0;\nlayout(location = 1) out vec4 fragColor1;\nlayout(location = 2) out vec4 fragColor2;\nlayout(location = 3) out vec4 fragColor3;\nvoid main () {\nStandardSurface s; surf(s);\nfragColor0 = s.albedo;\nfragColor1 = vec4(s.position, s.roughness);\nfragColor2 = vec4(s.normal, s.metallic);\nfragColor3 = vec4(s.emissive, s.occlusion);\n}\n#endif"},{vert:"#extension GL_EXT_shader_explicit_arithmetic_types_int32: require\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\n#if CC_USE_MORPH\nint getVertexId() {\nreturn gl_VertexIndex;\n}\nlayout(set = 2, binding = 4) uniform CCMorph {\nvec4 cc_displacementWeights[15];\nvec4 cc_displacementTextureInfo;\n};\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\nivec2 texSize = textureSize(tex, 0);\nreturn texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture(tex, x)),\ndecode32(texture(tex, y)),\ndecode32(texture(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nlayout(set = 2, binding = 6) uniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nlayout(set = 2, binding = 7) uniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nlayout(set = 2, binding = 8) uniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nlayout(location = 4) in u32vec4 a_joints;\nlayout(location = 5) in vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nlayout(location = 7) in highp vec4 a_jointAnimInfo;\n#endif\nlayout(set = 2, binding = 3) uniform CCSkinningTexture {\nhighp vec4 cc_jointTextureInfo;\n};\nlayout(set = 2, binding = 2) uniform CCSkinningAnimation {\nhighp vec4 cc_jointAnimInfo;\n};\nlayout(set = 2, binding = 5) uniform highp sampler2D cc_jointTexture;\n#else\nlayout(set = 2, binding = 3) uniform CCSkinning {\nhighp vec4 cc_joints[30 * 3];\n};\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\n#if USE_INSTANCING\nlayout(location = 8) in vec4 a_matWorld0;\nlayout(location = 9) in vec4 a_matWorld1;\nlayout(location = 10) in vec4 a_matWorld2;\n#if USE_LIGHTMAP\nlayout(location = 11) in vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nlayout(location = 12) in float a_dyn_batch_id;\nlayout(set = 2, binding = 0) uniform CCLocalBatched {\nhighp mat4 cc_matWorlds[10];\n};\n#else\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\nlayout(set = 1, binding = 0) uniform Constants {\nvec4 tilingOffset;\nvec4 albedo;\nvec4 albedoScaleAndCutoff;\nvec4 pbrParams;\nvec4 miscParams;\nvec4 emissive;\nvec4 emissiveScaleParam;\n};\nlayout(set = 0, binding = 2) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if HAS_SECOND_UV || USE_LIGHTMAP\nlayout(location = 13) in vec2 a_texCoord1;\n#endif\nlayout(location = 0) out vec2 v_uv;\nlayout(location = 1) out vec2 v_uv1;\nlayout(location = 2) out vec4 v_worldPos;\nlayout(location = 3) out float v_clip_depth;\nvec4 vert () {\nStandardVertInput In;\nIn.position = vec4(a_position, 1.0);\nIn.normal = a_normal;\nIn.tangent = a_tangent;\n#if CC_USE_MORPH\napplyMorph(In);\n#endif\n#if CC_USE_SKINNING\nCCSkin(In);\n#endif\nmat4 matWorld, matWorldIT;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\nmatWorldIT = matWorld;\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\nmatWorldIT = matWorld;\n#else\nmatWorld = cc_matWorld;\nmatWorldIT = cc_matWorldIT;\n#endif\nv_worldPos = matWorld * In.position;\nvec4 clipPos = cc_matLightViewProj * v_worldPos;\nv_uv = a_texCoord * tilingOffset.xy + tilingOffset.zw;\n#if HAS_SECOND_UV\nv_uv1 = a_texCoord1 * tilingOffset.xy + tilingOffset.zw;\n#endif\nv_clip_depth = clipPos.z / clipPos.w * 0.5 + 0.5;\nreturn clipPos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nlayout(set = 1, binding = 0) uniform Constants {\nvec4 tilingOffset;\nvec4 albedo;\nvec4 albedoScaleAndCutoff;\nvec4 pbrParams;\nvec4 miscParams;\nvec4 emissive;\nvec4 emissiveScaleParam;\n};\nvec4 packDepthToRGBA (float depth) {\nvec4 ret = vec4(1.0, 255.0, 65025.0, 160581375.0) * depth;\nret = fract(ret);\nret -= ret.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\nreturn ret;\n}\nlayout(set = 0, binding = 2) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\nlayout(location = 0) in vec2 v_uv;\nlayout(location = 1) in vec2 v_uv1;\nlayout(location = 2) in vec4 v_worldPos;\nlayout(location = 3) in float v_clip_depth;\n#if USE_ALBEDO_MAP\nlayout(set = 1, binding = 1) uniform sampler2D albedoMap;\n#endif\n#if USE_ALPHA_TEST\n#endif\nvec4 frag () {\nvec4 baseColor = albedo;\n#if USE_ALBEDO_MAP\nbaseColor *= texture(albedoMap, ALBEDO_UV);\n#endif\n#if USE_ALPHA_TEST\nif (baseColor.ALPHA_TEST_CHANNEL < albedoScaleAndCutoff.w) discard;\n#endif\nif(cc_shadowLPNNInfo.x > 0.000001 && cc_shadowLPNNInfo.x < 1.999999) {\nif (cc_shadowNFLSInfo.z > 0.000001) {\nvec4 viewStartPos = cc_matLightView * v_worldPos;\nfloat dist = length(viewStartPos.xyz);\nfloat linearDepth = cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\nreturn vec4(linearDepth, 1.0, 1.0, 1.0);\n}\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nreturn packDepthToRGBA(v_clip_depth);\n}\nreturn vec4(v_clip_depth, 1.0, 1.0, 1.0);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nlayout(location = 0) out float v_fog_factor;\nlayout(location = 1) out highp vec4 v_shadowPos;\nlayout(set = 0, binding = 2) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if CC_RECEIVE_SHADOW\nlayout(set = 0, binding = 3) uniform sampler2D cc_shadowMap;\nlayout(set = 0, binding = 5) uniform sampler2D cc_spotLightingMap;\n#endif\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 2) out highp vec3 v_position;\nlayout(location = 3) out mediump vec3 v_normal;\n#if USE_NORMALMAP\nlayout(location = 4) out mediump vec3 v_tangent;\nlayout(location = 5) out mediump vec3 v_binormal;\n#endif\nlayout(location = 6) out mediump vec2 uvw;\nlayout(location = 7) out mediump vec2 uv0;\nlayout(location = 8) out mediump vec2 uv1;\nlayout(location = 9) out mediump vec2 uv2;\nlayout(location = 10) out mediump vec2 uv3;\nlayout(location = 11) out mediump vec3 luv;\nlayout(location = 12) out mediump vec3 diffuse;\nlayout(set = 1, binding = 0) uniform TexCoords {\nvec4 UVScale;\nvec4 lightMapUVParam;\n};\nvoid main () {\nvec3 worldPos;\nworldPos.x = cc_matWorld[3][0] + a_position.x;\nworldPos.y = cc_matWorld[3][1] + a_position.y;\nworldPos.z = cc_matWorld[3][2] + a_position.z;\nvec4 pos = vec4(worldPos, 1.0);\npos = cc_matViewProj * pos;\nuvw = a_texCoord;\nuv0 = a_position.xz * UVScale.x;\nuv1 = a_position.xz * UVScale.y;\nuv2 = a_position.xz * UVScale.z;\nuv3 = a_position.xz * UVScale.w;\n#if USE_LIGHTMAP\nluv.xy = lightMapUVParam.xy + a_texCoord * lightMapUVParam.zw;\nluv.z = lightMapUVParam.z;\n#endif\nv_position = worldPos;\nv_normal = a_normal;\n#if CC_USE_FOG == 0\nv_fog_factor = LinearFog(vec4(worldPos, 1.0));\n#elif CC_USE_FOG == 1\nv_fog_factor = ExpFog(vec4(worldPos, 1.0));\n#elif CC_USE_FOG == 2\nv_fog_factor = ExpSquaredFog(vec4(worldPos, 1.0));\n#elif CC_USE_FOG == 3\nv_fog_factor = LayeredFog(vec4(worldPos, 1.0));\n#else\nv_fog_factor = 1.0;\n#endif\n#if USE_NORMALMAP\nv_tangent = vec3(1.0, 0.0, 0.0);\nv_binormal = vec3(0.0, 0.0, 1.0);\nv_binormal = cross(v_tangent, a_normal);\nv_tangent = cross(a_normal, v_binormal);\n#endif\nv_shadowPos = cc_matLightViewProj * vec4(worldPos, 1.0);\ngl_Position = pos;\n}",frag:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nlayout(set = 0, binding = 2) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if CC_RECEIVE_SHADOW\nlayout(set = 0, binding = 3) uniform sampler2D cc_shadowMap;\nlayout(set = 0, binding = 5) uniform sampler2D cc_spotLightingMap;\nfloat CCGetLinearDepth (vec3 worldPos) {\nvec4 viewStartPos = cc_matLightView * vec4(worldPos.xyz, 1.0);\nfloat dist = length(viewStartPos.xyz);\nreturn cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\n}\nfloat CCGetShadowFactorHard (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_shadowMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_shadowMap, clipPos.xy).x;\n}\nshadow = step(clipPos.z- cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetShadowFactorSoft (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetDepth = clipPos.z - cc_shadowWHPBInfo.w;\nvec2 oneTap = 1.0 / cc_shadowWHPBInfo.xy;\nvec2 clipPos_offset = clipPos.xy + oneTap;\nfloat block0, block1, block2, block3;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)).x);\n}\nfloat coefX   = mod(clipPos.x, oneTap.x) * cc_shadowWHPBInfo.x;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block2, block3, coefX);\nfloat coefY   = mod(clipPos.y, oneTap.y) * cc_shadowWHPBInfo.y;\nreturn mix(resultX, resultY, coefY);\n}\nfloat CCGetShadowFactorSoft2X (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat bias = cc_shadowWHPBInfo.w;\nfloat offsetDepth = clipPos.z - bias;\nvec2 mapSize = cc_shadowWHPBInfo.xy;\nvec2 oneTap = 1.0 / mapSize;\nfloat clipPos_offset_L = clipPos.x - oneTap.x;\nfloat clipPos_offset_R = clipPos.x + oneTap.x;\nfloat clipPos_offset_U = clipPos.y - oneTap.y;\nfloat clipPos_offset_D = clipPos.y + oneTap.y;\nfloat block0, block1, block2, block3, block4, block5, block6, block7, block8;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock4 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock5 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock6 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock7 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock8 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)).x);\nblock4 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock5 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)).x);\nblock6 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)).x);\nblock7 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)).x);\nblock8 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)).x);\n}\nfloat coefX = mod(clipPos.x, oneTap.x) * mapSize.x;\nfloat coefY = mod(clipPos.y, oneTap.y) * mapSize.y;\nfloat shadow = 0.0;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block3, block4, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block1, block2, coefX);\nresultY = mix(block4, block5, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block3, block4, coefX);\nresultY = mix(block6, block7, coefX);\nshadow += mix(resultX, resultY, coefY);\nresultX = mix(block4, block5, coefX);\nresultY = mix(block7, block8, coefX);\nshadow += mix(resultX, resultY, coefY);\nreturn shadow * 0.25;\n}\nfloat CCGetSpotLightShadowFactorHard (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_spotLightingMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_spotLightingMap, clipPos.xy).x;\n}\nshadow = step(depth - cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetSpotLightShadowFactorSoft (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n} else {\nfloat closestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\nreturn shadow / 5.0;\n}\nfloat CCGetSpotLightShadowFactorSoft2X (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n}\n}\n} else {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\n}\n}\nreturn shadow / 9.0;\n}\n#endif\n#if CC_USE_IBL\nlayout(set = 0, binding = 4) uniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec4 fragTextureLod (sampler2D tex, vec2 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\nvec4 fragTextureLod (samplerCube tex, vec3 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\n#endif\nfloat GGXMobile (float roughness, float NoH, vec3 H, vec3 N) {\nvec3 NxH = cross(N, H);\nfloat OneMinusNoHSqr = dot(NxH, NxH);\nfloat a = roughness * roughness;\nfloat n = NoH * a;\nfloat p = a / (OneMinusNoHSqr + n * n);\nreturn p * p;\n}\nfloat CalcSpecular (float roughness, float NoH, vec3 H, vec3 N) {\nreturn (roughness * 0.25 + 0.25) * GGXMobile(roughness, NoH, H, N);\n}\nvec3 BRDFApprox (vec3 specular, float roughness, float NoV) {\nconst vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);\nconst vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NoV)) * r.x + r.y;\nvec2 AB = vec2(-1.04, 1.04) * a004 + r.zw;\nAB.y *= clamp(50.0 * specular.g, 0.0, 1.0);\nreturn specular * AB.x + AB.y;\n}\nstruct StandardSurface {\nvec4 albedo;\nvec3 position;\nvec3 normal;\nvec3 emissive;\nvec3 lightmap;\nfloat lightmap_test;\nfloat roughness;\nfloat metallic;\nfloat occlusion;\n};\nvec4 CCStandardShadingBase (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.0);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 L = normalize(-cc_mainLitDir.xyz);\nvec3 H = normalize(L + V);\nfloat NH = max(dot(N, H), 0.0);\nfloat NL = max(dot(N, L), 0.0);\nvec3 finalColor = NL * cc_mainLitColor.rgb * cc_mainLitColor.w;\nvec3 diffuseContrib = diffuse;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nif (s.lightmap_test > 0.0001) {\nfinalColor = s.lightmap.rgb;\n}\n#else\ndiffuseContrib /= 3.14159265359;\n#endif\nvec3 specularContrib = specular * CalcSpecular(s.roughness, NH, H, N);\nvec3 dirlightContrib = (diffuseContrib + specularContrib);\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (NL > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nvec3 projWorldPos = shadowPos.xyz + (1.0 - NL) * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetShadowFactorSoft2X(pos);\nelse if (pcf > 0.9) shadow = CCGetShadowFactorSoft(pos);\nelse shadow = CCGetShadowFactorHard(pos);\nshadow = mix(shadow, 1.0, cc_shadowNFLSInfo.w);\n}\n}\n#endif\ndirlightContrib *= shadow;\nfinalColor *= dirlightContrib;\nfloat fAmb = 0.5 - N.y * 0.5;\nvec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\nfinalColor += (ambDiff.rgb * diffuse) * s.occlusion;\n#if CC_USE_IBL\nvec3 R = normalize(reflect(-V, N));\nvec4 envmap = fragTextureLod(cc_environment, R, s.roughness * cc_ambientGround.w);\n#if CC_USE_IBL == 2\nvec3 env = unpackRGBE(envmap);\n#else\nvec3 env = SRGBToLinear(envmap.rgb);\n#endif\nfinalColor += env * cc_ambientSky.w * specular * s.occlusion;\n#endif\n#if CC_USE_HDR\ns.emissive *= cc_exposure.w;\n#endif\nfinalColor += s.emissive;\nreturn vec4(finalColor, s.albedo.a);\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nlayout(location = 0) in float v_fog_factor;\nlayout(location = 1) in highp vec4 v_shadowPos;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nlayout(location = 13) in vec3 v_luv;\nlayout(set = 2, binding = 9) uniform sampler2D cc_lightingMap;\nvec3 UnpackLightingmap(vec4 color) {\nvec3 c;\nfloat e = 1.0 + color.a * (8.0 - 1.0);\nc.r = color.r * e;\nc.g = color.g * e;\nc.b = color.b * e;\nreturn c;\n}\n#endif\nlayout(location = 2) in highp vec3 v_position;\nlayout(location = 3) in mediump vec3 v_normal;\n#if USE_NORMALMAP\nlayout(location = 4) in mediump vec3 v_tangent;\nlayout(location = 5) in mediump vec3 v_binormal;\n#endif\nlayout(location = 6) in mediump vec2 uvw;\nlayout(location = 7) in mediump vec2 uv0;\nlayout(location = 8) in mediump vec2 uv1;\nlayout(location = 9) in mediump vec2 uv2;\nlayout(location = 10) in mediump vec2 uv3;\nlayout(location = 12) in mediump vec3 diffuse;\nlayout(location = 11) in mediump vec3 luv;\nlayout(set = 1, binding = 1) uniform PbrParams {\nvec4 metallic;\nvec4 roughness;\n};\nlayout(set = 1, binding = 2) uniform sampler2D weightMap;\nlayout(set = 1, binding = 3) uniform sampler2D detailMap0;\nlayout(set = 1, binding = 4) uniform sampler2D detailMap1;\nlayout(set = 1, binding = 5) uniform sampler2D detailMap2;\nlayout(set = 1, binding = 6) uniform sampler2D detailMap3;\nlayout(set = 1, binding = 7) uniform sampler2D normalMap0;\nlayout(set = 1, binding = 8) uniform sampler2D normalMap1;\nlayout(set = 1, binding = 9) uniform sampler2D normalMap2;\nlayout(set = 1, binding = 10) uniform sampler2D normalMap3;\nlayout(set = 1, binding = 11) uniform sampler2D lightMap;\nvoid surf (out StandardSurface s) {\n#if LAYERS > 1\nvec4 w = texture(weightMap, uvw);\n#endif\nvec4 baseColor = vec4(0, 0, 0, 0);\n#if LAYERS == 1\nbaseColor = texture(detailMap0, uv0);\n#elif LAYERS == 2\nbaseColor += texture(detailMap0, uv0) * w.r;\nbaseColor += texture(detailMap1, uv1) * w.g;\n#elif LAYERS == 3\nbaseColor += texture(detailMap0, uv0) * w.r;\nbaseColor += texture(detailMap1, uv1) * w.g;\nbaseColor += texture(detailMap2, uv2) * w.b;\n#elif LAYERS == 4\nbaseColor += texture(detailMap0, uv0) * w.r;\nbaseColor += texture(detailMap1, uv1) * w.g;\nbaseColor += texture(detailMap2, uv2) * w.b;\nbaseColor += texture(detailMap3, uv3) * w.a;\n#else\nbaseColor = texture(detailMap0, uv0);\n#endif\ns.position = v_position;\n#if USE_NORMALMAP\nvec4 baseNormal = vec4(0, 0, 0, 0);\n#if LAYERS == 1\nbaseNormal = texture(normalMap0, uv0);\n#elif LAYERS == 2\nbaseNormal += texture(normalMap0, uv0) * w.r;\nbaseNormal += texture(normalMap1, uv1) * w.g;\n#elif LAYERS == 3\nbaseNormal += texture(normalMap0, uv0) * w.r;\nbaseNormal += texture(normalMap1, uv1) * w.g;\nbaseNormal += texture(normalMap2, uv2) * w.b;\n#elif LAYERS == 4\nbaseNormal += texture(normalMap0, uv0) * w.r;\nbaseNormal += texture(normalMap1, uv1) * w.g;\nbaseNormal += texture(normalMap2, uv2) * w.b;\nbaseNormal += texture(normalMap3, uv3) * w.a;\n#else\nbaseNormal = texture(normalMap0, uv0);\n#endif\nvec3 nmmp = baseNormal.xyz - vec3(0.5);\ns.normal =\nnmmp.x * normalize(v_tangent) +\nnmmp.y * normalize(v_binormal) +\nnmmp.z * normalize(v_normal);\n#else\ns.normal = v_normal;\n#endif\ns.albedo = vec4(SRGBToLinear(baseColor.rgb), 1.0);\ns.occlusion = 1.0;\n#if USE_PBR\ns.roughness = 0.0;\n#if LAYERS == 1\ns.roughness = roughness.x;\n#elif LAYERS == 2\ns.roughness += roughness.x * w.r;\ns.roughness += roughness.y * w.g;\n#elif LAYERS == 3\ns.roughness += roughness.x * w.r;\ns.roughness += roughness.y * w.g;\ns.roughness += roughness.z * w.b;\n#elif LAYERS == 4\ns.roughness += roughness.x * w.r;\ns.roughness += roughness.y * w.g;\ns.roughness += roughness.z * w.b;\ns.roughness += roughness.w * w.a;\n#else\ns.roughness = 1.0;\n#endif\ns.metallic = 0.0;\n#if LAYERS == 1\ns.metallic = metallic.x;\n#elif LAYERS == 2\ns.metallic += metallic.x * w.r;\ns.metallic += metallic.y * w.g;\n#elif LAYERS == 3\ns.metallic += metallic.x * w.r;\ns.metallic += metallic.y * w.g;\ns.metallic += metallic.z * w.b;\n#elif LAYERS == 4\ns.metallic += metallic.x * w.r;\ns.metallic += metallic.y * w.g;\ns.metallic += metallic.z * w.b;\ns.metallic += metallic.w * w.a;\n#else\ns.metallic = 0.0;\n#endif\n#else\ns.roughness = 1.0;\ns.metallic = 0.0;\n#endif\ns.emissive = vec3(0.0, 0.0, 0.0);\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nvec4 lightColor = texture(lightMap, luv.xy);\ns.lightmap = UnpackLightingmap(lightColor);\ns.lightmap_test = luv.z;\n#endif\n}\n#if CC_FORWARD_ADD\n#if CC_PIPELINE_TYPE == 0\n# define LIGHTS_PER_PASS 1\n#else\n# define LIGHTS_PER_PASS 10\n#endif\nlayout(set = 2, binding = 1) uniform CCForwardLight {\nhighp vec4 cc_lightPos[LIGHTS_PER_PASS];\nvec4 cc_lightColor[LIGHTS_PER_PASS];\nvec4 cc_lightSizeRangeAngle[LIGHTS_PER_PASS];\nvec4 cc_lightDir[LIGHTS_PER_PASS];\n};\nfloat SmoothDistAtt (float distSqr, float invSqrAttRadius) {\nfloat factor = distSqr * invSqrAttRadius;\nfloat smoothFactor = clamp(1.0 - factor * factor, 0.0, 1.0);\nreturn smoothFactor * smoothFactor;\n}\nfloat GetDistAtt (float distSqr, float invSqrAttRadius) {\nfloat attenuation = 1.0 / max(distSqr, 0.01*0.01);\nattenuation *= SmoothDistAtt(distSqr , invSqrAttRadius);\nreturn attenuation;\n}\nfloat GetAngleAtt (vec3 L, vec3 litDir, float litAngleScale, float litAngleOffset) {\nfloat cd = dot(litDir, L);\nfloat attenuation = clamp(cd * litAngleScale + litAngleOffset, 0.0, 1.0);\nreturn (attenuation * attenuation);\n}\nvec4 CCStandardShadingAdditive (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 diffuseContrib = diffuse / 3.14159265359;\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.001);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 finalColor = vec3(0.0);\nint numLights = CC_PIPELINE_TYPE == 0 ? LIGHTS_PER_PASS : int(cc_lightDir[0].w);\nfor (int i = 0; i < LIGHTS_PER_PASS; i++) {\nif (i >= numLights) break;\nvec3 SLU = cc_lightPos[i].xyz - s.position;\nvec3 SL = normalize(SLU);\nvec3 SH = normalize(SL + V);\nfloat SNL = max(dot(N, SL), 0.001);\nfloat SNH = max(dot(N, SH), 0.0);\nfloat distSqr = dot(SLU, SLU);\nfloat litRadius = cc_lightSizeRangeAngle[i].x;\nfloat litRadiusSqr = litRadius * litRadius;\nfloat illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\nfloat attRadiusSqrInv = 1.0 / max(cc_lightSizeRangeAngle[i].y, 0.01);\nattRadiusSqrInv *= attRadiusSqrInv;\nfloat att = GetDistAtt(distSqr, attRadiusSqrInv);\nvec3 lspec = specular * CalcSpecular(s.roughness, SNH, SH, N);\nif (cc_lightPos[i].w > 0.0) {\nfloat cosInner = max(dot(-cc_lightDir[i].xyz, SL), 0.01);\nfloat cosOuter = cc_lightSizeRangeAngle[i].z;\nfloat litAngleScale = 1.0 / max(0.001, cosInner - cosOuter);\nfloat litAngleOffset = -cosOuter * litAngleScale;\natt *= GetAngleAtt(SL, -cc_lightDir[i].xyz, litAngleScale, litAngleOffset);\n}\nvec3 lightColor = cc_lightColor[i].rgb;\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (cc_lightPos[i].w > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nfloat cosAngle = clamp(1.0 - dot(N, normalize(cc_lightPos[i].xyz - s.position.xyz)), 0.0, 1.0);\nvec3 projWorldPos = shadowPos.xyz + cosAngle * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetSpotLightShadowFactorSoft2X(pos, s.position);\nelse if (pcf > 0.9) shadow = CCGetSpotLightShadowFactorSoft(pos, s.position);\nelse shadow = CCGetSpotLightShadowFactorHard(pos, s.position);\n}\n}\n#endif\nlightColor *= shadow;\nfinalColor += SNL * lightColor * cc_lightColor[i].w * illum * att * (diffuseContrib + lspec);\n}\nreturn vec4(finalColor, 0.0);\n}\nlayout(location = 0) out vec4 fragColorX;\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingAdditive(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\nfragColorX = CCFragOutput(color);\n}\n#elif (CC_PIPELINE_TYPE == 0 || CC_STANDARD_TRANSPARENT)\nlayout(location = 0) out vec4 fragColorX;\nvoid main () {\nStandardSurface s; surf(s);\nvec4 color = CCStandardShadingBase(s, v_shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, v_fog_factor), color.a);\nfragColorX = CCFragOutput(color);\n}\n#elif CC_PIPELINE_TYPE == 1\nlayout(location = 0) out vec4 fragColor0;\nlayout(location = 1) out vec4 fragColor1;\nlayout(location = 2) out vec4 fragColor2;\nlayout(location = 3) out vec4 fragColor3;\nvoid main () {\nStandardSurface s; surf(s);\nfragColor0 = s.albedo;\nfragColor1 = vec4(s.position, s.roughness);\nfragColor2 = vec4(s.normal, s.metallic);\nfragColor3 = vec4(s.emissive, s.occlusion);\n}\n#endif"},{vert:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\nlayout(set = 0, binding = 2) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 0) out vec2 v_clip_depth;\nvec4 vert () {\nvec4 worldPos;\nworldPos.x = cc_matWorld[3][0] + a_position.x;\nworldPos.y = cc_matWorld[3][1] + a_position.y;\nworldPos.z = cc_matWorld[3][2] + a_position.z;\nworldPos.w = 1.0;\nvec4 clipPos = cc_matLightViewProj * worldPos;\nv_clip_depth = clipPos.zw;\nreturn clipPos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nvec4 packDepthToRGBA (float depth) {\nvec4 ret = vec4(1.0, 255.0, 65025.0, 160581375.0) * depth;\nret = fract(ret);\nret -= ret.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\nreturn ret;\n}\nlayout(location = 0) in vec2 v_clip_depth;\nvec4 frag () {\nreturn packDepthToRGBA(v_clip_depth.x / v_clip_depth.y * 0.5 + 0.5);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"#extension GL_EXT_shader_explicit_arithmetic_types_int32: require\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\n#if CC_USE_MORPH\nint getVertexId() {\nreturn gl_VertexIndex;\n}\nlayout(set = 2, binding = 4) uniform CCMorph {\nvec4 cc_displacementWeights[15];\nvec4 cc_displacementTextureInfo;\n};\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\nivec2 texSize = textureSize(tex, 0);\nreturn texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture(tex, x)),\ndecode32(texture(tex, y)),\ndecode32(texture(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nlayout(set = 2, binding = 6) uniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nlayout(set = 2, binding = 7) uniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nlayout(set = 2, binding = 8) uniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nlayout(location = 4) in u32vec4 a_joints;\nlayout(location = 5) in vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nlayout(location = 7) in highp vec4 a_jointAnimInfo;\n#endif\nlayout(set = 2, binding = 3) uniform CCSkinningTexture {\nhighp vec4 cc_jointTextureInfo;\n};\nlayout(set = 2, binding = 2) uniform CCSkinningAnimation {\nhighp vec4 cc_jointAnimInfo;\n};\nlayout(set = 2, binding = 5) uniform highp sampler2D cc_jointTexture;\n#else\nlayout(set = 2, binding = 3) uniform CCSkinning {\nhighp vec4 cc_joints[30 * 3];\n};\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\n#if USE_INSTANCING\nlayout(location = 8) in vec4 a_matWorld0;\nlayout(location = 9) in vec4 a_matWorld1;\nlayout(location = 10) in vec4 a_matWorld2;\n#if USE_LIGHTMAP\nlayout(location = 11) in vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nlayout(location = 12) in float a_dyn_batch_id;\nlayout(set = 2, binding = 0) uniform CCLocalBatched {\nhighp mat4 cc_matWorlds[10];\n};\n#else\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nlayout(location = 0) out float v_fog_factor;\n#if USE_VERTEX_COLOR\nlayout(location = 13) in lowp vec4 a_color;\nlayout(location = 1) out lowp vec4 v_color;\n#endif\n#if USE_TEXTURE\nlayout(location = 2) out vec2 v_uv;\nlayout(set = 1, binding = 0) uniform TexCoords {\nvec4 tilingOffset;\n};\n#endif\nvec4 vert () {\nvec4 position;\nposition = vec4(a_position, 1.0);\n#if CC_USE_MORPH\napplyMorph(position);\n#endif\n#if CC_USE_SKINNING\nCCSkin(position);\n#endif\nmat4 matWorld;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\n#else\nmatWorld = cc_matWorld;\n#endif\n#if USE_TEXTURE\nv_uv = a_texCoord * tilingOffset.xy + tilingOffset.zw;\n#if SAMPLE_FROM_RT\nv_uv = cc_cameraPos.w > 1.0 ? vec2(v_uv.x, 1.0 - v_uv.y) : v_uv;\n#endif\n#endif\n#if USE_VERTEX_COLOR\nv_color = a_color;\n#endif\n#if CC_USE_FOG == 0\nv_fog_factor = LinearFog(matWorld * position);\n#elif CC_USE_FOG == 1\nv_fog_factor = ExpFog(matWorld * position);\n#elif CC_USE_FOG == 2\nv_fog_factor = ExpSquaredFog(matWorld * position);\n#elif CC_USE_FOG == 3\nv_fog_factor = LayeredFog(matWorld * position);\n#else\nv_fog_factor = 1.0;\n#endif\nreturn cc_matProj * (cc_matView * matWorld) * position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nlayout(location = 0) in float v_fog_factor;\n#if USE_ALPHA_TEST\n#endif\n#if USE_TEXTURE\nlayout(location = 2) in vec2 v_uv;\nlayout(set = 1, binding = 2) uniform sampler2D mainTexture;\n#endif\nlayout(set = 1, binding = 1) uniform Constant {\nvec4 mainColor;\nvec4 colorScaleAndCutoff;\n};\n#if USE_VERTEX_COLOR\nlayout(location = 1) in lowp vec4 v_color;\n#endif\nvec4 frag () {\nvec4 o = mainColor;\no.rgb *= colorScaleAndCutoff.xyz;\n#if USE_VERTEX_COLOR\no *= v_color;\n#endif\n#if USE_TEXTURE\no *= texture(mainTexture, v_uv);\n#endif\n#if USE_ALPHA_TEST\nif (o.ALPHA_TEST_CHANNEL < colorScaleAndCutoff.w) discard;\n#endif\no = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, o.rgb, v_fog_factor), o.a);\nreturn CCFragOutput(o);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision highp float;\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(location = 0) out vec2 v_uv;\nvoid main () {\nvec4 position;\nposition = vec4(a_position, 1.0);\nposition.xy = cc_cameraPos.w == 0.0 ? vec2(position.xy.x, -position.xy.y) : position.xy;\ngl_Position = vec4(position.x, position.y, 1.0, 1.0);\nv_uv = a_texCoord;\n}",frag:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nlayout(set = 0, binding = 2) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\n#if CC_RECEIVE_SHADOW\nlayout(set = 0, binding = 3) uniform sampler2D cc_shadowMap;\nlayout(set = 0, binding = 5) uniform sampler2D cc_spotLightingMap;\nfloat CCGetLinearDepth (vec3 worldPos) {\nvec4 viewStartPos = cc_matLightView * vec4(worldPos.xyz, 1.0);\nfloat dist = length(viewStartPos.xyz);\nreturn cc_shadowNFLSInfo.x + (-dist / (cc_shadowNFLSInfo.y - cc_shadowNFLSInfo.x));\n}\nfloat CCGetShadowFactorHard (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_shadowMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_shadowMap, clipPos.xy).x;\n}\nshadow = step(clipPos.z- cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetShadowFactorSoft (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetDepth = clipPos.z - cc_shadowWHPBInfo.w;\nvec2 oneTap = 1.0 / cc_shadowWHPBInfo.xy;\nvec2 clipPos_offset = clipPos.xy + oneTap;\nfloat block0, block1, block2, block3;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos.y)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset.y)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset.x, clipPos_offset.y)).x);\n}\nfloat coefX   = mod(clipPos.x, oneTap.x) * cc_shadowWHPBInfo.x;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block2, block3, coefX);\nfloat coefY   = mod(clipPos.y, oneTap.y) * cc_shadowWHPBInfo.y;\nreturn mix(resultX, resultY, coefY);\n}\nfloat CCGetShadowFactorSoft2X (vec4 shadowPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat bias = cc_shadowWHPBInfo.w;\nfloat offsetDepth = clipPos.z - bias;\nvec2 mapSize = cc_shadowWHPBInfo.xy;\nvec2 oneTap = 1.0 / mapSize;\nfloat clipPos_offset_L = clipPos.x - oneTap.x;\nfloat clipPos_offset_R = clipPos.x + oneTap.x;\nfloat clipPos_offset_U = clipPos.y - oneTap.y;\nfloat clipPos_offset_D = clipPos.y + oneTap.y;\nfloat block0, block1, block2, block3, block4, block5, block6, block7, block8;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nblock0 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock1 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock2 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock3 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock4 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock5 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock6 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock7 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\nblock8 = step(offsetDepth, dot(texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0)));\n} else {\nblock0 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_U)).x);\nblock1 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_U)).x);\nblock2 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_U)).x);\nblock3 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos.y)).x);\nblock4 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos.y)).x);\nblock5 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos.y)).x);\nblock6 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_L, clipPos_offset_D)).x);\nblock7 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos.x, clipPos_offset_D)).x);\nblock8 = step(offsetDepth, texture(cc_shadowMap, vec2(clipPos_offset_R, clipPos_offset_D)).x);\n}\nfloat coefX = mod(clipPos.x, oneTap.x) * mapSize.x;\nfloat coefY = mod(clipPos.y, oneTap.y) * mapSize.y;\nfloat shadow = 0.0;\nfloat resultX = mix(block0, block1, coefX);\nfloat resultY = mix(block3, block4, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block1, block2, coefX);\nresultY = mix(block4, block5, coefX);\nshadow += mix(resultX , resultY, coefY);\nresultX = mix(block3, block4, coefX);\nresultY = mix(block6, block7, coefX);\nshadow += mix(resultX, resultY, coefY);\nresultX = mix(block4, block5, coefX);\nresultY = mix(block7, block8, coefX);\nshadow += mix(resultX, resultY, coefY);\nreturn shadow * 0.25;\n}\nfloat CCGetSpotLightShadowFactorHard (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat shadow = 0.0;\nfloat closestDepth = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nif (cc_shadowLPNNInfo.y > 0.000001) {\nclosestDepth = dot(texture(cc_spotLightingMap, clipPos.xy), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\n} else {\nclosestDepth = texture(cc_spotLightingMap, clipPos.xy).x;\n}\nshadow = step(depth - cc_shadowWHPBInfo.w, closestDepth);\nreturn shadow;\n}\nfloat CCGetSpotLightShadowFactorSoft (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = dot(texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n} else {\nfloat closestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x - offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x, clipPos.y)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y - offsety)).x;\nshadow += step(offsetDepth, closestDepth);\nclosestDepth = texture(cc_spotLightingMap, vec2(clipPos.x + offsetx, clipPos.y + offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\nreturn shadow / 5.0;\n}\nfloat CCGetSpotLightShadowFactorSoft2X (vec4 shadowPos, vec3 worldPos) {\nvec3 clipPos = shadowPos.xyz / shadowPos.w * 0.5 + 0.5;\nif (clipPos.x < 0.0 || clipPos.x > 1.0 ||\nclipPos.y < 0.0 || clipPos.y > 1.0 ||\nclipPos.z <-1.0 || clipPos.z > 1.0) { return 1.0; }\nclipPos.xy = cc_cameraPos.w == 1.0 ? vec2(clipPos.xy.x, 1.0 - clipPos.xy.y) : clipPos.xy;\nfloat offsetx = 1.0 / cc_shadowWHPBInfo.x;\nfloat offsety = 1.0 / cc_shadowWHPBInfo.y;\nfloat shadow = 0.0;\nfloat depth = 0.0;\nif (cc_shadowNFLSInfo.z > 0.000001) {\ndepth = CCGetLinearDepth(worldPos);\n} else {\ndepth = clipPos.z;\n}\nfloat offsetDepth = depth - cc_shadowWHPBInfo.w;\nif (cc_shadowLPNNInfo.y > 0.000001) {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = dot(texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)), vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 160581375.0));\nshadow += step(offsetDepth, closestDepth);\n}\n}\n} else {\nfor (int i = -1; i <= 1; i++) {\nfor (int j = -1; j <= 1; j++) {\nfloat closestDepth = texture(cc_spotLightingMap, clipPos.xy + vec2(i, j) * vec2(offsetx, offsety)).x;\nshadow += step(offsetDepth, closestDepth);\n}\n}\n}\nreturn shadow / 9.0;\n}\n#endif\n#if CC_USE_IBL\nlayout(set = 0, binding = 4) uniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec4 fragTextureLod (sampler2D tex, vec2 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\nvec4 fragTextureLod (samplerCube tex, vec3 coord, float lod) {\nreturn textureLod(tex, coord, lod);\n}\n#endif\nfloat GGXMobile (float roughness, float NoH, vec3 H, vec3 N) {\nvec3 NxH = cross(N, H);\nfloat OneMinusNoHSqr = dot(NxH, NxH);\nfloat a = roughness * roughness;\nfloat n = NoH * a;\nfloat p = a / (OneMinusNoHSqr + n * n);\nreturn p * p;\n}\nfloat CalcSpecular (float roughness, float NoH, vec3 H, vec3 N) {\nreturn (roughness * 0.25 + 0.25) * GGXMobile(roughness, NoH, H, N);\n}\nvec3 BRDFApprox (vec3 specular, float roughness, float NoV) {\nconst vec4 c0 = vec4(-1.0, -0.0275, -0.572, 0.022);\nconst vec4 c1 = vec4(1.0, 0.0425, 1.04, -0.04);\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NoV)) * r.x + r.y;\nvec2 AB = vec2(-1.04, 1.04) * a004 + r.zw;\nAB.y *= clamp(50.0 * specular.g, 0.0, 1.0);\nreturn specular * AB.x + AB.y;\n}\nstruct StandardSurface {\nvec4 albedo;\nvec3 position;\nvec3 normal;\nvec3 emissive;\nvec3 lightmap;\nfloat lightmap_test;\nfloat roughness;\nfloat metallic;\nfloat occlusion;\n};\nvec4 CCStandardShadingBase (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.0);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 L = normalize(-cc_mainLitDir.xyz);\nvec3 H = normalize(L + V);\nfloat NH = max(dot(N, H), 0.0);\nfloat NL = max(dot(N, L), 0.0);\nvec3 finalColor = NL * cc_mainLitColor.rgb * cc_mainLitColor.w;\nvec3 diffuseContrib = diffuse;\n#if USE_LIGHTMAP && !USE_BATCHING && !CC_FORWARD_ADD\nif (s.lightmap_test > 0.0001) {\nfinalColor = s.lightmap.rgb;\n}\n#else\ndiffuseContrib /= 3.14159265359;\n#endif\nvec3 specularContrib = specular * CalcSpecular(s.roughness, NH, H, N);\nvec3 dirlightContrib = (diffuseContrib + specularContrib);\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (NL > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nvec3 projWorldPos = shadowPos.xyz + (1.0 - NL) * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetShadowFactorSoft2X(pos);\nelse if (pcf > 0.9) shadow = CCGetShadowFactorSoft(pos);\nelse shadow = CCGetShadowFactorHard(pos);\nshadow = mix(shadow, 1.0, cc_shadowNFLSInfo.w);\n}\n}\n#endif\ndirlightContrib *= shadow;\nfinalColor *= dirlightContrib;\nfloat fAmb = 0.5 - N.y * 0.5;\nvec3 ambDiff = mix(cc_ambientSky.rgb, cc_ambientGround.rgb, fAmb) * cc_ambientSky.w;\nfinalColor += (ambDiff.rgb * diffuse) * s.occlusion;\n#if CC_USE_IBL\nvec3 R = normalize(reflect(-V, N));\nvec4 envmap = fragTextureLod(cc_environment, R, s.roughness * cc_ambientGround.w);\n#if CC_USE_IBL == 2\nvec3 env = unpackRGBE(envmap);\n#else\nvec3 env = SRGBToLinear(envmap.rgb);\n#endif\nfinalColor += env * cc_ambientSky.w * specular * s.occlusion;\n#endif\n#if CC_USE_HDR\ns.emissive *= cc_exposure.w;\n#endif\nfinalColor += s.emissive;\nreturn vec4(finalColor, s.albedo.a);\n}\n#if CC_PIPELINE_TYPE == 0\n# define LIGHTS_PER_PASS 1\n#else\n# define LIGHTS_PER_PASS 10\n#endif\nlayout(set = 2, binding = 1) uniform CCForwardLight {\nhighp vec4 cc_lightPos[LIGHTS_PER_PASS];\nvec4 cc_lightColor[LIGHTS_PER_PASS];\nvec4 cc_lightSizeRangeAngle[LIGHTS_PER_PASS];\nvec4 cc_lightDir[LIGHTS_PER_PASS];\n};\nfloat SmoothDistAtt (float distSqr, float invSqrAttRadius) {\nfloat factor = distSqr * invSqrAttRadius;\nfloat smoothFactor = clamp(1.0 - factor * factor, 0.0, 1.0);\nreturn smoothFactor * smoothFactor;\n}\nfloat GetDistAtt (float distSqr, float invSqrAttRadius) {\nfloat attenuation = 1.0 / max(distSqr, 0.01*0.01);\nattenuation *= SmoothDistAtt(distSqr , invSqrAttRadius);\nreturn attenuation;\n}\nfloat GetAngleAtt (vec3 L, vec3 litDir, float litAngleScale, float litAngleOffset) {\nfloat cd = dot(litDir, L);\nfloat attenuation = clamp(cd * litAngleScale + litAngleOffset, 0.0, 1.0);\nreturn (attenuation * attenuation);\n}\nvec4 CCStandardShadingAdditive (StandardSurface s, vec4 shadowPos) {\nvec3 diffuse = s.albedo.rgb * (1.0 - s.metallic);\nvec3 specular = mix(vec3(0.04), s.albedo.rgb, s.metallic);\nvec3 diffuseContrib = diffuse / 3.14159265359;\nvec3 N = normalize(s.normal);\nvec3 V = normalize(cc_cameraPos.xyz - s.position);\nfloat NV = max(abs(dot(N, V)), 0.001);\nspecular = BRDFApprox(specular, s.roughness, NV);\nvec3 finalColor = vec3(0.0);\nint numLights = CC_PIPELINE_TYPE == 0 ? LIGHTS_PER_PASS : int(cc_lightDir[0].w);\nfor (int i = 0; i < LIGHTS_PER_PASS; i++) {\nif (i >= numLights) break;\nvec3 SLU = cc_lightPos[i].xyz - s.position;\nvec3 SL = normalize(SLU);\nvec3 SH = normalize(SL + V);\nfloat SNL = max(dot(N, SL), 0.001);\nfloat SNH = max(dot(N, SH), 0.0);\nfloat distSqr = dot(SLU, SLU);\nfloat litRadius = cc_lightSizeRangeAngle[i].x;\nfloat litRadiusSqr = litRadius * litRadius;\nfloat illum = 3.14159265359 * (litRadiusSqr / max(litRadiusSqr , distSqr));\nfloat attRadiusSqrInv = 1.0 / max(cc_lightSizeRangeAngle[i].y, 0.01);\nattRadiusSqrInv *= attRadiusSqrInv;\nfloat att = GetDistAtt(distSqr, attRadiusSqrInv);\nvec3 lspec = specular * CalcSpecular(s.roughness, SNH, SH, N);\nif (cc_lightPos[i].w > 0.0) {\nfloat cosInner = max(dot(-cc_lightDir[i].xyz, SL), 0.01);\nfloat cosOuter = cc_lightSizeRangeAngle[i].z;\nfloat litAngleScale = 1.0 / max(0.001, cosInner - cosOuter);\nfloat litAngleOffset = -cosOuter * litAngleScale;\natt *= GetAngleAtt(SL, -cc_lightDir[i].xyz, litAngleScale, litAngleOffset);\n}\nvec3 lightColor = cc_lightColor[i].rgb;\nfloat shadow = 1.0;\n#if CC_RECEIVE_SHADOW\nif (cc_lightPos[i].w > 0.0) {\n{\nfloat pcf = cc_shadowWHPBInfo.z;\nfloat cosAngle = clamp(1.0 - dot(N, normalize(cc_lightPos[i].xyz - s.position.xyz)), 0.0, 1.0);\nvec3 projWorldPos = shadowPos.xyz + cosAngle * cc_shadowLPNNInfo.z * N;\nvec4 pos = vec4(projWorldPos.xyz, shadowPos.w);\nif (pcf > 1.9) shadow = CCGetSpotLightShadowFactorSoft2X(pos, s.position);\nelse if (pcf > 0.9) shadow = CCGetSpotLightShadowFactorSoft(pos, s.position);\nelse shadow = CCGetSpotLightShadowFactorHard(pos, s.position);\n}\n}\n#endif\nlightColor *= shadow;\nfinalColor += SNL * lightColor * cc_lightColor[i].w * illum * att * (diffuseContrib + lspec);\n}\nreturn vec4(finalColor, 0.0);\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nfloat LinearFog(vec4 pos) {\nvec4 wPos = pos;\nfloat cam_dis = distance(cc_cameraPos, wPos);\nfloat fogStart = cc_fogBase.x;\nfloat fogEnd = cc_fogBase.y;\nreturn clamp((fogEnd - cam_dis) / (fogEnd - fogStart), 0., 1.);\n}\nfloat ExpFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * fogDensity);\nreturn f;\n}\nfloat ExpSquaredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat fogDensity = cc_fogBase.z;\nfloat cam_dis = distance(cc_cameraPos, wPos) / fogAtten * 4.;\nfloat f = exp(-cam_dis * cam_dis * fogDensity * fogDensity);\nreturn f;\n}\nfloat LayeredFog(vec4 pos) {\nvec4 wPos = pos;\nfloat fogAtten = cc_fogAdd.z;\nfloat _FogTop = cc_fogAdd.x;\nfloat _FogRange = cc_fogAdd.y;\nvec3 camWorldProj = cc_cameraPos.xyz;\ncamWorldProj.y = 0.;\nvec3 worldPosProj = wPos.xyz;\nworldPosProj.y = 0.;\nfloat fDeltaD = distance(worldPosProj, camWorldProj) / fogAtten * 2.0;\nfloat fDeltaY, fDensityIntegral;\nif (cc_cameraPos.y > _FogTop) {\nif (wPos.y < _FogTop) {\nfDeltaY = (_FogTop - wPos.y) / _FogRange * 2.0;\nfDensityIntegral = fDeltaY * fDeltaY * 0.5;\n} else {\nfDeltaY = 0.;\nfDensityIntegral = 0.;\n}\n} else {\nif (wPos.y < _FogTop) {\nfloat fDeltaA = (_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfloat fDeltaB = (_FogTop - wPos.y) / _FogRange * 2.;\nfDeltaY = abs(fDeltaA - fDeltaB);\nfDensityIntegral = abs((fDeltaA * fDeltaA * 0.5) - (fDeltaB * fDeltaB * 0.5));\n} else {\nfDeltaY = abs(_FogTop - cc_cameraPos.y) / _FogRange * 2.;\nfDensityIntegral = abs(fDeltaY * fDeltaY * 0.5);\n}\n}\nfloat fDensity;\nif (fDeltaY != 0.) {\nfDensity = (sqrt(1.0 + ((fDeltaD / fDeltaY) * (fDeltaD / fDeltaY)))) * fDensityIntegral;\n} else {\nfDensity = 0.;\n}\nfloat f = exp(-fDensity);\nreturn f;\n}\nlayout(location = 0) in vec2 v_uv;\nlayout (set = 0, binding = 6) uniform sampler2D cc_gbuffer_albedoMap;\nlayout (set = 0, binding = 7) uniform sampler2D cc_gbuffer_positionMap;\nlayout (set = 0, binding = 8) uniform sampler2D cc_gbuffer_normalMap;\nlayout (set = 0, binding = 9) uniform sampler2D cc_gbuffer_emissiveMap;\nlayout(location = 0) out vec4 fragColor;\nvoid main () {\nStandardSurface s;\nvec4 albedoMap = texture(cc_gbuffer_albedoMap,v_uv);\nvec4 positionMap = texture(cc_gbuffer_positionMap,v_uv);\nvec4 normalMap = texture(cc_gbuffer_normalMap,v_uv);\nvec4 emissiveMap = texture(cc_gbuffer_emissiveMap,v_uv);\ns.albedo = albedoMap;\ns.position = positionMap.xyz;\ns.roughness = positionMap.w;\ns.normal = normalMap.xyz;\ns.metallic = normalMap.w;\ns.emissive = emissiveMap.xyz;\ns.occlusion = emissiveMap.w;\nfloat fogFactor;\n#if CC_USE_FOG == 0\nfogFactor = LinearFog(vec4(s.position, 1));\n#elif CC_USE_FOG == 1\nfogFactor = ExpFog(vec4(s.position, 1));\n#elif CC_USE_FOG == 2\nfogFactor = ExpSquaredFog(vec4(s.position, 1));\n#elif CC_USE_FOG == 3\nfogFactor = LayeredFog(vec4(s.position, 1));\n#else\nfogFactor = 1.0;\n#endif\nvec4 shadowPos;\nshadowPos = cc_matLightViewProj * vec4(s.position, 1);\nvec4 color = CCStandardShadingBase(s, shadowPos) +\nCCStandardShadingAdditive(s, shadowPos);\ncolor = vec4(mix(CC_FORWARD_ADD > 0 ? vec3(0.0) : cc_fogColor.rgb, color.rgb, fogFactor), color.a);\nfragColor = CCFragOutput(color);\n}"}],[{vert:"#extension GL_EXT_shader_explicit_arithmetic_types_int32: require\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\n#if CC_USE_MORPH\nint getVertexId() {\nreturn gl_VertexIndex;\n}\nlayout(set = 2, binding = 4) uniform CCMorph {\nvec4 cc_displacementWeights[15];\nvec4 cc_displacementTextureInfo;\n};\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\nivec2 texSize = textureSize(tex, 0);\nreturn texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture(tex, x)),\ndecode32(texture(tex, y)),\ndecode32(texture(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nlayout(set = 2, binding = 6) uniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nlayout(set = 2, binding = 7) uniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nlayout(set = 2, binding = 8) uniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nlayout(location = 4) in u32vec4 a_joints;\nlayout(location = 5) in vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nlayout(location = 7) in highp vec4 a_jointAnimInfo;\n#endif\nlayout(set = 2, binding = 3) uniform CCSkinningTexture {\nhighp vec4 cc_jointTextureInfo;\n};\nlayout(set = 2, binding = 2) uniform CCSkinningAnimation {\nhighp vec4 cc_jointAnimInfo;\n};\nlayout(set = 2, binding = 5) uniform highp sampler2D cc_jointTexture;\n#else\nlayout(set = 2, binding = 3) uniform CCSkinning {\nhighp vec4 cc_joints[30 * 3];\n};\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\n#if USE_INSTANCING\nlayout(location = 8) in vec4 a_matWorld0;\nlayout(location = 9) in vec4 a_matWorld1;\nlayout(location = 10) in vec4 a_matWorld2;\n#if USE_LIGHTMAP\nlayout(location = 11) in vec4 a_lightingMapUVParam;\n#endif\n#elif USE_BATCHING\nlayout(location = 12) in float a_dyn_batch_id;\nlayout(set = 2, binding = 0) uniform CCLocalBatched {\nhighp mat4 cc_matWorlds[10];\n};\n#else\nlayout(set = 2, binding = 0) uniform CCLocal {\nhighp mat4 cc_matWorld;\nhighp mat4 cc_matWorldIT;\nhighp vec4 cc_lightingMapUVParam;\n};\n#endif\nlayout(set = 0, binding = 2) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\nvec4 vert () {\nvec4 position;\nposition = vec4(a_position, 1.0);\n#if CC_USE_MORPH\napplyMorph(position);\n#endif\n#if CC_USE_SKINNING\nCCSkin(position);\n#endif\nmat4 matWorld;\n#if USE_INSTANCING\nmatWorld = mat4(\nvec4(a_matWorld0.xyz, 0.0),\nvec4(a_matWorld1.xyz, 0.0),\nvec4(a_matWorld2.xyz, 0.0),\nvec4(a_matWorld0.w, a_matWorld1.w, a_matWorld2.w, 1.0)\n);\n#elif USE_BATCHING\nmatWorld = cc_matWorlds[int(a_dyn_batch_id)];\n#else\nmatWorld = cc_matWorld;\n#endif\nposition = cc_matProj * (cc_matView * cc_matLightPlaneProj * matWorld) * position;\nposition.z -= 0.0001;\nreturn position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nlayout(set = 0, binding = 2) uniform CCShadow {\nhighp mat4 cc_matLightPlaneProj;\nhighp mat4 cc_matLightView;\nhighp mat4 cc_matLightViewProj;\nlowp  vec4 cc_shadowNFLSInfo;\nlowp  vec4 cc_shadowWHPBInfo;\nlowp  vec4 cc_shadowLPNNInfo;\nlowp  vec4 cc_shadowColor;\n};\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nvec4 frag () {\nreturn CCFragOutput(cc_shadowColor);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"#extension GL_EXT_shader_explicit_arithmetic_types_int32: require\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\nrgba = rgba * 255.0;\nhighp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\nhighp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\nhighp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\nreturn Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\n#if CC_USE_MORPH\nint getVertexId() {\nreturn gl_VertexIndex;\n}\nlayout(set = 2, binding = 4) uniform CCMorph {\nvec4 cc_displacementWeights[15];\nvec4 cc_displacementTextureInfo;\n};\nvec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\nfloat pixelIndexF = float(pixelIndex);\nfloat x = mod(pixelIndexF, textureResolution.x);\nfloat y = floor(pixelIndexF / textureResolution.x);\nreturn vec2(x, y);\n}\nvec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\nreturn (vec2(location.x, location.y) + .5) / textureResolution;\n}\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\nivec2 texSize = textureSize(tex, 0);\nreturn texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n}\n#else\nvec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\nint pixelIndex = elementIndex * 4;\nvec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\nvec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\nvec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\nreturn vec4(\ndecode32(texture(tex, x)),\ndecode32(texture(tex, y)),\ndecode32(texture(tex, z)),\n1.0\n);\n}\n#endif\nfloat getDisplacementWeight(int index) {\nint quot = index / 4;\nint remainder = index - quot * 4;\nif (remainder == 0) {\nreturn cc_displacementWeights[quot].x;\n} else if (remainder == 1) {\nreturn cc_displacementWeights[quot].y;\n} else if (remainder == 2) {\nreturn cc_displacementWeights[quot].z;\n} else {\nreturn cc_displacementWeights[quot].w;\n}\n}\nvec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n#if CC_MORPH_PRECOMPUTED\nreturn fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n#else\nvec3 result = vec3(0, 0, 0);\nint nVertices = int(cc_displacementTextureInfo.z);\nfor (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\nresult += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n}\nreturn result;\n#endif\n}\n#if CC_MORPH_TARGET_HAS_POSITION\nlayout(set = 2, binding = 6) uniform sampler2D cc_PositionDisplacements;\nvec3 getPositionDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nlayout(set = 2, binding = 7) uniform sampler2D cc_NormalDisplacements;\nvec3 getNormalDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n}\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nlayout(set = 2, binding = 8) uniform sampler2D cc_TangentDisplacements;\nvec3 getTangentDisplacement(int vertexId) {\nreturn getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n}\n#endif\nvoid applyMorph (inout StandardVertInput attr) {\nint vertexId = getVertexId();\n#if CC_MORPH_TARGET_HAS_POSITION\nattr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_NORMAL\nattr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n#endif\n#if CC_MORPH_TARGET_HAS_TANGENT\nattr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n#endif\n}\nvoid applyMorph (inout vec4 position) {\n#if CC_MORPH_TARGET_HAS_POSITION\nposition.xyz = position.xyz + getPositionDisplacement(getVertexId());\n#endif\n}\n#endif\n#if CC_USE_SKINNING\nlayout(location = 4) in u32vec4 a_joints;\nlayout(location = 5) in vec4 a_weights;\n#if CC_USE_BAKED_ANIMATION\n#if USE_INSTANCING\nlayout(location = 7) in highp vec4 a_jointAnimInfo;\n#endif\nlayout(set = 2, binding = 3) uniform CCSkinningTexture {\nhighp vec4 cc_jointTextureInfo;\n};\nlayout(set = 2, binding = 2) uniform CCSkinningAnimation {\nhighp vec4 cc_jointAnimInfo;\n};\nlayout(set = 2, binding = 5) uniform highp sampler2D cc_jointTexture;\n#else\nlayout(set = 2, binding = 3) uniform CCSkinning {\nhighp vec4 cc_joints[30 * 3];\n};\n#endif\n#if CC_USE_BAKED_ANIMATION\n#if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\nvec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\nvec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#else\nmat4 getJointMatrix (float i) {\n#if USE_INSTANCING\nhighp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n#else\nhighp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n#endif\nhighp float invSize = cc_jointTextureInfo.w;\nhighp float y = floor(j * invSize);\nhighp float x = floor(j - y * cc_jointTextureInfo.x);\ny = (y + 0.5) * invSize;\nvec4 v1 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n);\nvec4 v2 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n);\nvec4 v3 = vec4(\ndecode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\ndecode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n);\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\n#else\nmat4 getJointMatrix (float i) {\nint idx = int(i);\nvec4 v1 = cc_joints[idx * 3];\nvec4 v2 = cc_joints[idx * 3 + 1];\nvec4 v3 = cc_joints[idx * 3 + 2];\nreturn mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n}\n#endif\nmat4 skinMatrix () {\nvec4 joints = vec4(a_joints);\nreturn getJointMatrix(joints.x) * a_weights.x\n+ getJointMatrix(joints.y) * a_weights.y\n+ getJointMatrix(joints.z) * a_weights.z\n+ getJointMatrix(joints.w) * a_weights.w;\n}\nvoid CCSkin (inout vec4 position) {\nmat4 m = skinMatrix();\nposition = m * position;\n}\nvoid CCSkin (inout StandardVertInput attr) {\nmat4 m = skinMatrix();\nattr.position = m * attr.position;\nattr.normal = (m * vec4(attr.normal, 0.0)).xyz;\nattr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n}\n#endif\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(location = 0) out vec2 v_uv;\nvoid main () {\nStandardVertInput In;\nIn.position = vec4(a_position, 1.0);\nIn.normal = a_normal;\nIn.tangent = a_tangent;\n#if CC_USE_MORPH\napplyMorph(In);\n#endif\n#if CC_USE_SKINNING\nCCSkin(In);\n#endif\nIn.position.xy = cc_cameraPos.w == 0.0 ? vec2(In.position.xy.x, -In.position.xy.y) : In.position.xy;\ngl_Position = In.position;\ngl_Position.y = gl_Position.y;\nv_uv = a_texCoord;\n}",frag:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(location = 0) in vec2 v_uv;\nlayout (set = 0, binding = 10) uniform sampler2D cc_lighting_resultMap;\nlayout(location = 0) out vec4 fragColor;\nvoid texcoords(vec2 fragCoord, vec2 resolution,\nout vec2 v_rgbNW, out vec2 v_rgbNE,\nout vec2 v_rgbSW, out vec2 v_rgbSE,\nout vec2 v_rgbM) {\nvec2 inverseVP = 1.0 / resolution.xy;\nv_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\nv_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\nv_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\nv_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\nv_rgbM = vec2(fragCoord * inverseVP);\n}\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\nvec2 v_rgbNW, vec2 v_rgbNE,\nvec2 v_rgbSW, vec2 v_rgbSE,\nvec2 v_rgbM) {\nvec4 color;\nmediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\nvec3 rgbNW = texture(tex, v_rgbNW).xyz;\nvec3 rgbNE = texture(tex, v_rgbNE).xyz;\nvec3 rgbSW = texture(tex, v_rgbSW).xyz;\nvec3 rgbSE = texture(tex, v_rgbSE).xyz;\nvec4 texColor = texture(tex, v_rgbM);\nvec3 rgbM  = texColor.xyz;\nvec3 luma = vec3(0.299, 0.587, 0.114);\nfloat lumaNW = dot(rgbNW, luma);\nfloat lumaNE = dot(rgbNE, luma);\nfloat lumaSW = dot(rgbSW, luma);\nfloat lumaSE = dot(rgbSE, luma);\nfloat lumaM  = dot(rgbM,  luma);\nfloat lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\nfloat lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\nmediump vec2 dir;\ndir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\ndir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\nfloat dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n(0.25 * (1.0 / 8.0)), (1.0/ 128.0));\nfloat rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\ndir = min(vec2(8.0, 8.0),\nmax(vec2(-8.0, -8.0),\ndir * rcpDirMin)) * inverseVP;\nvec3 rgbA = 0.5 * (\ntexture(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\ntexture(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\nvec3 rgbB = rgbA * 0.5 + 0.25 * (\ntexture(tex, fragCoord * inverseVP + dir * -0.5).xyz +\ntexture(tex, fragCoord * inverseVP + dir * 0.5).xyz);\nfloat lumaB = dot(rgbB, luma);\nif ((lumaB < lumaMin) || (lumaB > lumaMax))\ncolor = vec4(rgbA, texColor.a);\nelse\ncolor = vec4(rgbB, texColor.a);\nreturn color;\n}\nvoid main () {\nmediump vec2 v_rgbNW;\nmediump vec2 v_rgbNE;\nmediump vec2 v_rgbSW;\nmediump vec2 v_rgbSE;\nmediump vec2 v_rgbM;\nvec2 resolution = cc_screenSize.xy;\nvec2 fragCoord = v_uv * resolution;\ntexcoords(fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\nfragColor = fxaa(cc_lighting_resultMap, fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}"}],[{vert:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nstruct StandardVertInput {\nhighp vec4 position;\nvec3 normal;\nvec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\nlayout(location = 0) out mediump vec4 viewDir;\nvec4 vert () {\nviewDir = vec4(a_position, 1.0);\nmat4 matViewRotOnly = mat4(mat3(cc_matView));\nmat4 matProj = cc_matProj;\nif (matProj[3].w > 0.0) {\nvec2 scale = vec2(48.0, 24.0);\nmatProj[0].xy *= scale;\nmatProj[1].xy *= scale;\nmatProj[2].zw = vec2(-1.0);\nmatProj[3].zw = vec2(0.0);\n}\nvec4 pos = matProj * matViewRotOnly * viewDir;\npos.z = 0.99999 * pos.w;\nreturn pos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(set = 0, binding = 4) uniform samplerCube cc_environment;\nvec3 unpackRGBE (vec4 rgbe) {\nreturn rgbe.rgb * pow(1.1, rgbe.a * 255.0 - 128.0);\n}\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec3 ACESToneMap (vec3 color) {\ncolor = min(color, vec3(8.0));\nconst float A = 2.51;\nconst float B = 0.03;\nconst float C = 2.43;\nconst float D = 0.59;\nconst float E = 0.14;\nreturn (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nvec4 CCFragOutput (vec4 color) {\n#if !CC_USE_HDR\ncolor.rgb = sqrt(ACESToneMap(color.rgb));\n#endif\nreturn color;\n}\nlayout(location = 0) in mediump vec4 viewDir;\nvec4 frag () {\n#if USE_RGBE_CUBEMAP\nvec3 c = unpackRGBE(texture(cc_environment, viewDir.xyz));\n#else\nvec3 c = SRGBToLinear(texture(cc_environment, viewDir.xyz).rgb);\n#endif\nreturn CCFragOutput(vec4(c * cc_ambientSky.w, 1.0));\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec4 a_color;\nlayout(location = 0) out vec2 v_uv;\nlayout(set = 1, binding = 0) uniform Constants {\nvec4 offset;\n};\nlayout(set = 1, binding = 1) uniform PerFrameInfo {\nvec4 digits[8 * 10 / 4];\n};\nfloat getComponent(vec4 v, float i) {\nif (i < 1.0) { return v.x; }\nelse if (i < 2.0) { return v.y; }\nelse if (i < 3.0) { return v.z; }\nelse { return v.w; }\n}\nvec4 vert () {\nvec4 position = cc_matViewProj * vec4(a_position, 1.0);\nposition.xy += offset.xy;\nv_uv = a_color.xy;\nif (a_color.z >= 0.0) {\nfloat n = getComponent(digits[int(a_color.z)], a_color.w);\nv_uv += vec2(offset.z * n, 0.0);\n}\nreturn position;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\nhighp   vec4 cc_time;\nmediump vec4 cc_screenSize;\nmediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\nhighp   mat4 cc_matView;\nhighp   mat4 cc_matViewInv;\nhighp   mat4 cc_matProj;\nhighp   mat4 cc_matProjInv;\nhighp   mat4 cc_matViewProj;\nhighp   mat4 cc_matViewProjInv;\nhighp   vec4 cc_cameraPos;\nmediump vec4 cc_screenScale;\nmediump vec4 cc_exposure;\nmediump vec4 cc_mainLitDir;\nmediump vec4 cc_mainLitColor;\nmediump vec4 cc_ambientSky;\nmediump vec4 cc_ambientGround;\nmediump vec4 cc_fogColor;\nmediump vec4 cc_fogBase;\nmediump vec4 cc_fogAdd;\n};\nvec3 SRGBToLinear (vec3 gamma) {\nreturn gamma * gamma;\n}\nvec4 CCFragOutput (vec4 color) {\n#if CC_USE_HDR\ncolor.rgb = mix(color.rgb, SRGBToLinear(color.rgb) * cc_exposure.w, vec3(cc_exposure.z));\n#endif\nreturn color;\n}\nlayout(location = 0) in vec2 v_uv;\nlayout(set = 1, binding = 2) uniform sampler2D mainTexture;\nvec4 frag () {\nreturn CCFragOutput(texture(mainTexture, v_uv));\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}],[{vert:"\nprecision mediump float;\nlayout(location = 0) in vec2 a_position;\nlayout(location = 1) in vec2 a_texCoord;\nlayout(location = 0) out vec2 v_uv;\nlayout(location = 1) out float v_percent;\nlayout(set = 1, binding = 0) uniform Constant {\nvec4 u_buffer0;\nvec4 u_buffer1;\nmat4 u_projection;\n};\nvec4 vert () {\nvec2 worldPos = a_position * u_buffer1.xy + u_buffer1.zw;\nvec2 clipSpace = worldPos / u_buffer0.xy * 2.0 - 1.0;\nvec4 screenPos = u_projection * vec4(clipSpace, 0.0, 1.0);\nv_uv = a_texCoord;\nv_percent = u_buffer0.z;\nreturn screenPos;\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision mediump float;\nlayout(location = 0) in vec2 v_uv;\nlayout(location = 1) in float v_percent;\nlayout(set = 1, binding = 1) uniform sampler2D mainTexture;\nvec4 frag () {\nvec4 color = texture(mainTexture, v_uv);\nfloat precent = clamp(v_percent, 0.0, 1.0);\ncolor.xyz *= precent;\nreturn color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"}]]},Yd=e("c3",c.builtinResMgr=new class{constructor(){this._device=null,this._resources={}}initBuiltinRes(e){this._device=e;const t=this._resources,n=document.createElement("canvas"),i=n.getContext("2d"),o=new Rm(n),a=n.width=n.height=2;i.fillStyle="#000",i.fillRect(0,0,a,a);const r=new ud;r._uuid="black-texture",r.image=o,t[r._uuid]=r,i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,a,a);const s=new ud;s._uuid="empty-texture",s.image=o,t[s._uuid]=s;const l=new yd;l._uuid="black-cube-texture",l.setMipFilter(yd.Filter.NEAREST),l.image={front:new Rm(n),back:new Rm(n),left:new Rm(n),right:new Rm(n),top:new Rm(n),bottom:new Rm(n)},t[l._uuid]=l,i.fillStyle="#777",i.fillRect(0,0,a,a);const _=new ud;_._uuid="grey-texture",_.image=o,t[_._uuid]=_,i.fillStyle="#fff",i.fillRect(0,0,a,a);const u=new ud;u._uuid="white-texture",u.image=o,t[u._uuid]=u;const f=new yd;f._uuid="white-cube-texture",f.setMipFilter(yd.Filter.NEAREST),f.image={front:new Rm(n),back:new Rm(n),left:new Rm(n),right:new Rm(n),top:new Rm(n),bottom:new Rm(n)},t[f._uuid]=f,i.fillStyle="#7f7fff",i.fillRect(0,0,a,a);const h=new ud;h._uuid="normal-texture",h.image=o,t[h._uuid]=h,n.width=n.height=16,i.fillStyle="#ddd",i.fillRect(0,0,16,16),i.fillStyle="#555",i.fillRect(0,0,8,8),i.fillStyle="#555",i.fillRect(8,8,8,8);const p=new ud;p._uuid="default-texture",p.image=o,t[p._uuid]=p;const m=new yd;if(m.setMipFilter(yd.Filter.NEAREST),m._uuid="default-cube-texture",m.image={front:new Rm(n),back:new Rm(n),left:new Rm(n),right:new Rm(n),top:new Rm(n),bottom:new Rm(n)},t[m._uuid]=m,c.SpriteFrame){const e=new c.SpriteFrame,n=o,i=new ud;i.image=n,e.texture=i,e._uuid="default-spriteframe",t[e._uuid]=e}const d=Hd(e);if(!d)return Promise.reject(Error("Failed to initialize builtin shaders: unknown device."));const v=qd[d];return v?Promise.resolve().then((()=>{xd.forEach(((e,t)=>{const n=Object.assign(new c.EffectAsset,e);n.shaders.forEach(((e,n)=>{const i=v[t][n];i&&(e[d]=i)})),n.hideInEditor=!0,n.onLoaded()})),this._initMaterials()})):Promise.reject(Error(`Current device is requiring builtin shaders of version ${d} but shaders of that version are not assembled in this build.`))}get(e){return this._resources[e]}_initMaterials(){const e=this._resources,t=[],n=new c.Material;n._uuid="standard-material",n.initialize({effectName:"standard"}),e[n._uuid]=n,t.push(n);const i=new c.Material;i._uuid="missing-effect-material",i.initialize({effectName:"unlit",defines:{USE_COLOR:!0}}),i.setProperty("mainColor",c.color("#ffff00")),e[i._uuid]=i,t.push(i);const o=new c.Material;o._uuid="missing-material",o.initialize({effectName:"unlit",defines:{USE_COLOR:!0}}),o.setProperty("mainColor",c.color("#ff00ff")),e[o._uuid]=o,t.push(o);const a=new c.Material;a._uuid="default-clear-stencil",a.initialize({defines:{USE_TEXTURE:!1},effectName:"clear-stencil"}),e[a._uuid]=a,t.push(a);const r=new c.Material;r._uuid="ui-base-material",r.initialize({defines:{USE_TEXTURE:!1},effectName:"sprite"}),e[r._uuid]=r,t.push(r);const s=new c.Material;s._uuid="ui-sprite-material",s.initialize({defines:{USE_TEXTURE:!0,CC_USE_EMBEDDED_ALPHA:!1,IS_GRAY:!1},effectName:"sprite"}),e[s._uuid]=s,t.push(s);const l=new c.Material;l._uuid="ui-alpha-test-material",l.initialize({defines:{USE_TEXTURE:!0,USE_ALPHA_TEST:!0,CC_USE_EMBEDDED_ALPHA:!1,IS_GRAY:!1},effectName:"sprite"}),e[l._uuid]=l,t.push(l);const _=new c.Material;_._uuid="ui-sprite-gray-material",_.initialize({defines:{USE_TEXTURE:!0,CC_USE_EMBEDDED_ALPHA:!1,IS_GRAY:!0},effectName:"sprite"}),e[_._uuid]=_,t.push(_);const u=new c.Material;u._uuid="ui-sprite-alpha-sep-material",u.initialize({defines:{USE_TEXTURE:!0,CC_USE_EMBEDDED_ALPHA:!0,IS_GRAY:!1},effectName:"sprite"}),e[u._uuid]=u,t.push(u);const f=new c.Material;f._uuid="ui-sprite-gray-alpha-sep-material",f.initialize({defines:{USE_TEXTURE:!0,CC_USE_EMBEDDED_ALPHA:!0,IS_GRAY:!0},effectName:"sprite"}),e[f._uuid]=f,t.push(f);const h=new c.Material;h._uuid="ui-graphics-material",h.initialize({effectName:"graphics"}),e[h._uuid]=h,t.push(h);const p=new c.Material;p._uuid="default-particle-material",p.initialize({effectName:"particle"}),e[p._uuid]=p,t.push(p);const m=new c.Material;m._uuid="default-particle-gpu-material",m.initialize({effectName:"particle-gpu"}),e[m._uuid]=m,t.push(m);const d=new c.Material;d._uuid="default-trail-material",d.initialize({effectName:"particle-trail"}),e[d._uuid]=d,t.push(d);const v=new c.Material;v._uuid="default-billboard-material",v.initialize({effectName:"billboard"}),e[v._uuid]=v,t.push(v);const g=new c.Material;g._uuid="default-spine-material",g.initialize({defines:{USE_TEXTURE:!0,CC_USE_EMBEDDED_ALPHA:!1,IS_GRAY:!1},effectName:"spine"}),e[g._uuid]=g,t.push(g),c.game.on(c.Game.EVENT_GAME_INITED,(()=>{for(let e=0;e<t.length;++e){const n=t[e];for(let e=0;e<n.passes.length;++e)n.passes[e].tryCompile()}}))}}),Xd=(()=>{const e=new Map;let t=0;return n=>"number"==typeof n?n:(e.has(n)||(e.set(n,1<<t),t++),e.get(n))})(),Qd=new Ma(Go.UNIFORM|Go.TRANSFER_DST,Wo.HOST|Wo.DEVICE),Kd=new Oa(null),Zd=new _r(null);let Jd;!function(e){e[e.NONE=0]="NONE",e[e.INSTANCING=1]="INSTANCING",e[e.VB_MERGING=2]="VB_MERGING"}(Jd||(Jd={}));class $d{static fillPipelineInfo(e,t){void 0!==t.priority&&e._setPriority(t.priority),void 0!==t.primitive&&e._setPrimitive(t.primitive),void 0!==t.stage&&e._setStage(t.stage),void 0!==t.dynamicStates&&e._setDynamicState(t.dynamicStates),void 0!==t.phase&&e._setPhase(Xd(t.phase));const n=e._bs;if(t.blendState){const e=t.blendState,{targets:i}=e;i&&i.forEach(((e,t)=>{n.setTarget(t,e)})),void 0!==e.isA2C&&(n.isA2C=e.isA2C),void 0!==e.isIndepend&&(n.isIndepend=e.isIndepend),void 0!==e.blendColor&&(n.blendColor=e.blendColor)}e._rs.assign(t.rasterizerState),e._dss.assign(t.depthStencilState)}static getPassHash(e){let t=`${Wd.getKey(e.program,e.defines)},${e._primitive},${e._dynamicStates}`;var n;return t+=function(e){let t=`,bs,${e.isA2C}`;for(const n of e.targets)t+=`,bt,${n.blend},${n.blendEq},${n.blendAlphaEq},${n.blendColorMask}`,t+=`,${n.blendSrc},${n.blendDst},${n.blendSrcAlpha},${n.blendDstAlpha}`;return t}(e._bs),t+=function(e){let t=`,dss,${e.depthTest},${e.depthWrite},${e.depthFunc}`;return t+=`,${e.stencilTestFront},${e.stencilFuncFront},${e.stencilRefFront},${e.stencilReadMaskFront}`,t+=`,${e.stencilFailOpFront},${e.stencilZFailOpFront},${e.stencilPassOpFront},${e.stencilWriteMaskFront}`,t+=`,${e.stencilTestBack},${e.stencilFuncBack},${e.stencilRefBack},${e.stencilReadMaskBack}`,t+=`,${e.stencilFailOpBack},${e.stencilZFailOpBack},${e.stencilPassOpBack},${e.stencilWriteMaskBack}`,t}(e._dss),t+=`,rs,${(n=e._rs).cullMode},${n.depthBias},${n.isFrontFaceCCW}`,jr(t,666)}get native(){return this._nativeObj}constructor(e){this._rootBuffer=null,this._buffers=[],this._descriptorSet=null,this._pipelineLayout=null,this._passIndex=0,this._propertyIndex=0,this._programName="",this._dynamics={},this._propertyHandleMap={},this._rootBlock=null,this._blocks=[],this._shaderInfo=null,this._defines={},this._properties={},this._shader=null,this._bs=new qr,this._dss=new Xr,this._rs=new Yr,this._priority=Hh.DEFAULT,this._stage=Vh.DEFAULT,this._phase=Xd("default"),this._primitive=la.TRIANGLE_LIST,this._batchingScheme=Jd.NONE,this._dynamicStates=ha.NONE,this._hash=0,this._root=void 0,this._device=void 0,this._passHandle=0,this._rootBufferDirty=!1,this._root=e,this._device=e.device}initialize(e){this._doInit(e),this.resetUBOs(),this.resetTextures(),this.tryCompile()}getHandle(e,t=0,n=jo.UNKNOWN){let i=this._propertyHandleMap[e];return i?(n?i=Dd(i,n):t&&(i=Dd(i,Id(i)-t)),i+t):0}getBinding(e){const t=this.getHandle(e);return t?$d.getBindingFromHandle(t):-1}setUniform(e,t){const n=$d.getBindingFromHandle(e),i=$d.getTypeFromHandle(e),o=$d.getOffsetFromHandle(e),a=this._blocks[n];Od[i](a,t,o),this._setRootBufferDirty(!0)}getUniform(e,t){const n=$d.getBindingFromHandle(e),i=$d.getTypeFromHandle(e),o=$d.getOffsetFromHandle(e),a=this._blocks[n];return Md[i](a,t,o)}setUniformArray(e,t){const n=$d.getBindingFromHandle(e),i=$d.getTypeFromHandle(e),o=Rr(i)>>2,a=this._blocks[n];let r=$d.getOffsetFromHandle(e);for(let e=0;e<t.length;e++,r+=o)null!==t[e]&&Od[i](a,t[e],r);this._setRootBufferDirty(!0)}bindTexture(e,t,n){this._descriptorSet.bindTexture(e,t,n||0)}bindSampler(e,t,n){this._descriptorSet.bindSampler(e,t,n||0)}setDynamicState(e,t){const n=this._dynamics[e];n&&n.value===t||(n.value=t,n.dirty=!0)}overridePipelineStates(e,t){console.warn("base pass cannot override states, please use pass instance instead.")}_setRootBufferDirty(e){this._rootBufferDirty=e,this._nativeObj.setRootBufferDirty(e)}update(){this._descriptorSet?(this._rootBuffer&&this._rootBufferDirty&&(this._rootBuffer.update(this._rootBlock),this._setRootBufferDirty(!1)),this._descriptorSet.update(),this._nativeObj.update()):R(12006)}_initNative(){this._nativeObj||(this._nativeObj=new oo,this._passHandle=Zs.alloc(),this._nativePriority=Zs.getTypedArray(this._passHandle,Xs.PRIORITY),this._nativeStage=Zs.getTypedArray(this._passHandle,Xs.STAGE),this._nativePhase=Zs.getTypedArray(this._passHandle,Xs.PHASE),this._nativePrimitive=Zs.getTypedArray(this._passHandle,Xs.PRIMITIVE),this._nativeBatchingScheme=Zs.getTypedArray(this._passHandle,Xs.BATCHING_SCHEME),this._nativeDynamicStates=Zs.getTypedArray(this._passHandle,Xs.DYNAMIC_STATE),this._nativeHash=Zs.getTypedArray(this._passHandle,Xs.HASH),this._nativeObj.initWithData(Zs.getBuffer(this._passHandle)))}_destroy(){this._nativeObj=null,this._passHandle&&Zs.free(this._passHandle)}destroy(){for(let e=0;e<this._shaderInfo.blocks.length;e++){const t=this._shaderInfo.blocks[e];this._buffers[t.binding].destroy()}this._buffers=[],this._rootBuffer&&(this._rootBuffer.destroy(),this._rootBuffer=null),this._descriptorSet.destroy(),this._rs.destroy(),this._dss.destroy(),this._bs.destroy(),this._destroy()}resetUniform(e){const t=this.getHandle(e);if(!t)return;const n=$d.getTypeFromHandle(t),i=$d.getBindingFromHandle(t),o=$d.getOffsetFromHandle(t),a=this._blocks[i],r=this._properties[e],s=r&&r.value||Ld(n);Od[n](a,s,o),this._setRootBufferDirty(!0)}resetTexture(e,t){const n=this.getHandle(e);if(!n)return;const i=$d.getTypeFromHandle(n),o=$d.getBindingFromHandle(n),a=this._properties[e],r=a&&a.value,s=r?`${r}-texture`:Ld(i),c=Yd.get(s),l=c&&c.getGFXTexture(),_=a&&void 0!==a.samplerHash?a.samplerHash:c&&c.getSamplerHash(),u=Lm.getSampler(this._device,_);this._descriptorSet.bindSampler(o,u,t),this._descriptorSet.bindTexture(o,l,t)}resetUBOs(){for(let e=0;e<this._shaderInfo.blocks.length;e++){const t=this._shaderInfo.blocks[e],n=this._blocks[t.binding];let i=0;for(let e=0;e<t.members.length;e++){const o=t.members[e],a=this._properties[o.name],r=a&&a.value||Ld(o.type),s=(Rr(o.type)>>2)*o.count;for(let e=0;e+r.length<=s;e+=r.length)n.set(r,i+e);i+=s}}this._setRootBufferDirty(!0)}resetTextures(){for(let e=0;e<this._shaderInfo.samplerTextures.length;e++){const t=this._shaderInfo.samplerTextures[e];for(let e=0;e<t.count;e++)this.resetTexture(t.name,e)}}tryCompile(){const{pipeline:e}=this._root;if(!e)return!1;this._syncBatchingScheme();const t=Wd.getGFXShader(this._device,this._programName,this._defines,e);return t?(this._shader=t,this._setPipelineLayout(Wd.getTemplateInfo(this._programName).pipelineLayout),this._setHash($d.getPassHash(this)),!0):(console.warn(`create shader ${this._programName} failed`),!1)}getShaderVariant(e=null){if(!this._shader&&!this.tryCompile())return console.warn("pass resources incomplete"),null;if(!e)return this._shader;const{pipeline:t}=this._root;for(let t=0;t<e.length;t++){const n=e[t];this._defines[n.name]=n.value}const n=Wd.getGFXShader(this._device,this._programName,this._defines,t);for(let t=0;t<e.length;t++){const n=e[t];delete this._defines[n.name]}return n}beginChangeStatesSilently(){}endChangeStatesSilently(){}_setPriority(e){this._priority=e,this._nativePriority[0]=e}_setStage(e){this._stage=e,this._nativeStage[0]=e}_setPhase(e){this._phase=e,this._nativePhase[0]=e}_setPrimitive(e){this._primitive=e,this._nativePrimitive[0]=e}_setState(e,t,n,i){this._bs=e,this._dss=t,this._rs=n,this._descriptorSet=i,this._nativeObj.blendState=e.native,this._nativeObj.depthStencilState=t.native,this._nativeObj.rasterizerState=n.native,this._nativeObj.descriptorSet=i}_doInit(e,t=!1){this._initNative(),this._setPriority(Hh.DEFAULT),this._setStage(Vh.DEFAULT),this._setPhase(Xd("default")),this._setPrimitive(la.TRIANGLE_LIST),this._passIndex=e.passIndex,this._propertyIndex=void 0!==e.propertyIndex?e.propertyIndex:e.passIndex,this._programName=e.program,this._defines=t?{...e.defines}:e.defines,this._shaderInfo=Wd.getTemplate(e.program),this._properties=e.properties||this._properties;const n=this._device;$d.fillPipelineInfo(this,e),e.stateOverrides&&$d.fillPipelineInfo(this,e.stateOverrides),Zd.layout=Wd.getDescriptorSetLayout(this._device,e.program),this._descriptorSet=this._device.createDescriptorSet(Zd),this._setState(this._bs,this._dss,this._rs,this._descriptorSet);const i=this._shaderInfo.blocks,o=Wd.getTemplateInfo(e.program),{blockSizes:a,handleMap:r}=o,s=n.capabilities.uboOffsetAlignment,c=[];let l=0,_=0;for(let e=0;e<i.length;e++){const t=a[e];c.push(_),_+=Math.ceil(t/s)*s,l=t}const u=c[c.length-1]+l;u&&(Qd.size=16*Math.ceil(u/16),this._rootBuffer=n.createBuffer(Qd),this._rootBlock=new ArrayBuffer(u),this._nativeObj.setRootBufferAndBlock(this._rootBuffer,this._rootBlock));for(let e=0,t=0;e<i.length;e++){const{binding:o}=i[e],r=a[e];Kd.buffer=this._rootBuffer,Kd.offset=c[t++],Kd.range=16*Math.ceil(r/16);const s=this._buffers[o]=n.createBuffer(Kd);this._blocks[o]=new Float32Array(this._rootBlock,Kd.offset,r/Float32Array.BYTES_PER_ELEMENT),this._descriptorSet.bindBuffer(o,s)}const f=this._propertyHandleMap=r,h={};for(const e in this._properties){const t=this._properties[e];t.handleInfo&&(h[e]=this.getHandle.apply(this,t.handleInfo))}Object.assign(f,h)}_syncBatchingScheme(){this._defines.USE_INSTANCING?this._device.hasFeature(Uo.INSTANCED_ARRAYS)?this._setBatchingScheme(Jd.INSTANCING):(this._defines.USE_INSTANCING=!1,this._setBatchingScheme(Jd.NONE)):this._defines.USE_BATCHING?this._setBatchingScheme(Jd.VB_MERGING):this._setBatchingScheme(Jd.NONE)}_setBatchingScheme(e){this._batchingScheme=e,this._nativeBatchingScheme[0]=e}_setDynamicState(e){this._dynamicStates=e,this._nativeDynamicStates[0]=e}_setHash(e){this._hash=e,this._nativeHash[0]=e}_setPipelineLayout(e){this._pipelineLayout=e,this._nativeObj.setPipelineLayout(e)}_initPassFromTarget(e,t,n,i){this._initNative(),this._setPriority(e.priority),this._setStage(e.stage),this._setPhase(e.phase),this._setBatchingScheme(e.batchingScheme),this._setPrimitive(e.primitive),this._setDynamicState(e.dynamicStates),this._setState(n,t,e.rasterizerState,e.descriptorSet),this._passIndex=e.passIndex,this._propertyIndex=e.propertyIndex,this._programName=e.program,this._defines=e.defines,this._shaderInfo=e._shaderInfo,this._properties=e._properties,this._blocks=e._blocks,this._dynamics=e._dynamics,this._shader=e._shader,this._setPipelineLayout(Wd.getTemplateInfo(this._programName).pipelineLayout),this._setHash(e._hash^i)}get root(){return this._root}get device(){return this._device}get shaderInfo(){return this._shaderInfo}get localSetLayout(){return Wd.getDescriptorSetLayout(this._device,this._programName,!0)}get program(){return this._programName}get properties(){return this._properties}get defines(){return this._defines}get passIndex(){return this._passIndex}get propertyIndex(){return this._propertyIndex}get dynamics(){return this._dynamics}get blocks(){return this._blocks}get rootBufferDirty(){return this._rootBufferDirty}get priority(){return this._priority}get primitive(){return this._primitive}get stage(){return this._stage}get phase(){return this._phase}get rasterizerState(){return this._rs}get depthStencilState(){return this._dss}get blendState(){return this._bs}get dynamicStates(){return this._dynamicStates}get batchingScheme(){return this._batchingScheme}get descriptorSet(){return this._descriptorSet}get hash(){return this._hash}get pipelineLayout(){return this._pipelineLayout}}e("db",$d),$d.PropertyType=wd,$d.getPropertyTypeFromHandle=Pd,$d.getTypeFromHandle=Id,$d.getBindingFromHandle=Rd,$d.getOffsetFromHandle=Nd;const ev=new _r(null);class tv{constructor(){this._device=null,this._passes=null,this._shaders=null,this._subMesh=null,this._patches=null,this._priority=Hh.DEFAULT,this._inputAssembler=null,this._descriptorSet=null,this._planarInstanceShader=null,this._planarShader=null,this._reflectionTex=null,this._reflectionSampler=null}_destroyDescriptorSet(){this._descriptorSet.destroy(),this._nativeObj.setDescriptorSet(null),this._descriptorSet=null}_destroyInputAssembler(){this._inputAssembler.destroy(),this._nativeObj.setInputAssembler(null),this._inputAssembler=null}_createDescriptorSet(e){this._descriptorSet=this._device.createDescriptorSet(e),this._nativeObj.setDescriptorSet(this._descriptorSet)}set passes(e){e.length>8?R(12004,8):(this._passes=e,this._flushPassInfo(),this._descriptorSet&&(this._destroyDescriptorSet(),ev.layout=e[0].localSetLayout,this._createDescriptorSet(ev)))}get passes(){return this._passes}get shaders(){return this._shaders}set subMesh(e){this._setSubMesh(e),this._inputAssembler.destroy(),this._inputAssembler.initialize(e.iaInfo),this._passes[0].batchingScheme===Jd.VB_MERGING&&this.subMesh.genFlatBuffers()}get subMesh(){return this._subMesh}set priority(e){this._priority=e,this._nativeObj.setPriority(e)}get priority(){return this._priority}get inputAssembler(){return this._inputAssembler}get descriptorSet(){return this._descriptorSet}get patches(){return this._patches}get planarInstanceShader(){return this._planarInstanceShader}get planarShader(){return this._planarShader}_setInputAssembler(e){this._inputAssembler=this._device.createInputAssembler(e),this._nativeObj.setInputAssembler(this._inputAssembler)}_setSubMesh(e){this._subMesh=e,this._nativeObj.setSubMeshBuffers(e.flatBuffers)}get native(){return this._nativeObj}_init(){this._nativeObj=new ao}initialize(e,t,n=null){if(this._device=c.director.root.device,ev.layout=t[0].localSetLayout,this._init(),this._setInputAssembler(e.iaInfo),this._createDescriptorSet(ev),this._setSubMesh(e),this._patches=n,this._passes=t,this._flushPassInfo(),t[0].batchingScheme===Jd.VB_MERGING&&this.subMesh.genFlatBuffers(),this.priority=Hh.DEFAULT,t[0].phase===Xd("reflection")){let e=this._device.width,t=this._device.height;const n=512;t<e?(e=n*e/t,t=n):(e=n,t=n*t/e),this._reflectionTex=this._device.createTexture(new Ua(qo.TEX2D,Yo.STORAGE|Yo.TRANSFER_SRC|Yo.SAMPLED,Bo.RGBA8,e,t,Xo.IMMUTABLE)),this.descriptorSet.bindTexture($p,this._reflectionTex);const i=zm([Ko.LINEAR,Ko.LINEAR,Ko.NONE,Zo.CLAMP,Zo.CLAMP,Zo.CLAMP]);this._reflectionSampler=Lm.getSampler(this._device,i),this.descriptorSet.bindSampler($p,this._reflectionSampler),this.descriptorSet.bindTexture(nm,this._reflectionTex)}}_initNativePlanarShadowShader(e){this._planarShader=e.getPlanarShader(this._patches),this._nativeObj.setPlanarShader(this._planarShader)}initPlanarShadowShader(){const e=c.director.root.pipeline.pipelineSceneData.shadows;this._initNativePlanarShadowShader(e)}_initNativePlanarShadowInstanceShader(e){this._planarInstanceShader=e.getPlanarInstanceShader(this._patches),this._nativeObj.setPlanarInstanceShader(this._planarInstanceShader)}initPlanarShadowInstanceShader(){const e=c.director.root.pipeline.pipelineSceneData.shadows;this._initNativePlanarShadowInstanceShader(e)}_destroy(){this._nativeObj=null}destroy(){this._destroyDescriptorSet(),this._destroyInputAssembler(),this.priority=Hh.DEFAULT,this._patches=null,this._subMesh=null,this._passes=null,this._shaders=null,this._reflectionTex&&this._reflectionTex.destroy(),this._reflectionTex=null,this._reflectionSampler&&this._reflectionSampler.destroy(),this._reflectionSampler=null,this._destroy()}update(){for(let e=0;e<this._passes.length;++e)this._passes[e].update();this._descriptorSet.update()}onPipelineStateChanged(){const e=this._passes;if(e){for(let t=0;t<e.length;t++){const n=e[t];n.beginChangeStatesSilently(),n.tryCompile(),n.endChangeStatesSilently()}this._flushPassInfo()}}onMacroPatchesStateChanged(e){this._patches=e;const t=this._passes;if(t){for(let e=0;e<t.length;e++){const n=t[e];n.beginChangeStatesSilently(),n.tryCompile(),n.endChangeStatesSilently()}this._flushPassInfo()}}_flushPassInfo(){const e=this._passes;if(e){this._shaders||(this._shaders=[]),this._shaders.length=e.length;for(let t=0,n=e.length;t<n;t++)this._shaders[t]=e[t].getShaderVariant(this.patches);{const t=e.map((e=>e.native));this._nativeObj.setPasses(t),this._nativeObj.setShaders(this._shaders)}}}}class nv{static get(e,t=0){const n=nv._buffers;n.has(e)||n.set(e,{});const i=n.get(e);return i[t]||(i[t]=new nv(e))}constructor(e){this.instances=[],this.pass=void 0,this.hasPendingModels=!1,this.dynamicOffsets=[],this._device=void 0,this._device=e.device,this.pass=e}destroy(){for(let e=0;e<this.instances.length;++e){const t=this.instances[e];t.vb.destroy(),t.ia.destroy()}this.instances.length=0}merge(e,t,n,i=null){const o=t.buffer.length;if(!o)return;const a=e.inputAssembler,r=e.descriptorSet.getTexture(Yp);let s=i;s||(s=e.shaders[n]);const c=e.descriptorSet;for(let e=0;e<this.instances.length;++e){const n=this.instances[e];if(!(n.ia.indexBuffer!==a.indexBuffer||n.count>=1024)&&n.lightingMap===r){if(n.stride!==o)return;if(n.count>=n.capacity){n.capacity<<=1;const e=n.stride*n.capacity,t=n.data;n.data=new Uint8Array(e),n.data.set(t),n.vb.resize(e)}return n.shader!==s&&(n.shader=s),n.descriptorSet!==c&&(n.descriptorSet=c),n.data.set(t.buffer,n.stride*n.count++),void(this.hasPendingModels=!0)}}const l=this._device.createBuffer(new Ma(Go.VERTEX|Go.TRANSFER_DST,Wo.HOST|Wo.DEVICE,32*o,o)),_=new Uint8Array(32*o),u=a.vertexBuffers.slice(),f=a.attributes.slice(),h=a.indexBuffer;for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e],i=new Ka(n.name,n.format,n.isNormalized,u.length,!0);f.push(i)}_.set(t.buffer),u.push(l);const p=new Ja(f,u,h),m=this._device.createInputAssembler(p);this.instances.push({count:1,capacity:32,vb:l,data:_,ia:m,stride:o,shader:s,descriptorSet:c,lightingMap:r}),this.hasPendingModels=!0}uploadBuffers(e){for(let t=0;t<this.instances.length;++t){const n=this.instances[t];n.count&&(n.ia.instanceCount=n.count,e.updateBuffer(n.vb,n.data))}}clear(){for(let e=0;e<this.instances.length;++e)this.instances[e].count=0;this.hasPendingModels=!1}}nv._buffers=new Map;const iv=new ii,ov=(new V((()=>new tv),32),[{name:"CC_RECEIVE_SHADOW",value:!0}]);let av;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SKINNING=1]="SKINNING",e[e.BAKED_SKINNING=2]="BAKED_SKINNING",e[e.BATCH_2D=3]="BATCH_2D",e[e.PARTICLE_BATCH=4]="PARTICLE_BATCH",e[e.LINE=5]="LINE"}(av||(av=e("cq",{})));const rv=zm([Ko.LINEAR,Ko.LINEAR,Ko.NONE,Zo.CLAMP,Zo.CLAMP,Zo.CLAMP]),sv=zm([Ko.LINEAR,Ko.LINEAR,Ko.LINEAR,Zo.CLAMP,Zo.CLAMP,Zo.CLAMP]);class cv{get subModels(){return this._subModels}get inited(){return this._inited}get worldBounds(){return this._worldBounds}get modelBounds(){return this._modelBounds}get localBuffer(){return this._localBuffer}get updateStamp(){return this._updateStamp}get isInstancingEnabled(){return this._instMatWorldIdx>=0}get receiveShadow(){return this._receiveShadow}set receiveShadow(e){this._setReceiveShadow(e),this.onMacroPatchesStateChanged()}get castShadow(){return this._castShadow}set castShadow(e){this._castShadow=e,this._nativeObj.setCastShadow(e)}get node(){return this._node}set node(e){this._node=e,this._nativeObj.setNode(e.native)}get transform(){return this._transform}set transform(e){this._transform=e,this._nativeObj.setTransform(e.native)}get visFlags(){return this._visFlags}set visFlags(e){this._visFlags=e,this._nativeObj.seVisFlag(e)}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._nativeObj.setEnabled(e)}get native(){return this._nativeObj}constructor(){this.type=av.DEFAULT,this.scene=null,this.isDynamicBatching=!1,this.instancedAttributes={buffer:null,views:[],attributes:[]},this._worldBounds=null,this._modelBounds=null,this._subModels=[],this._node=null,this._transform=null,this._device=void 0,this._inited=!1,this._descriptorSetCount=1,this._updateStamp=-1,this._transformUpdated=!0,this._localData=new Float32Array(Pp.COUNT),this._localBuffer=null,this._instMatWorldIdx=-1,this._lightmap=null,this._lightmapUVParam=new ui,this._receiveShadow=!1,this._castShadow=!1,this._enabled=!0,this._visFlags=Gh.Enum.NONE,this._device=c.director.root.device}_setReceiveShadow(e){this._receiveShadow=e,this._nativeObj.setReceiveShadow(e)}_init(){this._nativeObj=new Vi}initialize(){this._inited||(this._init(),this._setReceiveShadow(!0),this.castShadow=!1,this.enabled=!0,this.visFlags=Gh.Enum.NONE,this._inited=!0)}_destroySubmodel(e){e.destroy()}_destroy(){this._nativeObj=null}destroy(){const e=this._subModels;for(let t=0;t<e.length;t++){const e=this._subModels[t];this._destroySubmodel(e)}this._localBuffer&&(this._localBuffer.destroy(),this._localBuffer=null),this._worldBounds=null,this._modelBounds=null,this._subModels.length=0,this._inited=!1,this._transformUpdated=!0,this._transform=null,this._node=null,this.isDynamicBatching=!1,this._destroy()}attachToScene(e){this.scene=e}detachFromScene(){this.scene=null}updateTransform(e){const t=this.transform;if(t.hasChangedFlags||t._dirtyFlags){t.updateWorldTransform(),this._transformUpdated=!0;const e=this._worldBounds;this._modelBounds&&e&&this._modelBounds.transform(t._mat,t._pos,t._rot,t._scale,e)}}updateWorldBound(){const e=this.transform;if(null!==e){e.updateWorldTransform(),this._transformUpdated=!0;const t=this._worldBounds;this._modelBounds&&t&&this._modelBounds.transform(e._mat,e._pos,e._rot,e._scale,t)}}_applyLocalData(){}_applyLocalBuffer(){this._nativeObj.setLocalBuffer(this._localBuffer)}updateUBOs(e){const t=this._subModels;for(let e=0;e<t.length;e++)t[e].update();if(this._updateStamp=e,!this._transformUpdated)return;this._transformUpdated=!1;const n=this.transform._mat,i=this._instMatWorldIdx;if(i>=0){const e=this.instancedAttributes.views;!function(e,t,n,i){t[0]=e.m00,t[1]=e.m01,t[2]=e.m02,t[3]=e.m12,n[0]=e.m04,n[1]=e.m05,n[2]=e.m06,n[3]=e.m13,i[0]=e.m08,i[1]=e.m09,i[2]=e.m10,i[3]=e.m14}(n,e[i],e[i+1],e[i+2])}else this._localBuffer&&(ii.toArray(this._localData,n,Pp.MAT_WORLD_OFFSET),ii.inverseTranspose(iv,n),ii.toArray(this._localData,iv,Pp.MAT_WORLD_IT_OFFSET),this._localBuffer.update(this._localData),this._applyLocalData(),this._applyLocalBuffer())}_updateNativeBounds(){this._nativeObj.setBounds(this._worldBounds.native)}createBoundingShape(e,t){e&&t&&(this._modelBounds=cc.fromPoints(cc.create(),e,t),this._worldBounds=cc.clone(this._modelBounds),this._updateNativeBounds())}_createSubModel(){return new tv}initSubModel(e,t,n){this.initialize(),null==this._subModels[e]?this._subModels[e]=this._createSubModel():this._subModels[e].destroy(),this._subModels[e].initialize(t,n.passes,this.getMacroPatches(e)),this._subModels[e].initPlanarShadowShader(),this._subModels[e].initPlanarShadowInstanceShader(),this._updateAttributesAndBinding(e),this._nativeObj.setSubModel(e,this._subModels[e].native)}setSubModelMesh(e,t){this._subModels[e]&&(this._subModels[e].subMesh=t)}setSubModelMaterial(e,t){this._subModels[e]&&(this._subModels[e].passes=t.passes,this._updateAttributesAndBinding(e))}onGlobalPipelineStateChanged(){const e=this._subModels;for(let t=0;t<e.length;t++)e[t].onPipelineStateChanged()}onMacroPatchesStateChanged(){const e=this._subModels;for(let t=0;t<e.length;t++)e[t].onMacroPatchesStateChanged(this.getMacroPatches(t))}updateLightingmap(e,t){ui.toArray(this._localData,t,Pp.LIGHTINGMAP_UVPARAM),this._applyLocalData(),this._lightmap=e,this._lightmapUVParam=t,null===e&&(e=Yd.get("empty-texture"));const n=e.getGFXTexture();if(n){const t=Lm.getSampler(this._device,e.mipmaps.length>1?sv:rv),i=this._subModels;for(let e=0;e<i.length;e++){const{descriptorSet:o}=i[e];o.bindTexture(Yp,n),o.bindSampler(Yp,t),o.update()}}}getMacroPatches(e){return this.receiveShadow?ov:null}_updateAttributesAndBinding(e){const t=this._subModels[e];if(!t)return;this._initLocalDescriptors(e),this._updateLocalDescriptors(e,t.descriptorSet);const n=t.passes[0].getShaderVariant(t.patches);this._updateInstancedAttributes(n.attributes,t.passes[0])}_getInstancedAttributeIndex(e){const{attributes:t}=this.instancedAttributes;for(let n=0;n<t.length;n++)if(t[n].name===e)return n;return-1}_setInstMatWorldIdx(e){this._instMatWorldIdx=e,this._nativeObj.setInstMatWorldIdx(e)}_updateInstancedAttributes(e,t){if(!t.device.hasFeature(Uo.INSTANCED_ARRAYS))return;let n=0;for(let t=0;t<e.length;t++){const i=e[t];i.isInstanced&&(n+=xr[i.format].size)}const i=this.instancedAttributes;i.buffer=new Uint8Array(n),i.views.length=i.attributes.length=0;let o=0;for(let t=0;t<e.length;t++){const n=e[t];if(!n.isInstanced)continue;const a=new Ka;a.format=n.format,a.name=n.name,a.isNormalized=n.isNormalized,a.location=n.location,i.attributes.push(a);const r=xr[n.format],s=new(Nr(r))(i.buffer.buffer,o,r.count);i.views.push(s),o+=r.size}t.batchingScheme===Jd.INSTANCING&&nv.get(t).destroy(),this._setInstMatWorldIdx(this._getInstancedAttributeIndex("a_matWorld0")),this._transformUpdated=!0,this._nativeObj.setInstancedAttrBlock(i.buffer.buffer,i.views,i.attributes)}_initLocalDescriptors(e){this._localBuffer||(this._localBuffer=this._device.createBuffer(new Ma(Go.UNIFORM|Go.TRANSFER_DST,Wo.HOST|Wo.DEVICE,Pp.SIZE,Pp.SIZE)),this._applyLocalBuffer())}_updateLocalDescriptors(e,t){this._localBuffer&&t.bindBuffer(Pp.BINDING,this._localBuffer)}}let lv,_v;e("bQ",cv),function(e){e[e.LOCAL=0]="LOCAL",e[e.WORLD=1]="WORLD"}(lv||(lv={})),function(e){e[e.NONE=0]="NONE",e[e.POSITION=1]="POSITION",e[e.ROTATION=2]="ROTATION",e[e.SCALE=4]="SCALE",e[e.RS=e.ROTATION|e.SCALE]="RS",e[e.TRS=e.POSITION|e.ROTATION|e.SCALE]="TRS",e[e.TRS_MASK=~e.TRS]="TRS_MASK"}(_v||(_v=e("c2",{}))),c.internal.TransformBit=_v;class uv{get root(){return this._root}get name(){return this._name}get cameras(){return this._cameras}get mainLight(){return this._mainLight}get sphereLights(){return this._sphereLights}get spotLights(){return this._spotLights}get models(){return this._models}get native(){return this._nativeObj}get batches(){return this._batches}static registerCreateFunc(e){e._createSceneFun=e=>new uv(e)}constructor(e){this._root=void 0,this._name="",this._cameras=[],this._models=[],this._batches=[],this._directionalLights=[],this._sphereLights=[],this._spotLights=[],this._mainLight=null,this._modelId=0,this._root=e,this._createNativeObject()}initialize(e){return this._name=e.name,this._createNativeObject(),!0}update(e){{const t=[];for(let e=0,n=this._batches.length;e<n;++e)t.push(this._batches[e].native);return this._nativeObj.updateBatches(t),void this._nativeObj.update(e)}}_destroy(){this._nativeObj=null}destroy(){this.removeCameras(),this.removeSphereLights(),this.removeSpotLights(),this.removeModels(),this._destroy()}addCamera(e){e.attachToScene(this),this._cameras.push(e)}removeCamera(e){for(let t=0;t<this._cameras.length;++t)if(this._cameras[t]===e)return this._cameras.splice(t,1),void e.detachFromScene()}removeCameras(){for(const e of this._cameras)e.detachFromScene();this._cameras.splice(0)}setMainLight(e){this._mainLight=e,this._nativeObj.setMainLight(e?e.native:null)}unsetMainLight(e){if(this._mainLight===e){const e=this._directionalLights;if(e.length)return this.setMainLight(e[e.length-1]),void(this._mainLight.node&&(this._mainLight.node.hasChangedFlags|=_v.ROTATION));this.setMainLight(null)}}addDirectionalLight(e){e.attachToScene(this),this._directionalLights.push(e)}removeDirectionalLight(e){for(let t=0;t<this._directionalLights.length;++t)if(this._directionalLights[t]===e)return e.detachFromScene(),void this._directionalLights.splice(t,1)}addSphereLight(e){e.attachToScene(this),this._sphereLights.push(e),this._nativeObj.addSphereLight(e.native)}removeSphereLight(e){for(let t=0;t<this._sphereLights.length;++t)if(this._sphereLights[t]===e)return e.detachFromScene(),this._sphereLights.splice(t,1),void this._nativeObj.removeSphereLight(e.native)}addSpotLight(e){e.attachToScene(this),this._spotLights.push(e),this._nativeObj.addSpotLight(e.native)}removeSpotLight(e){for(let t=0;t<this._spotLights.length;++t)if(this._spotLights[t]===e)return e.detachFromScene(),this._spotLights.splice(t,1),void this._nativeObj.removeSpotLight(e.native)}removeSphereLights(){for(let e=0;e<this._sphereLights.length;++e)this._sphereLights[e].detachFromScene();this._sphereLights.length=0,this._nativeObj.removeSphereLights()}removeSpotLights(){for(let e=0;e<this._spotLights.length;++e)this._spotLights[e].detachFromScene();this._spotLights=[],this._nativeObj.removeSpotLights()}addModel(e){switch(e.attachToScene(this),this._models.push(e),e.type){case av.SKINNING:this._nativeObj.addSkinningModel(e.native);break;case av.BAKED_SKINNING:this._nativeObj.addBakedSkinningModel(e.native);break;case av.DEFAULT:default:this._nativeObj.addModel(e.native)}}removeModel(e){for(let t=0;t<this._models.length;++t)if(this._models[t]===e)return e.detachFromScene(),this._models.splice(t,1),void this._nativeObj.removeModel(t)}removeModels(){for(const e of this._models)e.detachFromScene(),e.destroy();this._models.length=0,this._nativeObj.removeModels()}addBatch(e){this._batches.push(e)}removeBatch(e){for(let t=0;t<this._batches.length;++t)if(this._batches[t]===e)return this._batches.splice(t,1),void this._nativeObj.removeBatch(t)}removeBatches(){this._batches.length=0,this._nativeObj.removeBatches()}onGlobalPipelineStateChanged(){for(const e of this._models)e.onGlobalPipelineStateChanged()}generateModelId(){return this._modelId++}_createNativeObject(){this._nativeObj=new no}}rn(uv.prototype,"RenderScene.prototype",[{name:"raycastUI2DNode"},{name:"raycastUINode"}]),rn(uv.prototype,"RenderScene.prototype",[{name:"raycastAll",suggest:"using intersect.rayModel in geometry"},{name:"raycastAllModels",suggest:"using intersect.rayModel in geometry"},{name:"raycastSingleModel",suggest:"using intersect.rayModel in geometry"},{name:"raycastAllCanvas",suggest:"using intersect.rayAABB in geometry"},{name:"rayResultCanvas"},{name:"rayResultModels"},{name:"rayResultAll"},{name:"rayResultSingleModel"}]);const fv={};rn(fv,"CameraVisFlags",[{name:"GENERAL"}]),an(fv,"CameraVisFlags",[{name:"PROFILER",newName:"PROFILER",target:Gh.BitMask,targetName:"PROFILER"},{name:"GIZMOS",newName:"GIZMOS",target:Gh.BitMask,targetName:"GIZMOS"},{name:"EDITOR",newName:"EDITOR",target:Gh.BitMask,targetName:"EDITOR"},{name:"UI",newName:"UI",target:Gh.BitMask,targetName:"UI_3D"},{name:"UI2D",newName:"UI2D",target:Gh.BitMask,targetName:"UI_2D"}]),c.CameraVisFlags=fv;const hv={};function pv(e,t){t<1e3?t=1e3:t>15e3&&(t=15e3);const n=t*t,i=(.860117757+.000154118254*t+1.28641212e-7*n)/(1+.000842420235*t+7.08145163e-7*n),o=(.317398726+422806245e-13*t+4.20481691e-8*n)/(1-289741816e-13*t+1.61456053e-7*n),a=2*i-8*o+4,r=3*i/a,s=2*o/a,c=1/s*r,l=1/s*(1-r-s);e.x=3.2404542*c-1.5371385+-.4985314*l,e.y=-.969266*c+1.8760108+.041556*l,e.z=.0556434*c-.2040259+1.0572252*l}let mv;rn(hv,"VisibilityFlags",[{name:"GENERAL"}]),an(hv,"VisibilityFlags",[{name:"ALWALS",newName:"ALWALS",target:Gh.Enum,targetName:"ALWALS"},{name:"PROFILER",newName:"PROFILER",target:Gh.Enum,targetName:"PROFILER"},{name:"GIZMOS",newName:"GIZMOS",target:Gh.Enum,targetName:"GIZMOS"},{name:"EDITOR",newName:"EDITOR",target:Gh.Enum,targetName:"EDITOR"},{name:"UI",newName:"UI",target:Gh.Enum,targetName:"UI_3D"},{name:"UI2D",newName:"UI2D",target:Gh.Enum,targetName:"UI_2D"}]),c.VisibilityFlags=hv,an($d.prototype,"Pass.prototype",[{name:"getBindingTypeFromHandle",newName:"getDescriptorTypeFromHandle"}]),rn(ym.prototype,"Camera.prototype",[{name:"getSplitFrustum"}]),function(e){e[e.DIRECTIONAL=0]="DIRECTIONAL",e[e.SPHERE=1]="SPHERE",e[e.SPOT=2]="SPOT",e[e.UNKNOWN=3]="UNKNOWN"}(mv||(mv=e("c9",{})));const dv=e("ch",(e=>4*Math.PI*Math.PI*e*e));class vv{constructor(){this._baked=!1,this._color=new Gn(1,1,1),this._colorTemp=6550,this._colorTempRGB=new Gn(1,1,1),this._scene=null,this._node=null,this._name=null,this._useColorTemperature=!1,this._type=mv.UNKNOWN}_init(){switch(this._type){case mv.DIRECTIONAL:this._nativeObj=new Yi;break;case mv.SPHERE:this._nativeObj=new Qi;break;case mv.SPOT:this._nativeObj=new Xi}this._nativeObj.setType(this._type)}_destroy(){this._nativeObj=null}get baked(){return this._baked}set baked(e){this._baked=e}set color(e){this._color.set(e),this._nativeObj.setColor(e)}get color(){return this._color}set useColorTemperature(e){this._useColorTemperature=e,this._nativeObj.setUseColorTemperature(e)}get useColorTemperature(){return this._useColorTemperature}set colorTemperature(e){this._colorTemp=e,pv(this._colorTempRGB,this._colorTemp),this._nativeObj.setColorTemperatureRGB(this._colorTempRGB)}get colorTemperature(){return this._colorTemp}get colorTemperatureRGB(){return this._colorTempRGB}set node(e){this._node=e,this._node&&(this._node.hasChangedFlags|=_v.ROTATION,this._nativeObj.setNode(e?e.native:null))}get node(){return this._node}get type(){return this._type}get name(){return this._name}set name(e){this._name=e}get scene(){return this._scene}get native(){return this._nativeObj}initialize(){this._init(),this.color=new Gn(1,1,1),this.colorTemperature=6550}attachToScene(e){this._scene=e}detachFromScene(){this._scene=null}destroy(){this._name=null,this._node=null,this._destroy()}update(){}}e("cd",vv);const gv=new Gn(0,0,-1),yv=new Gn;class Av extends vv{set direction(e){Gn.normalize(this._dir,e),this._nativeObj.setDirection(e)}get direction(){return this._dir}set illuminance(e){this._illuminance=e,this._nativeObj.setIlluminance(e)}get illuminance(){return this._illuminance}constructor(){super(),this._dir=new Gn(1,-1,-1),this._illuminance=lo.SUN_ILLUM,this._type=mv.DIRECTIONAL}initialize(){super.initialize(),this.illuminance=lo.SUN_ILLUM,this.direction=new Gn(1,-1,-1)}update(){this._node&&this._node.hasChangedFlags&&(this.direction=Gn.transformQuat(yv,gv,this._node.worldRotation))}}var xv,bv,Cv,Sv,Ev,wv,Tv,Pv;e("cg",Av);let Iv=e("ek",Rc("cc.EffectAsset")((Pv=Tv=class e extends $l{constructor(...e){super(...e),dc(this,"techniques",Cv,this),dc(this,"shaders",Sv,this),dc(this,"combinations",Ev,this),dc(this,"hideInEditor",wv,this)}static register(t){e._effects[t.name]=t}static remove(t){if("string"!=typeof t)e._effects[t.name]&&e._effects[t.name].equals(t)&&delete e._effects[t.name];else{if(e._effects[t])return void delete e._effects[t];for(const n in e._effects)if(e._effects[n]._uuid===t)return void delete e._effects[n]}}static get(t){if(e._effects[t])return e._effects[t];for(const n in e._effects)if(e._effects[n]._uuid===t)return e._effects[n];return null}static getAll(){return e._effects}onLoaded(){Wd.register(this),e.register(this),c.game.once(c.Game.EVENT_ENGINE_INITED,this._precompile,this)}_precompile(){const e=c.director.root;for(let t=0;t<this.shaders.length;t++){const n=this.shaders[t],i=this.combinations[t];i&&Object.keys(i).reduce(((e,t)=>e.reduce(((e,n)=>{const o=i[t];for(let i=0;i<o.length;++i){const a={...n};a[t]=o[i],e.push(a)}return e}),[])),[{}]).forEach((t=>Wd.getGFXShader(e.device,n.name,t,e.pipeline)))}}destroy(){return e.remove(this),super.destroy()}initDefault(t){super.initDefault(t);const n=e.get("unlit");this.name="unlit",this.shaders=n.shaders,this.combinations=n.combinations,this.techniques=n.techniques}validate(){return this.techniques.length>0&&this.shaders.length>0}},Tv._effects={},Cv=vc((bv=Pv).prototype,"techniques",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Sv=vc(bv.prototype,"shaders",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ev=vc(bv.prototype,"combinations",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),wv=vc(bv.prototype,"hideInEditor",[zc,Lc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xv=bv))||xv);var Rv,Nv,Dv,Mv,Ov,zv,Lv,Fv,Uv;c.EffectAsset=Iv;let Bv=e("cB",(Rv=Rc("cc.Material"),Nv=rl(Iv),Rv((Ov=vc((Mv=class e extends $l{static getHash(e){let t=0;for(const n of e.passes)t^=n.hash;return t}constructor(){super(),dc(this,"_effectAsset",Ov,this),dc(this,"_techIdx",zv,this),dc(this,"_defines",Lv,this),dc(this,"_states",Fv,this),dc(this,"_props",Uv,this),this._passes=[],this._hash=0}get effectAsset(){return this._effectAsset}get effectName(){return this._effectAsset?this._effectAsset.name:""}get technique(){return this._techIdx}get passes(){return this._passes}get hash(){return this._hash}get parent(){return null}get owner(){return null}initialize(e){this._passes.length?P(12005):(this._defines||(this._defines=[]),this._states||(this._states=[]),this._props||(this._props=[]),void 0!==e.technique&&(this._techIdx=e.technique),e.effectAsset?this._effectAsset=e.effectAsset:e.effectName&&(this._effectAsset=Iv.get(e.effectName)),e.defines&&this._prepareInfo(e.defines,this._defines),e.states&&this._prepareInfo(e.states,this._states),this._update())}reset(e){this.initialize(e)}destroy(){return this._doDestroy(),super.destroy()}recompileShaders(e,t){console.warn(`Shaders in material asset '${this.name}' cannot be modified at runtime, please instantiate the material first.`)}overridePipelineStates(e,t){console.warn(`Pipeline states in material asset '${this.name}' cannot be modified at runtime, please instantiate the material first.`)}onLoaded(){this._update()}resetUniforms(e=!0){this._props.length=this._passes.length;for(let e=0;e<this._props.length;e++)this._props[e]={};if(e)for(const e of this._passes)e.resetUBOs(),e.resetTextures()}setProperty(e,t,n){let i=!1;if(void 0===n){const n=this._passes,o=n.length;for(let a=0;a<o;a++){const o=n[a];this._uploadProperty(o,e,t)&&(this._props[o.propertyIndex][e]=t,i=!0)}}else{if(n>=this._passes.length)return void console.warn(`illegal pass index: ${n}.`);const o=this._passes[n];this._uploadProperty(o,e,t)&&(this._props[o.propertyIndex][e]=t,i=!0)}i||console.warn(`illegal property name: ${e}.`)}getProperty(e,t){if(void 0===t){const t=this._props,n=t.length;for(let i=0;i<n;i++){const n=t[i];if(e in n)return n[e]}}else{if(t>=this._props.length)return console.warn(`illegal pass index: ${t}.`),null;const n=this._props[this._passes[t].propertyIndex];if(e in n)return n[e]}return null}copy(e){this._techIdx=e._techIdx,this._props.length=e._props.length;for(let t=0;t<e._props.length;t++)this._props[t]={...e._props[t]};this._defines.length=e._defines.length;for(let t=0;t<e._defines.length;t++)this._defines[t]={...e._defines[t]};this._states.length=e._states.length;for(let t=0;t<e._states.length;t++)this._states[t]={...e._states[t]};this._effectAsset=e._effectAsset,this._update()}_prepareInfo(e,t){let n=e;if(!Array.isArray(n)){const e=this._effectAsset?this._effectAsset.techniques[this._techIdx].passes.length:1;n=Array(e).fill(n)}for(let e=0;e<n.length;++e)Object.assign(t[e]||(t[e]={}),n[e])}_createPasses(){const e=this._effectAsset.techniques[this._techIdx||0];if(!e)return[];const t=e.passes.length,n=[];for(let i=0;i<t;++i){const t=e.passes[i],o=t.passIndex=i,a=t.defines=this._defines[o]||(this._defines[o]={}),r=t.stateOverrides=this._states[o]||(this._states[o]={});if(void 0!==t.propertyIndex&&(Object.assign(a,this._defines[t.propertyIndex]),Object.assign(r,this._states[t.propertyIndex])),void 0!==t.embeddedMacros&&Object.assign(a,t.embeddedMacros),t.switch&&!a[t.switch])continue;const s=new $d(c.director.root);s.initialize(t),n.push(s)}return n}_update(t=!0){if(this._effectAsset){this._passes=this._createPasses();const e=this._effectAsset.techniques[this._techIdx].passes.length;if(this._props.length=e,t)this._passes.forEach(((e,t)=>{let n=this._props[t];n||(n=this._props[t]={}),void 0!==e.propertyIndex&&Object.assign(n,this._props[e.propertyIndex]);for(const t in n)this._uploadProperty(e,t,n[t])}));else for(let e=0;e<this._props.length;e++)this._props[e]={}}this._hash=e.getHash(this)}_uploadProperty(e,t,n){const i=e.getHandle(t);if(!i)return!1;const o=$d.getPropertyTypeFromHandle(i);if(o===wd.BUFFER)Array.isArray(n)?e.setUniformArray(i,n):null!==n?e.setUniform(i,n):e.resetUniform(t);else if(o===wd.TEXTURE)if(Array.isArray(n))for(let t=0;t<n.length;t++)this._bindTexture(e,i,n[t],t);else n?this._bindTexture(e,i,n):e.resetTexture(t);return!0}_bindTexture(e,t,n,i){const o=$d.getBindingFromHandle(t);if(n instanceof Vr)e.bindTexture(o,n,i);else if(n instanceof Km){const t=n.getGFXTexture();if(!t||!t.width||!t.height)return;e.bindTexture(o,t,i),e.bindSampler(o,n.getGFXSampler(),i)}}_doDestroy(){if(this._passes&&this._passes.length)for(const e of this._passes)e.destroy();this._passes.length=0}initDefault(e){super.initDefault(e),this.initialize({effectName:"unlit",defines:{USE_COLOR:!0}}),this.setProperty("mainColor",new Un("#ff00ff"))}validate(){return!!this._effectAsset&&!this._effectAsset.isDefault&&this.passes.length>0}}).prototype,"_effectAsset",[Nv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zv=vc(Mv.prototype,"_techIdx",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Lv=vc(Mv.prototype,"_defines",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Fv=vc(Mv.prototype,"_states",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Uv=vc(Mv.prototype,"_props",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Dv=Mv))||Dv));c.Material=Bv;const kv=Be({Low_256x256:256,Medium_512x512:512,High_1024x1024:1024,Ultra_2048x2048:2048}),jv=Be({Planar:0,ShadowMap:1}),Gv=Be({HARD:0,SOFT:1,SOFT_2X:2}),Vv=jv.ShadowMap+1;class Hv{get enabled(){return this._enabled}set enabled(e){this._setEnable(e),this.activate()}get normal(){return this._normal}set normal(e){Gn.copy(this._normal,e),this._nativeObj.normal=this._normal}get distance(){return this._distance}set distance(e){this._distance=e,this._nativeObj.distance=e}get shadowColor(){return this._shadowColor}set shadowColor(e){this._shadowColor=e,this._nativeObj.color=e}get type(){return this._type}set type(e){this._setType(e),this.activate()}get near(){return this._near}set near(e){this._near=e,this._nativeObj.nearValue=e}get far(){return this._far}set far(e){this._far=e,this._nativeObj.farValue=e}get orthoSize(){return this._orthoSize}set orthoSize(e){this._orthoSize=e,this._nativeObj.orthoSize=e}get size(){return this._size}set size(e){this._size.set(e),this._nativeObj.size=e}get pcf(){return this._pcf}set pcf(e){this._pcf=e,this._nativeObj.pcfType=e}get shadowMapDirty(){return this._shadowMapDirty}set shadowMapDirty(e){this._shadowMapDirty=e,this._nativeObj.shadowMapDirty=e}get bias(){return this._bias}set bias(e){this._bias=e,this._nativeObj.bias=e}get normalBias(){return this._normalBias}set normalBias(e){this._normalBias=e,this._nativeObj.normalBias=e}get saturation(){return this._saturation}set saturation(e){this._saturation=e,this._nativeObj.saturation=e}get autoAdapt(){return this._autoAdapt}set autoAdapt(e){this._autoAdapt=e,this._nativeObj.autoAdapt=e}get matLight(){return this._matLight}get material(){return this._material}get instancingMaterial(){return this._instancingMaterial}get native(){return this._nativeObj}constructor(){this.sphere=new No(0,0,0,.01),this.maxReceived=4,this._normal=new Gn(0,1,0),this._shadowColor=new Un(0,0,0,76),this._matLight=new ii,this._material=null,this._instancingMaterial=null,this._size=new si(512,512),this._enabled=!1,this._distance=0,this._type=Vv,this._near=0,this._far=0,this._orthoSize=1,this._pcf=0,this._shadowMapDirty=!1,this._bias=0,this._normalBias=0,this._autoAdapt=!0,this._saturation=.75,this._nativeObj=new $i}getPlanarShader(e){return this._material||(this._material=new Bv,this._material.initialize({effectName:"planar-shadow"}),this._nativeObj.planarPass=this._material.passes[0].native),this._material.passes[0].getShaderVariant(e)}getPlanarInstanceShader(e){return this._instancingMaterial||(this._instancingMaterial=new Bv,this._instancingMaterial.initialize({effectName:"planar-shadow",defines:{USE_INSTANCING:!0}}),this._nativeObj.instancePass=this._instancingMaterial.passes[0].native),this._instancingMaterial.passes[0].getShaderVariant(e)}_setEnable(e){this._enabled=e,this._nativeObj.enabled=e,e||this._setType(Vv)}_setType(e){this._type=this.enabled?e:Vv,this._nativeObj.shadowType=this._type}initialize(e){this.near=e.near,this.far=e.far,this.orthoSize=e.orthoSize,this.size=e.size,this.pcf=e.pcf,this.normal=e.normal,this.distance=e.distance,this.shadowColor=e.shadowColor,this.bias=e.bias,this.normalBias=e.normalBias,this.maxReceived=e.maxReceived,this.autoAdapt=e.autoAdapt,this._setEnable(e.enabled),this._setType(e.type),this.saturation=e.saturation}activate(){if(this.enabled)this.type===jv.ShadowMap?this._updatePipeline():this._updatePlanarInfo();else{const e=c.director.root;e.pipeline.macros.CC_RECEIVE_SHADOW=0,e.onGlobalPipelineStateChanged()}}_updatePlanarInfo(){this._material||(this._material=new Bv,this._material.initialize({effectName:"planar-shadow"}),this._nativeObj.planarPass=this._material.passes[0].native),this._instancingMaterial||(this._instancingMaterial=new Bv,this._instancingMaterial.initialize({effectName:"planar-shadow",defines:{USE_INSTANCING:!0}}),this._nativeObj.instancePass=this._instancingMaterial.passes[0].native);const e=c.director.root;e.pipeline.macros.CC_RECEIVE_SHADOW=0,e.onGlobalPipelineStateChanged()}_updatePipeline(){const e=c.director.root;e.pipeline.macros.CC_RECEIVE_SHADOW=1,e.onGlobalPipelineStateChanged()}_destroy(){this._nativeObj=null}destroy(){this._destroy(),this._material&&this._material.destroy(),this._instancingMaterial&&this._instancingMaterial.destroy(),this.sphere.destroy()}}Hv.MAX_FAR=2e3,Hv.COEFFICIENT_OF_EXPANSION=2*Math.sqrt(3),c.Shadows=Hv;class Wv extends $d{get parent(){return this._parent}constructor(e,t){super(e.root),this._parent=void 0,this._owner=void 0,this._dontNotify=!1,this._parent=e,this._owner=t,this._doInit(this._parent,!0);for(let e=0;e<this._shaderInfo.blocks.length;e++){const t=this._shaderInfo.blocks[e],n=this._blocks[t.binding],i=this._parent.blocks[t.binding];n.set(i)}this._setRootBufferDirty(!0);const n=this._parent;for(let e=0;e<this._shaderInfo.samplerTextures.length;e++){const t=this._shaderInfo.samplerTextures[e];for(let e=0;e<t.count;e++){const i=n._descriptorSet.getSampler(t.binding,e),o=n._descriptorSet.getTexture(t.binding,e);this._descriptorSet.bindSampler(t.binding,i,e),this._descriptorSet.bindTexture(t.binding,o,e)}}super.tryCompile()}overridePipelineStates(e,t){this._bs.reset(),this._rs.reset(),this._dss.reset(),$d.fillPipelineInfo(this,e),$d.fillPipelineInfo(this,t),this._onStateChange()}tryCompile(e){if(e&&!Fd(this._defines,e))return!1;const t=super.tryCompile();return this._onStateChange(),t}beginChangeStatesSilently(){this._dontNotify=!0}endChangeStatesSilently(){this._dontNotify=!1}_syncBatchingScheme(){this._defines.USE_BATCHING=this._defines.USE_INSTANCING=!1,this._setBatchingScheme(Jd.NONE)}_onStateChange(){this._setHash($d.getPassHash(this)),this._owner.onPassStateChange(this._dontNotify)}}class qv extends Bv{get parent(){return this._parent}get owner(){return this._owner}constructor(e){super(),this._passes=[],this._parent=void 0,this._owner=void 0,this._subModelIdx=0,this._parent=e.parent,this._owner=e.owner||null,this._subModelIdx=e.subModelIdx||0,this.copy(this._parent)}recompileShaders(e,t){if(this._passes&&this.effectAsset)if(void 0===t)for(const t of this._passes)t.tryCompile(e);else this._passes[t].tryCompile(e)}overridePipelineStates(e,t){if(!this._passes||!this.effectAsset)return;const n=this.effectAsset.techniques[this.technique].passes;if(void 0===t)for(let t=0;t<this._passes.length;t++){const i=this._passes[t],o=this._states[t]||(this._states[t]={});for(const t in e)o[t]=e[t];i.overridePipelineStates(n[i.passIndex],o)}else{const i=this._states[t]||(this._states[t]={});for(const t in e)i[t]=e[t];this._passes[t].overridePipelineStates(n[t],i)}}destroy(){return this._doDestroy(),!0}onPassStateChange(e){this._hash=Bv.getHash(this),!e&&this._owner&&this._owner._onRebuildPSO(this._subModelIdx,this)}_createPasses(){const e=[],t=this._parent.passes;if(!t)return e;for(let n=0;n<t.length;++n)e.push(new Wv(t[n],this));return e}}e("d2",qv);let Yv=null,Xv=null;class Qv{get model(){return this._model}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e),e?this.activate():this._updatePipeline()}get useIBL(){return this._useIBL}set useIBL(e){this._setUseIBL(e),this._updatePipeline()}get isRGBE(){return this._isRGBE}set isRGBE(e){e&&(Xv&&Xv.recompileShaders({USE_RGBE_CUBEMAP:e}),this._model&&this._model.setSubModelMaterial(0,Xv)),this._setIsRGBE(e),this._updatePipeline()}get envmap(){return this._envmap}set envmap(e){this._envmap=e||this._default,this._envmap&&(c.director.root.pipeline.pipelineSceneData.ambient.albedoArray[3]=this._envmap.mipmapLevel,this._updateGlobalBinding())}get native(){return this._nativeObj}constructor(){this._envmap=null,this._globalDSManager=null,this._model=null,this._default=null,this._enabled=!1,this._useIBL=!1,this._isRGBE=!1,this._nativeObj=new Ki}_setEnabled(e){this._enabled=e,this._nativeObj.enabled=e}_setUseIBL(e){this._useIBL=e,this._nativeObj.useIBL=e}_setIsRGBE(e){this._isRGBE=e,this._nativeObj.isRGBE=e}initialize(e){this._setEnabled(e.enabled),this._setUseIBL(e.useIBL),this._setIsRGBE(e.isRGBE),this._envmap=e.envmap}activate(){const e=c.director.root.pipeline,t=e.pipelineSceneData.ambient;if(this._globalDSManager=e.globalDSManager,this._default=Yd.get("default-cube-texture"),this._model||(this._model=c.director.root.createModel(c.renderer.scene.Model),this._model._initLocalDescriptors=()=>{},this._nativeObj.model=this._model.native),this._envmap||(this._envmap=this._default),t.albedoArray[3]=this._envmap.mipmapLevel,Xv)Xv.recompileShaders({USE_RGBE_CUBEMAP:this.isRGBE});else{const e=new Bv;e.initialize({effectName:"skybox",defines:{USE_RGBE_CUBEMAP:this.isRGBE}}),Xv=new qv({parent:e})}this.enabled&&(Yv||(Yv=c.utils.createMesh(c.primitives.box({width:2,height:2,length:2}))),this._model.initSubModel(0,Yv.renderingSubMeshes[0],Xv)),this._updateGlobalBinding(),this._updatePipeline()}_updatePipeline(){const e=this.useIBL?this.isRGBE?2:1:0,t=c.director.root,n=t.pipeline;n.macros.CC_USE_IBL!==e&&(n.macros.CC_USE_IBL=e,t.onGlobalPipelineStateChanged())}_updateGlobalBinding(){const e=this.envmap.getGFXTexture(),t=Lm.getSampler(c.director._device,this.envmap.getSamplerHash());this._globalDSManager.bindSampler(bp,t),this._globalDSManager.bindTexture(bp,e),this._globalDSManager.update()}_destroy(){this._nativeObj=null}destroy(){this._destroy()}}c.Skybox=Qv;class Kv extends vv{_init(){super._init(),this._nativeObj.setPosition(this._pos),this._nativeObj.setAABB(this._aabb.native)}_destroy(){super._destroy()}get position(){return this._pos}set size(e){this._size=e,this._nativeObj.setSize(e)}get size(){return this._size}set range(e){this._range=e,this._nativeObj.setRange(e),this._needUpdate=!0}get range(){return this._range}set luminance(e){this._luminance=e,this._nativeObj.setIlluminance(e)}get luminance(){return this._luminance}get aabb(){return this._aabb}constructor(){super(),this._needUpdate=!1,this._size=.15,this._range=1,this._luminance=0,this._pos=void 0,this._aabb=void 0,this._aabb=cc.create(),this._pos=new Gn,this._type=mv.SPHERE}initialize(){super.initialize(),this.size=.15,this.range=1,this.luminance=1700/dv(.15)}update(){if(this._node&&(this._node.hasChangedFlags||this._needUpdate)){this._node.getWorldPosition(this._pos);const e=this._range;cc.set(this._aabb,this._pos.x,this._pos.y,this._pos.z,e,e,e),this._needUpdate=!1}}}e("ci",Kv);const Zv=new Gn(0,0,-1),Jv=new Qn,$v=new ii,eg=new ii,tg=new ii,ng=new ii;class ig extends vv{_init(){super._init();{const e=this._nativeObj;e.setAABB(this._aabb.native),e.setFrustum(this._frustum),e.setDirection(this._dir),e.setPosition(this._pos)}}_destroy(){super._destroy()}_setDirection(e){this._dir.set(e),this._nativeObj.setDirection(e)}get position(){return this._pos}set size(e){this._size=e,this._nativeObj.setSize(e)}get size(){return this._size}set range(e){this._range=e,this._nativeObj.setRange(e),this._needUpdate=!0}get range(){return this._range}set luminance(e){this._luminance=e,this._nativeObj.setIlluminance(e)}get luminance(){return this._luminance}get direction(){return this._dir}get spotAngle(){return this._spotAngle}set spotAngle(e){this._angle=e,this._spotAngle=Math.cos(.5*e),this._nativeObj.setAngle(this._spotAngle),this._needUpdate=!0}set aspect(e){this._aspect=e,this._nativeObj.setAspect(e),this._needUpdate=!0}get aspect(){return this._aspect}get aabb(){return this._aabb}get frustum(){return this._frustum}constructor(){super(),this._dir=new Gn(1,-1,-1),this._range=5,this._spotAngle=Math.cos(Math.PI/6),this._pos=void 0,this._aabb=void 0,this._frustum=void 0,this._angle=0,this._needUpdate=!1,this._size=.15,this._luminance=0,this._aspect=0,this._aabb=cc.create(),this._frustum=mc.create(),this._pos=new Gn,this._type=mv.SPOT}initialize(){super.initialize(),this.size=.15,this.aspect=1,this.luminance=1700/dv(.15),this.range=Math.cos(Math.PI/6),this._setDirection(new Gn(1,-1,-1))}update(){this._node&&(this._node.hasChangedFlags||this._needUpdate)&&(this._node.getWorldPosition(this._pos),Gn.transformQuat(this._dir,Zv,this._node.getWorldRotation(Jv)),Gn.normalize(this._dir,this._dir),cc.set(this._aabb,this._pos.x,this._pos.y,this._pos.z,this._range,this._range,this._range),this._node.getWorldRT($v),ii.invert($v,$v),ii.perspective(eg,this._angle,1,.001,this._range),ii.multiply(tg,eg,$v),this._frustum.update(tg,ng),this._needUpdate=!1)}}e("ck",ig);var og=Object.freeze({__proto__:null,Ambient:lo,get CameraFOVAxis(){return rm},get CameraProjection(){return sm},get CameraAperture(){return cm},get CameraISO(){return lm},get CameraShutter(){return _m},SKYBOX_FLAG:vm,Camera:ym,CameraVisFlags:fv,VisibilityFlags:hv,DirectionalLight:Av,ColorTemperatureToRGB:pv,get LightType(){return mv},nt2lm:dv,Light:vv,get ModelType(){return av},Model:cv,ShadowSize:kv,ShadowType:jv,PCFType:Gv,Shadows:Hv,RenderScene:uv,Skybox:Qv,SphereLight:Kv,SpotLight:ig,SubModel:tv,NativeNode:ji,NativeScene:Gi,NativeModel:Vi,NativeSkinningModel:Hi,NativeBakedSkinningModel:Wi,NativeLight:qi,NativeDirectionalLight:Yi,NativeSpotLight:Xi,NativeSphereLight:Qi,NaitveSkybox:Ki,NativeFog:Zi,NativeAmbient:Ji,NativeShadow:$i,NativeCamera:eo,NativeRenderWindow:to,NativeRenderScene:no,NativeDrawBatch2D:io,NativePass:oo,NativeSubModel:ao,NativeRoot:ro,NativePipelineSharedSceneData:so,NativeAABB:co});let ag,rg;function sg(e){return--e,e|=e>>16,e|=e>>8,e|=e>>4,e|=e>>2,e|=e>>1,++e}function cg(e,t){return Math.ceil(e/t)*t}!function(e){e[e.OPAQUE=0]="OPAQUE",e[e.TRANSPARENT=1]="TRANSPARENT",e[e.OVERLAY=2]="OVERLAY"}(ag||(ag={})),function(e){e[e.DEFAULT=1]="DEFAULT",e[e.FORWARD=2]="FORWARD",e[e.SHADOWCAST=4]="SHADOWCAST"}(rg||(rg={}));class lg{constructor(e){this._device=void 0,this._format=Bo.UNKNOWN,this._formatSize=0,this._chunks=[],this._chunkCount=0,this._handles=[],this._region0=new Ia,this._region1=new Ia,this._region2=new Ia,this._roundUpFn=null,this._bufferViewCtor=Uint8Array,this._channels=4,this._alignment=1,this._device=e}initialize(e){const t=xr[e.format];this._format=e.format,this._formatSize=t.size,this._channels=t.count,this._bufferViewCtor=Nr(t),this._roundUpFn=e.roundUpFn||null,this._alignment=e.alignment||1,e.inOrderFree&&(this.alloc=this._McDonaldAlloc)}destroy(){for(let e=0;e<this._chunkCount;++e)this._chunks[e].texture.destroy();this._chunks.length=0,this._handles.length=0}alloc(e,t){e=cg(e,this._alignment);let n=-1,i=-1;if(void 0!==t&&(n=t,i=this._findAvailableSpace(e,n)),i<0)for(let t=0;t<this._chunkCount&&(n=t,i=this._findAvailableSpace(e,n),!(i>=0));++t);if(i>=0){const t=this._chunks[n];t.start+=e;const o={chunkIdx:n,start:i,end:i+e,texture:t.texture};return this._handles.push(o),o}const o=Math.sqrt(e/this._formatSize),a=this._roundUpFn&&this._roundUpFn(o,this._formatSize)||Math.max(1024,sg(o)),r=this._chunks[this.createChunk(a)];r.start+=e;const s={chunkIdx:this._chunkCount-1,start:0,end:e,texture:r.texture};return this._handles.push(s),s}free(e){for(let t=0;t<this._handles.length;++t)if(this._handles[t]===e)return this._chunks[e.chunkIdx].end=e.end,void this._handles.splice(t,1)}createChunk(e){const t=e*e*this._formatSize;x(`TextureBufferPool: Allocate chunk ${this._chunkCount}, size: ${t}, format: ${this._format}`);const n={texture:this._device.createTexture(new Ua(qo.TEX2D,Yo.SAMPLED|Yo.TRANSFER_DST,this._format,e,e,Xo.IMMUTABLE)),size:t,start:0,end:t};return this._chunks[this._chunkCount]=n,this._chunkCount++}update(e,t){const n=[],i=[],o=e.start/this._formatSize;let a=t.byteLength/this._formatSize,r=o%e.texture.width,s=Math.floor(o/e.texture.width),c=Math.min(e.texture.width-r,a),l=0;r>0&&(this._region0.texOffset.x=r,this._region0.texOffset.y=s,this._region0.texExtent.width=c,this._region0.texExtent.height=1,n.push(new this._bufferViewCtor(t,l*this._formatSize,c*this._channels)),i.push(this._region0),r=0,s+=1,a-=c,l+=c),a>0&&(this._region1.texOffset.x=r,this._region1.texOffset.y=s,a>e.texture.width?(this._region1.texExtent.width=e.texture.width,this._region1.texExtent.height=Math.floor(a/e.texture.width),c=this._region1.texExtent.width*this._region1.texExtent.height):(c=a,this._region1.texExtent.width=c,this._region1.texExtent.height=1),n.push(new this._bufferViewCtor(t,l*this._formatSize,c*this._channels)),i.push(this._region1),r=0,s+=this._region1.texExtent.height,a-=c,l+=c),a>0&&(this._region2.texOffset.x=r,this._region2.texOffset.y=s,this._region2.texExtent.width=a,this._region2.texExtent.height=1,n.push(new this._bufferViewCtor(t,l*this._formatSize,a*this._channels)),i.push(this._region2)),this._device.copyBuffersToTexture(n,e.texture,i)}_findAvailableSpace(e,t){const n=this._chunks[t];let i=!1,o=n.start;if(o+e<=n.size)i=!0;else{o=0;const a=this._handles.filter((e=>e.chunkIdx===t)).sort(((e,t)=>e.start-t.start));for(let t=0;t<a.length;t++){const n=a[t];if(o+e<=n.start){i=!0;break}o=n.end}!i&&o+e<=n.size&&(i=!0)}return i?o:-1}_McDonaldAlloc(e){e=cg(e,this._alignment);for(let t=0;t<this._chunkCount;++t){const n=this._chunks[t];let i=!1,o=n.start;if(o+e<=n.end?i=!0:o>n.end?o+e<=n.size?i=!0:e<=n.end&&(n.start=o=0,i=!0):o===n.end&&(n.start=o=0,n.end=n.size,e<=n.end&&(i=!0)),i){n.start+=e;const i={chunkIdx:t,start:o,end:o+e,texture:n.texture};return this._handles.push(i),i}}const t=Math.sqrt(e/this._formatSize),n=this._roundUpFn&&this._roundUpFn(t,this._formatSize)||Math.max(1024,sg(t)),i=this._chunks[this.createChunk(n)];i.start+=e;const o={chunkIdx:this._chunkCount,start:0,end:e,texture:i.texture};return this._handles.push(o),o}}e("cm",lg);const _g=ki.addStage;var ug=Object.freeze({__proto__:null,addStage:_g,scene:og,createIA:function(e,t){if(!t.positions)return console.error("The data must have positions field"),null;const n=[],i=t.positions.length/3;for(let e=0;e<i;++e)n.push(t.positions[3*e],t.positions[3*e+1],t.positions[3*e+2]),t.normals&&n.push(t.normals[3*e],t.normals[3*e+1],t.normals[3*e+2]),t.uvs&&n.push(t.uvs[2*e],t.uvs[2*e+1]),t.colors&&n.push(t.colors[3*e],t.colors[3*e+1],t.colors[3*e+2]);const o=[];o.push(new Ka(ya.ATTR_POSITION,Bo.RGB32F)),t.normals&&o.push(new Ka(ya.ATTR_NORMAL,Bo.RGB32F)),t.uvs&&o.push(new Ka(ya.ATTR_TEX_COORD,Bo.RG32F)),t.colors&&o.push(new Ka(ya.ATTR_COLOR,Bo.RGB32F));const a=e.createBuffer(new Ma(Go.VERTEX|Go.TRANSFER_DST,Wo.HOST|Wo.DEVICE,4*n.length,4*n.length/i));a.update(new Float32Array(n));let r=null;return t.indices&&(r=e.createBuffer(new Ma(Go.INDEX|Go.TRANSFER_DST,Wo.HOST|Wo.DEVICE,2*t.indices.length,2)),r.update(new Uint16Array(t.indices))),e.createInputAssembler(new Ja(o,[a],r))},get RenderQueue(){return ag},get PassStage(){return rg},get PropertyType(){return wd},genHandle:Td,getPropertyTypeFromHandle:Pd,getTypeFromHandle:Id,getSetIndexFromHandle:e=>(e&Sd)>>>20,getBindingFromHandle:Rd,getOffsetFromHandle:Nd,customizeType:Dd,type2reader:Md,type2writer:Od,getDefaultFromType:Ld,overrideMacros:Fd,get BatchingSchemes(){return Jd},Pass:$d,getDeviceShaderVersion:Hd,programLib:Wd,get SamplerInfoIndex(){return Im},defaultSamplerHash:Dm,genSamplerHash:zm,samplerLib:Lm,nearestPOT:sg,TextureBufferPool:lg,MaterialInstance:qv,PassInstance:Wv,get PoolType(){return Vs},NULL_HANDLE:0,get NodeView(){return Hs},NodePool:Ys,get PassView(){return Xs},PassPool:Zs,get AABBView(){return Js},AABBPool:tc});e("eu",ug);const fg=Be({LINEAR:0,EXP:1,EXP_SQUARED:2,LAYERED:3}),hg=fg.LAYERED+1;class pg{set enabled(e){this._setEnable(e),e||(this._type=hg),e?this.activate():this._updatePipeline()}get enabled(){return this._enabled}set fogColor(e){this._fogColor.set(e),Un.toArray(this._colorArray,this._fogColor),this._nativeObj.color=this._fogColor}get fogColor(){return this._fogColor}get type(){return this._type}set type(e){this._setType(e),this.enabled&&this._updatePipeline()}get fogDensity(){return this._fogDensity}set fogDensity(e){this._fogDensity=e,this._nativeObj.density=e}get fogStart(){return this._fogStart}set fogStart(e){this._fogStart=e,this._nativeObj.start=e}get fogEnd(){return this._fogEnd}set fogEnd(e){this._fogEnd=e,this._nativeObj.end=e}get fogAtten(){return this._fogAtten}set fogAtten(e){this._fogAtten=e,this._nativeObj.atten=e}get fogTop(){return this._fogTop}set fogTop(e){this._fogTop=e,this._nativeObj.top=e}get fogRange(){return this._fogRange}set fogRange(e){this._fogRange=e,this._nativeObj.range=e}get colorArray(){return this._colorArray}get native(){return this._nativeObj}constructor(){this._fogColor=new Un("#C8C8C8"),this._colorArray=new Float32Array([.2,.2,.2,1]),this._enabled=!1,this._type=0,this._fogDensity=.3,this._fogStart=.5,this._fogEnd=300,this._fogAtten=5,this._fogTop=1.5,this._fogRange=1.2,this._nativeObj=new Zi}_setType(e){this._type=this.enabled?e:hg,this._nativeObj.type=this._type}_setEnable(e){this._enabled=e,this._nativeObj.enabled=e}initialize(e){this.fogColor=e.fogColor,this._setEnable(e.enabled),this._setType(e.type),this.fogDensity=e.fogDensity,this.fogStart=e.fogStart,this.fogEnd=e.fogEnd,this.fogAtten=e.fogAtten,this.fogTop=e.fogTop,this.fogRange=e.fogRange}activate(){this._updatePipeline()}_updatePipeline(){const e=c.director.root,t=this.enabled?this.type:hg,n=e.pipeline;n.macros.CC_USE_FOG!==t&&(n.macros.CC_USE_FOG=t,e.onGlobalPipelineStateChanged())}_destroy(){this._nativeObj=null}destroy(){this._destroy()}}c.Fog=pg;class mg{_init(){this._nativeObj=new so,this._nativeObj.fog=this.fog.native,this._nativeObj.ambient=this.ambient.native,this._nativeObj.skybox=this.skybox.native,this._nativeObj.shadow=this.shadows.native}get native(){return this._nativeObj}get isHDR(){return this._isHDR}set isHDR(e){this._isHDR=e,this._nativeObj.isHDR=e}get shadingScale(){return this._shadingScale}set shadingScale(e){this._shadingScale=e,this._nativeObj.shadingScale=e}get fpScale(){return this._fpScale}set fpScale(e){this._fpScale=e,this._fpScale=e}constructor(){this.fog=new pg,this.ambient=new lo,this.skybox=new Qv,this.shadows=new Hv,this.renderObjects=[],this.shadowObjects=[],this.shadowFrameBufferMap=new Map,this._isHDR=!1,this._shadingScale=1,this._fpScale=1/1024,this._init(),this.shadingScale=1,this.fpScale=1/1024}activate(e,t){return this._device=e,this._pipeline=t,!0}onGlobalPipelineStateChanged(){}destroy(){this.ambient.destroy(),this.skybox.destroy(),this.fog.destroy(),this.shadows.destroy(),this._nativeObj=null}}function dg(e,t){for(const n of t)Array.isArray(n)?dg(e,n):e.push(n)}function vg(e){const t=[];return dg(t,e),t.join("")}const gg=Lt.Flags.Destroyed,yg=Lt.Flags.PersistentMask,Ag=Rt.IDENTIFIER_RE,xg="var ",bg="o",Cg={"cc.ClickEvent":!1,"cc.PrefabInfo":!1},Sg=Rt.escapeForJS;class Eg{constructor(e,t){this.varName=void 0,this.expression=void 0,this.varName=e,this.expression=t}toString(){return`${xg+this.varName}=${this.expression};`}}function wg(e,t){return t instanceof Eg?new Eg(t.varName,e+t.expression):e+t}function Tg(e,t,n){Array.isArray(n)?(n[0]=wg(t,n[0]),e.push(n)):e.push(`${wg(t,n)};`)}class Pg{constructor(e){this._exps=void 0,this._targetExp=void 0,this._exps=[],this._targetExp=e}append(e,t){this._exps.push([e,t])}writeCode(e){let t;if(this._exps.length>1)e.push(`t=${this._targetExp};`),t="t";else{if(1!==this._exps.length)return;t=this._targetExp}for(let n=0;n<this._exps.length;n++){const i=this._exps[n];Tg(e,`${t+Ig(i[0])}=`,i[1])}}}function Ig(e){return Ag.test(e)?`.${e}`:`[${Sg(e)}]`}Pg.pool=void 0,Pg.pool=new ze((e=>{e._exps.length=0,e._targetExp=null}),1),Pg.pool.get=function(e){const t=this._get()||new Pg;return t._targetExp=e,t};class Rg{constructor(e,t){let n;this.parent=void 0,this.objsToClear_iN$t=void 0,this.codeArray=void 0,this.objs=void 0,this.funcs=void 0,this.funcModuleCache=void 0,this.globalVariables=void 0,this.globalVariableId=void 0,this.localVariableId=void 0,this.result=void 0,this.parent=t,this.objsToClear_iN$t=[],this.codeArray=[],this.objs=[],this.funcs=[],this.funcModuleCache=se(),ge(this.funcModuleCache,Cg),this.globalVariables=[],this.globalVariableId=0,this.localVariableId=0,this.codeArray.push("var o,t;","if(R){","o=R;","}else{",`o=R=new ${this.getFuncModule(e.constructor,!0)}();`,"}"),e._iN$t={globalVar:"R"},this.objsToClear_iN$t.push(e),this.enumerateObject(this.codeArray,e),this.globalVariables.length>0&&(n=`${xg+this.globalVariables.join(",")};`);const i=vg(["return (function(R){",n||[],this.codeArray,"return o;","})"]);this.result=Function("O","F",i)(this.objs,this.funcs);for(let e=0,t=this.objsToClear_iN$t.length;e<t;++e)this.objsToClear_iN$t[e]._iN$t=null;this.objsToClear_iN$t.length=0}getFuncModule(e,t){const n=ce(e);if(n){const t=this.funcModuleCache[n];if(t)return t;if(void 0===t){let t=-1!==n.indexOf(".");if(t)try{if(t=e===Function(`return ${n}`)(),t)return this.funcModuleCache[n]=n,n}catch(e){}}}let i=this.funcs.indexOf(e);i<0&&(i=this.funcs.length,this.funcs.push(e));let o=`F[${i}]`;return t&&(o=`(${o})`),this.funcModuleCache[n]=o,o}getObjRef(e){let t=this.objs.indexOf(e);return t<0&&(t=this.objs.length,this.objs.push(e)),`O[${t}]`}setValueType(e,t,n,i){const o=Pg.pool.get(i);let a=t.constructor.__props__;a||(a=Object.keys(t));for(let e=0;e<a.length;e++){const i=a[e],r=n[i];if(t[i]===r)continue;const s=this.enumerateField(n,i,r);o.append(i,s)}o.writeCode(e),Pg.pool.put(o)}enumerateCCClass(e,t,n){const i=n.__values__,o=st(n);for(let n=0;n<i.length;n++){const a=i[n],r=t[a];let s=o[a+"$_$default"];if(!Ng(s,r))if("object"==typeof r&&r instanceof c.ValueType&&(s=Rt.getDefault(s),s&&s.constructor===r.constructor)){const t=bg+Ig(a);this.setValueType(e,s,r,t)}else this.setObjProp(e,t,a,r)}}instantiateArray(e){if(0===e.length)return"[]";const t="a"+ ++this.localVariableId,n=[new Eg(t,`new Array(${e.length})`)];e._iN$t={globalVar:"",source:n},this.objsToClear_iN$t.push(e);for(let i=0;i<e.length;++i)Tg(n,`${t}[${i}]=`,this.enumerateField(e,i,e[i]));return n}instantiateTypedArray(e){const t=e.constructor.name;if(0===e.length)return`new ${t}`;const n="a"+ ++this.localVariableId,i=[new Eg(n,`new ${t}(${e.length})`)];e._iN$t={globalVar:"",source:i},this.objsToClear_iN$t.push(e);for(let t=0;t<e.length;++t)0!==e[t]&&Tg(i,`${n}[${t}]=`,e[t]);return i}enumerateField(e,t,n){if("object"==typeof n&&n){const e=n._iN$t;if(e){let t=e.globalVar;if(!t){t=e.globalVar="v"+ ++this.globalVariableId,this.globalVariables.push(t);const n=e.source[0];e.source[0]=wg(`${t}=`,n)}return t}return ArrayBuffer.isView(n)?this.instantiateTypedArray(n):Array.isArray(n)?this.instantiateArray(n):this.instantiateObj(n)}return"function"==typeof n?this.getFuncModule(n):"string"==typeof n?Sg(n):("_objFlags"===t&&e instanceof Lt&&(n&=yg),n)}setObjProp(e,t,n,i){Tg(e,`${bg+Ig(n)}=`,this.enumerateField(t,n,i))}enumerateObject(e,t){const n=t.constructor;if(c.Class._isCCClass(n))this.enumerateCCClass(e,t,n);else for(const n in t){if(!t.hasOwnProperty(n)||95===n.charCodeAt(0)&&95===n.charCodeAt(1)&&"__type__"!==n)continue;const i=t[n];"object"==typeof i&&i&&i===t._iN$t||this.setObjProp(e,t,n,i)}}instantiateObj(e){if(e instanceof c.ValueType)return Rt.getNewValueTypeCode(e);if(e instanceof c.Asset)return this.getObjRef(e);if(e._objFlags&gg)return null;let t;const n=e.constructor;if(c.Class._isCCClass(n)){if(this.parent)if(this.parent instanceof c.Component){if(e instanceof c._BaseNode||e instanceof c.Component)return this.getObjRef(e)}else if(this.parent instanceof c._BaseNode)if(e instanceof c._BaseNode){if(!e.isChildOf(this.parent))return this.getObjRef(e)}else if(e instanceof c.Component&&!e.node.isChildOf(this.parent))return this.getObjRef(e);t=new Eg(bg,`new ${this.getFuncModule(n,!0)}()`)}else if(n===Object)t=new Eg(bg,"{}");else{if(n)return this.getObjRef(e);t=new Eg(bg,"Object.create(null)")}const i=[t];return e._iN$t={globalVar:"",source:i},this.objsToClear_iN$t.push(e),this.enumerateObject(i,e),["(function(){",i,"return o;})();"]}}function Ng(e,t){if("function"==typeof e)try{e=e()}catch(e){return!1}if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t&&e.constructor===t.constructor)if(e instanceof c.ValueType){if(e.equals(t))return!0}else{if(Array.isArray(e))return 0===e.length&&0===t.length;if(e.constructor===Object)return ne(e)&&ne(t)}return!1}class Dg{get uiTransformComp(){return this._uiTransformComp||(this._uiTransformComp=this._node.getComponent("cc.UITransform")),this._uiTransformComp}set uiTransformComp(e){this._uiTransformComp=e}get uiComp(){return this._uiComp}set uiComp(e){this._uiComp&&e?P(12002):this._uiComp=e}constructor(e){this._uiComp=null,this.opacity=1,this.localOpacity=1,this._uiTransformComp=null,this._node=void 0,this.uiTransformDirty=!0,this._node=e}}let Mg;!function(e){e.TOUCH_START="touch-start",e.TOUCH_MOVE="touch-move",e.TOUCH_END="touch-end",e.TOUCH_CANCEL="touch-cancel",e.MOUSE_DOWN="mouse-down",e.MOUSE_MOVE="mouse-move",e.MOUSE_UP="mouse-up",e.MOUSE_WHEEL="mouse-wheel",e.MOUSE_ENTER="mouse-enter",e.MOUSE_LEAVE="mouse-leave",e.KEY_DOWN="keydown",e.KEY_UP="keyup",e.DEVICEMOTION="devicemotion",e.TRANSFORM_CHANGED="transform-changed",e.SCENE_CHANGED_FOR_PERSISTS="scene-changed-for-persists",e.SIZE_CHANGED="size-changed",e.ANCHOR_CHANGED="anchor-changed",e.COLOR_CHANGED="color-changed",e.CHILD_ADDED="child-added",e.CHILD_REMOVED="child-removed",e.PARENT_CHANGED="parent-changed",e.NODE_DESTROYED="node-destroyed",e.LAYER_CHANGED="layer-changed",e.SIBLING_ORDER_CHANGED="sibling-order-changed"}(Mg||(Mg=e("dv",{}))),Ge(Mg),c.SystemEventType=Mg;class Og{static create(e){D(e&&e.event,1900);const t=e.event;delete e.event;let n=null;if(t===c.EventListener.TOUCH_ONE_BY_ONE?n=new Fg:t===c.EventListener.TOUCH_ALL_AT_ONCE?n=new Ug:t===c.EventListener.MOUSE?n=new Lg:t===c.EventListener.KEYBOARD?n=new kg:t===c.EventListener.ACCELERATION&&(n=new Bg(e.callback),delete e.callback),n)for(const t of Object.keys(e))n[t]=e[t];return n}get onEvent(){return this._onEvent}constructor(e,t,n){this._cameraPriority=0,this.owner=null,this.mask=null,this._previousIn=!1,this._target=null,this._onEvent=void 0,this._type=void 0,this._listenerID=void 0,this._registered=!1,this._fixedPriority=0,this._node=null,this._paused=!0,this._isEnabled=!0,this._onEvent=n,this._type=e||0,this._listenerID=t||""}_setPaused(e){this._paused=e}_isPaused(){return this._paused}_setRegistered(e){this._registered=e}_isRegistered(){return this._registered}_getType(){return this._type}_getListenerID(){return this._listenerID}_setFixedPriority(e){this._fixedPriority=e}_getFixedPriority(){return this._fixedPriority}_setSceneGraphPriority(e){this._target=e,this._node=e}_getSceneGraphPriority(){return this._node}checkAvailable(){return null!==this._onEvent}clone(){return null}setEnabled(e){this._isEnabled=e}isEnabled(){return this._isEnabled}}Og.UNKNOWN=0,Og.TOUCH_ONE_BY_ONE=1,Og.TOUCH_ALL_AT_ONCE=2,Og.KEYBOARD=3,Og.MOUSE=4,Og.ACCELERATION=6,Og.CUSTOM=8,Og.ListenerID={MOUSE:"__cc_mouse",TOUCH_ONE_BY_ONE:"__cc_touch_one_by_one",TOUCH_ALL_AT_ONCE:"__cc_touch_all_at_once",KEYBOARD:"__cc_keyboard",ACCELERATION:"__cc_acceleration"};const zg=Og.ListenerID;class Lg extends Og{constructor(){super(Og.MOUSE,zg.MOUSE,null),this.onMouseDown=null,this.onMouseUp=null,this.onMouseMove=null,this.onMouseScroll=null,this._onEvent=e=>this._callback(e)}_callback(e){switch(e.type){case Mg.MOUSE_DOWN:this.onMouseDown&&this.onMouseDown(e);break;case Mg.MOUSE_UP:this.onMouseUp&&this.onMouseUp(e);break;case Mg.MOUSE_MOVE:this.onMouseMove&&this.onMouseMove(e);break;case Mg.MOUSE_WHEEL:this.onMouseScroll&&this.onMouseScroll(e)}}clone(){const e=new Lg;return e.onMouseDown=this.onMouseDown,e.onMouseUp=this.onMouseUp,e.onMouseMove=this.onMouseMove,e.onMouseScroll=this.onMouseScroll,e}checkAvailable(){return!0}}class Fg extends Og{constructor(){super(Og.TOUCH_ONE_BY_ONE,zg.TOUCH_ONE_BY_ONE,null),this.swallowTouches=!1,this.onTouchBegan=null,this.onTouchMoved=null,this.onTouchEnded=null,this.onTouchCancelled=null,this._claimedTouches=[]}setSwallowTouches(e){this.swallowTouches=e}isSwallowTouches(){return this.swallowTouches}clone(){const e=new Fg;return e.onTouchBegan=this.onTouchBegan,e.onTouchMoved=this.onTouchMoved,e.onTouchEnded=this.onTouchEnded,e.onTouchCancelled=this.onTouchCancelled,e.swallowTouches=this.swallowTouches,e}checkAvailable(){return!!this.onTouchBegan||(w(1801),!1)}}class Ug extends Og{constructor(){super(Og.TOUCH_ALL_AT_ONCE,zg.TOUCH_ALL_AT_ONCE,null),this.onTouchesBegan=null,this.onTouchesMoved=null,this.onTouchesEnded=null,this.onTouchesCancelled=null}clone(){const e=new Ug;return e.onTouchesBegan=this.onTouchesBegan,e.onTouchesMoved=this.onTouchesMoved,e.onTouchesEnded=this.onTouchesEnded,e.onTouchesCancelled=this.onTouchesCancelled,e}checkAvailable(){return null!==this.onTouchesBegan||null!==this.onTouchesMoved||null!==this.onTouchesEnded||null!==this.onTouchesCancelled||(w(1802),!1)}}class Bg extends Og{constructor(e){super(Og.ACCELERATION,zg.ACCELERATION,null),this._onAccelerationEvent=null,this._onEvent=e=>this._callback(e),this._onAccelerationEvent=e}_callback(e){this._onAccelerationEvent&&this._onAccelerationEvent(e.acc,e)}checkAvailable(){return D(this._onAccelerationEvent,1803),!0}clone(){return new Bg(this._onAccelerationEvent)}}class kg extends Og{constructor(){super(Og.KEYBOARD,zg.KEYBOARD,null),this.onKeyDown=void 0,this.onKeyPressed=void 0,this.onKeyReleased=void 0,this._onEvent=e=>this._callback(e)}_callback(e){var t,n;switch(e.type){case Mg.KEY_DOWN:null===(t=this.onKeyPressed)||void 0===t||t.call(this,e.keyCode,e);break;case Mg.KEY_UP:null===(n=this.onKeyReleased)||void 0===n||n.call(this,e.keyCode,e)}}clone(){const e=new kg;return e.onKeyDown=this.onKeyDown,e.onKeyPressed=this.onKeyPressed,e.onKeyReleased=this.onKeyReleased,e}checkAvailable(){return null!==this.onKeyDown||null!==this.onKeyPressed||null!==this.onKeyReleased||(w(1800),!1)}}c.EventListener=Og;const jg=Og.ListenerID,Gg=[Mg.TOUCH_START,Mg.TOUCH_MOVE,Mg.TOUCH_END,Mg.TOUCH_CANCEL],Vg=[Mg.MOUSE_DOWN,Mg.MOUSE_MOVE,Mg.MOUSE_UP,Mg.MOUSE_WHEEL],Hg=[Mg.KEY_DOWN,Mg.KEY_UP];class Wg{constructor(){this.gt0Index=0,this._fixedListeners=[],this._sceneGraphListeners=[]}size(){return this._fixedListeners.length+this._sceneGraphListeners.length}empty(){return 0===this._fixedListeners.length&&0===this._sceneGraphListeners.length}push(e){0===e._getFixedPriority()?this._sceneGraphListeners.push(e):this._fixedListeners.push(e)}clearSceneGraphListeners(){this._sceneGraphListeners.length=0}clearFixedListeners(){this._fixedListeners.length=0}clear(){this._sceneGraphListeners.length=0,this._fixedListeners.length=0}getFixedPriorityListeners(){return this._fixedListeners}getSceneGraphPriorityListeners(){return this._sceneGraphListeners}}const qg=new class{constructor(){this._listenersMap={},this._priorityDirtyFlagMap={},this._nodeListenersMap={},this._toAddedListeners=[],this._toRemovedListeners=[],this._dirtyListeners={},this._inDispatch=0,this._isEnabled=!1,this._internalCustomListenerIDs=[],this._currentTouch=null,this._currentTouchListener=null}pauseTarget(e,t=!1){if(!(e instanceof c._BaseNode))return void P(3506);const n=this._nodeListenersMap[e.uuid];if(n)for(let e=0,t=n.length;e<t;e++){const t=n[e];t._setPaused(!0),t instanceof Fg&&t._claimedTouches.includes(this._currentTouch)&&this._clearCurTouch()}if(!0===t){const t=e.children;if(t)for(let e=0;e<t.length;++e){const n=t[e];this.pauseTarget(n,!0)}}}resumeTarget(e,t=!1){if(!(e instanceof c._BaseNode))return void P(3506);const n=this._nodeListenersMap[e.uuid];if(n)for(let e=0;e<n.length;++e)n[e]._setPaused(!1);if(this._setDirtyForNode(e),!0===t&&e.children.length>0){const t=e.children;if(t)for(let e=0;e<t.length;++e){const n=t[e];this.resumeTarget(n,!0)}}}frameUpdateListeners(){const e=this._listenersMap,t=this._priorityDirtyFlagMap;for(const n in e)e[n].empty()&&(delete t[n],delete e[n]);const n=this._toAddedListeners;if(0!==n.length){for(let e=0,t=n.length;e<t;e++)this._forceAddEventListener(n[e]);n.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()}hasEventListener(e){return!!this._getListeners(e)}addListener(e,t){if(D(e&&t,3503),!(c.js.isNumber(t)||t instanceof c._BaseNode))return P(3506),null;if(e instanceof c.EventListener){if(e._isRegistered())return w(3505),null}else D(!c.js.isNumber(t),3504),e=c.EventListener.create(e);if(!e.checkAvailable())return null;if(c.js.isNumber(t)){if(0===t)return w(3500),null;e._setSceneGraphPriority(null),e._setFixedPriority(t),e._setRegistered(!0),e._setPaused(!1),this._addListener(e)}else{if(!(n=t)||!n.getComponent("cc.UITransform"))return w(3512),null;e._setSceneGraphPriority(t),e._setFixedPriority(0),e._setRegistered(!0),this._addListener(e)}var n;return e}addCustomListener(e,t){const n=Og.create({event:c.EventListener.CUSTOM,eventName:e,callback:t});return this.addListener(n,1),n}removeListener(e){if(null==e)return;let t=!1;const n=this._listenersMap;e===this._currentTouchListener&&(this._currentTouchListener=this._currentTouch=null);for(const i in n){const o=n[i],a=o.getFixedPriorityListeners(),r=o.getSceneGraphPriorityListeners();if(t=this._removeListenerInVector(r,e),t?this._setDirty(e._getListenerID(),2):(t=this._removeListenerInVector(a,e),t&&this._setDirty(e._getListenerID(),1)),o.empty()&&(delete this._priorityDirtyFlagMap[e._getListenerID()],delete n[i]),t)break}if(!t){const t=this._toAddedListeners;for(let n=t.length-1;n>=0;n--){const i=t[n];if(i===e){c.js.array.removeAt(t,n),i._setRegistered(!1);break}}}}removeListeners(e,t=!1){if(c.js.isNumber(e)||e instanceof c._BaseNode)if(void 0!==e._id){const n=this._nodeListenersMap[e._id];if(n){const t=c.js.array.copy(n);for(let e=0;e<t.length;++e){const n=t[e];this.removeListener(n)}delete this._nodeListenersMap[e._id]}const i=this._toAddedListeners;for(let t=0;t<i.length;){const n=i[t];n._getSceneGraphPriority()===e?(n._setSceneGraphPriority(null),n._setRegistered(!1),i.splice(t,1)):++t}if(!0===t){const t=e.getChildren();for(let e=0;e<t.length;++e){const n=t[e];this.removeListeners(n,!0)}}}else e===c.EventListener.TOUCH_ONE_BY_ONE?this._removeListenersForListenerID(jg.TOUCH_ONE_BY_ONE):e===c.EventListener.TOUCH_ALL_AT_ONCE?this._removeListenersForListenerID(jg.TOUCH_ALL_AT_ONCE):e===c.EventListener.MOUSE?this._removeListenersForListenerID(jg.MOUSE):e===c.EventListener.ACCELERATION?this._removeListenersForListenerID(jg.ACCELERATION):e===c.EventListener.KEYBOARD?this._removeListenersForListenerID(jg.KEYBOARD):w(3501);else P(3506)}removeCustomListeners(e){this._removeListenersForListenerID(e)}removeAllListeners(){const e=this._listenersMap,t=this._internalCustomListenerIDs;for(const n in e)-1===t.indexOf(n)&&this._removeListenersForListenerID(n)}setPriority(e,t){if(null==e)return;const n=this._listenersMap;for(const i in n){const o=n[i].getFixedPriorityListeners();if(o&&-1!==o.indexOf(e))return null!=e._getSceneGraphPriority()&&w(3502),void(e._getFixedPriority()!==t&&(e._setFixedPriority(t),this._setDirty(e._getListenerID(),1)))}}setEnabled(e){this._isEnabled=e}isEnabled(){return this._isEnabled}dispatchEvent(e){if(!this._isEnabled)return;if(this._updateDirtyFlagForSceneGraph(),this._inDispatch++,!e||!e.getType)return void R(3511);if(Gg.includes(e.getType()))return this._dispatchTouchEvent(e),void this._inDispatch--;const t=function(e){const t=e.type;return t===Mg.DEVICEMOTION?jg.ACCELERATION:Hg.includes(t)?jg.KEYBOARD:Vg.includes(t)?jg.MOUSE:(Gg.includes(t)&&w(2e3),"")}(e);this._sortEventListeners(t);const n=this._listenersMap[t];null!=n&&(this._dispatchEventToListeners(n,this._onListenerCallback,e),this._onUpdateListeners(n)),this._inDispatch--}_onListenerCallback(e,t){t.currentTarget=e._target;const n=e.onEvent;return n&&n(t),t.isStopped()}dispatchCustomEvent(e,t){const n=new c.Event.EventCustom(e);n.setUserData(t),this.dispatchEvent(n)}_setDirtyForNode(e){const t=this._nodeListenersMap[e._id];if(void 0!==t)for(let e=0,n=t.length;e<n;e++){const n=t[e]._getListenerID();this._dirtyListeners[n]||(this._dirtyListeners[n]=!0)}if(e.children.length>0){const t=e.children;for(let e=0,n=t?t.length:0;e<n;e++)this._setDirtyForNode(t[e])}}_addListener(e){0===this._inDispatch?this._forceAddEventListener(e):this._toAddedListeners.push(e)}_forceAddEventListener(e){const t=e._getListenerID();let n=this._listenersMap[t];if(n||(n=new Wg,this._listenersMap[t]=n),n.push(e),0===e._getFixedPriority()){this._setDirty(t,2);const n=e._getSceneGraphPriority();null===n&&w(3507),this._associateNodeAndEventListener(n,e),n.activeInHierarchy&&this.resumeTarget(n)}else this._setDirty(t,1)}_getListeners(e){return this._listenersMap[e]}_updateDirtyFlagForSceneGraph(){const e=this._dirtyListeners;for(const t in e)this._setDirty(t,2),e[t]=!1}_removeAllListenersInVector(e){if(!e)return;let t;for(let n=e.length-1;n>=0;n--)t=e[n],t._setRegistered(!1),null!=t._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(t._getSceneGraphPriority(),t),t._setSceneGraphPriority(null)),0===this._inDispatch&&c.js.array.removeAt(e,n)}_removeListenersForListenerID(e){const t=this._listenersMap[e];if(t){const n=t.getFixedPriorityListeners(),i=t.getSceneGraphPriorityListeners();this._removeAllListenersInVector(i),this._removeAllListenersInVector(n),delete this._priorityDirtyFlagMap[e],this._inDispatch||(t.clear(),delete this._listenersMap[e])}const n=this._toAddedListeners;for(let t=n.length-1;t>=0;t--){const i=n[t];i&&i._getListenerID()===e&&c.js.array.removeAt(n,t)}}_sortEventListeners(e){let t=0;const n=this._priorityDirtyFlagMap;n[e]&&(t=n[e]),0!==t&&(n[e]=0,1&t&&this._sortListenersOfFixedPriority(e),2&t)&&c.director.getScene()&&this._sortListenersOfSceneGraphPriority(e)}_sortListenersOfSceneGraphPriority(e){const t=this._getListeners(e);if(!t)return;const n=t.getSceneGraphPriorityListeners();if(!n||0===n.length)return;const i=t.getSceneGraphPriorityListeners();i.forEach((e=>{const t=e._getSceneGraphPriority()._uiProps.uiTransformComp;e._cameraPriority=t.cameraPriority})),i.sort(this._sortEventListenersOfSceneGraphPriorityDes)}_sortEventListenersOfSceneGraphPriorityDes(e,t){const n=e._getSceneGraphPriority(),i=t._getSceneGraphPriority();if(!(t&&i&&i._activeInHierarchy&&i._uiProps.uiTransformComp))return-1;if(!(e&&n&&n._activeInHierarchy&&n._uiProps.uiTransformComp))return 1;let o=n,a=i,r=!1;if(e._cameraPriority!==t._cameraPriority)return t._cameraPriority-e._cameraPriority;for(;o.parent._id!==a.parent._id;)o=null===o.parent.parent?(r=!0)&&i:o.parent,a=null===a.parent.parent?(r=!0)&&n:a.parent;if(o._id===a._id){if(o._id===i._id)return-1;if(o._id===n._id)return 1}const s=o.getSiblingIndex(),c=a.getSiblingIndex();return r?s-c:c-s}_sortListenersOfFixedPriority(e){const t=this._listenersMap[e];if(!t)return;const n=t.getFixedPriorityListeners();if(!n||0===n.length)return;n.sort(this._sortListenersOfFixedPriorityAsc);let i=0;for(const e=n.length;i<e&&!(n[i]._getFixedPriority()>=0);)++i;t.gt0Index=i}_sortListenersOfFixedPriorityAsc(e,t){return e._getFixedPriority()-t._getFixedPriority()}_onUpdateListeners(e){const t=e.getFixedPriorityListeners(),n=e.getSceneGraphPriorityListeners(),i=this._toRemovedListeners;if(n)for(let e=n.length-1;e>=0;e--){const t=n[e];if(!t._isRegistered()){c.js.array.removeAt(n,e);const o=i.indexOf(t);-1!==o&&i.splice(o,1)}}if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(!n._isRegistered()){c.js.array.removeAt(t,e);const o=i.indexOf(n);-1!==o&&i.splice(o,1)}}n&&0===n.length&&e.clearSceneGraphListeners(),t&&0===t.length&&e.clearFixedListeners()}_updateTouchListeners(e){const t=this._inDispatch;if(D(t>0,3508),t>1)return;let n;n=this._listenersMap[jg.TOUCH_ONE_BY_ONE],n&&this._onUpdateListeners(n),n=this._listenersMap[jg.TOUCH_ALL_AT_ONCE],n&&this._onUpdateListeners(n),D(1===t,3509);const i=this._toAddedListeners;if(0!==i.length){for(let e=0,t=i.length;e<t;e++)this._forceAddEventListener(i[e]);this._toAddedListeners.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()}_cleanToRemovedListeners(){const e=this._toRemovedListeners;for(let t=0;t<e.length;++t){const n=e[t],i=this._listenersMap[n._getListenerID()];if(!i)continue;const o=i.getFixedPriorityListeners(),a=i.getSceneGraphPriorityListeners();if(a){const e=a.indexOf(n);-1!==e&&a.splice(e,1)}if(o){const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}e.length=0}_onTouchEventCallback(e,t){if(!e._isRegistered())return!1;const n=t.event,i=n.touch;n.currentTarget=e._getSceneGraphPriority();let o=!1,a=-1;const r=n.type;if(r===Mg.TOUCH_START){if(!He.ENABLE_MULTI_TOUCH&&qg._currentTouch){const e=qg._currentTouchListener._node;if(!e||e.activeInHierarchy)return!1}e.onTouchBegan&&(o=e.onTouchBegan(i,n),o&&e._isRegistered()&&!e._isPaused()&&(e._claimedTouches.push(i),!He.ENABLE_MULTI_TOUCH&&qg._currentTouch||(qg._currentTouch=i),qg._currentTouchListener=e))}else if(e._claimedTouches.length>0&&(a=e._claimedTouches.indexOf(i),-1!==a)){if(o=!0,!He.ENABLE_MULTI_TOUCH&&qg._currentTouch&&qg._currentTouch!==i)return!1;r===Mg.TOUCH_MOVE&&e.onTouchMoved?e.onTouchMoved(i,n):r===Mg.TOUCH_END?(e.onTouchEnded&&e.onTouchEnded(i,n),e._isRegistered()&&e._claimedTouches.splice(a,1),(He.ENABLE_MULTI_TOUCH||qg._currentTouch===i)&&(qg._currentTouch=null),qg._currentTouchListener=null):r===Mg.TOUCH_CANCEL&&(e.onTouchCancelled&&e.onTouchCancelled(i,n),e._isRegistered()&&e._claimedTouches.splice(a,1),(He.ENABLE_MULTI_TOUCH||qg._currentTouch===i)&&(qg._currentTouch=null),qg._currentTouchListener=null)}return n.isStopped()?(qg._updateTouchListeners(n),!0):!!(o&&e._isRegistered()&&e.swallowTouches)&&(t.needsMutableSet&&t.touches.splice(i,1),!0)}_dispatchTouchEvent(e){this._sortEventListeners(jg.TOUCH_ONE_BY_ONE),this._sortEventListeners(jg.TOUCH_ALL_AT_ONCE);const t=this._getListeners(jg.TOUCH_ONE_BY_ONE),n=this._getListeners(jg.TOUCH_ALL_AT_ONCE);if(null===t&&null===n)return;const i=e.getTouches(),o=c.js.array.copy(i),a={event:e,needsMutableSet:t&&n,touches:o,selTouch:null};if(t)for(let n=0;n<i.length;++n){const o=i[n];e.touch=o,e.propagationStopped=e.propagationImmediateStopped=!1,this._dispatchEventToListeners(t,this._onTouchEventCallback,a)}n&&o.length>0&&(this._dispatchEventToListeners(n,this._onTouchesEventCallback,{event:e,touches:o}),e.isStopped())||this._updateTouchListeners(e)}_onTouchesEventCallback(e,t){if(!e._isRegistered())return!1;const n=t.event,i=t.touches,o=n.type;return n.currentTarget=e._getSceneGraphPriority(),o===Mg.TOUCH_START&&e.onTouchesBegan?e.onTouchesBegan(i,n):o===Mg.TOUCH_MOVE&&e.onTouchesMoved?e.onTouchesMoved(i,n):o===Mg.TOUCH_END&&e.onTouchesEnded?e.onTouchesEnded(i,n):o===Mg.TOUCH_CANCEL&&e.onTouchesCancelled&&e.onTouchesCancelled(i,n),!!n.isStopped()&&(qg._updateTouchListeners(n),!0)}_associateNodeAndEventListener(e,t){let n=this._nodeListenersMap[e.uuid];n||(n=[],this._nodeListenersMap[e.uuid]=n),n.push(t)}_dissociateNodeAndEventListener(e,t){const n=this._nodeListenersMap[e.uuid];n&&(c.js.array.remove(n,t),0===n.length&&delete this._nodeListenersMap[e.uuid])}_dispatchEventToListeners(e,t,n){let i=!1;const o=e.getFixedPriorityListeners(),a=e.getSceneGraphPriorityListeners();let r=0;if(o&&0!==o.length)for(;r<e.gt0Index;++r){const e=o[r];if(e.isEnabled()&&!e._isPaused()&&e._isRegistered()&&t(e,n)){i=!0;break}}if(a&&!i)for(let e=0;e<a.length;++e){const o=a[e];if(o.isEnabled()&&!o._isPaused()&&o._isRegistered()&&t(o,n)){i=!0;break}}if(o&&!i)for(;r<o.length;++r){const e=o[r];if(e.isEnabled()&&!e._isPaused()&&e._isRegistered()&&t(e,n)){i=!0;break}}}_setDirty(e,t){const n=this._priorityDirtyFlagMap;null==n[e]?n[e]=t:n[e]|=t}_sortNumberAsc(e,t){return e-t}_clearCurTouch(){this._currentTouchListener=null,this._currentTouch=null}_removeListenerInCallback(e,t){if(null==e)return!1;for(let n=e.length-1;n>=0;n--){const i=e[n];if(i._onCustomEvent===t||i.onEvent===t)return i._setRegistered(!1),null!=i._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(i._getSceneGraphPriority(),i),i._setSceneGraphPriority(null)),0===this._inDispatch?c.js.array.removeAt(e,n):this._toRemovedListeners.push(i),!0}return!1}_removeListenerInVector(e,t){if(null==e)return!1;for(let n=e.length-1;n>=0;n--){const i=e[n];if(i===t)return i._setRegistered(!1),null!=i._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(i._getSceneGraphPriority(),i),i._setSceneGraphPriority(null)),0===this._inDispatch?c.js.array.removeAt(e,n):this._toRemovedListeners.push(i),!0}return!1}};let Yg;var Xg,Qg,Kg,Zg,Jg,$g,ey,ty,ny;Lt.Flags.Destroying,function(e){e.TOUCH_START="touch-start",e.TOUCH_MOVE="touch-move",e.TOUCH_END="touch-end",e.TOUCH_CANCEL="touch-cancel",e.MOUSE_DOWN="mouse-down",e.MOUSE_MOVE="mouse-move",e.MOUSE_UP="mouse-up",e.MOUSE_WHEEL="mouse-wheel",e.MOUSE_ENTER="mouse-enter",e.MOUSE_LEAVE="mouse-leave",e.KEY_DOWN="keydown",e.KEY_UP="keyup",e.DEVICEMOTION="devicemotion",e.TRANSFORM_CHANGED="transform-changed",e.SCENE_CHANGED_FOR_PERSISTS="scene-changed-for-persists",e.SIZE_CHANGED="size-changed",e.ANCHOR_CHANGED="anchor-changed",e.COLOR_CHANGED="color-changed",e.CHILD_ADDED="child-added",e.CHILD_REMOVED="child-removed",e.PARENT_CHANGED="parent-changed",e.NODE_DESTROYED="node-destroyed",e.LAYER_CHANGED="layer-changed",e.SIBLING_ORDER_CHANGED="sibling-order-changed"}(Yg||(Yg=e("cT",{})));const iy=Lt.Flags.Destroying,oy=Lt.Flags.DontDestroy,ay=Lt.Flags.Deactivating,ry=new K("Node");function sy(e){return e?"string"==typeof e?Me(e):e:(R(3804),null)}let cy=e("fM",Rc("cc.BaseNode")((ny=ty=class e extends Lt{get components(){return this._components}get _persistNode(){return(this._objFlags&oy)>0}set _persistNode(e){e?this._objFlags|=oy:this._objFlags&=~oy}get name(){return this._name}set name(e){this._name=e}get uuid(){return this._id}get children(){return this._children}get active(){return this._active}set active(e){if(this._active!==e){this._active=e;const t=this._parent;t&&t._activeInHierarchy&&c.director._nodeActivator.activateNode(this,e)}}get activeInHierarchy(){return this._activeInHierarchy}get parent(){return this._parent}set parent(e){this.setParent(e)}get scene(){return this._scene}get eventProcessor(){return this._eventProcessor}static _setScene(e){e._updateScene()}static _findComponent(e,t){const n=t,i=e._components;if(n._sealed)for(let e=0;e<i.length;++e){const n=i[e];if(n.constructor===t)return n}else for(let e=0;e<i.length;++e){const n=i[e];if(n instanceof t)return n}return null}static _findComponents(e,t,n){const i=t,o=e._components;if(i._sealed)for(let e=0;e<o.length;++e){const i=o[e];i.constructor===t&&n.push(i)}else for(let e=0;e<o.length;++e){const i=o[e];i instanceof t&&n.push(i)}}static _findChildComponent(t,n){for(let i=0;i<t.length;++i){const o=t[i];let a=e._findComponent(o,n);if(a)return a;if(o._children.length>0&&(a=e._findChildComponent(o._children,n),a))return a}return null}static _findChildComponents(t,n,i){for(let o=0;o<t.length;++o){const a=t[o];e._findComponents(a,n,i),a._children.length>0&&e._findChildComponents(a._children,n,i)}}_updateScene(){null==this._parent?y("Node %s(%s) has not attached to a scene.",this.name,this.uuid):this._scene=this._parent._scene}constructor(e){super(e),dc(this,"_parent",Kg,this),dc(this,"_children",Zg,this),dc(this,"_active",Jg,this),dc(this,"_components",$g,this),dc(this,"_prefab",ey,this),this._scene=null,this._activeInHierarchy=!1,this._id=ry.getNewId(),this._name=void 0,this._eventProcessor=new c.NodeEventProcessor(this),this._eventMask=0,this._siblingIndex=0,this._originalSceneId="",this._registerIfAttached=void 0,this._name=void 0!==e?e:"New Node"}attr(e){ge(this,e)}getParent(){return this._parent}setParent(e,t=!1){if(this._parent===e)return;const n=this._parent,i=e;if(this._parent=i,this._siblingIndex=0,this._onSetParent(n,t),this.emit&&this.emit(Yg.PARENT_CHANGED,n),n&&!(n._objFlags&iy)){const e=n._children.indexOf(this);n._children.splice(e,1),n._updateSiblingIndex(),n.emit&&n.emit(Yg.CHILD_REMOVED,this)}i&&(i._children.push(this),this._siblingIndex=i._children.length-1,i.emit&&i.emit(Yg.CHILD_ADDED,this)),this._onHierarchyChanged(n)}getChildByUuid(e){if(!e)return v("Invalid uuid"),null;const t=this._children;for(let n=0,i=t.length;n<i;n++)if(t[n]._id===e)return t[n];return null}getChildByName(e){if(!e)return v("Invalid name"),null;const t=this._children;for(let n=0,i=t.length;n<i;n++)if(t[n]._name===e)return t[n];return null}getChildByPath(e){const t=e.split("/");let n=this;for(let e=0;e<t.length;++e){const i=t[e];if(0===i.length)continue;const o=n.children.find((e=>e.name===i));if(!o)return null;n=o}return n}addChild(e){e.setParent(this)}insertChild(e,t){e.parent=this,e.setSiblingIndex(t)}getSiblingIndex(){return this._siblingIndex}setSiblingIndex(e){if(!this._parent)return;if(this._parent._objFlags&ay)return void R(3821);const t=this._parent._children;e=-1!==e?e:t.length-1;const n=t.indexOf(this);e!==n&&(t.splice(n,1),e<t.length?t.splice(e,0,this):t.push(this),this._parent._updateSiblingIndex(),this._onSiblingIndexChanged&&this._onSiblingIndexChanged(e))}walk(t,n){let i=1,o=null,a=null,r=0,s=e._stacks[e._stackId];s||(s=[],e._stacks.push(s)),e._stackId++,s.length=0,s[0]=this;let c=null,l=!1;for(;i;)if(i--,a=s[i],a)if(!l&&t?t(a):l&&n&&n(a),s[i]=null,l){if(c===this._parent)break;if(l=!1,o)if(r++,o[r])s[i]=o[r],i++;else if(c&&(s[i]=c,i++,l=!0,c._parent?(o=c._parent._children,r=o.indexOf(c),c=c._parent):(c=null,o=null),r<0))break}else a._children.length>0?(c=a,o=a._children,r=0,s[i]=o[r],i++):(s[i]=a,i++,l=!0);s.length=0,e._stackId--}removeFromParent(){this._parent&&this._parent.removeChild(this)}removeChild(e){this._children.indexOf(e)>-1&&(e.parent=null)}removeAllChildren(){const e=this._children;for(let t=e.length-1;t>=0;t--){const n=e[t];n&&(n.parent=null)}this._children.length=0}isChildOf(e){let t=this;do{if(t===e)return!0;t=t._parent}while(t);return!1}getComponent(t){const n=sy(t);return n?e._findComponent(this,n):null}getComponents(t){const n=sy(t),i=[];return n&&e._findComponents(this,n,i),i}getComponentInChildren(t){const n=sy(t);return n?e._findChildComponent(this._children,n):null}getComponentsInChildren(t){const n=sy(t),i=[];return n&&(e._findComponents(this,n,i),e._findChildComponents(this._children,n,i)),i}addComponent(e){let t;if("string"==typeof e){if(t=Me(e),!t)throw c._RF.peek()&&R(3808,e),TypeError(O(3807,e))}else{if(!e)throw TypeError(O(3804));t=e}if("function"!=typeof t)throw TypeError(O(3809));if(!xe(t,c.Component))throw TypeError(O(3810));const n=t._requireComponent;n&&!this.getComponent(n)&&this.addComponent(n);const i=new t;return i.node=this,this._components.push(i),this._activeInHierarchy&&c.director._nodeActivator.activateComp(i),i}removeComponent(e){if(!e)return void R(3813);let t=null;t=e instanceof y_?e:this.getComponent(e),t&&t.destroy()}on(e,t,n,i=!1){switch(e){case Yg.TRANSFORM_CHANGED:this._eventMask|=1}this._eventProcessor.on(e,t,n,i)}off(e,t,n,i=!1){if(this._eventProcessor.off(e,t,n,i),!this._eventProcessor.hasEventListener(e))switch(e){case Yg.TRANSFORM_CHANGED:this._eventMask&=-2}}once(e,t,n,i){this._eventProcessor.once(e,t,n,i)}emit(e,t,n,i,o,a){this._eventProcessor.emit(e,t,n,i,o,a)}dispatchEvent(e){this._eventProcessor.dispatchEvent(e)}hasEventListener(e,t,n){return this._eventProcessor.hasEventListener(e,t,n)}targetOff(e){this._eventProcessor.targetOff(e),1&this._eventMask&&!this._eventProcessor.hasEventListener(Yg.TRANSFORM_CHANGED)&&(this._eventMask&=-2)}destroy(){return!!super.destroy()&&(this.active=!1,!0)}destroyAllChildren(){const e=this._children;for(let t=0;t<e.length;++t)e[t].destroy()}_removeComponent(e){if(e){if(!(this._objFlags&iy)){const t=this._components.indexOf(e);-1!==t?this._components.splice(t,1):e.node!==this&&R(3815)}}else R(3814)}_updateSiblingIndex(){for(let e=0;e<this._children.length;++e)this._children[e]._siblingIndex=e;this.emit(Yg.SIBLING_ORDER_CHANGED)}_onSetParent(t,n=!1){this._parent&&(null!=t&&t._scene===this._parent._scene||null==this._parent._scene||this.walk(e._setScene))}_onPostActivated(e){}_onBatchCreated(e){this._parent&&(this._siblingIndex=this._parent.children.indexOf(this))}_onPreDestroy(){this._onPreDestroyBase()}_onHierarchyChanged(e){return this._onHierarchyChangedBase(e)}_instantiate(e,t){return e||(e=c.instantiate._clone(this,this)),e._prefab,e._parent=null,e._onBatchCreated(t),e}_onHierarchyChangedBase(e){const t=this._parent;!this._persistNode||t instanceof c.Scene||c.game.removePersistRootNode(this);const n=this._active&&!(!t||!t._activeInHierarchy);this._activeInHierarchy!==n&&c.director._nodeActivator.activateNode(this,n)}_onPreDestroyBase(){this._objFlags|=iy;const e=this._parent,t=!!e&&0!=(e._objFlags&iy);if(!t&&i&&this._registerIfAttached(!1),this._persistNode&&c.game.removePersistRootNode(this),!t&&e){this.emit(Yg.PARENT_CHANGED,this);const t=e._children.indexOf(this);e._children.splice(t,1),this._siblingIndex=0,e._updateSiblingIndex(),e.emit&&e.emit(Yg.CHILD_REMOVED,this)}this.emit(Yg.NODE_DESTROYED,this),this._eventProcessor.destroy();const n=this._children;for(let e=0;e<n.length;++e)n[e]._destroyImmediate();const o=this._components;for(let e=0;e<o.length;++e)o[e]._destroyImmediate();return t}},ty.idGenerator=ry,ty._stacks=[[]],ty._stackId=0,vc((Qg=ny).prototype,"_persistNode",[Oc],Object.getOwnPropertyDescriptor(Qg.prototype,"_persistNode"),Qg.prototype),vc(Qg.prototype,"name",[Wc],Object.getOwnPropertyDescriptor(Qg.prototype,"name"),Qg.prototype),vc(Qg.prototype,"children",[Wc],Object.getOwnPropertyDescriptor(Qg.prototype,"children"),Qg.prototype),vc(Qg.prototype,"active",[Wc],Object.getOwnPropertyDescriptor(Qg.prototype,"active"),Qg.prototype),vc(Qg.prototype,"activeInHierarchy",[Wc],Object.getOwnPropertyDescriptor(Qg.prototype,"activeInHierarchy"),Qg.prototype),vc(Qg.prototype,"parent",[Wc],Object.getOwnPropertyDescriptor(Qg.prototype,"parent"),Qg.prototype),Kg=vc(Qg.prototype,"_parent",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zg=vc(Qg.prototype,"_children",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Jg=vc(Qg.prototype,"_active",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$g=vc(Qg.prototype,"_components",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ey=vc(Qg.prototype,"_prefab",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xg=Qg))||Xg);function ly(e){const t=e._prefab;if(!t)return;if(!t.instance)return;if(!t.asset)return R(3701,e.name),void(t.instance=void 0);const n=e._objFlags,i=e._parent,o=e._id,a=e._prefab;e[Mt],c.game._isCloning=!0,t.asset._doInstantiate(e),c.game._isCloning=!1,e._objFlags=n,e._parent=i,e._id=o,e._prefab&&(e._prefab.instance=null==a?void 0:a.instance)}function _y(e,t,n){var i;if(!t)return;let o=t;const a=null===(i=e._prefab)||void 0===i?void 0:i.instance;!n&&a&&(t[a.fileId]={},o=t[a.fileId]);const r=e._prefab;r&&(o[r.fileId]=e);const s=e.components;for(let e=0;e<s.length;e++){const t=s[e];t.__prefab&&(o[t.__prefab.fileId]=t)}for(let t=0;t<e.children.length;t++)_y(e.children[t],o,!1)}function uy(e,t){if(!e)return null;let n=null,i=t;for(let t=0;t<e.length;t++){if(!i)return null;i=i[e[t]]}return n=i,n}function fy(e,t,n){if(t)for(let e=0;e<t.length;e++){const i=t[e];if(i&&i.targetInfo){const e=uy(i.targetInfo.localID,n);if(!e)continue;let t=n;const o=i.targetInfo.localID;if(o.length>0)for(let e=0;e<o.length-1;e++)t=t[o[e]];if(i.nodes)for(let n=0;n<i.nodes.length;n++){const o=i.nodes[n];o&&(e._children.push(o),o._parent=e,_y(o,t,!1),o._siblingIndex=e._children.length-1,o._onBatchCreated(!1))}}}}function hy(e,t,n){if(t)for(let e=0;e<t.length;e++){const i=t[e];if(i&&i.targetInfo){const e=uy(i.targetInfo.localID,n);if(!e)continue;if(i.components)for(let t=0;t<i.components.length;t++){const n=i.components[t];n&&(n.node=e,e._components.push(n))}}}}function py(e,t,n){if(t)for(let e=0;e<t.length;e++){const i=t[e];if(i){const e=uy(i.localID,n);if(!e||!e.node)continue;const t=e.node.components.indexOf(e);t>=0&&e.node._components.splice(t,1)}}}function my(e,t,n){if(t.length<=0)return;let i=null;for(let e=0;e<t.length;e++){const o=t[e];if(o&&o.targetInfo){if(i=uy(o.targetInfo.localID,n),!i)continue;let e=i;const t=o.propertyPath.slice();if(t.length>0){const n=t.pop();if(!n)continue;for(let n=0;n<t.length&&(e=e[t[n]],e);n++);if(!e)continue;if(Array.isArray(e))if("length"===n)e[n]=o.value;else{const t=Number.parseInt(n);Number.isInteger(t)&&t<e.length&&(e[n]=o.value)}else e[n]=o.value}}}}function dy(e){var t;const n=null===(t=e._prefab)||void 0===t?void 0:t.targetOverrides;if(n)for(let e=0;e<n.length;e++){var i,o;const t=n[e];let s=t.source;const c=t.sourceInfo;if(c){var a,r;const e=null===(a=t.source)||void 0===a||null===(r=a._prefab)||void 0===r?void 0:r.instance;e&&e.targetMap&&(s=uy(c.localID,e.targetMap))}if(!s)continue;let l=null;const _=t.targetInfo;if(!_)continue;const u=null===(i=t.target)||void 0===i||null===(o=i._prefab)||void 0===o?void 0:o.instance;if(!u||!u.targetMap)continue;if(l=uy(_.localID,u.targetMap),!l)continue;const f=t.propertyPath.slice();let h=s;if(f.length>0){const e=f.pop();if(!e)return;for(let e=0;e<f.length&&(h=h[f[e]],h);e++);if(!h)continue;h[e]=l}}}var vy,gy,yy,Ay,xy,by,Cy,Sy,Ey,wy,Ty;c._BaseNode=cy;const Py=new Gn,Iy=new Qn,Ry=new Qn,Ny=new Qn,Dy=new qn,My=new qn,Oy=new ii,zy=[],Ly=[];class Fy{constructor(){this._chunks=[],this._freelists=[],this._createChunk()}alloc(){const e=this._freelists.length;for(let t=0;t<e;++t)if(this._freelists[t].length)return this._createView(t);return this._createChunk(),this._createView(e)}free(e,t){const n=this._freelists.length;for(let i=0;i<n;++i)if(this._chunks[i]===e)return void this._freelists[i].push(t)}clear(){const e=this._chunks.length;for(let t=0;t<e;++t)this._chunks[t].fill(0)}_createChunk(){this._chunks.push(new Uint32Array(Fy.CAPACITY_PER_CHUNK));const e=[];for(let t=0;t<Fy.CAPACITY_PER_CHUNK;++t)e.push(t);this._freelists.push(e)}_createView(e){return[this._chunks[e],this._freelists[e].pop()]}}Fy.CAPACITY_PER_CHUNK=256;const Uy=new Fy,By=Symbol("ReserveContentsForAllSyncablePrefab");let ky=e("cA",(vy=Rc("cc.Node"),gy=rl(Gn),vy((Ty=wy=class e extends cy{get _dirtyFlags(){return this._dirtyFlagsPri}set _dirtyFlags(e){this._dirtyFlagsPri=e,this._nativeDirtyFlag[0]=e}_init(){const[e,t]=Uy.alloc();this._hasChangedFlagsChunk=e,this._hasChangedFlagsOffset=t;{this._nodeHandle=Ys.alloc(),this._pos=new Gn(Ys.getTypedArray(this._nodeHandle,Hs.WORLD_POSITION)),this._rot=new Qn(Ys.getTypedArray(this._nodeHandle,Hs.WORLD_ROTATION)),this._scale=new Gn(Ys.getTypedArray(this._nodeHandle,Hs.WORLD_SCALE)),this._lpos=new Gn(Ys.getTypedArray(this._nodeHandle,Hs.LOCAL_POSITION)),this._lrot=new Qn(Ys.getTypedArray(this._nodeHandle,Hs.LOCAL_ROTATION)),this._lscale=new Gn(Ys.getTypedArray(this._nodeHandle,Hs.LOCAL_SCALE)),this._mat=new ii(Ys.getTypedArray(this._nodeHandle,Hs.WORLD_MATRIX)),this._nativeLayer=Ys.getTypedArray(this._nodeHandle,Hs.LAYER),this._nativeDirtyFlag=Ys.getTypedArray(this._nodeHandle,Hs.DIRTY_FLAG),this._scale.set(1,1,1),this._lscale.set(1,1,1),this._nativeLayer[0]=this._layer,this._nativeObj=new ji;const n=new Uint32Array(e.buffer,e.byteOffset+4*t,1);this._nativeObj.initWithData(Ys.getBuffer(this._nodeHandle),n,Ly)}}constructor(e){super(e),this._uiProps=new Dg(this),this._static=!1,dc(this,"_lpos",xy,this),dc(this,"_lrot",by,this),dc(this,"_lscale",Cy,this),dc(this,"_layer",Sy,this),dc(this,"_euler",Ey,this),this._dirtyFlagsPri=_v.NONE,this._eulerDirty=!1,this._nodeHandle=0,this._init()}static isNode(t){return t instanceof e&&(t.constructor===e||!(t instanceof c.Scene))}_onPreDestroy(){const e=this._onPreDestroyBase();return this._nodeHandle&&(Ys.free(this._nodeHandle),this._nodeHandle=0),this._nativeObj=null,Uy.free(this._hasChangedFlagsChunk,this._hasChangedFlagsOffset),e}get native(){return this._nativeObj}get position(){return this._lpos}set position(e){this.setPosition(e)}get worldPosition(){return this.updateWorldTransform(),this._pos}set worldPosition(e){this.setWorldPosition(e)}get rotation(){return this._lrot}set rotation(e){this.setRotation(e)}set eulerAngles(e){this.setRotationFromEuler(e.x,e.y,e.z)}get eulerAngles(){return this._eulerDirty&&(Qn.toEuler(this._euler,this._lrot),this._eulerDirty=!1),this._euler}get angle(){return this._euler.z}set angle(e){Gn.set(this._euler,0,0,e),Qn.fromAngleZ(this._lrot,e),this._eulerDirty=!1,this.invalidateChildren(_v.ROTATION),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.ROTATION)}get worldRotation(){return this.updateWorldTransform(),this._rot}set worldRotation(e){this.setWorldRotation(e)}get scale(){return this._lscale}set scale(e){this.setScale(e)}get worldScale(){return this.updateWorldTransform(),this._scale}set worldScale(e){this.setWorldScale(e)}set matrix(e){ii.toRTS(e,this._lrot,this._lpos,this._lscale),this.invalidateChildren(_v.TRS),this._eulerDirty=!0,1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.TRS)}get worldMatrix(){return this.updateWorldTransform(),this._mat}get forward(){return Gn.transformQuat(new Gn,Gn.FORWARD,this.worldRotation)}set forward(e){const t=e.length();Gn.multiplyScalar(Py,e,-1/t),Qn.fromViewUp(Iy,Py),this.setWorldRotation(Iy)}get up(){return Gn.transformQuat(new Gn,Gn.UP,this.worldRotation)}get right(){return Gn.transformQuat(new Gn,Gn.RIGHT,this.worldRotation)}set layer(e){this._layer=e,this._nativeLayer[0]=this._layer,this.emit(Yg.LAYER_CHANGED,this._layer)}get layer(){return this._layer}get hasChangedFlags(){return this._hasChangedFlagsChunk[this._hasChangedFlagsOffset]}set hasChangedFlags(e){this._hasChangedFlagsChunk[this._hasChangedFlagsOffset]=e}[E_](e,t){e.writeThis()}setParent(e,t=!1){t&&this.updateWorldTransform(),super.setParent(e,t),this._nativeObj.setParent(this.parent?this.parent.native:null)}_onSetParent(e,t){if(super._onSetParent(e,t),t){const e=this._parent;e?(e.updateWorldTransform(),ii.multiply(Oy,ii.invert(Oy,e._mat),this._mat),ii.toRTS(Oy,this._lrot,this._lpos,this._lscale)):(Gn.copy(this._lpos,this._pos),Qn.copy(this._lrot,this._rot),Gn.copy(this._lscale,this._scale)),this._eulerDirty=!0}this.invalidateChildren(_v.TRS)}_onHierarchyChanged(e){this.eventProcessor.reattach(),super._onHierarchyChangedBase(e)}_onBatchCreated(e){var t,n;this._nativeLayer[0]=this._layer,this._nativeObj.setParent(null===(n=this.parent)||void 0===n?void 0:n.native);const i=null===(t=this._prefab)||void 0===t?void 0:t.instance;!e&&i&&ly(this),this.hasChangedFlags=_v.TRS,this._dirtyFlags|=_v.TRS,this._uiProps.uiTransformDirty=!0;const o=this._children.length;for(let t=0;t<o;++t)this._children[t]._siblingIndex=t,this._children[t]._onBatchCreated(e);if(!e&&i){const e={};i.targetMap=e,_y(this,e,!0),fy(0,i.mountedChildren,e),py(0,i.removedComponents,e),hy(0,i.mountedComponents,e),my(0,i.propertyOverrides,e)}dy(this)}_onBeforeSerialize(){this.eulerAngles}_onPostActivated(e){e?(qg.resumeTarget(this),this.invalidateChildren(_v.TRS)):qg.pauseTarget(this)}translate(e,t){const n=t||lv.LOCAL;if(n===lv.LOCAL)Gn.transformQuat(Py,e,this._lrot),this._lpos.x+=Py.x,this._lpos.y+=Py.y,this._lpos.z+=Py.z;else if(n===lv.WORLD)if(this._parent){Qn.invert(Iy,this._parent.worldRotation),Gn.transformQuat(Py,e,Iy);const t=this.worldScale;this._lpos.x+=Py.x/t.x,this._lpos.y+=Py.y/t.y,this._lpos.z+=Py.z/t.z}else this._lpos.x+=e.x,this._lpos.y+=e.y,this._lpos.z+=e.z;this.invalidateChildren(_v.POSITION),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.POSITION)}rotate(e,t){const n=t||lv.LOCAL;if(Qn.normalize(Iy,e),n===lv.LOCAL)Qn.multiply(this._lrot,this._lrot,Iy);else if(n===lv.WORLD){const e=this.worldRotation;Qn.multiply(Ry,Iy,e),Qn.invert(Iy,e),Qn.multiply(Ry,Iy,Ry),Qn.multiply(this._lrot,this._lrot,Ry)}this._eulerDirty=!0,this.invalidateChildren(_v.ROTATION),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.ROTATION)}lookAt(e,t){this.getWorldPosition(Py),Gn.subtract(Py,Py,e),Gn.normalize(Py,Py),Qn.fromViewUp(Iy,Py,t),this.setWorldRotation(Iy)}_setDirtyNode(e,t){zy[e]=t,Ly[e]=t.native}invalidateChildren(e){const t=e|_v.POSITION;this._setDirtyNode(0,this);let n=0;for(;n>=0;){const i=zy[n--],o=i.hasChangedFlags;if(i.isValid&&(i._dirtyFlags&o&e)!==e){i._dirtyFlags|=e,i._uiProps.uiTransformDirty=!0,i.hasChangedFlags=o|e;const t=i._children,a=t.length;for(let e=0;e<a;++e)this._setDirtyNode(++n,t[e])}e=t}}updateWorldTransform(){if(!this._dirtyFlags)return;let e,t=this,n=0;for(;t&&t._dirtyFlags;)this._setDirtyNode(n++,t),t=t._parent;let i=0;for(;n;)e=zy[--n],i|=e._dirtyFlags,t?(i&_v.POSITION&&(Gn.transformMat4(e._pos,e._lpos,t._mat),e._mat.m12=e._pos.x,e._mat.m13=e._pos.y,e._mat.m14=e._pos.z),i&_v.RS&&(ii.fromRTS(e._mat,e._lrot,e._lpos,e._lscale),ii.multiply(e._mat,t._mat,e._mat),i&_v.ROTATION&&Qn.multiply(e._rot,t._rot,e._lrot),qn.fromQuat(Dy,Qn.conjugate(Ny,e._rot)),qn.multiplyMat4(Dy,Dy,e._mat),e._scale.x=Dy.m00,e._scale.y=Dy.m04,e._scale.z=Dy.m08)):(i&_v.POSITION&&(Gn.copy(e._pos,e._lpos),e._mat.m12=e._pos.x,e._mat.m13=e._pos.y,e._mat.m14=e._pos.z),i&_v.RS&&(i&_v.ROTATION&&Qn.copy(e._rot,e._lrot),i&_v.SCALE&&(Gn.copy(e._scale,e._lscale),ii.fromRTS(e._mat,e._rot,e._pos,e._scale)))),e._dirtyFlags=_v.NONE,t=e}setPosition(e,t,n){void 0===t&&void 0===n?Gn.copy(this._lpos,e):void 0===n?Gn.set(this._lpos,e,t,this._lpos.z):Gn.set(this._lpos,e,t,n),this.invalidateChildren(_v.POSITION),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.POSITION)}getPosition(e){return e?Gn.set(e,this._lpos.x,this._lpos.y,this._lpos.z):Gn.copy(new Gn,this._lpos)}setRotation(e,t,n,i){void 0===t||void 0===n||void 0===i?Qn.copy(this._lrot,e):Qn.set(this._lrot,e,t,n,i),this._eulerDirty=!0,this.invalidateChildren(_v.ROTATION),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.ROTATION)}setRotationFromEuler(e,t,n){const i=void 0===n?this._euler.z:n;void 0===t?(Gn.copy(this._euler,e),Qn.fromEuler(this._lrot,e.x,e.y,e.z)):(Gn.set(this._euler,e,t,i),Qn.fromEuler(this._lrot,e,t,i)),this._eulerDirty=!1,this.invalidateChildren(_v.ROTATION),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.ROTATION)}getRotation(e){return e?Qn.set(e,this._lrot.x,this._lrot.y,this._lrot.z,this._lrot.w):Qn.copy(new Qn,this._lrot)}setScale(e,t,n){void 0===t&&void 0===n?Gn.copy(this._lscale,e):void 0===n?Gn.set(this._lscale,e,t,this._lscale.z):Gn.set(this._lscale,e,t,n),this.invalidateChildren(_v.SCALE),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.SCALE)}getScale(e){return e?Gn.set(e,this._lscale.x,this._lscale.y,this._lscale.z):Gn.copy(new Gn,this._lscale)}inverseTransformPoint(e,t){Gn.copy(e,t);let n=this,i=0;for(;n._parent;)this._setDirtyNode(i++,n),n=n._parent;for(;i>=0;)Gn.transformInverseRTS(e,e,n._lrot,n._lpos,n._lscale),n=zy[--i];return e}setWorldPosition(e,t,n){void 0===t||void 0===n?Gn.copy(this._pos,e):Gn.set(this._pos,e,t,n);const i=this._parent,o=this._lpos;i?(i.updateWorldTransform(),Gn.transformMat4(o,this._pos,ii.invert(Oy,i._mat))):Gn.copy(o,this._pos),this.invalidateChildren(_v.POSITION),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.POSITION)}getWorldPosition(e){return this.updateWorldTransform(),e?Gn.copy(e,this._pos):Gn.copy(new Gn,this._pos)}setWorldRotation(e,t,n,i){void 0===t||void 0===n||void 0===i?Qn.copy(this._rot,e):Qn.set(this._rot,e,t,n,i),this._parent?(this._parent.updateWorldTransform(),Qn.multiply(this._lrot,Qn.conjugate(this._lrot,this._parent._rot),this._rot)):Qn.copy(this._lrot,this._rot),this._eulerDirty=!0,this.invalidateChildren(_v.ROTATION),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.ROTATION)}setWorldRotationFromEuler(e,t,n){Qn.fromEuler(this._rot,e,t,n),this._parent?(this._parent.updateWorldTransform(),Qn.multiply(this._lrot,Qn.conjugate(this._lrot,this._parent._rot),this._rot)):Qn.copy(this._lrot,this._rot),this._eulerDirty=!0,this.invalidateChildren(_v.ROTATION),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.ROTATION)}getWorldRotation(e){return this.updateWorldTransform(),e?Qn.copy(e,this._rot):Qn.copy(new Qn,this._rot)}setWorldScale(e,t,n){void 0===t||void 0===n?Gn.copy(this._scale,e):Gn.set(this._scale,e,t,n);const i=this._parent;i?(i.updateWorldTransform(),qn.fromQuat(Dy,Qn.conjugate(Ny,i._rot)),qn.multiplyMat4(Dy,Dy,i._mat),My.m00=this._scale.x,My.m04=this._scale.y,My.m08=this._scale.z,qn.multiply(Dy,My,qn.invert(Dy,Dy)),this._lscale.x=Gn.set(Py,Dy.m00,Dy.m01,Dy.m02).length(),this._lscale.y=Gn.set(Py,Dy.m03,Dy.m04,Dy.m05).length(),this._lscale.z=Gn.set(Py,Dy.m06,Dy.m07,Dy.m08).length()):Gn.copy(this._lscale,this._scale),this.invalidateChildren(_v.SCALE),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,_v.SCALE)}getWorldScale(e){return this.updateWorldTransform(),e?Gn.copy(e,this._scale):Gn.copy(new Gn,this._scale)}getWorldMatrix(e){this.updateWorldTransform();const t=e||new ii;return ii.copy(t,this._mat)}getWorldRS(e){this.updateWorldTransform();const t=e||new ii;return ii.copy(t,this._mat),t.m12=0,t.m13=0,t.m14=0,t}getWorldRT(e){this.updateWorldTransform();const t=e||new ii;return ii.fromRT(t,this._rot,this._pos)}setRTS(e,t,n){let i=0;e&&(i|=_v.ROTATION,void 0!==e.w?(Qn.copy(this._lrot,e),this._eulerDirty=!0):(Gn.copy(this._euler,e),Qn.fromEuler(this._lrot,e.x,e.y,e.z),this._eulerDirty=!1)),t&&(Gn.copy(this._lpos,t),i|=_v.POSITION),n&&(Gn.copy(this._lscale,n),i|=_v.SCALE),i&&(this.invalidateChildren(i),1&this._eventMask&&this.emit(Yg.TRANSFORM_CHANGED,i))}pauseSystemEvents(e){qg.pauseTarget(this,e)}resumeSystemEvents(e){qg.resumeTarget(this,e)}static resetHasChangedFlags(){Uy.clear()}static clearNodeArray(){e.ClearFrame<e.ClearRound&&!i?e.ClearFrame++:(e.ClearFrame=0,zy.length=0,Ly.length=0)}},wy.EventType=Yg,wy.NodeSpace=lv,wy.TransformDirtyBit=_v,wy.TransformBit=_v,wy.reserveContentsForAllSyncablePrefabTag=By,wy.ClearFrame=0,wy.ClearRound=1e3,xy=vc((Ay=Ty).prototype,"_lpos",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Gn}}),by=vc(Ay.prototype,"_lrot",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Qn}}),Cy=vc(Ay.prototype,"_lscale",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Gn(1,1,1)}}),Sy=vc(Ay.prototype,"_layer",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Gh.Enum.DEFAULT}}),Ey=vc(Ay.prototype,"_euler",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Gn}}),vc(Ay.prototype,"eulerAngles",[gy],Object.getOwnPropertyDescriptor(Ay.prototype,"eulerAngles"),Ay.prototype),vc(Ay.prototype,"angle",[Wc],Object.getOwnPropertyDescriptor(Ay.prototype,"angle"),Ay.prototype),vc(Ay.prototype,"layer",[Wc],Object.getOwnPropertyDescriptor(Ay.prototype,"layer"),Ay.prototype),yy=Ay))||yy));var jy,Gy,Vy,Hy,Wy,qy,Yy,Xy,Qy,Ky,Zy,Jy,$y,eA,tA,nA,iA,oA,aA,rA,sA,cA,lA,_A,uA,fA,hA,pA,mA,dA,vA,gA,yA,AA,xA,bA,CA,SA,EA,wA,TA,PA,IA,RA,NA,DA,MA,OA,zA,LA,FA,UA,BA,kA,jA,GA,VA,HA,WA,qA,YA,XA,QA,KA;c.Node=ky;let ZA=Rc("cc.TargetInfo")((Vy=vc((Gy=class{constructor(){dc(this,"localID",Vy,this)}}).prototype,"localID",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jy=Gy))||jy,JA=(Hy=Rc("cc.TargetOverrideInfo"),Wy=rl(Lt),qy=rl(ZA),Yy=rl(ky),Xy=rl(ZA),Hy((Zy=vc((Ky=class{constructor(){dc(this,"source",Zy,this),dc(this,"sourceInfo",Jy,this),dc(this,"propertyPath",$y,this),dc(this,"target",eA,this),dc(this,"targetInfo",tA,this)}}).prototype,"source",[zc,Wy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jy=vc(Ky.prototype,"sourceInfo",[zc,qy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$y=vc(Ky.prototype,"propertyPath",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),eA=vc(Ky.prototype,"target",[zc,Yy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tA=vc(Ky.prototype,"targetInfo",[zc,Xy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qy=Ky))||Qy),$A=Rc("cc.CompPrefabInfo")((oA=vc((iA=class{constructor(){dc(this,"fileId",oA,this)}}).prototype,"fileId",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),nA=iA))||nA,ex=(aA=Rc("CCPropertyOverrideInfo"),rA=rl(ZA),aA((lA=vc((cA=class{constructor(){dc(this,"targetInfo",lA,this),dc(this,"propertyPath",_A,this),dc(this,"value",uA,this)}isTarget(e,t){}}).prototype,"targetInfo",[zc,rA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_A=vc(cA.prototype,"propertyPath",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),uA=vc(cA.prototype,"value",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sA=cA))||sA),tx=(fA=Rc("cc.MountedChildrenInfo"),hA=rl(ZA),pA=rl([ky]),fA((vA=vc((dA=class{constructor(){dc(this,"targetInfo",vA,this),dc(this,"nodes",gA,this)}isTarget(e){}}).prototype,"targetInfo",[zc,hA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gA=vc(dA.prototype,"nodes",[zc,pA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mA=dA))||mA),nx=(yA=Rc("cc.MountedComponentsInfo"),AA=rl(ZA),xA=rl([y_]),yA((SA=vc((CA=class{constructor(){dc(this,"targetInfo",SA,this),dc(this,"components",EA,this)}isTarget(e){}}).prototype,"targetInfo",[zc,AA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),EA=vc(CA.prototype,"components",[zc,xA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bA=CA))||bA),ix=(wA=Rc("cc.PrefabInstance"),TA=rl(ky),PA=rl([tx]),IA=rl([nx]),RA=rl([ex]),NA=rl([ZA]),wA((OA=vc((MA=class{constructor(){dc(this,"fileId",OA,this),dc(this,"prefabRootNode",zA,this),dc(this,"mountedChildren",LA,this),dc(this,"mountedComponents",FA,this),dc(this,"propertyOverrides",UA,this),dc(this,"removedComponents",BA,this),this.targetMap={}}findPropertyOverride(e,t){}removePropertyOverride(e,t){}}).prototype,"fileId",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),zA=vc(MA.prototype,"prefabRootNode",[zc,TA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LA=vc(MA.prototype,"mountedChildren",[zc,PA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),FA=vc(MA.prototype,"mountedComponents",[zc,IA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),UA=vc(MA.prototype,"propertyOverrides",[zc,RA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),BA=vc(MA.prototype,"removedComponents",[zc,NA],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),DA=MA))||DA),ox=(kA=Rc("cc.PrefabInfo"),jA=rl(ky),GA=rl(ix),VA=rl([JA]),kA((qA=vc((WA=class{constructor(){dc(this,"root",qA,this),dc(this,"asset",YA,this),dc(this,"fileId",XA,this),dc(this,"instance",QA,this),dc(this,"targetOverrides",KA,this)}}).prototype,"root",[zc,jA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YA=vc(WA.prototype,"asset",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XA=vc(WA.prototype,"fileId",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),QA=vc(WA.prototype,"instance",[zc,GA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KA=vc(WA.prototype,"targetOverrides",[zc,VA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),HA=WA))||HA);c._PrefabInfo=ox;var ax,rx,sx,cx,lx,_x,ux=Object.freeze({__proto__:null,TargetInfo:ZA,TargetOverrideInfo:JA,CompPrefabInfo:$A,PropertyOverrideInfo:ex,MountedChildrenInfo:tx,MountedComponentsInfo:nx,PrefabInstance:ix,PrefabInfo:ox,createNodeWithPrefab:ly,generateTargetMap:_y,getTarget:uy,applyMountedChildren:fy,applyMountedComponents:hy,applyRemovedComponents:py,applyPropertyOverrides:my,applyTargetOverrides:dy});const fx=Be({AUTO:0,SINGLE_INSTANCE:1,MULTI_INSTANCE:2});let hx=e("f6",Rc("cc.Prefab")((_x=lx=class e extends $l{constructor(){super(),dc(this,"data",sx,this),dc(this,"optimizationPolicy",cx,this),this._createFunction=void 0,this._instantiatedTimes=void 0,this._createFunction=null,this._instantiatedTimes=0}createNode(e){const t=c.instantiate(this);t.name=this.name,e(null,t)}compileCreateFunction(){this._createFunction=function(e){const t=e instanceof c._BaseNode&&e;return new Rg(e,t).result}(this.data)}_doInstantiate(e){return this.data._prefab||P(3700),this._createFunction||this.compileCreateFunction(),this._createFunction(e)}_instantiate(){let t,n=!1;return n=this.optimizationPolicy!==fx.SINGLE_INSTANCE&&(this.optimizationPolicy===fx.MULTI_INSTANCE||this._instantiatedTimes+1>=e.OptimizationPolicyThreshold),n?(t=this._doInstantiate(),this.data._instantiate(t)):t=this.data._instantiate(),++this._instantiatedTimes,t}initDefault(e){super.initDefault(e),this.data=new ky,this.data.name="(Missing Node)";const t=new c._PrefabInfo;t.asset=this,t.root=this.data,this.data._prefab=t}validate(){return!!this.data}},lx.OptimizationPolicy=fx,lx.OptimizationPolicyThreshold=3,sx=vc((rx=_x).prototype,"data",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cx=vc(rx.prototype,"optimizationPolicy",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fx.AUTO}}),ax=rx))||ax);var px,mx,dx,vx,gx,yx;Fe.value(hx,"_utils",ux),c.Prefab=hx,le(c,"cc._Prefab","Prefab"),e("eV",(px=Rc("cc.PrefabLink"),mx=rl(hx),dx=qc(),px((yx=vc((gx=class extends y_{constructor(...e){super(...e),dc(this,"prefab",yx,this)}}).prototype,"prefab",[mx,zc,dx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vx=gx))||vx));const Ax=new Gn;function xx(e,t,n,i){i||(i=new Gn),e.convertToUINode(t,n,i);const o=n.position;return i.add(o),i}function bx(e,t,n){return n||(n=new Gn),e.worldToScreen(t,n),n.x/=c.view.getScaleX(),n.y/=c.view.getScaleY(),n}const Cx=e("eZ",{WorldNode3DToLocalNodeUI:xx,WorldNode3DToWorldNodeUI:bx});var Sx,Ex,wx,Tx,Px,Ix,Rx,Nx,Dx;c.pipelineUtils=Cx,an(c.pipelineUtils,"cc.pipelineUtils",[{name:"WorldNode3DToLocalNodeUI",newName:"convertToUINode",targetName:"cc.Camera.prototype",customFunction(...e){const t=e[0],n=e[3]||Ax;return t.convertToUINode(e[1],e[2],n),n.add(e[2].position),e[3]||n.clone()}}]);const Mx=new $a;Mx.endAccesses=[ra.FRAGMENT_SHADER_READ_TEXTURE];const Ox=new er,zx=new or([Mx],Ox),Lx={width:1,height:1,renderPassInfo:zx};let Fx=e("d3",(Sx=Rc("cc.RenderTexture"),Ex=Kc(),wx=Zc(),Tx=Kc(),Px=Zc(),Sx((Nx=vc((Rx=class extends Km{constructor(...e){super(...e),dc(this,"_width",Nx,this),dc(this,"_height",Dx,this),this._window=null}get width(){return this._width}get height(){return this._height}get window(){return this._window}initialize(e){this._name=e.name||"",this._width=e.width,this._height=e.height,this._initWindow(e)}reset(e){this.initialize(e)}destroy(){if(this._window){const e=c.director.root;null==e||e.destroyWindow(this._window),this._window=null}return super.destroy()}resize(e,t){this._width=e,this._height=t,this._window&&this._window.resize(e,t),this.emit("resize",this._window)}get _serialize(){return null}get _deserialize(){return null}getGFXTexture(){return this._window&&this._window.framebuffer.colorTextures[0]}getGFXSampler(){const e=c.director.root;return Lm.getSampler(e.device,Dm)}getSamplerHash(){return Dm}onLoaded(){this._initWindow()}_initWindow(e){const t=c.director.root;Lx.title=this._name,Lx.width=this._width,Lx.height=this._height,Lx.renderPassInfo=e&&e.passInfo?e.passInfo:zx,this._window?(this._window.destroy(),this._window.initialize(t.device,Lx)):this._window=t.createWindow(Lx)}initDefault(e){super.initDefault(e),this._width=this._height=1,this._initWindow()}validate(){return this.width>=1&&this.width<=2048&&this.height>=1&&this.height<=2048}}).prototype,"_width",[zc,Ex,wx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Dx=vc(Rx.prototype,"_height",[zc,Tx,Px],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ix=Rx))||Ix));var Ux,Bx;c.RenderTexture=Fx,rn(Km.prototype,"TextureBase.prototype",[{name:"hasPremultipliedAlpha"},{name:"setPremultiplyAlpha"},{name:"setFlipY"}]),an(Fx.prototype,"RenderTexture.prototype",[{name:"getGFXWindow",customFunction(){return this._window}}]);let kx=e("f5",Rc("cc.BufferAsset")((vc((Bx=class extends $l{constructor(...e){super(...e),this._buffer=null}get _nativeAsset(){return this._buffer}set _nativeAsset(e){e instanceof ArrayBuffer?this._buffer=e:this._buffer=e.buffer}buffer(){return this._buffer}validate(){return!!this.buffer}}).prototype,"_nativeAsset",[sl],Object.getOwnPropertyDescriptor(Bx.prototype,"_nativeAsset"),Bx.prototype),Ux=Bx))||Ux);c.BufferAsset=kx;const jx={[ko.UNORM]:"Uint",[ko.SNORM]:"Int",[ko.UINT]:"Uint",[ko.INT]:"Int",[ko.UFLOAT]:"Float",[ko.FLOAT]:"Float",default:"Uint"};function Gx(e){return`${jx[e.type]||jx.default}${e.size/e.count*8}`}const Vx=new Array(16);let Hx=null,Wx=new si;const qx=[Yg.TOUCH_START,Yg.TOUCH_MOVE,Yg.TOUCH_END,Yg.TOUCH_CANCEL],Yx=[Yg.MOUSE_DOWN,Yg.MOUSE_ENTER,Yg.MOUSE_MOVE,Yg.MOUSE_LEAVE,Yg.MOUSE_UP,Yg.MOUSE_WHEEL];function Xx(e,t){const n=this.owner;return!(!n||!n._uiProps.uiTransformComp||(e.getUILocation(Wx),!n._uiProps.uiTransformComp.isHit(Wx,this)||(t.type=Yg.TOUCH_START,t.touch=e,t.bubbles=!0,n.dispatchEvent(t),0)))}function Qx(e,t){const n=this.owner;return!(!n||!n._uiProps.uiTransformComp||(t.type=Yg.TOUCH_MOVE,t.touch=e,t.bubbles=!0,n.dispatchEvent(t),0))}function Kx(e,t){const n=this.owner;n&&n._uiProps.uiTransformComp&&(e.getUILocation(Wx),n._uiProps.uiTransformComp.isHit(Wx,this)?t.type=Yg.TOUCH_END:t.type=Yg.TOUCH_CANCEL,t.touch=e,t.bubbles=!0,n.dispatchEvent(t))}function Zx(e,t){const n=this.owner;n&&n._uiProps.uiTransformComp&&(t.type=Yg.TOUCH_CANCEL,t.touch=e,t.bubbles=!0,n.dispatchEvent(t))}function Jx(e){const t=this.owner;t&&t._uiProps.uiTransformComp&&(Wx=e.getUILocation(),t._uiProps.uiTransformComp.isHit(Wx,this)&&(e.type=Yg.MOUSE_DOWN,e.bubbles=!0,t.dispatchEvent(e)))}function $x(e){const t=this.owner;if(t&&t._uiProps.uiTransformComp){if(Wx=e.getUILocation(),t._uiProps.uiTransformComp.isHit(Wx,this))this._previousIn||(Hx&&Hx.eventProcessor.mouseListener&&(e.type=Yg.MOUSE_LEAVE,Hx.dispatchEvent(e),Hx.eventProcessor.mouseListener&&(Hx.eventProcessor.mouseListener._previousIn=!1)),Hx=t,e.type=Yg.MOUSE_ENTER,t.dispatchEvent(e),this._previousIn=!0),e.type=Yg.MOUSE_MOVE,e.bubbles=!0,t.dispatchEvent(e);else{if(!this._previousIn)return;e.type=Yg.MOUSE_LEAVE,t.dispatchEvent(e),this._previousIn=!1,Hx=null}e.propagationStopped=!0}}function eb(e){const t=this.owner;t&&t._uiProps.uiTransformComp&&(Wx=e.getUILocation(),t._uiProps.uiTransformComp.isHit(Wx,this)&&(e.type=Yg.MOUSE_UP,e.bubbles=!0,t.dispatchEvent(e),e.propagationStopped=!0))}function tb(e){const t=this.owner;t&&t._uiProps.uiTransformComp&&(Wx=e.getUILocation(),t._uiProps.uiTransformComp.isHit(Wx,this)&&(e.type=Yg.MOUSE_WHEEL,e.bubbles=!0,t.dispatchEvent(e),e.propagationStopped=!0))}function nb(e,t){if(t){let n=0,i=[];for(let o=e;o&&ky.isNode(o);o=o.parent,++n){const e=o.getComponent(t);if(e){const t={index:n,comp:e};i?i.push(t):i=[t]}}return i.length>0?i:null}return null}function ib(e,t){if(!e._persistNode){if(e.eventProcessor.bubblingTargets)for(let n=0;n<t.length;++n)if(e.eventProcessor.bubblingTargets.hasEventListener(t[n]))return!0;if(e.eventProcessor.capturingTargets)for(let n=0;n<t.length;++n)if(e.eventProcessor.capturingTargets.hasEventListener(t[n]))return!0;return!1}return!0}class ob{get node(){return this._node}constructor(e){this.bubblingTargets=null,this.capturingTargets=null,this.touchListener=null,this.mouseListener=null,this._node=void 0,this._node=e}reattach(){let e;this.node.walk((t=>{e||(e=nb(t,ob._comp)),t.eventProcessor.touchListener&&(t.eventProcessor.touchListener.mask=e),t.eventProcessor.mouseListener&&(t.eventProcessor.mouseListener.mask=e)}))}destroy(){Hx===this._node&&(Hx=null),(this.touchListener||this.mouseListener)&&(qg.removeListeners(this._node),this.touchListener&&(this.touchListener.owner=null,this.touchListener.mask=null,this.touchListener=null),this.mouseListener&&(this.mouseListener.owner=null,this.mouseListener.mask=null,this.mouseListener=null)),this.capturingTargets&&this.capturingTargets.clear(),this.bubblingTargets&&this.bubblingTargets.clear()}on(e,t,n,i){return this._checknSetupSysEvent(e)?this._onDispatch(e,t,n,i):(this.bubblingTargets||(this.bubblingTargets=new Wt),this.bubblingTargets.on(e,t,n))}once(e,t,n,i){let o;o=this._checknSetupSysEvent(e)&&i?this.capturingTargets=this.capturingTargets||new Wt:this.bubblingTargets=this.bubblingTargets||new Wt,o.on(e,t,n,!0),o.on(e,(()=>{this.off(e,t,n)}),void 0,!0)}off(e,t,n,i){const o=-1!==qx.indexOf(e),a=!o&&-1!==Yx.indexOf(e);o||a?(this._offDispatch(e,t,n,i),o?this.touchListener&&!ib(this._node,qx)&&(qg.removeListener(this.touchListener),this.touchListener=null):a&&this.mouseListener&&!ib(this._node,Yx)&&(qg.removeListener(this.mouseListener),this.mouseListener=null)):this.bubblingTargets&&this.bubblingTargets.off(e,t,n)}emit(e,t,n,i,o,a){this.bubblingTargets&&this.bubblingTargets.emit(e,t,n,i,o,a)}dispatchEvent(e){!function(e,t){let n,i=0;for(t.target=e,Vx.length=0,e.eventProcessor.getCapturingTargets(t.type,Vx),t.eventPhase=1,i=Vx.length-1;i>=0;--i)if(n=Vx[i],n.eventProcessor.capturingTargets&&(t.currentTarget=n,n.eventProcessor.capturingTargets.emit(t.type,t,Vx),t.propagationStopped))return void(Vx.length=0);if(Vx.length=0,t.eventPhase=2,t.currentTarget=e,e.eventProcessor.capturingTargets&&e.eventProcessor.capturingTargets.emit(t.type,t),!t.propagationImmediateStopped&&e.eventProcessor.bubblingTargets&&e.eventProcessor.bubblingTargets.emit(t.type,t),!t.propagationStopped&&t.bubbles)for(e.eventProcessor.getBubblingTargets(t.type,Vx),t.eventPhase=3,i=0;i<Vx.length;++i)if(n=Vx[i],n.eventProcessor.bubblingTargets&&(t.currentTarget=n,n.eventProcessor.bubblingTargets.emit(t.type,t),t.propagationStopped))return void(Vx.length=0);Vx.length=0}(this._node,e),Vx.length=0}hasEventListener(e,t,n){let i=!1;return this.bubblingTargets&&(i=this.bubblingTargets.hasEventListener(e,t,n)),!i&&this.capturingTargets&&(i=this.capturingTargets.hasEventListener(e,t,n)),i}targetOff(e){this.capturingTargets&&this.capturingTargets.removeAll(e),this.bubblingTargets&&this.bubblingTargets.removeAll(e),this.touchListener&&!ib(this.node,qx)&&(qg.removeListener(this.touchListener),this.touchListener=null),this.mouseListener&&!ib(this.node,Yx)&&(qg.removeListener(this.mouseListener),this.mouseListener=null)}getCapturingTargets(e,t){let n=this._node.parent;for(;n;)n.eventProcessor.capturingTargets&&n.eventProcessor.capturingTargets.hasEventListener(e)&&t.push(n),n=n.parent}getBubblingTargets(e,t){let n=this._node.parent;for(;n;)n.eventProcessor.bubblingTargets&&n.eventProcessor.bubblingTargets.hasEventListener(e)&&t.push(n),n=n.parent}_checknSetupSysEvent(e){let t=!1,n=!1;return-1!==qx.indexOf(e)?(this.touchListener||(this.touchListener=c.EventListener.create({event:c.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,owner:this._node,mask:nb(this._node,ob._comp),onTouchBegan:Xx,onTouchMoved:Qx,onTouchEnded:Kx,onTouchCancelled:Zx}),qg.addListener(this.touchListener,this._node),t=!0),n=!0):-1!==Yx.indexOf(e)&&(this.mouseListener||(this.mouseListener=c.EventListener.create({event:c.EventListener.MOUSE,_previousIn:!1,owner:this._node,mask:nb(this._node,ob._comp),onMouseDown:Jx,onMouseMove:$x,onMouseUp:eb,onMouseScroll:tb}),qg.addListener(this.mouseListener,this._node),t=!0),n=!0),t&&!this._node.activeInHierarchy&&c.director.getScheduler().schedule((()=>{this._node.activeInHierarchy||qg.pauseTarget(this._node)}),this._node,0,0,0,!1),n}_onDispatch(e,t,n,i){if("boolean"==typeof n?(i=n,n=void 0):i=!!i,!t)return void R(6800);let o=null;return o=i?this.capturingTargets=this.capturingTargets||new Wt:this.bubblingTargets=this.bubblingTargets||new Wt,o.hasEventListener(e,t,n)||o.on(e,t,n),t}_offDispatch(e,t,n,i){if("boolean"==typeof n?(i=n,n=void 0):i=!!i,t){const o=i?this.capturingTargets:this.bubblingTargets;o&&o.off(e,t,n)}else this.capturingTargets&&this.capturingTargets.removeAll(e),this.bubblingTargets&&this.bubblingTargets.removeAll(e)}}var ab,rb,sb,cb,lb,_b,ub,fb,hb,pb,mb,db,vb,gb,yb,Ab,xb,bb,Cb,Sb,Eb,wb,Tb,Pb,Ib,Rb,Nb,Db,Mb,Ob,zb,Lb,Fb,Ub,Bb,kb,jb,Gb,Vb,Hb,Wb,qb,Yb,Xb,Qb,Kb,Zb,Jb,$b,eC,tC,nC,iC,oC,aC,rC,sC,cC,lC,_C,uC,fC,hC,pC,mC,dC,vC,gC,yC,AC,xC,bC,CC,SC,EC,wC,TC,PC,IC,RC,NC,DC,MC,OC,zC,LC,FC,UC,BC,kC,jC,GC,VC,HC,WC,qC,YC,XC,QC,KC,ZC,JC,$C,eS,tS,nS,iS,oS,aS;e("c$",ob),ob._comp=null,c.NodeEventProcessor=ob;const rS=new Gn(0,1,0),sS=new Gn,cS=new Qn;let lS=(ab=Rc("cc.AmbientInfo"),rb=rl(ut),ab((lb=vc((cb=class{constructor(){dc(this,"_skyColor",lb,this),dc(this,"_skyIllum",_b,this),dc(this,"_groundAlbedo",ub,this),this._resource=null}set skyColor(e){this._skyColor.set(e),this._resource&&(this._resource.skyColor=this._skyColor)}get skyColor(){return this._skyColor}set skyIllum(e){this._skyIllum=e,this._resource&&(this._resource.skyIllum=this.skyIllum)}get skyIllum(){return this._skyIllum}set groundAlbedo(e){this._groundAlbedo.set(e),this._resource&&(this._resource.groundAlbedo=this._groundAlbedo)}get groundAlbedo(){return this._groundAlbedo}activate(e){this._resource=e,this._resource.initialize(this)}}).prototype,"_skyColor",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Un(51,128,204,1)}}),_b=vc(cb.prototype,"_skyIllum",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return lo.SKY_ILLUM}}),ub=vc(cb.prototype,"_groundAlbedo",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Un(51,51,51,255)}}),vc(cb.prototype,"skyColor",[Wc],Object.getOwnPropertyDescriptor(cb.prototype,"skyColor"),cb.prototype),vc(cb.prototype,"skyIllum",[Wc,rb],Object.getOwnPropertyDescriptor(cb.prototype,"skyIllum"),cb.prototype),vc(cb.prototype,"groundAlbedo",[Wc],Object.getOwnPropertyDescriptor(cb.prototype,"groundAlbedo"),cb.prototype),sb=cb))||sb);c.AmbientInfo=lS;let _S=(fb=Rc("cc.SkyboxInfo"),hb=rl(yd),pb=rl(yd),fb((vb=vc((db=class{constructor(){dc(this,"_envmap",vb,this),dc(this,"_isRGBE",gb,this),dc(this,"_enabled",yb,this),dc(this,"_useIBL",Ab,this),this._resource=null}set enabled(e){this._enabled!==e&&(this._enabled=e,this._resource&&(this._resource.enabled=this._enabled))}get enabled(){return this._enabled}set useIBL(e){this._useIBL=e,this._resource&&(this._resource.useIBL=this._useIBL)}get useIBL(){return this._useIBL}set envmap(e){this._envmap=e,this._resource&&(this._resource.envmap=this._envmap)}get envmap(){return this._envmap}set isRGBE(e){this._isRGBE=e,this._resource&&(this._resource.isRGBE=this._isRGBE)}get isRGBE(){return this._isRGBE}activate(e){this._resource=e,this._resource.initialize(this),this._resource.activate()}}).prototype,"_envmap",[hb],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gb=vc(db.prototype,"_isRGBE",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yb=vc(db.prototype,"_enabled",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ab=vc(db.prototype,"_useIBL",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vc(db.prototype,"enabled",[Wc],Object.getOwnPropertyDescriptor(db.prototype,"enabled"),db.prototype),vc(db.prototype,"useIBL",[Wc],Object.getOwnPropertyDescriptor(db.prototype,"useIBL"),db.prototype),vc(db.prototype,"envmap",[Wc,pb],Object.getOwnPropertyDescriptor(db.prototype,"envmap"),db.prototype),vc(db.prototype,"isRGBE",[Wc],Object.getOwnPropertyDescriptor(db.prototype,"isRGBE"),db.prototype),mb=db))||mb);c.SkyboxInfo=_S;let uS=(xb=Rc("cc.FogInfo"),bb=rl(fg),Cb=qc(),Sb=rl(ut),Eb=Qc(),wb=Jc(),Tb=el(),Pb=qc(),Ib=rl(ut),Rb=Jc(),Nb=el(),Db=qc(),Mb=rl(ut),Ob=Jc(),zb=el(),Lb=qc(),Fb=rl(ut),Ub=Kc(),Bb=Jc(),kb=el(),jb=qc(),Gb=rl(ut),Vb=Jc(),Hb=el(),Wb=qc(),qb=rl(ut),Yb=Jc(),Xb=el(),xb((sC=rC=class{constructor(){dc(this,"_type",Zb,this),dc(this,"_fogColor",Jb,this),dc(this,"_enabled",$b,this),dc(this,"_fogDensity",eC,this),dc(this,"_fogStart",tC,this),dc(this,"_fogEnd",nC,this),dc(this,"_fogAtten",iC,this),dc(this,"_fogTop",oC,this),dc(this,"_fogRange",aC,this),this._resource=null}set enabled(e){this._enabled!==e&&(this._enabled=e,this._resource&&(this._resource.enabled=e,e&&(this._resource.type=this._type)))}get enabled(){return this._enabled}set fogColor(e){this._fogColor.set(e),this._resource&&(this._resource.fogColor=this._fogColor)}get fogColor(){return this._fogColor}get type(){return this._type}set type(e){this._type=e,this._resource&&(this._resource.type=e)}get fogDensity(){return this._fogDensity}set fogDensity(e){this._fogDensity=e,this._resource&&(this._resource.fogDensity=e)}get fogStart(){return this._fogStart}set fogStart(e){this._fogStart=e,this._resource&&(this._resource.fogStart=e)}get fogEnd(){return this._fogEnd}set fogEnd(e){this._fogEnd=e,this._resource&&(this._resource.fogEnd=e)}get fogAtten(){return this._fogAtten}set fogAtten(e){this._fogAtten=e,this._resource&&(this._resource.fogAtten=e)}get fogTop(){return this._fogTop}set fogTop(e){this._fogTop=e,this._resource&&(this._resource.fogTop=e)}get fogRange(){return this._fogRange}set fogRange(e){this._fogRange=e,this._resource&&(this._resource.fogRange=e)}activate(e){this._resource=e,this._resource.initialize(this),this._resource.activate()}},rC.FogType=fg,Zb=vc((Kb=sC).prototype,"_type",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fg.LINEAR}}),Jb=vc(Kb.prototype,"_fogColor",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Un("#C8C8C8")}}),$b=vc(Kb.prototype,"_enabled",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),eC=vc(Kb.prototype,"_fogDensity",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),tC=vc(Kb.prototype,"_fogStart",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),nC=vc(Kb.prototype,"_fogEnd",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),iC=vc(Kb.prototype,"_fogAtten",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),oC=vc(Kb.prototype,"_fogTop",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),aC=vc(Kb.prototype,"_fogRange",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),vc(Kb.prototype,"enabled",[Wc],Object.getOwnPropertyDescriptor(Kb.prototype,"enabled"),Kb.prototype),vc(Kb.prototype,"fogColor",[Wc],Object.getOwnPropertyDescriptor(Kb.prototype,"fogColor"),Kb.prototype),vc(Kb.prototype,"type",[Wc,bb],Object.getOwnPropertyDescriptor(Kb.prototype,"type"),Kb.prototype),vc(Kb.prototype,"fogDensity",[Cb,Sb,Eb,wb,$c,Tb],Object.getOwnPropertyDescriptor(Kb.prototype,"fogDensity"),Kb.prototype),vc(Kb.prototype,"fogStart",[Pb,Ib,Rb,Nb],Object.getOwnPropertyDescriptor(Kb.prototype,"fogStart"),Kb.prototype),vc(Kb.prototype,"fogEnd",[Db,Mb,Ob,zb],Object.getOwnPropertyDescriptor(Kb.prototype,"fogEnd"),Kb.prototype),vc(Kb.prototype,"fogAtten",[Lb,Fb,Ub,Bb,kb],Object.getOwnPropertyDescriptor(Kb.prototype,"fogAtten"),Kb.prototype),vc(Kb.prototype,"fogTop",[jb,Gb,Vb,Hb],Object.getOwnPropertyDescriptor(Kb.prototype,"fogTop"),Kb.prototype),vc(Kb.prototype,"fogRange",[Wb,qb,Yb,Xb],Object.getOwnPropertyDescriptor(Kb.prototype,"fogRange"),Kb.prototype),Qb=Kb))||Qb),fS=(cC=Rc("cc.ShadowsInfo"),lC=rl(jv),_C=qc(),uC=qc(),fC=rl(ut),hC=qc(),pC=Qc(),mC=rl(ut),dC=qc(),vC=rl(Gv),gC=qc(),yC=rl(_t),AC=qc(),xC=rl(ut),bC=qc(),CC=rl(ut),SC=qc(),EC=rl(kv),wC=qc(),TC=rl(ft),PC=qc(),IC=rl(ut),RC=qc(),NC=rl(ut),DC=qc(),MC=rl(ut),OC=qc(),cC((FC=vc((LC=class{constructor(){dc(this,"_type",FC,this),dc(this,"_enabled",UC,this),dc(this,"_normal",BC,this),dc(this,"_distance",kC,this),dc(this,"_shadowColor",jC,this),dc(this,"_autoAdapt",GC,this),dc(this,"_pcf",VC,this),dc(this,"_bias",HC,this),dc(this,"_normalBias",WC,this),dc(this,"_near",qC,this),dc(this,"_far",YC,this),dc(this,"_orthoSize",XC,this),dc(this,"_maxReceived",QC,this),dc(this,"_size",KC,this),dc(this,"_saturation",ZC,this),this._resource=null}set enabled(e){this._enabled!==e&&(this._enabled=e,this._resource&&(this._resource.enabled=e,e&&(this._resource.type=this._type)))}get enabled(){return this._enabled}set type(e){this._type=e,this._resource&&(this._resource.type=e)}get type(){return this._type}set shadowColor(e){this._shadowColor.set(e),this._resource&&(this._resource.shadowColor=e)}get shadowColor(){return this._shadowColor}set normal(e){Gn.copy(this._normal,e),this._resource&&(this._resource.normal=e)}get normal(){return this._normal}set distance(e){this._distance=e,this._resource&&(this._resource.distance=e)}get distance(){return this._distance}set saturation(e){e>1?(this._saturation=e/e,this._resource&&(this._resource.saturation=e/e)):(this._saturation=e,this._resource&&(this._resource.saturation=e))}get saturation(){return this._saturation}set pcf(e){this._pcf=e,this._resource&&(this._resource.pcf=e)}get pcf(){return this._pcf}set maxReceived(e){this._maxReceived=e,this._resource&&(this._resource.maxReceived=e)}get maxReceived(){return this._maxReceived}set bias(e){this._bias=e,this._resource&&(this._resource.bias=e)}get bias(){return this._bias}set normalBias(e){this._normalBias=e,this._resource&&(this._resource.normalBias=e)}get normalBias(){return this._normalBias}set shadowMapSize(e){this._size.set(e,e),this._resource&&(this._resource.size.set(e,e),this._resource.shadowMapDirty=!0)}get shadowMapSize(){return this._size.x}get size(){return this._size}set autoAdapt(e){this._autoAdapt=e,this._resource&&(this._resource.autoAdapt=e)}get autoAdapt(){return this._autoAdapt}set near(e){this._near=e,this._resource&&(this._resource.near=e)}get near(){return this._near}set far(e){this._far=e,this._resource&&(this._resource.far=e)}get far(){return this._far}set orthoSize(e){this._orthoSize=e,this._resource&&(this._resource.orthoSize=e)}get orthoSize(){return this._orthoSize}setPlaneFromNode(e){e.getWorldRotation(cS),this.normal=Gn.transformQuat(sS,rS,cS),e.getWorldPosition(sS),this.distance=Gn.dot(this._normal,sS)}activate(e){this._resource=e,this._resource.initialize(this),this._resource.activate()}}).prototype,"_type",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return jv.Planar}}),UC=vc(LC.prototype,"_enabled",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),BC=vc(LC.prototype,"_normal",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Gn(0,1,0)}}),kC=vc(LC.prototype,"_distance",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),jC=vc(LC.prototype,"_shadowColor",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Un(0,0,0,76)}}),GC=vc(LC.prototype,"_autoAdapt",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),VC=vc(LC.prototype,"_pcf",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Gv.HARD}}),HC=vc(LC.prototype,"_bias",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e-5}}),WC=vc(LC.prototype,"_normalBias",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qC=vc(LC.prototype,"_near",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),YC=vc(LC.prototype,"_far",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),XC=vc(LC.prototype,"_orthoSize",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),QC=vc(LC.prototype,"_maxReceived",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),KC=vc(LC.prototype,"_size",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new si(512,512)}}),ZC=vc(LC.prototype,"_saturation",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.75}}),vc(LC.prototype,"enabled",[Wc],Object.getOwnPropertyDescriptor(LC.prototype,"enabled"),LC.prototype),vc(LC.prototype,"type",[Wc,lC],Object.getOwnPropertyDescriptor(LC.prototype,"type"),LC.prototype),vc(LC.prototype,"shadowColor",[_C],Object.getOwnPropertyDescriptor(LC.prototype,"shadowColor"),LC.prototype),vc(LC.prototype,"normal",[uC],Object.getOwnPropertyDescriptor(LC.prototype,"normal"),LC.prototype),vc(LC.prototype,"distance",[fC,hC],Object.getOwnPropertyDescriptor(LC.prototype,"distance"),LC.prototype),vc(LC.prototype,"saturation",[Wc,pC,$c,mC,dC],Object.getOwnPropertyDescriptor(LC.prototype,"saturation"),LC.prototype),vc(LC.prototype,"pcf",[vC,gC],Object.getOwnPropertyDescriptor(LC.prototype,"pcf"),LC.prototype),vc(LC.prototype,"maxReceived",[yC,AC],Object.getOwnPropertyDescriptor(LC.prototype,"maxReceived"),LC.prototype),vc(LC.prototype,"bias",[xC,bC],Object.getOwnPropertyDescriptor(LC.prototype,"bias"),LC.prototype),vc(LC.prototype,"normalBias",[CC,SC],Object.getOwnPropertyDescriptor(LC.prototype,"normalBias"),LC.prototype),vc(LC.prototype,"shadowMapSize",[EC,wC],Object.getOwnPropertyDescriptor(LC.prototype,"shadowMapSize"),LC.prototype),vc(LC.prototype,"autoAdapt",[TC,PC],Object.getOwnPropertyDescriptor(LC.prototype,"autoAdapt"),LC.prototype),vc(LC.prototype,"near",[IC,RC],Object.getOwnPropertyDescriptor(LC.prototype,"near"),LC.prototype),vc(LC.prototype,"far",[NC,DC],Object.getOwnPropertyDescriptor(LC.prototype,"far"),LC.prototype),vc(LC.prototype,"orthoSize",[MC,OC],Object.getOwnPropertyDescriptor(LC.prototype,"orthoSize"),LC.prototype),zC=LC))||zC);c.ShadowsInfo=fS;let hS=(JC=Rc("cc.SceneGlobals"),$C=rl(_S),JC((nS=vc((tS=class{constructor(){dc(this,"ambient",nS,this),dc(this,"shadows",iS,this),dc(this,"_skybox",oS,this),dc(this,"fog",aS,this)}get skybox(){return this._skybox}set skybox(e){this._skybox=e}activate(){const e=c.director.root.pipeline.pipelineSceneData;this.ambient.activate(e.ambient),this.skybox.activate(e.skybox),this.shadows.activate(e.shadows),this.fog.activate(e.fog)}}).prototype,"ambient",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new lS}}),iS=vc(tS.prototype,"shadows",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new fS}}),oS=vc(tS.prototype,"_skybox",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _S}}),aS=vc(tS.prototype,"fog",[Wc,zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new uS}}),vc(tS.prototype,"skybox",[Wc,$C],Object.getOwnPropertyDescriptor(tS.prototype,"skybox"),tS.prototype),eS=tS))||eS);var pS;c.SceneGlobals=hS,an(cy.prototype,"BaseNode",[{name:"childrenCount",newName:"children.length",customGetter(){return this.children.length}}]),an(ky.prototype,"Node",[{name:"width",targetName:"node.getComponent(UITransform)",customGetter(){return this._uiProps.uiTransformComp.width},customSetter(e){this._uiProps.uiTransformComp.width=e}},{name:"height",targetName:"node.getComponent(UITransform)",customGetter(){return this._uiProps.uiTransformComp.height},customSetter(e){this._uiProps.uiTransformComp.height=e}},{name:"anchorX",targetName:"node.getComponent(UITransform)",customGetter(){return this._uiProps.uiTransformComp.anchorX},customSetter(e){this._uiProps.uiTransformComp.anchorX=e}},{name:"anchorY",targetName:"node.getComponent(UITransform)",customGetter(){return this._uiProps.uiTransformComp.anchorY},customSetter(e){this._uiProps.uiTransformComp.anchorY=e}},{name:"getAnchorPoint",targetName:"node.getComponent(UITransform)",customFunction(e){return e||(e=new si),e.set(this._uiProps.uiTransformComp.anchorPoint),e}},{name:"setAnchorPoint",targetName:"node.getComponent(UITransform)",customFunction(e,t){this._uiProps.uiTransformComp.setAnchorPoint(e,t)}},{name:"getContentSize",targetName:"node.getComponent(UITransform)",customFunction(e){return e||(e=new pi),e.set(this._uiProps.uiTransformComp.contentSize),e}},{name:"setContentSize",targetName:"node.getComponent(UITransform)",customFunction(e,t){"number"==typeof e?this._uiProps.uiTransformComp.setContentSize(e,t):this._uiProps.uiTransformComp.setContentSize(e)}}]),rn(hS.prototype,"SceneGlobals.prototype",[{name:"aspect"},{name:"selfShadow"},{name:"linear"},{name:"packing"}]),rn(ky.prototype,"Node.prototype",[{name:"addLayer"},{name:"removeLayer"}]),rn(Gh,"Layers",[{name:"All"},{name:"RaycastMask"},{name:"check"}]),an(Gh,"Layers",[{name:"Default",newName:"DEFAULT",target:Gh.Enum,targetName:"Layers.Enum"},{name:"Always",newName:"ALWAYS",target:Gh.Enum,targetName:"Layers.Enum"},{name:"IgnoreRaycast",newName:"IGNORE_RAYCAST",target:Gh.Enum,targetName:"Layers.Enum"},{name:"Gizmos",newName:"GIZMOS",target:Gh.Enum,targetName:"Layers.Enum"},{name:"Editor",newName:"EDITOR",target:Gh.Enum,targetName:"Layers.Enum"},{name:"UI",newName:"UI_3D",target:Gh.Enum,targetName:"Layers.Enum"},{name:"UI2D",newName:"UI_2D",target:Gh.Enum,targetName:"Layers.Enum"},{name:"SceneGizmo",newName:"SCENE_GIZMO",target:Gh.Enum,targetName:"Layers.Enum"},{name:"makeInclusiveMask",newName:"makeMaskInclude",target:Gh,targetName:"Layers"},{name:"makeExclusiveMask",newName:"makeMaskExclude",target:Gh,targetName:"Layers"}]),rn(Gh.Enum,"Layers.Enum",[{name:"ALWAYS"}]),rn(Gh.BitMask,"Layers.BitMask",[{name:"ALWAYS"}]);const mS=Lt.Flags.HideInHierarchy,dS=Lt.Flags.DontSave;let vS=e("fO",Rc("cc.PrivateNode")(pS=class extends ky{constructor(e){super(e),P(12003,this.name),this.hideFlags|=dS|mS}})||pS);var gS,yS,AS,xS;c.PrivateNode=vS;let bS=e("dx",Rc("cc.Scene")((vc((yS=class extends cy{get renderScene(){return this._renderScene}get globals(){return this._globals}_updateScene(){this._scene=this}get native(){return this._nativeObj}_init(){this._nativeObj=new Gi}constructor(e){super(e),dc(this,"autoReleaseAssets",AS,this),dc(this,"_globals",xS,this),this._renderScene=null,this.dependAssets=null,this._inited=void 0,this._prefabSyncedInLiveReload=!1,this._pos=Gn.ZERO,this._rot=Qn.IDENTITY,this._scale=Gn.ONE,this._mat=ii.IDENTITY,this._dirtyFlags=0,this._activeInHierarchy=!1,c.director&&c.director.root&&(this._renderScene=c.director.root.createScene({})),this._inited=!c.game||!c.game._isCloning,this._init()}destroy(){const e=Lt.prototype.destroy.call(this);if(e){const e=this._children;for(let t=0;t<e.length;++t)e[t].active=!1}return this._renderScene&&c.director.root.destroyScene(this._renderScene),this._active=!1,this._activeInHierarchy=!1,e}addComponent(){throw new Error(O(3822))}_onHierarchyChanged(){}_onBatchCreated(e){super._onBatchCreated(e);const t=this._children.length;for(let n=0;n<t;++n)this.children[n]._siblingIndex=n,this._children[n]._onBatchCreated(e);dy(this)}getPosition(e){return Gn.copy(e||new Gn,Gn.ZERO)}getRotation(e){return Qn.copy(e||new Qn,Qn.IDENTITY)}getScale(e){return Gn.copy(e||new Gn,Gn.ONE)}getWorldPosition(e){return Gn.copy(e||new Gn,Gn.ZERO)}getWorldRotation(e){return Qn.copy(e||new Qn,Qn.IDENTITY)}getWorldScale(e){return Gn.copy(e||new Gn,Gn.ONE)}getWorldMatrix(e){return ii.copy(e||new ii,ii.IDENTITY)}getWorldRS(e){return ii.copy(e||new ii,ii.IDENTITY)}getWorldRT(e){return ii.copy(e||new ii,ii.IDENTITY)}get position(){return Gn.ZERO}get worldPosition(){return Gn.ZERO}get rotation(){return Qn.IDENTITY}get worldRotation(){return Qn.IDENTITY}get scale(){return Gn.ONE}get worldScale(){return Gn.ONE}get eulerAngles(){return Gn.ZERO}get worldMatrix(){return ii.IDENTITY}updateWorldTransform(){}_instantiate(){}_load(){this._inited||(this._onBatchCreated(i),this._inited=!0),this.walk(cy._setScene)}_activate(e){e=!1!==e,c.director._nodeActivator.activateNode(this,e),this._globals.activate()}}).prototype,"globals",[Wc],Object.getOwnPropertyDescriptor(yS.prototype,"globals"),yS.prototype),AS=vc(yS.prototype,"autoReleaseAssets",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xS=vc(yS.prototype,"_globals",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new hS}}),gS=yS))||gS);function CS(e,t){if(!t){const e=c.director.getScene();if(!e)return null;t=e}return t.getChildByPath(e)}c.Scene=bS,c.find=CS;const SS=Le.fastRemoveAt,ES=Lt.Flags.IsStartCalled,wS=Lt.Flags.IsOnEnableCalled;function TS(e,t){const n=t.constructor._executionOrder,i=t._id;let o=0;for(let t=e.length-1,a=t>>>1;o<=t;a=o+t>>>1){const r=e[a],s=r.constructor._executionOrder;if(s>n)t=a-1;else if(s<n)o=a+1;else{const e=r._id;if(e>i)t=a-1;else{if(!(e<i))return a;o=a+1}}}return~o}function PS(e,t){const n=e.array;let i=e.i+1;for(;i<n.length;){const o=n[i];o.node._activeInHierarchy?++i:(e.removeAt(i),t&&(o._objFlags&=~t))}}Lt.Flags.IsEditorOnEnableCalled;class IS{constructor(e){this._zero=void 0,this._neg=void 0,this._pos=void 0,this._invoke=void 0;const t=H;this._zero=new t([]),this._neg=new t([]),this._pos=new t([]),this._invoke=e}}function RS(e,t){return e.constructor._executionOrder-t.constructor._executionOrder}IS.stableRemoveInactive=PS;class NS extends IS{add(e){const t=e.constructor._executionOrder;(0===t?this._zero:t<0?this._neg:this._pos).array.push(e)}remove(e){const t=e.constructor._executionOrder;(0===t?this._zero:t<0?this._neg:this._pos).fastRemove(e)}cancelInactive(e){PS(this._zero,e),PS(this._neg,e),PS(this._pos,e)}invoke(){const e=this._neg;e.array.length>0&&(e.array.sort(RS),this._invoke(e),e.array.length=0),this._invoke(this._zero),this._zero.array.length=0;const t=this._pos;t.array.length>0&&(t.array.sort(RS),this._invoke(t),t.array.length=0)}}class DS extends IS{add(e){const t=e.constructor._executionOrder;if(0===t)this._zero.array.push(e);else{const n=t<0?this._neg.array:this._pos.array,i=TS(n,e);i<0&&n.splice(~i,0,e)}}remove(e){const t=e.constructor._executionOrder;if(0===t)this._zero.fastRemove(e);else{const n=t<0?this._neg:this._pos,i=TS(n.array,e);i>=0&&n.removeAt(i)}}invoke(e){this._neg.array.length>0&&this._invoke(this._neg,e),this._invoke(this._zero,e),this._pos.array.length>0&&this._invoke(this._pos,e)}}function MS(e,t,n){const i=`var a=it.array;for(it.i=0;it.i<a.length;++it.i){var c=a[it.i];${e}}`,o=t?Function("it","dt",i):Function("it",i);return function(e,t,n){return(i,o)=>{try{t(i,o)}catch(t){c._throw(t);const a=i.array;for(n&&(a[i.i]._objFlags|=n),++i.i;i.i<a.length;++i.i)try{e(a[i.i],o)}catch(e){c._throw(e),n&&(a[i.i]._objFlags|=n)}}}}(Function("c","dt",e),o,n)}const OS=MS(`c.start();c._objFlags|=${ES}`,!1,ES),zS=MS("c.update(dt)",!0),LS=MS("c.lateUpdate(dt)",!0),FS=e=>{const t=c.director._compScheduler,n=e.array;for(e.i=0;e.i<n.length;++e.i){const i=n[e.i];i._enabled&&(i.onEnable(),!i.node._activeInHierarchy||t._onEnabled(i))}};class US{constructor(){this._deferredComps=[],this.unscheduleAll()}unscheduleAll(){this.startInvoker=new NS(OS),this.updateInvoker=new DS(zS),this.lateUpdateInvoker=new DS(LS),this._updating=!1}_onEnabled(e){c.director.getScheduler().resumeTarget(e),e._objFlags|=wS,this._updating?this._deferredComps.push(e):this._scheduleImmediate(e)}_onDisabled(e){c.director.getScheduler().pauseTarget(e),e._objFlags&=~wS;const t=this._deferredComps.indexOf(e);t>=0?SS(this._deferredComps,t):(!e.start||e._objFlags&ES||this.startInvoker.remove(e),e.update&&this.updateInvoker.remove(e),e.lateUpdate&&this.lateUpdateInvoker.remove(e))}enableComp(e,t){if(!(e._objFlags&wS)){if(e.onEnable){if(t)return void t.add(e);if(e.onEnable(),!e.node._activeInHierarchy)return}this._onEnabled(e)}}disableComp(e){e._objFlags&wS&&(e.onDisable&&e.onDisable(),this._onDisabled(e))}startPhase(){this._updating=!0,this.startInvoker.invoke(),this._startForNewComps()}updatePhase(e){this.updateInvoker.invoke(e)}lateUpdatePhase(e){this.lateUpdateInvoker.invoke(e),this._updating=!1,this._startForNewComps()}_startForNewComps(){this._deferredComps.length>0&&(this._deferredSchedule(),this.startInvoker.invoke())}_scheduleImmediate(e){"function"!=typeof e.start||e._objFlags&ES||this.startInvoker.add(e),"function"==typeof e.update&&this.updateInvoker.add(e),"function"==typeof e.lateUpdate&&this.lateUpdateInvoker.add(e)}_deferredSchedule(){const e=this._deferredComps;for(let t=0,n=e.length;t<n;t++)this._scheduleImmediate(e[t]);e.length=0}}const BS=Lt.Flags.IsPreloadStarted,kS=Lt.Flags.IsOnLoadStarted,jS=Lt.Flags.IsOnLoadCalled,GS=Lt.Flags.Deactivating;class VS extends IS{add(e){this._zero.array.push(e)}remove(e){this._zero.fastRemove(e)}cancelInactive(e){IS.stableRemoveInactive(this._zero,e)}invoke(){this._invoke(this._zero),this._zero.array.length=0}}const HS=MS("c.__preload();"),WS=MS(`c.onLoad();c._objFlags|=${jS}`,!1,jS),qS=new ze(4);function YS(e,t,n){t?e._removeComponent(t):Le.removeAt(e._components,n)}qS.get=function(){const e=this._get()||{preload:new VS(HS),onLoad:new NS(WS),onEnable:new NS(FS)};e.preload._zero.i=-1;let t=e.onLoad;return t._zero.i=-1,t._neg.i=-1,t._pos.i=-1,t=e.onEnable,t._zero.i=-1,t._neg.i=-1,t._pos.i=-1,e};class XS{constructor(){this.resetComp=void 0,this.reset()}reset(){this._activatingStack=[]}activateNode(e,t){if(t){const t=qS.get();this._activatingStack.push(t),this._activateNodeRecursively(e,t.preload,t.onLoad,t.onEnable),t.preload.invoke(),t.onLoad.invoke(),t.onEnable.invoke(),this._activatingStack.pop(),qS.put(t)}else{this._deactivateNodeRecursively(e);const t=this._activatingStack;for(const e of t)e.preload.cancelInactive(BS),e.onLoad.cancelInactive(kS),e.onEnable.cancelInactive()}e.emit("active-in-hierarchy-changed",e)}activateComp(e,t,n,i){if(Ut(e,!0)&&(e._objFlags&BS||(e._objFlags|=BS,e.__preload&&(t?t.add(e):e.__preload())),e._objFlags&kS||(e._objFlags|=kS,e.onLoad?n?n.add(e):(e.onLoad(),e._objFlags|=jS):e._objFlags|=jS),e._enabled)){if(!e.node._activeInHierarchy)return;c.director._compScheduler.enableComp(e,i)}}destroyComp(e){c.director._compScheduler.disableComp(e),e.onDestroy&&e._objFlags&jS&&e.onDestroy()}_activateNodeRecursively(e,t,n,i){if(e._objFlags&GS)return void R(3816,e.name);e._activeInHierarchy=!0;let o=e._components.length;for(let a=0;a<o;++a){const r=e._components[a];r instanceof c.Component?this.activateComp(r,t,n,i):(YS(e,r,a),--a,--o)}e._childArrivalOrder=e._children.length;for(let o=0,a=e._children.length;o<a;++o){const a=e._children[o];a._active&&this._activateNodeRecursively(a,t,n,i)}e._onPostActivated(!0)}_deactivateNodeRecursively(e){e._objFlags|=GS,e._activeInHierarchy=!1;const t=e._components.length;for(let n=0;n<t;++n){const t=e._components[n];if(t._enabled&&(c.director._compScheduler.disableComp(t),e._activeInHierarchy))return void(e._objFlags&=~GS)}for(let t=0,n=e._children.length;t<n;++t){const n=e._children[t];if(n._activeInHierarchy&&(this._deactivateNodeRecursively(n),e._activeInHierarchy))return void(e._objFlags&=~GS)}e._onPostActivated(!1),e._objFlags&=~GS}}var QS,KS,ZS;e("fN",XS);let JS=e("f7",Rc("cc.SceneAsset")((ZS=vc((KS=class extends $l{constructor(...e){super(...e),dc(this,"scene",ZS,this)}initDefault(e){super.initDefault(e),this.scene=new bS("New Scene")}validate(){return!!this.scene}}).prototype,"scene",[Wc,zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),QS=KS))||QS);var $S,eE,tE;c.SceneAsset=JS;let nE=e("ep",Rc("cc.TextAsset")((tE=vc((eE=class extends $l{constructor(...e){super(...e),dc(this,"text",tE,this)}toString(){return this.text}}).prototype,"text",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),$S=eE))||$S);var iE,oE,aE;c.TextAsset=nE;let rE=e("f8",Rc("cc.JsonAsset")((aE=vc((oE=class extends $l{constructor(...e){super(...e),dc(this,"json",aE,this)}}).prototype,"json",[zc,Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),iE=oE))||iE);c.JsonAsset=rE;class sE extends mg{get deferredLightingMaterial(){return this._deferredLightingMaterial}set deferredLightingMaterial(e){this._deferredLightingMaterial!==e&&e&&(this._deferredLightingMaterial=e,this.updateDeferredPassInfo())}get deferredPostMaterial(){return this._deferredPostMaterial}set deferredPostMaterial(e){this._deferredPostMaterial!==e&&e&&(this._deferredPostMaterial=e,this.updateDeferredPassInfo())}onGlobalPipelineStateChanged(){this.updateDeferredPassInfo()}initPipelinePassInfo(){const e=new Bv;e._uuid="builtin-deferred-material",e.initialize({effectName:"deferred-lighting"});for(let t=0;t<e.passes.length;++t)e.passes[t].tryCompile();this._deferredLightingMaterial=e;const t=new Bv;t._uuid="builtin-post-process-material",t.initialize({effectName:"post-process"});for(let e=0;e<t.passes.length;++e)t.passes[e].tryCompile();this._deferredPostMaterial=t,this.updateDeferredPassInfo()}activate(e,t){return super.activate(e,t),this.initPipelinePassInfo(),!0}updateDeferredPassInfo(){this.updateDeferredLightPass(),this.updateDeferredPostPass()}updateDeferredLightPass(){if(!this._deferredLightingMaterial)return;const e=this._deferredLightingMaterial.passes[0];e.beginChangeStatesSilently(),e.tryCompile(),e.endChangeStatesSilently(),this._nativeObj.deferredLightPassShader=e.getShaderVariant(),this._nativeObj.deferredLightPass=e.native}updateDeferredPostPass(){if(!this.deferredPostMaterial)return;const e=this.deferredPostMaterial.passes[0];e.beginChangeStatesSilently(),e.tryCompile(),e.endChangeStatesSilently(),this._nativeObj.deferredPostPassShader=e.getShaderVariant(),this._nativeObj.deferredPostPass=e.native}}nr.getPhaseID=Xd;const cE=e("fp",nr.RenderPipeline),lE=(e("fq",nr.RenderFlow),e("fr",nr.RenderStage),e("fs",nr.InstancedBuffer),e("ft",nr.PipelineStateManager));nr.InstancedBuffer.get;let _E=nr.PipelineStateManager.getOrCreatePipelineState;function uE(){const e=new fE;return e.init(),e}nr.PipelineStateManager.getOrCreatePipelineState=function(e,t,n,i,o){return _E.call(e,t.native,n,i,o)};class fE extends nr.ForwardPipeline{constructor(){super(),this.pipelineSceneData=new mg,this._tag=0,this._flows=[],this.renderTextures=[],this.materials=[]}init(){this.setPipelineSharedSceneData(this.pipelineSceneData.native);for(let e=0;e<this._flows.length;e++)this._flows[e].init();const e=new nr.RenderPipelineInfo(this._tag,this._flows);this.initialize(e)}activate(){return super.activate()&&this.pipelineSceneData.activate(c.director.root.device,this)}render(e){let t=[];for(let n=0,i=e.length;n<i;++n)t.push(e[n].native);super.render(t)}destroy(){this.pipelineSceneData.destroy(),super.destroy()}}e("fv",fE),ge(fE.prototype,$l.prototype);const hE=fE.prototype.onLoaded;fE.prototype.onLoaded=function(){hE&&hE.call(this),this.init()};class pE extends nr.ForwardFlow{constructor(){super(),this._name=0,this._priority=0,this._tag=0,this._stages=[]}init(){for(let e=0;e<this._stages.length;e++)this._stages[e].init();const e=new nr.RenderFlowInfo(this._name,this._priority,this._tag,this._stages);this.initialize(e)}}e("fw",pE);class mE extends nr.ShadowFlow{constructor(){super(),this._name=0,this._priority=0,this._tag=0,this._stages=[]}init(){for(let e=0;e<this._stages.length;e++)this._stages[e].init();const e=new nr.RenderFlowInfo(this._name,this._priority,this._tag,this._stages);this.initialize(e)}}e("fx",mE);class dE extends nr.ForwardStage{constructor(){super(),this._name=0,this._priority=0,this._tag=0,this.renderQueues=[]}init(){const e=[];for(let t=0;t<this.renderQueues.length;t++)e.push(this.renderQueues[t].init());const t=new nr.RenderStageInfo(this._name,this._priority,this._tag,e);this.initialize(t)}}e("fy",dE);class vE extends nr.ShadowStage{constructor(){super(),this._name=0,this._priority=0,this._tag=0}init(){const e=new nr.RenderStageInfo(this._name,this._priority,this._tag,[]);this.initialize(e)}}e("fz",vE);class gE{constructor(){this.isTransparent=!1,this.sortMode=0,this.stages=[],this.isTransparent=!1,this.sortMode=0,this.stages=[]}init(){return new nr.RenderQueueDesc(this.isTransparent,this.sortMode,this.stages)}}e("fA",gE);class yE extends nr.DeferredPipeline{constructor(){super(),this.pipelineSceneData=new sE,this._tag=0,this._flows=[],this.renderTextures=[],this.materials=[]}init(){this.setPipelineSharedSceneData(this.pipelineSceneData.native);for(let e=0;e<this._flows.length;e++)this._flows[e].init(this);let e=new nr.RenderPipelineInfo(this._tag,this._flows);this.initialize(e)}activate(){return super.activate()&&this.pipelineSceneData.activate(c.director.root.device,this)}render(e){let t=[];for(let n=0,i=e.length;n<i;++n)t.push(e[n].native);super.render(t)}destroy(){this.fog.destroy(),this.ambient.destroy(),this.skybox.destroy(),this.shadows.destroy(),this.pipelineSceneData.destroy(),super.destroy()}}e("fB",yE),ge(yE.prototype,$l.prototype);const AE=yE.prototype.onLoaded;yE.prototype.onLoaded=function(){AE&&AE.call(this),this.init()};class xE extends nr.GbufferFlow{constructor(){super(),this._name=0,this._priority=0,this._tag=0,this._stages=[]}init(e){for(let t=0;t<this._stages.length;t++)this._stages[t].init(e);let t=new nr.RenderFlowInfo(this._name,this._priority,this._tag,this._stages);this.initialize(t)}}e("fC",xE);class bE extends nr.GbufferStage{constructor(){super(),this._name=0,this._priority=0,this._tag=0,this.renderQueues=[]}init(e){const t=[];for(let e=0;e<this.renderQueues.length;e++)t.push(this.renderQueues[e].init());let n=new nr.RenderStageInfo(this._name,this._priority,this._tag,t);this.initialize(n)}}e("fD",bE);class CE extends nr.LightingFlow{constructor(){super(),this._name=0,this._priority=0,this._tag=0,this._stages=[]}init(e){for(let t=0;t<this._stages.length;t++)this._stages[t].init(e);let t=new nr.RenderFlowInfo(this._name,this._priority,this._tag,this._stages);this.initialize(t)}}class SE extends nr.LightingStage{constructor(){super(),this._name=0,this._priority=0,this._tag=0,this.renderQueues=[],this._deferredMaterial=null}init(e){const t=[];for(let e=0;e<this.renderQueues.length;e++)t.push(this.renderQueues[e].init());e.pipelineSceneData.deferredLightingMaterial=this._deferredMaterial;let n=new nr.RenderStageInfo(this._name,this._priority,this._tag,t);this.initialize(n)}}e("fE",SE);class EE extends nr.PostprocessStage{constructor(){super(),this._name=0,this._priority=0,this._tag=0,this.renderQueues=[],this._postProcessMaterial=null}init(e){const t=[];for(let e=0;e<this.renderQueues.length;e++)t.push(this.renderQueues[e].init());e.pipelineSceneData.deferredPostMaterial=this._postProcessMaterial;let n=new nr.RenderStageInfo(this._name,this._priority,this._tag,t);this.initialize(n)}}e("fF",EE),Ie("DeferredPipeline",yE),Ie("GbufferFlow",xE),Ie("GbufferStage",bE),Ie("LightingFlow",CE),Ie("LightingStage",SE),Ie("PostprocessStage",EE),Ie("ForwardPipeline",fE),Ie("ForwardFlow",pE),Ie("ShadowFlow",mE),Ie("ForwardStage",dE),Ie("ShadowStage",vE),Ie("RenderQueueDesc",gE),an(Mg,"Node.EventType",[{name:"POSITION_PART",newName:"TRANSFORM_CHANGED"},{name:"ROTATION_PART",newName:"TRANSFORM_CHANGED"},{name:"SCALE_PART",newName:"TRANSFORM_CHANGED"}]);class wE{constructor(){this.support=void 0,this._intervalInSeconds=.2,this._intervalId=void 0,this._isEnabled=!1,this._eventTarget=new Yt,this._didAccelerateFunc=void 0;const e=Kt.isMobile;this.support=e,this._didAccelerateFunc=this._didAccelerate.bind(this)}_didAccelerate(){const e=jsb.device.getDeviceMotionValue();let t=.1*e[3],n=.1*e[4];const i=.1*e[5],o=xi.orientation,a=t;o===yi.LANDSCAPE_RIGHT?(t=-n,n=a):o===yi.LANDSCAPE_LEFT?(t=n,n=-a):o===yi.PORTRAIT_UPSIDE_DOWN&&(t=-t,n=-n),Kt.os!==j.ANDROID&&Kt.os!==j.OHOS||(t=-t,n=-n);const r={type:Mg.DEVICEMOTION,x:t,y:n,z:i,timestamp:performance.now()};this._eventTarget.emit(Mg.DEVICEMOTION,r)}start(){this._intervalId&&clearInterval(this._intervalId),this._intervalId=setInterval(this._didAccelerateFunc,1e3*this._intervalInSeconds),jsb.device.setAccelerometerInterval(this._intervalInSeconds),jsb.device.setAccelerometerEnabled(!0),this._isEnabled=!0}stop(){this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),jsb.device.setAccelerometerEnabled(!1),this._isEnabled=!1}setInterval(e){this._intervalInSeconds=e/1e3,jsb.device.setAccelerometerInterval(this._intervalInSeconds),this._isEnabled&&(jsb.device.setAccelerometerEnabled(!1),jsb.device.setAccelerometerEnabled(!0))}onChange(e){this._eventTarget.on(Mg.DEVICEMOTION,e)}}class TE{constructor(){this.support=void 0,this.support=!0}show(){throw new Error("Method not implemented.")}hide(){throw new Error("Method not implemented.")}onChange(){throw new Error("Method not implemented.")}onComplete(){throw new Error("Method not implemented.")}offChange(){throw new Error("Method not implemented.")}offComplete(){throw new Error("Method not implemented.")}}let PE;!function(e){e[e.NONE=0]="NONE",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT_LEFT=16]="SHIFT_LEFT",e[e.CTRL_LEFT=17]="CTRL_LEFT",e[e.ALT_LEFT=18]="ALT_LEFT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESCAPE=27]="ESCAPE",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.ARROW_LEFT=37]="ARROW_LEFT",e[e.ARROW_UP=38]="ARROW_UP",e[e.ARROW_RIGHT=39]="ARROW_RIGHT",e[e.ARROW_DOWN=40]="ARROW_DOWN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_1=49]="DIGIT_1",e[e.DIGIT_2=50]="DIGIT_2",e[e.DIGIT_3=51]="DIGIT_3",e[e.DIGIT_4=52]="DIGIT_4",e[e.DIGIT_5=53]="DIGIT_5",e[e.DIGIT_6=54]="DIGIT_6",e[e.DIGIT_7=55]="DIGIT_7",e[e.DIGIT_8=56]="DIGIT_8",e[e.DIGIT_9=57]="DIGIT_9",e[e.KEY_A=65]="KEY_A",e[e.KEY_B=66]="KEY_B",e[e.KEY_C=67]="KEY_C",e[e.KEY_D=68]="KEY_D",e[e.KEY_E=69]="KEY_E",e[e.KEY_F=70]="KEY_F",e[e.KEY_G=71]="KEY_G",e[e.KEY_H=72]="KEY_H",e[e.KEY_I=73]="KEY_I",e[e.KEY_J=74]="KEY_J",e[e.KEY_K=75]="KEY_K",e[e.KEY_L=76]="KEY_L",e[e.KEY_M=77]="KEY_M",e[e.KEY_N=78]="KEY_N",e[e.KEY_O=79]="KEY_O",e[e.KEY_P=80]="KEY_P",e[e.KEY_Q=81]="KEY_Q",e[e.KEY_R=82]="KEY_R",e[e.KEY_S=83]="KEY_S",e[e.KEY_T=84]="KEY_T",e[e.KEY_U=85]="KEY_U",e[e.KEY_V=86]="KEY_V",e[e.KEY_W=87]="KEY_W",e[e.KEY_X=88]="KEY_X",e[e.KEY_Y=89]="KEY_Y",e[e.KEY_Z=90]="KEY_Z",e[e.NUM_0=96]="NUM_0",e[e.NUM_1=97]="NUM_1",e[e.NUM_2=98]="NUM_2",e[e.NUM_3=99]="NUM_3",e[e.NUM_4=100]="NUM_4",e[e.NUM_5=101]="NUM_5",e[e.NUM_6=102]="NUM_6",e[e.NUM_7=103]="NUM_7",e[e.NUM_8=104]="NUM_8",e[e.NUM_9=105]="NUM_9",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_SUBTRACT=109]="NUM_SUBTRACT",e[e.NUM_DECIMAL=110]="NUM_DECIMAL",e[e.NUM_DIVIDE=111]="NUM_DIVIDE",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUM_LOCK=144]="NUM_LOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.SEMICOLON=186]="SEMICOLON",e[e.EQUAL=187]="EQUAL",e[e.COMMA=188]="COMMA",e[e.DASH=189]="DASH",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.BACK_QUOTE=192]="BACK_QUOTE",e[e.BRACKET_LEFT=219]="BRACKET_LEFT",e[e.BACKSLASH=220]="BACKSLASH",e[e.BRACKET_RIGHT=221]="BRACKET_RIGHT",e[e.QUOTE=222]="QUOTE",e[e.SHIFT_RIGHT=2e3]="SHIFT_RIGHT",e[e.CTRL_RIGHT=2001]="CTRL_RIGHT",e[e.ALT_RIGHT=2002]="ALT_RIGHT",e[e.NUM_ENTER=2003]="NUM_ENTER"}(PE||(PE=e("dp",{})));const IE={12:PE.NUM_LOCK,10048:PE.NUM_0,10049:PE.NUM_1,10050:PE.NUM_2,10051:PE.NUM_3,10052:PE.NUM_4,10053:PE.NUM_5,10054:PE.NUM_6,10055:PE.NUM_7,10056:PE.NUM_8,10057:PE.NUM_9,20013:PE.NUM_ENTER,20016:PE.SHIFT_RIGHT,20017:PE.CTRL_RIGHT,20018:PE.ALT_RIGHT};function RE(e){return IE[e]||e}class NE{constructor(){this.support=void 0,this._eventTarget=new Yt,this._keyStateMap={},this.support=!Kt.isMobile,this._registerEvent()}_registerEvent(){jsb.onKeyDown=e=>{const t=RE(e.keyCode),n=this._getInputEvent(e,Mg.KEY_DOWN);this._eventTarget.emit(Mg.KEY_DOWN,n),this._keyStateMap[t]=!0},jsb.onKeyUp=e=>{const t=RE(e.keyCode),n={type:Mg.KEY_UP,code:t,timestamp:performance.now()};this._keyStateMap[t]=!1,this._eventTarget.emit(Mg.KEY_UP,n)}}_getInputEvent(e,t){return{type:t,code:RE(e.keyCode),timestamp:performance.now()}}onDown(e){this._eventTarget.on("keypress",e)}onPressing(e){this._eventTarget.on(Mg.KEY_DOWN,e)}onUp(e){this._eventTarget.on(Mg.KEY_UP,e)}}class DE{constructor(){this.support=void 0,this._eventTarget=new Yt,this._preMousePos=new si,this.support=!Kt.isMobile,this._registerEvent()}_getLocation(e){return new si(e.x,e.y)}_registerEvent(){jsb.onMouseDown=this._createCallback(Mg.MOUSE_DOWN),jsb.onMouseMove=this._createCallback(Mg.MOUSE_MOVE),jsb.onMouseUp=this._createCallback(Mg.MOUSE_UP),jsb.onMouseWheel=e=>{const t=this._getLocation(e),n=xi.windowSize,i={type:Mg.MOUSE_WHEEL,x:t.x,y:n.height-t.y,button:e.button,deltaX:120*e.wheelDeltaX,deltaY:120*e.wheelDeltaY,timestamp:performance.now()};this._eventTarget.emit(Mg.MOUSE_WHEEL,i)}}_createCallback(e){return t=>{const n=this._getLocation(t),i=xi.windowSize,o=n.x,a=i.height-n.y,r={type:e,x:o,y:a,movementX:o-this._preMousePos.x,movementY:this._preMousePos.y-a,button:t.button,timestamp:performance.now()};this._preMousePos.set(r.x,r.y),this._eventTarget.emit(e,r)}}onDown(e){this._eventTarget.on(Mg.MOUSE_DOWN,e)}onMove(e){this._eventTarget.on(Mg.MOUSE_MOVE,e)}onUp(e){this._eventTarget.on(Mg.MOUSE_UP,e)}onWheel(e){this._eventTarget.on(Mg.MOUSE_WHEEL,e)}}class ME{constructor(){this.support=void 0,this._eventTarget=new Yt,this.support=!0,this._registerEvent()}_registerEvent(){jsb.onTouchStart=this._createCallback(Mg.TOUCH_START),jsb.onTouchMove=this._createCallback(Mg.TOUCH_MOVE),jsb.onTouchEnd=this._createCallback(Mg.TOUCH_END),jsb.onTouchCancel=this._createCallback(Mg.TOUCH_CANCEL)}_createCallback(e){return t=>{const n=[],i=t.length,o=xi.windowSize;for(let e=0;e<i;++e){const i=t[e],a=this._getLocation(i),r=a.x,s=o.height-a.y,c={identifier:i.identifier,x:r,y:s,force:i.force};n.push(c)}const a={type:e,changedTouches:n,timestamp:performance.now()};this._eventTarget.emit(e,a)}}_getLocation(e){return new si(e.clientX,e.clientY)}onStart(e){this._eventTarget.on(Mg.TOUCH_START,e)}onMove(e){this._eventTarget.on(Mg.TOUCH_MOVE,e)}onEnd(e){this._eventTarget.on(Mg.TOUCH_END,e)}onCancel(e){this._eventTarget.on(Mg.TOUCH_CANCEL,e)}}const OE=new class{constructor(){this._touch=new ME,this._mouse=new DE,this._keyboard=new NE,this._accelerometer=new wE,this._inputBox=new TE,this._touchEvents=[],this._mouseEvents=[],this._keyboardEvents=[],this._accelerometerEvents=[],this._registerEvent()}_registerEvent(){if(this._touch.support){const e=this._touchEvents;this._touch.onStart((t=>{e.push(t)})),this._touch.onMove((t=>{e.push(t)})),this._touch.onEnd((t=>{e.push(t)})),this._touch.onCancel((t=>{e.push(t)}))}if(this._mouse.support){const e=this._mouseEvents;this._mouse.onDown((t=>{e.push(t)})),this._mouse.onMove((t=>{e.push(t)})),this._mouse.onUp((t=>{e.push(t)})),this._mouse.onWheel((t=>{e.push(t)}))}if(this._keyboard.support){const e=this._keyboardEvents;this._keyboard.onPressing((t=>{e.push(t)})),this._keyboard.onUp((t=>{e.push(t)}))}if(this._accelerometer.support){const e=this._accelerometerEvents;this._accelerometer.onChange((t=>{e.push(t)}))}}startAccelerometer(){this._accelerometer.start()}stopAccelerometer(){this._accelerometer.stop()}setAccelerometerInterval(e){this._accelerometer.setInterval(e)}pollTouchEvents(){const e=Fe.array.copy(this._touchEvents);return this._touchEvents.length=0,e}pollMouseEvents(){const e=Fe.array.copy(this._mouseEvents);return this._mouseEvents.length=0,e}pollKeyboardEvents(){const e=Fe.array.copy(this._keyboardEvents);return this._keyboardEvents.length=0,e}pollAccelerometerEvents(){const e=Fe.array.copy(this._accelerometerEvents);return this._accelerometerEvents.length=0,e}},zE=new si;class LE extends Wl{get eventType(){return this._eventType}constructor(e,t,n){super(e,t),this.movementX=0,this.movementY=0,this._eventType=void 0,this._button=LE.BUTTON_MISSING,this._x=0,this._y=0,this._prevX=0,this._prevY=0,this._scrollX=0,this._scrollY=0,this._eventType=e,n&&(this._prevX=n.x,this._prevY=n.y)}setScrollData(e,t){this._scrollX=e,this._scrollY=t}getScrollX(){return this._scrollX}getScrollY(){return this._scrollY}setLocation(e,t){this._x=e,this._y=t}getLocation(e){return e||(e=new si),si.set(e,this._x,this._y),e}getLocationInView(e){return e||(e=new si),si.set(e,this._x,c.view._designResolutionSize.height-this._y),e}getUILocation(e){return e||(e=new si),si.set(e,this._x,this._y),c.view._convertPointWithScale(e),e}getPreviousLocation(e){return e||(e=new si),si.set(e,this._prevX,this._prevY),e}getUIPreviousLocation(e){return e||(e=new si),si.set(e,this._prevX,this._prevY),c.view._convertPointWithScale(e),e}getDelta(e){return e||(e=new si),si.set(e,this._x-this._prevX,this._y-this._prevY),e}getDeltaX(){return this._x-this._prevX}getDeltaY(){return this._y-this._prevY}getUIDelta(e){return e||(e=new si),si.set(e,(this._x-this._prevX)/c.view.getScaleX(),(this._y-this._prevY)/c.view.getScaleY()),e}getUIDeltaX(){return(this._x-this._prevX)/c.view.getScaleX()}getUIDeltaY(){return(this._y-this._prevY)/c.view.getScaleY()}setButton(e){this._button=e}getButton(){return this._button}getLocationX(){return this._x}getLocationY(){return this._y}getUILocationX(){const e=c.view.getViewportRect();return(this._x-e.x)/c.view.getScaleX()}getUILocationY(){const e=c.view.getViewportRect();return(this._y-e.y)/c.view.getScaleY()}}e("fl",LE),LE.BUTTON_MISSING=-1,LE.BUTTON_LEFT=0,LE.BUTTON_RIGHT=2,LE.BUTTON_MIDDLE=1,LE.BUTTON_4=3,LE.BUTTON_5=4,LE.BUTTON_6=5,LE.BUTTON_7=6,LE.BUTTON_8=7;class FE extends Wl{constructor(e,t,n,i=[]){super(n,t),this.touch=null,this.simulate=!1,this._eventCode=void 0,this._touches=void 0,this._allTouches=void 0,this._eventCode=n,this._touches=e||[],this._allTouches=i}getEventCode(){return this._eventCode}getTouches(){return this._touches}getAllTouches(){return this._allTouches}setLocation(e,t){this.touch&&this.touch.setTouchInfo(this.touch.getID(),e,t)}getLocation(e){return this.touch?this.touch.getLocation(e):new si}getUILocation(e){return this.touch?this.touch.getUILocation(e):new si}getLocationInView(e){return this.touch?this.touch.getLocationInView(e):new si}getPreviousLocation(e){return this.touch?this.touch.getPreviousLocation(e):new si}getStartLocation(e){return this.touch?this.touch.getStartLocation(e):new si}getUIStartLocation(e){return this.touch?this.touch.getUIStartLocation(e):new si}getID(){return this.touch?this.touch.getID():null}getDelta(e){return this.touch?this.touch.getDelta(e):new si}getUIDelta(e){return this.touch?this.touch.getUIDelta(e):new si}getDeltaX(){return this.touch?this.touch.getDelta(zE).x:0}getDeltaY(){return this.touch?this.touch.getDelta(zE).y:0}getLocationX(){return this.touch?this.touch.getLocationX():0}getLocationY(){return this.touch?this.touch.getLocationY():0}}e("du",FE),FE.MAX_TOUCHES=5;class UE extends Wl{constructor(e,t){super(Mg.DEVICEMOTION,t),this.acc=void 0,this.acc=e}}e("fm",UE);class BE extends Wl{get isPressed(){return this._isPressed}constructor(e,t,n){"boolean"==typeof t&&(t=t?Mg.KEY_DOWN:Mg.KEY_UP),super(t,n),this.keyCode=void 0,this.rawEvent=void 0,this._isPressed=void 0,this._isPressed=t!==Mg.KEY_UP,"number"==typeof e?this.keyCode=e:(this.keyCode=e.keyCode,this.rawEvent=e)}}e("fn",BE),Wl.EventMouse=LE,Wl.EventTouch=FE,Wl.EventAcceleration=UE,Wl.EventKeyboard=BE;const kE=new si;class jE{get lastModified(){return this._lastModified}constructor(e,t,n=0){this._point=new si,this._prevPoint=new si,this._lastModified=0,this._id=0,this._startPoint=new si,this._startPointCaptured=!1,this.setTouchInfo(n,e,t)}getLocation(e){return e||(e=new si),e.set(this._point.x,this._point.y),e}getLocationX(){return this._point.x}getLocationY(){return this._point.y}getUILocation(e){return e||(e=new si),e.set(this._point.x,this._point.y),c.view._convertPointWithScale(e),e}getUILocationX(){const e=c.view.getViewportRect();return(this._point.x-e.x)/c.view.getScaleX()}getUILocationY(){const e=c.view.getViewportRect();return(this._point.y-e.y)/c.view.getScaleY()}getPreviousLocation(e){return e||(e=new si),e.set(this._prevPoint.x,this._prevPoint.y),e}getUIPreviousLocation(e){return e||(e=new si),e.set(this._prevPoint.x,this._prevPoint.y),c.view._convertPointWithScale(e),e}getStartLocation(e){return e||(e=new si),e.set(this._startPoint.x,this._startPoint.y),e}getUIStartLocation(e){return e||(e=new si),e.set(this._startPoint.x,this._startPoint.y),c.view._convertPointWithScale(e),e}getDelta(e){return e||(e=new si),e.set(this._point),e.subtract(this._prevPoint),e}getUIDelta(e){return e||(e=new si),kE.set(this._point),kE.subtract(this._prevPoint),e.set(c.view.getScaleX(),c.view.getScaleY()),si.divide(e,kE,e),e}getLocationInView(e){return e||(e=new si),e.set(this._point.x,c.view._designResolutionSize.height-this._point.y),e}getPreviousLocationInView(e){return e||(e=new si),e.set(this._prevPoint.x,c.view._designResolutionSize.height-this._prevPoint.y),e}getStartLocationInView(e){return e||(e=new si),e.set(this._startPoint.x,c.view._designResolutionSize.height-this._startPoint.y),e}getID(){return this._id}setTouchInfo(e=0,t,n){this._prevPoint=this._point,this._point=new si(t||0,n||0),this._id=e,this._startPointCaptured||(this._startPoint=new si(this._point),this._startPointCaptured=!0)}setPoint(e,t){"object"==typeof e?(this._point.x=e.x,this._point.y=e.y):(this._point.x=e||0,this._point.y=t||0),this._lastModified=c.game.frameStartTime}setPrevPoint(e,t){this._prevPoint="object"==typeof e?new si(e.x,e.y):new si(e||0,t||0),this._lastModified=c.game.frameStartTime}}e("fo",jE),c.Touch=jE;class GE{constructor(e=0,t=0,n=0,i=0){this.x=void 0,this.y=void 0,this.z=void 0,this.timestamp=void 0,this.x=e,this.y=t,this.z=n,this.timestamp=i}}const VE=He.TOUCH_TIMEOUT,HE=new si,WE=new si,qE=new class{constructor(){this._preTouchPoint=new si,this._prevMousePoint=new si,this._preTouchPool=[],this._preTouchPoolPointer=0,this._touches=[],this._touchesIntegerDict={},this._indexBitsUsed=0,this._maxTouches=8,this._glView=null}clearEvents(){OE.pollMouseEvents(),OE.pollTouchEvents(),OE.pollKeyboardEvents(),OE.pollAccelerometerEvents()}frameDispatchEvents(){const e=OE.pollMouseEvents();for(let t=0,n=e.length;t<n;++t){const n=e[t];this._dispatchMouseEvent(n)}const t=OE.pollTouchEvents();for(let e=0,n=t.length;e<n;++e){const n=t[e];this._dispatchTouchEvent(n)}const n=OE.pollKeyboardEvents();for(let e=0,t=n.length;e<t;++e){const t=n[e];this._dispatchKeyboardEvent(t)}const i=OE.pollAccelerometerEvents();for(let e=0,t=i.length;e<t;++e){const t=i[e];this._dispatchAccelerometerEvent(t)}}_dispatchMouseEvent(e){let t,n;switch(e.type){case Mg.MOUSE_DOWN:t=this._getMouseEvent(e),n=this._getTouch(e),this._handleTouchesStart([n]),qg.dispatchEvent(t);break;case Mg.MOUSE_MOVE:t=this._getMouseEvent(e),n=this._getTouch(e),this._handleTouchesMove([n]),qg.dispatchEvent(t);break;case Mg.MOUSE_UP:t=this._getMouseEvent(e),n=this._getTouch(e),this._handleTouchesEnd([n]),qg.dispatchEvent(t);break;case Mg.MOUSE_WHEEL:t=this._getMouseEvent(e),t.setScrollData(e.deltaX,e.deltaY),qg.dispatchEvent(t)}}_dispatchTouchEvent(e){const t=this._getTouchList(e);switch(e.type){case Mg.TOUCH_START:this._handleTouchesStart(t);break;case Mg.TOUCH_MOVE:this._handleTouchesMove(t);break;case Mg.TOUCH_END:this._handleTouchesEnd(t);break;case Mg.TOUCH_CANCEL:this._handleTouchesCancel(t)}}_handleTouchesStart(e){const t=[],n=this._touchesIntegerDict;for(let i=0;i<e.length;++i){const o=e[i],a=o.getID();if(null!==a&&void 0===n[a]){const e=this._getUnUsedIndex();if(-1===e){w(2300,e);continue}o.getLocation(HE);const i=new jE(HE.x,HE.y,a);this._touches[e]=i,o.getPreviousLocation(HE),i.setPrevPoint(HE),n[a]=e,t.push(i)}}if(t.length>0){const e=new FE(t,!1,Mg.TOUCH_START,He.ENABLE_MULTI_TOUCH?this._getUsefulTouches():t);qg.dispatchEvent(e)}}_handleTouchesMove(e){const t=[],n=this._touches;for(let i=0;i<e.length;++i){const o=e[i],a=o.getID();if(null===a)continue;const r=this._touchesIntegerDict[a];void 0!==r&&n[r]&&(o.getLocation(HE),n[r].setPoint(HE),o.getPreviousLocation(HE),n[r].setPrevPoint(HE),t.push(n[r]))}if(t.length>0){const e=new FE(t,!1,Mg.TOUCH_MOVE,He.ENABLE_MULTI_TOUCH?this._getUsefulTouches():t);qg.dispatchEvent(e)}}_handleTouchesEnd(e){const t=this.getSetOfTouchesEndOrCancel(e);if(t.length>0){const e=new FE(t,!1,Mg.TOUCH_END,He.ENABLE_MULTI_TOUCH?this._getUsefulTouches():t);qg.dispatchEvent(e)}this._preTouchPool.length=0}_handleTouchesCancel(e){const t=this.getSetOfTouchesEndOrCancel(e);if(t.length>0){const e=new FE(t,!1,Mg.TOUCH_CANCEL,He.ENABLE_MULTI_TOUCH?this._getUsefulTouches():t);qg.dispatchEvent(e)}this._preTouchPool.length=0}getSetOfTouchesEndOrCancel(e){const t=[],n=this._touches,i=this._touchesIntegerDict;for(let o=0;o<e.length;++o){const a=e[o],r=a.getID();if(null===r)continue;const s=i[r];void 0!==s&&n[s]&&(a.getLocation(HE),n[s].setPoint(HE),a.getPreviousLocation(HE),n[s].setPrevPoint(HE),t.push(n[s]),this._removeUsedIndexBit(s),delete i[r])}return t}_getPreTouch(e){let t=null;const n=this._preTouchPool,i=e.getID();for(let e=n.length-1;e>=0;e--)if(n[e].getID()===i){t=n[e];break}return t||(t=e),t}_setPreTouch(e){let t=!1;const n=this._preTouchPool,i=e.getID();for(let o=n.length-1;o>=0;o--)if(n[o].getID()===i){n[o]=e,t=!0;break}t||(n.length<=50?n.push(e):(n[this._preTouchPoolPointer]=e,this._preTouchPoolPointer=(this._preTouchPoolPointer+1)%50))}_getViewPixelRatio(){return this._glView||(this._glView=c.view),this._glView?this._glView._devicePixelRatio:1}_getTouch(e){const t=this._preTouchPoint,n=this._getViewPixelRatio(),i=e.x*n,o=e.y*n,a=new jE(i,o,0);return a.setPrevPoint(t.x,t.y),t.x=i,t.y=o,a}_getMouseEvent(e){const t=this._prevMousePoint,n=new LE(e.type,!1,t),i=this._getViewPixelRatio();return t.x=e.x*i,t.y=e.y*i,c.GAME_VIEW&&(t.x/=c.gameView.canvas.width/c.game.canvas.width,t.y/=c.gameView.canvas.height/c.game.canvas.height),n.setLocation(t.x,t.y),n.setButton(e.button),e.movementX&&(n.movementX=e.movementX),e.movementY&&(n.movementY=e.movementY),n}_getTouchList(e){const t=[],n=this._preTouchPoint,i=e.changedTouches.length,o=this._getViewPixelRatio();for(let a=0;a<i;a++){const i=e.changedTouches[a],r=i.x*o,s=i.y*o,c=new jE(r,s,i.identifier);if(this._getPreTouch(c).getLocation(WE),c.setPrevPoint(WE.x,WE.y),this._setPreTouch(c),n.x=r,n.y=s,t.push(c),!He.ENABLE_MULTI_TOUCH)break}return t}_getUnUsedIndex(){let e=this._indexBitsUsed;const t=c.game.frameStartTime;for(let n=0;n<this._maxTouches;n++){if(!(1&e))return this._indexBitsUsed|=1<<n,n;{const e=this._touches[n];if(t-e.lastModified>VE){this._removeUsedIndexBit(n);const t=e.getID();return null!==t&&delete this._touchesIntegerDict[t],n}}e>>=1}return-1}_removeUsedIndexBit(e){if(e<0||e>=this._maxTouches)return;let t=1<<e;t=~t,this._indexBitsUsed&=t}_getUsefulTouches(){const e=[],t=this._touchesIntegerDict;for(const n in t){const i=t[parseInt(n)];if(null==i)continue;const o=this._touches[i];e.push(o)}return e}_dispatchKeyboardEvent(e){switch(e.type){case Mg.KEY_DOWN:qg.dispatchEvent(new BE(e.code,Mg.KEY_DOWN));break;case Mg.KEY_UP:qg.dispatchEvent(new BE(e.code,Mg.KEY_UP))}}_dispatchAccelerometerEvent(e){if(e.type===Mg.DEVICEMOTION){const{x:t,y:n,z:i,timestamp:o}=e;qg.dispatchEvent(new UE(new GE(t,n,i,o)))}}setAccelerometerEnabled(e){e?OE.startAccelerometer():OE.stopAccelerometer()}setAccelerometerInterval(e){OE.setAccelerometerInterval(e)}};c.internal.inputManager=qE;let YE=null,XE=null,QE=null,KE=null;class ZE extends Yt{constructor(){super()}setAccelerometerEnabled(e){e&&window.DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((e=>{w(3520,e),qE.setAccelerometerEnabled("granted"===e)})).catch((e=>{P(3521,e.message),qE.setAccelerometerEnabled(!1)})):qE.setAccelerometerEnabled(e)}setAccelerometerInterval(e){qE.setAccelerometerInterval(e)}on(e,t,n,i){return super.on(e,t,n,i),e!==Mg.KEY_DOWN&&e!==Mg.KEY_UP||YE||(YE=Og.create({event:Og.KEYBOARD,onKeyDown(e,t){JE.emit(t.type,t)},onKeyPressed(e,t){JE.emit(t.type,t)},onKeyReleased(e,t){JE.emit(t.type,t)}}),qg.addListener(YE,256)),e===Mg.DEVICEMOTION&&(XE||(XE=Og.create({event:Og.ACCELERATION,callback(e,t){c.systemEvent.emit(t.type,t)}}),qg.addListener(XE,256))),e!==Mg.TOUCH_START&&e!==Mg.TOUCH_MOVE&&e!==Mg.TOUCH_END&&e!==Mg.TOUCH_CANCEL||QE||(QE=Og.create({event:Og.TOUCH_ONE_BY_ONE,onTouchBegan:(e,t)=>(c.systemEvent.emit(t.type,e,t),!0),onTouchMoved(e,t){c.systemEvent.emit(t.type,e,t)},onTouchEnded(e,t){c.systemEvent.emit(t.type,e,t)},onTouchCancelled(e,t){c.systemEvent.emit(t.type,e,t)}}),qg.addListener(QE,256)),e!==Mg.MOUSE_DOWN&&e!==Mg.MOUSE_MOVE&&e!==Mg.MOUSE_UP&&e!==Mg.MOUSE_WHEEL||KE||(KE=Og.create({event:Og.MOUSE,onMouseDown(e){c.systemEvent.emit(e.type,e)},onMouseMove(e){c.systemEvent.emit(e.type,e)},onMouseUp(e){c.systemEvent.emit(e.type,e)},onMouseScroll(e){c.systemEvent.emit(e.type,e)}}),qg.addListener(KE,256)),t}off(e,t,n){if(super.off(e,t,n),YE&&(e===Mg.KEY_DOWN||e===Mg.KEY_UP)){const e=this.hasEventListener(Mg.KEY_DOWN),t=this.hasEventListener(Mg.KEY_UP);e||t||(qg.removeListener(YE),YE=null)}if(XE&&e===Mg.DEVICEMOTION&&(qg.removeListener(XE),XE=null),QE&&(e===Mg.TOUCH_START||e===Mg.TOUCH_MOVE||e===Mg.TOUCH_END||e===Mg.TOUCH_CANCEL)){const e=this.hasEventListener(Mg.TOUCH_START),t=this.hasEventListener(Mg.TOUCH_MOVE),n=this.hasEventListener(Mg.TOUCH_END),i=this.hasEventListener(Mg.TOUCH_CANCEL);e||t||n||i||(qg.removeListener(QE),QE=null)}if(KE&&(e===Mg.MOUSE_DOWN||e===Mg.MOUSE_MOVE||e===Mg.MOUSE_UP||e===Mg.MOUSE_WHEEL)){const e=this.hasEventListener(Mg.MOUSE_DOWN),t=this.hasEventListener(Mg.MOUSE_MOVE),n=this.hasEventListener(Mg.MOUSE_UP),i=this.hasEventListener(Mg.MOUSE_WHEEL);e||t||n||i||(qg.removeListener(KE),KE=null)}}}e("fj",ZE),ZE.EventType=Mg,c.SystemEvent=ZE;const JE=e("fk",new ZE);c.systemEvent=JE;class $E extends Yt{constructor(...e){super(...e),this.frame=null,this.container=null,this.canvas=null,this.renderType=-1,this.eventTargetOn=super.on,this.eventTargetOnce=super.once,this.config={},this.onStart=null,this.frameTime=1e3/60,this.collisionMatrix=[],this.groupList=[],this._persistRootNodes={},this._gfxDevice=null,this._configLoaded=!1,this._isCloning=!1,this._inited=!1,this._engineInited=!1,this._rendererInitialized=!1,this._paused=!0,this._frameRate=60,this._intervalId=0,this._initTime=0,this._startTime=0,this._deltaTime=0}get inited(){return this._inited}get frameRate(){return this._frameRate}set frameRate(e){"number"!=typeof e&&(e=parseInt(e,10),Number.isNaN(e)&&(e=60)),this._frameRate=e,this.frameTime=1e3/e,this._setAnimFrame()}get deltaTime(){return this._deltaTime}get totalTime(){return performance.now()-this._initTime}get frameStartTime(){return this._startTime}setFrameRate(e){this.frameRate=e}getFrameRate(){return this.frameRate}step(){c.director.tick(this.frameTime/1e3)}pause(){this._paused||(this._paused=!0,this._intervalId&&(window.cAF(this._intervalId),this._intervalId=0))}resume(){this._paused&&(qE.clearEvents(),this._intervalId&&(window.cAF(this._intervalId),this._intervalId=0),this._paused=!1,this._updateCallback(),this._intervalId=window.rAF(this._frameCB))}isPaused(){return this._paused}restart(){return new Promise((e=>c.director.once(c.Director.EVENT_END_FRAME,(()=>e())))).then((()=>{for(const e in this._persistRootNodes)this.removePersistRootNode(this._persistRootNodes[e]);return c.director.getScene().destroy(),c.Object._deferredDestroy(),c.director.reset(),this.pause(),this._setRenderPipelineNShowSplash().then((()=>{this.resume(),this._safeEmit($E.EVENT_RESTART)}))}))}end(){Kt.close()}on(e,t,n,i){return(this._engineInited&&e===$E.EVENT_ENGINE_INITED||this._inited&&e===$E.EVENT_GAME_INITED||this._rendererInitialized&&e===$E.EVENT_RENDERER_INITED)&&t.call(n),this.eventTargetOn(e,t,n,i)}once(e,t,n){return this._engineInited&&e===$E.EVENT_ENGINE_INITED?t.call(n):this.eventTargetOnce(e,t,n)}init(e){if(this._initConfig(e),this.config.assetOptions&&c.assetManager.init(this.config.assetOptions),this.config.layers){const e=this.config.layers;for(let t=0;t<e.length;t++){const n=e[t],i=$t(n.value);Gh.addLayer(n.name,i)}}return this._initEngine().then((()=>(this._initEvents(),c.director.root&&c.director.root.dataPoolManager&&c.director.root.dataPoolManager.jointTexturePool.registerCustomTextureLayouts(e.customJointTextureLayouts),this._engineInited)))}run(e,t){let n;return"function"!=typeof e&&e?(n=this.init(e),this.onStart=null!=t?t:null):this.onStart=null!=e?e:null,ql.init(),Promise.resolve(n).then((()=>this._setRenderPipelineNShowSplash()))}addPersistRootNode(e){if(!c.Node.isNode(e)||!e.uuid)return void P(3800);const t=e.uuid;if(!this._persistRootNodes[t]){const n=c.director._scene;if(c.isValid(n))if(e.parent){if(!(e.parent instanceof c.Scene))return void P(3801);if(e.parent!==n)return void P(3802);e._originalSceneId=n.uuid}else e.parent=n;this._persistRootNodes[t]=e,e._persistNode=!0,c.assetManager._releaseManager._addPersistNodeRef(e)}}removePersistRootNode(e){const t=e.uuid||"";e===this._persistRootNodes[t]&&(delete this._persistRootNodes[t],e._persistNode=!1,e._originalSceneId="",c.assetManager._releaseManager._removePersistNodeRef(e))}isPersistRootNode(e){return!!e._persistNode}_initEngine(){return this._initDevice(),Promise.resolve(c.director._init()).then((()=>{v(`Cocos Creator v${l}`),this.emit($E.EVENT_ENGINE_INITED),this._engineInited=!0,c.internal.dynamicAtlasManager&&(c.internal.dynamicAtlasManager.enabled=!He.CLEANUP_IMAGE_CACHE)}))}_setAnimFrame(){const e=this._frameRate;jsb.setPreferredFramesPerSecond(e),window.rAF=window.requestAnimationFrame,window.cAF=window.cancelAnimationFrame}_stTime(e){const t=performance.now(),n=Math.max(0,t-this._startTime),i=Math.max(0,this.frameTime-n);return window.setTimeout(e,i)}_ctTime(e){window.clearTimeout(e)}_calculateDT(e){return e||(e=performance.now()),this._deltaTime=e>this._startTime?(e-this._startTime)/1e3:0,this._deltaTime>$E.DEBUG_DT_THRESHOLD&&(this._deltaTime=this.frameTime/1e3),this._startTime=e,this._deltaTime}_updateCallback(){const e=c.director;let t;t=t=>{e.tick(this._calculateDT(t)),this._intervalId=window.rAF(this._frameCB)},this._frameCB=t}_runMainLoop(){if(!this._inited||i)return;const e=this.config,t=c.director;L(!!e.showFPS),t.startAnimation(),this.resume()}_initConfig(e){"number"!=typeof e.debugMode&&(e.debugMode=M.NONE),e.exposeClassName=!!e.exposeClassName,"number"!=typeof e.frameRate&&(e.frameRate=60);const t=e.renderMode;("number"!=typeof t||t>2||t<0)&&(e.renderMode=0),e.showFPS=!!e.showFPS,b(e.debugMode),this.config=e,this._configLoaded=!0,this.frameRate=e.frameRate}_determineRenderType(){const e=this.config,t=parseInt(e.renderMode,10);this.renderType=$E.RENDER_TYPE_CANVAS;let n=!1;if(0===t?Si.capabilities.opengl?(this.renderType=$E.RENDER_TYPE_WEBGL,n=!0):Si.capabilities.canvas&&(this.renderType=$E.RENDER_TYPE_CANVAS,n=!0):1===t&&Si.capabilities.canvas?(this.renderType=$E.RENDER_TYPE_CANVAS,n=!0):2===t&&Si.capabilities.opengl&&(this.renderType=$E.RENDER_TYPE_WEBGL,n=!0),!n)throw new Error(O(3820,t))}_initDevice(){if(this._rendererInitialized)return;const e=this.config.adapter;if(e&&(this.canvas=e.canvas,this.frame=e.frame,this.container=e.container),this._determineRenderType(),this.renderType===$E.RENDER_TYPE_WEBGL){const e=[],t=new Ar(this.canvas,He.ENABLE_WEBGL_ANTIALIAS,!1,window.devicePixelRatio,Si.windowPixelResolution.width,Si.windowPixelResolution.height,ep);if(window.gfx)this._gfxDevice=gfx.DeviceManager.create(t);else{let n=!!window.WebGL2RenderingContext;const i=window.navigator.userAgent.toLowerCase();(-1!==i.indexOf("safari")&&-1===i.indexOf("chrome")||Si.browserType===U.UC)&&(n=!1),n&&c.WebGL2Device&&e.push(c.WebGL2Device),c.WebGLDevice&&e.push(c.WebGLDevice);for(let n=0;n<e.length&&(this._gfxDevice=new e[n],!this._gfxDevice.initialize(t));n++);}}if(!this._gfxDevice)return y("can not support canvas rendering in 3D"),void(this.renderType=$E.RENDER_TYPE_CANVAS);this.canvas.oncontextmenu=()=>!1}_initEvents(){Kt.on("show",this._onShow,this),Kt.on("hide",this._onHide,this)}_onHide(){this.emit($E.EVENT_HIDE),this.pause()}_onShow(){this.emit($E.EVENT_SHOW),this.resume()}_setRenderPipelineNShowSplash(){return Promise.resolve(this._setupRenderPipeline()).then((()=>Promise.resolve(this._showSplashScreen()).then((()=>{this._inited=!0,this._initTime=performance.now(),this._runMainLoop(),this._safeEmit($E.EVENT_GAME_INITED),this.onStart&&this.onStart()}))))}_setupRenderPipeline(){const{renderPipeline:e}=this.config;return e?new Promise(((t,n)=>{c.assetManager.loadAny(e,((e,i)=>!e&&i instanceof cE?t(i):n(e)))})).then((e=>{this._setRenderPipeline(e)})).catch((t=>{g(t),g(`Failed load render pipeline: ${e}, engine failed to initialize, will fallback to default pipeline`),this._setRenderPipeline()})):this._setRenderPipeline()}_showSplashScreen(){if(c.internal.SplashScreen){const e=c.internal.SplashScreen.instance;return e.main(c.director.root),new Promise((t=>{e.setOnFinish((()=>t())),e.loadFinish=!0}))}return null}_setRenderPipeline(e){c.director.root.setRenderPipeline(e)||this._setRenderPipeline(),this._rendererInitialized=!0,this._safeEmit($E.EVENT_RENDERER_INITED)}_safeEmit(e){this.emit(e)}}e("er",$E),$E.EVENT_HIDE="game_on_hide",$E.EVENT_SHOW="game_on_show",$E.EVENT_LOW_MEMORY="game_on_low_memory",$E.EVENT_GAME_INITED="game_inited",$E.EVENT_ENGINE_INITED="engine_inited",$E.EVENT_RENDERER_INITED="renderer_inited",$E.EVENT_RESTART="game_on_restart",$E.RENDER_TYPE_CANVAS=0,$E.RENDER_TYPE_WEBGL=1,$E.RENDER_TYPE_OPENGL=2,$E.DEBUG_DT_THRESHOLD=1,c.Game=$E;const ew=e("d5",c.game=new $E),tw=e("cV",{topLeft:c.v2(0,0),topRight:c.v2(0,0),top:c.v2(0,0),bottomLeft:c.v2(0,0),bottomRight:c.v2(0,0),bottom:c.v2(0,0),center:c.v2(0,0),left:c.v2(0,0),right:c.v2(0,0),width:0,height:0,init(e){const t=this.width=e.width,n=this.height=e.height,i=e.x,o=e.y,a=o+n,r=i+t;this.topLeft.x=i,this.topLeft.y=a,this.topRight.x=r,this.topRight.y=a,this.top.x=i+t/2,this.top.y=a,this.bottomLeft.x=i,this.bottomLeft.y=o,this.bottomRight.x=r,this.bottomRight.y=o,this.bottom.x=i+t/2,this.bottom.y=o,this.center.x=i+t/2,this.center.y=o+n/2,this.left.x=i,this.left.y=o+n/2,this.right.x=r,this.right.y=o+n/2}});c.visibleRect=tw;const nw=e("eh",new class{get supportsFullScreen(){return xi.supportFullScreen}fullScreen(){return xi.isFullScreen}requestFullScreen(e,t,n){return arguments.length>0&&P(1400,"screen.requestFullScreen(element, onFullScreenChange?, onFullScreenError?)","screen.requestFullScreen(): Promise"),xi.requestFullScreen().then((()=>{null==t||t()})).catch((e=>{console.error(e),null==n||n()}))}exitFullScreen(){return xi.exitFullScreen()}autoFullScreen(e,t){var n;null===(n=this.requestFullScreen(e,t))||void 0===n||n.catch((()=>{}))}disableAutoFullScreen(e){}});c.screen=nw;const iw=new pi;class ow extends Yt{constructor(){super(),this._resizeWithBrowserSize=void 0,this._designResolutionSize=void 0,this._frameSize=void 0,this._scaleX=void 0,this._scaleY=void 0,this._viewportRect=void 0,this._visibleRect=void 0,this._autoFullScreen=void 0,this._devicePixelRatio=void 0,this._maxPixelRatio=void 0,this._retinaEnabled=void 0,this._resizeCallback=void 0,this._resizing=void 0,this._orientationChanging=void 0,this._isRotated=void 0,this._orientation=void 0,this._resolutionPolicy=void 0,this._rpExactFit=void 0,this._rpShowAll=void 0,this._rpNoBorder=void 0,this._rpFixedHeight=void 0,this._rpFixedWidth=void 0;const e=aw,t=rw;this._frameSize=new pi(0,0),this._designResolutionSize=new pi(0,0),this._scaleX=1,this._scaleY=1,this._viewportRect=new di(0,0,0,0),this._visibleRect=new di(0,0,0,0),this._autoFullScreen=!1,this._devicePixelRatio=1,this._maxPixelRatio=4,this._retinaEnabled=!1,this._resizeCallback=null,this._resizing=!1,this._resizeWithBrowserSize=!1,this._orientationChanging=!0,this._isRotated=!1,this._orientation=c.macro.ORIENTATION_AUTO,this._rpExactFit=new sw(e.EQUAL_TO_FRAME,t.EXACT_FIT),this._rpShowAll=new sw(e.EQUAL_TO_FRAME,t.SHOW_ALL),this._rpNoBorder=new sw(e.EQUAL_TO_FRAME,t.NO_BORDER),this._rpFixedHeight=new sw(e.EQUAL_TO_FRAME,t.FIXED_HEIGHT),this._rpFixedWidth=new sw(e.EQUAL_TO_FRAME,t.FIXED_WIDTH),this._resolutionPolicy=this._rpShowAll,c.game.once(c.Game.EVENT_ENGINE_INITED,this.init,this)}init(){this._initFrameSize();const e=c.game.canvas.width,t=c.game.canvas.height;this._designResolutionSize.width=e,this._designResolutionSize.height=t,this._viewportRect.width=e,this._viewportRect.height=t,this._visibleRect.width=e,this._visibleRect.height=t,iw.width=this._visibleRect.width,iw.height=this._visibleRect.height,tw&&tw.init(this._visibleRect)}resizeWithBrowserSize(e){e?this._resizeWithBrowserSize||(this._resizeWithBrowserSize=!0,xi.on("window-resize",this._resizeEvent,this),xi.on("orientation-change",this._orientationChange,this)):this._resizeWithBrowserSize&&(this._resizeWithBrowserSize=!1,xi.off("window-resize",this._resizeEvent,this),xi.off("orientation-change",this._orientationChange,this))}setResizeCallback(e){"function"!=typeof e&&null!=e||(this._resizeCallback=e)}setOrientation(e){(e&=c.macro.ORIENTATION_AUTO)&&this._orientation!==e&&(this._orientation=e)}adjustViewportMeta(e){}enableRetina(e){this._retinaEnabled=!!e}isRetinaEnabled(){return this._retinaEnabled}enableAutoFullScreen(e){e!==this._autoFullScreen&&(this._autoFullScreen=e,e&&nw.requestFullScreen().catch((()=>{})))}isAutoFullScreenEnabled(){return this._autoFullScreen}setCanvasSize(e,t){const n=c.game.canvas,i=c.game.container;this._devicePixelRatio=window.devicePixelRatio,n.width=Si.windowPixelResolution.width,n.height=Si.windowPixelResolution.height,n.style.width=`${e}px`,n.style.height=`${t}px`,i.style.width=`${e}px`,i.style.height=`${t}px`,this._resizeEvent()}getCanvasSize(){return new pi(c.game.canvas.width,c.game.canvas.height)}getFrameSize(){return new pi(this._frameSize.width,this._frameSize.height)}setFrameSize(e,t){this._frameSize.width=e,this._frameSize.height=t,c.game.frame.style.width=`${e}px`,c.game.frame.style.height=`${t}px`,this._resizeEvent()}getVisibleSize(){return new pi(this._visibleRect.width,this._visibleRect.height)}getVisibleSizeInPixel(){return new pi(this._visibleRect.width*this._scaleX,this._visibleRect.height*this._scaleY)}getVisibleOrigin(){return new si(this._visibleRect.x,this._visibleRect.y)}getVisibleOriginInPixel(){return new si(this._visibleRect.x*this._scaleX,this._visibleRect.y*this._scaleY)}getResolutionPolicy(){return this._resolutionPolicy}setResolutionPolicy(e){if(e instanceof sw)this._resolutionPolicy=e;else{const t=sw;e===t.EXACT_FIT&&(this._resolutionPolicy=this._rpExactFit),e===t.SHOW_ALL&&(this._resolutionPolicy=this._rpShowAll),e===t.NO_BORDER&&(this._resolutionPolicy=this._rpNoBorder),e===t.FIXED_HEIGHT&&(this._resolutionPolicy=this._rpFixedHeight),e===t.FIXED_WIDTH&&(this._resolutionPolicy=this._rpFixedWidth)}}setDesignResolutionSize(e,t,n){if(!(e>0&&t>0))return void R(2200);this.setResolutionPolicy(n);const i=this._resolutionPolicy;if(i&&i.preApply(this),this._orientationChanging=!0,this._resizing||this._initFrameSize(),!i)return void w(2201);this._designResolutionSize.width=e,this._designResolutionSize.height=t;const o=i.apply(this,this._designResolutionSize);if(o.scale&&2===o.scale.length&&(this._scaleX=o.scale[0],this._scaleY=o.scale[1]),o.viewport){const e=this._viewportRect,t=this._visibleRect,n=o.viewport;e.x=n.x,e.y=n.y,e.width=n.width,e.height=n.height,t.x=0,t.y=0,t.width=n.width/this._scaleX,t.height=n.height/this._scaleY}i.postApply(this),iw.width=this._visibleRect.width,iw.height=this._visibleRect.height,tw&&tw.init(this._visibleRect),this.emit("design-resolution-changed")}getDesignResolutionSize(){return new pi(this._designResolutionSize.width,this._designResolutionSize.height)}setRealPixelResolution(e,t,n){this.setDesignResolutionSize(e,t,n)}getViewportRect(){return this._viewportRect}getScaleX(){return this._scaleX}getScaleY(){return this._scaleY}getDevicePixelRatio(){return this._devicePixelRatio}convertToLocationInView(e,t,n,i){const o=i||new si,a=this._devicePixelRatio*(e-n.left),r=this._devicePixelRatio*(n.top+n.height-t);return this._isRotated?(o.x=c.game.canvas.width-r,o.y=a):(o.x=a,o.y=r),c.GAME_VIEW&&(o.x/=c.gameView.canvas.width/c.game.canvas.width,o.y/=c.gameView.canvas.height/c.game.canvas.height),o}_convertPointWithScale(e){const t=this._viewportRect;e.x=(e.x-t.x)/this._scaleX,e.y=(e.y-t.y)/this._scaleY}_resizeEvent(){var e;if(this._frameSize.width,this._frameSize.height,this._isRotated,c.sys.isMobile){const e=c.game.container.style,t=e.margin;e.margin="0",e.display="none",this._initFrameSize(),e.margin=t,e.display="block"}else this._initFrameSize();const t=this._designResolutionSize.width,n=this._designResolutionSize.height;this._resizing=!0,t>0&&this.setDesignResolutionSize(t,n,this._resolutionPolicy),this._resizing=!1,this.emit("canvas-resize"),null===(e=this._resizeCallback)||void 0===e||e.call(this)}_orientationChange(){this._orientationChanging=!0,this._resizeEvent()}_initFrameSize(){const e=this._frameSize,t=xi.windowSize,n=t.width,i=t.height,o=n>=i;!c.sys.isMobile||o&&this._orientation&c.macro.ORIENTATION_LANDSCAPE||!o&&this._orientation&c.macro.ORIENTATION_PORTRAIT?(e.width=n,e.height=i,c.game.container.style["-webkit-transform"]="rotate(0deg)",c.game.container.style.transform="rotate(0deg)",this._isRotated=!1):(e.width=i,e.height=n,c.game.container.style["-webkit-transform"]="rotate(90deg)",c.game.container.style.transform="rotate(90deg)",c.game.container.style["-webkit-transform-origin"]="0px 0px 0px",c.game.container.style.transformOrigin="0px 0px 0px",this._isRotated=!0,c.game.canvas.style["-webkit-transform"]="translateZ(0px)",c.game.canvas.style.transform="translateZ(0px)"),this._orientationChanging&&setTimeout((()=>{c.view._orientationChanging=!1}),1e3)}}e("dB",ow),ow.instance=void 0;class aw{constructor(){this.name="ContainerStrategy"}preApply(e){}apply(e,t){}postApply(e){}_setupContainer(e,t,n){const i=c.game.canvas,o=c.game.container;Si.os!==j.ANDROID&&Si.os!==j.OHOS||(document.body.style.width=`${e._isRotated?n:t}px`,document.body.style.height=`${e._isRotated?t:n}px`),o.style.width=i.style.width=`${t}px`,o.style.height=i.style.height=`${n}px`,e._devicePixelRatio=1,e.isRetinaEnabled()&&(e._devicePixelRatio=Math.min(e._maxPixelRatio,window.devicePixelRatio||1)),i.width=Si.windowPixelResolution.width,i.height=Si.windowPixelResolution.height}_fixContainer(){document.body.insertBefore(c.game.container,document.body.firstChild);const e=document.body.style;e.width=`${window.innerWidth}px`,e.height=`${window.innerHeight}px`,e.overflow="hidden";const t=c.game.container.style;t.position="fixed",t.left=t.top="0px",document.body.scrollTop=0}}aw.EQUAL_TO_FRAME=void 0,aw.PROPORTION_TO_FRAME=void 0;class rw{constructor(){this.name="ContentStrategy",this._result=void 0,this._result={scale:[1,1],viewport:null}}preApply(e){}apply(e,t){return{scale:[1,1]}}postApply(e){}_buildResult(e,t,n,i,o,a){Math.abs(e-n)<2&&(n=e),Math.abs(t-i)<2&&(i=t);const r=new di(Math.round((e-n)/2),Math.round((t-i)/2),n,i);return this._result.scale=[o,a],this._result.viewport=r,this._result}}rw.EXACT_FIT=void 0,rw.SHOW_ALL=void 0,rw.NO_BORDER=void 0,rw.FIXED_HEIGHT=void 0,rw.FIXED_WIDTH=void 0,(()=>{const e=("undefined"==typeof window?global:window).__globalAdapter;e&&(e.adaptContainerStrategy&&e.adaptContainerStrategy(aw.prototype),e.adaptView&&e.adaptView(ow.prototype)),aw.EQUAL_TO_FRAME=new class extends aw{constructor(...e){super(...e),this.name="EqualToFrame"}apply(e){const t=e._frameSize.height,n=c.game.container.style;this._setupContainer(e,e._frameSize.width,e._frameSize.height),e._isRotated?n.margin=`0 0 0 ${t}px`:n.margin="0px",n.padding="0px"}},aw.PROPORTION_TO_FRAME=new class extends aw{constructor(...e){super(...e),this.name="ProportionalToFrame"}apply(e,t){const n=e._frameSize.width,i=e._frameSize.height,o=c.game.container.style,a=t.width,r=t.height,s=n/a,l=i/r;let _,u;s<l?(_=n,u=r*s):(_=a*l,u=i);const f=Math.round((n-_)/2),h=Math.round((i-u)/2);_=n-2*f,u=i-2*h,this._setupContainer(e,_,u),e._isRotated?o.margin=`0 0 0 ${i}px`:o.margin="0px",o.paddingLeft=`${f}px`,o.paddingRight=`${f}px`,o.paddingTop=`${h}px`,o.paddingBottom=`${h}px`}},rw.EXACT_FIT=new class extends rw{constructor(...e){super(...e),this.name="ExactFit"}apply(e,t){const n=c.game.canvas.width,i=c.game.canvas.height,o=n/t.width,a=i/t.height;return this._buildResult(n,i,n,i,o,a)}},rw.SHOW_ALL=new class extends rw{constructor(...e){super(...e),this.name="ShowAll"}apply(e,t){const n=c.game.canvas.width,i=c.game.canvas.height,o=t.width,a=t.height,r=n/o,s=i/a;let l,_,u=0;return r<s?(u=r,l=n,_=a*u):(u=s,l=o*u,_=i),this._buildResult(n,i,l,_,u,u)}},rw.NO_BORDER=new class extends rw{constructor(...e){super(...e),this.name="NoBorder"}apply(e,t){const n=c.game.canvas.width,i=c.game.canvas.height,o=t.width,a=t.height,r=n/o,s=i/a;let l,_,u;return r<s?(l=s,_=o*l,u=i):(l=r,_=n,u=a*l),this._buildResult(n,i,_,u,l,l)}},rw.FIXED_HEIGHT=new class extends rw{constructor(...e){super(...e),this.name="FixedHeight"}apply(e,t){const n=c.game.canvas.width,i=c.game.canvas.height,o=i/t.height,a=n,r=i;return this._buildResult(n,i,a,r,o,o)}},rw.FIXED_WIDTH=new class extends rw{constructor(...e){super(...e),this.name="FixedWidth"}apply(e,t){const n=c.game.canvas.width,i=c.game.canvas.height,o=n/t.width,a=n,r=i;return this._buildResult(n,i,a,r,o,o)}}})();class sw{constructor(e,t){this.name="ResolutionPolicy",this._containerStrategy=void 0,this._contentStrategy=void 0,this._containerStrategy=null,this._contentStrategy=null,this.setContainerStrategy(e),this.setContentStrategy(t)}get canvasSize(){return new si(c.game.canvas.width,c.game.canvas.height)}preApply(e){this._containerStrategy.preApply(e),this._contentStrategy.preApply(e)}apply(e,t){return this._containerStrategy.apply(e,t),this._contentStrategy.apply(e,t)}postApply(e){this._containerStrategy.postApply(e),this._contentStrategy.postApply(e)}setContainerStrategy(e){e instanceof aw&&(this._containerStrategy=e)}setContentStrategy(e){e instanceof rw&&(this._contentStrategy=e)}}e("fi",sw),sw.EXACT_FIT=0,sw.NO_BORDER=1,sw.SHOW_ALL=2,sw.FIXED_HEIGHT=3,sw.FIXED_WIDTH=4,sw.UNKNOWN=5,sw.ContainerStrategy=aw,sw.ContentStrategy=rw,c.ResolutionPolicy=sw;const cw=e("d6",ow.instance=c.view=new ow);c.winSize=iw,rn(ow.prototype,"View.prototype",[{name:"isAntiAliasEnabled",suggest:"The API of Texture2d have been largely modified, no alternative"},{name:"enableAntiAlias",suggest:"The API of Texture2d have been largely modified, no alternative"}]),sn(ow.prototype,"View.prototype",[{name:"adjustViewportMeta"},{name:"enableAutoFullScreen",suggest:"use screen.requestFullScreen() instead."},{name:"isAutoFullScreenEnabled"}]),sn(c,"cc",[{name:"winSize",suggest:"please use view.getVisibleSize() instead."}]),an(Wl,"Event",[{name:"ACCELERATION",newName:"DEVICEMOTION",target:ZE.EventType,targetName:"SystemEvent.EventType"}]),sn(Wl,"Event",[{name:"TOUCH",suggest:"please use SystemEvent.EventType.TOUCH_START, SystemEvent.EventType.TOUCH_MOVE, SystemEvent.EventType.TOUCH_END and SystemEvent.EventType.TOUCH_CANCEL instead"},{name:"MOUSE",suggest:"please use SystemEvent.EventType.MOUSE_DOWN, SystemEvent.EventType.MOUSE_MOVE, SystemEvent.EventType.MOUSE_UP, SystemEvent.EventType.MOUSE_WHEEL, Node.EventType.MOUSE_ENTER and Node.EventType.MOUSE_LEAVE instead"},{name:"KEYBOARD",suggest:"please use SystemEvent.EventType.KEY_DOWN and SystemEvent.EventType.KEY_UP instead"}]),an(LE,"EventMouse",["DOWN","UP","MOVE"].map((e=>({name:e,newName:`MOUSE_${e}`,target:ZE.EventType,targetName:"SystemEvent.EventType"})))),an(LE,"EventMouse",[{name:"SCROLL",newName:"MOUSE_WHEEL",target:ZE.EventType,targetName:"SystemEvent.EventType"}]),sn(LE.prototype,"EventMouse.prototype",[{name:"eventType",suggest:"please use EventMouse.prototype.type instead"}]),an(FE,"EventTouch",[{name:"BEGAN",newName:"TOUCH_START",target:ZE.EventType,targetName:"SystemEvent.EventType"}]),an(FE,"EventTouch",[{name:"MOVED",newName:"TOUCH_MOVE",target:ZE.EventType,targetName:"SystemEvent.EventType"}]),an(FE,"EventTouch",[{name:"ENDED",newName:"TOUCH_END",target:ZE.EventType,targetName:"SystemEvent.EventType"}]),an(FE,"EventTouch",[{name:"CANCELLED",newName:"TOUCH_CANCEL",target:ZE.EventType,targetName:"SystemEvent.EventType"}]),sn(FE.prototype,"EventTouch.prototype",[{name:"getEventCode",suggest:"please use EventTouch.prototype.type instead"}]),sn(BE.prototype,"EventKeyboard.prototype",[{name:"isPressed",suggest:"use EventKeyboard.prototype.type !== SystemEvent.EventType.KEY_UP instead"}]),an(Si,"sys",["UNKNOWN","ENGLISH","CHINESE","FRENCH","ITALIAN","GERMAN","SPANISH","DUTCH","RUSSIAN","KOREAN","JAPANESE","HUNGARIAN","PORTUGUESE","ARABIC","NORWEGIAN","POLISH","TURKISH","UKRAINIAN","ROMANIAN","BULGARIAN"].map((e=>({name:`LANGUAGE_${e}`,newName:e,target:Si.Language,targetName:"sys.Language"})))),an(Si,"sys",["UNKNOWN","IOS","ANDROID","WINDOWS","LINUX","OSX"].map((e=>({name:`OS_${e}`,newName:e,target:Si.OS,targetName:"sys.OS"})))),an(Si,"sys",["UNKNOWN","WECHAT","ANDROID","IE","EDGE","QQ","MOBILE_QQ","UC","UCBS","BAIDU_APP","BAIDU","MAXTHON","OPERA","OUPENG","MIUI","FIREFOX","SAFARI","CHROME","LIEBAO","QZONE","SOUGOU","HUAWEI"].map((e=>({name:`BROWSER_TYPE_${e}`,newName:e,target:Si.BrowserType,targetName:"sys.BrowserType"})))),an(Si,"sys",[{name:"BROWSER_TYPE_360",newName:"BROWSER_360",target:Si.BrowserType,targetName:"sys.BrowserType"}]),an(Si,"sys",["UNKNOWN","EDITOR_PAGE","EDITOR_CORE","MOBILE_BROWSER","DESKTOP_BROWSER","WIN32","MACOS","IOS","ANDROID","OHOS","WECHAT_GAME","BAIDU_MINI_GAME","XIAOMI_QUICK_GAME","ALIPAY_MINI_GAME","BYTEDANCE_MINI_GAME","OPPO_MINI_GAME","VIVO_MINI_GAME","HUAWEI_QUICK_GAME","COCOSPLAY","LINKSURE_MINI_GAME","QTT_MINI_GAME"].map((e=>({name:e,target:Si.Platform,targetName:"sys.Platform"})))),an(Si,"sys",[{name:"IPHONE",newName:"IOS",target:Si.Platform,targetName:"sys.Platform"},{name:"IPAD",newName:"IOS",target:Si.Platform,targetName:"sys.Platform"}]),rn(Si,"sys",["LINUX","BLACKBERRY","NACL","EMSCRIPTEN","TIZEN","WINRT","WP8","QQ_PLAY","FB_PLAYABLE_ADS"].map((e=>({name:e})))),an(Mg,"SystemEventType",["MOUSE_ENTER","MOUSE_LEAVE","TRANSFORM_CHANGED","SCENE_CHANGED_FOR_PERSISTS","SIZE_CHANGED","ANCHOR_CHANGED","COLOR_CHANGED","CHILD_ADDED","CHILD_REMOVED","PARENT_CHANGED","NODE_DESTROYED","LAYER_CHANGED","SIBLING_ORDER_CHANGED"].map((e=>({name:e,target:ky.EventType,targetName:"Node.EventType"})))),an(ky.EventType,"Node.EventType",[{name:"DEVICEMOTION",target:ZE.EventType,targetName:"SystemEvent.EventType"},{name:"KEY_DOWN",target:ZE.EventType,targetName:"SystemEvent.EventType"},{name:"KEY_UP",target:ZE.EventType,targetName:"SystemEvent.EventType"}]),sn(He.KEY,"macro.KEY",["back","menu","0","1","2","3","4","5","6","7","8","9","0","*","+","-","/",";","=",",",".","[","]","dpadLeft","dpadRight","dpadUp","dpadDown","dpadCenter"].map((e=>({name:e})))),sn(He.KEY,"macro.KEY",[{name:"shift",suggest:"please use KeyCode.SHIFT_LEFT instead"}]),sn(He.KEY,"macro.KEY",[{name:"ctrl",suggest:"please use KeyCode.CTRL_LEFT instead"}]),sn(He.KEY,"macro.KEY",[{name:"alt",suggest:"please use KeyCode.ALT_LEFT instead"}]),sn(He,"macro",[{name:"KEY",suggest:"please use KeyCode instead"}]),sn(nw,"screen",[{name:"autoFullScreen",suggest:"please use screen.requestFullScreen() instead."},{name:"disableAutoFullScreen"}]);const lw=new si;class _w{set splashFinish(e){this._splashFinish=e,this._tryToStart()}set loadFinish(e){this._loadFinish=e,this._tryToStart()}main(e){if(null!=e){if(window._CCSettings&&window._CCSettings.splashScreen){const e=this.settings=window._CCSettings.splashScreen;e.totalTime=null!=this.settings.totalTime?this.settings.totalTime:3e3,e.base64src=this.settings.base64src||"",e.effect=this.settings.effect||"FADE-INOUT",e.clearColor=this.settings.clearColor||new Na(.88,.88,.88,1),e.displayRatio=null!=this.settings.displayRatio?this.settings.displayRatio:.4,e.displayWatermark=null==this.settings.displayWatermark||this.settings.displayWatermark}else this.settings={totalTime:3e3,base64src:"",effect:"FADE-INOUT",clearColor:new Na(.88,.88,.88,1),displayRatio:.4,displayWatermark:!0};if(""===this.settings.base64src||this.settings.totalTime<=0)this.callBack&&this.callBack(),this.callBack=null,this.settings=null,this._directCall=!0;else{c.view.enableRetina(!0),c.view.resizeWithBrowserSize(!0);const t=window._CCSettings.designResolution;t?c.view.setDesignResolutionSize(t.width,t.height,t.policy):c.view.setDesignResolutionSize(960,640,4),this.root=e,this.device=e.device,c.game.once(c.Game.EVENT_GAME_INITED,(()=>{c.director._lateUpdate=performance.now()}),c.director),this.callBack=null,this.cancelAnimate=!1,this.startTime=-1,this.preInit(),this.logoImage=new Image,this.logoImage.onload=this.init.bind(this),this.logoImage.src=this.settings.base64src}}else y("RENDER ROOT IS NULL.")}setOnFinish(e){if(this._directCall&&e)return _w._ins=void 0,void e();this.callBack=e}_tryToStart(){this._splashFinish&&this._loadFinish&&this.callBack&&(this.callBack(),this.hide(),c.game.resume())}preInit(){const e=this.settings.clearColor;this.clearColors=[new Na(e.x,e.y,e.z,e.w)];const t=this.device;this.renderArea=new Ca(0,0,t.width,t.height),this.framebuffer=this.root.mainWindow.framebuffer,this.cmdBuff=t.commandBuffer;const n=new Float32Array([.5,.5,1,0,-.5,.5,0,0,.5,-.5,1,1,-.5,-.5,0,1]),i=4*Float32Array.BYTES_PER_ELEMENT,o=4*i;this.vertexBuffers=t.createBuffer(new Ma(Go.VERTEX|Go.TRANSFER_DST,Wo.HOST|Wo.DEVICE,o,i)),this.vertexBuffers.update(n);const a=new Uint16Array([0,1,2,1,3,2]),r=Uint16Array.BYTES_PER_ELEMENT,s=6*r;this.indicesBuffers=t.createBuffer(new Ma(Go.INDEX|Go.TRANSFER_DST,Wo.HOST|Wo.DEVICE,s,r)),this.indicesBuffers.update(a);const c=[new Ka("a_position",Bo.RG32F),new Ka("a_texCoord",Bo.RG32F)],l=new Ja(c,[this.vertexBuffers],this.indicesBuffers);this.quadAssmebler=t.createInputAssembler(l),this.projection=new ii,ii.ortho(this.projection,-1,1,-1,1,-1,1,t.capabilities.clipSpaceMinZ,t.capabilities.clipSpaceSignY,t.surfaceTransform)}init(){this.initLogo(),this.settings.displayWatermark&&this.initWarterMark();const e=t=>{if(this.cancelAnimate)return;const n=this.settings,i=this.device;ii.ortho(this.projection,-1,1,-1,1,-1,1,i.capabilities.clipSpaceMinZ,i.capabilities.clipSpaceSignY,i.surfaceTransform);const o=i.width,a=i.height,r=o<a?o:a;this.startTime<0&&(this.startTime=t);const s=t-this.startTime;let c=Tu(An(s/n.totalTime));"NONE"===n.effect&&(c=1);const l=this.logoTexture.width,_=this.logoTexture.height,u=r*n.displayRatio;let f=u*l/_,h=u;if(i.surfaceTransform!==Fo.ROTATE_90&&i.surfaceTransform!==Fo.ROTATE_270||(f=u*o/a,h=u*_/l*a/o),this.logoMat.setProperty("resolution",lw.set(o,a),0),this.logoMat.setProperty("scale",lw.set(f,h),0),this.logoMat.setProperty("translate",lw.set(.5*o,.5*a),0),this.logoMat.setProperty("precent",c),this.logoMat.setProperty("u_projection",this.projection),this.logoMat.passes[0].update(),n.displayWatermark&&this.watermarkMat){const e=.5*r,t=this.watermarkTexture.width;let n=e,s=e*this.watermarkTexture.height/t;i.surfaceTransform!==Fo.ROTATE_90&&i.surfaceTransform!==Fo.ROTATE_270||(n=.5*e,s=e*o/a*.5),this.watermarkMat.setProperty("resolution",lw.set(o,a),0),this.watermarkMat.setProperty("scale",lw.set(n,s),0),this.watermarkMat.setProperty("translate",lw.set(.5*o,.1*a),0),this.watermarkMat.setProperty("precent",c),this.watermarkMat.setProperty("u_projection",this.projection),this.watermarkMat.passes[0].update()}this.frame(),s>n.totalTime&&(this.splashFinish=!0),requestAnimationFrame(e)};c.game.pause(),this.handle=requestAnimationFrame(e)}hide(){cancelAnimationFrame(this.handle),this.cancelAnimate=!0,setTimeout(this.destroy.bind(this))}initLogo(){const e=this.device;this.logoMat=new Bv,this.logoMat.initialize({effectName:"splash-screen"});const t=new ka;t.addressU=Zo.CLAMP,t.addressV=Zo.CLAMP,t.addressW=Zo.CLAMP,this.sampler=e.createSampler(t),this.logoTexture=e.createTexture(new Ua(qo.TEX2D,Yo.SAMPLED|Yo.TRANSFER_DST,Bo.RGBA8,this.logoImage.width,this.logoImage.height));const n=this.logoMat.passes[0],i=n.getBinding("mainTexture");n.bindTexture(i,this.logoTexture),this.shader=n.getShaderVariant();const o=n.descriptorSet;o.bindSampler(i,this.sampler),o.update();const a=new Ia;a.texExtent.width=this.logoImage.width,a.texExtent.height=this.logoImage.height,a.texExtent.depth=1,e.copyTexImagesToTexture([this.logoImage],this.logoTexture,[a])}initWarterMark(){const e=document.createElement("canvas");e.width=330,e.height=30,e.style.width=`${e.width}`,e.style.height=`${e.height}`;const t=e.getContext("2d");t.font="18px Arial",t.textBaseline="top",t.textAlign="left",t.fillStyle="`#424242`";const n="Powered by Cocos Creator",i=t.measureText(n);t.fillText(n,(330-i.width)/2,6);const o=new Ia;o.texExtent.width=e.width,o.texExtent.height=e.height,o.texExtent.depth=1,this.watermarkTexture=this.device.createTexture(new Ua(qo.TEX2D,Yo.SAMPLED|Yo.TRANSFER_DST,Bo.RGBA8,e.width,e.height)),this.device.copyTexImagesToTexture([e],this.watermarkTexture,[o]),this.watermarkMat=new Bv,this.watermarkMat.initialize({effectName:"splash-screen"});const a=this.watermarkMat.passes[0],r=a.getBinding("mainTexture");a.bindTexture(r,this.watermarkTexture),a.descriptorSet.update()}frame(){const e=this.device;e.acquire();const t=this.cmdBuff,n=this.framebuffer,i=this.renderArea;i.width=e.width,i.height=e.height,t.begin(),t.beginRenderPass(n.renderPass,n,i,this.clearColors,1,0);const o=this.logoMat.passes[0],a=lE.getOrCreatePipelineState(e,o,this.shader,n.renderPass,this.quadAssmebler);if(t.bindPipelineState(a),t.bindDescriptorSet($h.MATERIAL,o.descriptorSet),t.bindInputAssembler(this.quadAssmebler),t.draw(this.quadAssmebler),this.settings.displayWatermark&&this.watermarkMat){const i=this.watermarkMat.passes[0],o=lE.getOrCreatePipelineState(e,i,this.shader,n.renderPass,this.quadAssmebler);t.bindPipelineState(o),t.bindDescriptorSet($h.MATERIAL,i.descriptorSet),t.bindInputAssembler(this.quadAssmebler),t.draw(this.quadAssmebler)}t.endRenderPass(),t.end(),e.flushCommands([t]),e.queue.submit([t]),e.present()}destroy(){this.callBack=null,this.root=null,this.device=null,this.clearColors=null,this.logoImage.destroy&&this.logoImage.destroy(),this.logoImage=null,this.framebuffer=null,this.renderArea=null,this.cmdBuff=null,this.shader=null,this.logoMat.destroy(),this.logoMat=null,this.logoTexture.destroy(),this.logoTexture=null,this.quadAssmebler.destroy(),this.quadAssmebler=null,this.vertexBuffers.destroy(),this.vertexBuffers=null,this.indicesBuffers.destroy(),this.indicesBuffers=null,this.sampler.destroy(),this.sampler=null,this.watermarkTexture&&(this.watermarkMat.destroy(),this.watermarkMat=null,this.watermarkTexture.destroy(),this.watermarkTexture=null),this.settings=null,_w._ins=void 0}static get instance(){return _w._ins||(_w._ins=new _w),_w._ins}constructor(){this.handle=0,this.callBack=null,this.cancelAnimate=!1,this.startTime=-1,this._splashFinish=!1,this._loadFinish=!1,this._directCall=!1}}_w._ins=void 0,c.internal.SplashScreen=_w;class uw{constructor(){this._id="",this._priority=0,this._executeInEditMode=!1}set priority(e){this._priority=e}get priority(){return this._priority}set id(e){this._id=e}get id(){return this._id}static sortByPriority(e,t){return e._priority<t._priority?1:e._priority>t.priority?-1:0}init(){}update(e){}postUpdate(e){}}e("dU",uw),uw.Priority=Be({LOW:0,MEDIUM:100,HIGH:200,SCHEDULER:1<<31>>>0});const fw=new K("Scheduler");class hw{constructor(e,t,n,i){this.target=void 0,this.priority=void 0,this.paused=void 0,this.markedForDeletion=void 0,this.target=e,this.priority=t,this.paused=n,this.markedForDeletion=i}}hw.get=(e,t,n,i)=>{let o=hw._listEntries.pop();return o?(o.target=e,o.priority=t,o.paused=n,o.markedForDeletion=i):o=new hw(e,t,n,i),o},hw.put=e=>{hw._listEntries.length<20&&(e.target=null,hw._listEntries.push(e))},hw._listEntries=[];class pw{constructor(e,t,n,i){this.list=void 0,this.entry=void 0,this.target=void 0,this.callback=void 0,this.list=e,this.entry=t,this.target=n,this.callback=i}}pw.get=(e,t,n,i)=>{let o=pw._hashUpdateEntries.pop();return o?(o.list=e,o.entry=t,o.target=n,o.callback=i):o=new pw(e,t,n,i),o},pw.put=e=>{pw._hashUpdateEntries.length<20&&(e.list=e.entry=e.target=e.callback=null,pw._hashUpdateEntries.push(e))},pw._hashUpdateEntries=[];class mw{constructor(e,t,n,i,o,a){this.timers=void 0,this.target=void 0,this.timerIndex=void 0,this.currentTimer=void 0,this.currentTimerSalvaged=void 0,this.paused=void 0,this.timers=e,this.target=t,this.timerIndex=n,this.currentTimer=i,this.currentTimerSalvaged=o,this.paused=a}}mw.get=(e,t,n,i,o,a)=>{let r=mw._hashTimerEntries.pop();return r?(r.timers=e,r.target=t,r.timerIndex=n,r.currentTimer=i,r.currentTimerSalvaged=o,r.paused=a):r=new mw(e,t,n,i,o,a),r},mw.put=e=>{mw._hashTimerEntries.length<20&&(e.timers=e.target=e.currentTimer=null,mw._hashTimerEntries.push(e))},mw._hashTimerEntries=[];class dw{constructor(){this._lock=void 0,this._scheduler=void 0,this._elapsed=void 0,this._runForever=void 0,this._useDelay=void 0,this._timesExecuted=void 0,this._repeat=void 0,this._delay=void 0,this._interval=void 0,this._target=void 0,this._callback=void 0,this._lock=!1,this._scheduler=null,this._elapsed=-1,this._runForever=!1,this._useDelay=!1,this._timesExecuted=0,this._repeat=0,this._delay=0,this._interval=0,this._target=null,this._callback=null}initWithCallback(e,t,n,i,o,a){return this._lock=!1,this._scheduler=e,this._target=n,this._callback=t,this._elapsed=-1,this._interval=i,this._delay=a,this._useDelay=this._delay>0,this._repeat=o,this._runForever=this._repeat===c.macro.REPEAT_FOREVER,!0}getInterval(){return this._interval}setInterval(e){this._interval=e}update(e){-1===this._elapsed?(this._elapsed=0,this._timesExecuted=0):(this._elapsed+=e,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=1),this._callback&&!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))}getCallback(){return this._callback}trigger(){this._target&&this._callback&&(this._lock=!0,this._callback.call(this._target,this._elapsed),this._lock=!1)}cancel(){this._scheduler.unschedule(this._callback,this._target)}}dw._timers=[],dw.get=()=>dw._timers.pop()||new dw,dw.put=e=>{dw._timers.length<20&&!e._lock&&(e._scheduler=e._target=e._callback=null,dw._timers.push(e))};class vw extends uw{static enableForTarget(e){let t=!1;(e.uuid||e.id)&&(t=!0),t||(e.__instanceId?P(1513):e.id=fw.getNewId())}constructor(){super(),this._timeScale=void 0,this._updatesNegList=void 0,this._updates0List=void 0,this._updatesPosList=void 0,this._hashForUpdates=void 0,this._hashForTimers=void 0,this._currentTarget=void 0,this._currentTargetSalvaged=void 0,this._updateHashLocked=void 0,this._arrayForTimers=void 0,this._timeScale=1,this._updatesNegList=[],this._updates0List=[],this._updatesPosList=[],this._hashForUpdates=se(!0),this._hashForTimers=se(!0),this._currentTarget=null,this._currentTargetSalvaged=!1,this._updateHashLocked=!1,this._arrayForTimers=[]}setTimeScale(e){this._timeScale=e}getTimeScale(){return this._timeScale}update(e){let t,n,i,o,a;for(this._updateHashLocked=!0,1!==this._timeScale&&(e*=this._timeScale),t=0,n=this._updatesNegList,i=n.length;t<i;t++)o=n[t],o.paused||o.markedForDeletion||o.target.update(e);for(t=0,n=this._updates0List,i=n.length;t<i;t++)o=n[t],o.paused||o.markedForDeletion||o.target.update(e);for(t=0,n=this._updatesPosList,i=n.length;t<i;t++)o=n[t],o.paused||o.markedForDeletion||o.target.update(e);const r=this._arrayForTimers;for(t=0;t<r.length;t++){if(a=r[t],this._currentTarget=a,this._currentTargetSalvaged=!1,!a.paused)for(a.timerIndex=0;a.timerIndex<a.timers.length;++a.timerIndex)a.currentTimer=a.timers[a.timerIndex],a.currentTimerSalvaged=!1,a.currentTimer.update(e),a.currentTimer=null;this._currentTargetSalvaged&&0===this._currentTarget.timers.length&&(this._removeHashElement(this._currentTarget),--t)}for(t=0,n=this._updatesNegList;t<n.length;)o=n[t],o.markedForDeletion?this._removeUpdateFromHash(o):t++;for(t=0,n=this._updates0List;t<n.length;)o=n[t],o.markedForDeletion?this._removeUpdateFromHash(o):t++;for(t=0,n=this._updatesPosList;t<n.length;)o=n[t],o.markedForDeletion?this._removeUpdateFromHash(o):t++;this._updateHashLocked=!1,this._currentTarget=null}schedule(e,t,n,i,o,a){if("function"!=typeof e){const n=e;e=t,t=n}3!==arguments.length&&4!==arguments.length&&5!==arguments.length||(a=!!i,i=c.macro.REPEAT_FOREVER,o=0),D(t,1502);const r=t.uuid||t.id;if(!r)return void R(1510);let s,l,_=this._hashForTimers[r];if(_?_.paused!==a&&P(1511):(_=mw.get(null,t,0,null,null,a),this._arrayForTimers.push(_),this._hashForTimers[r]=_),null==_.timers)_.timers=[];else for(l=0;l<_.timers.length;++l)if(s=_.timers[l],s&&e===s._callback)return w(1507,s.getInterval(),n),void(s._interval=n);s=dw.get(),s.initWithCallback(this,e,t,n,i,o),_.timers.push(s),this._currentTarget===_&&this._currentTargetSalvaged&&(this._currentTargetSalvaged=!1)}scheduleUpdate(e,t,n){const i=e.uuid||e.id;if(!i)return void R(1510);const o=this._hashForUpdates[i];if(o&&o.entry){if(o.entry.priority===t)return o.entry.markedForDeletion=!1,void(o.entry.paused=n);if(this._updateHashLocked)return w(1506),o.entry.markedForDeletion=!1,void(o.entry.paused=n);this.unscheduleUpdate(e)}const a=hw.get(e,t,n,!1);let r;0===t?(r=this._updates0List,this._appendIn(r,a)):(r=t<0?this._updatesNegList:this._updatesPosList,this._priorityIn(r,a,t)),this._hashForUpdates[i]=pw.get(r,a,e,null)}unschedule(e,t){if(!t||!e)return;const n=t.uuid||t.id;if(!n)return void R(1510);const i=this._hashForTimers[n];if(i){const t=i.timers;for(let n=0,o=t.length;n<o;n++){const o=t[n];if(e===o._callback)return o!==i.currentTimer||i.currentTimerSalvaged||(i.currentTimerSalvaged=!0),t.splice(n,1),dw.put(o),i.timerIndex>=n&&i.timerIndex--,void(0===t.length&&(this._currentTarget===i?this._currentTargetSalvaged=!0:this._removeHashElement(i)))}}}unscheduleUpdate(e){if(!e)return;const t=e.uuid||e.id;if(!t)return void R(1510);const n=this._hashForUpdates[t];n&&(this._updateHashLocked?n.entry.markedForDeletion=!0:this._removeUpdateFromHash(n.entry))}unscheduleAllForTarget(e){if(!e)return;const t=e.uuid||e.id;if(!t)return void R(1510);const n=this._hashForTimers[t];if(n){const e=n.timers;e.indexOf(n.currentTimer)>-1&&!n.currentTimerSalvaged&&(n.currentTimerSalvaged=!0);for(let t=0,n=e.length;t<n;t++)dw.put(e[t]);e.length=0,this._currentTarget===n?this._currentTargetSalvaged=!0:this._removeHashElement(n)}this.unscheduleUpdate(e)}unscheduleAll(){this.unscheduleAllWithMinPriority(uw.Priority.SCHEDULER)}unscheduleAllWithMinPriority(e){let t,n;const i=this._arrayForTimers;for(t=i.length-1;t>=0;t--)n=i[t],this.unscheduleAllForTarget(n.target);let o,a=0;if(e<0)for(t=0;t<this._updatesNegList.length;)a=this._updatesNegList.length,o=this._updatesNegList[t],o&&o.priority>=e&&this.unscheduleUpdate(o.target),a===this._updatesNegList.length&&t++;if(e<=0)for(t=0;t<this._updates0List.length;)a=this._updates0List.length,o=this._updates0List[t],o&&this.unscheduleUpdate(o.target),a===this._updates0List.length&&t++;for(t=0;t<this._updatesPosList.length;)a=this._updatesPosList.length,o=this._updatesPosList[t],o&&o.priority>=e&&this.unscheduleUpdate(o.target),a===this._updatesPosList.length&&t++}isScheduled(e,t){D(e,1508),D(t,1509);const n=t.uuid||t.id;if(!n)return R(1510),!1;const i=this._hashForTimers[n];if(!i)return!1;if(null==i.timers)return!1;{const t=i.timers;for(let n=0;n<t.length;++n)if(e===t[n]._callback)return!0;return!1}}pauseAllTargets(){return this.pauseAllTargetsWithMinPriority(uw.Priority.SCHEDULER)}pauseAllTargetsWithMinPriority(e){const t=[];let n;const i=this._arrayForTimers;let o,a,r;for(o=0,a=i.length;o<a;o++)n=i[o],n&&(n.paused=!0,t.push(n.target));if(e<0)for(o=0;o<this._updatesNegList.length;o++)r=this._updatesNegList[o],r&&r.priority>=e&&(r.paused=!0,t.push(r.target));if(e<=0)for(o=0;o<this._updates0List.length;o++)r=this._updates0List[o],r&&(r.paused=!0,t.push(r.target));for(o=0;o<this._updatesPosList.length;o++)r=this._updatesPosList[o],r&&r.priority>=e&&(r.paused=!0,t.push(r.target));return t}resumeTargets(e){if(e)for(let t=0;t<e.length;t++)this.resumeTarget(e[t])}pauseTarget(e){D(e,1503);const t=e.uuid||e.id;if(!t)return void R(1510);const n=this._hashForTimers[t];n&&(n.paused=!0);const i=this._hashForUpdates[t];i&&(i.entry.paused=!0)}resumeTarget(e){D(e,1504);const t=e.uuid||e.id;if(!t)return void R(1510);const n=this._hashForTimers[t];n&&(n.paused=!1);const i=this._hashForUpdates[t];i&&(i.entry.paused=!1)}isTargetPaused(e){D(e,1505);const t=e.uuid||e.id;if(!t)return R(1510),!1;const n=this._hashForTimers[t];if(n)return n.paused;const i=this._hashForUpdates[t];return!!i&&i.entry.paused}_removeHashElement(e){const t=e.target.uuid||e.target.id;delete this._hashForTimers[t];const n=this._arrayForTimers;for(let t=0,i=n.length;t<i;t++)if(n[t]===e){n.splice(t,1);break}mw.put(e)}_removeUpdateFromHash(e){const t=e.target.uuid||e.target.id,n=this._hashForUpdates[t];if(n){const e=n.list,i=n.entry;for(let t=0,n=e.length;t<n;t++)if(e[t]===i){e.splice(t,1);break}delete this._hashForUpdates[t],hw.put(i),pw.put(n)}}_priorityIn(e,t,n){for(let i=0;i<e.length;i++)if(n<e[i].priority)return void e.splice(i,0,t);e.push(t)}_appendIn(e,t){e.push(t)}}e("es",vw),vw.ID="scheduler",c.Scheduler=vw;class gw{get width(){return this._width}get height(){return this._height}get framebuffer(){return this._framebuffer}get shouldSyncSizeWithSwapchain(){return this._shouldSyncSizeWithSwapchain}get hasOnScreenAttachments(){return this._hasOnScreenAttachments}get hasOffScreenAttachments(){return this._hasOffScreenAttachments}get cameras(){return this._cameras}static registerCreateFunc(e){e._createWindowFun=e=>new gw(e)}get native(){return this._nativeObj}constructor(e){this._title="",this._width=1,this._height=1,this._renderPass=null,this._colorTextures=[],this._depthStencilTexture=null,this._swapchainBufferIndices=0,this._shouldSyncSizeWithSwapchain=!1,this._cameras=[],this._hasOnScreenAttachments=!1,this._hasOffScreenAttachments=!1,this._framebuffer=null}_setHasOffScreenAttachments(e){this._hasOffScreenAttachments=e,this._nativeObj.hasOffScreenAttachments=e}_setHasOnScreenAttachments(e){this._hasOnScreenAttachments=e,this._nativeObj.hasOnScreenAttachments=e}_createFrameBuffer(e,t){this._framebuffer=e.createFramebuffer(new sr(t,this._colorTextures,this._depthStencilTexture)),this._nativeObj.frameBuffer=this._framebuffer}_init(){this._nativeObj=new to}initialize(e,t){this._init(),void 0!==t.title&&(this._title=t.title),void 0!==t.swapchainBufferIndices&&(this._swapchainBufferIndices=t.swapchainBufferIndices),void 0!==t.shouldSyncSizeWithSwapchain&&(this._shouldSyncSizeWithSwapchain=t.shouldSyncSizeWithSwapchain),this._width=t.width,this._height=t.height;const{colorAttachments:n,depthStencilAttachment:i}=t.renderPassInfo;for(let t=0;t<n.length;t++)n[t].format===Bo.UNKNOWN&&(n[t].format=e.colorFormat);i&&i.format===Bo.UNKNOWN&&(i.format=e.depthStencilFormat),this._renderPass=e.createRenderPass(t.renderPassInfo);for(let t=0;t<n.length;t++){let i=null;this._swapchainBufferIndices&1<<t?this._setHasOnScreenAttachments(!0):(i=e.createTexture(new Ua(qo.TEX2D,Yo.COLOR_ATTACHMENT|Yo.SAMPLED,n[t].format,this._width,this._height)),this._setHasOffScreenAttachments(!0)),this._colorTextures.push(i)}return i?this._swapchainBufferIndices>=0&&(this._depthStencilTexture=e.createTexture(new Ua(qo.TEX2D,Yo.DEPTH_STENCIL_ATTACHMENT|Yo.SAMPLED,i.format,this._width,this._height)),this._setHasOffScreenAttachments(!0)):this._setHasOnScreenAttachments(!0),this._createFrameBuffer(e,this._renderPass),!0}_destroy(){this.framebuffer.destroy(),this._nativeObj=null}destroy(){this.clearCameras(),this._depthStencilTexture&&(this._depthStencilTexture.destroy(),this._depthStencilTexture=null);for(let e=0;e<this._colorTextures.length;e++){const t=this._colorTextures[e];t&&t.destroy()}this._colorTextures.length=0,this._destroy()}resize(e,t){this._width=e,this._height=t;let n=!1;this._depthStencilTexture&&(this._depthStencilTexture.resize(e,t),n=!0);for(let i=0;i<this._colorTextures.length;i++){const o=this._colorTextures[i];o&&(o.resize(e,t),n=!0)}const i=this.framebuffer;n&&i&&(i.destroy(),i.initialize(new sr(this._renderPass,this._colorTextures,this._depthStencilTexture)));for(const n of this._cameras)n.isWindowSize&&n.resize(e,t)}extractRenderCameras(e){for(let t=0;t<this._cameras.length;t++){const n=this._cameras[t];n.enabled&&(n.update(),e.push(n))}}attachCamera(e){for(let t=0;t<this._cameras.length;t++)if(this._cameras[t]===e)return;this._cameras.push(e),this.sortCameras()}detachCamera(e){for(let t=0;t<this._cameras.length;++t)if(this._cameras[t]===e)return void this._cameras.splice(t,1)}clearCameras(){this._cameras.length=0}sortCameras(){this._cameras.sort(((e,t)=>e.priority-t.priority))}}class yw{_init(){this._naitveObj=new ro}_destroy(){this._naitveObj=null}_setCumulativeTime(e){this._cumulativeTime+=e,this._naitveObj.cumulativeTime=this._cumulativeTime}_setFrameTime(e){this._frameTime=e,this._naitveObj.frameTime=e}get device(){return this._device}get mainWindow(){return this._mainWindow}set curWindow(e){this._curWindow=e}get curWindow(){return this._curWindow}set tempWindow(e){this._tempWindow=e}get tempWindow(){return this._tempWindow}get windows(){return this._windows}get pipeline(){return this._pipeline}get batcher2D(){return this._batcher}get scenes(){return this._scenes}get cumulativeTime(){return this._cumulativeTime}get frameTime(){return this._frameTime}get frameCount(){return this._frameCount}get fps(){return this._fps}set fixedFPS(e){e>0?(this._fixedFPS=e,this._fixedFPSFrameTime=1e3/e):this._fixedFPSFrameTime=0}get fixedFPS(){return this._fixedFPS}get dataPoolManager(){return this._dataPoolMgr}get useDeferredPipeline(){return this._useDeferredPipeline}constructor(e){this._createSceneFun=null,this._createWindowFun=null,this._device=void 0,this._windows=[],this._mainWindow=null,this._curWindow=null,this._tempWindow=null,this._pipeline=null,this._batcher=null,this._dataPoolMgr=void 0,this._scenes=[],this._modelPools=new Map,this._cameraPool=null,this._lightPools=new Map,this._fpsTime=0,this._frameCount=0,this._fps=0,this._fixedFPS=0,this._useDeferredPipeline=!1,this._fixedFPSFrameTime=0,this._cumulativeTime=0,this._frameTime=0,this._device=e,this._dataPoolMgr=c.internal.DataPoolManager&&new c.internal.DataPoolManager(e),uv.registerCreateFunc(this),gw.registerCreateFunc(this),this._cameraPool=new V((()=>new ym(this._device)),4)}initialize(e){this._init();const t=new $a,n=new er;n.depthStoreOp=aa.DISCARD,n.stencilStoreOp=aa.DISCARD;const i=new or([t],n);return this._mainWindow=this.createWindow({title:"rootMainWindow",width:this._device.width,height:this._device.height,renderPassInfo:i,swapchainBufferIndices:-1}),this._curWindow=this._mainWindow,Promise.resolve(Yd.initBuiltinRes(this._device)).then((()=>{c.view.on("design-resolution-changed",(()=>{const e=c.game.canvas.width,t=c.game.canvas.height;this.resize(e,t)}),this)}))}destroy(){this.destroyScenes(),this._pipeline&&(this._pipeline.destroy(),this._pipeline=null),this._batcher&&(this._batcher.destroy(),this._batcher=null),this._curWindow=null,this._mainWindow=null,this.dataPoolManager.clear(),this._destroy()}resize(e,t){this._device.resize(e,t),this._mainWindow.resize(e,t);for(const n of this._windows)n.shouldSyncSizeWithSwapchain&&n.resize(e,t);this._pipeline&&this._pipeline.resize(e,t)}setRenderPipeline(e){if(e instanceof yE&&(this._useDeferredPipeline=!0),e||(e=uE()),this._pipeline=e,!this._pipeline.activate())return!1;const t=c.director.getScene();return t&&t.globals.activate(),this.onGlobalPipelineStateChanged(),!(!this._batcher&&c.internal.Batcher2D&&(this._batcher=new c.internal.Batcher2D(this),!this._batcher.initialize())&&(this.destroy(),1))}onGlobalPipelineStateChanged(){for(let e=0;e<this._scenes.length;e++)this._scenes[e].onGlobalPipelineStateChanged();this._pipeline.pipelineSceneData.onGlobalPipelineStateChanged()}activeWindow(e){this._curWindow=e}resetCumulativeTime(){this._setCumulativeTime(0)}frameMove(e){this._setFrameTime(e),++this._frameCount,this._setCumulativeTime(e),this._fpsTime+=e,this._fpsTime>1&&(this._fps=this._frameCount,this._frameCount=0,this._fpsTime=0);for(let e=0;e<this._scenes.length;++e)this._scenes[e].removeBatches();this._batcher&&this._batcher.update();const t=this._windows,n=[];for(let e=0;e<t.length;e++)t[e].extractRenderCameras(n);if(this._pipeline&&n.length>0){this._device.acquire();const e=this._scenes,t=c.director.getTotalFrames();this._batcher&&this._batcher.uploadBuffers();for(let n=0;n<e.length;n++)e[n].update(t);c.director.emit(c.Director.EVENT_BEFORE_COMMIT),n.sort(((e,t)=>e.priority-t.priority)),this._pipeline.render(n),this._device.present()}this._batcher&&this._batcher.reset()}createWindow(e){const t=this._createWindowFun(this);return t.initialize(this.device,e),this._windows.push(t),t}destroyWindow(e){for(let t=0;t<this._windows.length;++t)if(this._windows[t]===e)return e.destroy(),void this._windows.splice(t,1)}destroyWindows(){for(const e of this._windows)e.destroy();this._windows=[]}createScene(e){const t=this._createSceneFun(this);return t.initialize(e),this._scenes.push(t),t}destroyScene(e){for(let t=0;t<this._scenes.length;++t)if(this._scenes[t]===e)return e.destroy(),void this._scenes.splice(t,1)}destroyScenes(){for(const e of this._scenes)e.destroy();this._scenes=[]}createModel(e){let t=this._modelPools.get(e);t||(this._modelPools.set(e,new V((()=>new e),10)),t=this._modelPools.get(e));const n=t.alloc();return n.initialize(),n}destroyModel(e){const t=this._modelPools.get(e.constructor);t?(t.free(e),e.destroy(),e.scene&&e.scene.removeModel(e)):P(1300,e.constructor.name)}createCamera(){return this._cameraPool.alloc()}createLight(e){let t=this._lightPools.get(e);t||(this._lightPools.set(e,new V((()=>new e),4)),t=this._lightPools.get(e));const n=t.alloc();return n.initialize(),n}destroyLight(e){const t=this._lightPools.get(e.constructor);if(e.destroy(),t&&(t.free(e),e.scene))switch(e.type){case mv.SPHERE:e.scene.removeSphereLight(e);break;case mv.SPOT:e.scene.removeSpotLight(e)}}}c.Root=yw;class Aw extends Yt{constructor(){super(),this._compScheduler=void 0,this._nodeActivator=void 0,this._invalid=void 0,this._paused=void 0,this._root=void 0,this._loadingScene=void 0,this._scene=void 0,this._totalFrames=void 0,this._scheduler=void 0,this._systems=void 0,this._invalid=!1,this._paused=!1,this._root=null,this._loadingScene="",this._scene=null,this._totalFrames=0,this._scheduler=new vw,this._compScheduler=new US,this._nodeActivator=new XS,this._systems=[],ew.once($E.EVENT_RENDERER_INITED,this._initOnRendererInitialized,this)}calculateDeltaTime(e){}convertToGL(e){const t=ew.container,n=c.view,i=t.getBoundingClientRect(),o=i.left+window.pageXOffset-t.clientLeft,a=i.top+window.pageYOffset-t.clientTop,r=n._devicePixelRatio*(e.x-o),s=n._devicePixelRatio*(a+i.height-e.y);return n._isRotated?_i(n._viewportRect.width-s,r):_i(r,s)}convertToUI(e){const t=ew.container,n=c.view,i=t.getBoundingClientRect(),o=i.left+window.pageXOffset-t.clientLeft,a=i.top+window.pageYOffset-t.clientTop,r=_i(0,0);return n._isRotated?(r.x=o+e.y/n._devicePixelRatio,r.y=a+i.height-(n._viewportRect.width-e.x)/n._devicePixelRatio):(r.x=o+e.x*n._devicePixelRatio,r.y=a+i.height-e.y*n._devicePixelRatio),r}end(){this.once(Aw.EVENT_END_FRAME,(()=>{this.purgeDirector()}))}pause(){this._paused||(this._paused=!0)}purgeDirector(){this._scheduler.unscheduleAll(),this._compScheduler.unscheduleAll(),this._nodeActivator.reset(),qg&&qg.setEnabled(!1),c.isValid(this._scene)&&this._scene.destroy(),this._scene=null,this.stopAnimation(),c.assetManager.releaseAll()}reset(){this.purgeDirector(),this.emit(Aw.EVENT_RESET),qg&&qg.setEnabled(!0),this.startAnimation()}runSceneImmediate(e,t,n){e instanceof JS&&(e=e.scene),D(e instanceof bS,1216),e._load();const i=Object.keys(ew._persistRootNodes).map((e=>ew._persistRootNodes[e]));for(let t=0;t<i.length;t++){const n=i[t];n.emit(c.Node.SCENE_CHANGED_FOR_PERSISTS,e.renderScene);const o=e.uuid===n._originalSceneId&&e.getChildByUuid(n.uuid);if(o){const t=o.getSiblingIndex();o._destroyImmediate(),e.insertChild(n,t)}else n.parent=e}const o=this._scene;c.isValid(o)&&o.destroy(),c.assetManager._releaseManager._autoRelease(o,e,ew._persistRootNodes),this._scene=null,Lt._deferredDestroy(),t&&t(),this.emit(c.Director.EVENT_BEFORE_SCENE_LAUNCH,e),this._scene=e,e._activate(),this._root&&this._root.resetCumulativeTime(),this.startAnimation(),n&&n(null,e),this.emit(c.Director.EVENT_AFTER_SCENE_LAUNCH,e)}runScene(e,t,n){e instanceof JS&&(e=e.scene),D(e,1205),D(e instanceof bS,1216),e._load(),this.once(c.Director.EVENT_END_FRAME,(()=>{this.runSceneImmediate(e,t,n)}))}loadScene(e,t,n){if(this._loadingScene)return P(1208,e,this._loadingScene),!1;const i=c.assetManager.bundles.find((t=>!!t.getSceneInfo(e)));return i?(this.emit(c.Director.EVENT_BEFORE_SCENE_LOADING,e),this._loadingScene=e,console.time(`LoadScene ${e}`),i.loadScene(e,((i,o)=>{console.timeEnd(`LoadScene ${e}`),this._loadingScene="",i?(y(i),t&&t(i)):this.runSceneImmediate(o,n,t)})),!0):(R(1209,e),!1)}preloadScene(e,t,n){const i=c.assetManager.bundles.find((t=>!!t.getSceneInfo(e)));if(i)i.preloadScene(e,null,t,n);else{const t=`Can not preload the scene "${e}" because it is not in the build settings.`;n&&n(new Error(t)),y(`preloadScene: ${t}`)}}resume(){this._paused&&(this._paused=!1)}get root(){return this._root}getScene(){return this._scene}getDeltaTime(){return ew.deltaTime}getTotalTime(){return ew.totalTime}getCurrentTime(){return ew.frameStartTime}getTotalFrames(){return this._totalFrames}isPaused(){return this._paused}getScheduler(){return this._scheduler}setScheduler(e){this._scheduler!==e&&(this.unregisterSystem(this._scheduler),this._scheduler=e,this.registerSystem(vw.ID,e,200))}registerSystem(e,t,n){t.id=e,t.priority=n,t.init(),this._systems.push(t),this._systems.sort(uw.sortByPriority)}unregisterSystem(e){Le.fastRemove(this._systems,e),this._systems.sort(uw.sortByPriority)}getSystem(e){return this._systems.find((t=>t.id===e))}getAnimationManager(){return this.getSystem(c.AnimationManager.ID)}startAnimation(){this._invalid=!1}stopAnimation(){this._invalid=!0}mainLoop(e){let t;t=ew._calculateDT(e),this.tick(t)}tick(e){if(!this._invalid){if(this.emit(Aw.EVENT_BEGIN_FRAME),qE.frameDispatchEvents(),!this._paused){this.emit(Aw.EVENT_BEFORE_UPDATE),this._compScheduler.startPhase(),this._compScheduler.updatePhase(e);for(let t=0;t<this._systems.length;++t)this._systems[t].update(e);this._compScheduler.lateUpdatePhase(e),this.emit(Aw.EVENT_AFTER_UPDATE),Lt._deferredDestroy();for(let t=0;t<this._systems.length;++t)this._systems[t].postUpdate(e)}this.emit(Aw.EVENT_BEFORE_DRAW),this._root.frameMove(e),this.emit(Aw.EVENT_AFTER_DRAW),qg.frameUpdateListeners(),ky.resetHasChangedFlags(),ky.clearNodeArray(),this.emit(Aw.EVENT_END_FRAME),this._totalFrames++}}_initOnRendererInitialized(){this._totalFrames=0,this._paused=!1,qg&&qg.setEnabled(!0),this.registerSystem(vw.ID,this._scheduler,200),this.emit(Aw.EVENT_INIT)}_init(){return this._root=new yw(ew._gfxDevice),this._root.initialize({}).catch((e=>(R(1217),Promise.reject(e))))}}e("cR",Aw),Aw.EVENT_INIT="director_init",Aw.EVENT_RESET="director_reset",Aw.EVENT_BEFORE_SCENE_LOADING="director_before_scene_loading",Aw.EVENT_BEFORE_SCENE_LAUNCH="director_before_scene_launch",Aw.EVENT_AFTER_SCENE_LAUNCH="director_after_scene_launch",Aw.EVENT_BEFORE_UPDATE="director_before_update",Aw.EVENT_AFTER_UPDATE="director_after_update",Aw.EVENT_BEFORE_DRAW="director_before_draw",Aw.EVENT_AFTER_DRAW="director_after_draw",Aw.EVENT_BEFORE_COMMIT="director_before_commit",Aw.EVENT_BEFORE_PHYSICS="director_before_physics",Aw.EVENT_AFTER_PHYSICS="director_after_physics",Aw.EVENT_BEGIN_FRAME="director_begin_frame",Aw.EVENT_END_FRAME="director_end_frame",Aw.instance=void 0,c.Director=Aw;const xw=e("cQ",Aw.instance=c.director=new Aw),bw={};an(bw,"vmath",[{name:"vec2",newName:"Vec2",target:gi,targetName:"math"},{name:"vec3",newName:"Vec3",target:gi,targetName:"math"},{name:"vec4",newName:"Vec4",target:gi,targetName:"math"},{name:"quat",newName:"Quat",target:gi,targetName:"math"},{name:"mat3",newName:"Mat3",target:gi,targetName:"math"},{name:"mat4",newName:"Mat4",target:gi,targetName:"math"},{name:"color4",newName:"Color",target:gi,targetName:"math"},{name:"rect",newName:"Rect",target:gi,targetName:"math"},{name:"approx",newName:"approx",target:gi,targetName:"math"},{name:"EPSILON",newName:"EPSILON",target:gi,targetName:"math"},{name:"equals",newName:"equals",target:gi,targetName:"math"},{name:"clamp",newName:"clamp",target:gi,targetName:"math"},{name:"clamp01",newName:"clamp01",target:gi,targetName:"math"},{name:"lerp",newName:"lerp",target:gi,targetName:"math"},{name:"toRadian",newName:"toRadian",target:gi,targetName:"math"},{name:"toDegree",newName:"toDegree",target:gi,targetName:"math"},{name:"random",newName:"random",target:gi,targetName:"math"},{name:"randomRange",newName:"randomRange",target:gi,targetName:"math"},{name:"randomRangeInt",newName:"randomRangeInt",target:gi,targetName:"math"},{name:"pseudoRandom",newName:"pseudoRandom",target:gi,targetName:"math"},{name:"pseudoRandomRangeInt",newName:"pseudoRandomRangeInt",target:gi,targetName:"math"},{name:"nextPow2",newName:"nextPow2",target:gi,targetName:"math"},{name:"repeat",newName:"repeat",target:gi,targetName:"math"},{name:"pingPong",newName:"pingPong",target:gi,targetName:"math"},{name:"inverseLerp",newName:"inverseLerp",target:gi,targetName:"math"}]),c.vmath=bw,an(vw.prototype,"Scheduler.prototype",[{name:"enableForTarget",newName:"enableForTarget",target:vw,targetName:"Scheduler"}]),an(vw,"Scheduler",[{name:"PRIORITY_SYSTEM",newName:"System.Priority.SCHEDULER",customGetter:()=>uw.Priority.SCHEDULER}]),rn(vw,"Scheduler",[{name:"PRIORITY_NON_SYSTEM",suggest:"Use enum` System.Priority` instead"}]),an(FE.prototype,"EventTouch.prototype",[{name:"getUILocationInView",newName:"getLocationInView",target:FE,targetName:"EventTouch"}]),an(tv.prototype,"SubModel.prototype",[{name:"subMeshData",newName:"subMesh"}]),rn(tv.prototype,"SubModel.prototype",[{name:"getSubModel",suggest:"Use `subModels[i]` instead"},{name:"subModelNum",suggest:"Use `subModels.length` instead"}]),an(yw.prototype,"Root.prototype",[{name:"ui",newName:"batcher2D"}]),sn(ew,"game",[{name:"collisionMatrix"},{name:"groupList"}]),sn(Aw.prototype,"director",[{name:"calculateDeltaTime"},{name:"getDeltaTime",suggest:"Use game.deltaTime instead"},{name:"getTotalTime",suggest:"Use game.totalTime instead"},{name:"getCurrentTime",suggest:"Use game.frameStartTime instead"}]),rn(Aw.prototype,"director",[{name:"setAnimationInterval",suggest:"please use game.frameRate instead"},{name:"getAnimationInterval",suggest:"please use game.frameRate instead"},{name:"getRunningScene",suggest:"please use getScene instead"},{name:"setDepthTest",suggest:"please use camera API instead"},{name:"setClearColor",suggest:"please use camera API instead"},{name:"getWinSize",suggest:"please use view.getVisibleSize instead"},{name:"getWinSizeInPixels"},{name:"purgeCachedData",suggest:"please use assetManager.releaseAll instead"}]);class Cw{constructor(){this.name="",this.base="",this.importBase="",this.nativeBase="",this.deps=null,this.assetInfos=new Al,this.scenes=new Al,this.paths=new Al}init(e){(e=>{let t=e.uuids;const n=e.paths,i=e.types,o=e.deps,a=e.paths=Object.create(null);if(!1===e.debug){for(let e=0,n=t.length;e<n;e++)t[e]=Fl(t[e]);for(const e in n){const t=n[e],o=t[1];t[1]=i[o]}}else{const e=Object.create(null);for(let n=0,i=t.length;n<i;n++){const i=t[n];t[n]=e[i]=Fl(i)}t=e}for(const e in n){const i=n[e];a[t[e]]=i}const r=e.scenes;for(const e in r){const n=r[e];r[e]=t[n]}const s=e.packs;for(const e in s){const n=s[e];for(let e=0;e<n.length;++e)n[e]=t[n[e]]}const c=e.versions;if(c)for(const e in c){const n=c[e];for(let e=0;e<n.length;e+=2){const i=n[e];n[e]=t[i]||i}}const l=e.redirect;if(l)for(let e=0;e<l.length;e+=2)l[e]=t[l[e]],l[e+1]=o[l[e+1]];if(e.extensionMap)for(const n in e.extensionMap)Object.prototype.hasOwnProperty.call(e.extensionMap,n)&&e.extensionMap[n].forEach(((i,o)=>{e.extensionMap[n][o]=t[i]||i}))})(e),this.importBase=e.importBase||"",this.nativeBase=e.nativeBase||"",this.base=e.base||"",this.name=e.name||"",this.deps=e.deps||[],this._initUuid(e.uuids),this._initPath(e.paths),this._initScene(e.scenes),this._initPackage(e.packs),this._initVersion(e.versions),this._initRedirect(e.redirect);for(const t in e.extensionMap)Object.prototype.hasOwnProperty.call(e.extensionMap,t)&&e.extensionMap[t].forEach((e=>{const n=this.assetInfos.get(e);n&&(n.extension=t)}))}getInfoWithPath(e,t){if(!e)return null;e=Gl(e);const n=this.paths.get(e);if(n){if(!t)return n[0];for(let e=0,i=n.length;e<i;e++){const i=n[e];if(Fe.isChildClassOf(i.ctor,t))return i}}return null}getDirWithPath(e,t,n){"/"===(e=Gl(e))[e.length-1]&&(e=e.slice(0,-1));const i=n||[];return this.paths.forEach(((n,o)=>{if(o.startsWith(e)&&((e,t)=>!(e.length>t.length)||47===e.charCodeAt(t.length))(o,e)||!e)for(let e=0,o=n.length;e<o;e++){const o=n[e];t&&!Fe.isChildClassOf(o.ctor,t)||i.push(o)}})),i}getAssetInfo(e){return this.assetInfos.get(e)||null}getSceneInfo(e){return e.endsWith(".scene")||(e+=".scene"),"/"===e[0]||e.startsWith("db://")||(e=`/${e}`),this.scenes.find(((t,n)=>n.endsWith(e)))}destroy(){this.paths.destroy(),this.scenes.destroy(),this.assetInfos.destroy()}_initUuid(e){if(e){this.assetInfos.clear();for(let t=0,n=e.length;t<n;t++){const n=e[t];this.assetInfos.add(n,{uuid:n})}}}_initPath(e){if(!e)return;const t=this.paths;t.clear();for(const n in e){const i=e[n],o=i[0],a=i[1],r=3===i.length,s=this.assetInfos.get(n);s.path=o,s.ctor=Fe._getClassById(a),t.has(o)?r?t.get(o).push(s):t.get(o).unshift(s):t.add(o,[s])}}_initScene(e){if(!e)return;const t=this.scenes;t.clear();const n=this.assetInfos;for(const i in e){const o=e[i],a=n.get(o);a.url=i,t.add(i,a)}}_initPackage(e){if(!e)return;const t=this.assetInfos;for(const n in e){const i=e[n],o={uuid:n,packedUuids:i,ext:".json"};t.add(n,o);for(let e=0,n=i.length;e<n;e++){const a=i[e],r=t.get(a),s=r.packs;s?1===n?s.unshift(o):s.push(o):r.packs=[o]}}}_initVersion(e){if(!e)return;const t=this.assetInfos;let n=e.import;if(n)for(let e=0,i=n.length;e<i;e+=2){const i=n[e];t.get(i).ver=n[e+1]}if(n=e.native,n)for(let e=0,i=n.length;e<i;e+=2){const i=n[e];t.get(i).nativeVer=n[e+1]}}_initRedirect(e){if(!e)return;const t=this.assetInfos;for(let n=0,i=e.length;n<i;n+=2){const i=e[n];t.get(i).redirect=e[n+1]}}}function Sw(e,t){e._uuid&&t.push(e._uuid)}function Ew(e,t){const n=Object.getOwnPropertyNames(e);for(let i=0;i<n.length;i++){const o=n[i];if("node"===o||"__eventTargets"===o)continue;const a=e[o];if("object"==typeof a&&a)if(Array.isArray(a))for(let e=0;e<a.length;e++){const n=a[e];n instanceof $l&&Sw(n,t)}else if(a.constructor&&a.constructor!==Object)a instanceof $l&&Sw(a,t);else{const e=Object.getOwnPropertyNames(a);for(let n=0;n<e.length;n++){const i=a[e[n]];i instanceof $l&&Sw(i,t)}}}}function ww(e,t){for(let n=0;n<e._components.length;n++)Ew(e._components[n],t);for(let n=0;n<e._children.length;n++)ww(e._children[n],t)}function Tw(e,t,n,i){n.push(e._uuid);const o=nd.getDeps(e._uuid);for(let e=0,a=o.length;e<a;e++){const a=bl.get(o[e]);if(!a)continue;const r=a._uuid;r in t?t[r]+=i:t[r]=a.refCount+i,n.includes(r)||Tw(a,t,n,i)}}const Pw=[];var Iw=new class{constructor(){this._persistNodeDeps=new Al,this._toDelete=new Al,this._eventListener=!1}init(){this._persistNodeDeps.clear(),this._toDelete.clear()}_addPersistNodeRef(e){const t=[];ww(e,t);for(let e=0,n=t.length;e<n;e++){const n=bl.get(t[e]);n&&n.addRef()}this._persistNodeDeps.add(e.uuid,t)}_removePersistNodeRef(e){if(!this._persistNodeDeps.has(e.uuid))return;const t=this._persistNodeDeps.get(e.uuid);for(let e=0,n=t.length;e<n;e++){const n=bl.get(t[e]);n&&n.decRef()}this._persistNodeDeps.remove(e.uuid)}_autoRelease(e,t,n){if(e){const n=nd.getDeps(e.uuid);for(let t=0,i=n.length;t<i;t++){const i=bl.get(n[t]);i&&i.decRef(e.autoReleaseAssets)}const i=nd._depends.get(e.uuid);if(i&&i.persistDeps){const t=i.persistDeps;for(let n=0,i=t.length;n<i;n++){const i=bl.get(t[n]);i&&i.decRef(e.autoReleaseAssets)}}e.uuid!==t.uuid&&nd.remove(e.uuid)}const i=nd._depends.get(t.uuid);i&&(i.persistDeps=[]);for(const e in n){const t=n[e],o=this._persistNodeDeps.get(t.uuid);for(const e of o){const t=bl.get(e);t&&t.addRef()}i&&i.persistDeps.push(...o)}}tryRelease(e,t=!1){e instanceof $l&&(t?this._free(e,t):(this._toDelete.add(e._uuid,e),this._eventListener||(this._eventListener=!0,Je(this._freeAssets.bind(this)))))}_freeAssets(){this._eventListener=!1,this._toDelete.forEach((e=>{this._free(e)})),this._toDelete.clear()}_free(e,t=!1){const n=e._uuid;if(this._toDelete.remove(n),!Ut(e,!0))return;if(!t&&e.refCount>0&&function(e){const t=Object.create(null);if(t[e._uuid]=e.refCount,Tw(e,t,Pw,-1),Pw.length=0,0!==t[e._uuid])return t[e._uuid];for(const e in t)0!==t[e]&&Tw(bl.get(e),t,Pw,1);return Pw.length=0,t[e._uuid]}(e)>0)return;bl.remove(n);const i=nd.getDeps(n);for(let e=0,t=i.length;e<t;e++){const t=bl.get(i[e]);t&&(t.decRef(!1),this._free(t,!1))}e.destroy(),nd.remove(n)}};let Rw=null;function Nw(e,t){for(let n=0,i=e.input.length;n<i;n++){const i=e.input[n];t&&!i.isNative&&i.content instanceof $l&&i.content.decRef(!1),i.recycle()}e.input=null}function Dw(e,t){return t?/\?/.test(e)?`${e}&_t=${Date.now()}`:`${e}?_t=${Date.now()}`:e}function Mw(e,t,n,i,o=0){e(o,((a,r)=>{o++,!a||o>t?i&&i(a,r):setTimeout((()=>{Mw(e,t,n,i,o)}),n)}))}function Ow(e,t,n,i,o){try{const a=nd.parse(e,t);for(let e=0,t=a.deps.length;e<t;e++){const t=a.deps[e];t in n||(n[t]=!0,i.push({uuid:t,bundle:o&&o.name}))}a.nativeDep&&(o&&(a.nativeDep.bundle=o.name),i.push({...a.nativeDep}))}catch(e){y(e.message,e.stack)}}function zw(e,t,n){t&&(n=void 0!==n?n:c.assetManager.cacheAsset,jl(t)||!n||t.isDefault||bl.add(e,t))}function Lw(e,t,n){let i=0;const o=[],a=e.length;0===a&&n&&n(o);const r=e=>{e&&o.push(e),i++,i===a&&n&&n(o)};for(let n=0;n<a;n++)t(e[n],r)}function Fw(e,t,n){let i=e,o=t,a=n;if(void 0===n){const n="function"==typeof e;t?(a=t,n||(o=null)):void 0===t&&n&&(a=e,i=null,o=null),void 0!==t&&n&&(o=e,i=null)}return{options:i||Object.create(null),onProgress:o,onComplete:a}}function Uw(e,t,n){let i=e,o=t,a=n;if(void 0===n){const n=Fe.isChildClassOf(e,$l);t?(a=t,n&&(o=null)):void 0!==t||n||(a=e,o=null,i=null),void 0===t||n||(o=e,i=null)}return{type:i,onProgress:o||Rw,onComplete:a}}function Bw(e,t,n,i={}){if(!n[t]||i[t])return!1;i[t]=!0;let o=!1;const a=nd.getDeps(t);if(a)for(let t=0,r=a.length;t<r;t++){const r=a[t];if(r===e||Bw(e,r,n,i)){o=!0;break}}return o}function kw(e){return(t,n)=>{if(!e)return;const i=[];Array.isArray(n)?n.forEach((e=>e instanceof $l&&i.push(e.addRef()))):n instanceof $l&&i.push(n.addRef()),Je((()=>{i.forEach((e=>e.decRef(!1))),e(t,n)}))}}class jw{constructor(){this._config=new Cw}get config(){return this._config}get name(){return this._config.name}get deps(){return this._config.deps}get base(){return this._config.base}getInfoWithPath(e,t){return this._config.getInfoWithPath(e,t)}getDirWithPath(e,t,n){return this._config.getDirWithPath(e,t,n)}getAssetInfo(e){return this._config.getAssetInfo(e)}getSceneInfo(e){return this._config.getSceneInfo(e)}init(e){this._config.init(e),El.add(e.name,this)}load(e,t,n,i){const{type:o,onProgress:a,onComplete:r}=Uw(t,n,i),s={__requestType__:Il.PATH,type:o,bundle:this.name,__outputAsArray__:Array.isArray(e)};c.assetManager.loadAny(e,s,a,r)}preload(e,t,n,i){const{type:o,onProgress:a,onComplete:r}=Uw(t,n,i);c.assetManager.preloadAny(e,{__requestType__:Il.PATH,type:o,bundle:this.name},a,r)}loadDir(e,t,n,i){const{type:o,onProgress:a,onComplete:r}=Uw(t,n,i);c.assetManager.loadAny(e,{__requestType__:Il.DIR,type:o,bundle:this.name,__outputAsArray__:!0},a,r)}preloadDir(e,t,n,i){const{type:o,onProgress:a,onComplete:r}=Uw(t,n,i);c.assetManager.preloadAny(e,{__requestType__:Il.DIR,type:o,bundle:this.name},a,r)}loadScene(e,t,n,i){const{options:o,onProgress:a,onComplete:r}=Fw(t,n,i);o.preset=o.preset||"scene",o.bundle=this.name,c.assetManager.loadAny({scene:e},o,a,((e,t)=>{if(e)y(e.message,e.stack);else if(t instanceof JS&&t.scene){const e=t.scene;e._id=t._uuid,e.name=t.name}else e=new Error(`The asset ${t._uuid} is not a scene`);r&&r(e,t)}))}preloadScene(e,t,n,i){const{options:o,onProgress:a,onComplete:r}=Fw(t,n,i);o.bundle=this.name,c.assetManager.preloadAny({scene:e},o,a,(t=>{t&&R(1210,e,t.message),r&&r(t)}))}get(e,t){const n=this.getInfoWithPath(e,t);return n&&bl.get(n.uuid)||null}release(e,t){const n=this.get(e,t);n&&Iw.tryRelease(n,!0)}releaseUnusedAssets(){bl.forEach((e=>{const t=this.getAssetInfo(e._uuid);t&&!t.redirect&&Iw.tryRelease(e)}))}releaseAll(){bl.forEach((e=>{const t=this.getAssetInfo(e._uuid);t&&!t.redirect&&Iw.tryRelease(e,!0)}))}_destroy(){this._config.destroy()}}const Gw=e("fH",new jw);function Vw(e,t,n){const i=new Image;function o(){i.removeEventListener("load",o),i.removeEventListener("error",a),n&&n(null,i)}function a(){i.removeEventListener("load",o),i.removeEventListener("error",a),n&&n(new Error(O(4930,e)))}return"file:"!==window.location.protocol&&(i.crossOrigin="anonymous"),i.addEventListener("load",o),i.addEventListener("error",a),i.src=e,i}function Hw(e,t,n,i){const o=new XMLHttpRequest,a=`download failed: ${e}, status: `;if(o.open("GET",e,!0),void 0!==t.xhrResponseType&&(o.responseType=t.xhrResponseType),void 0!==t.xhrWithCredentials&&(o.withCredentials=t.xhrWithCredentials),void 0!==t.xhrMimeType&&o.overrideMimeType&&o.overrideMimeType(t.xhrMimeType),void 0!==t.xhrTimeout&&(o.timeout=t.xhrTimeout),t.xhrHeader)for(const e in t.xhrHeader)o.setRequestHeader(e,t.xhrHeader[e]);return o.onload=()=>{200===o.status||0===o.status?i&&i(null,o.response):i&&i(new Error(`${a}${o.status}(no response)`))},n&&(o.onprogress=e=>{e.lengthComputable&&n(e.loaded,e.total)}),o.onerror=()=>{i&&i(new Error(`${a}${o.status}(error)`))},o.ontimeout=()=>{i&&i(new Error(`${a}${o.status}(time out)`))},o.onabort=()=>{i&&i(new Error(`${a}${o.status}(abort)`))},o.send(null),o}c.resources=Gw;const Ww={};function qw(e,t,n){if(Ww[e])return n&&n(null),null;const i=document.createElement("script");function o(){i.parentNode.removeChild(i),i.removeEventListener("load",o,!1),i.removeEventListener("error",a,!1),Ww[e]=!0,n&&n(null)}function a(){i.parentNode.removeChild(i),i.removeEventListener("load",o,!1),i.removeEventListener("error",a,!1),n&&n(new Error(O(4928,e)))}return"file:"!==window.location.protocol&&(i.crossOrigin="anonymous"),i.async=t.scriptAsyncLoading||!1,i.src=e,i.addEventListener("load",o,!1),i.addEventListener("error",a,!1),document.body.appendChild(i),i}const Yw=/^(?:\w+:\/\/|\.+\/).+/,Xw=(e,t,n)=>{(Si.capabilities.imageBitmap&&c.assetManager.allowImageBitmap?Qw:Vw)(e,t,n)},Qw=(e,t,n)=>{t.xhrResponseType="blob",Hw(e,t,t.onFileProgress,n)},Kw=(e,t,n)=>{t.xhrResponseType="json",Hw(e,t,t.onFileProgress,n)},Zw=(e,t,n)=>{t.xhrResponseType="arraybuffer",Hw(e,t,t.onFileProgress,n)},Jw=(e,t,n)=>{Kw(e,t,((t,i)=>{if(t)return void n(t);const o=P_(i);Promise.all(o.chunks.map((n=>new Promise(((i,o)=>{Zw(`${Ri(e)}${n}`,{},((e,n)=>{t?o(t):i(new Uint8Array(n))}))}))))).then((e=>{const t=new T_(o.document,e);n(null,t)})).catch((e=>{n(e)}))}))},$w=(e,t,n)=>{Zw(e,t,((e,t)=>{if(e)n(e);else try{const e=I_(new Uint8Array(t));n(null,e)}catch(e){n(e)}}))},eT=(e,t,n)=>{t.xhrResponseType="text",Hw(e,t,t.onFileProgress,n)},tT=(e,t,n)=>{const i=Ni(e);let o=e;Yw.test(o)||(o=-1!==nT.remoteBundles.indexOf(i)?`${nT.remoteServerAddress}remote/${i}`:`assets/${i}`);const a=t.version||nT.bundleVers[i];let r=0,s=null,c=null;Kw(`${o}/config.${a?`${a}.`:""}json`,t,((e,t)=>{c=e,s=t,s&&(s.base=`${o}/`),2==++r&&n(c,s)})),qw(`${o}/index.${a?`${a}.`:""}js`,t,(e=>{c=e,2==++r&&n(e,s)}))},nT=e("dh",new class{constructor(){this.maxConcurrency=6,this.maxRequestsPerFrame=6,this.maxRetryCount=3,this.appendTimeStamp=!!i,this.limited=!i,this.retryInterval=2e3,this.bundleVers=null,this.remoteBundles=[],this.downloadDomImage=Vw,this.downloadDomAudio=null,this.downloadFile=Hw,this.downloadScript=qw,this._downloaders={".png":Xw,".jpg":Xw,".bmp":Xw,".jpeg":Xw,".gif":Xw,".ico":Xw,".tiff":Xw,".webp":Xw,".image":Xw,".pvr":Zw,".pkm":Zw,".astc":Zw,".txt":eT,".xml":eT,".vsh":eT,".fsh":eT,".atlas":eT,".tmx":eT,".tsx":eT,".json":Kw,".ExportJson":Kw,".plist":eT,".ccon":Jw,".cconb":$w,".fnt":eT,".binary":Zw,".bin":Zw,".dbbin":Zw,".skel":Zw,".js":qw,bundle:tT,default:eT},this._downloading=new Al,this._queue=[],this._queueDirty=!1,this._totalNum=0,this._totalNumThisPeriod=0,this._lastDate=-1,this._checkNextPeriod=!1,this._remoteServerAddress="",this._maxInterval=1/30}get remoteServerAddress(){return this._remoteServerAddress}init(e="",t={},n=[]){this._downloading.clear(),this._queue.length=0,this._remoteServerAddress=e,this.bundleVers=t,this.remoteBundles=n}register(e,t){"object"==typeof e?ge(this._downloaders,e):this._downloaders[e]=t}download(e,t,n,i,o){const a=Cl.get(e);if(a)return void o(null,a);const r=this._downloading.get(e);if(r){r.push(o);const t=this._queue.find((t=>t.id===e));if(!t)return;const n=i.priority||0;return void(t.priority<n&&(t.priority=n,this._queueDirty=!0))}const s=void 0!==i.maxRetryCount?i.maxRetryCount:this.maxRetryCount,c=void 0!==i.maxConcurrency?i.maxConcurrency:this.maxConcurrency,l=void 0!==i.maxRequestsPerFrame?i.maxRequestsPerFrame:this.maxRequestsPerFrame,_=this._downloaders[n]||this._downloaders.default;Mw(((n,a)=>{if(0===n&&this._downloading.add(e,[o]),!this.limited)return void _(Dw(t,this.appendTimeStamp),i,a);this._updateTime();const r=(e,t)=>{this._totalNum--,this._handleQueueInNextFrame(c,l),a(e,t)};this._totalNum<c&&this._totalNumThisPeriod<l?(_(Dw(t,this.appendTimeStamp),i,r),this._totalNum++,this._totalNumThisPeriod++):(this._queue.push({id:e,priority:i.priority||0,url:t,options:i,done:r,handler:_}),this._queueDirty=!0,this._totalNum<c&&this._handleQueueInNextFrame(c,l))}),s,this.retryInterval,((t,n)=>{t||Cl.add(e,n);const i=this._downloading.remove(e);for(let e=0,o=i.length;e<o;e++)i[e](t,n)}))}loadSubpackage(e,t){c.assetManager.loadBundle(e,null,t)}_updateTime(){const e=performance.now(),t=c.game.deltaTime,n=t>this._maxInterval?this._maxInterval:t;e-this._lastDate>1e3*n&&(this._totalNumThisPeriod=0,this._lastDate=e)}_handleQueue(e,t){for(this._checkNextPeriod=!1,this._updateTime();this._queue.length>0&&this._totalNum<e&&this._totalNumThisPeriod<t;){this._queueDirty&&(this._queue.sort(((e,t)=>e.priority-t.priority)),this._queueDirty=!1);const e=this._queue.pop();if(!e)break;this._totalNum++,this._totalNumThisPeriod++,e.handler(Dw(e.url,this.appendTimeStamp),e.options,e.done)}this._handleQueueInNextFrame(e,t)}_handleQueueInNextFrame(e,t){!this._checkNextPeriod&&this._queue.length>0&&(Je(this._handleQueue.bind(this),e,t),this._checkNextPeriod=!0)}});function iT(e,t,n,i){let o=null,a=null;try{o=new Rm,o._nativeUrl=e,o._nativeAsset=t}catch(e){a=e}i(a,o)}function oT(e,t,n,i){const o=new rE;o.json=t,i(null,o)}function aT(e,t,n,i){const o=new nE;o.text=t,i(null,o)}function rT(e,t,n,i){const o=new kx;o._nativeUrl=e,o._nativeAsset=t,i(null,o)}function sT(e,t,n,i){const o=new $l;o._nativeUrl=e,o._nativeAsset=t,i(null,o)}function cT(e,n,i,o){let a=El.get(n.name);a||(a=n.name===Nl.RESOURCES?Gw:new jw,n.base=n.base||`${e}/`,a.init(n)),t.import(`virtual:///prerequisite-imports/${a.name}`).then((()=>{o(null,a)})).catch(o)}var lT=e("di",new class{constructor(){this._creating=new Al,this._producers={".png":iT,".jpg":iT,".bmp":iT,".jpeg":iT,".gif":iT,".ico":iT,".tiff":iT,".webp":iT,".image":iT,".pvr":iT,".pkm":iT,".txt":aT,".xml":aT,".vsh":aT,".fsh":aT,".atlas":aT,".tmx":aT,".tsx":aT,".fnt":aT,".json":oT,".ExportJson":oT,".binary":rT,".bin":rT,".dbbin":rT,".skel":rT,bundle:cT,default:sT}}register(e,t){"object"==typeof e?Fe.mixin(this._producers,e):this._producers[e]=t}create(e,t,n,i,o){const a=this._producers[n]||this._producers.default,r=bl.get(e);if(!i.reloadAsset&&r)return void o(null,r);const s=this._creating.get(e);s?s.push(o):(this._creating.add(e,[o]),a(e,t,i,((t,n)=>{!t&&n instanceof $l&&(n._uuid=e,zw(e,n,i.cacheAsset));const o=this._creating.remove(e);for(let e=0,i=o.length;e<i;e++)o[e](t,n)})))}}),_T=new class{constructor(){this._loading=new Al,this._unpackers={".json":this.unpackJson}}unpackJson(e,t,n,i){let o=Fe.createMap(!0),a=null;if(Array.isArray(t)){(t=function(e){if(e[0]<1)throw new Error(O(5304,e[0]));Q_(e,!0,void 0,Z_.reportMissingClass),K_(e);const t=new J_(e[0]),n=e[1],i=e[2],o=e[3],a=e[4],r=e[5];for(let e=0;e<r.length;++e)r[e].unshift(t,n,i,o,a);return r}(t)).length!==e.length&&R(4915);for(let n=0;n<e.length;n++)o[`${e[n]}@import`]=t[n]}else{const n=Fe._getClassId(ud),i=Fe._getClassId(Rm);if(t.type===n&&t.data){const i=t.data;i.length!==e.length&&R(4915);for(let t=0;t<e.length;t++)o[`${e[t]}@import`]=$_(n,{base:i[t][0],mipmaps:i[t][1]})}else if(t.type===i&&t.data){const n=t.data;n.length!==e.length&&R(4915);for(let t=0;t<e.length;t++)o[`${e[t]}@import`]=n[t]}else a=new Error("unmatched type pack!"),o=null}i(a,o)}init(){this._loading.clear()}register(e,t){"object"==typeof e?Fe.mixin(this._unpackers,e):this._unpackers[e]=t}unpack(e,t,n,i,o){t?(0,this._unpackers[n])(e,t,i,o):o(new Error("package data is wrong!"))}load(e,t,n){if(e.isNative||!e.info||!e.info.packs)return void nT.download(e.id,e.url,e.ext,e.options,n);if(Cl.has(e.id))return void n(null,Cl.get(e.id));const i=e.info.packs;let o=i.find((e=>this._loading.has(e.uuid)));if(o)return void this._loading.get(o.uuid).push({onComplete:n,id:e.id});o=i[0],this._loading.add(o.uuid,[{onComplete:n,id:e.id}]);const a=Vl(o.uuid,{ext:o.ext,bundle:e.config.name});nT.download(o.uuid,a,o.ext,e.options,((t,n)=>{Cl.remove(o.uuid),t&&y(t.message,t.stack),this.unpack(o.packedUuids,n,o.ext,e.options,((e,n)=>{if(!e)for(const e in n)Cl.add(e,n[e]);const i=this._loading.remove(o.uuid);for(let o=0,a=i.length;o<a;o++){const a=i[o];if(t||e){a.onComplete(t||e);continue}const r=n[a.id];r?a.onComplete(null,r):a.onComplete(new Error("can not retrieve data from package"))}}))}))}};function uT(e,t){let n=!1;e.progress||(e.progress={finish:0,total:e.input.length,canInvoke:!0},n=!0);const{options:i,progress:o}=e,a=[],r=o.total,s=i.__exclude__=i.__exclude__||Object.create(null);e.output=[],Lw(e.input,((i,l)=>{if(!i.isNative&&bl.has(i.uuid)){const t=bl.get(i.uuid);return i.content=t.addRef(),e.output.push(i),o.canInvoke&&e.dispatch("progress",++o.finish,o.total,i),void l()}_T.load(i,e.options,((_,u)=>{_?e.isFinish||(!c.assetManager.force||n?(y(_.message,_.stack),o.canInvoke=!1,t(_)):(e.output.push(i),o.canInvoke&&e.dispatch("progress",++o.finish,o.total,i))):e.isFinish||(i.file=u,e.output.push(i),i.isNative||(s[i.uuid]=!0,Ow(i.uuid,u,s,a,i.config),o.total=r+a.length),o.canInvoke&&e.dispatch("progress",++o.finish,o.total,i)),l()}))}),(()=>{if(e.isFinish)return Nw(e,!0),void e.dispatch("error");if(a.length>0){const r=Dl.create({input:a,progress:o,options:i,onProgress:e.onProgress,onError:Dl.prototype.recycle,onComplete:i=>{i||(e.output.push(...r.output),r.recycle()),n&&fT(e),t(i)}});Tl.async(r)}else n&&fT(e),t()}))}function fT(e){const t=e.output;for(let e=0,n=t.length;e<n;e++)t[e].content&&t[e].content.decRef(!1)}class hT{constructor(){this._parser=null,window.DOMParser&&(this._parser=new DOMParser)}parse(e){return this._parseXML(e)}_parseXML(e){if(this._parser)return this._parser.parseFromString(e,"text/xml");throw new Error("Dom parser is not supported in this platform!")}}e("en",hT);const pT=new class extends hT{parse(e){const t=this._parseXML(e).documentElement;if("plist"!==t.tagName)return P(5100),{};let n=null;for(let e=0,i=t.childNodes.length;e<i&&(n=t.childNodes[e],1!==n.nodeType);e++);return this._parseNode(n)}_parseNode(e){let t=null;const n=e.tagName;if("dict"===n)t=this._parseDict(e);else if("array"===n)t=this._parseArray(e);else if("string"===n)if(1===e.childNodes.length)t=e.firstChild.nodeValue;else{t="";for(let n=0;n<e.childNodes.length;n++)t+=e.childNodes[n].nodeValue}else"false"===n?t=!1:"true"===n?t=!0:"real"===n?t=parseFloat(e.firstChild.nodeValue):"integer"===n&&(t=parseInt(e.firstChild.nodeValue,10));return t}_parseArray(e){const t=[];for(let n=0,i=e.childNodes.length;n<i;n++){const i=e.childNodes[n];1===i.nodeType&&t.push(this._parseNode(i))}return t}_parseDict(e){const t={};let n="";for(let i=0,o=e.childNodes.length;i<o;i++){const o=e.childNodes[i];1===o.nodeType&&("key"===o.tagName?n=o.firstChild.nodeValue:t[n]=this._parseNode(o))}return t}};function mT(e,t){return e[t]<<8|e[t+1]}var dT=new class{constructor(){this._parsing=new Al,this._parsers={".png":this.parseImage,".jpg":this.parseImage,".bmp":this.parseImage,".jpeg":this.parseImage,".gif":this.parseImage,".ico":this.parseImage,".tiff":this.parseImage,".webp":this.parseImage,".image":this.parseImage,".pvr":this.parsePVRTex,".pkm":this.parsePKMTex,".astc":this.parseASTCTex,".plist":this.parsePlist,import:this.parseImport,".ccon":this.parseImport,".cconb":this.parseImport}}parseImage(e,t,n){e instanceof HTMLImageElement?n(null,e):createImageBitmap(e,{premultiplyAlpha:"none"}).then((e=>{n(null,e)}),(e=>{n(e,null)}))}parsePVRTex(e,t,n){let i=null,o=null;try{const t=e instanceof ArrayBuffer?e:e.buffer,n=new Int32Array(t,0,13);if(55727696===n[0]){const e=n[7],i=n[6],a=n[12]+52;o={_data:new Uint8Array(t,a),_compressed:!0,width:e,height:i,format:0}}else{if(559044176!==n[11])throw new Error("Invalid magic number in PVR header");{const e=n[0],i=n[1],a=n[2];o={_data:new Uint8Array(t,e),_compressed:!0,width:a,height:i,format:0}}}}catch(e){i=e}n(i,o)}parsePKMTex(e,t,n){let i=null,o=null;try{const t=e instanceof ArrayBuffer?e:e.buffer,n=new Uint8Array(t),i=mT(n,6);if(0!==i&&1!==i&&3!==i)throw new Error("Invalid magic number in ETC header");const a=mT(n,12),r=mT(n,14);mT(n,8),mT(n,10),o={_data:new Uint8Array(t,16),_compressed:!0,width:a,height:r,format:0}}catch(e){i=e}n(i,o)}parseASTCTex(e,t,n){let i=null,o=null;try{const t=e instanceof ArrayBuffer?e:e.buffer,n=new Uint8Array(t);if(1554098963!==n[0]+(n[1]<<8)+(n[2]<<16)+(n[3]<<24))throw new Error("Invalid magic number in ASTC header");const i=n[4],a=n[5],r=n[6];if((i<3||i>6||a<3||a>6||r<3||r>6)&&(i<4||7===i||9===i||11===i||i>12||a<4||7===a||9===a||11===a||a>12||1!==r))throw new Error("Invalid block number in ASTC header");const s=function(e,t){return 4===e?Am.RGBA_ASTC_4x4:5===e?4===t?Am.RGBA_ASTC_5x4:Am.RGBA_ASTC_5x5:6===e?5===t?Am.RGBA_ASTC_6x5:Am.RGBA_ASTC_6x6:8===e?5===t?Am.RGBA_ASTC_8x5:6===t?Am.RGBA_ASTC_8x6:Am.RGBA_ASTC_8x8:10===e?5===t?Am.RGBA_ASTC_10x5:6===t?Am.RGBA_ASTC_10x6:8===t?Am.RGBA_ASTC_10x8:Am.RGBA_ASTC_10x10:10===t?Am.RGBA_ASTC_12x10:Am.RGBA_ASTC_12x12}(i,a),c=n[7]+(n[8]<<8)+(n[9]<<16),l=n[10]+(n[11]<<8)+(n[12]<<16);n[13],n[14],n[15],o={_data:new Uint8Array(t,16),_compressed:!0,width:c,height:l,format:s}}catch(e){i=e}n(i,o)}parsePlist(e,t,n){let i=null;const o=pT.parse(e);o||(i=new Error("parse failed")),n(i,o)}parseImport(e,t,n){if(!e)return void n(new Error(`The json file of asset ${t.__uuid__} is empty or missing`));let i=null,o=null;try{i=ed(e,t)}catch(e){o=e}n(o,i)}init(){this._parsing.clear()}register(e,t){"object"==typeof e?ge(this._parsers,e):this._parsers[e]=t}parse(e,t,n,i,o){const a=Sl.get(e);if(a)return void o(null,a);const r=this._parsing.get(e);if(r)return void r.push(o);const s=this._parsers[n];s?(this._parsing.add(e,[o]),s(t,i,((t,n)=>{t?Cl.remove(e):jl(n)||Sl.add(e,n);const i=this._parsing.remove(e);for(let e=0,o=i.length;e<o;e++)i[e](t,n)}))):o(null,t)}};function vT(e,t){let n=!1;e.progress||(e.progress={finish:0,total:e.input.length,canInvoke:!0},n=!0);const{options:i,progress:o}=e;i.__exclude__=i.__exclude__||Object.create(null),e.output=[],Lw(e.input,((a,r)=>{const s=Dl.create({input:a,onProgress:e.onProgress,options:i,progress:o,onComplete:(i,l)=>{i&&!e.isFinish&&(!c.assetManager.force||n?(y(i.message,i.stack),o.canInvoke=!1,t(i)):o.canInvoke&&e.dispatch("progress",++o.finish,o.total,a)),e.output.push(l),s.recycle(),r(null)}});gT.async(s)}),(()=>{if(i.__exclude__=null,e.isFinish)return Nw(e,!0),void e.dispatch("error");!function(e){const t=e.source;if(e.options.__outputAsArray__||1!==t.length){const n=e.output=[];for(let e=0,i=t.length;e<i;e++)n.push(t[e].content)}else e.output=t[0].content}(e),Nw(e,!0),t()}))}const gT=new xl("loadOneAsset",[function(e,t){const n=e.output=e.input,{options:i,isNative:o,uuid:a,file:r}=n,{reloadAsset:s}=i;r||!s&&!o&&bl.has(a)?t():_T.load(n,e.options,((e,i)=>{n.file=i,t(e)}))},function(e,t){const n=e.output=e.input,i=e.progress,o=e.options.__exclude__,{id:a,file:r,options:s}=n;if(n.isNative)dT.parse(a,r,n.ext,s,((o,r)=>{o?t(o):(n.content=r,i.canInvoke&&e.dispatch("progress",++i.finish,i.total,n),Cl.remove(a),Sl.remove(a),t())}));else{const{uuid:c}=n;if(c in o){const{finish:a,content:r,err:s,callbacks:l}=o[c];i.canInvoke&&e.dispatch("progress",++i.finish,i.total,n),a||Bw(c,c,o)?(r&&r.addRef(),n.content=r,t(s)):l.push({done:t,item:n})}else if(!s.reloadAsset&&bl.has(c)){const o=bl.get(c);n.content=o.addRef(),i.canInvoke&&e.dispatch("progress",++i.finish,i.total,n),t()}else s.__uuid__=c,dT.parse(a,r,"import",s,((n,i)=>{n?t(n):function(e,t,n){const{input:i,progress:o}=e,{uuid:a,id:r,options:s,config:c}=i,{cacheAsset:l}=s,_=[];t.addRef&&t.addRef(),Ow(a,t,Object.create(null),_,c),o.canInvoke&&e.dispatch("progress",++o.finish,o.total+=_.length,i);const u=e.options.__exclude__[a]={content:t,finish:!1,callbacks:[{done:n,item:i}]},f=Dl.create({input:_,options:e.options,onProgress:e.onProgress,onError:Dl.prototype.recycle,progress:o,onComplete:e=>{if(t.decRef&&t.decRef(!1),u.finish=!0,u.err=e,!e){const e=Array.isArray(f.output)?f.output:[f.output],n=Object.create(null);for(const t of e)t&&(n[t instanceof $l?`${t._uuid}@import`:`${a}@native`]=t);!function(e,t,n){let i=!1;const o=Zm.get(t);if(o){for(let e=0,t=o.length;e<t;e++){const t=o[e],a=n[`${t.uuid}@import`];if(a)t.owner[t.prop]=a.addRef();else{if(y(`The asset ${t.uuid} is missing!`),t.type&&t.type!==$l){const e=new t.type;e.initDefault(t.uuid),t.owner[t.prop]=e}i=!0}}Zm.delete(t)}Jm.has(t)&&(n[`${e}@native`]?t._nativeAsset=n[`${e}@native`]:(i=!0,console.error(`the native asset of ${e} is missing!`)),Jm.delete(t))}(a,t,n);try{"function"!=typeof t.onLoaded||$m.has(t)||Jm.has(t)||(t.onLoaded(),$m.add(t))}catch(e){y(`The asset ${a} is invalid for some reason, detail message: ${e.message}, stack: ${e.stack}`)}Cl.remove(r),Sl.remove(r),zw(a,t,l),f.recycle()}const n=u.callbacks;for(let i=0,o=n.length;i<o;i++){const o=n[i];t.addRef&&t.addRef(),o.item.content=t,o.done(e)}n.length=0}});wl.async(f)}(e,i,t)}))}}]);function yT(e,t){const n=e.options,i=Object.create(null),o=Object.create(null);for(const e in n)switch(e){case Il.PATH:case Il.UUID:case Il.DIR:case Il.SCENE:case Il.URL:break;case"__requestType__":case"__isNative__":case"ext":case"type":case"__nativeName__":case"audioLoadMode":case"bundle":i[e]=n[e];break;case"__exclude__":case"__outputAsArray__":o[e]=n[e];break;default:i[e]=n[e],o[e]=n[e]}e.options=o;const a=Dl.create({input:e.input,options:i});let r=null;try{e.output=e.source=Pl.sync(a)}catch(e){r=e;for(let e=0,t=a.output.length;e<t;e++)a.output[e].recycle()}a.recycle(),t(r)}class AT{constructor(){this.uuid="",this.url="",this.ext=".json",this.content=null,this.file=null,this.info=null,this.config=null,this.isNative=!1,this.options=Object.create(null),this._id=""}get id(){return this._id||(this._id=`${this.uuid}@${this.isNative?"native":"import"}`),this._id}static create(){let e;return e=0!==AT._deadPool.length?AT._deadPool.pop():new AT,e}recycle(){AT._deadPool.length!==AT.MAX_DEAD_NUM&&(this._id="",this.uuid="",this.url="",this.ext=".json",this.content=null,this.file=null,this.info=null,this.config=null,this.isNative=!1,this.options=Object.create(null),AT._deadPool.push(this))}}AT.MAX_DEAD_NUM=500,AT._deadPool=[];const xT=[];function bT(e){var t;const n=e.options,i=Array.isArray(e.input)?e.input:[e.input];e.output=[];for(let a=0;a<i.length;a++){let r=i[a],s=AT.create(),c=null,l=null;if("string"==typeof r&&(r=Object.create(null),r[n.__requestType__||Il.UUID]=i[a]),"object"==typeof r){ve(r,n),r.preset&&ve(r,Rl[r.preset]);for(const e in r){switch(e){case Il.UUID:{var o;const e=s.uuid=Fl(r.uuid);if(!r.bundle){const t=El.find((t=>!!t.getAssetInfo(e)));r.bundle=t&&t.name}if(El.has(r.bundle)){if(c=El.get(r.bundle).config,l=c.getAssetInfo(e),l&&l.redirect){if(!El.has(l.redirect))throw new Error(`Please load bundle ${l.redirect} first`);c=El.get(l.redirect).config,l=c.getAssetInfo(e)}s.config=c,s.info=l}s.ext=r.ext||(null===(o=l)||void 0===o?void 0:o.extension)||".json";break}case"__requestType__":case"ext":case"bundle":case"preset":case"type":break;case Il.DIR:if(El.has(r.bundle)){El.get(r.bundle).config.getDirWithPath(r.dir,r.type,xT);for(const e of xT)i.push({uuid:e.uuid,__isNative__:!1,ext:e.extension||".json",bundle:r.bundle});xT.length=0}s.recycle(),s=null;break;case Il.PATH:if(El.has(r.bundle)){if(c=El.get(r.bundle).config,l=c.getInfoWithPath(r.path,r.type),l&&l.redirect){if(!El.has(l.redirect))throw new Error(`you need to load bundle ${l.redirect} first`);c=El.get(l.redirect).config,l=c.getAssetInfo(l.uuid)}if(!l)throw s.recycle(),new Error(`Bundle ${r.bundle} doesn't contain ${r.path}`);s.config=c,s.uuid=l.uuid,s.info=l}s.ext=r.ext||(null===(t=l)||void 0===t?void 0:t.extension)||".json";break;case Il.SCENE:if(!r.bundle){const e=El.find((e=>!!e.getSceneInfo(r.scene)));r.bundle=e&&e.name}if(El.has(r.bundle)){if(c=El.get(r.bundle).config,l=c.getSceneInfo(r.scene),l&&l.redirect){if(!El.has(l.redirect))throw new Error(`you need to load bundle ${l.redirect} first`);c=El.get(l.redirect).config,l=c.getAssetInfo(l.uuid)}if(!l)throw s.recycle(),new Error(`Bundle ${c.name} doesn't contain scene ${r.scene}`);s.config=c,s.uuid=l.uuid,s.info=l}break;case"__isNative__":s.isNative=r.__isNative__;break;case Il.URL:s.url=r.url,s.uuid=r.uuid||r.url,s.ext=r.ext||Ii(r.url),s.isNative=void 0===r.__isNative__||r.__isNative__;break;default:s.options[e]=r[e]}if(!s)break}}if(s&&(e.output.push(s),!s.uuid&&!s.url))throw new Error(`Can not parse this input:${JSON.stringify(r)}`)}return null}function CT(e){const t=e.output=e.input;for(let e=0;e<t.length;e++){const n=t[e];if(n.url)continue;let i="",o="";const a=n.config;o=n.isNative?a&&a.nativeBase?a.base+a.nativeBase:c.assetManager.generalNativeBase:a&&a.importBase?a.base+a.importBase:c.assetManager.generalImportBase;const r=n.uuid;let s="";n.info&&(s=n.isNative?n.info.nativeVer?`.${n.info.nativeVer}`:"":n.info.ver?`.${n.info.ver}`:""),i=".ttf"===n.ext?`${o}/${r.slice(0,2)}/${r}${s}/${n.options.__nativeName__}`:`${o}/${r.slice(0,2)}/${r}${s}${n.ext}`,n.url=i}return null}class ST{constructor(){this.pipeline=wl.append(yT).append(vT),this.fetchPipeline=Tl.append(yT).append(uT),this.transformPipeline=Pl.append(bT).append(CT),this.bundles=El,this.assets=bl,this.generalImportBase="",this.generalNativeBase="",this.dependUtil=nd,this.force=!1,this.allowImageBitmap=!Si.isMobile,this.utils=Hl,this.downloader=nT,this.parser=dT,this.packManager=_T,this.cacheAsset=!0,this.cacheManager=null,this.presets=Rl,this.factory=lT,this.preprocessPipe=yT,this.fetchPipe=uT,this.loadPipe=vT,this.references=null,this._releaseManager=Iw,this._files=Cl,this._parsed=Sl,this._parsePipeline=null}get main(){return El.get(Nl.MAIN)||null}get resources(){return El.get(Nl.RESOURCES)||null}init(e={}){this._files.clear(),this._parsed.clear(),this._releaseManager.init(),this.assets.clear(),this.bundles.clear(),this.packManager.init(),this.downloader.init(e.server,e.bundleVers,e.remoteBundles),this.parser.init(),this.dependUtil.init();let t=e.importBase||"";t&&t.endsWith("/")&&(t=t.substr(0,t.length-1));let n=e.nativeBase||"";n&&n.endsWith("/")&&(n=n.substr(0,n.length-1)),this.generalImportBase=t,this.generalNativeBase=n}getBundle(e){return El.get(e)||null}removeBundle(e){e._destroy(),El.remove(e.name)}loadAny(e,t,n,i){const{options:o,onProgress:a,onComplete:r}=Fw(t,n,i);o.preset=o.preset||"default",e=Array.isArray(e)?e.slice():e;const s=Dl.create({input:e,onProgress:a,onComplete:kw(r),options:o});wl.async(s)}preloadAny(e,t,n,i){const{options:o,onProgress:a,onComplete:r}=Fw(t,n,i);o.preset=o.preset||"preload",e=Array.isArray(e)?e.slice():e;const s=Dl.create({input:e,onProgress:a,onComplete:kw(r),options:o});Tl.async(s)}loadRemote(e,t,n){const{options:i,onComplete:o}=Fw(t,void 0,n);i.reloadAsset||!this.assets.has(e)?(i.__isNative__=!0,i.preset=i.preset||"remote",this.loadAny({url:e},i,null,((t,n)=>{t?(y(t.message,t.stack),o&&o(t,n)):lT.create(e,n,i.ext||Ii(e),i,((e,t)=>{o&&o(e,t)}))}))):kw(o)(null,this.assets.get(e))}loadBundle(e,t,n){const{options:i,onComplete:o}=Fw(t,void 0,n),a=Ni(e);this.bundles.has(a)?kw(o)(null,this.getBundle(a)):(i.preset=i.preset||"bundle",i.ext="bundle",i.__isNative__=!0,this.loadAny({url:e},i,null,((t,n)=>{t?(y(t.message,t.stack),o&&o(t,n)):lT.create(e,n,"bundle",i,((e,t)=>{o&&o(e,t)}))})))}releaseAsset(e){Iw.tryRelease(e,!0)}releaseUnusedAssets(){bl.forEach((e=>{Iw.tryRelease(e)}))}releaseAll(){bl.forEach((e=>{Iw.tryRelease(e,!0)}))}loadWithJson(e,t,n,i){throw new Error("Only valid in Editor")}}e("fG",ST),ST.Pipeline=xl,ST.Task=Dl,ST.Cache=Al,ST.RequestItem=AT,ST.Bundle=jw,ST.BuiltinBundleName=Nl;var ET=e("ea",c.assetManager=new ST);c.AssetManager=ST;const wT=[".png",".jpg",".bmp",".jpeg",".gif",".ico",".tiff",".webp",".image",".pvr",".pkm",".astc"],TT=[".mp3",".ogg",".wav",".m4a"];function PT(){return!0}const IT={transformURL(e){const t=Bl(e);if(!t)return e;const n=El.find((e=>!!e.getAssetInfo(t)));if(!n)return e;let i="";const o=n.getAssetInfo(t);if(i=e.startsWith(n.base+n.config.nativeBase)?o.nativeVer||"":o.ver||"",!i||-1!==e.indexOf(i))return e;let a=!1;if(".ttf"===Ii(e)&&(a=!0),a){const t=Di(e),n=Ni(e);e=`${t}.${i}/${n}`}else e=e.replace(/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-@]{8,}).*/,(e=>`${e}.${i}`));return e}};class RT{constructor(){this._autoReleaseSetting=Object.create(null),this._parseLoadResArgs=Uw}set onProgress(e){Rw=e}get _cache(){return bl._map}load(e,t,n){void 0===n&&void 0!==t&&(n=t,t=null);const i=Array.isArray(e)?e:[e];for(let e=0;e<i.length;e++){const t=i[e];"string"==typeof t?i[e]={url:t,__isNative__:!0}:(t.type&&(t.ext=`.${t.type}`,t.type=void 0),t.url&&(t.__isNative__=!0))}const o=[],a=[];ET.loadAny(i,null,((e,n,i)=>{i.content&&(wT.includes(i.ext)?o.push(i.content):TT.includes(i.ext)&&a.push(i.content)),t&&t(e,n,i)}),((e,t)=>{let r=null;if(!e){t=Array.isArray(t)?t:[t];for(let e=0;e<t.length;e++){const n=t[e];if(!(n instanceof $l)){let r=n;const s=i[e].url;o.includes(r)?lT.create(s,n,".png",{},((n,i)=>{r=t[e]=i})):a.includes(r)&&lT.create(s,n,".mp3",{},((n,i)=>{r=t[e]=i})),bl.add(s,r)}}if(t.length>1){const e=Object.create(null);t.forEach((t=>{e[t._uuid]=t})),r={isCompleted:PT,_map:e}}else r=t[0]}n&&n(e,r)}))}getXMLHttpRequest(){return new XMLHttpRequest}getItem(e){return ET.assets.has(e)?{content:ET.assets.get(e)}:null}loadRes(e,t,n,i){const{type:o,onProgress:a,onComplete:r}=this._parseLoadResArgs(t,n,i),s=Ii(e);s&&!Gw.getInfoWithPath(e,o)&&(e=e.slice(0,-s.length)),Gw.load(e,o,a,r)}loadResArray(e,t,n,i){const{type:o,onProgress:a,onComplete:r}=this._parseLoadResArgs(t,n,i);e.forEach(((t,n)=>{const i=Ii(t);i&&!Gw.getInfoWithPath(t,o)&&(e[n]=t.slice(0,-i.length))})),Gw.load(e,o,a,r)}loadResDir(e,t,n,i){const{type:o,onProgress:a,onComplete:r}=this._parseLoadResArgs(t,n,i);Gw.loadDir(e,o,a,((t,n)=>{let i=[];t||(i=Gw.getDirWithPath(e,o).map((e=>e.path))),r&&r(t,n,i)}))}getRes(e,t){return bl.has(e)?bl.get(e):Gw.get(e,t)}getResCount(){return bl.count}getDependsRecursively(e){if(!e)return[];const t="string"==typeof e?e:e._uuid;return nd.getDepsRecursively(t).concat([t])}get md5Pipe(){return IT}get downloader(){return nT}get loader(){return ET.parser}addDownloadHandlers(e){const t=Object.create(null);for(const n in e){const i=e[n];t[`.${n}`]=(e,t,n)=>{i({url:e},n)}}nT.register(t)}addLoadHandlers(e){const t=Object.create(null);for(const n in e){const i=e[n];t[`.${n}`]=(e,t,n)=>{i({content:e},n)}}dT.register(t)}release(e){if(Array.isArray(e))for(let t=0;t<e.length;t++){let n=e[t];"string"==typeof n&&(n=bl.get(n)),ET.releaseAsset(n)}else e&&("string"==typeof e&&(e=bl.get(e)),ET.releaseAsset(e))}releaseAsset(e){ET.releaseAsset(e)}releaseRes(e,t){Gw.release(e,t)}releaseAll(){ET.releaseAll(),bl.clear()}removeItem(e){return!!bl.remove(e)}setAutoRelease(e,t){"object"==typeof e&&(e=e._uuid),this._autoReleaseSetting[e]=!!t}setAutoReleaseRecursively(e,t){"object"==typeof e&&(e=e._uuid),t=!!t,this._autoReleaseSetting[e]=t;const n=nd.getDepsRecursively(e);for(let e=0;e<n.length;e++)this._autoReleaseSetting[n[e]]=t}isAutoRelease(e){return"object"==typeof e&&(e=e._uuid),!!this._autoReleaseSetting[e]}}e("fI",RT);const NT=e("fJ",new RT),DT=e("fK",{init(e){e.importBase=e.libraryPath,e.nativeBase=e.rawAssetsBase,ET.init(e),e.rawAssets&&Gw.init({base:"",deps:[],scenes:{},redirect:[],debug:!0,packs:{},types:[],versions:{import:[],native:[]},name:Nl.RESOURCES,importBase:e.importBase,nativeBase:e.nativeBase,paths:e.rawAssets.assets,uuids:Object.keys(e.rawAssets.assets),extensionMap:{}})},loadAsset(e,t,n){ET.loadAny(e,t)}}),MT=e("fL",{});an(MT,"url",[{name:"normalize",target:ET.utils,targetName:"assetManager.utils",newName:"normalize"},{name:"raw",targetName:"Asset.prototype",newName:"nativeUrl",customFunction:e=>e.startsWith("resources/")?Vl({path:Mi(e.substr(10)),bundle:Nl.RESOURCES,__isNative__:!0,ext:Ii(e)}):""}]),rn(DT,"AssetLibrary",[{name:"getLibUrlNoExt",suggest:"AssetLibrary.getLibUrlNoExt was removed, if you want to transform url, please use cc.assetManager.utils.getUrlWithUuid instead"},{name:"queryAssetInfo",suggest:"AssetLibrary.queryAssetInfo was removed"}]),rn(NT,"loader",[{name:"releaseResDir",suggest:"loader.releaseResDir was removed, please use assetManager.releaseAsset instead"},{name:"flowInDeps",suggest:"loader.flowInDeps was removed"},{name:"assetLoader",suggest:"cc.loader.assetLoader was removed, assetLoader and md5Pipe were merged into cc.assetManager.transformPipeline"}]),an(c,"cc",[{name:"loader",newName:"assetManager",logTimes:1,customGetter:()=>NT},{name:"AssetLibrary",newName:"assetManager",logTimes:1,customGetter:()=>DT},{name:"Pipeline",target:ST,targetName:"AssetManager",newName:"Pipeline",logTimes:1},{name:"url",targetName:"assetManager",newName:"utils",logTimes:1,customGetter:()=>MT}]),rn(c,"cc",[{name:"LoadingItems",suggest:O(1400,"cc.LoadingItems","cc.AssetManager.Task")}]),an(He,"macro",[{name:"DOWNLOAD_MAX_CONCURRENT",target:nT,targetName:"assetManager.downloader",newName:"maxConcurrency"}]),an(xw,"director",[{name:"_getSceneUuid",targetName:"assetManager.main",newName:"getSceneInfo",customFunction:e=>{var t;return ET.main?null===(t=ET.main.getSceneInfo(e))||void 0===t?void 0:t.uuid:""}}]),an(ew,"game",[{name:"_sceneInfos",targetName:"assetManager.main",newName:"getSceneInfo",customGetter:()=>{const e=[];return ET.main&&ET.main.config.scenes.forEach((t=>{e.push(t)})),e}}]);const OT=Iw._autoRelease;var zT,LT,FT,UT,BT,kT,jT,GT,VT,HT,WT,qT,YT;Iw._autoRelease=function(e,t,n){OT.call(Iw,e,t,n);const i=NT._autoReleaseSetting,o=Object.keys(i);for(let e=0;e<o.length;e++){const t=o[e];if(!0===i[t]){const e=bl.get(t);e&&Iw.tryRelease(e)}}};let XT=e("dj",(zT=Rc("cc.ClickEvent"),LT=rl(c.Node),FT=Xc(),UT=Xc(),BT=Xc(),kT=Xc(),zT((VT=vc((GT=class e{constructor(){dc(this,"target",VT,this),dc(this,"component",HT,this),dc(this,"_componentId",WT,this),dc(this,"handler",qT,this),dc(this,"customEventData",YT,this)}get _componentName(){return this._genCompIdIfNeeded(),this._compId2Name(this._componentId)}set _componentName(e){this._componentId=this._compName2Id(e)}static emitEvents(t,...n){for(let i=0,o=t.length;i<o;i++){const o=t[i];o instanceof e&&o.emit(n)}}emit(e){const t=this.target;if(!c.isValid(t))return;this._genCompIdIfNeeded();const n=c.js._getClassById(this._componentId),i=t.getComponent(n);if(!c.isValid(i))return;const o=i[this.handler];"function"==typeof o&&(null!=this.customEventData&&""!==this.customEventData&&(e=e.slice()).push(this.customEventData),o.apply(i,e))}_compName2Id(e){const t=c.js.getClassByName(e);return c.js._getClassId(t)}_compId2Name(e){const t=c.js._getClassById(e);return c.js.getClassName(t)}_genCompIdIfNeeded(){this._componentId||(this._componentName=this.component,this.component="")}}).prototype,"target",[zc,LT,FT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),HT=vc(GT.prototype,"component",[zc,Wc,UT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),WT=vc(GT.prototype,"_componentId",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),qT=vc(GT.prototype,"handler",[zc,Wc,BT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),YT=vc(GT.prototype,"customEventData",[zc,Wc,kT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),jT=GT))||jT));var QT,KT,ZT,JT,$T,eP,tP,nP,iP,oP,aP,rP,sP,cP,lP,_P,uP,fP,hP,pP,mP,dP,vP,gP,yP,AP,xP,bP,CP,SP,EP,wP,TP,PP,IP,RP,NP,DP,MP,OP,zP,LP,FP,UP,BP,kP,jP,GP,VP,HP,WP,qP,YP,XP,QP,KP,ZP,JP,$P,eI,tI,nI,iI,oI,aI,rI,sI;c.Component.EventHandler=XT;const cI=new Gn,lI=Be(sm),_I=Be(rm),uI=Be(cm),fI=Be(_m),hI=Be(lm),pI=Be({SKYBOX:vm|ga.DEPTH_STENCIL,SOLID_COLOR:ga.ALL,DEPTH_ONLY:ga.DEPTH_STENCIL,DONT_CLEAR:ga.NONE});let mI=e("d4",(QT=Rc("cc.Camera"),KT=Hc(),ZT=kc(),JT=el(),$T=Xc(),eP=rl(Gh.BitMask),tP=el(),nP=Xc(),iP=rl(pI),oP=el(),aP=Xc(),rP=el(),sP=Xc(),cP=el(),lP=Xc(),_P=el(),uP=Xc(),fP=rl(lI),hP=el(),pP=Xc(),mP=rl(_I),dP=el(),vP=Xc(),gP=el(),yP=Xc(),AP=el(),xP=Xc(),bP=el(),CP=Xc(),SP=el(),EP=Xc(),wP=rl(uI),TP=el(),PP=Xc(),IP=rl(fI),RP=el(),NP=Xc(),DP=rl(hI),MP=el(),OP=Xc(),zP=el(),LP=Xc(),FP=rl(Fx),UP=el(),BP=Xc(),QT(kP=KT(kP=ZT(kP=Bc((sI=rI=class e extends y_{constructor(...e){super(...e),dc(this,"_projection",GP,this),dc(this,"_priority",VP,this),dc(this,"_fov",HP,this),dc(this,"_fovAxis",WP,this),dc(this,"_orthoHeight",qP,this),dc(this,"_near",YP,this),dc(this,"_far",XP,this),dc(this,"_color",QP,this),dc(this,"_depth",KP,this),dc(this,"_stencil",ZP,this),dc(this,"_clearFlags",JP,this),dc(this,"_rect",$P,this),dc(this,"_aperture",eI,this),dc(this,"_shutter",tI,this),dc(this,"_iso",nI,this),dc(this,"_screenScale",iI,this),dc(this,"_visibility",oI,this),dc(this,"_targetTexture",aI,this),this._camera=null,this._inEditorMode=!1,this._flows=void 0}get camera(){return this._camera}get priority(){return this._priority}set priority(e){this._priority=e,this._camera&&(this._camera.priority=e)}get visibility(){return this._visibility}set visibility(e){this._visibility=e,this._camera&&(this._camera.visibility=e)}get clearFlags(){return this._clearFlags}set clearFlags(e){this._clearFlags=e,this._camera&&(this._camera.clearFlag=e)}get clearColor(){return this._color}set clearColor(e){this._color.set(e),this._camera&&(this._camera.clearColor=this._color)}get clearDepth(){return this._depth}set clearDepth(e){this._depth=e,this._camera&&(this._camera.clearDepth=e)}get clearStencil(){return this._stencil}set clearStencil(e){this._stencil=e,this._camera&&(this._camera.clearStencil=e)}get projection(){return this._projection}set projection(e){this._projection=e,this._camera&&(this._camera.projectionType=e)}get fovAxis(){return this._fovAxis}set fovAxis(e){e!==this._fovAxis&&(this._fovAxis=e,this._camera&&(this._camera.fovAxis=e,e===rm.VERTICAL?this.fov=this._fov*this._camera.aspect:this.fov=this._fov/this._camera.aspect))}get fov(){return this._fov}set fov(e){this._fov=e,this._camera&&(this._camera.fov=bn(e))}get orthoHeight(){return this._orthoHeight}set orthoHeight(e){this._orthoHeight=e,this._camera&&(this._camera.orthoHeight=e)}get near(){return this._near}set near(e){this._near=e,this._camera&&(this._camera.nearClip=e)}get far(){return this._far}set far(e){this._far=e,this._camera&&(this._camera.farClip=e)}get aperture(){return this._aperture}set aperture(e){this._aperture=e,this._camera&&(this._camera.aperture=e)}get shutter(){return this._shutter}set shutter(e){this._shutter=e,this._camera&&(this._camera.shutter=e)}get iso(){return this._iso}set iso(e){this._iso=e,this._camera&&(this._camera.iso=e)}get rect(){return this._rect}set rect(e){this._rect=e,this._camera&&(this._camera.viewport=e)}get targetTexture(){return this._targetTexture}set targetTexture(t){if(this._targetTexture===t)return;const n=this._targetTexture;this._targetTexture=t,this._checkTargetTextureEvent(n),this._updateTargetTexture(),!t&&this._camera&&(this._camera.changeTargetWindow(null),this._camera.isWindowSize=!0),this.node.emit(e.TARGET_TEXTURE_CHANGE,this)}get screenScale(){return this._screenScale}set screenScale(e){this._screenScale=e,this._camera&&(this._camera.screenScale=e)}get inEditorMode(){return this._inEditorMode}set inEditorMode(e){this._inEditorMode=e,this._camera&&this._camera.changeTargetWindow(e?c.director.root&&c.director.root.mainWindow:c.director.root&&c.director.root.tempWindow)}onLoad(){this._createCamera()}onEnable(){this.node.hasChangedFlags|=_v.POSITION,this._camera&&this._attachToScene()}onDisable(){this._camera&&this._detachFromScene()}onDestroy(){this._camera&&(this._camera.destroy(),this._camera=null),this._targetTexture&&this._targetTexture.off("resize")}screenPointToRay(e,t,n){return n||(n=Eo.create()),this._camera&&this._camera.screenPointToRay(n,e,t),n}worldToScreen(e,t){return t||(t=new Gn),this._camera&&this._camera.worldToScreen(t,e),t}screenToWorld(e,t){return t||(t=this.node.getWorldPosition()),this._camera&&this._camera.screenToWorld(t,e),t}convertToUINode(e,t,n){if(n||(n=new Gn),!this._camera)return n;this.worldToScreen(e,cI);const i=t.getComponent("cc.UITransform"),o=cw.getVisibleSize(),a=cI.x-.5*this._camera.width,r=cI.y-.5*this._camera.height;return cI.x=a/c.view.getScaleX()+.5*o.width,cI.y=r/c.view.getScaleY()+.5*o.height,i&&i.convertToNodeSpaceAR(cI,n),n}_createCamera(){this._camera||(this._camera=c.director.root.createCamera(),this._camera.initialize({name:this.node.name,node:this.node,projection:this._projection,window:this._inEditorMode?c.director.root&&c.director.root.mainWindow:c.director.root&&c.director.root.tempWindow,priority:this._priority}),this._camera.viewport=this._rect,this._camera.fovAxis=this._fovAxis,this._camera.fov=bn(this._fov),this._camera.orthoHeight=this._orthoHeight,this._camera.nearClip=this._near,this._camera.farClip=this._far,this._camera.clearColor=this._color,this._camera.clearDepth=this._depth,this._camera.clearStencil=this._stencil,this._camera.clearFlag=this._clearFlags,this._camera.visibility=this._visibility,this._camera.aperture=this._aperture,this._camera.shutter=this._shutter,this._camera.iso=this._iso),this._updateTargetTexture()}_attachToScene(){this.node.scene&&this._camera&&(this._camera&&this._camera.scene&&this._camera.scene.removeCamera(this._camera),this._getRenderScene().addCamera(this._camera))}_detachFromScene(){this._camera&&this._camera.scene&&this._camera.scene.removeCamera(this._camera)}_checkTargetTextureEvent(e){e&&e.off("resize"),this._targetTexture&&this._targetTexture.on("resize",(e=>{this._camera&&this._camera.setFixedSize(e.width,e.height)}),this)}_updateTargetTexture(){if(this._camera&&this._targetTexture){const e=this._targetTexture.window;this._camera.changeTargetWindow(e),this._camera.setFixedSize(e.width,e.height)}}},rI.ProjectionType=lI,rI.FOVAxis=_I,rI.ClearFlag=pI,rI.Aperture=uI,rI.Shutter=fI,rI.ISO=hI,rI.TARGET_TEXTURE_CHANGE="tex-change",GP=vc((jP=sI).prototype,"_projection",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return lI.PERSPECTIVE}}),VP=vc(jP.prototype,"_priority",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),HP=vc(jP.prototype,"_fov",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),WP=vc(jP.prototype,"_fovAxis",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _I.VERTICAL}}),qP=vc(jP.prototype,"_orthoHeight",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),YP=vc(jP.prototype,"_near",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),XP=vc(jP.prototype,"_far",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),QP=vc(jP.prototype,"_color",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Un("#333333")}}),KP=vc(jP.prototype,"_depth",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ZP=vc(jP.prototype,"_stencil",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),JP=vc(jP.prototype,"_clearFlags",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pI.SOLID_COLOR}}),$P=vc(jP.prototype,"_rect",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new di(0,0,1,1)}}),eI=vc(jP.prototype,"_aperture",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return uI.F16_0}}),tI=vc(jP.prototype,"_shutter",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fI.D125}}),nI=vc(jP.prototype,"_iso",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return hI.ISO100}}),iI=vc(jP.prototype,"_screenScale",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),oI=vc(jP.prototype,"_visibility",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return am}}),aI=vc(jP.prototype,"_targetTexture",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vc(jP.prototype,"priority",[JT,$T],Object.getOwnPropertyDescriptor(jP.prototype,"priority"),jP.prototype),vc(jP.prototype,"visibility",[eP,tP,nP],Object.getOwnPropertyDescriptor(jP.prototype,"visibility"),jP.prototype),vc(jP.prototype,"clearFlags",[iP,oP,aP],Object.getOwnPropertyDescriptor(jP.prototype,"clearFlags"),jP.prototype),vc(jP.prototype,"clearColor",[rP,sP],Object.getOwnPropertyDescriptor(jP.prototype,"clearColor"),jP.prototype),vc(jP.prototype,"clearDepth",[cP,lP],Object.getOwnPropertyDescriptor(jP.prototype,"clearDepth"),jP.prototype),vc(jP.prototype,"clearStencil",[_P,uP],Object.getOwnPropertyDescriptor(jP.prototype,"clearStencil"),jP.prototype),vc(jP.prototype,"projection",[fP,hP,pP],Object.getOwnPropertyDescriptor(jP.prototype,"projection"),jP.prototype),vc(jP.prototype,"fovAxis",[mP,dP,vP],Object.getOwnPropertyDescriptor(jP.prototype,"fovAxis"),jP.prototype),vc(jP.prototype,"fov",[gP,yP],Object.getOwnPropertyDescriptor(jP.prototype,"fov"),jP.prototype),vc(jP.prototype,"orthoHeight",[AP,xP],Object.getOwnPropertyDescriptor(jP.prototype,"orthoHeight"),jP.prototype),vc(jP.prototype,"near",[bP,CP],Object.getOwnPropertyDescriptor(jP.prototype,"near"),jP.prototype),vc(jP.prototype,"far",[SP,EP],Object.getOwnPropertyDescriptor(jP.prototype,"far"),jP.prototype),vc(jP.prototype,"aperture",[wP,TP,PP],Object.getOwnPropertyDescriptor(jP.prototype,"aperture"),jP.prototype),vc(jP.prototype,"shutter",[IP,RP,NP],Object.getOwnPropertyDescriptor(jP.prototype,"shutter"),jP.prototype),vc(jP.prototype,"iso",[DP,MP,OP],Object.getOwnPropertyDescriptor(jP.prototype,"iso"),jP.prototype),vc(jP.prototype,"rect",[zP,LP],Object.getOwnPropertyDescriptor(jP.prototype,"rect"),jP.prototype),vc(jP.prototype,"targetTexture",[FP,UP,BP],Object.getOwnPropertyDescriptor(jP.prototype,"targetTexture"),jP.prototype),kP=jP))||kP)||kP)||kP)||kP));var dI,vI,gI,yI,AI,xI,bI,CI,SI;c.Camera=mI;const EI={parent:null,owner:null,subModelIdx:0};let wI=e("c1",(dI=Rc("cc.RenderableComponent"),vI=rl([Bv]),gI=rl(Bv),yI=el(),AI=Yc(),dI((CI=vc((bI=class extends y_{constructor(...e){super(...e),dc(this,"_materials",CI,this),dc(this,"_visFlags",SI,this),this._materialInstances=[],this._models=[]}get visibility(){return this._visFlags}set visibility(e){this._visFlags=e,this._onVisibilityChange(e)}get sharedMaterials(){return this._materials}set sharedMaterials(e){for(let t=0;t<e.length;t++)e[t]!==this._materials[t]&&this.setMaterial(e[t],t);if(e.length<this._materials.length){for(let t=e.length;t<this._materials.length;t++)this.setMaterial(null,t);this._materials.splice(e.length)}}get materials(){for(let e=0;e<this._materials.length;e++)this._materialInstances[e]=this.getMaterialInstance(e);return this._materialInstances}set materials(e){const t=e.length-this._materials.length;if(t>0)this._materials.length=e.length,this._materialInstances.length=e.length;else if(t<0)for(let e=this._materials.length-t;e<this._materials.length;++e)this.setMaterialInstance(null,e);for(let t=0;t<this._materialInstances.length;t++)this._materialInstances[t]!=e[t]&&this.setMaterialInstance(e[t],t)}get sharedMaterial(){return this.getMaterial(0)}getMaterial(e){return e<0||e>=this._materials.length?null:this._materials[e]}setMaterial(e,t){e&&e instanceof qv&&console.error("Can't set a material instance to a sharedMaterial slot"),this._materials[t]=e;const n=this._materialInstances[t];n&&(n.destroy(),this._materialInstances[t]=null),this._onMaterialModified(t,this._materials[t])}get material(){return this.getMaterialInstance(0)}set material(e){(1!==this._materials.length||this._materialInstances[0]||this._materials[0]!==e)&&this.setMaterialInstance(e,0)}getMaterialInstance(e){if(!this._materials[e])return null;if(!this._materialInstances[e]){EI.parent=this._materials[e],EI.owner=this,EI.subModelIdx=e;const t=new qv(EI);EI.parent=null,EI.owner=null,EI.subModelIdx=0,this.setMaterialInstance(t,e)}return this._materialInstances[e]}setMaterialInstance(e,t){if("number"==typeof e){P(12007);const n=e;e=t,t=n}const n=this._materialInstances[t];e&&e.parent?e!==n&&(this._materialInstances[t]=e,this._onMaterialModified(t,e)):(e!==this._materials[t]||n)&&this.setMaterial(e,t)}getRenderMaterial(e){return this._materialInstances[e]||this._materials[e]}_collectModels(){return this._models}_attachToScene(){}_detachFromScene(){}_onMaterialModified(e,t){}_onRebuildPSO(e,t){}_clearMaterials(){}_onVisibilityChange(e){}}).prototype,"_materials",[vI],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),SI=vc(bI.prototype,"_visFlags",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Gh.Enum.NONE}}),vc(bI.prototype,"sharedMaterials",[gI,yI,AI],Object.getOwnPropertyDescriptor(bI.prototype,"sharedMaterials"),bI.prototype),xI=bI))||xI));var TI,PI,II,RI,NI,DI;function MI(e){return"string"==typeof e||"number"==typeof e}c.RenderableComponent=wI,an(mI,"Camera",[{name:"CameraClearFlag",newName:"ClearFlag"}]),an(mI.prototype,"Camera.prototype",[{name:"color",newName:"clearColor"},{name:"depth",newName:"clearDepth"},{name:"stencil",newName:"clearStencil"}]),c.CameraComponent=mI,Fe.setClassAlias(mI,"cc.CameraComponent");let OI=e("be",Rc("cc.animation.HierarchyPath")((II=vc((PI=class{constructor(e){dc(this,"path",II,this),this.path=e||""}get(e){if(!(e instanceof ky))return P(3925),null;return e.getChildByPath(this.path)||(P(3926,e.name,this.path),null)}}).prototype,"path",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),TI=PI))||TI),zI=e("bf",Rc("cc.animation.ComponentPath")((DI=vc((NI=class{constructor(e){dc(this,"component",DI,this),this.component=e||""}get(e){if(!(e instanceof ky))return P(3927),null;return e.getComponent(this.component)||(P(3928,e.name,this.component),null)}}).prototype,"component",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),RI=NI))||RI);var LI,FI,UI,BI,kI;let jI=e("b0",Rc("cc.animation.UniformProxyFactory")((UI=vc((FI=class{constructor(e,t){dc(this,"passIndex",UI,this),dc(this,"uniformName",BI,this),dc(this,"channelIndex",kI,this),this.passIndex=t||0,this.uniformName=e||""}forTarget(e){const t=e.passes[this.passIndex],n=t.getHandle(this.uniformName);if(!n)throw new Error(`Material "${e.name}" has no uniform "${this.uniformName}"`);const i=$d.getPropertyTypeFromHandle(n);if(i===wd.BUFFER){const i=void 0===this.channelIndex?n:t.getHandle(this.uniformName,this.channelIndex,jo.FLOAT);if(!i)throw new Error(`Uniform "${this.uniformName} (in material ${e.name}) has no channel ${this.channelIndex}"`);return function(e,t){for(const n of e.shaderInfo.blocks)for(const e of n.members)if(e.name===t)return e.count>1;return!1}(t,this.uniformName)?{set:e=>{t.setUniformArray(i,e)}}:{set:e=>{t.setUniform(i,e)}}}if(i===wd.TEXTURE){const e=$d.getBindingFromHandle(n),i=t.properties[this.uniformName],o=i&&i.value?`${i.value}-texture`:Ld(i.type);let a=Yd.get(o);return a||(g(`Illegal texture default value: ${o}.`),a=Yd.get("default-texture")),{set:n=>{n||(n=a);const i=n.getGFXTexture();i&&i.width&&i.height&&(t.bindTexture(e,i),n instanceof Km&&t.bindSampler(e,Lm.getSampler(c.game._gfxDevice,n.getSamplerHash())))}}}throw new Error(`Animations are not available for uniforms with property type ${i}.`)}}).prototype,"passIndex",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),BI=vc(FI.prototype,"uniformName",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),kI=vc(FI.prototype,"channelIndex",[il],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),LI=FI))||LI);var GI,VI,HI,WI,qI,YI,XI,QI,KI,ZI,JI,$I,eR;function tR(e,t,n,i){var o,a,r,s,c;let l=new t,_=new t,u=new t,f=Rc(e)((r=vc((a=class{constructor(e,n,i){dc(this,"dataPoint",r,this),dc(this,"inTangent",s,this),dc(this,"outTangent",c,this),this.dataPoint=e||new t,this.inTangent=n||new t,this.outTangent=i||new t}lerp(e,t,o){const a=this.dataPoint,r=e.dataPoint;_=n(_,this.inTangent,o),u=n(u,e.outTangent,o);const s=t*t*t,c=t*t,f=s-2*c+t,h=-2*s+3*c,p=s-c;return l=n(l,a,2*s-3*c+1),l=i(l,l,_,f),l=i(l,l,r,h),l=i(l,l,u,p),l}getNoLerp(){return this.dataPoint}}).prototype,"dataPoint",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new t}}),s=vc(a.prototype,"inTangent",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new t}}),c=vc(a.prototype,"outTangent",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new t}}),o=a))||o;if(t===Qn){const e=f.prototype.lerp;f.prototype.lerp=function(t,n,i){const o=e.call(this,t,n,i);return Qn.normalize(o,o),o}}return f}e("b1",Rc("cc.animation.MorphWeightValueProxy")((HI=vc((VI=class{constructor(){dc(this,"subMeshIndex",HI,this),dc(this,"shapeIndex",WI,this)}forTarget(e){return{set:t=>{e.setWeight(t,this.subMeshIndex,this.shapeIndex)}}}}).prototype,"subMeshIndex",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),WI=vc(VI.prototype,"shapeIndex",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),GI=VI))||GI),e("b2",Rc("cc.animation.MorphWeightsValueProxy")((XI=vc((YI=class{constructor(){dc(this,"subMeshIndex",XI,this)}forTarget(e){return{set:t=>{e.setWeights(t,this.subMeshIndex)}}}}).prototype,"subMeshIndex",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qI=YI))||qI),e("b3",Rc("cc.animation.MorphWeightsAllValueProxy")(QI=class{forTarget(e){return{set:t=>{var n,i;const o=null!==(n=null===(i=e.mesh)||void 0===i?void 0:i.struct.primitives.length)&&void 0!==n?n:0;for(let n=0;n<o;++n)e.setWeights(t,n)}}}})||QI);const nR=e("bg",tR("cc.CubicSplineVec2Value",si,si.multiplyScalar,si.scaleAndAdd));c.CubicSplineVec2Value=nR;const iR=e("bh",tR("cc.CubicSplineVec3Value",Gn,Gn.multiplyScalar,Gn.scaleAndAdd));c.CubicSplineVec3Value=iR;const oR=e("bi",tR("cc.CubicSplineVec4Value",ui,ui.multiplyScalar,ui.scaleAndAdd));c.CubicSplineVec4Value=oR;const aR=e("bj",tR("cc.CubicSplineQuatValue",Qn,Qn.multiplyScalar,Qn.scaleAndAdd));c.CubicSplineQuatValue=aR;let rR=e("bk",Rc("cc.CubicSplineNumberValue")((JI=vc((ZI=class{constructor(e,t,n){dc(this,"dataPoint",JI,this),dc(this,"inTangent",$I,this),dc(this,"outTangent",eR,this),this.dataPoint=e,this.inTangent=t,this.outTangent=n}lerp(e,t,n){const i=this.dataPoint,o=e.dataPoint,a=t*t*t,r=t*t;return i*(2*a-3*r+1)+this.outTangent*n*(a-2*r+t)+o*(-2*a+3*r)+e.inTangent*n*(a-r)}getNoLerp(){return this.dataPoint}}).prototype,"dataPoint",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$I=vc(ZI.prototype,"inTangent",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),eR=vc(ZI.prototype,"outTangent",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),KI=ZI))||KI);c.CubicSplineNumberValue=rR;const sR=Symbol("CreateEval");var cR,lR,_R,uR,fR,hR,pR,mR,dR,vR,gR,yR,AR,xR,bR,CR;const SR=Symbol("NormalizedFollow"),ER=Symbol("ConvertAsTrsPath"),wR=Symbol("TrackBinding");let TR=e("b5",Rc("cc.animation.TrackPath")((_R=vc((lR=class e{constructor(){dc(this,"_paths",_R,this)}get length(){return this._paths.length}toProperty(e){return this._paths.push(e),this}toElement(e){return this._paths.push(e),this}toHierarchy(e){return this._paths.push(new OI(e)),this}toComponent(e){const t=new zI("string"==typeof e?e:Fe.getClassName(e));return this._paths.push(t),this}toCustomized(e){return this._paths.push(e),this}append(...e){const t=this._paths.concat(...e.map((e=>e._paths)));return this._paths=t,this}isPropertyAt(e){return"string"==typeof this._paths[e]}parsePropertyAt(e){return this._paths[e]}isElementAt(e){return"number"==typeof this._paths[e]}parseElementAt(e){return this._paths[e]}isHierarchyAt(e){return this._paths[e]instanceof OI}parseHierarchyAt(e){return this.isHierarchyAt(e),this._paths[e].path}isComponentAt(e){return this._paths[e]instanceof zI}parseComponentAt(e){return this.isComponentAt(e),this._paths[e].component}slice(t,n){const i=new e;return i._paths=this._paths.slice(t,n),i}trace(e,t,n){var i,o;return null!==(i=t)&&void 0!==i||(t=0),null!==(o=n)&&void 0!==o||(n=this._paths.length),this[SR](e,t,n)}[ER](){const{_paths:e}=this,t=e.length;let n,i=0,o="";for(;i<t;++i){const t=e[i];if(!(t instanceof OI))break;t.path&&(o?o+=`/${t.path}`:o=t.path)}if(i===t)return null;if(i!==t-1)return null;switch(e[i]){case"position":case"scale":case"rotation":case"eulerAngles":n=e[i];break;default:return null}return{node:o,property:n}}[SR](e,t,n){const{_paths:i}=this;let o=e;for(let e=t;e<n;++e){const t=i[e];if(MI(t)){if(!(t in o))return P(3929,t),null;o=o[t]}else o=t.get(o);if(null===o)break}return o}}).prototype,"_paths",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cR=lR))||cR),PR=Rc("cc.animation.TrackBinding")(uR=Uc((hR=vc((fR=class{constructor(){dc(this,"path",hR,this),dc(this,"proxy",pR,this)}parseTrsPath(){return this.proxy?null:this.path[ER]()}createRuntimeBinding(e,t,n){const{path:i,proxy:o}=this,a=i.length,r=a-1;if(0===a||!i.isPropertyAt(r)&&!i.isElementAt(r)||o){if(o){const t=i[SR](e,0,a);if(null===t)return null;const n=o.forTarget(t),r={setValue:e=>{n.set(e)}},s=n.get;return s&&(r.getValue=()=>s.call(n)),r}return R(3921),null}{const o=i.isPropertyAt(r)?i.parsePropertyAt(r):i.parseElementAt(r),c=i[SR](e,0,a-1);return null===c?null:t&&c instanceof ky&&("position"===(s=o)||"rotation"===s||"scale"===s||"eulerAngles"===s)?t.createPoseWriter(c,o,n):{setValue:e=>{c[o]=e},getValue:()=>c[o]}}var s}}).prototype,"path",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new TR}}),pR=vc(fR.prototype,"proxy",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uR=fR))||uR)||uR,IR=e("b4",Rc("cc.animation.Track")((vR=vc((dR=class{constructor(){dc(this,"_binding",vR,this)}get path(){return this._binding.path}set path(e){this._binding.path=e}get proxy(){return this._binding.proxy}set proxy(e){this._binding.proxy=e}get[wR](){return this._binding}channels(){return[]}range(){const e={min:1/0,max:-1/0};for(const t of this.channels())e.min=Math.min(e.min,t.curve.rangeMin),e.max=Math.max(e.max,t.curve.rangeMax);return e}[sR](e){throw new Error("No Impl")}}).prototype,"_binding",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new PR}}),mR=dR))||mR),RR=Rc("cc.animation.Channel")((AR=vc((yR=class{constructor(e){this.name="",dc(this,"_curve",AR,this),this._curve=e}get curve(){return this._curve}}).prototype,"_curve",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gR=yR))||gR,NR=Rc("cc.animation.SingleChannelTrack")((CR=vc((bR=class extends IR{constructor(){super(),dc(this,"_channel",CR,this),this._channel=new RR(this.createCurve())}get channel(){return this._channel}channels(){return[this._channel]}createCurve(){throw new Error("Not impl")}[sR](e){const{curve:t}=this._channel;return new DR(t)}}).prototype,"_channel",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xR=bR))||xR;class DR{constructor(e){this._curve=e}evaluate(e){return this._curve.evaluate(e)}}var MR;let OR=e("b6",Rc("cc.animation.RealTrack")(MR=class extends NR{createCurve(){return new Mf}})||MR);function zR(e){return 0===e.keyFramesCount?void 0:e}var LR,FR,UR,BR;const kR=["X","Y","Z","W"];let jR=e("b7",Rc("cc.animation.VectorTrack")((UR=vc((FR=class extends IR{constructor(){super(),dc(this,"_channels",UR,this),dc(this,"_nComponents",BR,this),this._channels=new Array(4);for(let e=0;e<this._channels.length;++e){const t=new RR(new Mf);t.name=kR[e],this._channels[e]=t}}get componentsCount(){return this._nComponents}set componentsCount(e){this._nComponents=e}channels(){return this._channels}[sR](){switch(this._nComponents){default:case 2:return new GR(zR(this._channels[0].curve),zR(this._channels[1].curve));case 3:return new VR(zR(this._channels[0].curve),zR(this._channels[1].curve),zR(this._channels[2].curve));case 4:return new HR(zR(this._channels[0].curve),zR(this._channels[1].curve),zR(this._channels[2].curve),zR(this._channels[3].curve))}}}).prototype,"_channels",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BR=vc(FR.prototype,"_nComponents",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),LR=FR))||LR);class GR{constructor(e,t){this._result=new si,this._x=e,this._y=t}evaluate(e,t){return this._x&&this._y||!t.getValue||si.copy(this._result,t.getValue()),this._x&&(this._result.x=this._x.evaluate(e)),this._y&&(this._result.y=this._y.evaluate(e)),this._result}}class VR{constructor(e,t,n){this._result=new Gn,this._x=e,this._y=t,this._z=n}evaluate(e,t){return this._x&&this._y&&this._z||!t.getValue||Gn.copy(this._result,t.getValue()),this._x&&(this._result.x=this._x.evaluate(e)),this._y&&(this._result.y=this._y.evaluate(e)),this._z&&(this._result.z=this._z.evaluate(e)),this._result}}class HR{constructor(e,t,n,i){this._result=new ui,this._x=e,this._y=t,this._z=n,this._w=i}evaluate(e,t){return this._x&&this._y&&this._z&&this._w||!t.getValue||ui.copy(this._result,t.getValue()),this._x&&(this._result.x=this._x.evaluate(e)),this._y&&(this._result.y=this._y.evaluate(e)),this._z&&(this._result.z=this._z.evaluate(e)),this._w&&(this._result.w=this._w.evaluate(e)),this._result}}var WR;let qR=e("b8",Rc("cc.animation.QuatTrack")(WR=class extends NR{createCurve(){return new vh}[sR](){return new YR(this.channels()[0].curve)}})||WR);class YR{constructor(e){this._result=new Qn,this._curve=e}evaluate(e){return this._curve.evaluate(e,this._result),this._result}}var XR,QR,KR;const ZR=["Red","Green","Blue","Alpha"];let JR=e("b9",Rc("cc.animation.ColorTrack")((KR=vc((QR=class extends IR{constructor(){super(),dc(this,"_channels",KR,this),this._channels=new Array(4);for(let e=0;e<this._channels.length;++e){const t=new RR(new Mf);t.name=ZR[e],this._channels[e]=t}}channels(){return this._channels}[sR](){return new $R(zR(this._channels[0].curve),zR(this._channels[1].curve),zR(this._channels[2].curve),zR(this._channels[3].curve))}}).prototype,"_channels",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XR=QR))||XR);class $R{constructor(e,t,n,i){this._result=new Un,this._x=e,this._y=t,this._z=n,this._w=i}evaluate(e,t){return this._x&&this._y&&this._z&&this._w||!t.getValue||Un.copy(this._result,t.getValue()),this._x&&(this._result.r=this._x.evaluate(e)),this._y&&(this._result.g=this._y.evaluate(e)),this._z&&(this._result.b=this._z.evaluate(e)),this._w&&(this._result.a=this._w.evaluate(e)),this._result}}var eN,tN,nN;const iN=["Width","Height"];let oN=e("ba",Rc("cc.animation.SizeTrack")((nN=vc((tN=class extends IR{constructor(){super(),dc(this,"_channels",nN,this),this._channels=new Array(2);for(let e=0;e<this._channels.length;++e){const t=new RR(new Mf);t.name=iN[e],this._channels[e]=t}}channels(){return this._channels}[sR](){return new aN(zR(this._channels[0].curve),zR(this._channels[1].curve))}}).prototype,"_channels",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eN=tN))||eN);class aN{constructor(e,t){this._result=new pi,this._width=e,this._height=t}evaluate(e,t){if((!this._width||!this._height)&&t.getValue){const e=t.getValue();this._result.x=e.x,this._result.y=e.y}return this._width&&(this._result.width=this._width.evaluate(e)),this._height&&(this._result.height=this._height.evaluate(e)),this._result}}var rN;let sN=e("bb",Rc("cc.animation.ObjectTrack")(rN=class extends NR{createCurve(){return new Ph}})||rN);const cN=Symbol("BakeNodeCurves");class lN{static getOrExtract(e){let t=lN.pool.get(e);if(!t||t.samples!==e.sample){t&&c.director.root.dataPoolManager.releaseAnimationClip(e);const n=Math.ceil(e.sample*e.duration)+1,i=e.sample;t=e[cN](0,i,n),lN.pool.set(e,t)}return t}static destroy(e){lN.pool.delete(e)}}e("co",lN),lN.pool=new Map;class _N{constructor(e){let t,n;this.ratios=void 0,this._findRatio=void 0,this.ratios=e;let i=!0;for(let o=1,a=e.length;o<a;o++)if(t=e[o]-e[o-1],1===o)n=t;else if(Math.abs(t-n)>1e-6){i=!1;break}this._findRatio=i?pN:xc}sample(e){return this._findRatio(this.ratios,e)}}e("f$",_N),c.RatioSampler=_N;class uN{static Bezier(e){return e}constructor(e,t){this.types=void 0,this.type=null,this._values=[],this._lerp=void 0,this._duration=void 0,this._array=void 0,this._duration=t,this._values=e.values;const n=e=>"string"==typeof e?e:Array.isArray(e)?e[0]===e[1]&&e[2]===e[3]?uN.Linear:uN.Bezier(e):uN.Linear;if(void 0!==e.easingMethod)this.type=n(e.easingMethod);else if(Array.isArray(e.easingMethods))this.types=e.easingMethods.map(n);else if(void 0!==e.easingMethods){this.types=new Array(this._values.length).fill(null);for(const t of Object.keys(e.easingMethods))this.types[t]=n(e.easingMethods[t])}else this.type=null;const i=e.values[0];(void 0===e.interpolate||e.interpolate)&&(this._lerp=mN(i)),void 0!==e._arrayLength&&(this._array=new Array(e._arrayLength))}hasLerp(){return!!this._lerp}valueAt(e){if(void 0===this._array){const t=this._values[e];return t&&t.getNoLerp?t.getNoLerp():t}for(let t=0;t<this._array.length;++t)this._array[t]=this._values[this._array.length*e+t];return this._array}valueBetween(e,t,n,i,o){if(this._lerp){const a=this.types?this.types[t]:this.type,r=o-n;let s=(e-n)/r;if(a&&(s=hN(s,a)),void 0===this._array){const e=this._values[t],n=this._values[i];return this._lerp(e,n,s,r*this._duration)}for(let e=0;e<this._array.length;++e){const n=this._values[this._array.length*t+e],o=this._values[this._array.length*i+e];this._array[e]=this._lerp(n,o,s,r*this._duration)}return this._array}if(void 0===this._array)return this.valueAt(t);for(let e=0;e<this._array.length;++e)this._array[e]=this._values[this._array.length*t+e];return this._array}empty(){return 0===this._values.length}constant(){return 1===this._values.length}}function fN(e,t,n){let i=t.sample(n);if(i<0)if(i=~i,i<=0)i=0;else{if(!(i>=t.ratios.length))return e.valueBetween(n,i-1,t.ratios[i-1],i,t.ratios[i]);i=t.ratios.length-1}return e.valueAt(i)}function hN(e,t){if("string"==typeof t){const n=hf[t];n?e=n(e):R(3906,t)}else Array.isArray(t)&&(e=oh(t,e));return e}function pN(e,t){const n=e.length-1;if(0===n)return 0;const i=e[0];if(t<i)return 0;const o=e[n];if(t>o)return n;const a=(t=(t-i)/(o-i))/(1/n),r=0|a,s=1e-6;return a-r<s?r:r+1-a<s?r+1:~(r+1)}e("g0",uN),uN.Linear=null,c.AnimCurve=uN,e("g1",class{constructor(){this.events=[]}add(e,t){this.events.push({func:e||"",params:t||[]})}}),c.sampleAnimationCurve=fN;const mN=(()=>{function e(e,t,n,i){return e.lerp(t,n,i)}return t=>{if(null!==t){if("number"==typeof t)return xn;if("object"==typeof t&&t.constructor){if(t instanceof Qn)return function(){const e=new Qn;return(t,n,i)=>Qn.slerp(e,t,n,i)}();if(t instanceof Ve)return function(e){const t=new e;return(n,i,o)=>(e.lerp(t,n,i,o),t)}(t.constructor);if(t.constructor===Number)return xn;if("function"==typeof t.lerp)return e}}}})();var dN,vN,gN,yN,AN,xN;let bN=Rc("cc.animation.UntypedTrackChannel")((gN=vc((vN=class extends RR{constructor(){super(new Mf),dc(this,"property",gN,this)}}).prototype,"property",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),dN=vN))||dN,CN=Rc("cc.animation.UntypedTrack")((xN=vc((AN=class extends IR{constructor(...e){super(...e),dc(this,"_channels",xN,this)}channels(){return this._channels}[sR](e){if(!e.getValue)throw new Error(O(3930));const t=e=>{var t;return null===(t=this._channels.find((t=>t.property===e)))||void 0===t?void 0:t.curve},n=e.getValue();switch(!0){default:throw new Error(O(3931));case n instanceof si:return new GR(t("x"),t("y"));case n instanceof Gn:return new VR(t("x"),t("y"),t("z"));case n instanceof ui:return new HR(t("x"),t("y"),t("z"),t("w"));case n instanceof Un:return new $R(t("r"),t("g"),t("b"),t("a"));case n instanceof pi:return new aN(t("width"),t("height"))}}addChannel(e){const t=new bN;return t.property=e,this._channels.push(t),t}upgrade(e){const t=(e,t)=>{const n=this.channels().find((t=>t.property===e));n&&(t.name=n.name,t.curve.assignSorted(Array.from(n.curve.times()),Array.from(n.curve.values())))},n=e(this.path,this.proxy);switch(n){default:break;case"vec2":case"vec3":case"vec4":{const e=new jR;e.path=this.path,e.proxy=this.proxy,e.componentsCount="vec2"===n?2:"vec3"===n?3:4;const[i,o,a,r]=e.channels();switch(n){case"vec4":t("w",r);case"vec3":t("z",a);default:case"vec2":t("x",i),t("y",o)}return e}case"color":{const e=new JR,[n,i,o,a]=e.channels();return t("r",n),t("g",i),t("b",o),t("a",a),t("x",n),t("y",i),t("z",o),t("w",a),e}case"size":}return null}}).prototype,"_channels",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yN=AN))||yN;class SN{constructor(e){this._keys=[],this._curves=[],this._commonTargets=[],this._ratioSamplers=[],this._runtimeCurves=void 0,this._data=null,this._duration=void 0,this._duration=e}get keys(){return this._keys}set keys(e){this._keys=e}get curves(){return this._curves}set curves(e){this._curves=e,delete this._runtimeCurves}get commonTargets(){return this._commonTargets}set commonTargets(e){this._commonTargets=e}get data(){return this._data}getPropertyCurves(){return this._runtimeCurves||this._createPropertyCurves(),this._runtimeCurves}toTracks(){const e=[],{keys:t,curves:n,commonTargets:i}=this,o=(e,t,n)=>{const i=new TR;for(const e of t)"string"==typeof e?i.toProperty(e):"number"==typeof e?i.toElement(e):e instanceof OI?i.toHierarchy(e.path):e instanceof zI?i.toComponent(e.component):i.toCustomized(e);e.path=i,e.proxy=n},a=i.map((t=>{const n=new CN;return o(n,t.modifiers,t.valueAdapter),e.push(n),n}));for(const i of n){var r;const n=i.data,s=n.values;if(0===s.length)continue;const c=n.keys<0?[0]:t[n.keys],l=s[0],_=null===(r=n.interpolate)||void 0===r||r;n._arrayLength;const u=new wN(n,c.length),f=e=>{o(e,i.modifiers,i.valueAdapter)};let h;if("number"==typeof i.commonTarget){if(!s.every((e=>"number"==typeof e))){P(3932);continue}if(i.valueAdapter||1!==i.modifiers.length||"string"!=typeof i.modifiers[0]){P(3933);continue}const e=i.modifiers[0],t=a[i.commonTarget],{curve:n}=t.addChannel(e);h=n}(()=>{if("number"==typeof l){if(!s.every((e=>"number"==typeof e)))return void P(3934);let t;if(h)t=h;else{const n=new OR;f(n),e.push(n),t=n.channel.curve}const n=_?hl.LINEAR:hl.CONSTANT;return t.assignSorted(c,s.map((e=>({value:e,interpolationMode:n})))),void u.convert(t)}if("object"==typeof l)switch(!0){default:break;case EN(s,si):case EN(s,Gn):case EN(s,ui):{const t=l instanceof si?2:l instanceof Gn?3:4,n=new jR;f(n),n.componentsCount=t;const[{curve:i},{curve:o},{curve:a},{curve:r}]=n.channels(),h=_?hl.LINEAR:hl.CONSTANT,p=e=>({value:e,interpolationMode:h});switch(t){case 4:r.assignSorted(c,s.map((e=>p(e.w)))),u.convert(r);case 3:a.assignSorted(c,s.map((e=>p(e.z)))),u.convert(a);default:i.assignSorted(c,s.map((e=>p(e.x)))),u.convert(i),o.assignSorted(c,s.map((e=>p(e.y)))),u.convert(o)}return void e.push(n)}case EN(s,Qn):{const t=new qR;f(t);const n=_?ph.SLERP:ph.CONSTANT;return t.channel.curve.assignSorted(c,s.map((e=>({value:Qn.clone(e),interpolationMode:n})))),u.convertQuatCurve(t.channel.curve),void e.push(t)}case EN(s,Un):{const t=new JR;f(t);const[{curve:n},{curve:i},{curve:o},{curve:a}]=t.channels(),r=_?hl.LINEAR:hl.CONSTANT,l=e=>({value:e,interpolationMode:r});return n.assignSorted(c,s.map((e=>l(e.r)))),u.convert(n),i.assignSorted(c,s.map((e=>l(e.g)))),u.convert(i),o.assignSorted(c,s.map((e=>l(e.b)))),u.convert(o),a.assignSorted(c,s.map((e=>l(e.a)))),u.convert(a),void e.push(t)}case EN(s,pi):{const t=new oN;f(t);const[{curve:n},{curve:i}]=t.channels(),o=_?hl.LINEAR:hl.CONSTANT,a=e=>({value:e,interpolationMode:o});return n.assignSorted(c,s.map((e=>a(e.width)))),u.convert(n),i.assignSorted(c,s.map((e=>a(e.height)))),u.convert(i),void e.push(t)}case EN(s,rR):{const t=new OR;f(t);const n=_?hl.CUBIC:hl.CONSTANT;return t.channel.curve.assignSorted(c,s.map((e=>({value:e.dataPoint,leftTangent:e.inTangent,rightTangent:e.outTangent,interpolationMode:n})))),void e.push(t)}case EN(s,nR):case EN(s,iR):case EN(s,oR):{const t=l instanceof nR?2:l instanceof iR?3:4,n=new jR;f(n),n.componentsCount=t;const[i,o,a,r]=n.channels(),u=_?hl.LINEAR:hl.CONSTANT,h=(e,t,n)=>({value:e,leftTangent:t,rightTangent:n,interpolationMode:u});switch(t){case 4:r.curve.assignSorted(c,s.map((e=>h(e.dataPoint.w,e.inTangent.w,e.outTangent.w))));case 3:a.curve.assignSorted(c,s.map((e=>h(e.dataPoint.z,e.inTangent.z,e.outTangent.z))));default:i.curve.assignSorted(c,s.map((e=>h(e.dataPoint.y,e.inTangent.y,e.outTangent.y)))),o.curve.assignSorted(c,s.map((e=>h(e.dataPoint.x,e.inTangent.x,e.outTangent.x))))}return void e.push(n)}case s.every((e=>e instanceof aR)):P(3935)}const t=new sN;f(t),t.channel.curve.assignSorted(c,s),e.push(t)})()}return e}_createPropertyCurves(){this._ratioSamplers=this._keys.map((e=>new _N(e.map((e=>e/this._duration))))),this._runtimeCurves=this._curves.map((e=>({curve:new uN(e.data,this._duration),modifiers:e.modifiers,valueAdapter:e.valueAdapter,sampler:this._ratioSamplers[e.data.keys],commonTarget:e.commonTarget})))}}function EN(e,t){return e.every((e=>e instanceof t))}class wN{constructor(e,t){this._easingMethods=void 0;const{easingMethods:n}=e;Array.isArray(n)?0===n.length&&0!==t?this._easingMethods=new Array(t).fill(null):this._easingMethods=n:this._easingMethods=void 0===n?new Array(t).fill(e.easingMethod):Array.from({length:t},((e,t)=>{var i;return null!==(i=n[t])&&void 0!==i?i:null}))}get nil(){return!this._easingMethods||this._easingMethods.every((e=>null==e))}convert(e){const{_easingMethods:t}=this;if(!t)return;const n=e.keyFramesCount;if(e.keyFramesCount<2)return;Array.isArray(t)&&t.length;const i=n-1;for(let n=0;n<i;++n){const i=t[n];i&&(Array.isArray(i)?RN(i,e.getKeyframeTime(n),e.getKeyframeValue(n),e.getKeyframeTime(n+1),e.getKeyframeValue(n+1)):TN(i,e,n))}}convertQuatCurve(e){const{_easingMethods:t}=this;if(!t)return;const n=e.keyFramesCount;if(e.keyFramesCount<2)return;Array.isArray(t)&&t.length;const i=n-1;for(let n=0;n<i;++n){const i=t[n];i&&(Array.isArray(i)?e.getKeyframeValue(n).easingMethod=i.slice():PN(i,e,n))}}}function TN(e,t,n){t.keyFramesCount;const i=t.getKeyframeValue(n),o=IN[e];o===pf.CONSTANT?i.interpolationMode=hl.CONSTANT:(i.interpolationMode=hl.LINEAR,i.easingMethod=o)}function PN(e,t,n){t.keyFramesCount;const i=t.getKeyframeValue(n),o=IN[e];i.easingMethod=o}const IN={constant:pf.CONSTANT,linear:pf.LINEAR,quadIn:pf.QUAD_IN,quadOut:pf.QUAD_OUT,quadInOut:pf.QUAD_IN_OUT,quadOutIn:pf.QUAD_OUT_IN,cubicIn:pf.CUBIC_IN,cubicOut:pf.CUBIC_OUT,cubicInOut:pf.CUBIC_IN_OUT,cubicOutIn:pf.CUBIC_OUT_IN,quartIn:pf.QUART_IN,quartOut:pf.QUART_OUT,quartInOut:pf.QUART_IN_OUT,quartOutIn:pf.QUART_OUT_IN,quintIn:pf.QUINT_IN,quintOut:pf.QUINT_OUT,quintInOut:pf.QUINT_IN_OUT,quintOutIn:pf.QUINT_OUT_IN,sineIn:pf.SINE_IN,sineOut:pf.SINE_OUT,sineInOut:pf.SINE_IN_OUT,sineOutIn:pf.SINE_OUT_IN,expoIn:pf.EXPO_IN,expoOut:pf.EXPO_OUT,expoInOut:pf.EXPO_IN_OUT,expoOutIn:pf.EXPO_OUT_IN,circIn:pf.CIRC_IN,circOut:pf.CIRC_OUT,circInOut:pf.CIRC_IN_OUT,circOutIn:pf.CIRC_OUT_IN,elasticIn:pf.ELASTIC_IN,elasticOut:pf.ELASTIC_OUT,elasticInOut:pf.ELASTIC_IN_OUT,elasticOutIn:pf.ELASTIC_OUT_IN,backIn:pf.BACK_IN,backOut:pf.BACK_OUT,backInOut:pf.BACK_IN_OUT,backOutIn:pf.BACK_OUT_IN,bounceIn:pf.BOUNCE_IN,bounceOut:pf.BOUNCE_OUT,bounceInOut:pf.BOUNCE_IN_OUT,bounceOutIn:pf.BOUNCE_OUT_IN,smooth:pf.SMOOTH,fade:pf.FADE};function RN(e,t,n,i,o){const[a,r,s,c]=e,{value:l}=n,{value:_}=o,u=3*(i-t),f=3*(_-l),h=a*u,p=r*f,m=(1-s)*u,d=(1-c)*f,v=1/3,g=p/h,y=Math.sqrt(h*h+p*p)*v,A=d/m,x=Math.sqrt(m*m+d*d)*v;var b;n.interpolationMode=hl.CUBIC,n.tangentWeightMode=(b=n.tangentWeightMode)===ml.NONE?ml.RIGHT:b===ml.LEFT?ml.BOTH:b,n.rightTangent=g,n.rightTangentWeight=y,o.tangentWeightMode=function(e){return e===ml.NONE?ml.LEFT:e===ml.RIGHT?ml.BOTH:e}(o.tangentWeightMode),o.leftTangent=A,o.leftTangentWeight=x}var NN,DN,MN,ON,zN,LN,FN,UN,BN,kN,jN,GN,VN,HN,WN,qN,YN,XN,QN,KN,ZN,JN,$N,eD;function tD(){throw new Error("split() only valid in Editor.")}Rc("cc.animation.ExoticAnimation")((DN=vc((NN=class{constructor(){dc(this,"_nodeAnimations",DN,this)}createEvaluator(e){return new lD(this._nodeAnimations,e)}addNodeAnimation(e){const t=new nD(e);return this._nodeAnimations.push(t),t}collectAnimatedJoints(){return Array.from(new Set(this._nodeAnimations.map((({path:e})=>e))))}split(e,t){return tD()}toHashString(){return this._nodeAnimations.map((e=>e.toHashString())).join("\n")}}).prototype,"_nodeAnimations",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),NN));let nD=Rc("cc.animation.ExoticNodeAnimation")((zN=vc((ON=class{constructor(e){dc(this,"_path",zN,this),dc(this,"_position",LN,this),dc(this,"_rotation",FN,this),dc(this,"_scale",UN,this),this._path=e}createPosition(e,t){this._position=new cD(e,new rD(t))}createRotation(e,t){this._rotation=new cD(e,new sD(t))}createScale(e,t){this._scale=new cD(e,new rD(t))}createEvaluator(e){return new _D(this._path,this._position,this._rotation,this._scale,e)}split(e,t,n){return tD()}get path(){return this._path}toHashString(){var e,t,n,i,o,a;return`${this._path}\n${null!==(e=null===(t=this._position)||void 0===t?void 0:t.toHashString())&&void 0!==e?e:""}${null!==(n=null===(i=this._scale)||void 0===i?void 0:i.toHashString())&&void 0!==n?n:""}${null!==(o=null===(a=this._rotation)||void 0===a?void 0:a.toHashString())&&void 0!==o?o:""}`}}).prototype,"_path",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),LN=vc(ON.prototype,"_position",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),FN=vc(ON.prototype,"_rotation",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),UN=vc(ON.prototype,"_scale",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),MN=ON))||MN;function iD(e){return e.toPrecision(2)}function oD(e){return e.map(iD).join(" ")}let aD=Rc("cc.animation.ExoticVectorLikeTrackValues")((jN=vc((kN=class{constructor(e){dc(this,"_values",jN,this),dc(this,"_isQuantized",GN,this),this._values=e,this._isQuantized=!1}get precision(){return this._isQuantized?this._values.originalPrecision:pD(this._values)}quantize(e){this._isQuantized,this._values=function(e,t){const n=fD[t],i=1<<n.BYTES_PER_ELEMENT;let o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;e.forEach((e=>{o=Math.min(e,o),a=Math.max(e,a)}));const r=a-o,s=n.from(e,(e=>(e-o)/r*i));return new mD(pD(e),s,r,o)}(this._values,e),this._isQuantized=!0}toHashString(){const{_isQuantized:e,_values:t}=this;return`${e} ${e?t.toHashString():oD(t)}`}}).prototype,"_values",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GN=vc(kN.prototype,"_isQuantized",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BN=kN))||BN,rD=Rc("cc.animation.ExoticVec3TrackValues")(VN=class e extends aD{static imitate(t,n){const i=new e(t);return n._isQuantized&&i.quantize(n._values.quantizationType),i}get(e,t){const{_values:n,_isQuantized:i}=this;i?gD(n,e,t):Gn.fromArray(t,n,3*e)}lerp(e,t,n,i,o,a){const{_values:r,_isQuantized:s}=this;s?(gD(r,e,i),gD(r,t,o)):(Gn.fromArray(i,r,3*e),Gn.fromArray(o,r,3*t)),Gn.lerp(a,i,o,n)}})||VN,sD=Rc("cc.animation.ExoticQuatTrackValues")(HN=class e extends aD{static imitate(t,n){const i=new e(t);return n._isQuantized&&i.quantize(n._values.quantizationType),i}get(e,t){const{_values:n,_isQuantized:i}=this;i?yD(n,e,t):Qn.fromArray(t,n,4*e)}lerp(e,t,n,i,o,a){const{_values:r,_isQuantized:s}=this;s?(yD(r,e,i),yD(r,t,o)):(Qn.fromArray(i,r,4*e),Qn.fromArray(o,r,4*t)),Qn.slerp(a,i,o,n)}})||HN,cD=Rc("cc.animation.ExoticTrack")((YN=vc((qN=class{constructor(e,t){dc(this,"times",YN,this),dc(this,"values",XN,this),this.times=e,this.values=t}toHashString(){const{times:e,values:t}=this;return`times: ${oD(e)}; values: ${t.toHashString()}`}}).prototype,"times",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XN=vc(qN.prototype,"values",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),WN=qN))||WN;class lD{constructor(e,t){this._nodeEvaluations=void 0,this._nodeEvaluations=e.map((e=>e.createEvaluator(t)))}evaluate(e){this._nodeEvaluations.forEach((t=>{t.evaluate(e)}))}}class _D{constructor(e,t,n,i,o){this._position=null,this._rotation=null,this._scale=null,t&&(this._position=vD(t.times,t.values,Gn,e,"position",o)),n&&(this._rotation=vD(n.times,n.values,Qn,e,"rotation",o)),i&&(this._scale=vD(i.times,i.values,Gn,e,"scale",o))}evaluate(e){if(this._position){const t=this._position.evaluator.evaluate(e);this._position.runtimeBinding.setValue(t)}if(this._rotation){const t=this._rotation.evaluator.evaluate(e);this._rotation.runtimeBinding.setValue(t)}if(this._scale){const t=this._scale.evaluator.evaluate(e);this._scale.runtimeBinding.setValue(t)}}}class uD{constructor(e,t,n){this._times=void 0,this._inputSampleResultCache={just:!1,index:-1,nextIndex:-1,ratio:0},this._values=void 0,this._prevValue=void 0,this._nextValue=void 0,this._resultValue=void 0,this._times=e,this._values=t,this._prevValue=new n,this._nextValue=new n,this._resultValue=new n}evaluate(e){const{_times:t,_values:n,_resultValue:i}=this;if(0===t.length)return i;const o=function(e,t,n){const i=e.length,o=e[0],a=e[i-1];if(t<o)n.just=!0,n.index=0;else if(t>a)n.just=!0,n.index=i-1;else{const i=xc(e,t);if(i>=0)n.just=!0,n.index=i;else{const o=~i,a=o-1,r=e[a],s=e[o],c=(t-e[a])/(s-r);n.just=!1,n.index=a,n.nextIndex=o,n.ratio=c}}return n}(t,e,this._inputSampleResultCache);return o.just?n.get(o.index,i):n.lerp(o.index,o.nextIndex,o.ratio,this._prevValue,this._nextValue,i),i}}const fD={uint8:Uint8Array,uint16:Uint16Array};var hD;function pD(e){switch(e.BYTES_PER_ELEMENT){default:case 4:return hD.FLOAT_32;case 8:return hD.FLOAT_64}}!function(e){e[e.FLOAT_32=0]="FLOAT_32",e[e.FLOAT_64=1]="FLOAT_64"}(hD||(hD={}));let mD=Rc("cc.animation.QuantizedFloatArray")((ZN=vc((KN=class{get quantizationType(){switch(this.values.BYTES_PER_ELEMENT){default:case 1:return"uint8";case 2:return"uint16"}}constructor(e,t,n,i=0){dc(this,"originalPrecision",ZN,this),dc(this,"min",JN,this),dc(this,"extent",$N,this),dc(this,"values",eD,this),this.originalPrecision=e,this.values=t,this.extent=n,this.min=i}toHashString(){const{originalPrecision:e,min:t,extent:n,values:i}=this;return`${e} ${iD(t)} ${iD(n)} ${i.join(" ")}`}}).prototype,"originalPrecision",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),JN=vc(KN.prototype,"min",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$N=vc(KN.prototype,"extent",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eD=vc(KN.prototype,"values",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),QN=KN))||QN;function dD(e,t){return e.values[t]/(1<<e.values.BYTES_PER_ELEMENT)*e.extent+e.min}function vD(e,t,n,i,o,a){const r=new PR;r.path=(new TR).toHierarchy(i).toProperty(o);const s=a(r);return s?{runtimeBinding:s,evaluator:new uD(e,t,n)}:null}function gD(e,t,n){Gn.set(n,dD(e,3*t+0),dD(e,3*t+1),dD(e,3*t+2))}function yD(e,t,n){Qn.set(n,dD(e,4*t+0),dD(e,4*t+1),dD(e,4*t+2),dD(e,4*t+3))}var AD,xD,bD,CD,SD,ED,wD,TD,PD,ID,RD,ND,DD;const MD=Symbol("SearchForRootBonePath"),OD=Symbol("ExoticAnimation");let zD=e("fY",Rc("cc.AnimationClip")((DD=ND=class e extends $l{constructor(...e){super(...e),dc(this,"sample",bD,this),dc(this,"speed",CD,this),dc(this,"wrapMode",SD,this),dc(this,"enableTrsBlending",ED,this),dc(this,"_duration",wD,this),dc(this,"_hash",TD,this),this.frameRate=0,dc(this,"_tracks",PD,this),dc(this,"_exoticAnimation",ID,this),this._legacyData=void 0,this._legacyDataDirty=!1,dc(this,"_events",RD,this),this._runtimeEvents={ratios:[],eventGroups:[]}}static createWithSpriteFrames(t,n){const i=new e;i.sample=n||i.sample,i.duration=t.length/i.sample;const o=1/i.sample,a=new sN;return a.path=(new TR).toComponent("cc.Sprite").toProperty("spriteFrame"),a.channels()[0].curve.assignSorted(t.map(((e,t)=>[o*t,e]))),i}get duration(){return this._duration}set duration(e){this._duration=e}get tracksCount(){return this._tracks.length}get tracks(){return this._tracks}get hash(){var e,t;if(this._hash)return this._hash;const n=`Exotic:${null!==(e=null===(t=this._exoticAnimation)||void 0===t?void 0:t.toHashString())&&void 0!==e?e:""}`;return this._hash=jr(n,666)}get events(){return this._events}set events(e){this._events=e;const t=[],n=[],i=this.events.sort(((e,t)=>e.frame-t.frame)),o=i.length;for(let e=0;e<o;++e){const o=i[e],a=o.frame/this._duration;let r=t.findIndex((e=>e===a));r<0&&(r=t.length,t.push(a),n.push({events:[]})),n[r].events.push({functionName:o.func,parameters:o.params})}this._runtimeEvents={ratios:t,eventGroups:n}}get[OD](){return this._exoticAnimation}set[OD](e){this._exoticAnimation=e}onLoaded(){this.frameRate=this.sample,this.events=this._events}range(){const e={min:1/0,max:-1/0},{_tracks:t}=this,n=t.length;for(let i=0;i<n;++i){const n=t[i].range();e.min=Math.min(e.min,n.min),e.max=Math.max(e.max,n.max)}return e}getTrack(e){return this._tracks[e]}addTrack(e){const t=this._tracks.length;return this._tracks.push(e),t}removeTrack(e){this._tracks.splice(e,1)}clearTracks(){this._tracks.length=0}createEventEvaluator(e){return new VD(e,this._runtimeEvents.ratios,this._runtimeEvents.eventGroups,this.wrapMode)}createEvaluator(e){const{target:t}=e;return this._createEvalWithBinder(t,(n=>{const i=n.createRuntimeBinding(t,this.enableTrsBlending?e.pose:void 0,!1);return null!=i?i:void 0}),e.rootMotion)}destroy(){var e;return(null===(e=c.director.root)||void 0===e?void 0:e.dataPoolManager)&&c.director.root.dataPoolManager.releaseAnimationClip(this),lN.destroy(this),super.destroy()}[cN](e,t,n){const i=1/t,o=this._collectAnimatedJoints(),a=o.length,r={};for(let e=0;e<a;++e)r[o[e]]={transforms:Array.from({length:n},(()=>new ii))};const s=o.reduce(((e,t)=>(e[t]=new UD,e)),{});for(const e in s){const t=s[e],n=e.lastIndexOf("/");if(n>=0){const i=e.substring(0,n),o=s[i];o&&(t.parent=o)}}const c=this._createEvalWithBinder(void 0,(e=>{const t=e.parseTrsPath();if(!t)return;const n=s[t.node];return n?GD(n,t.property):void 0}),void 0);for(let t=0;t<n;++t){const n=e+i*t;c.evaluate(n);for(let e=0;e<a;++e){const n=o[e];ii.copy(r[n].transforms[t],s[n].globalTransform)}for(let e=0;e<a;++e){const t=o[e];s[t].invalidate()}}return{samples:t,frames:n,joints:r}}upgradeUntypedTracks(e){const t=[],n=[],{_tracks:i}=this,o=i.length;for(let a=0;a<o;++a){const o=i[a];if(!(o instanceof CN))continue;const r=o.upgrade(e);r&&(t.push(r),n.push(o))}const a=n.length;for(let e=0;e<a;++e)Le.remove(i,n[e]);i.push(...t)}[MD](){return this._searchForRootBonePath()}get keys(){return this._getLegacyData().keys}set keys(e){this._legacyDataDirty=!0,this._getLegacyData().keys=e}get curves(){return this._legacyDataDirty=!0,this._getLegacyData().curves}set curves(e){this._getLegacyData().curves=e}get commonTargets(){return this._getLegacyData().commonTargets}set commonTargets(e){this._legacyDataDirty=!0,this._getLegacyData().commonTargets=e}get data(){return this._getLegacyData().data}getPropertyCurves(){return this._getLegacyData().getPropertyCurves()}get eventGroups(){return this._runtimeEvents.eventGroups}updateEventDatas(){}hasEvents(){return 0!==this.events.length}syncLegacyData(){this._legacyData&&(this._fromLegacy(this._legacyData),this._legacyData=void 0)}_createEvalWithBinder(e,t,n){this._legacyDataDirty&&(this._legacyDataDirty=!1,this.syncLegacyData());const i=[];let o;n&&(o=this._createRootMotionEvaluation(e,n,i));const a=[];let r;const{_tracks:s}=this,c=s.length;for(let e=0;e<c;++e){const n=s[e];if(i.includes(n))continue;const o=t(n[wR]);if(!o)continue;const r=n[sR](o);a.push({binding:o,trackEval:r})}return this._exoticAnimation&&(r=this._exoticAnimation.createEvaluator(t)),new LD(a,r,o)}_createRootMotionEvaluation(e,t,n){if(!(e instanceof ky))return void R(3920);const i=this._searchForRootBonePath();if(!i)return void P(3923);const o=e.getChildByPath(i);if(!o)return void P(3924);const a=new FD,r=[],{_tracks:s}=this,c=s.length;for(let e=0;e<c;++e){const t=s[e],{[wR]:o}=t,c=o.parseTrsPath();if(!c)continue;if(c.node!==i)continue;n.push(t);const l=GD(a,c.property);if(!l)continue;const _=t[sR](l);r.push({binding:l,trackEval:_})}return new kD(o,this._duration,a,r)}_searchForRootBonePath(){const e=this._tracks.map((e=>{const t=e[wR].parseTrsPath();if(t){const e=t.node;return{path:e,rank:e.split("/").length}}return{path:"",rank:0}}));e.sort(((e,t)=>e.rank-t.rank));const t=e.findIndex((e=>0!==e.rank));if(t<0)return"";const n=e.length,i=e[t];let o=!0;for(let a=t+1;a<n;++a){const t=e[a];if(t.rank!==i.rank)break;if(t.path!==i.path){o=!1;break}}return o?i.path:""}_getLegacyData(){return this._legacyData||(this._legacyData=this._toLegacy()),this._legacyData}_toLegacy(){const e=new SN(this._duration);return e.keys=[],e.curves=[],e.commonTargets=[],e}_fromLegacy(e){const t=e.toTracks(),n=t.length;for(let e=0;e<n;++e)this.addTrack(t[e])}_collectAnimatedJoints(){const e=new Set,{_tracks:t}=this,n=t.length;for(let i=0;i<n;++i){const n=t[i][wR].parseTrsPath();n&&e.add(n.node)}if(this._exoticAnimation){const t=this._exoticAnimation.collectAnimatedJoints(),n=t.length;for(let i=0;i<n;++i)e.add(t[i])}return Array.from(e)}},ND.WrapMode=yc,bD=vc((xD=DD).prototype,"sample",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),CD=vc(xD.prototype,"speed",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),SD=vc(xD.prototype,"wrapMode",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return yc.Normal}}),ED=vc(xD.prototype,"enableTrsBlending",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wD=vc(xD.prototype,"_duration",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),TD=vc(xD.prototype,"_hash",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),PD=vc(xD.prototype,"_tracks",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ID=vc(xD.prototype,"_exoticAnimation",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),RD=vc(xD.prototype,"_events",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),AD=xD))||AD);c.AnimationClip=zD;class LD{constructor(e,t,n){this._exoticAnimationEvaluator=void 0,this._trackEvalStatues=[],this._rootMotionEvaluation=void 0,this._trackEvalStatues=e,this._exoticAnimationEvaluator=t,this._rootMotionEvaluation=n}evaluate(e){const{_trackEvalStatues:t,_exoticAnimationEvaluator:n}=this,i=t.length;for(let n=0;n<i;++n){const{trackEval:i,binding:o}=t[n],a=i.evaluate(e,o);o.setValue(a)}n&&n.evaluate(e)}evaluateRootMotion(e,t){const{_rootMotionEvaluation:n}=this;n&&n.evaluate(e,t)}}class FD{constructor(){this.position=new Gn,this.scale=new Gn(1,1,1),this.rotation=new Qn,this.eulerAngles=new Gn}getTransform(e){ii.fromRTS(e,this.rotation,this.position,this.scale)}}class UD extends FD{constructor(...e){super(...e),this.parent=null,this._dirty=!0,this._transform=new ii}get globalTransform(){const e=this._transform;return this._dirty&&(this._dirty=!1,ii.fromRTS(e,this.rotation,this.position,this.scale),this.parent&&ii.multiply(e,this.parent.globalTransform,e)),this._transform}invalidate(){this._dirty=!0}}const BD=new ii;class kD{constructor(e,t,n,i){this._initialTransformCache=new ii,this._clipEndTransformCache=new ii,this._startTransformCache=new ii,this._endTransformCache=new ii,this._motionTransformCache=new ii,this._translationMotionCache=new Gn,this._rotationMotionCache=new Qn,this._scaleMotionCache=new Gn,this._rootBone=e,this._duration=t,this._boneTransform=n,this._trackEvalStatuses=i}evaluate(e,t){const n=this._calcMotionTransform(e,t,this._motionTransformCache),{_translationMotionCache:i,_rotationMotionCache:o,_scaleMotionCache:a,_rootBone:r}=this;ii.toRTS(n,o,i,a),Gn.add(i,i,r.position),r.setPosition(i),Qn.multiply(o,o,r.rotation),r.setRotation(o),Gn.multiply(a,a,r.scale),r.setScale(a)}_calcMotionTransform(e,t,n){const{_duration:i}=this,o=i-e,a=this._evaluateAt(e,this._startTransformCache);if(t<o){const i=this._evaluateAt(e+t,this._endTransformCache);jD(n,a,i)}else{ii.identity(n);const e=(e,t)=>{jD(BD,e,t),ii.multiply(n,n,BD)},r=t-o,s=Math.floor(r/i),c=r-s*i,l=this._evaluateAt(0,this._initialTransformCache),_=this._evaluateAt(i,this._clipEndTransformCache),u=this._evaluateAt(c,this._endTransformCache);e(a,_),jD(BD,l,_);for(let e=0;e<s;++e)ii.multiply(n,n,BD);e(l,u)}return n}_evaluateAt(e,t){const{_trackEvalStatuses:n}=this,i=n.length;for(let t=0;t<i;++t){const{trackEval:i,binding:o}=n[t],a=i.evaluate(e,o);o.setValue(a)}return this._boneTransform.getTransform(t),t}}function jD(e,t,n){ii.invert(e,t),ii.multiply(e,n,e)}function GD(e,t){switch(t){default:return;case"position":return{setValue(t){Gn.copy(e.position,t)}};case"rotation":return{setValue(t){Qn.copy(e.rotation,t)}};case"scale":return{setValue(t){Gn.copy(e.scale,t)}};case"eulerAngles":return{setValue(t){Gn.copy(e.eulerAngles,t)}}}}class VD{constructor(e,t,n,i){this._lastFrameIndex=-1,this._lastIterations=0,this._lastDirection=0,this._ignoreIndex=-1,this._sampled=!1,this._targetNode=e,this._ratios=t,this._eventGroups=n,this._wrapMode=i}setWrapMode(e){this._wrapMode=e}ignore(e,t){this._ignoreIndex=-1,this._sampled=!1;let n=WD(e,this._ratios);n<0&&(n=~n-1,t<0&&(n+=1),this._ignoreIndex=n)}sample(e,t,n){const i=this._eventGroups.length;let o=WD(e,this._ratios);if(o<0&&(o=~o-1,t<0&&(o+=1)),this._ignoreIndex!==o&&(this._ignoreIndex=-1),!this._sampled)return this._sampled=!0,this._doFire(o,!1),this._lastFrameIndex=o,this._lastIterations=n,void(this._lastDirection=t);const a=this._wrapMode,r=HD(n);let s=HD(this._lastIterations),c=this._lastFrameIndex;const l=this._lastDirection,_=-1!==s&&r!==s;if(c===o&&_&&1===i)this._doFire(0,!1);else if(c!==o||_){t=l;do{if(c!==o){if(-1===t&&0===c&&o>0?((a&gc.PingPong)===gc.PingPong?t*=-1:c=i,s++):1===t&&c===i-1&&o<i-1&&((a&gc.PingPong)===gc.PingPong?t*=-1:c=-1,s++),c===o)break;if(s>r)break}c+=t,this._doFire(c,!0)}while(c!==o&&c>-1&&c<i)}this._lastFrameIndex=o,this._lastIterations=n,this._lastDirection=t}_doFire(e,t){t?c.director.getAnimationManager().pushDelayEvent(this._checkAndFire,this,[e]):this._checkAndFire(e)}_checkAndFire(e){if(!this._targetNode||!this._targetNode.isValid)return;const{_eventGroups:t}=this;if(e<0||e>=t.length||this._ignoreIndex===e)return;const n=t[e],i=this._targetNode.components,o=n.events.length;for(let e=0;e<o;++e){const t=n.events[e],{functionName:o}=t,a=i.length;for(let e=0;e<a;++e){const n=i[e],a=n[o];"function"==typeof a&&a.apply(n,t.parameters)}}}}function HD(e){return e-(0|e)==0&&(e-=1),0|e}function WD(e,t){return xc(t,e)}class qD{constructor(){this._isPlaying=!1,this._isPaused=!1,this._stepOnce=!1}get isPlaying(){return this._isPlaying}get isPaused(){return this._isPaused}get isMotionless(){return!this.isPlaying||this.isPaused}play(){this._isPlaying?this._isPaused?(this._isPaused=!1,this.onResume()):this.onError(O(3912)):(this._isPlaying=!0,this.onPlay())}stop(){this._isPlaying&&(this._isPlaying=!1,this.onStop(),this._isPaused=!1)}pause(){this._isPlaying&&!this._isPaused&&(this._isPaused=!0,this.onPause())}resume(){this._isPlaying&&this._isPaused&&(this._isPaused=!1,this.onResume())}step(){this.pause(),this._stepOnce=!0,this._isPlaying||this.play()}update(e){}onPlay(){}onPause(){}onResume(){}onStop(){}onError(e){}}class YD{constructor(e){this.weight=0,this._pose=void 0,this._blendStateWriters=[],this._pose=e}destroy(){for(let e=0;e<this._blendStateWriters.length;++e)this._pose.destroyWriter(this._blendStateWriters[e]);this._blendStateWriters.length=0}createPoseWriter(e,t,n){const i=this._pose.createWriter(e,t,this,n);return this._blendStateWriters.push(i),i}}let XD;!function(e){e.PLAY="play",e.STOP="stop",e.PAUSE="pause",e.RESUME="resume",e.LASTFRAME="lastframe",e.FINISHED="finished"}(XD||(XD={})),Ge(XD);class QD extends qD{get clip(){return this._clip}get name(){return this._name}get length(){return this.duration}get wrapMode(){return this._wrapMode}set wrapMode(e){var t;this._wrapMode=e,this.time=0,e&gc.Loop?this.repeatCount=1/0:this.repeatCount=1,null===(t=this._clipEventEval)||void 0===t||t.setWrapMode(e)}get repeatCount(){return this._repeatCount}set repeatCount(e){this._repeatCount=e;const t=this._wrapMode&gc.ShouldWrap,n=(this.wrapMode&gc.Reverse)===gc.Reverse;this._useSimpleProcess=e===1/0&&!t&&!n}get delay(){return this._delay}set delay(e){this._delayTime=this._delay=e}get playbackRange(){return this._playbackRange}set playbackRange(e){e.max,e.min,this._playbackRange.min=Math.max(e.min,0),this._playbackRange.max=Math.min(e.max,this.duration),this._playbackDuration=this._playbackRange.max-this._playbackRange.min,this.setTime(0)}get current(){return this.getWrappedInfo(this.time).time}get ratio(){return this.current/this.duration}get weight(){return this._weight}set weight(e){this._weight=e,this._poseOutput&&(this._poseOutput.weight=e)}constructor(e,t=""){super(),this.duration=1,this.speed=1,this.time=0,this.frameRate=0,this._targetNode=null,this._curveLoaded=!1,this._clip=void 0,this._useSimpleProcess=!1,this._target=null,this._wrapMode=yc.Normal,this._repeatCount=1,this._delay=0,this._delayTime=0,this._currentFramePlayed=!1,this._name=void 0,this._lastIterations=NaN,this._lastWrapInfo=null,this._wrappedInfo=new Ac,this._allowLastFrame=!1,this._blendStateWriterHost={weight:0},this._playbackDuration=0,this._invDuration=1,this._poseOutput=null,this._weight=0,this._clipEval=void 0,this._clipEventEval=void 0,this._doNotCreateEval=!1,this._clip=e,this._name=t||e&&e.name,this._playbackRange={min:0,max:e.duration},this._playbackDuration=e.duration,e.duration||x(`Clip ${e.name} has zero duration.`)}get curveLoaded(){return this._curveLoaded}initialize(e){if(this._curveLoaded)return;this._curveLoaded=!0,this._poseOutput&&(this._poseOutput.destroy(),this._poseOutput=null),this._clipEval&&(this._clipEval=void 0),this._targetNode=e;const t=this._clip;if(this.duration=t.duration,this._invDuration=1/this.duration,this.speed=t.speed,this.wrapMode=t.wrapMode,this.frameRate=t.sample,this._playbackRange.min=0,this._playbackRange.max=t.duration,this._playbackDuration=t.duration,(this.wrapMode&gc.Loop)===gc.Loop?this.repeatCount=1/0:this.repeatCount=1,!this._doNotCreateEval){var n,i,o;const a=null!==(n=null===(i=c.director.getAnimationManager())||void 0===i?void 0:i.blendState)&&void 0!==n?n:null;a&&(this._poseOutput=new YD(a)),this._clipEval=t.createEvaluator({target:e,pose:null!==(o=this._poseOutput)&&void 0!==o?o:void 0})}this._clipEventEval=t.createEventEvaluator(this._targetNode)}destroy(){this.isMotionless||c.director.getAnimationManager().removeAnimation(this),this._poseOutput&&(this._poseOutput.destroy(),this._poseOutput=null),this._clipEval=void 0}emit(...e){c.director.getAnimationManager().pushDelayEvent(this._emit,this,e)}on(e,t,n){return this._target&&this._target.isValid?this._target.on(e,t,n):null}once(e,t,n){return this._target&&this._target.isValid?this._target.once(e,t,n):null}off(e,t,n){this._target&&this._target.isValid&&this._target.off(e,t,n)}allowLastFrameEvent(e){this._allowLastFrame=e}_setEventTarget(e){this._target=e}setTime(e){this._currentFramePlayed=!1,this.time=e||0;{var t;const n=this.getWrappedInfo(e,this._wrappedInfo);null===(t=this._clipEventEval)||void 0===t||t.ignore(n.ratio,n.direction)}}update(e){this._delayTime>0&&(this._delayTime-=e,this._delayTime>0)||(this._currentFramePlayed?this.time+=e*this.speed:this._currentFramePlayed=!0,this._process())}sample(){const e=this.getWrappedInfo(this.time,this._wrappedInfo);return this._sampleCurves(e.time),this._sampleEvents(e),e}onPlay(){this.setTime(0),this._delayTime=this._delay,this._onReplayOrResume(),this.emit(XD.PLAY,this)}onStop(){this.isPaused||this._onPauseOrStop(),this.emit(XD.STOP,this)}onResume(){this._onReplayOrResume(),this.emit(XD.RESUME,this)}onPause(){this._onPauseOrStop(),this.emit(XD.PAUSE,this)}_sampleCurves(e){const{_poseOutput:t,_clipEval:n}=this;t&&(t.weight=this.weight),n&&n.evaluate(e)}_process(){this._useSimpleProcess?this.simpleProcess():this.process()}process(){const e=this.sample();if(this._allowLastFrame){let t;t=this._lastWrapInfo?this._lastWrapInfo:this._lastWrapInfo=new Ac(e),this.repeatCount>1&&(0|e.iterations)>(0|t.iterations)&&this.emit(XD.LASTFRAME,this),t.set(e)}e.stopped&&(this.stop(),this.emit(XD.FINISHED,this))}simpleProcess(){const e=this._playbackRange.min,t=this._playbackDuration;let n=this.time%t;n<0&&(n+=t);const i=(e+n)*this._invDuration;this._sampleCurves(e+n),this._sampleEvents(this.getWrappedInfo(this.time,this._wrappedInfo)),this._allowLastFrame&&(Number.isNaN(this._lastIterations)&&(this._lastIterations=i),(this.time>0&&this._lastIterations>i||this.time<0&&this._lastIterations<i)&&this.emit(XD.LASTFRAME,this),this._lastIterations=i)}_needReverse(e){const t=this.wrapMode;let n=!1;return(t&gc.PingPong)===gc.PingPong&&(e-(0|e)==0&&e>0&&(e-=1),1&e&&(n=!n)),(t&gc.Reverse)===gc.Reverse&&(n=!n),n}getWrappedInfo(e,t){t=t||new Ac;const n=this._getPlaybackStart(),i=this._getPlaybackEnd()-n;let o=!1;const a=this.repeatCount;let r=e>0?e/i:-e/i;if(r>=a){r=a,o=!0;let t=a-(0|a);0===t&&(t=1),e=t*i*(e>0?1:-1)}if(e>i){const t=e%i;e=0===t?i:t}else e<0&&0!=(e%=i)&&(e+=i);let s=!1;const c=this._wrapMode&gc.ShouldWrap;c&&(s=this._needReverse(r));let l=s?-1:1;return this.speed<0&&(l*=-1),c&&s&&(e=i-e),t.time=n+e,t.ratio=t.time/this.duration,t.direction=l,t.stopped=o,t.iterations=r,t}_getPlaybackStart(){return this._playbackRange.min}_getPlaybackEnd(){return this._playbackRange.max}_sampleEvents(e){var t;null===(t=this._clipEventEval)||void 0===t||t.sample(e.ratio,e.direction,e.iterations)}_emit(e,t){this._target&&this._target.isValid&&this._target.emit(e,e,t)}_onReplayOrResume(){c.director.getAnimationManager().addAnimation(this)}_onPauseOrStop(){c.director.getAnimationManager().removeAnimation(this)}}e("cG",QD),c.AnimationState=QD;class KD extends qD{constructor(e){super(),this._managedStates=[],this._fadings=[],this._scheduled=!1,this._scheduler=null!=e?e:c.director.getAnimationManager()}update(e){if(this.isMotionless)return;const t=this._managedStates,n=this._fadings;if(1===t.length&&1===n.length){const e=t[0].state;e&&(e.weight=1)}else this._calculateWeights(e);1===t.length&&1===n.length&&this._unscheduleThis()}crossFade(e,t){var n;0===this._managedStates.length&&(t=0),0===t&&this.clear();let i=this._managedStates.find((t=>t.state===e));i?(null===(n=i.state)||void 0===n?void 0:n.isMotionless)&&i.state.play():(i={state:e,reference:0},e&&e.play(),this._managedStates.push(i)),++i.reference,this._fadings.unshift({easeDuration:t,easeTime:0,target:i}),this.isMotionless||this._scheduleThis()}clear(){for(let e=0;e<this._managedStates.length;++e){const t=this._managedStates[e].state;t&&t.stop()}this._managedStates.length=0,this._fadings.length=0}onPlay(){super.onPlay(),this._scheduleThis()}onPause(){super.onPause();for(let e=0;e<this._managedStates.length;++e){const t=this._managedStates[e].state;t&&t.pause()}this._unscheduleThis()}onResume(){super.onResume();for(let e=0;e<this._managedStates.length;++e){const t=this._managedStates[e].state;t&&t.resume()}this._scheduleThis()}onStop(){super.onStop(),this.clear()}_calculateWeights(e){const t=this._managedStates,n=this._fadings;for(let e=0;e<t.length;++e){const n=t[e].state;n&&(n.weight=0)}let i=1,o=n.length;for(let t=0;t<n.length;++t){const a=n[t];a.easeTime+=e;const r=0===a.easeDuration?1:An(a.easeTime/a.easeDuration),s=r*i;if(i*=1-r,a.target.state&&(a.target.state.weight+=s),a.easeTime>=a.easeDuration){o=t+1,a.easeTime=a.easeDuration;break}}if(o!==n.length){for(let e=o;e<n.length;++e){const t=n[e];--t.target.reference,t.target.reference<=0&&(t.target.state&&t.target.state.stop(),Y(this._managedStates,t.target))}n.splice(o)}}_scheduleThis(){this._scheduled||(this._scheduler.addCrossFade(this),this._scheduled=!0)}_unscheduleThis(){this._scheduled&&(this._scheduler.removeCrossFade(this),this._scheduled=!1)}}var ZD,JD,$D,eM,tM,nM,iM,oM,aM,rM,sM,cM,lM,_M,uM,fM,hM;let pM=e("cH",(ZD=Rc("cc.Animation"),JD=Hc(),$D=Dc(99),eM=kc(),tM=rl([zD]),nM=Xc(),iM=rl(zD),oM=Xc(),aM=Xc(),rM=rl([zD]),ZD(sM=JD(sM=$D(sM=Bc(sM=eM((hM=fM=class extends(qt(y_)){constructor(...e){super(...e),dc(this,"playOnLoad",lM,this),this._crossFade=new KD,this._nameToState=se(!0),dc(this,"_clips",_M,this),dc(this,"_defaultClip",uM,this),this._hasBeenPlayed=!1}get clips(){return this._clips}set clips(e){this._crossFade&&this._crossFade.clear();for(const e of this._clips)e&&this._removeStateOfAutomaticClip(e);for(const t of e)t&&this.createState(t);const t=e.find((e=>mM(e,this._defaultClip)));this._defaultClip=t||null,this._clips=e}get defaultClip(){return this._defaultClip}set defaultClip(e){this._defaultClip=e,e&&(this._clips.findIndex((t=>mM(t,e)))>=0||(this._clips.push(e),this.createState(e)))}onLoad(){this.clips=this._clips;for(const e in this._nameToState)this._nameToState[e].initialize(this.node)}start(){this.playOnLoad&&!this._hasBeenPlayed&&this._defaultClip&&this.crossFade(this._defaultClip.name,0)}onEnable(){this._crossFade.resume()}onDisable(){this._crossFade.pause()}onDestroy(){this._crossFade.stop();for(const e in this._nameToState)this._nameToState[e].destroy();this._nameToState=se(!0)}play(e){if(this._hasBeenPlayed=!0,!e){if(!this._defaultClip)return;e=this._defaultClip.name}this.crossFade(e,0)}crossFade(e,t=.3){this._hasBeenPlayed=!0;const n=this._nameToState[e];n&&(this._crossFade.play(),this._crossFade.crossFade(n,t))}pause(){this._crossFade.pause()}resume(){this._crossFade.resume()}stop(){this._crossFade.stop()}getAnimationState(e){return this.getState(e)}getState(e){const t=this._nameToState[e];return t&&!t.curveLoaded&&t.initialize(this.node),t||null}createState(e,t){return t=t||e.name,this.removeState(t),this._doCreateState(e,t)}removeState(e){const t=this._nameToState[e];t&&(t.allowLastFrameEvent(!1),t.stop(),delete this._nameToState[e])}addClip(e,t){return X(this._clips,e)||this._clips.push(e),this.createState(e,t)}removeClip(e,t){let n;for(const t in this._nameToState){const i=this._nameToState[t];if(i.clip===e){n=i;break}}if(e===this._defaultClip){if(!t)return void P(3902);this._defaultClip=null}if(n&&n.isPlaying){if(!t)return void P(3903);n.stop()}this._clips=this._clips.filter((t=>t!==e)),n&&delete this._nameToState[n.name]}on(e,t,n,i){const o=super.on(e,t,n,i);return e===XD.LASTFRAME&&this._syncAllowLastFrameEvent(),o}once(e,t,n){const i=super.once(e,t,n);return e===XD.LASTFRAME&&this._syncAllowLastFrameEvent(),i}off(e,t,n){super.off(e,t,n),e===XD.LASTFRAME&&this._syncDisallowLastFrameEvent()}_createState(e,t){return new QD(e,t)}_doCreateState(e,t){const n=this._createState(e,t);return n._setEventTarget(this),n.allowLastFrameEvent(this.hasEventListener(XD.LASTFRAME)),this.node&&n.initialize(this.node),this._nameToState[n.name]=n,n}_getStateByNameOrDefaultClip(e){if(!e){if(!this._defaultClip)return null;e=this._defaultClip.name}return this._nameToState[e]||null}_removeStateOfAutomaticClip(e){for(const t in this._nameToState){const n=this._nameToState[t];mM(e,n.clip)&&(n.stop(),delete this._nameToState[t])}}_syncAllowLastFrameEvent(){if(this.hasEventListener(XD.LASTFRAME))for(const e in this._nameToState)this._nameToState[e].allowLastFrameEvent(!0)}_syncDisallowLastFrameEvent(){if(!this.hasEventListener(XD.LASTFRAME))for(const e in this._nameToState)this._nameToState[e].allowLastFrameEvent(!1)}},fM.EventType=XD,vc((cM=hM).prototype,"clips",[tM,nM],Object.getOwnPropertyDescriptor(cM.prototype,"clips"),cM.prototype),vc(cM.prototype,"defaultClip",[iM,oM],Object.getOwnPropertyDescriptor(cM.prototype,"defaultClip"),cM.prototype),lM=vc(cM.prototype,"playOnLoad",[zc,aM],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_M=vc(cM.prototype,"_clips",[rM],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),uM=vc(cM.prototype,"_defaultClip",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sM=cM))||sM)||sM)||sM)||sM)||sM));function mM(e,t){return e===t||!!e&&!!t&&e._uuid===t._uuid&&e._uuid}an(pM.prototype,"Animation",[{name:"getAnimationState",newName:"getState"},{name:"addClip",newName:"createState"},{name:"removeClip",newName:"removeState",customFunction(...e){const t=e[0];return pM.prototype.removeState.call(this,t.name)}}]),c.AnimationComponent=pM,Fe.setClassAlias(pM,"cc.AnimationComponent");class dM{constructor(){this._nodeBlendStates=new Map}createWriter(e,t,n,i){const o=this.ref(e,t);return new vM(e,t,o,n,i)}destroyWriter(e){const t=e;this.deRef(t.node,t.property)}ref(e,t){let n=this._nodeBlendStates.get(e);return n||(n=new xM,this._nodeBlendStates.set(e,n)),n.refProperty(t)}deRef(e,t){const n=this._nodeBlendStates.get(e);n&&(n.deRefProperty(t),n.empty&&this._nodeBlendStates.delete(e))}apply(){this._nodeBlendStates.forEach(((e,t)=>{e.apply(t)}))}}class vM{constructor(e,t,n,i,o){this._node=e,this._property=t,this._propertyBlendState=n,this._host=i,this._constants=o}get node(){return this._node}get property(){return this._property}getValue(){return this._node[this._property]}setValue(e){const{_propertyBlendState:t,_host:n}=this,i=n.weight;t.blend(e,i)}}class gM{constructor(e){this.blendedWeight=0,this.blendedValue=void 0,this.refCount=0,this.blendedValue=e}}class yM extends gM{constructor(){super(new Gn)}blend(e,t){const{blendedValue:n}=this;1===t?Gn.copy(n,e):Gn.scaleAndAdd(n,n,e,t),this.blendedWeight+=t}reset(){this.blendedWeight=0,Gn.zero(this.blendedValue)}}class AM extends gM{constructor(){super(new Qn)}blend(e,t){if(0===t)return;const{blendedValue:n,blendedWeight:i}=this;if(1===t)Qn.copy(n,e);else{const o=t/(i+t);Qn.slerp(n,n,e,o)}this.blendedWeight+=t}reset(){this.blendedWeight=0,Qn.identity(this.blendedValue)}}class xM{constructor(){this._properties={}}get empty(){const{_properties:e}=this;return!(e.position||e.rotation||e.eulerAngles||e.scale)}refProperty(e){var t,n;const{_properties:i}=this;let o;switch(e){default:case"position":case"scale":case"eulerAngles":o=null!==(t=i[e])&&void 0!==t?t:i[e]=new yM;break;case"rotation":o=null!==(n=i[e])&&void 0!==n?n:i[e]=new AM}return++o.refCount,o}deRefProperty(e){const{_properties:t}=this,n=t[e];n&&(--n.refCount,n.refCount>0||delete t[e])}apply(e){const{_properties:{position:t,scale:n,rotation:i,eulerAngles:o}}=this;let a,r,s,c=!1,l=!1,_=!1,u=!1;t&&t.blendedWeight&&(c=!0,t.blendedWeight<1&&t.blend(e.position,1-t.blendedWeight),a=t.blendedValue),n&&n.blendedWeight&&(l=!0,n.blendedWeight<1&&n.blend(e.scale,1-n.blendedWeight),r=n.blendedValue),o&&o.blendedWeight&&(u=!0,o.blendedWeight<1&&o.blend(e.eulerAngles,1-o.blendedWeight),s=o.blendedValue),i&&i.blendedWeight&&(_=!0,i.blendedWeight<1&&i.blend(e.rotation,1-i.blendedWeight),s=i.blendedValue),(s||a||r)&&e.setRTS(s,a,r),c&&t.reset(),l&&n.reset(),_&&i.reset(),u&&o.reset()}}const bM=[],CM=new Map;function SM(e,t){let n=0,i=ii.IDENTITY;for(;e;){if(e.stamp===t||e.stamp+1===t&&!e.node.hasChangedFlags){i=e.world,e.stamp=t;break}e.stamp=t,bM[n++]=e,e=e.parent}for(;n>0;){e=bM[--n],bM[n]=null;const t=e.node;ii.fromRTS(e.local,t.rotation,t.position,t.scale),i=ii.multiply(e.world,i,e.local)}return i}function EM(e,t){let n,i=null,o=0;for(;e!==t;){const t=e.uuid;if(CM.has(t)){i=CM.get(t);break}i={node:e,local:new ii,world:new ii,stamp:-1,parent:null},CM.set(t,i),bM[o++]=i,e=e.parent,i=null}for(;o>0;)n=bM[--o],bM[o]=null,n.parent=i,i=n;return i}function wM(e){let t=CM.get(e.uuid)||null;for(;t;)CM.delete(t.node.uuid),t=t.parent}var TM,PM,IM;let RM=e("g4",Rc((IM=PM=class extends uw{constructor(...e){super(...e),this._anims=new H([]),this._crossFades=new H([]),this._delayEvents=[],this._blendStateBuffer=new dM,this._sockets=[]}get blendState(){return this._blendStateBuffer}addCrossFade(e){-1===this._crossFades.array.indexOf(e)&&this._crossFades.push(e)}removeCrossFade(e){const t=this._crossFades.array.indexOf(e);t>=0?this._crossFades.fastRemoveAt(t):R(3907)}update(e){const{_delayEvents:t,_crossFades:n,_sockets:i}=this;{const t=n.array;for(n.i=0;n.i<t.length;++n.i)t[n.i].update(e)}const o=this._anims,a=o.array;for(o.i=0;o.i<a.length;++o.i){const t=a[o.i];t.isMotionless||t.update(e)}this._blendStateBuffer.apply();const r=c.director.getTotalFrames();for(let e=0,t=i.length;e<t;e++){const{target:t,transform:n}=i[e];t.matrix=SM(n,r)}for(let e=0,n=t.length;e<n;e++){const n=t[e];n.fn.apply(n.thisArg,n.args)}t.length=0}destruct(){}addAnimation(e){-1===this._anims.array.indexOf(e)&&this._anims.push(e)}removeAnimation(e){const t=this._anims.array.indexOf(e);t>=0?this._anims.fastRemoveAt(t):R(3907)}pushDelayEvent(e,t,n){this._delayEvents.push({fn:e,thisArg:t,args:n})}addSockets(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(this._sockets.find((e=>e.target===i.target)))continue;const o=e.getChildByPath(i.path),a=i.target&&o&&EM(o,e);a&&this._sockets.push({target:i.target,transform:a})}}removeSockets(e,t){for(let e=0;e<t.length;++e){const n=t[e];for(let e=0;e<this._sockets.length;++e){const t=this._sockets[e];if(t.target===n.target){wM(t.transform.node),this._sockets[e]=this._sockets[this._sockets.length-1],this._sockets.length--;break}}}}},PM.ID="animation",TM=IM))||TM);xw.on(Aw.EVENT_INIT,(()=>{const e=new RM;xw.registerSystem(RM.ID,e,uw.Priority.HIGH)})),c.AnimationManager=RM;const NM=new ii;var DM,MM,OM,zM;c.easing=hf;let LM=e("fR",Rc("cc.HierachyModifier")(DM=class extends OI{})||DM);c.HierachyModifier=LM;let FM=e("fS",Rc("cc.ComponentModifier")(MM=class extends zI{})||MM);c.ComponentModifier=FM;let UM=e("fT",Rc("cc.CurveValueAdapter")(OM=class{forTarget(e){return{set:()=>{}}}})||OM);c.CurveValueAdapter=UM;let BM=e("fU",Rc("cc.UniformCurveValueAdapter")(zM=class extends jI{})||zM);function kM(e){return"string"==typeof e}function jM(e){return"number"==typeof e}function GM(e,t){return e instanceof t}c.UniformCurveValueAdapter=BM,c.isPropertyModifier=kM,c.isElementModifier=jM,c.isCustomTargetModifier=GM,c.math=gi,c.geometry=kh;class VM{constructor(e){this.poolHandlerComp=void 0,this._pool=void 0,this.poolHandlerComp=e,this._pool=[]}size(){return this._pool.length}clear(){const e=this._pool.length;for(let t=0;t<e;++t)this._pool[t].destroy();this._pool.length=0}put(e){if(e&&-1===this._pool.indexOf(e)){e.removeFromParent();const t=this.poolHandlerComp?e.getComponent(this.poolHandlerComp):null;t&&t.unuse&&t.unuse(),this._pool.push(e)}}get(...e){const t=this._pool.length-1;if(t<0)return null;{const e=this._pool[t];this._pool.length=t;const n=this.poolHandlerComp?e.getComponent(this.poolHandlerComp):null;return n&&n.reuse&&n.reuse(arguments),e}}}function HM(e,t){return e(t={exports:{}},t.exports),t.exports}e("gc",VM),c.NodePool=VM,c.renderer=ug,e("e0","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{});var WM=HM((function(e){var t,n=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var n,i;e=e||{},n||(n=void 0!==e?e:{}),n.ready=new Promise((function(e){i=e}));var o,a,r,s={};for(o in n)n.hasOwnProperty(o)&&(s[o]=n[o]);a="object"==typeof window,r="function"==typeof importScripts;var c,l="";(a||r)&&(r?l=self.location.href:document.currentScript&&(l=document.currentScript.src),t&&(l=t),l=0!==l.indexOf("blob:")?l.substr(0,l.lastIndexOf("/")+1):"",r&&(c=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(t){if(e=G(e))return e;throw t}}));var _=n.print||console.log.bind(console),u=n.printErr||console.warn.bind(console);for(o in s)s.hasOwnProperty(o)&&(n[o]=s[o]);s=null;var f,h,p=[];function m(){return{exports:function(e,t,n){var i=new ArrayBuffer(8),o=new Int32Array(i),a=new Float32Array(i),r=new Float64Array(i);function s(e,t){o[e]=t}function c(e){a[0]=e}function l(e){return o[e]}function _(){return a[0]}for(var u=new Uint8Array(123),f=25;f>=0;--f)u[48+f]=52+f,u[65+f]=f,u[97+f]=26+f;function h(e,t,n){var i,o,a=0,r=t,s=n.length,c=t+(3*s>>2);for("="==n[s-2]&&--c,"="==n[s-1]&&--c;a<s;a+=4,r+=3)i=u[n.charCodeAt(a+1)],o=u[n.charCodeAt(a+2)],e[r]=u[n.charCodeAt(a)]<<2|i>>4,r+1<c&&(e[r+1]=i<<4|o>>2),r+2<c&&(e[r+2]=o<<6|u[n.charCodeAt(a+3)])}u[43]=62,u[47]=63;var p=new Uint8Array(t.buffer);return h(p,1028,"dAUAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACQAAAAlAAAAJgAAACcAAAAoAAAAKQAAACoAAAArAAAALAAAAC0AAAAuAAAALwAAADAAAAAxAAAAY3JlYXRlUHJlZGljdGl2ZUNvbnRhY3RzAHByZWRpY3RpdmUgY29udmV4U3dlZXBUZXN0AChzaXplX3QgaWR4LCBzaXplX3Qgc2l6ZSk8Ojo+eyB0aHJvdyAnQXJyYXkgaW5kZXggJyArIGlkeCArICcgb3V0IG9mIGJvdW5kczogWzAsJyArIHNpemUgKyAnKSc7IH0AMjNjY0Rpc2NyZXRlRHluYW1pY3NXb3JsZADUTAAAWgUAAGQLAABOMTZidENvbGxpc2lvbldvcmxkMjdDbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2tFAE4xNmJ0Q29sbGlzaW9uV29ybGQyMENvbnZleFJlc3VsdENhbGxiYWNrRQAAAACsTAAAsgUAANRMAACABQAA4AUAAAAAAADoBQAAMgAAADMAAAA0AAAANQAAAAAAAADgBQAANgAAADcAAAA0AAAAOAAAAAAAAAB0BgAAOQAAADoAAAA7AAAAMjNjY092ZXJsYXBGaWx0ZXJDYWxsYmFjawAyM2J0T3ZlcmxhcEZpbHRlckNhbGxiYWNrAKxMAABSBgAA1EwAADgGAABsBgAAAAAAAGwGAAA8AAAAPQAAADgAAAAAAAAA1AYAAD4AAAA/AAAAQAAAAEEAAAAzNGNjTm90TWVDbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2sAAAAA1EwAAKwGAADoBQAAAAAAAIAHAABCAAAAQwAAAEQAAABFAAAAMjZjY0FsbEhpdHNSYXlSZXN1bHRDYWxsYmFjawBOMTZidENvbGxpc2lvbldvcmxkMjRBbGxIaXRzUmF5UmVzdWx0Q2FsbGJhY2tFAE4xNmJ0Q29sbGlzaW9uV29ybGQxN1JheVJlc3VsdENhbGxiYWNrRQCsTAAARAcAANRMAAAVBwAAbAcAANRMAAD4BgAAdAcAAAAAAAB0BwAARgAAAEcAAABIAAAASQAAAAAAAABsBwAASgAAAEsAAABIAAAAOAAAAAAAAAAsCAAATAAAAE0AAABOAAAATwAAADI2Y2NDbG9zZXN0UmF5UmVzdWx0Q2FsbGJhY2sATjE2YnRDb2xsaXNpb25Xb3JsZDI0Q2xvc2VzdFJheVJlc3VsdENhbGxiYWNrRQDUTAAA8QcAAGwHAADUTAAA1AcAACAIAAAAAAAAIAgAAFAAAABRAAAASAAAAFIAAAAAAAAAmAgAAFMAAABUAAAAVQAAAFYAAAAyMGJ0RGVmYXVsdE1vdGlvblN0YXRlADEzYnRNb3Rpb25TdGF0ZQAArEwAAH8IAADUTAAAaAgAAJAIAAAAAAAAkAgAAFcAAABYAAAAOAAAADgAAAAAAAAABAkAAFkAAABaAAAAWwAAAFwAAABdAAAAXgAAAF8AAABidFJpZ2lkQm9keUZsb2F0RGF0YQAxMWJ0UmlnaWRCb2R5AADUTAAA9QgAANAPAAAAAAAAZAsAAGAAAABhAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACQAAAAlAAAAJgAAACcAAAAoAAAAKQAAACoAAAArAAAAYgAAAC0AAAAuAAAAYwAAADAAAAAxAAAAZGVidWdEcmF3V29ybGQAaW50ZXJuYWxTaW5nbGVTdGVwU2ltdWxhdGlvbgB1cGRhdGVBY3Rpb25zAHVwZGF0ZUFjdGl2YXRpb25TdGF0ZQBzb2x2ZUNvbnN0cmFpbnRzAGNhbGN1bGF0ZVNpbXVsYXRpb25Jc2xhbmRzAHByZWRpY3RpdmUgY29udmV4U3dlZXBUZXN0AHJlbGVhc2UgcHJlZGljdGl2ZSBjb250YWN0IG1hbmlmb2xkcwBjcmVhdGVQcmVkaWN0aXZlQ29udGFjdHMAQ0NEIG1vdGlvbiBjbGFtcGluZwBpbnRlZ3JhdGVUcmFuc2Zvcm1zAGFwcGx5IHNwZWN1bGF0aXZlIGNvbnRhY3QgcmVzdGl0dXRpb24AcHJlZGljdFVuY29uc3RyYWludE1vdGlvbgBidER5bmFtaWNzV29ybGRGbG9hdERhdGEAMjNidERpc2NyZXRlRHluYW1pY3NXb3JsZAAxNWJ0RHluYW1pY3NXb3JsZAAAANRMAABECwAAAB8AANRMAAAqCwAAWAsAAAAAAADYCwAAZAAAAGUAAABmAAAAMjdJbnBsYWNlU29sdmVySXNsYW5kQ2FsbGJhY2sATjI1YnRTaW11bGF0aW9uSXNsYW5kTWFuYWdlcjE0SXNsYW5kQ2FsbGJhY2tFAKxMAACiCwAA1EwAAIQLAADQCwAAAAAAACQMAAA2AAAAZwAAAGgAAABpAAAAMzRidENsb3Nlc3ROb3RNZUNvbnZleFJlc3VsdENhbGxiYWNrAAAAANRMAAD8CwAA6AUAAAAAAAB4DAAAagAAAGsAAABsAAAAbQAAAG4AAABvAAAAcAAAAHEAAAByAAAAcwAAAHQAAAAxN2J0Rml4ZWRDb25zdHJhaW50ANRMAABkDAAADA0AAGJ0R2VuZXJpYzZEb2ZTcHJpbmcyQ29uc3RyYWludERhdGEAAAAAAAAMDQAAdQAAAHYAAABsAAAAbQAAAG4AAABvAAAAcAAAAHEAAAByAAAAcwAAAHQAAAAAAAAAAQAAAAIAAAAzMGJ0R2VuZXJpYzZEb2ZTcHJpbmcyQ29uc3RyYWludAAAAADUTAAA6AwAABgOAAAAAAAAbA0AAHUAAAB3AAAAeAAAAG0AAAB5AAAAegAAAHAAAAB7AAAAfAAAAH0AAAB+AAAAfwAAADIzYnRQb2ludDJQb2ludENvbnN0cmFpbnQAAADUTAAAUA0AABgOAABidFBvaW50MlBvaW50Q29uc3RyYWludEZsb2F0RGF0YQAAAAAAAAAAGA4AAHUAAACBAAAAggAAAG0AAAA4AAAAOAAAAHAAAAA4AAAAOAAAAIMAAACEAAAAYnRUeXBlZENvbnN0cmFpbnRGbG9hdERhdGEAMTdidFR5cGVkQ29uc3RyYWludAAxM2J0VHlwZWRPYmplY3QAAKxMAAD/DQAAME0AAOsNAAAAAAAAAQAAABAOAAACBAAAAAAAAHwOAAB1AAAAhQAAAIYAAABtAAAAhwAAAIgAAABwAAAAiQAAAIoAAACLAAAAjAAAAI0AAAAxN2J0SGluZ2VDb25zdHJhaW50ANRMAABoDgAAGA4AAGJ0SGluZ2VDb25zdHJhaW50RmxvYXREYXRhAAAAAAAAcA8AAJEAAACSAAAAkwAAAJQAAACVAAAAlgAAAJcAAACYAAAAmQAAAJoAAACbAAAAnAAAAJ0AAABzb2x2ZUdyb3VwQ2FjaGVGcmllbmRseVNldHVwAHNvbHZlR3JvdXBDYWNoZUZyaWVuZGx5SXRlcmF0aW9ucwBzb2x2ZUdyb3VwADM1YnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXIAMThidENvbnN0cmFpbnRTb2x2ZXIAAAAArEwAAFAPAADUTAAAKg8AAGgPAAAAAAAA0A8AAJ4AAACfAAAAWwAAAFwAAACgAAAAoQAAAKIAAABidENvbGxpc2lvbk9iamVjdEZsb2F0RGF0YQAxN2J0Q29sbGlzaW9uT2JqZWN0AACsTAAAuw8AAAAAAAA4EAAApAAAAKUAAACmAAAApwAAAKgAAACpAAAAqgAAAKsAAACsAAAArQAAAK4AAACvAAAAsAAAALEAAACyAAAAswAAADIxYnRDb2xsaXNpb25EaXNwYXRjaGVyANRMAAAgEAAAmD8AAAAAAACQEAAAtAAAALUAAAC2AAAAMjNidENvbGxpc2lvblBhaXJDYWxsYmFjawAxN2J0T3ZlcmxhcENhbGxiYWNrAAAArEwAAHIQAADUTAAAWBAAAIgQAAABAAAAAgAAAAAAAAABAAAAAgAAAAAAAAABAAAAAgAAAAAAAAACAAAAAAAAAAEAAAAAAAAALBEAALkAAAC6AAAAuwAAADMwYnRHamtFcGFQZW5ldHJhdGlvbkRlcHRoU29sdmVyADMwYnRDb252ZXhQZW5ldHJhdGlvbkRlcHRoU29sdmVyAAAArEwAAAERAADUTAAA4BAAACQRAAAAAAAAkBEAALwAAAC9AAAAvgAAADE3YnRHamtQYWlyRGV0ZWN0b3IAMzZidERpc2NyZXRlQ29sbGlzaW9uRGV0ZWN0b3JJbnRlcmZhY2UAAKxMAABgEQAA1EwAAEwRAACIEQAAAAAAANQRAAC5AAAAvwAAAMAAAAAzM2J0TWlua293c2tpUGVuZXRyYXRpb25EZXB0aFNvbHZlcgDUTAAAsBEAACQRAAAAAAAA4BIAAMEAAADCAAAAwwAAAMQAAADFAAAAWk4zM2J0TWlua293c2tpUGVuZXRyYXRpb25EZXB0aFNvbHZlcjEyY2FsY1BlbkRlcHRoRVIyMmJ0Vm9yb25vaVNpbXBsZXhTb2x2ZXJQSzEzYnRDb252ZXhTaGFwZVM0X1JLMTFidFRyYW5zZm9ybVM3X1I5YnRWZWN0b3IzUzlfUzlfUDEyYnRJRGVidWdEcmF3RTIwYnRJbnRlcm1lZGlhdGVSZXN1bHQATjM2YnREaXNjcmV0ZUNvbGxpc2lvbkRldGVjdG9ySW50ZXJmYWNlNlJlc3VsdEUAAKxMAACnEgAA1EwAAPwRAADYEgAAAAAAADwTAADGAAAAxwAAAMgAAADJAAAAygAAADE2YnRFbXB0eUFsZ29yaXRobQAyMGJ0Q29sbGlzaW9uQWxnb3JpdGhtAAAArEwAABsTAADUTAAACBMAADQTAAAAAAAAiBMAAMsAAADMAAAAOAAAADgAAAA4AAAAMzBidEFjdGl2YXRpbmdDb2xsaXNpb25BbGdvcml0aG0AAAAA1EwAAGQTAAA0EwAAAAAAANQTAADNAAAAzgAAAM8AAADQAAAA0QAAADMyYnRTcGhlcmVTcGhlcmVDb2xsaXNpb25BbGdvcml0aG0AANRMAACwEwAAiBMAAAAAAABIFAAA0gAAANMAAADUAAAA1QAAANYAAADXAAAAMzFidERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uADI0YnRDb2xsaXNpb25Db25maWd1cmF0aW9uAAAAAKxMAAAiFAAA1EwAAAAUAABAFAAAAAAAAMQUAADYAAAA2QAAANoAAABOMzNidENvbnZleENvbmNhdmVDb2xsaXNpb25BbGdvcml0aG0xMENyZWF0ZUZ1bmNFADMwYnRDb2xsaXNpb25BbGdvcml0aG1DcmVhdGVGdW5jAACsTAAAmhQAANRMAABoFAAAvBQAAAAAAAAgFQAA2AAAANsAAADcAAAATjMzYnRDb252ZXhDb25jYXZlQ29sbGlzaW9uQWxnb3JpdGhtMTdTd2FwcGVkQ3JlYXRlRnVuY0UAAAAA1EwAAOQUAAC8FAAAAAAAAHAVAADYAAAA3QAAAN4AAABOMjhidENvbXBvdW5kQ29sbGlzaW9uQWxnb3JpdGhtMTBDcmVhdGVGdW5jRQAAAADUTAAAQBUAALwUAAAAAAAAyBUAANgAAADfAAAA4AAAAE4zNmJ0Q29tcG91bmRDb21wb3VuZENvbGxpc2lvbkFsZ29yaXRobTEwQ3JlYXRlRnVuY0UAAAAA1EwAAJAVAAC8FAAAAAAAABwWAADYAAAA4QAAAOIAAABOMjhidENvbXBvdW5kQ29sbGlzaW9uQWxnb3JpdGhtMTdTd2FwcGVkQ3JlYXRlRnVuY0UA1EwAAOgVAAC8FAAAAAAAAGAWAADYAAAA4wAAAOQAAABOMTZidEVtcHR5QWxnb3JpdGhtMTBDcmVhdGVGdW5jRQAAAADUTAAAPBYAALwUAAAAAAAAtBYAANgAAADlAAAA5gAAAE4zMmJ0U3BoZXJlU3BoZXJlQ29sbGlzaW9uQWxnb3JpdGhtMTBDcmVhdGVGdW5jRQAAAADUTAAAgBYAALwUAAAAAAAACBcAANgAAADnAAAA6AAAAE4zNGJ0U3BoZXJlVHJpYW5nbGVDb2xsaXNpb25BbGdvcml0aG0xMENyZWF0ZUZ1bmNFAADUTAAA1BYAALwUAAAAAAAAVBcAANgAAADpAAAA6gAAAE4yNmJ0Qm94Qm94Q29sbGlzaW9uQWxnb3JpdGhtMTBDcmVhdGVGdW5jRQAA1EwAACgXAAC8FAAAAAAAAKQXAADYAAAA6wAAAOwAAABOMzFidENvbnZleFBsYW5lQ29sbGlzaW9uQWxnb3JpdGhtMTBDcmVhdGVGdW5jRQDUTAAAdBcAALwUAAAAAAAAEBgAAO0AAADuAAAA7wAAAPAAAABpc2xhbmRVbmlvbkZpbmRBbmRRdWlja1NvcnQAcHJvY2Vzc0lzbGFuZHMAMjVidFNpbXVsYXRpb25Jc2xhbmRNYW5hZ2VyAACsTAAA8xcAAAAAAABYGAAA8QAAAPIAAADzAAAA9AAAAPUAAAAzMWJ0Q29udmV4UGxhbmVDb2xsaXNpb25BbGdvcml0aG0AAADUTAAANBgAADQTAAAxMmJ0Q29udmV4Q2FzdAAArEwAAGQYAAAAAAAArBgAAPYAAAD3AAAA+AAAADIyYnRTdWJzaW1wbGV4Q29udmV4Q2FzdAAAAADUTAAAkBgAAHQYAAAAAAAAbBkAAPkAAAD6AAAA+wAAAPwAAAD9AAAAAAAAAJQZAAD+AAAA/wAAAAABAABidENvbnZleFRyaWFuZ2xlQ2FsbGJhY2s6OnByb2Nlc3NUcmlhbmdsZQBidENvbnZleENvbmNhdmVDb2xsaXNpb25BbGdvcml0aG06OnByb2Nlc3NDb2xsaXNpb24AMzNidENvbnZleENvbmNhdmVDb2xsaXNpb25BbGdvcml0aG0AAADUTAAARhkAAIgTAAAyNGJ0Q29udmV4VHJpYW5nbGVDYWxsYmFjawAA1EwAAHgZAAB0NAAAAAAAADwaAAABAQAAAgEAAAMBAAAEAQAABQEAAAYBAAAHAQAACAEAAAkBAAAKAQAACwEAAAwBAAANAQAADgEAAA8BAAAQAQAAEQEAABIBAAATAQAAFAEAABUBAAAWAQAAFwEAABgBAAAZAQAAGgEAABsBAAAcAQAAHQEAAB4BAAAfAQAAIAEAADE1YnRUcmlhbmdsZVNoYXBlAAAA1EwAACgaAAB0MgAAVHJpYW5nbGUAYnRDb252ZXhJbnRlcm5hbFNoYXBlRGF0YQAAAAAAACAbAAAhAQAAIgEAACMBAABaTjMzYnRDb252ZXhDb25jYXZlQ29sbGlzaW9uQWxnb3JpdGhtMjFjYWxjdWxhdGVUaW1lT2ZJbXBhY3RFUDE3YnRDb2xsaXNpb25PYmplY3RTMV9SSzE2YnREaXNwYXRjaGVySW5mb1AxNmJ0TWFuaWZvbGRSZXN1bHRFMzFMb2NhbFRyaWFuZ2xlU3BoZXJlQ2FzdENhbGxiYWNrAAAA1EwAAIAaAAB0NAAAcHJvY2Vzc1RyaWFuZ2xlAAAAAAB4GwAAJAEAACUBAAAmAQAAJwEAACgBAABOMTJidENvbnZleENhc3QxMENhc3RSZXN1bHRFAAAAAKxMAABYGwAAAAAAAKgbAAC8AAAAKQEAACoBAAAxNmJ0Qm94Qm94RGV0ZWN0b3IAANRMAACUGwAAiBEAAAAAAADwGwAAKwEAACwBAAAtAQAALgEAAC8BAAAyNmJ0Qm94Qm94Q29sbGlzaW9uQWxnb3JpdGhtAAAAANRMAADQGwAAiBMAAAAAAAAsHAAAwQAAADABAAAxAQAAMgEAADMBAAAxNmJ0TWFuaWZvbGRSZXN1bHQAANRMAAAYHAAA2BIAAAAAAABgHAAA9gAAADQBAAA1AQAAMTVidEdqa0NvbnZleENhc3QAAADUTAAATBwAAHQYAAAAAAAAnBwAAMEAAAA2AQAANwEAADgBAAA5AQAAMTZidFBvaW50Q29sbGVjdG9yAADUTAAAiBwAANgSAAAAAAAA3BwAAPYAAAA6AQAAOwEAADI3YnRDb250aW51b3VzQ29udmV4Q29sbGlzaW9uAAAA1EwAALwcAAB0GAAAAAAAADQdAAAhAQAAPAEAAD0BAAA4AAAAAAAAAGAdAAAhAQAAPgEAAD8BAAA4AAAAMjVidFRyaWFuZ2xlUmF5Y2FzdENhbGxiYWNrANRMAAAYHQAAdDQAADI4YnRUcmlhbmdsZUNvbnZleGNhc3RDYWxsYmFjawAA1EwAAEAdAAB0NAAAAAAAAAAfAABAAQAAQQEAAAUAAAAGAAAABwAAAAgAAABCAQAACgAAAAsAAABDAQAARAEAAA4AAABFAQAAT3ZlcmZsb3cgaW4gQUFCQiwgb2JqZWN0IHJlbW92ZWQgZnJvbSBzaW11bGF0aW9uAElmIHlvdSBjYW4gcmVwcm9kdWNlIHRoaXMsIHBsZWFzZSBlbWFpbCBidWdzQGNvbnRpbnVvdXNwaHlzaWNzLmNvbQoAUGxlYXNlIGluY2x1ZGUgYWJvdmUgaW5mb3JtYXRpb24sIHlvdXIgUGxhdGZvcm0sIHZlcnNpb24gb2YgT1MuCgBUaGFua3MuCgB1cGRhdGVBYWJicwBjYWxjdWxhdGVPdmVybGFwcGluZ1BhaXJzAHBlcmZvcm1EaXNjcmV0ZUNvbGxpc2lvbkRldGVjdGlvbgBkaXNwYXRjaEFsbENvbGxpc2lvblBhaXJzAGNvbnZleFN3ZWVwQ29tcG91bmQAY29udmV4U3dlZXBUZXN0ADE2YnRDb2xsaXNpb25Xb3JsZACsTAAA7R4AAAAAAAC0HwAAIQEAAEYBAAA9AQAARwEAAFpOMTZidENvbGxpc2lvbldvcmxkMjFyYXlUZXN0U2luZ2xlSW50ZXJuYWxFUksxMWJ0VHJhbnNmb3JtUzJfUEsyNGJ0Q29sbGlzaW9uT2JqZWN0V3JhcHBlclJOU18xN1JheVJlc3VsdENhbGxiYWNrRUUyOUJyaWRnZVRyaWFuZ2xlUmF5Y2FzdENhbGxiYWNrAADUTAAAIB8AADQdAAAAAAAAgCAAAEgBAABJAQAASgEAAEsBAABMAQAATQEAAE4BAABaTjE2YnRDb2xsaXNpb25Xb3JsZDIxcmF5VGVzdFNpbmdsZUludGVybmFsRVJLMTFidFRyYW5zZm9ybVMyX1BLMjRidENvbGxpc2lvbk9iamVjdFdyYXBwZXJSTlNfMTdSYXlSZXN1bHRDYWxsYmFja0VFOVJheVRlc3RlcgBONmJ0RGJ2dDhJQ29sbGlkZUUAAAAArEwAAGIgAADUTAAA5B8AAHggAAAAAAAALCEAAEoAAABPAQAAUAEAAFEBAABaTjE2YnRDb2xsaXNpb25Xb3JsZDIxcmF5VGVzdFNpbmdsZUludGVybmFsRVJLMTFidFRyYW5zZm9ybVMyX1BLMjRidENvbGxpc2lvbk9iamVjdFdyYXBwZXJSTlNfMTdSYXlSZXN1bHRDYWxsYmFja0VFMTVMb2NhbEluZm9BZGRlcjIAAAAA1EwAAKQgAABsBwAAAAAAAAAiAAAhAQAAUgEAAD8BAABTAQAAWk4xNmJ0Q29sbGlzaW9uV29ybGQyNW9iamVjdFF1ZXJ5U2luZ2xlSW50ZXJuYWxFUEsxM2J0Q29udmV4U2hhcGVSSzExYnRUcmFuc2Zvcm1TNV9QSzI0YnRDb2xsaXNpb25PYmplY3RXcmFwcGVyUk5TXzIwQ29udmV4UmVzdWx0Q2FsbGJhY2tFZkUzMkJyaWRnZVRyaWFuZ2xlQ29udmV4Y2FzdENhbGxiYWNrAADUTAAAUCEAAGAdAAAAAAAA2CIAACEBAABUAQAAPwEAAFUBAABaTjE2YnRDb2xsaXNpb25Xb3JsZDI1b2JqZWN0UXVlcnlTaW5nbGVJbnRlcm5hbEVQSzEzYnRDb252ZXhTaGFwZVJLMTFidFRyYW5zZm9ybVM1X1BLMjRidENvbGxpc2lvbk9iamVjdFdyYXBwZXJSTlNfMjBDb252ZXhSZXN1bHRDYWxsYmFja0VmRTMyQnJpZGdlVHJpYW5nbGVDb252ZXhjYXN0Q2FsbGJhY2tfMAAAAADUTAAAJCIAAGAdAAAAAAAAsCMAAEgBAABWAQAASgEAAFcBAABMAQAATQEAAE4BAABaTjE2YnRDb2xsaXNpb25Xb3JsZDI1b2JqZWN0UXVlcnlTaW5nbGVJbnRlcm5hbEVQSzEzYnRDb252ZXhTaGFwZVJLMTFidFRyYW5zZm9ybVM1X1BLMjRidENvbGxpc2lvbk9iamVjdFdyYXBwZXJSTlNfMjBDb252ZXhSZXN1bHRDYWxsYmFja0VmRTIyYnRDb21wb3VuZExlYWZDYWxsYmFjawAAAADUTAAACCMAAHggAAAAAAAAtCQAADYAAABYAQAAWQEAAFoBAABaWk4xNmJ0Q29sbGlzaW9uV29ybGQyNW9iamVjdFF1ZXJ5U2luZ2xlSW50ZXJuYWxFUEsxM2J0Q29udmV4U2hhcGVSSzExYnRUcmFuc2Zvcm1TNV9QSzI0YnRDb2xsaXNpb25PYmplY3RXcmFwcGVyUk5TXzIwQ29udmV4UmVzdWx0Q2FsbGJhY2tFZkVOMjJidENvbXBvdW5kTGVhZkNhbGxiYWNrMTJQcm9jZXNzQ2hpbGRFaVM1X1BLMTZidENvbGxpc2lvblNoYXBlRTE0TG9jYWxJbmZvQWRkZXIAANRMAADUIwAA4AUAAAAAAAA0JQAAWwEAAFwBAABdAQAAMTlidFNpbmdsZVJheUNhbGxiYWNrADIzYnRCcm9hZHBoYXNlUmF5Q2FsbGJhY2sAMjRidEJyb2FkcGhhc2VBYWJiQ2FsbGJhY2sAAKxMAAAEJQAA1EwAAOokAAAgJQAA1EwAANQkAAAoJQAAAAAAAGwlAABbAQAAXgEAAF8BAAAyMWJ0U2luZ2xlU3dlZXBDYWxsYmFjawDUTAAAVCUAACglAAAAAAAAuCUAAGABAABhAQAAYgEAAGMBAAD8////uCUAAGQBAABlAQAAZgEAADE3RGVidWdEcmF3Y2FsbGJhY2sAME0AAKQlAAAAAAAAAgAAAHQ0AAACAAAAoDQAAAIEAAAAAAAACCYAALwAAABnAQAAaAEAADIyU3BoZXJlVHJpYW5nbGVEZXRlY3RvcgAAAADUTAAA7CUAAIgRAAAAAAAAWCYAAGkBAABqAQAAawEAAGwBAABtAQAAMzRidFNwaGVyZVRyaWFuZ2xlQ29sbGlzaW9uQWxnb3JpdGhtAAAAANRMAAAwJgAAiBMAAAAAAAC8JgAAbgEAAG8BAABwAQAAAAAAAOQmAABxAQAAcgEAAHMBAAB0AQAAdQEAAE4yM2J0Q29udmV4Q29udmV4QWxnb3JpdGhtMTBDcmVhdGVGdW5jRQDUTAAAlCYAALwUAAAyM2J0Q29udmV4Q29udmV4QWxnb3JpdGhtAAAA1EwAAMgmAACIEwAAAAAAAJQnAADBAAAAdgEAAHcBAAB4AQAAeQEAAFpOMjNidENvbnZleENvbnZleEFsZ29yaXRobTE2cHJvY2Vzc0NvbGxpc2lvbkVQSzI0YnRDb2xsaXNpb25PYmplY3RXcmFwcGVyUzJfUksxNmJ0RGlzcGF0Y2hlckluZm9QMTZidE1hbmlmb2xkUmVzdWx0RTEzYnREdW1teVJlc3VsdAAAAADUTAAADCcAANgSAAAAAAAATCgAAMEAAAB6AQAAewEAAHwBAAB9AQAAWk4yM2J0Q29udmV4Q29udmV4QWxnb3JpdGhtMTZwcm9jZXNzQ29sbGlzaW9uRVBLMjRidENvbGxpc2lvbk9iamVjdFdyYXBwZXJTMl9SSzE2YnREaXNwYXRjaGVySW5mb1AxNmJ0TWFuaWZvbGRSZXN1bHRFMjFidFdpdGhvdXRNYXJnaW5SZXN1bHQAAAAA1EwAALwnAADYEgAAAAAAAJAoAADBAAAAfgEAADEBAAAyAQAAfwEAADI0YnRQZXJ0dXJiZWRDb250YWN0UmVzdWx0AADUTAAAdCgAACwcAAAAAAAA2CgAAIABAACBAQAAggEAAIMBAACEAQAAMjhidENvbXBvdW5kQ29sbGlzaW9uQWxnb3JpdGhtAADUTAAAuCgAAIgTAAAAAAAAJCkAAEgBAACFAQAASgEAAIYBAABMAQAATQEAAE4BAAAyMmJ0Q29tcG91bmRMZWFmQ2FsbGJhY2sAAAAA1EwAAAgpAAB4IAAAAAAAAGgpAACHAQAAiAEAAIkBAACKAQAAiwEAADIzYnRIYXNoZWRTaW1wbGVQYWlyQ2FjaGUAAACsTAAATCkAAAAAAAC0KQAAjAEAAI0BAACOAQAAjwEAAJABAAAzNmJ0Q29tcG91bmRDb21wb3VuZENvbGxpc2lvbkFsZ29yaXRobQAA1EwAAIwpAADYKAAAAAAAAAgqAABIAQAAkQEAAJIBAACTAQAATAEAAE0BAABOAQAAMzBidENvbXBvdW5kQ29tcG91bmRMZWFmQ2FsbGJhY2sAAAAA1EwAAOQpAAB4IAAAYnRDb21wb3VuZENvbXBvdW5kTGVhZkNhbGxiYWNrOjpQcm9jZXNzAAAAAADYKgAAAQEAAJQBAACVAQAABAEAAAUBAAAGAQAAlgEAAAgBAACXAQAAmAEAAAsBAAAMAQAADQEAAA4BAAAPAQAAEAEAABEBAACZAQAAEwEAAJoBAAAVAQAAmwEAAJwBAAAYAQAAnQEAAJ4BAACfAQAAoAEAAKEBAACiAQAAowEAAKQBAAAxNmJ0QlVfU2ltcGxleDF0bzQAANRMAADEKgAAqDIAAGJ0QlVfU2ltcGxleDF0bzQAAAAAAQAAAAMAAAAGAAAAAAAAAJQrAAClAQAApgEAAKcBAAAEAQAABQEAAAYBAACoAQAAqQEAAKoBAACrAQAACwEAAKwBAACtAQAArgEAAK8BAAAQAQAAsAEAALEBAABidENvbXBvdW5kU2hhcGVDaGlsZERhdGEAYnRDb21wb3VuZFNoYXBlRGF0YQAxNWJ0Q29tcG91bmRTaGFwZQAA1EwAAIErAABMMwAAQ29tcG91bmQAAAAAAAAAACAsAACyAQAAswEAALQBAAAEAQAABQEAAAYBAAC1AQAACAEAALYBAAC3AQAAuAEAAAwBAAANAQAAuQEAALoBAAAQAQAAuwEAALwBAAATAQAAvQEAABUBAACbAQAAnAEAADExYnRDb25lU2hhcGUAAADUTAAAECwAAFA0AABDb25lAGJ0Q29uZVNoYXBlRGF0YQAAAAAAAAAAbCwAAL4BAAC/AQAAMThidENvbnZleFBvbHloZWRyb24AAAAArEwAAFQsAAAAAAAA6CwAALIBAADAAQAAwQEAAAQBAAAFAQAABgEAAAcBAAAIAQAAwgEAAMMBAAALAQAAxAEAAMUBAAAOAQAADwEAABABAADGAQAAxwEAABMBAADIAQAAFQEAAJsBAACcAQAAMTNidFNwaGVyZVNoYXBlANRMAADYLAAAUDQAAFNQSEVSRQAAAAAAAIwtAADJAQAAygEAAMsBAAAEAQAABQEAAAYBAADMAQAAzQEAAM4BAADPAQAACwEAANABAADRAQAA0gEAANMBAAAQAQAA1AEAANUBAADWAQAA1wEAANgBAABidFRyaWFuZ2xlTWVzaFNoYXBlRGF0YQAyMmJ0QnZoVHJpYW5nbGVNZXNoU2hhcGUAAAAA1EwAAHAtAADgLwAAAAAAADQuAADZAQAA2gEAANsBAABaTjIyYnRCdmhUcmlhbmdsZU1lc2hTaGFwZTE0cGVyZm9ybVJheWNhc3RFUDE4YnRUcmlhbmdsZUNhbGxiYWNrUks5YnRWZWN0b3IzUzRfRTIxTXlOb2RlT3ZlcmxhcENhbGxiYWNrADIxYnROb2RlT3ZlcmxhcENhbGxiYWNrAKxMAAAULgAA1EwAAKwtAAAsLgAAAAAAAMguAADZAQAA3AEAAN0BAABaTjIyYnRCdmhUcmlhbmdsZU1lc2hTaGFwZTE3cGVyZm9ybUNvbnZleGNhc3RFUDE4YnRUcmlhbmdsZUNhbGxiYWNrUks5YnRWZWN0b3IzUzRfUzRfUzRfRTIxTXlOb2RlT3ZlcmxhcENhbGxiYWNrAAAAANRMAABULgAALC4AAAAAAABYLwAA2QEAAN4BAADfAQAAWk5LMjJidEJ2aFRyaWFuZ2xlTWVzaFNoYXBlMTlwcm9jZXNzQWxsVHJpYW5nbGVzRVAxOGJ0VHJpYW5nbGVDYWxsYmFja1JLOWJ0VmVjdG9yM1M0X0UyMU15Tm9kZU92ZXJsYXBDYWxsYmFjawAAANRMAADoLgAALC4AAEJWSFRSSUFOR0xFTUVTSAAAAAAA4C8AAOABAADhAQAAywEAAAQBAAAFAQAABgEAAOIBAADNAQAAzgEAAOMBAAALAQAA0AEAANEBAADkAQAA5QEAABABAADmAQAA1QEAANYBAAAxOWJ0VHJpYW5nbGVNZXNoU2hhcGUAAADUTAAAyC8AAKg2AAAAAAAAaDAAAOcBAADoAQAA6QEAAFpOSzE5YnRUcmlhbmdsZU1lc2hTaGFwZTE5cHJvY2Vzc0FsbFRyaWFuZ2xlc0VQMThidFRyaWFuZ2xlQ2FsbGJhY2tSSzlidFZlY3RvcjNTNF9FMTZGaWx0ZXJlZENhbGxiYWNrAAAA1EwAAAAwAACgNAAAAAAAAKAwAAAhAQAA6gEAAOsBAAAyMVN1cHBvcnRWZXJ0ZXhDYWxsYmFjawDUTAAAiDAAAHQ0AABUUklBTkdMRU1FU0gAAAAAAAAAACAxAADsAQAA7QEAAO4BAAAEAQAABQEAAAYBAADvAQAA8AEAAPEBAADyAQAACwEAANABAADRAQAA8wEAAPQBAAAQAQAA9QEAADE4YnRTdGF0aWNQbGFuZVNoYXBlAAAAANRMAAAIMQAAqDYAAFNUQVRJQ1BMQU5FAGJ0U3RhdGljUGxhbmVTaGFwZURhdGEAAAAAAAB0MgAAAQEAAPYBAAC0AQAABAEAAAUBAAAGAQAABwEAAAgBAACXAQAAOAAAAAsBAAAMAQAADQEAAA4BAAAPAQAAEAEAABEBAACZAQAAEwEAAJoBAAAVAQAAmwEAAJwBAAAYAQAAOAAAADgAAAA4AAAAOAAAADgAAAA4AAAAOAAAAAAAAACoMgAAAQEAAPcBAAD4AQAABAEAAAUBAAAGAQAAlgEAAAgBAACXAQAAOAAAAAsBAAAMAQAADQEAAA4BAAAPAQAAEAEAABEBAACZAQAAEwEAAJoBAAAVAQAAmwEAAJwBAAAYAQAAOAAAADgAAAA4AAAAOAAAADgAAAA4AAAAOAAAADIzYnRQb2x5aGVkcmFsQ29udmV4U2hhcGUAAADUTAAAWDIAAFA0AAAzNGJ0UG9seWhlZHJhbENvbnZleEFhYmJDYWNoaW5nU2hhcGUAAAAA1EwAAIAyAAB0MgAAAAAAABAzAAD5AQAA+gEAAPsBAAAEAQAABQEAAAYBAAD8AQAA/QEAAP4BAAD/AQAACwEAANABAADRAQAA5AEAAOUBAAAQAQAAAAIAADEyYnRFbXB0eVNoYXBlAADUTAAAADMAAKg2AABFbXB0eQBidENvbGxpc2lvblNoYXBlRGF0YQAxNmJ0Q29sbGlzaW9uU2hhcGUAAACsTAAANzMAAAAAAADIMwAAsgEAAAECAAA4AAAABAEAAAUBAAAGAQAAOAAAADgAAAA4AAAAOAAAAAsBAAA4AAAAOAAAAOQBAADlAQAAEAEAADgAAAA4AAAAEwEAADgAAAA4AAAAOAAAADgAAAAxM2J0Q29udmV4U2hhcGUA1EwAALgzAABMMwAAAAAAAFA0AACyAQAAAgIAALQBAAAEAQAABQEAAAYBAAAHAQAACAEAADgAAAA4AAAACwEAAAwBAAANAQAADgEAAA8BAAAQAQAAEQEAADgAAAATAQAAOAAAABUBAACbAQAAnAEAADIxYnRDb252ZXhJbnRlcm5hbFNoYXBlANRMAAA4NAAAyDMAADE4YnRUcmlhbmdsZUNhbGxiYWNrAAAAAKxMAABcNAAAMzFidEludGVybmFsVHJpYW5nbGVJbmRleENhbGxiYWNrAAAArEwAAHw0AAAAAAAAIDUAALIBAAADAgAABAIAAAQBAAAFAQAABgEAAAUCAAAIAQAABgIAAAcCAAAIAgAACQIAAA0BAAAKAgAACwIAABABAAARAQAADAIAABMBAAANAgAAFQEAAJsBAACcAQAAMTRidENhcHN1bGVTaGFwZQAAAADUTAAADDUAAFA0AABDYXBzdWxlU2hhcGUAYnRDYXBzdWxlU2hhcGVEYXRhAAAAAADsNQAAAQEAAA4CAAD4AQAABAEAAAUBAAAGAQAADwIAABACAACXAQAAEQIAAAsBAAAMAQAADQEAAA4BAAAPAQAAEAEAABICAAATAgAAEwEAABQCAAAVAQAAmwEAAJwBAAAYAQAAFQIAABYCAAAXAgAAGAIAABkCAAAaAgAAGwIAADI1YnRDb252ZXhUcmlhbmdsZU1lc2hTaGFwZQDUTAAA0DUAAKgyAAAAAAAALDYAAOcBAAAcAgAAHQIAADI2TG9jYWxTdXBwb3J0VmVydGV4Q2FsbGJhY2sAAAAA1EwAAAw2AACgNAAAQ29udmV4VHJpbWVzaAAAAAAAAACoNgAAHgIAAB8CAAA4AAAABAEAAAUBAAAGAQAAOAAAADgAAAA4AAAAOAAAAAsBAADQAQAA0QEAAOQBAADlAQAAEAEAADgAAAAxNGJ0Q29uY2F2ZVNoYXBlAAAAANRMAACUNgAATDMAAAAAAABMNwAAAQEAACACAAAhAgAABAEAAAUBAAAGAQAAIgIAAAgBAAAjAgAAJAIAAAsBAAAlAgAADQEAAA4BAAAPAQAAEAEAACYCAAAnAgAAEwEAACgCAAAVAQAAKQIAACoCAAAYAQAAKwIAACwCAAAtAgAALgIAAC8CAAAwAgAAMQIAADICAAAxMGJ0Qm94U2hhcGUAAAAA1EwAADw3AAB0MgAAQm94AAAAgD8AAIC/"),h(p,14206,"gD8AAIC/"),h(p,14238,"gD8AAIC/AAAAAAAAAAABAAAAAgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABAAAAAUAAAAGAAAAAQAAAAIAAAADAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAFAAAABgAAAAcAAAAHAAAAAAAAAEA4AAAzAgAANAIAADUCAAA2AgAANwIAADgCAAA5AgAAOgIAADE0YnRPcHRpbWl6ZWRCdmgAAAAA1EwAACw4AAAwQAAAAAAAAMQ4AADnAQAAOwIAADwCAABaTjE0YnRPcHRpbWl6ZWRCdmg1YnVpbGRFUDIzYnRTdHJpZGluZ01lc2hJbnRlcmZhY2ViUks5YnRWZWN0b3IzUzRfRTI5UXVhbnRpemVkTm9kZVRyaWFuZ2xlQ2FsbGJhY2sA1EwAAGA4AACgNAAAAAAAAEA5AADnAQAAPQIAAD4CAABaTjE0YnRPcHRpbWl6ZWRCdmg1YnVpbGRFUDIzYnRTdHJpZGluZ01lc2hJbnRlcmZhY2ViUks5YnRWZWN0b3IzUzRfRTIwTm9kZVRyaWFuZ2xlQ2FsbGJhY2sAANRMAADkOAAAoDQAAAAAAAC4OQAAPwIAAEACAABBAgAABAEAAAUBAAAGAQAAQgIAAEMCAABEAgAARQIAAAsBAADQAQAA0QEAAOQBAADlAQAAEAEAAEYCAABHAgAAMjVidEhlaWdodGZpZWxkVGVycmFpblNoYXBlANRMAACcOQAAqDYAAEhFSUdIVEZJRUxEAAAAAABMOgAAsgEAAEgCAABJAgAABAEAAAUBAAAGAQAASgIAAAgBAABLAgAATAIAAE0CAABOAgAADQEAAE8CAABQAgAAEAEAAFECAABSAgAAEwEAAFMCAAAVAQAAmwEAAJwBAABUAgAAMTVidEN5bGluZGVyU2hhcGUAAADUTAAAODoAAFA0AABDeWxpbmRlclkAYnRDeWxpbmRlclNoYXBlRGF0YQBidEludEluZGV4RGF0YQBidFNob3J0SW50SW5kZXhUcmlwbGV0RGF0YQBidENoYXJJbmRleFRyaXBsZXREYXRhAGJ0VmVjdG9yM0Zsb2F0RGF0YQBidFZlY3RvcjNEb3VibGVEYXRhAGJ0TWVzaFBhcnREYXRhAGJ0U3RyaWRpbmdNZXNoSW50ZXJmYWNlRGF0YQAyM2J0U3RyaWRpbmdNZXNoSW50ZXJmYWNlAACsTAAACTsAAAAAAACQOwAAVQIAAFYCAABXAgAAWAIAAFkCAABaAgAAWwIAAFwCAABdAgAAXgIAAF8CAABgAgAAYQIAAGICAABjAgAAMjZidFRyaWFuZ2xlSW5kZXhWZXJ0ZXhBcnJheQAAAADUTAAAcDsAACQ7AAAAAAAA9DsAAGQCAABlAgAAVwIAAFgCAABZAgAAWgIAAFsCAABcAgAAZgIAAGcCAABfAgAAYAIAAGECAABiAgAAYwIAADE0YnRUcmlhbmdsZU1lc2gAAAAA1EwAAOA7AACQOwAAAAAAAPA8AABoAgAAaQIAAGoCAABrAgAAbAIAAG0CAABuAgAAbwIAAHACAABxAgAAcgIAAHMCAAB0AgAAdQIAAHYCAAB3AgAAeAIAAGJ0SGFzaGVkT3ZlcmxhcHBpbmdQYWlyQ2FjaGU6OnByb2Nlc3NBbGxPdmVybGFwcGluZ1BhaXJzADI4YnRIYXNoZWRPdmVybGFwcGluZ1BhaXJDYWNoZQAyMmJ0T3ZlcmxhcHBpbmdQYWlyQ2FjaGUAMjVidE92ZXJsYXBwaW5nUGFpckNhbGxiYWNrAAAAAKxMAAC9PAAA1EwAAKQ8AADcPAAA1EwAAIU8AADkPAAAAAAAAIA9AAC0AAAAeQIAAHoCAABaTjI4YnRIYXNoZWRPdmVybGFwcGluZ1BhaXJDYWNoZTE5Y2xlYW5Qcm94eUZyb21QYWlyc0VQMTdidEJyb2FkcGhhc2VQcm94eVAxMmJ0RGlzcGF0Y2hlckUxN0NsZWFuUGFpckNhbGxiYWNrAAAA1EwAABA9AACIEAAAAAAAACQ+AAC0AAAAewIAAHwCAABaTjI4YnRIYXNoZWRPdmVybGFwcGluZ1BhaXJDYWNoZTM3cmVtb3ZlT3ZlcmxhcHBpbmdQYWlyc0NvbnRhaW5pbmdQcm94eUVQMTdidEJyb2FkcGhhc2VQcm94eVAxMmJ0RGlzcGF0Y2hlckUxOFJlbW92ZVBhaXJDYWxsYmFjawAAAADUTAAAoD0AAIgQAAAAAAAApD4AAH0CAAB+AgAAfwIAAIACAACBAgAAggIAAIMCAACEAgAAhQIAAIYCAACHAgAAiAIAAIkCAACKAgAAMTZidERidnRCcm9hZHBoYXNlADIxYnRCcm9hZHBoYXNlSW50ZXJmYWNlAACsTAAAgz4AANRMAABwPgAAnD4AAAAAAADsPgAASAEAAIsCAACMAgAAjQIAAEwBAABNAQAATgEAADE4YnREYnZ0VHJlZUNvbGxpZGVyAAAAANRMAADUPgAAeCAAAAAAAAA0PwAASAEAAI4CAABKAQAAjwIAAEwBAABNAQAATgEAADE5QnJvYWRwaGFzZVJheVRlc3RlcgAAANRMAAAcPwAAeCAAAAAAAAB8PwAASAEAAJACAABKAQAAkQIAAEwBAABNAQAATgEAADIwQnJvYWRwaGFzZUFhYmJUZXN0ZXIAANRMAABkPwAAeCAAADEyYnREaXNwYXRjaGVyAACsTAAAiD8AAAAAAAAwQAAAkgIAAJMCAAA1AgAANgIAADcCAAA4AgAAOQIAAGJ0T3B0aW1pemVkQnZoTm9kZURhdGEAYnRRdWFudGl6ZWRCdmhOb2RlRGF0YQBidEJ2aFN1YnRyZWVJbmZvRGF0YQBidFF1YW50aXplZEJ2aEZsb2F0RGF0YQAxNGJ0UXVhbnRpemVkQnZoAKxMAAAfQAAAAAAAADQTAADGAAAAlAIAADgAAAA4AAAAOAAAAFJvb3QAAAAAAAAAAAMAAAAEAAAABAAAAAYAAACD+aIARE5uAPwpFQDRVycA3TT1AGLbwAA8mZUAQZBDAGNR/gC73qsAt2HFADpuJADSTUIASQbgAAnqLgAcktEA6x3+ACmxHADoPqcA9TWCAES7LgCc6YQAtCZwAEF+XwDWkTkAU4M5AJz0OQCLX4QAKPm9APgfOwDe/5cAD5gFABEv7wAKWosAbR9tAM9+NgAJyycARk+3AJ5mPwAt6l8Auid1AOXrxwA9e/EA9zkHAJJSigD7a+oAH7FfAAhdjQAwA1YAe/xGAPCrawAgvM8ANvSaAOOpHQBeYZEACBvmAIWZZQCgFF8AjUBoAIDY/wAnc00ABgYxAMpWFQDJqHMAe+JgAGuMwAAZxEcAzWfDAAno3ABZgyoAi3bEAKYclgBEr90AGVfRAKU+BQAFB/8AM34/AMIy6ACYT94Au30yACY9wwAea+8An/heADUfOgB/8soA8YcdAHyQIQBqJHwA1W76ADAtdwAVO0MAtRTGAMMZnQCtxMIALE1BAAwAXQCGfUYA43EtAJvGmgAzYgAAtNJ8ALSnlwA3VdUA1z72AKMQGABNdvwAZJ0qAHDXqwBjfPgAerBXABcV5wDASVYAO9bZAKeEOAAkI8sA1op3AFpUIwAAH7kA8QobABnO3wCfMf8AZh5qAJlXYQCs+0cAfn/YACJltwAy6IkA5r9gAO/EzQBsNgkAXT/UABbe1wBYO94A3puSANIiKAAohugA4lhNAMbKMgAI4xYA4H3LABfAUADzHacAGOBbAC4TNACDEmIAg0gBAPWOWwCtsH8AHunyAEhKQwAQZ9MAqt3YAK5fQgBqYc4ACiikANOZtAAGpvIAXHd/AKPCgwBhPIgAinN4AK+MWgBv170ALaZjAPS/ywCNge8AJsFnAFXKRQDK2TYAKKjSAMJhjQASyXcABCYUABJGmwDEWcQAyMVEAE2ykQAAF/MA1EOtAClJ5QD91RAAAL78AB6UzABwzu4AEz71AOzxgACz58MAx/goAJMFlADBcT4ALgmzAAtF8wCIEpwAqyB7AC61nwBHksIAezIvAAxVbQByp5AAa+cfADHLlgB5FkoAQXniAPTfiQDolJcA4uaEAJkxlwCI7WsAX182ALv9DgBImrQAZ6RsAHFyQgCNXTIAnxW4ALzlCQCNMSUA93Q5ADAFHAANDAEASwhoACzuWABHqpAAdOcCAL3WJAD3faYAbkhyAJ8W7wCOlKYAtJH2ANFTUQDPCvIAIJgzAPVLfgCyY2gA3T5fAEBdAwCFiX8AVVIpADdkwABt2BAAMkgyAFtMdQBOcdQARVRuAAsJwQAq9WkAFGbVACcHnQBdBFAAtDvbAOp2xQCH+RcASWt9AB0nugCWaSkAxsysAK0UVACQ4moAiNmJACxyUAAEpL4AdweUAPMwcAAA/CcA6nGoAGbCSQBk4D0Al92DAKM/lwBDlP0ADYaMADFB3gCSOZ0A3XCMABe35wAI3zsAFTcrAFyAoABagJMAEBGSAA/o2ABsgK8A2/9LADiQDwBZGHYAYqUVAGHLuwDHibkAEEC9ANLyBABJdScA67b2ANsiuwAKFKoAiSYvAGSDdgAJOzMADpQaAFE6qgAdo8IAr+2uAFwmEgBtwk0ALXqcAMBWlwADP4MACfD2ACtAjABtMZkAObQHAAwgFQDYw1sA9ZLEAMatSwBOyqUApzfNAOapNgCrkpQA3UJoABlj3gB2jO8AaItSAPzbNwCuoasA3xUxAACuoQAM+9oAZE1mAO0FtwApZTAAV1a/AEf/OgBq+bkAdb7zACiT3wCrgDAAZoz2AATLFQD6IgYA2eQdAD2zpABXG48ANs0JAE5C6QATvqQAMyO1APCqGgBPZagA0sGlAAs/DwBbeM0AI/l2AHuLBACJF3IAxqZTAG9u4gDv6wAAm0pYAMTatwCqZroAds/PANECHQCx8S0AjJnBAMOtdwCGSNoA912gAMaA9ACs8C8A3eyaAD9cvADQ3m0AkMcfACrbtgCjJToAAK+aAK1TkwC2VwQAKS20AEuAfgDaB6cAdqoOAHtZoQAWEioA3LctAPrl/QCJ2/4Aib79AOR2bAAGqfwAPoBwAIVuFQD9h/8AKD4HAGFnMwAqGIYATb3qALPnrwCPbW4AlWc5ADG/WwCE10gAMN8WAMctQwAlYTUAyXDOADDLuAC/bP0ApACiAAVs5ABa3aAAIW9HAGIS0gC5XIQAcGFJAGtW4ACZUgEAUFU3AB7VtwAz8cQAE25fAF0w5ACFLqkAHbLDAKEyNgAIt6QA6rHUABb3IQCPaeQAJ/93AAwDgACNQC0AT82gACClmQCzotMAL10KALT5QgAR2ssAfb7QAJvbwQCrF70AyqKBAAhqXAAuVRcAJwBVAH8U8ADhB4YAFAtkAJZBjQCHvt4A2v0qAGsltgB7iTQABfP+ALm/ngBoak8ASiqoAE/EWgAt+LwA11qYAPTHlQANTY0AIDqmAKRXXwAUP7EAgDiVAMwgAQBx3YYAyd62AL9g9QBNZREAAQdrAIywrACywNAAUVVIAB77DgCVcsMAowY7AMBANQAG3HsA4EXMAE4p+gDWysgA6PNBAHxk3gCbZNgA2b4xAKSXwwB3WNQAaePFAPDaEwC6OjwARhhGAFV1XwDSvfUAbpLGAKwuXQAORO0AHD5CAGHEhwAp/ekA59bzACJ8ygBvkTUACODFAP/XjQBuauIAsP3GAJMIwQB8XXQAa62yAM1unQA+cnsAxhFqAPfPqQApc98Atcm6ALcAUQDisg0AdLokAOV9YAB02IoADRUsAIEYDAB+ZpQAASkWAJ96dgD9/b4AVkXvANl+NgDs2RMAi7q5AMSX/AAxqCcA8W7DAJTFNgDYqFYAtKi1AM/MDgASiS0Ab1c0ACxWiQCZzuMA1iC5AGteqgA+KpwAEV/MAP0LSgDh9PsAjjttAOKGLADp1IQA/LSpAO/u0QAuNckALzlhADghRAAb2cgAgfwKAPtKagAvHNgAU7SEAE6ZjABUIswAKlXcAMDG1gALGZYAGnC4AGmVZAAmWmAAP1LuAH8RDwD0tREA/Mv1ADS8LQA0vO4A6F3MAN1eYABnjpsAkjPvAMkXuABhWJsA4Ve8AFGDxgDYPhAA3XFIAC0c3QCvGKEAISxGAFnz1wDZepgAnlTAAE+G+gBWBvwA5XmuAIkiNgA4rSIAZ5PcAFXoqgCCJjgAyuebAFENpACZM7EAqdcOAGkFSABlsvAAf4inAIhMlwD50TYAIZKzAHuCSgCYzyEAQJ/cANxHVQDhdDoAZ+tCAP6d3wBe1F8Ae2ekALqsegBV9qIAK4gjAEG6VQBZbggAISqGADlHgwCJ4+YA5Z7UAEn7QAD/VukAHA/KAMVZigCU+isA08HFAA/FzwDbWq4AR8WGAIVDYgAhhjsALHmUABBhhwAqTHsAgCwaAEO/EgCIJpAAeDyJAKjE5ADl23sAxDrCACb06gD3Z4oADZK/AGWjKwA9k7EAvXwLAKRR3AAn3WMAaeHdAJqUGQCoKZUAaM4oAAnttABEnyAATpjKAHCCYwB+fCMAD7kyAKf1jgAUVucAIfEIALWdKgBvfk0ApRlRALX5qwCC39YAlt1hABY2AgDEOp8Ag6KhAHLtbQA5jXoAgripAGsyXABGJ1sAADTtANIAdwD89FUAAVlNAOBxgA=="),h(p,19267,"QPsh+T8AAAAALUR0PgAAAICYRvg8AAAAYFHMeDsAAACAgxvwOQAAAEAgJXo4AAAAgCKC4zYAAAAAHfNpNThj7T7aD0k/Xph7P9oPyT9pN6wxaCEiM7QPFDNoIaIz2w9JP9sPSb/kyxZA5MsWwAAAAAAAAACA2w9JQNsPScAAAIA/AADAPwAAAADcz9E1AAAAAADAFT9fX2N4YV9ndWFyZF9hY3F1aXJlIGRldGVjdGVkIHJlY3Vyc2l2ZSBpbml0aWFsaXphdGlvbgBQdXJlIHZpcnR1YWwgZnVuY3Rpb24gY2FsbGVkIQBTdDl0eXBlX2luZm8AAAAArEwAACxMAABOMTBfX2N4eGFiaXYxMTZfX3NoaW1fdHlwZV9pbmZvRQAAAADUTAAAREwAADxMAABOMTBfX2N4eGFiaXYxMTdfX2NsYXNzX3R5cGVfaW5mb0UAAADUTAAAdEwAAGhMAAAAAAAAmEwAAJ0CAACeAgAAnwIAAKACAAChAgAAogIAAKMCAACkAgAAAAAAABxNAACdAgAApQIAAJ8CAACgAgAAoQIAAKYCAACnAgAAqAIAAE4xMF9fY3h4YWJpdjEyMF9fc2lfY2xhc3NfdHlwZV9pbmZvRQAAAADUTAAA9EwAAJhMAAAAAAAAeE0AAJ0CAACpAgAAnwIAAKACAAChAgAAqgIAAKsCAACsAgAATjEwX19jeHhhYml2MTIxX192bWlfY2xhc3NfdHlwZV9pbmZvRQAAANRMAABQTQAAmEw="),h(p,19847,"QArXozwBAAAAbxKDOgEAAACXAgAAmAIAAJkCAACaAgAAmwIAAJwC"),function(e,t,i){t.memory;var o=n,a=new e.Int8Array(i),u=new e.Int16Array(i),f=new e.Int32Array(i),h=new e.Uint8Array(i),p=new e.Uint16Array(i),m=new e.Uint32Array(i),d=new e.Float32Array(i),v=new e.Float64Array(i),g=e.Math.imul,y=e.Math.fround,A=e.Math.abs,x=(e.Math.clz32,e.Math.min),b=e.Math.max,C=e.Math.floor,S=(e.Math.ceil,e.Math.sqrt),E=t.abort,w=(e.NaN,e.Infinity,t.gettimeofday),T=t.emscripten_memcpy_big,P=t.emscripten_resize_heap,I=t.abort,R=5268592,N=0;function D(e){var t,n=0,i=0,o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0;R=t=R-16|0;e:{t:{n:{i:{o:{a:{r:{s:{c:{l:{_:{if((e|=0)>>>0<=244){if(3&(n=(r=f[6261])>>>(e=(s=e>>>0<11?16:e+11&-8)>>>3|0)|0)){e=(n=f[25092+(a=(i=e+(1&(-1^n))|0)<<3)>>2])+8|0,(0|(o=f[n+8>>2]))!=(0|(a=a+25084|0))?(f[o+12>>2]=a,f[a+8>>2]=o):f[6261]=ds(i)&r,i<<=3,f[n+4>>2]=3|i,f[4+(n=n+i|0)>>2]=1|f[n+4>>2];break e}if(s>>>0<=(l=f[6263])>>>0)break _;if(n){i=n=(e=(0-(e=(0-(i=2<<e)|i)&n<<e)&e)-1|0)>>>12&16,i|=n=(e=e>>>n|0)>>>5&8,i|=n=(e=e>>>n|0)>>>2&4,n=f[25092+(o=(i=((i|=n=(e=e>>>n|0)>>>1&2)|(n=(e=e>>>n|0)>>>1&1))+(e>>>n|0)|0)<<3)>>2],(0|(e=f[n+8>>2]))!=(0|(o=o+25084|0))?(f[e+12>>2]=o,f[o+8>>2]=e):(r=ds(i)&r,f[6261]=r),e=n+8|0,f[n+4>>2]=3|s,a=(i<<=3)-s|0,f[4+(c=n+s|0)>>2]=1|a,f[n+i>>2]=a,l&&(n=25084+((i=l>>>3|0)<<3)|0,o=f[6266],(i=1<<i)&r?i=f[n+8>>2]:(f[6261]=i|r,i=n),f[n+8>>2]=o,f[i+12>>2]=o,f[o+12>>2]=n,f[o+8>>2]=i),f[6266]=c,f[6263]=a;break e}if(!(u=f[6262]))break _;for(i=n=(e=(u&0-u)-1|0)>>>12&16,i|=n=(e=e>>>n|0)>>>5&8,i|=n=(e=e>>>n|0)>>>2&4,n=f[25348+(((i|=n=(e=e>>>n|0)>>>1&2)|(n=(e=e>>>n|0)>>>1&1))+(e>>>n|0)<<2)>>2],o=(-8&f[n+4>>2])-s|0,i=n;(e=f[i+16>>2])||(e=f[i+20>>2]);)o=(i=(a=(-8&f[e+4>>2])-s|0)>>>0<o>>>0)?a:o,n=i?e:n,i=e;if(_=f[n+24>>2],(0|(a=f[n+12>>2]))!=(0|n)){e=f[n+8>>2],f[e+12>>2]=a,f[a+8>>2]=e;break t}if(!(e=f[(i=n+20|0)>>2])){if(!(e=f[n+16>>2]))break l;i=n+16|0}for(;c=i,a=e,(e=f[(i=e+20|0)>>2])||(i=a+16|0,e=f[a+16>>2]););f[c>>2]=0;break t}if(s=-1,!(e>>>0>4294967231)&&(s=-8&(n=e+11|0),l=f[6262])){i=0-s|0,r=0,(n=n>>>8|0)&&(r=31,s>>>0>16777215||(r=28+((e=((r=(n<<=o=n+1048320>>>16&8)<<(e=n+520192>>>16&4))<<(n=r+245760>>>16&2)>>>15|0)-(n|e|o)|0)<<1|s>>>e+21&1)|0));u:{f:{if(o=f[25348+(r<<2)>>2])for(n=s<<(31==(0|r)?0:25-(r>>>1|0)|0),e=0;;){if(!((c=(-8&f[o+4>>2])-s|0)>>>0>=i>>>0||(a=o,i=c))){i=0,e=o;break f}if(c=f[o+20>>2],o=f[16+((n>>>29&4)+o|0)>>2],e=c?(0|c)==(0|o)?e:c:e,n<<=0!=(0|o),!o)break}else e=0;if(!(e|a)){if(!(e=(0-(e=2<<r)|e)&l))break _;o=n=(e=(e&0-e)-1|0)>>>12&16,o|=n=(e=e>>>n|0)>>>5&8,o|=n=(e=e>>>n|0)>>>2&4,e=f[25348+(((o|=n=(e=e>>>n|0)>>>1&2)|(n=(e=e>>>n|0)>>>1&1))+(e>>>n|0)<<2)>>2]}if(!e)break u}for(;i=(n=(o=(-8&f[e+4>>2])-s|0)>>>0<i>>>0)?o:i,a=n?e:a,e=(n=f[e+16>>2])||f[e+20>>2];);}if(!(!a|i>>>0>=f[6263]-s>>>0)){if(c=f[a+24>>2],(0|a)!=(0|(n=f[a+12>>2]))){e=f[a+8>>2],f[e+12>>2]=n,f[n+8>>2]=e;break n}if(!(e=f[(o=a+20|0)>>2])){if(!(e=f[a+16>>2]))break c;o=a+16|0}for(;r=o,n=e,(e=f[(o=e+20|0)>>2])||(o=n+16|0,e=f[n+16>>2]););f[r>>2]=0;break n}}}if((n=f[6263])>>>0>=s>>>0){e=f[6266],(i=n-s|0)>>>0>=16?(f[6263]=i,o=e+s|0,f[6266]=o,f[o+4>>2]=1|i,f[e+n>>2]=i,f[e+4>>2]=3|s):(f[6266]=0,f[6263]=0,f[e+4>>2]=3|n,f[4+(n=e+n|0)>>2]=1|f[n+4>>2]),e=e+8|0;break e}if((o=f[6264])>>>0>s>>>0){n=o-s|0,f[6264]=n,i=(e=f[6267])+s|0,f[6267]=i,f[i+4>>2]=1|n,f[e+4>>2]=3|s,e=e+8|0;break e}if(e=0,i=a=s+47|0,f[6379]?n=f[6381]:(f[6382]=-1,f[6383]=-1,f[6380]=4096,f[6381]=4096,f[6379]=t+12&-16^1431655768,f[6384]=0,f[6372]=0,n=4096),(i=(r=i+n|0)&(c=0-n|0))>>>0<=s>>>0)break e;if((n=f[6371])&&(_=(l=f[6369])+i|0)>>>0<=l>>>0|_>>>0>n>>>0)break e;if(4&h[25488])break a;_:{u:{if(n=f[6267])for(e=25492;;){if((l=f[e>>2])+f[e+4>>2]>>>0>n>>>0&&l>>>0<=n>>>0)break u;if(!(e=f[e+8>>2]))break}if(-1==(0|(n=Vo(0))))break r;if(r=i,(o=(e=f[6380])+-1|0)&n&&(r=(i-n|0)+(n+o&0-e)|0),r>>>0<=s>>>0|r>>>0>2147483646)break r;if((e=f[6371])&&(c=(o=f[6369])+r|0)>>>0<=o>>>0|c>>>0>e>>>0)break r;if((0|n)!=(0|(e=Vo(r))))break _;break o}if((r=c&r-o)>>>0>2147483646)break r;if((0|(n=Vo(r)))==(f[e>>2]+f[e+4>>2]|0))break s;e=n}if(!(-1==(0|e)|s+48>>>0<=r>>>0)){if((n=(n=f[6381])+(a-r|0)&0-n)>>>0>2147483646){n=e;break o}if(-1!=(0|Vo(n))){r=n+r|0,n=e;break o}Vo(0-r|0);break r}if(n=e,-1!=(0|e))break o;break r}a=0;break t}n=0;break n}if(-1!=(0|n))break o}f[6372]=4|f[6372]}if(i>>>0>2147483646)break i;if((n=Vo(i))>>>0>=(e=Vo(0))>>>0|-1==(0|n)|-1==(0|e))break i;if((r=e-n|0)>>>0<=s+40>>>0)break i}e=f[6369]+r|0,f[6369]=e,e>>>0>m[6370]&&(f[6370]=e);o:{a:{r:{if(i=f[6267]){for(e=25492;;){if(((o=f[e>>2])+(a=f[e+4>>2])|0)==(0|n))break r;if(!(e=f[e+8>>2]))break}break a}for(n>>>0>=(e=f[6265])>>>0&&e||(f[6265]=n),e=0,f[6374]=r,f[6373]=n,f[6269]=-1,f[6270]=f[6379],f[6376]=0;o=25084+(i=e<<3)|0,f[i+25092>>2]=o,f[i+25096>>2]=o,32!=(0|(e=e+1|0)););o=(e=r+-40|0)-(i=n+8&7?-8-n&7:0)|0,f[6264]=o,i=n+i|0,f[6267]=i,f[i+4>>2]=1|o,f[4+(e+n|0)>>2]=40,f[6268]=f[6383];break o}if(!(8&h[e+12|0]|n>>>0<=i>>>0|o>>>0>i>>>0)){f[e+4>>2]=a+r,n=(e=i+8&7?-8-i&7:0)+i|0,f[6267]=n,e=(o=f[6264]+r|0)-e|0,f[6264]=e,f[n+4>>2]=1|e,f[4+(i+o|0)>>2]=40,f[6268]=f[6383];break o}}n>>>0<(a=f[6265])>>>0&&(f[6265]=n,a=0),o=n+r|0,e=25492;a:{r:{s:{c:{l:{_:{for(;;){if((0|o)!=f[e>>2]){if(e=f[e+8>>2])continue;break _}break}if(!(8&h[e+12|0]))break l}for(e=25492;;){if((o=f[e>>2])>>>0<=i>>>0&&(a=o+f[e+4>>2]|0)>>>0>i>>>0)break c;e=f[e+8>>2]}}if(f[e>>2]=n,f[e+4>>2]=f[e+4>>2]+r,f[4+(_=(n+8&7?-8-n&7:0)+n|0)>>2]=3|s,e=((n=o+(o+8&7?-8-o&7:0)|0)-_|0)-s|0,c=s+_|0,(0|n)==(0|i)){f[6267]=c,e=f[6264]+e|0,f[6264]=e,f[c+4>>2]=1|e;break r}if(f[6266]==(0|n)){f[6266]=c,e=f[6263]+e|0,f[6263]=e,f[c+4>>2]=1|e,f[e+c>>2]=e;break r}if(1==(3&(i=f[n+4>>2]))){u=-8&i;l:if(i>>>0<=255){if(a=i>>>3|0,i=f[n+8>>2],(0|(o=f[n+12>>2]))==(0|i)){f[6261]=f[6261]&ds(a);break l}f[i+12>>2]=o,f[o+8>>2]=i}else{if(l=f[n+24>>2],(0|(r=f[n+12>>2]))==(0|n))if((s=f[(o=n+20|0)>>2])||(s=f[(o=n+16|0)>>2])){for(;i=o,r=s,(s=f[(o=s+20|0)>>2])||(o=r+16|0,s=f[r+16>>2]););f[i>>2]=0}else r=0;else i=f[n+8>>2],f[i+12>>2]=r,f[r+8>>2]=i;if(l){i=f[n+28>>2];_:{if(f[(o=25348+(i<<2)|0)>>2]==(0|n)){if(f[o>>2]=r,r)break _;f[6262]=f[6262]&ds(i);break l}if(f[l+(f[l+16>>2]==(0|n)?16:20)>>2]=r,!r)break l}f[r+24>>2]=l,(i=f[n+16>>2])&&(f[r+16>>2]=i,f[i+24>>2]=r),(i=f[n+20>>2])&&(f[r+20>>2]=i,f[i+24>>2]=r)}}n=n+u|0,e=e+u|0}if(f[n+4>>2]=-2&f[n+4>>2],f[c+4>>2]=1|e,f[e+c>>2]=e,e>>>0<=255){e=25084+((n=e>>>3|0)<<3)|0,(i=f[6261])&(n=1<<n)?n=f[e+8>>2]:(f[6261]=n|i,n=e),f[e+8>>2]=c,f[n+12>>2]=c,f[c+12>>2]=e,f[c+8>>2]=n;break r}if(n=0,(o=e>>>8|0)&&(n=31,e>>>0>16777215||(n=28+((n=((s=(o<<=a=o+1048320>>>16&8)<<(n=o+520192>>>16&4))<<(o=s+245760>>>16&2)>>>15|0)-(o|n|a)|0)<<1|e>>>n+21&1)|0)),f[(i=c)+28>>2]=n,f[c+16>>2]=0,f[c+20>>2]=0,i=25348+(n<<2)|0,(o=f[6262])&(a=1<<n)){for(o=e<<(31==(0|n)?0:25-(n>>>1|0)|0),n=f[i>>2];;){if(i=n,(-8&f[n+4>>2])==(0|e))break s;if(n=o>>>29|0,o<<=1,!(n=f[16+(a=(4&n)+i|0)>>2]))break}f[a+16>>2]=c}else f[6262]=o|a,f[i>>2]=c;f[c+24>>2]=i,f[c+12>>2]=c,f[c+8>>2]=c;break r}for(c=(e=r+-40|0)-(o=n+8&7?-8-n&7:0)|0,f[6264]=c,o=n+o|0,f[6267]=o,f[o+4>>2]=1|c,f[4+(e+n|0)>>2]=40,f[6268]=f[6383],f[(o=(e=(a+(a+-39&7?39-a&7:0)|0)-47|0)>>>0<i+16>>>0?i:e)+4>>2]=27,e=f[6376],f[o+16>>2]=f[6375],f[o+20>>2]=e,e=f[6374],f[o+8>>2]=f[6373],f[o+12>>2]=e,f[6375]=o+8,f[6374]=r,f[6373]=n,f[6376]=0,e=o+24|0;f[e+4>>2]=7,n=e+8|0,e=e+4|0,a>>>0>n>>>0;);if((0|i)==(0|o))break o;if(f[o+4>>2]=-2&f[o+4>>2],a=o-i|0,f[i+4>>2]=1|a,f[o>>2]=a,a>>>0<=255){e=25084+((n=a>>>3|0)<<3)|0,(o=f[6261])&(n=1<<n)?n=f[e+8>>2]:(f[6261]=n|o,n=e),f[e+8>>2]=i,f[n+12>>2]=i,f[i+12>>2]=e,f[i+8>>2]=n;break o}if(f[i+16>>2]=0,f[i+20>>2]=0,e=0,(o=a>>>8|0)&&(e=31,a>>>0>16777215||(e=28+((e=((c=(o<<=r=o+1048320>>>16&8)<<(e=o+520192>>>16&4))<<(o=c+245760>>>16&2)>>>15|0)-(o|e|r)|0)<<1|a>>>e+21&1)|0)),f[(n=i)+28>>2]=e,n=25348+(e<<2)|0,(o=f[6262])&(r=1<<e)){for(e=a<<(31==(0|e)?0:25-(e>>>1|0)|0),n=f[n>>2];;){if(o=n,(0|a)==(-8&f[n+4>>2]))break a;if(n=e>>>29|0,e<<=1,!(n=f[16+(r=o+(4&n)|0)>>2]))break}f[r+16>>2]=i,f[i+24>>2]=o}else f[6262]=o|r,f[n>>2]=i,f[i+24>>2]=n;f[i+12>>2]=i,f[i+8>>2]=i;break o}e=f[i+8>>2],f[e+12>>2]=c,f[i+8>>2]=c,f[c+24>>2]=0,f[c+12>>2]=i,f[c+8>>2]=e}e=_+8|0;break e}e=f[o+8>>2],f[e+12>>2]=i,f[o+8>>2]=i,f[i+24>>2]=0,f[i+12>>2]=o,f[i+8>>2]=e}if(!((e=f[6264])>>>0<=s>>>0)){n=e-s|0,f[6264]=n,i=(e=f[6267])+s|0,f[6267]=i,f[i+4>>2]=1|n,f[e+4>>2]=3|s,e=e+8|0;break e}}f[6259]=48,e=0;break e}n:if(c){e=f[a+28>>2];i:{if(f[(o=25348+(e<<2)|0)>>2]==(0|a)){if(f[o>>2]=n,n)break i;l=ds(e)&l,f[6262]=l;break n}if(f[c+(f[c+16>>2]==(0|a)?16:20)>>2]=n,!n)break n}f[n+24>>2]=c,(e=f[a+16>>2])&&(f[n+16>>2]=e,f[e+24>>2]=n),(e=f[a+20>>2])&&(f[n+20>>2]=e,f[e+24>>2]=n)}n:if(i>>>0<=15)e=i+s|0,f[a+4>>2]=3|e,f[4+(e=e+a|0)>>2]=1|f[e+4>>2];else if(f[a+4>>2]=3|s,f[4+(o=a+s|0)>>2]=1|i,f[i+o>>2]=i,i>>>0<=255)e=25084+((n=i>>>3|0)<<3)|0,(i=f[6261])&(n=1<<n)?n=f[e+8>>2]:(f[6261]=n|i,n=e),f[e+8>>2]=o,f[n+12>>2]=o,f[o+12>>2]=e,f[o+8>>2]=n;else{e=0,(s=i>>>8|0)&&(e=31,i>>>0>16777215||(e=28+((e=((c=(s<<=r=s+1048320>>>16&8)<<(e=s+520192>>>16&4))<<(s=c+245760>>>16&2)>>>15|0)-(s|e|r)|0)<<1|i>>>e+21&1)|0)),f[(n=o)+28>>2]=e,f[o+16>>2]=0,f[o+20>>2]=0,n=25348+(e<<2)|0;i:{if((s=1<<e)&l){for(e=i<<(31==(0|e)?0:25-(e>>>1|0)|0),s=f[n>>2];;){if((-8&f[(n=s)+4>>2])==(0|i))break i;if(s=e>>>29|0,e<<=1,!(s=f[16+(r=(4&s)+n|0)>>2]))break}f[r+16>>2]=o}else f[6262]=s|l,f[n>>2]=o;f[o+24>>2]=n,f[o+12>>2]=o,f[o+8>>2]=o;break n}e=f[n+8>>2],f[e+12>>2]=o,f[n+8>>2]=o,f[o+24>>2]=0,f[o+12>>2]=n,f[o+8>>2]=e}e=a+8|0;break e}t:if(_){e=f[n+28>>2];n:{if(f[(i=25348+(e<<2)|0)>>2]==(0|n)){if(f[i>>2]=a,a)break n;f[6262]=ds(e)&u;break t}if(f[_+(f[_+16>>2]==(0|n)?16:20)>>2]=a,!a)break t}f[a+24>>2]=_,(e=f[n+16>>2])&&(f[a+16>>2]=e,f[e+24>>2]=a),(e=f[n+20>>2])&&(f[a+20>>2]=e,f[e+24>>2]=a)}o>>>0<=15?(e=o+s|0,f[n+4>>2]=3|e,f[4+(e=e+n|0)>>2]=1|f[e+4>>2]):(f[n+4>>2]=3|s,f[4+(s=n+s|0)>>2]=1|o,f[o+s>>2]=o,l&&(e=25084+((i=l>>>3|0)<<3)|0,a=f[6266],(i=1<<i)&r?i=f[e+8>>2]:(f[6261]=i|r,i=e),f[e+8>>2]=a,f[i+12>>2]=a,f[a+12>>2]=e,f[a+8>>2]=i),f[6266]=s,f[6263]=o),e=n+8|0}return R=t+16|0,0|e}function M(e,t,n,i,o){var a,r,s,c,l,_,u,h,p,m,d,v,y,A,x=0,b=0,C=0,S=0,E=0,w=0,T=0,P=0,I=0,D=0,M=0,O=0,z=0,L=0,F=0,U=0,B=0,k=0,j=0,G=0,V=0,H=0,W=0,q=0,Y=0,X=0,Q=0,K=0;if(R=a=R-48|0,z=f[o>>2],M=t,(V=f[i>>2])&&(M=f[V+12>>2]),j=f[M+96>>2],w=f[t+96>>2],v=f[n+96>>2]-w|0,x=f[(V||z)+12>>2],T=f[t+92>>2],b=f[x+92>>2]-T|0,E=n,_=f[n+92>>2]-T|0,F=f[x+96>>2]-w|0,P=Gs(u=n=g(v,b)-g(_,F)|0,h=n>>31,n=v,U=n>>31),k=N,S=f[t+88>>2],C=f[x+88>>2]-S|0,y=f[E+88>>2]-S|0,x=Gs(p=t=g(C,_)-g(b,y)|0,m=t>>31,t=y,I=t>>31),b=Gs(r=P-x|0,s=k-(N+(P>>>0<x>>>0)|0)|0,P=Y=f[M+92>>2],P>>31),k=N,x=Gs(p,m,P=_,H=P>>31),q=N,D=b,A=b=g(t,F)-g(n,C)|0,n=Gs(b,d=b>>31,n,U),x=Gs(c=x-n|0,q=q-(N+(x>>>0<n>>>0)|0)|0,n=M=f[M+88>>2],n>>31),b=N+k|0,b=(n=D+x|0)>>>0<x>>>0?b+1|0:b,t=Gs(t,I,A,d),x=N,D=n,n=Gs(P,H,u,h),n=Gs(H=t-n|0,l=x-(N+(t>>>0<n>>>0)|0)|0,j,j>>31),x=N+b|0,P=t=D+n|0,n=t>>>0<n>>>0?x+1|0:x,t=Gs(u,h,S,S>>31),x=N,w=Gs(p,m,w,w>>31),x=N+x|0,x=(t=w+t|0)>>>0<w>>>0?x+1|0:x,w=Gs(A,d,T,T>>31),x=N+x|0,G=t=w+t|0,I=t>>>0<w>>>0?x+1|0:x,E=z?f[z+12>>2]:E,F=f[E+96>>2],U=f[E+92>>2],k=f[E+88>>2],t=z,V&&(t=z,f[V+12>>2])){t=f[f[V+8>>2]+4>>2],S=f[t+12>>2],E=Gs(T=w=f[(x=S)+92>>2],w>>=31,A,d),b=N,D=E,B=x=f[x+88>>2],E=Gs(x,L=x>>31,u,h),b=N+b|0,b=(x=D+E|0)>>>0<E>>>0?b+1|0:b,C=x,D=x=f[S+96>>2],E=Gs(x,O=x>>31,p,m),x=N+b|0;e:if(!((0|(x=(S=C+E|0)>>>0<E>>>0?x+1|0:x))<(0|I)||(0|x)<=(0|I)&&!(S>>>0>=G>>>0))){for(E=t+12|0,W=f[e+100>>2];;){if((0|W)==f[t+20>>2])break e;if(x=Gs(T,w,r,s),T=N,w=(S=Gs(B,L,c,q))+x|0,x=N+T|0,x=w>>>0<S>>>0?x+1|0:x,T=Gs(D,O,H,l),b=N+x|0,(0|(x=b=(w=T+w|0)>>>0<T>>>0?b+1|0:b))<(0|n)||(0|x)<=(0|n)&&!(w>>>0>P>>>0))break e;if(f[i>>2]=t,n=f[E>>2],j=f[n+96>>2],Y=f[n+92>>2],M=f[n+88>>2],!n)break;if(E=(t=f[f[t+8>>2]+4>>2])+12|0,P=w,n=x,b=f[t+12>>2],S=Gs(T=w=f[(x=b)+92>>2],w>>=31,A,d),C=N,B=x=f[x+88>>2],D=Gs(x,L=x>>31,u,h),x=N+C|0,x=(S=D+S|0)>>>0<D>>>0?x+1|0:x,C=S,D=S=f[b+96>>2],S=C+(b=Gs(S,O=S>>31,p,m))|0,C=N+x|0,(0|(C=S>>>0<b>>>0?C+1|0:C))<(0|I)||(0|C)<=(0|I)&&!(S>>>0>=G>>>0))break e}P=w,n=x}t=f[o>>2]}x=Gs(r,s,U,U>>31),w=N,T=Gs(c,q,k,k>>31),b=N+w|0,b=(x=T+x|0)>>>0<T>>>0?b+1|0:b,w=(T=Gs(H,l,F,F>>31))+x|0,x=N+b|0,x=w>>>0<T>>>0?x+1|0:x,T=w,w=x;e:if(t){if(f[t+12>>2]&&(E=f[f[t+8>>2]>>2],S=f[E+12>>2],B=b=f[(x=S)+92>>2],b=Gs(b,L=b>>31,A,d),C=N,X=b,D=x=f[x+88>>2],b=Gs(x,O=x>>31,u,h),C=N+C|0,C=(x=X+b|0)>>>0<b>>>0?C+1|0:C,X=x,b=x=f[S+96>>2],Q=Gs(x,W=x>>31,p,m),x=N+C|0,!((0|(x=(S=X+Q|0)>>>0<Q>>>0?x+1|0:x))<(0|I)||(0|x)<=(0|I)&&!(S>>>0>=G>>>0)))){for(Q=E+12|0,K=f[e+100>>2];;){if((0|K)==f[(S=E)+20>>2])break e;if(x=Gs(B,L,r,s),C=N,E=(B=Gs(D,O,c,q))+x|0,x=N+C|0,x=E>>>0<B>>>0?x+1|0:x,b=Gs(H,l,b,W),C=N+x|0,C=(E=b+E|0)>>>0<b>>>0?C+1|0:C,b=E,(0|(x=C))<(0|w)||(0|x)<=(0|w)&&!(b>>>0>T>>>0))break e;if(f[o>>2]=S,t=f[Q>>2],F=f[t+96>>2],U=f[t+92>>2],k=f[t+88>>2],!t)break;if(Q=(E=f[f[S+8>>2]>>2])+12|0,T=b,w=x,t=S,b=f[E+12>>2],B=S=f[(x=b)+92>>2],S=Gs(S,L=S>>31,A,d),C=N,D=x=f[x+88>>2],W=Gs(x,O=x>>31,u,h),x=N+C|0,x=(S=W+S|0)>>>0<W>>>0?x+1|0:x,X=S,C=Gs(b=S=f[b+96>>2],W=b>>31,p,m),x=N+x|0,(0|(x=(S=X+C|0)>>>0<C>>>0?x+1|0:x))<(0|I)||(0|x)<=(0|I)&&!(S>>>0>=G>>>0))break e}t=S,T=b,w=x}}else t=0;e:{if(n=w-((T>>>0<P>>>0)+n|0)|0,P=T-P|0,(0|n)>0||(0|n)>=0&&!(P>>>0<1))for(;;){w=t=I=(g(U-Y|0,_)+g(k-M|0,y)|0)+g(F-j|0,v)|0,B=t>>31;t:if(!(!(L=f[i>>2])|!f[L+12>>2]||(D=f[f[L>>2]+8>>2],f[D+20>>2]<=f[e+100>>2]))){t=f[D+12>>2],x=(T=f[t+92>>2])-Y|0,b=(S=f[t+88>>2])-M|0,t=(E=f[t+96>>2])-j|0,z=(g(x,_)+g(b,y)|0)+g(t,v)|0,x=Gs(r,s,x,x>>31),C=N,b=(O=Gs(c,q,b,b>>31))+x|0,x=N+C|0,x=b>>>0<O>>>0?x+1|0:x,C=b,b=Gs(H,l,t,t>>31),x=N+x|0,x=(t=C+b|0)>>>0<b>>>0?x+1|0:x,b=t,C=x;n:{if(!(x|t)){if((0|z)<0)break n;break t}if((0|C)>-1||(0|C)>=-1&&!(b>>>0<=4294967295))break t;if(O=(t=z)>>31,x=a,(0|t)>=1?(f[a+24>>2]=t,f[a+28>>2]=O,f[a+40>>2]=1,t=-1):(0|z)<=-1?(f[a+40>>2]=-1,f[a+24>>2]=0-t,f[a+28>>2]=0-((0<t>>>0)+O|0),t=1):(f[a+24>>2]=0,f[a+28>>2]=0,f[a+40>>2]=0,t=0),f[x+40>>2]=t,f[a+32>>2]=0-b,f[a+36>>2]=0-((0<b>>>0)+C|0),(0|I)>=1?(f[a>>2]=w,f[a+4>>2]=B,f[a+16>>2]=1,b=-1):(0|I)<=-1?(f[a+16>>2]=-1,t=w,f[a>>2]=0-t,f[a+4>>2]=0-((0<t>>>0)+B|0),b=1):(f[a>>2]=0,f[a+4>>2]=0,f[a+16>>2]=0,b=0),z=a,t=P,C=x=n,(0|x)>0||(0|x)>=0&&!(t>>>0<=0)||(t=0,C=0,(0|n)>-1||(0|n)>=-1&&!(P>>>0<=4294967295)||(f[a+16>>2]=b,t=0-(x=P)|0,C=0-((0<x>>>0)+n|0)|0)),x=C,f[z+8>>2]=t,f[z+12>>2]=x,(0|Ct(a+24|0,a))<=-1)break t}f[i>>2]=(0|L)==(0|V)?0:D,t=Gs(r,s,t=U-T|0,t>>31),n=N,t=(x=t)+(P=Gs(c,q,t=k-S|0,t>>31))|0,x=N+n|0,x=t>>>0<P>>>0?x+1|0:x,b=t,n=Gs(H,l,t=F-E|0,t>>31),x=N+x|0,P=t=b+n|0,n=t>>>0<n>>>0?x+1|0:x,M=S,Y=T,j=E;continue}if(!(t=f[o>>2])|!f[t+12>>2])break e;if(L=f[f[t+8>>2]>>2],f[L+20>>2]<=f[e+100>>2])break e;if(t=f[L+12>>2],E=x=S=(T=f[t+92>>2])-U|0,x=Gs(x,z=x>>31,A,d),b=N,C=x,D=x=k=(U=f[t+88>>2])-k|0,x=C+(G=Gs(x,O=x>>31,u,h))|0,C=N+b|0,C=x>>>0<G>>>0?C+1|0:C,b=x,G=t=F=(x=f[t+96>>2])-F|0,(0|b)!=(0-(t=Gs(p,m,t,W=t>>31))|0)|(0-(N+(0<t>>>0)|0)|0)!=(0|C))break e;if(t=Gs(r,s,t=T-Y|0,t>>31),T=N,t=(b=t)+(U=Gs(c,q,t=U-M|0,t>>31))|0,b=N+T|0,b=t>>>0<U>>>0?b+1|0:b,C=t,T=Gs(H,l,t=x-j|0,t>>31),x=N+b|0,x=(t=C+T|0)>>>0<T>>>0?x+1|0:x,T=t,t=x,(0|x)<0||(0|x)<=0&&!(T>>>0>=1))break e;S=(g(S,_)+g(k,y)|0)+g(F,v)|0,x=Gs(E,z,r,s),z=N,E=(b=Gs(D,O,c,q))+x|0,x=N+z|0,x=E>>>0<b>>>0?x+1|0:x,z=Gs(H,l,G,W),x=N+x|0,z=x=(E=z+E|0)>>>0<z>>>0?x+1|0:x;t:{if(!(x|E)){if((0|S)<0)break t;break e}if((0|z)>-1||(0|z)>=-1&&!(E>>>0<=4294967295))break e;if(F=(x=S)>>31,b=a,(0|x)>=1?(f[a+24>>2]=x,f[a+28>>2]=F,f[a+40>>2]=1,x=-1):(0|S)<=-1?(f[a+40>>2]=-1,f[a+24>>2]=0-x,f[a+28>>2]=0-((0<x>>>0)+F|0),x=1):(f[a+24>>2]=0,f[a+28>>2]=0,f[a+40>>2]=0,x=0),f[b+40>>2]=x,f[a+32>>2]=0-E,f[a+36>>2]=0-((0<E>>>0)+z|0),(0|I)>=1?(f[a>>2]=w,f[a+4>>2]=B,f[a+16>>2]=1,E=-1):(0|I)<=-1?(f[a+16>>2]=-1,f[a>>2]=0-w,f[a+4>>2]=0-((0<w>>>0)+B|0),E=1):(f[a>>2]=0,f[a+4>>2]=0,f[a+16>>2]=0,E=0),S=a,D=a,w=n,b=x=P,(0|n)>0||(0|n)>=0&&!(x>>>0<=0)||(w=0,b=0,(0|n)>-1||(0|n)>=-1&&!(P>>>0<=4294967295)||(f[a+16>>2]=E,w=0-((0<P>>>0)+n|0)|0,b=0-P|0)),f[D+8>>2]=b,f[S+12>>2]=w,(0|Ct(a+24|0,a))<=0)break e}f[o>>2]=L,n=f[L+12>>2],F=f[n+96>>2],U=f[n+92>>2],k=f[n+88>>2],P=T,n=t}if(!((0|n)>-1||(0|n)>=-1&&!(P>>>0<=4294967295)))for(;;){T=x=B=(g(U-Y|0,_)+g(k-M|0,y)|0)+g(F-j|0,v)|0,L=x>>31;t:if(!(!t|!f[t+12>>2]||(D=f[f[t+4>>2]+8>>2],f[D+20>>2]<=f[e+100>>2]))){x=f[D+12>>2],C=(w=f[x+92>>2])-U|0,I=(S=f[x+88>>2])-k|0,V=(E=f[x+96>>2])-F|0,b=(g(C,_)+g(I,y)|0)+g(V,v)|0,x=Gs(r,s,C,C>>31),O=N,C=(I=Gs(c,q,I,I>>31))+x|0,x=N+O|0,x=C>>>0<I>>>0?x+1|0:x,I=Gs(H,l,V,V>>31),x=N+x|0,I=x=(C=I+C|0)>>>0<I>>>0?x+1|0:x;n:{if(!(x|C)){if((0|b)>0)break n;break t}if((0|I)>-1||(0|I)>=-1&&!(C>>>0<=4294967295))break t;if(O=(x=b)>>31,G=a,(0|x)>=1?(f[a+24>>2]=x,f[a+28>>2]=O,f[a+40>>2]=1,x=-1):(0|b)<=-1?(f[a+40>>2]=-1,f[a+24>>2]=0-x,f[a+28>>2]=0-((0<x>>>0)+O|0),x=1):(f[a+24>>2]=0,f[a+28>>2]=0,f[a+40>>2]=0,x=0),f[G+40>>2]=x,f[a+32>>2]=0-C,f[a+36>>2]=0-((0<C>>>0)+I|0),(0|B)>=1?(f[a>>2]=T,f[a+4>>2]=L,f[a+16>>2]=1,I=-1):(0|B)<=-1?(f[a+16>>2]=-1,x=T,f[a>>2]=0-x,f[a+4>>2]=0-((0<x>>>0)+L|0),I=1):(f[a>>2]=0,f[a+4>>2]=0,f[a+16>>2]=0,I=0),C=a,x=P,b=n,(0|n)>0||(0|n)>=0&&!(x>>>0<=0)||(x=0,b=0,(0|n)>-1||(0|n)>=-1&&!(P>>>0<=4294967295)||(f[a+16>>2]=I,x=0-(b=P)|0,b=0-((0<b>>>0)+n|0)|0)),f[C+8>>2]=x,f[C+12>>2]=b,(0|Ct(a+24|0,a))>=1)break t}t=(0|t)==(0|z)?0:D,f[o>>2]=t,n=Gs(r,s,n=w-Y|0,n>>31),P=N,n=(x=n)+(T=Gs(c,q,n=S-M|0,n>>31))|0,x=N+P|0,x=n>>>0<T>>>0?x+1|0:x,b=n,P=Gs(H,l,n=E-j|0,n>>31),x=N+x|0,x=(n=b+P|0)>>>0<P>>>0?x+1|0:x,P=n,n=x,k=S,U=w,F=E;continue}if(!(t=f[i>>2])|!f[t+12>>2])break e;if(I=f[f[t+8>>2]+4>>2],f[I+20>>2]<=f[e+100>>2])break e;if(t=f[I+12>>2],b=x=E=(w=f[t+92>>2])-Y|0,x=Gs(x,Y=x>>31,A,d),S=N,C=x,D=x=M=(V=f[t+88>>2])-M|0,x=C+(G=Gs(x,O=x>>31,u,h))|0,C=N+S|0,C=x>>>0<G>>>0?C+1|0:C,G=t=j=(S=f[t+96>>2])-j|0,(0-(t=Gs(p,m,t,W=t>>31))|0)!=(0|x)|(0-(N+(0<t>>>0)|0)|0)!=(0|C))break e;if(t=Gs(r,s,t=U-w|0,t>>31),x=N,C=t,w=Gs(c,q,t=k-V|0,t>>31),x=N+x|0,x=(t=C+w|0)>>>0<w>>>0?x+1|0:x,C=t,w=Gs(H,l,t=F-S|0,t>>31),x=N+x|0,S=t=C+w|0,w=x=t>>>0<w>>>0?x+1|0:x,(0|x)>-1||(0|x)>=-1&&!(t>>>0<=4294967295))break e;if(M=(g(E,_)+g(M,y)|0)+g(j,v)|0,t=Gs(b,Y,r,s),x=N,E=Gs(D,O,c,q),b=N+x|0,b=(t=E+t|0)>>>0<E>>>0?b+1|0:b,E=Gs(H,l,G,W),x=N+b|0,x=(t=E+t|0)>>>0<E>>>0?x+1|0:x,E=t,b=x,x|t){if((0|b)>-1||(0|b)>=-1&&!(E>>>0<=4294967295))break e;if(j=(t=M)>>31,x=a,(0|t)>=1?(f[a+24>>2]=t,f[a+28>>2]=j,f[a+40>>2]=1,t=-1):(0|M)<=-1?(f[a+40>>2]=-1,f[a+24>>2]=0-t,f[a+28>>2]=0-((0<t>>>0)+j|0),t=1):(f[a+24>>2]=0,f[a+28>>2]=0,f[a+40>>2]=0,t=0),f[x+40>>2]=t,f[a+32>>2]=0-E,f[a+36>>2]=0-((0<E>>>0)+b|0),(0|B)>=1?(f[a>>2]=T,f[a+4>>2]=L,f[a+16>>2]=1,M=-1):(0|B)<=-1?(f[a+16>>2]=-1,f[a>>2]=0-T,f[a+4>>2]=0-((0<T>>>0)+L|0),M=1):(f[a>>2]=0,f[a+4>>2]=0,f[a+16>>2]=0,M=0),T=a,E=a,b=t=P,(0|(x=n))>0||(0|x)>=0&&!(t>>>0<=0)||(x=0,b=0,(0|n)>-1||(0|n)>=-1&&!(P>>>0<=4294967295)||(f[a+16>>2]=M,x=0-((0<P>>>0)+n|0)|0,b=0-P|0)),f[E+8>>2]=b,f[T+12>>2]=x,(0|Ct(a+24|0,a))>=0)break e}else if((0|M)<=0)break e;f[i>>2]=I,n=f[I+12>>2],j=f[n+96>>2],Y=f[n+92>>2],t=f[o>>2],M=f[n+88>>2],P=S,n=w}}R=a+48|0}function O(e,t,n,i,r,s){var c,l,_=0,u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),A=y(0),x=y(0),b=y(0),C=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),z=0,L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=0,H=y(0),W=y(0),q=y(0);R=c=R-688|0,_=f[i+12>>2],l=f[i+4>>2];e:if((0|(z=f[l+4>>2]))<=19)d[c+660>>2]=s,f[c+656>>2]=0,f[c+488>>2]=6980,f[c+652>>2]=f[r+4>>2],a[c+460|0]=0,f[c+436>>2]=953267991,f[c+64>>2]=4308,f[20+(z=c+664|0)>>2]=0,f[z+16>>2]=l,f[z+12>>2]=e,f[z+8>>2]=c- -64,f[z+4>>2]=c+128,f[z>>2]=7344,o[f[f[z>>2]+8>>2]](z,t,n,_,_,c+488|0)&&(s=d[c+620>>2],u=d[c+624>>2],h=d[c+628>>2],(p=y(y(y(s*s)+y(u*u))+y(h*h)))>y(9999999747378752e-20)&&(m=d[c+652>>2])<d[r+4>>2]&&(A=h,h=y(y(1)/y(S(p))),d[c+628>>2]=A*h,d[c+624>>2]=u*h,d[c+620>>2]=s*h,e=f[i+8>>2],f[c+84>>2]=0,f[c+80>>2]=e,e=f[c+632>>2],f[c+96>>2]=f[c+628>>2],f[c+100>>2]=e,e=f[c+620>>2],t=f[c+624>>2],n=f[c+648>>2],f[c+112>>2]=f[c+644>>2],f[c+116>>2]=n,f[c+88>>2]=e,f[c+92>>2]=t,e=f[c+640>>2],f[c+104>>2]=f[c+636>>2],f[c+108>>2]=e,d[c+120>>2]=m,y(o[f[f[r>>2]+12>>2]](r,c+80|0,1))));else if((V=z+-21|0)>>>0<=8){t:if(!(V>>>0>7)){switch(V-1|0){default:u=d[_+20>>2],h=d[_+36>>2],p=d[_+24>>2],P=d[_+52>>2],C=d[_+56>>2],m=d[_+40>>2],v=d[_+32>>2],A=d[_+16>>2],b=d[_>>2],x=d[_+4>>2],E=d[_+48>>2],T=d[_+8>>2],w=d[t+52>>2],N=d[t+56>>2],D=d[t+48>>2],f[c+92>>2]=0,P=y(-P),M=y(y(y(p*P)-y(T*E))-y(m*C)),d[c+88>>2]=M+y(y(y(T*D)+y(p*w))+y(m*N)),I=y(y(y(u*P)-y(x*E))-y(h*C)),d[c+84>>2]=I+y(y(y(x*D)+y(u*w))+y(h*N)),P=y(y(y(A*P)-y(b*E))-y(v*C)),d[c+80>>2]=P+y(y(y(b*D)+y(A*w))+y(v*N)),C=d[n+52>>2],E=d[n+56>>2],w=d[n+48>>2],f[c+676>>2]=0,d[c+672>>2]=M+y(y(y(T*w)+y(p*C))+y(m*E)),d[c+668>>2]=I+y(y(y(x*w)+y(u*C))+y(h*E)),d[c+664>>2]=P+y(y(y(b*w)+y(A*C))+y(v*E)),C=d[n+20>>2],E=d[n+36>>2],w=d[n+24>>2],N=d[n+40>>2],D=d[n+32>>2],P=d[n>>2],M=d[n+16>>2],I=d[n+4>>2],L=d[n+8>>2],f[c+532>>2]=0,f[c+536>>2]=0,f[c+516>>2]=0,f[c+540>>2]=0,f[c+544>>2]=0,f[c+548>>2]=0,d[c+528>>2]=y(y(T*L)+y(p*w))+y(m*N),d[c+524>>2]=y(y(T*I)+y(p*C))+y(m*E),d[c+512>>2]=y(y(x*L)+y(u*w))+y(h*N),d[c+508>>2]=y(y(x*I)+y(u*C))+y(h*E),f[c+500>>2]=0,d[c+520>>2]=y(y(T*P)+y(p*M))+y(m*D),d[c+504>>2]=y(y(x*P)+y(u*M))+y(h*D),d[c+496>>2]=y(y(b*L)+y(A*w))+y(v*N),d[c+492>>2]=y(y(b*I)+y(A*C))+y(v*E),d[c+488>>2]=y(y(b*P)+y(A*M))+y(v*D),i=f[i+8>>2],vt(c+128|0,e,t,n,_,y(o[f[f[l>>2]+48>>2]](l))),f[c+348>>2]=l,f[c+344>>2]=i,f[c+128>>2]=8512,f[c+340>>2]=r,t=f[r+4>>2],d[c+336>>2]=s,f[c+328>>2]=t,o[f[f[e>>2]+8>>2]](e,c+488|0,c- -64|0,c+48|0),function(e,t,n,i,o,a){var r,s;R=r=R-16|0,s=f[e+52>>2],f[r+8>>2]=t,f[r+4>>2]=s,f[r>>2]=11848,ls(f[e+56>>2],r,n,i,o,a),R=r+16|0}(l,c+128|0,c+80|0,c+664|0,c- -64|0,c+48|0);break e;case 0:case 1:case 2:case 3:case 4:case 5:break t;case 6:}d[c+300>>2]=s,f[c+296>>2]=0,f[c+128>>2]=6980,f[c+292>>2]=f[r+4>>2],f[20+(z=c+80|0)>>2]=l,f[z+16>>2]=0,f[z+12>>2]=e,f[z+4>>2]=0,f[z+8>>2]=0,f[z>>2]=7344,o[f[f[z>>2]+8>>2]](z,t,n,_,_,c+128|0)&&(s=d[c+260>>2],u=d[c+264>>2],h=d[c+268>>2],(p=y(y(y(s*s)+y(u*u))+y(h*h)))>y(9999999747378752e-20)&&(m=d[c+292>>2])<d[r+4>>2]&&(A=h,h=y(y(1)/y(S(p))),d[c+268>>2]=A*h,d[c+264>>2]=u*h,d[c+260>>2]=s*h,e=f[i+8>>2],f[c+492>>2]=0,f[c+488>>2]=e,e=f[c+272>>2],f[c+504>>2]=f[c+268>>2],f[c+508>>2]=e,e=f[c+260>>2],t=f[c+264>>2],n=f[c+288>>2],f[c+520>>2]=f[c+284>>2],f[c+524>>2]=n,f[c+496>>2]=e,f[c+500>>2]=t,e=f[c+280>>2],f[c+512>>2]=f[c+276>>2],f[c+516>>2]=e,d[c+528>>2]=m,y(o[f[f[r>>2]+12>>2]](r,c+488|0,1))));break e}N=d[n+52>>2],D=d[n+56>>2],q=d[_+52>>2],h=d[_+56>>2],A=d[t+52>>2],P=d[t+56>>2],m=d[_+20>>2],v=d[_+36>>2],x=d[_+24>>2],T=d[_+40>>2],M=d[n+48>>2],I=d[_+48>>2],L=d[t+48>>2],p=d[_+32>>2],b=d[_>>2],C=d[_+16>>2],E=d[_+4>>2],w=d[_+8>>2],u=d[n+20>>2],F=d[n+36>>2],U=d[n+24>>2],B=d[n+40>>2],j=d[n+32>>2],G=d[n>>2],k=d[n+16>>2],H=d[n+4>>2],W=d[n+8>>2],f[c+532>>2]=0,f[c+536>>2]=0,f[c+516>>2]=0,f[c+540>>2]=0,f[c+544>>2]=0,f[c+548>>2]=0,d[c+528>>2]=y(y(w*W)+y(x*U))+y(T*B),d[c+524>>2]=y(y(w*H)+y(x*u))+y(T*F),d[c+512>>2]=y(y(E*W)+y(m*U))+y(v*B),d[c+508>>2]=y(y(E*H)+y(m*u))+y(v*F),f[c+500>>2]=0,d[c+520>>2]=y(y(w*G)+y(x*k))+y(T*j),d[c+504>>2]=y(y(E*G)+y(m*k))+y(v*j),d[c+496>>2]=y(y(b*W)+y(C*U))+y(p*B),d[c+492>>2]=y(y(b*H)+y(C*u))+y(p*F),d[c+488>>2]=y(y(b*G)+y(C*k))+y(p*j),i=f[i+8>>2],vt(c+128|0,e,t,n,_,y(o[f[f[l>>2]+48>>2]](l))),f[c+348>>2]=l,f[c+344>>2]=i,f[c+128>>2]=8724,f[c+340>>2]=r,t=f[r+4>>2],d[c+336>>2]=s,f[c+328>>2]=t,o[f[f[e>>2]+8>>2]](e,c+488|0,c+80|0,c+664|0),f[c+76>>2]=0,F=y(-q),U=y(y(y(x*F)-y(w*I))-y(T*h)),s=y(U+y(y(y(w*L)+y(x*A))+y(T*P))),d[c+72>>2]=s,B=y(y(y(m*F)-y(E*I))-y(v*h)),u=y(B+y(y(y(E*L)+y(m*A))+y(v*P))),d[c+68>>2]=u,I=y(y(y(C*F)-y(b*I))-y(p*h)),h=y(I+y(y(y(b*L)+y(C*A))+y(p*P))),d[c+64>>2]=h,A=h,(p=y(I+y(y(y(b*M)+y(C*N))+y(p*D))))<h&&(d[c+64>>2]=p,A=p),b=u,(m=y(B+y(y(y(E*M)+y(m*N))+y(v*D))))<u&&(d[c+68>>2]=m,b=m),(v=y(U+y(y(y(w*M)+y(x*N))+y(T*D))))<(x=s)&&(d[c+72>>2]=v,x=v),f[c+60>>2]=0,d[c+56>>2]=s,d[c+52>>2]=u,d[c+48>>2]=h,h<p&&(d[c+48>>2]=p,h=p),u<m&&(d[c+52>>2]=m,u=m),s<v&&(d[c+56>>2]=v,s=v),d[c+64>>2]=d[c+80>>2]+A,d[c+68>>2]=d[c+84>>2]+b,d[c+72>>2]=d[c+88>>2]+x,d[c+48>>2]=d[c+664>>2]+h,d[c+52>>2]=d[c+668>>2]+u,d[c+56>>2]=d[c+672>>2]+s,o[f[f[l>>2]+64>>2]](l,c+128|0,c- -64|0,c+48|0)}else if(31==(0|z)){o[f[4966]](7881),k=d[_+52>>2],C=d[_+56>>2],E=d[t+52>>2],w=d[t+56>>2],u=d[_+20>>2],h=d[_+36>>2],N=d[t+20>>2],D=d[t+36>>2],P=d[t+24>>2],p=d[_+24>>2],M=d[t+40>>2],m=d[_+40>>2],v=d[_+32>>2],A=d[_>>2],b=d[_+16>>2],I=d[t+32>>2],L=d[t>>2],F=d[t+16>>2],U=d[_+48>>2],B=d[t+48>>2],x=d[_+4>>2],j=d[t+4>>2],G=d[t+8>>2],T=d[_+8>>2],f[c+188>>2]=0,f[c+172>>2]=0,f[c+156>>2]=0,d[c+168>>2]=y(y(T*G)+y(p*P))+y(m*M),d[c+164>>2]=y(y(T*j)+y(p*N))+y(m*D),d[c+152>>2]=y(y(x*G)+y(u*P))+y(h*M),d[c+148>>2]=y(y(x*j)+y(u*N))+y(h*D),k=y(-k),d[c+184>>2]=y(y(y(p*k)-y(T*U))-y(m*C))+y(y(y(T*B)+y(p*E))+y(m*w)),d[c+180>>2]=y(y(y(u*k)-y(x*U))-y(h*C))+y(y(y(x*B)+y(u*E))+y(h*w)),f[c+140>>2]=0,d[c+160>>2]=y(y(T*L)+y(p*F))+y(m*I),d[c+144>>2]=y(y(x*L)+y(u*F))+y(h*I),d[c+136>>2]=y(y(A*G)+y(b*P))+y(v*M),d[c+132>>2]=y(y(A*j)+y(b*N))+y(v*D),d[c+128>>2]=y(y(A*L)+y(b*F))+y(v*I),d[c+176>>2]=y(y(y(b*k)-y(A*U))-y(v*C))+y(y(y(A*B)+y(b*E))+y(v*w)),o[f[f[e>>2]+8>>2]](e,c+128|0,c- -64|0,c+48|0),k=d[_+52>>2],C=d[_+56>>2],E=d[n+52>>2],w=d[n+56>>2],u=d[_+20>>2],h=d[_+36>>2],N=d[n+20>>2],D=d[n+36>>2],P=d[n+24>>2],p=d[_+24>>2],M=d[n+40>>2],m=d[_+40>>2],v=d[_+32>>2],A=d[_>>2],b=d[_+16>>2],I=d[n+32>>2],L=d[n>>2],F=d[n+16>>2],U=d[_+48>>2],B=d[n+48>>2],x=d[_+4>>2],j=d[n+4>>2],G=d[n+8>>2],T=d[_+8>>2],f[c+188>>2]=0,f[c+172>>2]=0,f[c+156>>2]=0,d[c+168>>2]=y(y(T*G)+y(p*P))+y(m*M),d[c+164>>2]=y(y(T*j)+y(p*N))+y(m*D),d[c+152>>2]=y(y(x*G)+y(u*P))+y(h*M),d[c+148>>2]=y(y(x*j)+y(u*N))+y(h*D),k=y(-k),d[c+184>>2]=y(y(y(p*k)-y(T*U))-y(m*C))+y(y(y(T*B)+y(p*E))+y(m*w)),d[c+180>>2]=y(y(y(u*k)-y(x*U))-y(h*C))+y(y(y(x*B)+y(u*E))+y(h*w)),f[c+140>>2]=0,d[c+160>>2]=y(y(T*L)+y(p*F))+y(m*I),d[c+144>>2]=y(y(x*L)+y(u*F))+y(h*I),d[c+136>>2]=y(y(A*G)+y(b*P))+y(v*M),d[c+132>>2]=y(y(A*j)+y(b*N))+y(v*D),d[c+128>>2]=y(y(A*L)+y(b*F))+y(v*I),d[c+176>>2]=y(y(y(b*k)-y(A*U))-y(v*C))+y(y(y(A*B)+y(b*E))+y(v*w)),o[f[f[e>>2]+8>>2]](e,c+128|0,c+24|0,c+8|0),(u=d[c+24>>2])<d[c+64>>2]&&(d[c+64>>2]=u),(u=d[c+28>>2])<d[c+68>>2]&&(d[c+68>>2]=u),(u=d[c+32>>2])<d[c+72>>2]&&(d[c+72>>2]=u),(u=d[c+36>>2])<d[c+76>>2]&&(d[c+76>>2]=u),u=d[c+8>>2],d[c+48>>2]<u&&(d[c+48>>2]=u),u=d[c+12>>2],d[c+52>>2]<u&&(d[c+52>>2]=u),u=d[c+16>>2],d[c+56>>2]<u&&(d[c+56>>2]=u),u=d[c+20>>2],d[c+60>>2]<u&&(d[c+60>>2]=u),f[c+520>>2]=r,f[c+516>>2]=_,d[c+508>>2]=s,f[c+504>>2]=n,f[c+500>>2]=t,f[c+496>>2]=e,f[c+492>>2]=i,f[c+488>>2]=8940,f[c+512>>2]=l;t:{if(!(e=f[l+68>>2])){if(f[l+20>>2]<1)break t;for(t=0;;){if(e=f[l+28>>2]+g(t,80)|0,n=f[e+64>>2],T=d[e+48>>2],C=d[e+52>>2],E=d[e+56>>2],w=d[e>>2],N=d[e+16>>2],D=d[e+32>>2],P=d[e+4>>2],M=d[e+20>>2],I=d[e+36>>2],L=d[e+8>>2],F=d[e+24>>2],U=d[e+40>>2],B=d[_+52>>2],j=d[_+56>>2],s=d[_+20>>2],u=d[_+24>>2],h=d[_+36>>2],p=d[_+40>>2],G=d[_+48>>2],m=d[_+8>>2],v=d[_>>2],A=d[_+4>>2],b=d[_+16>>2],x=d[_+32>>2],f[c+188>>2]=0,f[c+172>>2]=0,f[c+156>>2]=0,f[c+140>>2]=0,d[c+168>>2]=y(y(L*x)+y(F*h))+y(U*p),d[c+164>>2]=y(y(P*x)+y(M*h))+y(I*p),d[c+160>>2]=y(y(w*x)+y(N*h))+y(D*p),d[c+152>>2]=y(y(L*b)+y(F*s))+y(U*u),d[c+148>>2]=y(y(P*b)+y(M*s))+y(I*u),d[c+144>>2]=y(y(w*b)+y(N*s))+y(D*u),d[c+136>>2]=y(y(L*v)+y(F*A))+y(U*m),d[c+132>>2]=y(y(P*v)+y(M*A))+y(I*m),d[c+128>>2]=y(y(w*v)+y(N*A))+y(D*m),d[c+184>>2]=j+y(y(y(T*x)+y(C*h))+y(E*p)),d[c+180>>2]=B+y(y(y(T*b)+y(C*s))+y(E*u)),d[c+176>>2]=G+y(y(y(T*v)+y(C*A))+y(E*m)),f[c+92>>2]=-1,f[c+84>>2]=1065353216,f[c+88>>2]=1,f[c+100>>2]=t,f[c+80>>2]=9156,e=f[c+520>>2],f[c+96>>2]=e,f[c+84>>2]=f[e+4>>2],e=f[c+492>>2],i=f[e+8>>2],f[c+684>>2]=t,f[c+680>>2]=-1,f[c+672>>2]=i,f[c+668>>2]=n,f[c+664>>2]=e,f[c+676>>2]=c+128,O(f[c+496>>2],f[c+500>>2],f[c+504>>2],c+664|0,c+80|0,d[c+508>>2]),(0|(t=t+1|0))>=f[l+20>>2])break t;_=f[c+516>>2]}}t=f[c+76>>2],f[c+136>>2]=f[c+72>>2],f[c+140>>2]=t,t=f[c+60>>2],f[c+152>>2]=f[c+56>>2],f[c+156>>2]=t,t=f[c+52>>2],f[c+144>>2]=f[c+48>>2],f[c+148>>2]=t,t=f[c+68>>2],f[c+128>>2]=f[c+64>>2],f[c+132>>2]=t,xt(f[e>>2],c+128|0,c+488|0)}o[f[4967]]()}R=c+688|0}function z(e,t,n){var i,r,s,c,l,_=y(0),u=y(0),p=y(0),m=0,v=y(0),x=0,b=y(0),C=y(0),E=0,w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=0,M=y(0),O=y(0),z=y(0),L=0,F=y(0),U=0,B=0,k=y(0),j=y(0),G=y(0),H=y(0),W=y(0),q=y(0),Y=0,X=0,Q=0,K=y(0),Z=0,J=y(0),$=y(0),ee=y(0),te=y(0),ne=y(0),ie=y(0),oe=0,ae=0;if(R=i=R-80|0,r=f[t+840>>2],c=dt(e,s=f[t+836>>2],d[n+12>>2]),l=dt(e,r,d[n+12>>2]),E=(x=f[e+16>>2])+g(c,244)|0,_=d[E+128>>2],p=y(_*_),_=d[E+132>>2],p=y(p+y(_*_)),_=d[E+136>>2],!(y(p+y(_*_))<y(14210854715202004e-30)&&(E=x+g(l,244)|0,_=d[E+128>>2],p=y(_*_),_=d[E+132>>2],p=y(p+y(_*_)),_=d[E+136>>2],y(p+y(_*_))<y(14210854715202004e-30))||(0|(D=f[t+844>>2]))<1))for(oe=U=x+g(l,244)|0,ae=B=x+g(c,244)|0;;){if(m=g(Z,208)+t|0,d[m+84>>2]<=d[t+852>>2]){if(X=m+4|0,D=E=f[e+28>>2],(0|E)==f[e+32>>2]&&(D=E,!((0|E)>=(0|(L=E?E<<1:1))))){if(D=0,x=E,Y=0,L&&(f[6257]=f[6257]+1,Y=0|o[f[4968]](g(L,152),16),x=f[e+28>>2]),(0|x)>=1)for(;It((Q=g(D,152))+Y|0,f[e+36>>2]+Q|0,152),(0|x)!=(0|(D=D+1|0)););(x=f[e+36>>2])&&(h[e+40|0]&&x&&(f[6258]=f[6258]+1,o[f[4969]](x)),f[e+36>>2]=0),f[e+36>>2]=Y,a[e+40|0]=1,f[e+32>>2]=L,D=f[e+28>>2]}f[e+28>>2]=D+1,Y=f[e+36>>2]+g(E,152)|0,f[Y+148>>2]=l,f[Y+144>>2]=c,f[Y+132>>2]=X,k=d[m+52>>2],N=d[m+56>>2],b=d[m+60>>2],v=d[s+52>>2],u=d[s+56>>2],_=d[s+60>>2],f[i+76>>2]=0,F=y(b-_),d[i+72>>2]=F,T=y(N-u),d[i+68>>2]=T,C=y(k-v),d[i+64>>2]=C,k=d[m+36>>2],N=d[m+40>>2],b=d[m+44>>2],v=d[r+52>>2],u=d[r+56>>2],_=d[r+60>>2],f[i+60>>2]=0,p=y(b-_),d[i+56>>2]=p,N=y(N-u),d[i+52>>2]=N,b=y(k-v),d[i+48>>2]=b,J=y(0),$=y(0),ee=y(0),te=y(0),f[B+240>>2]&&(v=y(d[B+192>>2]+d[B+224>>2]),u=y(d[B+196>>2]+d[B+228>>2]),te=y(y(d[B+184>>2]+d[B+216>>2])+y(y(T*v)-y(C*u))),_=y(d[B+200>>2]+d[ae+232>>2]),ee=y(y(d[B+180>>2]+d[B+212>>2])+y(y(C*_)-y(F*v))),$=y(y(d[B+176>>2]+d[B+208>>2])+y(y(F*u)-y(T*_)))),ne=y(0),ie=y(0),f[U+240>>2]&&(v=y(d[U+192>>2]+d[U+224>>2]),u=y(d[U+196>>2]+d[U+228>>2]),ie=y(y(d[U+184>>2]+d[U+216>>2])+y(y(N*v)-y(b*u))),_=y(d[U+200>>2]+d[oe+232>>2]),ne=y(y(d[U+180>>2]+d[U+212>>2])+y(y(b*_)-y(p*v))),J=y(y(d[U+176>>2]+d[U+208>>2])+y(y(p*u)-y(N*_)))),k=d[m+76>>2],N=d[(Q=m+68|0)>>2],b=d[m+72>>2],V(e,Y,c,l,X,n,i+44|0,i- -64|0,i+48|0),f[Y+140>>2]=f[e+68>>2],d[m+92>>2]>y(0)&&(jn(e,Q,c,l,E,d[m+96>>2]),p=d[m+76>>2],y(A(p))>y(.7071067690849304)?(_=d[m+72>>2],f[i+24>>2]=0,I=_,_=y(y(p*p)+y(_*_)),u=y(y(1)/y(S(_))),M=y(I*u),d[i+32>>2]=M,w=y(u*y(-p)),d[i+28>>2]=w,O=y(_*u),d[i+8>>2]=O,_=d[Q>>2],z=y(M*y(-_)),d[i+12>>2]=z,P=y(0),I=y(_*w)):(_=d[Q>>2],v=d[m+72>>2],f[i+32>>2]=0,I=_,_=y(y(_*_)+y(v*v)),u=y(y(1)/y(S(_))),w=y(I*u),d[i+28>>2]=w,P=y(u*y(-v)),d[i+24>>2]=P,z=y(p*P),d[i+12>>2]=z,O=y(w*y(-p)),d[i+8>>2]=O,M=y(0),I=y(_*u)),_=y(y(1)/y(S(y(y(y(P*P)+y(w*w))+y(M*M))))),M=y(M*_),d[i+32>>2]=M,w=y(w*_),d[i+28>>2]=w,P=y(P*_),d[i+24>>2]=P,_=y(y(1)/y(S(y(y(I*I)+y(y(O*O)+y(z*z)))))),I=y(I*_),d[i+16>>2]=I,z=y(z*_),d[i+12>>2]=z,O=y(O*_),d[i+8>>2]=O,(D=2&f[s+180>>2])&&(v=d[s+172>>2],j=d[s+44>>2],G=d[s+12>>2],H=d[s+28>>2],u=d[s+164>>2],p=d[s+36>>2],W=d[s+4>>2],q=d[s+20>>2],_=d[s+168>>2],F=d[s+40>>2],T=d[s+8>>2],C=d[s+24>>2],f[i+36>>2]=0,K=p,p=y(u*y(y(y(P*W)+y(w*q))+y(M*p))),u=y(_*y(y(y(P*T)+y(w*C))+y(M*F))),_=y(v*y(y(y(P*G)+y(w*H))+y(M*j))),M=y(y(y(K*p)+y(F*u))+y(j*_)),d[i+32>>2]=M,w=y(y(y(q*p)+y(C*u))+y(H*_)),d[i+28>>2]=w,P=y(y(y(W*p)+y(T*u))+y(G*_)),d[i+24>>2]=P),(x=2&f[r+180>>2])&&(v=d[r+172>>2],j=d[r+44>>2],G=d[r+12>>2],H=d[r+28>>2],u=d[r+164>>2],p=d[r+36>>2],W=d[r+4>>2],q=d[r+20>>2],_=d[r+168>>2],F=d[r+40>>2],T=d[r+8>>2],C=d[r+24>>2],f[i+36>>2]=0,K=p,p=y(u*y(y(y(W*P)+y(q*w))+y(p*M))),u=y(_*y(y(y(P*T)+y(w*C))+y(M*F))),_=y(v*y(y(y(P*G)+y(w*H))+y(M*j))),M=y(y(y(K*p)+y(F*u))+y(j*_)),d[i+32>>2]=M,w=y(y(y(q*p)+y(C*u))+y(H*_)),d[i+28>>2]=w,P=y(y(y(W*p)+y(T*u))+y(G*_)),d[i+24>>2]=P),D&&(v=d[s+172>>2],j=d[s+44>>2],G=d[s+12>>2],H=d[s+28>>2],u=d[s+164>>2],p=d[s+36>>2],W=d[s+4>>2],q=d[s+20>>2],_=d[s+168>>2],F=d[s+40>>2],T=d[s+8>>2],C=d[s+24>>2],f[i+20>>2]=0,K=p,p=y(u*y(y(y(O*W)+y(z*q))+y(I*p))),u=y(_*y(y(y(O*T)+y(z*C))+y(I*F))),_=y(v*y(y(y(O*G)+y(z*H))+y(I*j))),I=y(y(y(K*p)+y(F*u))+y(j*_)),d[i+16>>2]=I,z=y(y(y(q*p)+y(C*u))+y(H*_)),d[i+12>>2]=z,O=y(y(y(W*p)+y(T*u))+y(G*_)),d[i+8>>2]=O),x&&(v=d[r+172>>2],j=d[r+44>>2],G=d[r+12>>2],H=d[r+28>>2],u=d[r+164>>2],p=d[r+36>>2],W=d[r+4>>2],q=d[r+20>>2],_=d[r+168>>2],F=d[r+40>>2],T=d[r+8>>2],C=d[r+24>>2],f[i+20>>2]=0,K=p,p=y(u*y(y(y(W*O)+y(q*z))+y(p*I))),u=y(_*y(y(y(O*T)+y(z*C))+y(I*F))),_=y(v*y(y(y(O*G)+y(z*H))+y(I*j))),I=y(y(y(K*p)+y(F*u))+y(j*_)),d[i+16>>2]=I,z=y(y(y(q*p)+y(C*u))+y(H*_)),d[i+12>>2]=z,O=y(y(y(W*p)+y(T*u))+y(G*_)),d[i+8>>2]=O),+y(S(y(y(y(P*P)+y(w*w))+y(M*M))))>.001&&jn(e,i+24|0,c,l,E,d[m+92>>2]),+y(S(y(y(y(O*O)+y(z*z))+y(I*I))))>.001&&jn(e,i+8|0,c,l,E,d[m+92>>2]));e:if(1&a[m+132|0]&&32&h[n+72|0])kn(e,m+172|0,c,l,E,X,i- -64|0,i+48|0,_=d[i+44>>2],n,d[m+148>>2],d[m+164>>2]),16&h[n+72|0]&&kn(e,m+188|0,c,l,E,X,i- -64|0,i+48|0,_,n,d[m+152>>2],d[m+164>>2]);else{if(p=d[Q>>2],T=d[m+72>>2],C=d[m+76>>2],f[m+184>>2]=0,v=y($-J),u=y(ee-ne),_=y(te-ie),k=y(y(y(v*N)+y(u*b))+y(_*k)),N=y(_-y(C*k)),d[m+180>>2]=N,b=y(u-y(k*T)),d[m+176>>2]=b,L=m+172|0,u=y(v-y(k*p)),d[L>>2]=u,!(64&h[n+72|0])&&(_=y(y(y(u*u)+y(b*b))+y(N*N)))>y(1.1920928955078125e-7)){if(_=y(y(1)/y(S(_))),d[L>>2]=u*_,d[m+176>>2]=b*_,d[m+180>>2]=N*_,zn(s,L),zn(r,L),kn(e,L,c,l,E,X,i- -64|0,i+48|0,_=d[i+44>>2],n,y(0),y(0)),!(16&h[n+72|0]))break e;C=d[m+176>>2],p=d[m+72>>2],k=d[Q>>2],v=d[m+180>>2],N=d[L>>2],u=d[m+76>>2],f[m+200>>2]=0,b=y(y(C*u)-y(v*p)),v=y(y(v*k)-y(u*N)),u=y(y(p*N)-y(C*k)),N=y(y(1)/y(S(y(y(y(b*b)+y(v*v))+y(u*u))))),d[m+196>>2]=u*N,d[m+192>>2]=v*N,d[(x=m+188|0)>>2]=b*N,zn(s,x),zn(r,x),kn(e,x,c,l,E,X,i- -64|0,i+48|0,_,n,y(0),y(0));break e}if(x=D=m+188|0,y(A(C))>y(.7071067690849304)?(f[L>>2]=0,v=y(y(T*T)+y(C*C)),b=y(y(1)/y(S(v))),u=y(b*y(-C)),d[m+176>>2]=u,_=y(T*b),d[m+180>>2]=_,w=y(p*u),P=y(_*y(-p)),p=y(v*b)):(v=y(y(p*p)+y(T*T)),b=y(y(1)/y(S(v))),u=y(b*y(-T)),d[L>>2]=u,_=y(p*b),d[m+176>>2]=_,f[m+180>>2]=0,w=y(v*b),P=y(C*u),p=y(_*y(-C))),d[x>>2]=p,d[m+196>>2]=w,d[m+192>>2]=P,zn(s,L),zn(r,L),kn(e,L,c,l,E,X,i- -64|0,i+48|0,_=d[i+44>>2],n,y(0),y(0)),16&(x=f[n+72>>2])&&(zn(s,D),zn(r,D),kn(e,D,c,l,E,X,i- -64|0,i+48|0,_,n,y(0),y(0)),x=f[n+72>>2]),80!=(80&x))break e;f[m+132>>2]=1|f[m+132>>2]}Ee(e,Y,c,l,X,n),D=f[t+844>>2]}if(!((0|(Z=Z+1|0))<(0|D)))break}R=i+80|0}function L(e,t,n,i,a,r){var s,c=y(0),l=y(0),_=y(0),u=y(0),p=y(0),m=y(0),v=y(0),x=y(0),b=0,C=y(0),E=0,w=y(0),T=y(0),P=0,I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=0,U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=0,J=y(0),$=y(0),ee=y(0),te=y(0),ne=y(0),ie=y(0),oe=y(0);R=s=R-112|0,f[5641]=f[5641]+1,B=d[n+52>>2],_=d[n+20>>2],x=d[n+24>>2],k=d[i+52>>2],C=d[i+20>>2],w=d[i+24>>2],j=d[n+56>>2],l=d[n+36>>2],c=d[e+68>>2],m=d[n+40>>2],T=d[e+72>>2],M=d[i+56>>2],u=d[i+36>>2],O=d[t+68>>2],v=d[i+40>>2],z=d[t+72>>2],G=d[n+48>>2],L=d[n+8>>2],V=d[n>>2],H=d[n+4>>2],Q=d[i+48>>2],K=d[i+8>>2],W=d[i>>2],q=d[i+4>>2],I=d[n+16>>2],Y=d[i+16>>2],N=d[n+32>>2],D=d[e+64>>2],X=d[i+32>>2],p=d[t+64>>2],f[s+28>>2]=0,j=y(y(j+y(y(y(D*N)+y(c*l))+y(T*m)))-y(M+y(y(y(p*X)+y(O*u))+y(z*v)))),d[s+24>>2]=j,B=y(y(B+y(y(y(D*I)+y(c*_))+y(T*x)))-y(k+y(y(y(p*Y)+y(O*C))+y(z*w)))),d[s+20>>2]=B,k=y(y(G+y(y(y(D*V)+y(c*H))+y(T*L)))-y(Q+y(y(y(p*W)+y(O*q))+y(z*K)))),d[s+16>>2]=k,c=y(34028234663852886e22);e:{t:{n:{i:{o:{a:if(!((0|(F=f[e+28>>2]))<1))for(;;){if(E=f[e+36>>2]+g(b,36)|0,T=d[E+28>>2],O=d[E+24>>2],z=d[E+20>>2],D=d[n>>2],p=d[n+4>>2],f[s+12>>2]=0,l=y(y(y(z*N)+y(O*l))+y(T*m)),d[s+8>>2]=l,_=y(y(y(z*I)+y(O*_))+y(T*x)),d[s+4>>2]=_,x=y(y(y(z*D)+y(O*p))+y(T*L)),d[s>>2]=x,y(y(y(x*k)+y(_*B))+y(l*j))<y(0)&&(d[s+8>>2]=-l,d[s+4>>2]=-_,d[s>>2]=-x),f[5639]=f[5639]+1,!h[19860]||Jt(n,i,s+16|0,s,e,t,c)){if(P=0,f[5640]=f[5640]+1,Bt(e,n,s,s+108|0,s+104|0,s+80|0,s- -64|0),Bt(t,i,s,s+100|0,s+96|0,s+48|0,s+32|0),(_=d[s+104>>2])<(x=d[s+100>>2])||(l=d[s+96>>2])<(m=d[s+108>>2])||(C=(C=y(_-x))<(_=y(l-m))?C:_,P=1),!P)break o;C<c&&(E=f[s+4>>2],f[a>>2]=f[s>>2],f[a+4>>2]=E,E=f[s+12>>2],f[a+8>>2]=f[s+8>>2],f[a+12>>2]=E,c=C)}if((0|F)==(0|(b=b+1|0)))break a;m=d[n+40>>2],l=d[n+36>>2],N=d[n+32>>2],x=d[n+24>>2],_=d[n+20>>2],I=d[n+16>>2],L=d[n+8>>2]}if((0|(F=f[t+28>>2]))>=1)for(b=0;;){if(E=f[t+36>>2]+g(b,36)|0,_=d[E+28>>2],x=d[E+20>>2],l=d[E+24>>2],O=d[i+8>>2],z=d[i>>2],L=d[i+4>>2],T=d[i+24>>2],I=d[i+16>>2],N=d[i+20>>2],m=d[i+40>>2],D=d[i+32>>2],p=d[i+36>>2],f[s+12>>2]=0,m=y(y(y(x*D)+y(l*p))+y(_*m)),d[s+8>>2]=m,T=y(y(y(x*I)+y(l*N))+y(_*T)),d[s+4>>2]=T,_=y(y(y(x*z)+y(l*L))+y(_*O)),d[s>>2]=_,y(y(y(_*k)+y(T*B))+y(m*j))<y(0)&&(d[s+8>>2]=-m,d[s+4>>2]=-T,d[s>>2]=-_),f[5639]=f[5639]+1,!h[19860]||Jt(n,i,s+16|0,s,e,t,c)){if(P=0,f[5640]=f[5640]+1,Bt(e,n,s,s+108|0,s+104|0,s+80|0,s- -64|0),Bt(t,i,s,s+100|0,s+96|0,s+48|0,s+32|0),(_=d[s+104>>2])<(x=d[s+100>>2])||(l=d[s+96>>2])<(m=d[s+108>>2])||(C=(C=y(_-x))<(_=y(l-m))?C:_,P=1),!P)break o;C<c&&(E=f[s+4>>2],f[a>>2]=f[s>>2],f[a+4>>2]=E,E=f[s+12>>2],f[a+8>>2]=f[s+8>>2],f[a+12>>2]=E,c=C)}if((0|F)==(0|(b=b+1|0)))break}if((0|(b=f[e+48>>2]))>=1)break i;F=-1,C=y(0),_=y(0),x=y(0),l=y(0),m=y(0),T=y(0),Z=-1;break n}i=0;break e}for(P=f[t+48>>2],Z=-1,E=0,F=-1,T=y(0),m=y(0),l=y(0),x=y(0),_=y(0),C=y(0);;){if((0|P)>=1){for(b=f[e+56>>2]+(E<<4)|0,L=d[b>>2],I=d[b+4>>2],N=d[b+8>>2],O=y(y(y(L*d[n+32>>2])+y(I*d[n+36>>2]))+y(N*d[n+40>>2])),z=y(y(y(L*d[n+16>>2])+y(I*d[n+20>>2]))+y(N*d[n+24>>2])),L=y(y(y(L*d[n>>2])+y(I*d[n+4>>2]))+y(N*d[n+8>>2])),b=0;;){if(P=f[t+56>>2]+(b<<4)|0,D=d[P+8>>2],w=d[P>>2],M=d[P+4>>2],U=d[i+40>>2],ee=d[i+32>>2],te=d[i+36>>2],I=d[i+24>>2],N=d[i+16>>2],p=d[i+20>>2],ne=d[i+8>>2],ie=d[i>>2],oe=d[i+4>>2],f[s+12>>2]=0,I=y(y(y(w*N)+y(M*p))+y(D*I)),N=y(y(y(w*ie)+y(M*oe))+y(D*ne)),p=y(y(L*I)-y(z*N)),d[s+8>>2]=p,D=y(y(y(w*ee)+y(M*te))+y(D*U)),w=y(y(O*N)-y(L*D)),d[s+4>>2]=w,M=y(y(z*D)-y(O*I)),d[s>>2]=M,(!(+y(A(p))>1e-6^1)||+y(A(M))>1e-6|+y(A(w))>1e-6)&&(U=p,p=y(y(1)/y(S(y(y(p*p)+y(y(M*M)+y(w*w)))))),U=y(U*p),d[s+8>>2]=U,w=y(w*p),d[s+4>>2]=w,p=y(M*p),d[s>>2]=p,y(y(y(p*k)+y(w*B))+y(j*U))<y(0)&&(d[s+8>>2]=-U,d[s+4>>2]=-w,d[s>>2]=-p),f[5639]=f[5639]+1,!h[19860]||Jt(n,i,s+16|0,s,e,t,c))){if(P=0,f[5640]=f[5640]+1,Bt(e,n,s,s+108|0,s+104|0,s+80|0,s- -64|0),Bt(t,i,s,s+100|0,s+96|0,s+48|0,s+32|0),(p=d[s+104>>2])<(w=d[s+100>>2])||(M=d[s+96>>2])<(U=d[s+108>>2])||((u=y(p-w))<(p=y(M-U))?(P=1,H=d[s+56>>2],Q=d[s+52>>2],K=d[s+48>>2],v=d[s+72>>2],G=d[s+68>>2],V=d[s+64>>2]):(P=1,H=d[s+40>>2],Q=d[s+36>>2],K=d[s+32>>2],v=d[s+88>>2],G=d[s+84>>2],V=d[s+80>>2],u=p)),!P)break t;u<c&&(F=f[s+4>>2],f[a>>2]=f[s>>2],f[a+4>>2]=F,F=f[s+12>>2],f[a+8>>2]=f[s+8>>2],f[a+12>>2]=F,C=K,_=Q,x=H,l=V,m=G,T=v,W=N,q=I,Y=D,X=L,J=z,$=O,F=E,Z=b,c=u)}if(!((0|(b=b+1|0))<(0|(P=f[t+48>>2]))))break}b=f[e+48>>2]}if(!((0|(E=E+1|0))<(0|b)))break}}if(!((F|Z)<0)){G=y(C-l),V=y(_-m),H=y(x-T),v=y(y(y(G*W)+y(V*q))+y(H*Y)),m=y(y(y(G*X)+y(V*J))+y(H*$)),c=y(0),l=y(y(y(W*X)+y(q*J))+y(Y*$)),(u=y(y(1)-y(l*l)))!=y(0)&&(c=y(-1.0000000150474662e30),(u=y(y(m-y(v*l))/u))<y(-1.0000000150474662e30)||(c=u)>y(1.0000000150474662e30)&&(c=y(1.0000000150474662e30)));n:if((v=y(y(l*c)-v))<y(-1.0000000150474662e30)){if((u=y(m+y(l*y(-1.0000000150474662e30))))<y(-1.0000000150474662e30)){v=y(-1.0000000150474662e30),c=y(-1.0000000150474662e30);break n}if(c=y(1.0000000150474662e30),!(u>y(1.0000000150474662e30))){v=y(-1.0000000150474662e30),c=u;break n}v=y(-1.0000000150474662e30)}else v>y(1.0000000150474662e30)&&(c=y(-1.0000000150474662e30),v=y(1.0000000150474662e30),(u=y(m+y(l*y(1.0000000150474662e30))))<y(-1.0000000150474662e30)||(c=u)>y(1.0000000150474662e30)&&(c=y(1.0000000150474662e30)));f[s+92>>2]=0,m=y(Y*v),u=y(m+y(H-y($*c))),d[s+88>>2]=u,q=y(q*v),l=y(q+y(V-y(J*c))),d[s+84>>2]=l,W=y(W*v),c=y(W+y(G-y(X*c))),d[s+80>>2]=c,(v=y(y(u*u)+y(y(c*c)+y(l*l))))>y(1.1920928955078125e-7)&&(p=u,Y=y(S(v)),u=y(y(1)/Y),v=y(p*u),d[s+88>>2]=v,l=y(l*u),d[s+84>>2]=l,c=y(c*u),d[s+80>>2]=c,y(y(y(c*k)+y(l*B))+y(v*j))<y(0)&&(d[s+88>>2]=-v,d[s+84>>2]=-l,d[s+80>>2]=-c),f[s+76>>2]=0,d[s+72>>2]=x+m,d[s+68>>2]=_+q,d[s+64>>2]=C+W,o[f[f[r>>2]+16>>2]](r,s+80|0,s- -64|0,y(-Y)))}if(i=1,c=d[a>>2],C=d[a+4>>2],u=d[a+8>>2],!(y(y(y(k*c)+y(B*C))+y(j*u))<y(0)))break e;f[a+12>>2]=0,d[a+8>>2]=-u,d[a+4>>2]=-C,d[a>>2]=-c;break e}i=0}return R=s+112|0,i}function F(e,t,n,i){t|=0,n|=0,i|=0;var r,s=0,c=0,l=0,_=0,m=0,d=0,v=0;f[168+(e|=0)>>2]=f[e+152>>2],a[t+80|0]=1,a[t+60|0]=0,f[t+52>>2]=287,f[t>>2]=16296,f[t+76>>2]=0,a[t+100|0]=1,f[t+68>>2]=0,f[t+72>>2]=0,f[t+96>>2]=0,a[t+120|0]=1,f[t+88>>2]=0,f[t+92>>2]=0,f[t+116>>2]=0,a[t+140|0]=1,f[t+108>>2]=0,f[t+112>>2]=0,f[t+136>>2]=0,a[t+164|0]=1,f[t+144>>2]=0,f[t+128>>2]=0,f[t+132>>2]=0,f[t+160>>2]=0,f[t+152>>2]=0,f[t+156>>2]=0,f[t+168>>2]=0,f[t+28>>2]=2139095039,f[t+32>>2]=0,f[t+20>>2]=2139095039,f[t+24>>2]=2139095039,f[t+12>>2]=-8388609,f[t+16>>2]=0,f[t+4>>2]=-8388609,f[t+8>>2]=-8388609,l=f[e+56>>2],n=t,i?(f[t+56>>2]=l<<8&16711680|l<<24|l>>>8&65280|l>>>24,a[t+4|0]=h[e+7|0],a[t+5|0]=h[e+6|0],a[t+6|0]=h[e+5|0],a[t+7|0]=h[e+4|0],a[t+8|0]=h[e+11|0],a[t+9|0]=h[e+10|0],a[t+10|0]=h[e+9|0],a[t+11|0]=h[e+8|0],a[t+12|0]=h[e+15|0],a[t+13|0]=h[e+14|0],a[t+14|0]=h[e+13|0],a[t+15|0]=h[e+12|0],a[t+16|0]=h[e+19|0],a[t+17|0]=h[e+18|0],a[t+18|0]=h[e+17|0],a[t+19|0]=h[e+16|0],a[t+20|0]=h[e+23|0],a[t+21|0]=h[e+22|0],a[t+22|0]=h[e+21|0],a[t+23|0]=h[e+20|0],a[t+24|0]=h[e+27|0],a[t+25|0]=h[e+26|0],a[t+26|0]=h[e+25|0],a[t+27|0]=h[e+24|0],a[t+28|0]=h[e+31|0],a[t+29|0]=h[e+30|0],a[t+30|0]=h[e+29|0],a[t+31|0]=h[e+28|0],a[t+32|0]=h[e+35|0],a[t+33|0]=h[e+34|0],a[t+34|0]=h[e+33|0],a[t+35|0]=h[e+32|0],a[t+36|0]=h[e+39|0],a[t+37|0]=h[e+38|0],a[t+38|0]=h[e+37|0],a[t+39|0]=h[e+36|0],a[t+40|0]=h[e+43|0],a[t+41|0]=h[e+42|0],a[t+42|0]=h[e+41|0],a[t+43|0]=h[e+40|0],a[t+44|0]=h[e+47|0],a[t+45|0]=h[e+46|0],a[t+46|0]=h[e+45|0],a[t+47|0]=h[e+44|0],a[t+48|0]=h[e+51|0],a[t+49|0]=h[e+50|0],a[t+50|0]=h[e+49|0],a[t+51|0]=h[e+48|0],l=f[e+144>>2],f[t+144>>2]=l<<24|l<<8&16711680|l>>>8&65280|l>>>24,l=(l=f[e+168>>2])<<24|l<<8&16711680|l>>>8&65280|l>>>24):(f[t+56>>2]=l,l=f[e+16>>2],f[t+12>>2]=f[e+12>>2],f[t+16>>2]=l,l=f[e+8>>2],f[t+4>>2]=f[e+4>>2],f[t+8>>2]=l,l=f[e+32>>2],f[t+28>>2]=f[e+28>>2],f[t+32>>2]=l,l=f[e+24>>2],f[t+20>>2]=f[e+20>>2],f[t+24>>2]=l,l=f[e+48>>2],f[t+44>>2]=f[e+44>>2],f[t+48>>2]=l,l=f[e+40>>2],f[t+36>>2]=f[e+36>>2],f[t+40>>2]=l,f[t+144>>2]=f[e+144>>2],l=f[e+168>>2]),f[n+168>>2]=l,a[t+60|0]=h[e+60|0],l=t+172|0,r=f[e+56>>2];e:if(h[e+60|0]){(n=f[t+136>>2])&&(h[t+140|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[t+136>>2]=0),f[t+136>>2]=l,a[t+140|0]=0,f[t+132>>2]=r,f[t+128>>2]=r;t:if(i){if(!((0|r)<1))for(_=f[e+136>>2];s=(n=m<<4)+l|0,n=p[(c=n+_|0)>>1],u[s>>1]=(n<<24|n<<8&16711680)>>>16,n=p[c+2>>1],u[s+2>>1]=(n<<24|n<<8&16711680)>>>16,n=p[c+4>>1],u[s+4>>1]=(n<<24|n<<8&16711680)>>>16,n=p[c+6>>1],u[s+6>>1]=(n<<24|n<<8&16711680)>>>16,n=p[c+8>>1],u[s+8>>1]=(n<<24|n<<8&16711680)>>>16,n=p[c+10>>1],u[s+10>>1]=(n<<24|n<<8&16711680)>>>16,n=f[c+12>>2],f[s+12>>2]=n<<24|n<<8&16711680|n>>>8&65280|n>>>24,(0|r)!=(0|(m=m+1|0)););}else{if((0|r)<1)break t;for(_=f[e+136>>2];c=(n=m<<4)+l|0,n=n+_|0,u[c>>1]=p[n>>1],u[c+2>>1]=p[n+2>>1],u[c+4>>1]=p[n+4>>1],u[c+6>>1]=p[n+6>>1],u[c+8>>1]=p[n+8>>1],u[c+10>>1]=p[n+10>>1],f[c+12>>2]=f[n+12>>2],(0|r)!=(0|(m=m+1|0)););}c=t+128|0,s=r<<4}else{(n=f[t+96>>2])&&(h[t+100|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[t+96>>2]=0),c=t+88|0,f[t+96>>2]=l,a[t+100|0]=0,f[t+92>>2]=r,f[t+88>>2]=r;t:{n:{if(i){if((0|r)<1)break n;for(d=f[e+96>>2],n=l;s=(_=v<<6)+n|0,n=_+d|0,a[0|s]=h[n+3|0],a[s+1|0]=h[n+2|0],a[s+2|0]=h[n+1|0],a[s+3|0]=h[0|n],a[s+4|0]=h[n+7|0],a[s+5|0]=h[n+6|0],a[s+6|0]=h[n+5|0],a[s+7|0]=h[n+4|0],a[s+8|0]=h[n+11|0],a[s+9|0]=h[n+10|0],a[s+10|0]=h[n+9|0],a[s+11|0]=h[n+8|0],a[s+12|0]=h[n+15|0],a[s+13|0]=h[n+14|0],a[s+14|0]=h[n+13|0],a[s+15|0]=h[n+12|0],s=_+f[t+96>>2]|0,n=_+f[e+96>>2]|0,a[s+16|0]=h[n+19|0],a[s+17|0]=h[n+18|0],a[s+18|0]=h[n+17|0],a[s+19|0]=h[n+16|0],a[s+20|0]=h[n+23|0],a[s+21|0]=h[n+22|0],a[s+22|0]=h[n+21|0],a[s+23|0]=h[n+20|0],a[s+24|0]=h[n+27|0],a[s+25|0]=h[n+26|0],a[s+26|0]=h[n+25|0],a[s+27|0]=h[n+24|0],a[s+28|0]=h[n+31|0],a[s+29|0]=h[n+30|0],a[s+30|0]=h[n+29|0],a[s+31|0]=h[n+28|0],s=_+(n=f[t+96>>2])|0,d=f[e+96>>2],m=f[32+(_=_+d|0)>>2],f[s+32>>2]=m<<24|m<<8&16711680|m>>>8&65280|m>>>24,m=f[_+36>>2],f[s+36>>2]=m<<24|m<<8&16711680|m>>>8&65280|m>>>24,_=f[_+40>>2],f[s+40>>2]=_<<24|_<<8&16711680|_>>>8&65280|_>>>24,(0|r)!=(0|(v=v+1|0)););}else{if((0|r)<1)break n;for(v=f[e+96>>2],n=l;s=(d=m<<6)+n|0,n=f[4+(_=d+v|0)>>2],f[s>>2]=f[_>>2],f[s+4>>2]=n,n=f[_+12>>2],f[s+8>>2]=f[_+8>>2],f[s+12>>2]=n,_=d+f[e+96>>2]|0,n=f[_+20>>2],s=d+f[t+96>>2]|0,f[s+16>>2]=f[_+16>>2],f[s+20>>2]=n,n=f[_+28>>2],f[s+24>>2]=f[_+24>>2],f[s+28>>2]=n,s=d+(n=f[t+96>>2])|0,_=d+(v=f[e+96>>2])|0,f[s+32>>2]=f[_+32>>2],f[s+36>>2]=f[_+36>>2],f[s+40>>2]=f[_+40>>2],(0|r)!=(0|(m=m+1|0)););}if(_=s=r<<6,n)break t;break e}n=l,_=r<<6}s=_,h[t+100|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[t+96>>2]=0}f[c>>2]=0,f[c+4>>2]=0,a[c+5|0]=0,a[c+6|0]=0,a[c+7|0]=0,a[c+8|0]=0,a[c+9|0]=0,a[c+10|0]=0,a[c+11|0]=0,a[c+12|0]=0,c=f[e+168>>2],(n=f[t+160>>2])&&(h[t+164|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[t+160>>2]=0),_=s+l|0,f[t+160>>2]=_,a[t+164|0]=0,f[t+156>>2]=c,f[t+152>>2]=c,l=f[e+168>>2];e:if(i){if(!((0|l)<1))for(n=f[e+160>>2],i=0;s=(e=i<<5)+_|0,e=p[(c=e+n|0)>>1],u[s>>1]=(e<<24|e<<8&16711680)>>>16,e=p[c+2>>1],u[s+2>>1]=(e<<24|e<<8&16711680)>>>16,e=p[c+4>>1],u[s+4>>1]=(e<<24|e<<8&16711680)>>>16,e=p[c+6>>1],u[s+6>>1]=(e<<24|e<<8&16711680)>>>16,e=p[c+8>>1],u[s+8>>1]=(e<<24|e<<8&16711680)>>>16,e=p[c+10>>1],u[s+10>>1]=(e<<24|e<<8&16711680)>>>16,e=f[c+12>>2],f[s+12>>2]=e<<24|e<<8&16711680|e>>>8&65280|e>>>24,e=f[c+16>>2],f[s+16>>2]=e<<24|e<<8&16711680|e>>>8&65280|e>>>24,(0|l)!=(0|(i=i+1|0)););}else{if((0|l)<1)break e;for(l=f[e+160>>2],i=0;c=(n=i<<5)+_|0,n=n+l|0,u[c>>1]=p[n>>1],u[c+2>>1]=p[n+2>>1],u[c+4>>1]=p[n+4>>1],u[c+6>>1]=p[n+6>>1],u[c+8>>1]=p[n+8>>1],u[c+10>>1]=p[n+10>>1],f[c+12>>2]=f[n+12>>2],n=f[n+16>>2],f[c+28>>2]=0,f[c+20>>2]=0,f[c+24>>2]=0,f[c+16>>2]=n,(0|(i=i+1|0))<f[e+168>>2];);}return f[t>>2]=0,a[t+157|0]=0,a[t+158|0]=0,a[t+159|0]=0,a[t+160|0]=0,a[t+161|0]=0,a[t+162|0]=0,a[t+163|0]=0,a[t+164|0]=0,f[t+152>>2]=0,f[t+156>>2]=0,1}function U(e,t,n,i){var r,s=0,c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),A=0,x=y(0),b=y(0),C=y(0),E=y(0),w=y(0),T=0,P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=0,B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0);R=r=R-704|0,Fo(r+624|0),f[r+652>>2]=0,f[r+656>>2]=0,f[r+648>>2]=1065353216,f[r+660>>2]=0,f[r+664>>2]=0,f[r+668>>2]=0,f[r+672>>2]=0,f[r+676>>2]=0,f[r+640>>2]=1065353216,f[r+644>>2]=1065353216,f[r+628>>2]=8,f[r+624>>2]=11388,s=f[n+12>>2];e:if(A=f[n+4>>2],(0|(T=f[A+4>>2]))<=19)f[r+616>>2]=0,f[r+620>>2]=0,f[r+448>>2]=6980,f[r+612>>2]=f[i+4>>2],a[r+420|0]=0,f[r+396>>2]=953267991,f[12+(T=r+680|0)>>2]=A,f[T+8>>2]=r+624,f[T+4>>2]=r+88,f[T>>2]=6276,f[12+(F=r+72|0)>>2]=A,f[F+8>>2]=r+624,f[F+4>>2]=r+88,f[F>>2]=7232,A=8&f[i+16>>2]?F:T,o[f[f[A>>2]+8>>2]](A,e,t,s,s,r+448|0)&&(l=d[r+580>>2],u=d[r+584>>2],c=d[r+588>>2],(_=y(y(y(l*l)+y(u*u))+y(c*c)))>y(9999999747378752e-20)&&(x=d[r+612>>2])<d[i+4>>2]&&(h=c,c=y(y(1)/y(S(_))),d[r+588>>2]=h*c,d[r+584>>2]=u*c,d[r+580>>2]=l*c,e=f[n+8>>2],f[r+44>>2]=0,f[r+40>>2]=e,e=f[r+592>>2],f[r+56>>2]=f[r+588>>2],f[r+60>>2]=e,e=f[r+584>>2],f[r+48>>2]=f[r+580>>2],f[r+52>>2]=e,d[r+64>>2]=x,y(o[f[f[i>>2]+12>>2]](i,r+40|0,1))));else if(T+-21>>>0<=8){if(m=d[s+20>>2],h=d[s+36>>2],p=d[s+24>>2],c=d[s+52>>2],_=d[s+56>>2],v=d[s+40>>2],b=d[s+32>>2],C=d[s+16>>2],E=d[s>>2],D=d[s+4>>2],l=d[s+48>>2],M=d[s+8>>2],x=d[e+52>>2],P=d[e+56>>2],u=d[e+48>>2],f[r+460>>2]=0,O=y(-c),z=y(p*O),L=y(v*_),w=y(y(z-y(M*l))-L),k=y(p*x),j=y(v*P),d[r+456>>2]=w+y(y(y(M*u)+k)+j),G=y(m*O),H=y(h*_),B=y(y(G-y(D*l))-H),W=y(m*x),q=y(h*P),d[r+452>>2]=B+y(y(y(D*u)+W)+q),Y=y(y(y(C*O)-y(E*l))-y(b*_)),d[r+448>>2]=Y+y(y(y(E*u)+y(C*x))+y(b*P)),I=d[t+52>>2],N=d[t+56>>2],c=d[t+48>>2],f[r+52>>2]=0,V=w,X=y(M*c),M=y(p*I),w=y(v*N),d[r+48>>2]=V+y(y(X+M)+w),V=B,p=y(D*c),D=y(m*I),B=y(h*N),d[r+44>>2]=V+y(y(p+D)+B),d[r+40>>2]=Y+y(y(y(E*c)+y(C*I))+y(b*N)),e=s,21==f[A+4>>2]){t=f[n+8>>2],Vi(r+88|0,r+448|0,r+40|0,f[i+16>>2]),f[r+140>>2]=A,f[r+136>>2]=t,f[r+132>>2]=i,f[r+88>>2]=7952,t=f[e+12>>2],f[r+152>>2]=f[e+8>>2],f[r+156>>2]=t,t=f[e+4>>2],f[r+144>>2]=f[e>>2],f[r+148>>2]=t,t=f[e+28>>2],f[r+168>>2]=f[e+24>>2],f[r+172>>2]=t,t=f[e+20>>2],f[r+160>>2]=f[e+16>>2],f[r+164>>2]=t,t=f[s+44>>2],f[r+184>>2]=f[s+40>>2],f[r+188>>2]=t,t=f[s+36>>2],f[r+176>>2]=f[s+32>>2],f[r+180>>2]=t,t=f[s+60>>2],f[r+200>>2]=f[s+56>>2],f[r+204>>2]=t,t=f[e+52>>2],f[r+192>>2]=f[e+48>>2],f[r+196>>2]=t,f[r+128>>2]=f[i+4>>2],function(e,t,n,i){var o,a;R=o=R-16|0,a=f[e+52>>2],f[o+8>>2]=t,f[o+4>>2]=a,f[o>>2]=11680,io(f[e+56>>2],o,n,i),R=o+16|0}(A,r+88|0,r+448|0,r+40|0);break e}m=d[e+32>>2],h=d[e+16>>2],p=d[e>>2],v=d[e+4>>2],b=d[e+8>>2],f[r+692>>2]=0,C=y(y(z-y(b*l))-L),d[r+688>>2]=y(y(y(u*b)+k)+j)+C,E=y(y(G-y(v*l))-H),d[r+684>>2]=y(y(y(u*v)+W)+q)+E,l=y(y(y(h*O)-y(p*l))-y(m*_)),d[r+680>>2]=y(y(y(u*p)+y(x*h))+y(P*m))+l,f[r+84>>2]=0,d[r+80>>2]=y(y(y(c*b)+M)+w)+C,d[r+76>>2]=y(y(y(c*v)+D)+B)+E,d[r+72>>2]=y(y(y(c*p)+y(I*h))+y(N*m))+l,t=f[n+8>>2],Vi(r+88|0,r+680|0,r+72|0,f[i+16>>2]),f[r+140>>2]=A,f[r+136>>2]=t,f[r+132>>2]=i,f[r+88>>2]=7952,t=f[e+12>>2],f[r+152>>2]=f[e+8>>2],f[r+156>>2]=t,t=f[e+4>>2],f[r+144>>2]=f[e>>2],f[r+148>>2]=t,t=f[e+28>>2],f[r+168>>2]=f[e+24>>2],f[r+172>>2]=t,t=f[e+20>>2],f[r+160>>2]=f[e+16>>2],f[r+164>>2]=t,t=f[s+44>>2],f[r+184>>2]=f[s+40>>2],f[r+188>>2]=t,t=f[s+36>>2],f[r+176>>2]=f[s+32>>2],f[r+180>>2]=t,t=f[s+60>>2],f[r+200>>2]=f[s+56>>2],f[r+204>>2]=t,t=f[e+52>>2],f[r+192>>2]=f[e+48>>2],f[r+196>>2]=t,f[r+128>>2]=f[i+4>>2],e=f[r+692>>2],f[r+32>>2]=f[r+688>>2],f[r+36>>2]=e,e=f[r+684>>2],f[r+24>>2]=f[r+680>>2],f[r+28>>2]=e,(l=d[r+72>>2])<d[r+24>>2]&&(d[r+24>>2]=l),(u=d[r+76>>2])<d[r+28>>2]&&(d[r+28>>2]=u),(c=d[r+80>>2])<d[r+32>>2]&&(d[r+32>>2]=c),(_=d[r+84>>2])<d[r+36>>2]&&(d[r+36>>2]=_),e=f[r+692>>2],f[r+16>>2]=f[r+688>>2],f[r+20>>2]=e,e=f[r+684>>2],f[r+8>>2]=f[r+680>>2],f[r+12>>2]=e,d[r+8>>2]<l&&(d[r+8>>2]=l),d[r+12>>2]<u&&(d[r+12>>2]=u),d[r+16>>2]<c&&(d[r+16>>2]=c),d[r+20>>2]<_&&(d[r+20>>2]=_),o[f[f[A>>2]+64>>2]](A,r+88|0,r+24|0,r+8|0)}else if(31==(0|T))if(T=f[A+68>>2],n=f[n+8>>2],f[r+64>>2]=i,f[r+60>>2]=t,f[r+56>>2]=e,f[r+52>>2]=s,f[r+48>>2]=A,f[r+44>>2]=n,f[r+40>>2]=8136,T)l=d[s+20>>2],u=d[s+36>>2],c=d[s+24>>2],_=d[s+52>>2],p=d[e+52>>2],x=d[s+40>>2],P=d[s+56>>2],v=d[e+56>>2],b=d[s>>2],I=d[s+16>>2],N=d[s+32>>2],C=d[s+4>>2],h=d[s+8>>2],m=d[s+48>>2],E=d[e+48>>2],f[r+100>>2]=0,w=h,h=y(E-m),p=y(p-_),v=y(v-P),d[r+96>>2]=y(y(w*h)+y(c*p))+y(x*v),d[r+92>>2]=y(y(h*C)+y(p*l))+y(v*u),d[r+88>>2]=y(y(h*b)+y(p*I))+y(v*N),h=d[t+52>>2],p=d[t+56>>2],v=d[s>>2],b=d[s+4>>2],C=d[s+8>>2],E=d[t+48>>2],f[r+460>>2]=0,m=y(E-m),w=c,c=y(h-_),_=y(p-P),d[r+456>>2]=y(y(C*m)+y(w*c))+y(x*_),d[r+452>>2]=y(y(m*b)+y(c*l))+y(_*u),d[r+448>>2]=y(y(m*v)+y(c*I))+y(_*N),function(e,t,n,i){var a,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=0,p=0,m=0,v=0,g=y(0),A=0,x=y(0),b=y(0),C=0,E=0,w=0,T=0,P=y(0),I=0,N=0,D=0,M=0,O=0,z=0;if(R=a=R-544|0,e){for(r=d[t+8>>2],s=d[n+8>>2],l=d[t>>2],c=d[n>>2],_=d[t+4>>2],g=d[n+4>>2],f[a+32>>2]=e,x=u=y(s-r),r=y(c-l),s=y(g-_),c=y(y(1)/y(S(y(y(y(r*r)+y(s*s))+y(u*u))))),u=y(u*c),g=r,r=y(r*c),b=s,s=y(s*c),P=y(y(x*u)+y(y(g*r)+y(b*s))),I=((e=(u=u==y(0)?y(0xde0b6b000000000):y(y(1)/u))<y(0))<<4)+a|8,N=((n=(s=s==y(0)?y(0xde0b6b000000000):y(y(1)/s))<y(0))<<4)+a|4,D=((1^e)<<4)+a|8,M=((1^n)<<4)+a|4,O=((e=(r=r==y(0)?y(0xde0b6b000000000):y(y(1)/r))<y(0))<<4)+a|0,z=((1^e)<<4)+a|0,w=126,A=128,p=a+32|0,m=128,C=1;;){h=f[(T=(e=C+-1|0)<<2)+p>>2],n=f[h+4>>2],f[a>>2]=f[h>>2],f[a+4>>2]=n,n=f[h+12>>2],f[a+8>>2]=f[h+8>>2],f[a+12>>2]=n,n=f[h+28>>2],f[a+24>>2]=f[h+24>>2],f[a+28>>2]=n,n=f[h+20>>2],f[a+16>>2]=f[h+16>>2],f[a+20>>2]=n;t:{n:{i:{o:{a:{r:{s:{if(!((c=y(s*y(d[N>>2]-_)))>(g=y(r*y(d[z>>2]-l)))||(l=y(r*y(d[O>>2]-l)))>(_=y(s*y(d[M>>2]-_)))||(b=d[t+8>>2],(x=y(u*y(d[I>>2]-b)))>(_=_<g?_:g)||(l=c>l?c:l)>(c=y(u*y(d[D>>2]-b)))|(x>l?x:l)<P^1|(c<_?c:_)>y(0)^1))){if(f[h+40>>2]){if((0|e)<=(0|w)){n=p,v=m;break n}if((0|m)>=(0|(v=m<<1))){n=p;break i}if((0|A)>=(0|v)){n=p;break o}if(!m){n=0;break s}if(e=0,f[6257]=f[6257]+1,n=0|o[f[4968]](m<<3,16),(0|m)<1)break s;for(;f[(A=e<<2)+n>>2]=f[p+A>>2],(0|m)!=(0|(e=e+1|0)););if(!E)break a;break r}o[f[f[i>>2]+12>>2]](i,h)}n=p,v=m;break t}if(e=E,E=1,!e)break a;if(A=v,!p)break o}p&&(f[6258]=f[6258]+1,o[f[4969]](p))}E=1,A=v}dn((e=m<<2)+n|0,0,e)}w=v+-2|0}f[n+T>>2]=f[h+36>>2],f[(C<<2)+n>>2]=f[h+40>>2],e=C+1|0}if(!e)break;_=d[t+4>>2],l=d[t>>2],p=n,m=v,C=e}!E|!n||n&&(f[6258]=f[6258]+1,o[f[4969]](n))}R=a+544|0}(f[T>>2],r+88|0,r+448|0,r+40|0);else if(!((0|(t=f[A+20>>2]))<1))for(n=0;;){if(e=f[A+28>>2]+g(n,80)|0,i=f[e+64>>2],h=d[e+56>>2],p=d[e+48>>2],v=d[e+52>>2],b=d[e+32>>2],C=d[e>>2],E=d[e+16>>2],D=d[e+36>>2],M=d[e+4>>2],O=d[e+20>>2],z=d[e+40>>2],L=d[e+8>>2],w=d[e+24>>2],k=d[s+52>>2],j=d[s+56>>2],l=d[s+24>>2],u=d[s+20>>2],c=d[s+40>>2],_=d[s+36>>2],G=d[s+48>>2],x=d[s+8>>2],P=d[s>>2],I=d[s+4>>2],N=d[s+16>>2],m=d[s+32>>2],f[r+148>>2]=0,f[r+132>>2]=0,f[r+116>>2]=0,f[r+100>>2]=0,d[r+128>>2]=y(y(L*m)+y(w*_))+y(z*c),d[r+124>>2]=y(y(M*m)+y(O*_))+y(D*c),d[r+120>>2]=y(y(C*m)+y(E*_))+y(b*c),d[r+112>>2]=y(y(L*N)+y(w*u))+y(z*l),d[r+108>>2]=y(y(M*N)+y(O*u))+y(D*l),d[r+104>>2]=y(y(C*N)+y(E*u))+y(b*l),d[r+96>>2]=y(y(P*L)+y(I*w))+y(x*z),d[r+92>>2]=y(y(P*M)+y(I*O))+y(x*D),d[r+88>>2]=y(y(C*P)+y(E*I))+y(b*x),d[r+144>>2]=j+y(y(y(m*p)+y(_*v))+y(c*h)),d[r+140>>2]=k+y(y(y(N*p)+y(u*v))+y(l*h)),d[r+136>>2]=G+y(y(y(P*p)+y(I*v))+y(x*h)),f[r+700>>2]=n,f[r+696>>2]=-1,f[r+688>>2]=f[r+44>>2],f[r+684>>2]=i,f[r+680>>2]=0,f[r+692>>2]=r+88,f[r+460>>2]=-65535,f[r+464>>2]=0,f[r+452>>2]=1065353216,f[r+456>>2]=0,f[r+472>>2]=n,f[r+448>>2]=8340,e=f[r+64>>2],f[r+468>>2]=e,f[r+452>>2]=f[e+4>>2],f[r+464>>2]=f[e+16>>2],U(f[r+56>>2],f[r+60>>2],r+680|0,r+448|0),(0|t)==(0|(n=n+1|0)))break e;s=f[r+52>>2],A=f[r+48>>2]}R=r+704|0}function B(e,t,n){var i,r=0,s=0,c=0,l=0,_=0,u=0,p=0,m=y(0),v=y(0),x=y(0),b=0,C=y(0),E=0,w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0);R=i=R-32|0,C=d[n+8>>2],y(A(C))>y(.7071067690849304)?(m=d[n+4>>2],v=y(y(C*C)+y(m*m)),x=y(y(1)/y(S(v))),D=y(v*x),v=d[n>>2],T=y(x*y(-C)),M=y(v*T),O=y(m*x),v=y(O*y(-v))):(x=d[n>>2],m=d[n+4>>2],v=y(y(x*x)+y(m*m)),w=y(y(1)/y(S(v))),M=y(v*w),T=y(x*w),D=y(T*y(-C)),I=y(w*y(-m)),v=y(C*I));e:if((0|(_=f[e+4>>2]))>=2){for(r=f[e+12>>2];c=g(p,24),y(y(y(I*d[(s=c+r|0)>>2])+y(T*d[s+4>>2]))+y(O*d[s+8>>2]))<y(y(y(I*d[r>>2])+y(T*d[r+4>>2]))+y(O*d[r+8>>2]))&&(l=f[r+20>>2],f[i+24>>2]=f[r+16>>2],f[i+28>>2]=l,l=f[r+12>>2],f[i+16>>2]=f[r+8>>2],f[i+20>>2]=l,l=f[r+4>>2],f[i+8>>2]=f[r>>2],f[i+12>>2]=l,l=f[s+4>>2],f[r>>2]=f[s>>2],f[r+4>>2]=l,l=f[s+12>>2],f[r+8>>2]=f[s+8>>2],f[r+12>>2]=l,l=f[s+20>>2],f[r+16>>2]=f[s+16>>2],f[r+20>>2]=l,s=f[i+12>>2],l=c+f[e+12>>2]|0,f[(r=l)>>2]=f[i+8>>2],f[r+4>>2]=s,s=f[i+28>>2],f[r+16>>2]=f[i+24>>2],f[r+20>>2]=s,s=f[i+20>>2],f[r+8>>2]=f[i+16>>2],f[r+12>>2]=s,_=f[e+4>>2],r=f[e+12>>2]),(0|(p=p+1|0))<(0|_););if(f[r+16>>2]=-246811958,(0|_)>=2)for(z=d[r+8>>2],L=d[r>>2],C=d[r+4>>2],p=1;P=y(0),s=g(p,24)+r|0,w=y(d[s>>2]-L),x=y(d[s+4>>2]-C),m=y(d[s+8>>2]-z),N=y(y(y(D*w)+y(v*x))+y(M*m)),x=y(y(y(I*w)+y(T*x))+y(O*m)),y(y(N*N)+y(x*x))<y(1.1920928955078125e-7)||(m=y(A(N)),x>=y(0)?(P=y(.7853981852531433),m=y(y(x-m)/y(x+m))):(P=y(2.356194496154785),m=y(y(x+m)/y(m-x))),m=y(P+y(m*y(-.7853981852531433))),P=N<y(0)?y(-m):m),d[s+16>>2]=P,(0|(p=p+1|0))!=(0|_););if(s=f[r+12>>2],f[i+16>>2]=f[r+8>>2],f[i+20>>2]=s,s=f[r+4>>2],f[i+8>>2]=f[r>>2],f[i+12>>2]=s,ct(e,i+8|0,1,_+-1|0),s=f[e+12>>2],(0|(_=f[t+4>>2]))==f[t+8>>2]&&!((0|_)>=(0|(p=_?_<<1:1)))){if(r=0,p&&(f[6257]=f[6257]+1,b=0|o[f[4968]](g(p,24),16),_=f[t+4>>2]),(0|_)>=1)for(;c=E=(l=g(r,24))+b|0,u=l+f[t+12>>2]|0,l=f[u+4>>2],f[c>>2]=f[u>>2],f[c+4>>2]=l,l=f[u+20>>2],f[c+16>>2]=f[u+16>>2],f[c+20>>2]=l,l=f[u+12>>2],f[c+8>>2]=f[u+8>>2],f[c+12>>2]=l,(0|_)!=(0|(r=r+1|0)););(r=f[t+12>>2])&&(h[t+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[t+12>>2]=0),f[t+12>>2]=b,a[t+16|0]=1,f[t+8>>2]=p,_=f[t+4>>2]}if(r=f[s+4>>2],c=f[t+12>>2]+g(_,24)|0,f[c>>2]=f[s>>2],f[c+4>>2]=r,r=f[s+20>>2],f[c+16>>2]=f[s+16>>2],f[c+20>>2]=r,r=f[s+12>>2],f[c+8>>2]=f[s+8>>2],f[c+12>>2]=r,_=f[t+4>>2]+1|0,f[t+4>>2]=_,s=f[e+12>>2],f[t+8>>2]==(0|_)&&!((0|_)>=(0|(p=_?_<<1:1)))){if(r=0,b=0,p&&(f[6257]=f[6257]+1,b=0|o[f[4968]](g(p,24),16),_=f[t+4>>2]),(0|_)>=1)for(;c=E=(l=g(r,24))+b|0,u=l+f[t+12>>2]|0,l=f[u+4>>2],f[c>>2]=f[u>>2],f[c+4>>2]=l,l=f[u+20>>2],f[c+16>>2]=f[u+16>>2],f[c+20>>2]=l,l=f[u+12>>2],f[c+8>>2]=f[u+8>>2],f[c+12>>2]=l,(0|_)!=(0|(r=r+1|0)););(r=f[t+12>>2])&&(h[t+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[t+12>>2]=0),f[t+12>>2]=b,a[t+16|0]=1,f[t+8>>2]=p,_=f[t+4>>2]}if(r=f[s+28>>2],c=f[t+12>>2]+g(_,24)|0,f[c>>2]=f[s+24>>2],f[c+4>>2]=r,r=f[s+44>>2],f[c+16>>2]=f[s+40>>2],f[c+20>>2]=r,r=f[s+36>>2],f[c+8>>2]=f[s+32>>2],f[c+12>>2]=r,s=f[t+4>>2]+1|0,f[t+4>>2]=s,2==f[e+4>>2])break e;for(b=2;;){t:if(!((0|s)<2)){for(l=f[e+12>>2]+g(b,24)|0,I=d[l+8>>2],N=d[l+4>>2],D=d[l>>2],M=d[n+8>>2],z=d[n+4>>2],L=d[n>>2],_=f[t+12>>2],r=s;;){if(s=g(r,24)+_|0,m=d[(c=s+-48|0)>>2],C=y(m-d[(s=s+-24|0)>>2]),v=d[c+4>>2],w=y(v-N),v=y(v-d[s+4>>2]),x=y(m-D),P=y(y(y(C*w)-y(v*x))*M),T=v,v=d[c+8>>2],m=y(v-I),v=y(v-d[s+8>>2]),!(y(P+y(y(L*y(y(T*m)-y(v*w)))+y(z*y(y(v*x)-y(C*m)))))>y(0))){if(s=r+-1|0,f[t+4>>2]=s,c=(0|r)>2,r=s,c)continue;break t}break}if(f[t+8>>2]==(0|r)&&!((0|r)>=(0|(E=r<<1)))){if(f[6257]=f[6257]+1,_=0|o[f[4968]](g(r,48),16),r=0,(0|(p=f[t+4>>2]))>=1)for(;c=u=(s=g(r,24))+_|0,u=s+f[t+12>>2]|0,s=f[u+4>>2],f[c>>2]=f[u>>2],f[c+4>>2]=s,s=f[u+20>>2],f[c+16>>2]=f[u+16>>2],f[c+20>>2]=s,s=f[u+12>>2],f[c+8>>2]=f[u+8>>2],f[c+12>>2]=s,(0|p)!=(0|(r=r+1|0)););(s=f[t+12>>2])&&(h[t+16|0]&&s&&(f[6258]=f[6258]+1,o[f[4969]](s)),f[t+12>>2]=0),f[t+12>>2]=_,a[t+16|0]=1,f[t+8>>2]=E,r=f[t+4>>2]}s=f[l+4>>2],c=g(r,24)+_|0,f[(r=c)>>2]=f[l>>2],f[r+4>>2]=s,s=f[l+20>>2],f[r+16>>2]=f[l+16>>2],f[r+20>>2]=s,s=f[l+12>>2],f[r+8>>2]=f[l+8>>2],f[r+12>>2]=s,s=f[t+4>>2]+1|0,f[t+4>>2]=s}if(1==(0|s)){if(s=f[e+12>>2]+g(b,24)|0,r=1,1==f[t+8>>2]){if(f[6257]=f[6257]+1,E=0|o[f[4968]](48,16),r=0,(0|(p=f[t+4>>2]))>=1)for(;c=u=(l=g(r,24))+E|0,u=l+f[t+12>>2]|0,l=f[u+4>>2],f[c>>2]=f[u>>2],f[c+4>>2]=l,l=f[u+20>>2],f[c+16>>2]=f[u+16>>2],f[c+20>>2]=l,l=f[u+12>>2],f[c+8>>2]=f[u+8>>2],f[c+12>>2]=l,(0|p)!=(0|(r=r+1|0)););(r=f[t+12>>2])&&(h[t+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[t+12>>2]=0),f[t+12>>2]=E,a[t+16|0]=1,f[t+8>>2]=2,r=f[t+4>>2]}c=f[t+12>>2]+g(r,24)|0,r=f[s+4>>2],f[c>>2]=f[s>>2],f[c+4>>2]=r,r=f[s+20>>2],f[c+16>>2]=f[s+16>>2],f[c+20>>2]=r,r=f[s+12>>2],f[c+8>>2]=f[s+8>>2],f[c+12>>2]=r,s=f[t+4>>2]+1|0,f[t+4>>2]=s}if((0|(b=b+1|0))==f[e+4>>2])break}}else if(1==(0|_))for(_=f[t+4>>2];;){if(n=f[e+12>>2],f[t+8>>2]==(0|_)&&!((0|_)>=(0|(p=_?_<<1:1)))){if(r=0,b=0,p&&(f[6257]=f[6257]+1,b=0|o[f[4968]](g(p,24),16),_=f[t+4>>2]),(0|_)>=1)for(;c=E=(l=g(r,24))+b|0,u=l+f[t+12>>2]|0,l=f[u+4>>2],f[c>>2]=f[u>>2],f[c+4>>2]=l,l=f[u+20>>2],f[c+16>>2]=f[u+16>>2],f[c+20>>2]=l,l=f[u+12>>2],f[c+8>>2]=f[u+8>>2],f[c+12>>2]=l,(0|_)!=(0|(r=r+1|0)););(r=f[t+12>>2])&&(h[t+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[t+12>>2]=0),f[t+12>>2]=b,a[t+16|0]=1,f[t+8>>2]=p,_=f[t+4>>2]}if(r=f[n+4>>2],c=f[t+12>>2]+g(_,24)|0,f[c>>2]=f[n>>2],f[c+4>>2]=r,r=f[n+20>>2],f[c+16>>2]=f[n+16>>2],f[c+20>>2]=r,r=f[n+12>>2],f[c+8>>2]=f[n+8>>2],f[c+12>>2]=r,_=f[t+4>>2]+1|0,f[t+4>>2]=_,!((0|(s=s+1|0))<f[e+4>>2]))break}R=i+32|0}function k(e,t,n){var i,r=0,s=0,c=0,l=0,_=0,u=0,p=0,m=0,d=0,v=0,y=0,A=0,x=0,b=0;R=i=R-144|0;e:if((0|n)<=0)(t=f[e+12>>2])&&(h[e+16|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+12>>2]=0),f[e+12>>2]=0,a[e+16|0]=1,f[e+4>>2]=0,f[e+8>>2]=0,(t=f[e+32>>2])&&(h[e+36|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+32>>2]=0),f[e+32>>2]=0,f[e+24>>2]=0,f[e+28>>2]=0,a[e+36|0]=1,(t=f[e+52>>2])&&(h[e+56|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+52>>2]=0),f[e+52>>2]=0,f[e+44>>2]=0,f[e+48>>2]=0,a[e+56|0]=1;else{if(a[i+112|0]=1,f[i+88>>2]=0,f[i+92>>2]=256,f[i+72>>2]=0,f[i+76>>2]=256,f[i+56>>2]=0,f[i+60>>2]=256,f[i+108>>2]=0,f[i+100>>2]=0,f[i+104>>2]=0,f[i+80>>2]=0,f[i+84>>2]=0,f[i+64>>2]=0,f[i+68>>2]=0,f[i+48>>2]=0,f[i+52>>2]=0,X(i+16|0,t,n),(0|(n=f[e+4>>2]))<=-1)for(f[e+8>>2]<=-1&&((t=f[e+12>>2])&&(h[e+16|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+12>>2]=0),a[e+16|0]=1,f[e+8>>2]=0,f[e+12>>2]=0);t=f[i+4>>2],r=f[e+12>>2]+(n<<4)|0,f[r>>2]=f[i>>2],f[r+4>>2]=t,t=f[i+12>>2],f[r+8>>2]=f[i+8>>2],f[r+12>>2]=t,r=(t=n+1|0)>>>0>=n>>>0,n=t,r;);if(f[e+4>>2]=0,f[i+8>>2]=0,f[i>>2]=0,f[i+4>>2]=0,(0|(n=f[e+24>>2]))<=-1)for(f[e+28>>2]<=-1&&((t=f[e+32>>2])&&(h[e+36|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+32>>2]=0),f[e+28>>2]=0,f[e+32>>2]=0,a[e+36|0]=1);t=f[i+4>>2],r=f[e+32>>2]+g(n,12)|0,f[r>>2]=f[i>>2],f[r+4>>2]=t,f[r+8>>2]=f[i+8>>2],r=(t=n+1|0)>>>0>=n>>>0,n=t,r;);if(f[e+24>>2]=0,(0|(n=f[e+44>>2]))<=-1&&(t=f[e+52>>2],f[e+48>>2]<=-1&&(!t|!h[e+56|0]||t&&(f[6258]=f[6258]+1,o[f[4969]](t)),a[e+56|0]=1,f[e+48>>2]=0,f[e+52>>2]=0,t=0),dn((r=t)+(t=n<<2)|0,0,0-t|0)),f[e+44>>2]=0,t=f[i+140>>2],!(f[t+104>>2]>-1)){for(f[t+104>>2]=0,f[6257]=f[6257]+1,p=0|o[f[4968]](4,16),f[p>>2]=t,n=0,u=1,d=1;;){if(b=n,Sn(i,i+16|0,c=f[(n<<2)+p>>2]),(0|(s=f[e+4>>2]))==f[e+8>>2]&&!((0|s)>=(0|(x=s?s<<1:1)))){if(n=0,r=0,x&&(f[6257]=f[6257]+1,r=0|o[f[4968]](x<<4,16),s=f[e+4>>2]),(0|s)>=1)for(;_=(t=n<<4)+r|0,l=t+f[e+12>>2]|0,t=f[l+4>>2],f[_>>2]=f[l>>2],f[_+4>>2]=t,t=f[l+12>>2],f[_+8>>2]=f[l+8>>2],f[_+12>>2]=t,(0|s)!=(0|(n=n+1|0)););(t=f[e+12>>2])&&(h[e+16|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+12>>2]=0),f[e+12>>2]=r,a[e+16|0]=1,f[e+8>>2]=x,s=f[e+4>>2]}if(t=f[i+4>>2],n=f[e+12>>2]+(s<<4)|0,f[n>>2]=f[i>>2],f[n+4>>2]=t,t=f[i+12>>2],f[n+8>>2]=f[i+8>>2],f[n+12>>2]=t,f[e+4>>2]=f[e+4>>2]+1,_=-1,A=-1,t=x=f[c+8>>2]){for(;;){if((0|(n=f[t+20>>2]))<=-1){if(s=f[e+24>>2],f[i+8>>2]=0,f[i>>2]=0,f[i+4>>2]=0,(0|(n=s))==f[e+28>>2]&&!((0|s)>=(0|(m=n?n<<1:1)))){if(n=0,r=s,c=0,m&&(f[6257]=f[6257]+1,c=0|o[f[4968]](g(m,12),16),r=f[e+24>>2]),(0|r)>=1)for(;v=(l=g(n,12))+f[e+32>>2]|0,y=c+l|0,l=f[v+4>>2],f[y>>2]=f[v>>2],f[y+4>>2]=l,f[y+8>>2]=f[v+8>>2],(0|r)!=(0|(n=n+1|0)););(n=f[e+32>>2])&&(h[e+36|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+32>>2]=0),f[e+32>>2]=c,a[e+36|0]=1,f[e+28>>2]=m,n=f[e+24>>2]}if(r=f[e+32>>2]+g(n,12)|0,n=f[i+4>>2],f[r>>2]=f[i>>2],f[r+4>>2]=n,f[r+8>>2]=f[i+8>>2],r=f[e+24>>2]+1|0,f[e+24>>2]=r,f[i+8>>2]=0,f[i>>2]=0,f[i+4>>2]=0,f[e+28>>2]==(0|r)&&!((0|r)>=(0|(m=r?r<<1:1)))){if(n=0,c=0,m&&(f[6257]=f[6257]+1,c=0|o[f[4968]](g(m,12),16),r=f[e+24>>2]),(0|r)>=1)for(;v=(l=g(n,12))+f[e+32>>2]|0,y=c+l|0,l=f[v+4>>2],f[y>>2]=f[v>>2],f[y+4>>2]=l,f[y+8>>2]=f[v+8>>2],(0|r)!=(0|(n=n+1|0)););(n=f[e+32>>2])&&(h[e+36|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+32>>2]=0),f[e+32>>2]=c,a[e+36|0]=1,f[e+28>>2]=m,r=f[e+24>>2]}if(n=f[i+4>>2],r=f[e+32>>2]+g(r,12)|0,f[r>>2]=f[i>>2],f[r+4>>2]=n,f[r+8>>2]=f[i+8>>2],f[e+24>>2]=f[e+24>>2]+1,m=f[e+32>>2],f[t+20>>2]=s,l=s+1|0,f[f[t+8>>2]+20>>2]=l,v=g(s,12)+m|0,f[v+16>>2]=-1,f[v+4>>2]=1,y=f[t+12>>2],(0|(n=f[y+104>>2]))>-1)r=u,u=n;else{f[y+104>>2]=u;t:if((0|u)!=(0|d)||(0|d)>=(0|(c=d?d<<1:1)))s=p,c=d;else{n=0,s=0,c&&(f[6257]=f[6257]+1,s=0|o[f[4968]](c<<2,16));n:{if((0|d)>=1)for(;;)if(f[(r=n<<2)+s>>2]=f[r+p>>2],(0|d)==(0|(n=n+1|0)))break n;if(!p)break t}p&&(f[6258]=f[6258]+1,o[f[4969]](p))}f[(u<<2)+s>>2]=y,r=u+1|0,p=s,d=c}f[v+8>>2]=u,f[8+(g(l,12)+m|0)>>2]=b,u=r,n=f[t+20>>2]}if(r=n,(0|_)>=0&&(f[f[e+32>>2]+g(n,12)>>2]=_-n,r=A),_=n,A=r,(0|x)==(0|(t=f[t>>2])))break}f[f[e+32>>2]+g(A,12)>>2]=_-A}if(!((0|(n=b+1|0))<(0|u)))break}for(u=0;;){if(t=c=f[f[(u<<2)+p>>2]+8>>2])for(;;){if((0|(n=f[t+20>>2]))>=0){if((0|(s=f[e+44>>2]))==f[e+48>>2]&&!((0|s)>=(0|(_=s?s<<1:1)))){n=0,r=0,_&&(f[6257]=f[6257]+1,r=0|o[f[4968]](_<<2,16),s=f[e+44>>2]),A=f[e+52>>2];t:{n:{if((0|s)>=1)for(;;)if(f[(d=n<<2)+r>>2]=f[d+A>>2],(0|s)==(0|(n=n+1|0)))break n;if(!A)break t}h[e+56|0]&&(n=A)&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+52>>2]=0,s=f[e+44>>2]}f[e+52>>2]=r,a[e+56|0]=1,f[e+48>>2]=_,n=f[t+20>>2]}for(f[f[e+52>>2]+(s<<2)>>2]=n,f[e+44>>2]=f[e+44>>2]+1,n=t;f[n+20>>2]=-1,(0|(n=f[f[n+8>>2]+4>>2]))!=(0|t););}if((0|c)==(0|(t=f[t>>2])))break}if(t=(0|u)==(0|b),u=u+1|0,t)break}p&&p&&(f[6258]=f[6258]+1,o[f[4969]](p))}for((e=f[i+108>>2])&&(h[i+112|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[i+108>>2]=0),f[i+108>>2]=0,a[i+112|0]=1,f[i+100>>2]=0,f[i+104>>2]=0;t=f[i+80>>2];)f[i+80>>2]=f[t+8>>2],(e=f[t>>2])&&(f[6258]=f[6258]+1,o[f[4969]](e)),t&&(f[6258]=f[6258]+1,o[f[4969]](t));for(;t=f[i+64>>2];)f[i+64>>2]=f[t+8>>2],(e=f[t>>2])&&(f[6258]=f[6258]+1,o[f[4969]](e)),t&&(f[6258]=f[6258]+1,o[f[4969]](t));for(;;){if(!(t=f[i+48>>2]))break e;f[i+48>>2]=f[t+8>>2],(e=f[t>>2])&&(f[6258]=f[6258]+1,o[f[4969]](e)),t&&(f[6258]=f[6258]+1,o[f[4969]](t))}}R=i+144|0}function j(e,t,n){var i,o=y(0),a=0,r=y(0),s=y(0),c=y(0),l=y(0),_=0,u=0,h=0,p=0,m=y(0),v=y(0),A=0,x=0,b=0,C=y(0),E=y(0),w=y(0),T=y(0),P=0,I=0,N=0,D=0,M=0;R=i=R-96|0,f[e+376>>2]=0,f[e+364>>2]=4,f[e+368>>2]=0,_=e+316|0,f[e+360>>2]=_,f[e+356>>2]=e+284,f[e+352>>2]=e+252,f[e+348>>2]=e+220,a=f[t+4>>2],f[e>>2]=f[t>>2],f[e+4>>2]=a,a=f[t+20>>2],f[e+16>>2]=f[t+16>>2],f[e+20>>2]=a,a=f[t+12>>2],f[e+8>>2]=f[t+8>>2],f[e+12>>2]=a,a=f[t+36>>2],f[e+32>>2]=f[t+32>>2],f[e+36>>2]=a,a=f[t+28>>2],f[e+24>>2]=f[t+24>>2],f[e+28>>2]=a,a=f[t+52>>2],f[e+48>>2]=f[t+48>>2],f[e+52>>2]=a,a=f[t+44>>2],f[e+40>>2]=f[t+40>>2],f[e+44>>2]=a,p=f[4+(h=t- -64|0)>>2],f[(a=e- -64|0)>>2]=f[h>>2],f[a+4>>2]=p,a=f[t+60>>2],f[e+56>>2]=f[t+56>>2],f[e+60>>2]=a,a=f[t+84>>2],f[e+80>>2]=f[t+80>>2],f[e+84>>2]=a,a=f[t+76>>2],f[e+72>>2]=f[t+72>>2],f[e+76>>2]=a,a=f[t+100>>2],f[e+96>>2]=f[t+96>>2],f[e+100>>2]=a,a=f[t+92>>2],f[e+88>>2]=f[t+88>>2],f[e+92>>2]=a,a=f[t+108>>2],f[e+104>>2]=f[t+104>>2],f[e+108>>2]=a,a=f[t+116>>2],f[e+112>>2]=f[t+112>>2],f[e+116>>2]=a,a=f[t+124>>2],t=f[t+120>>2],f[e+180>>2]=0,f[e+144>>2]=0,f[e+120>>2]=t,f[e+124>>2]=a,t=f[n+12>>2],f[e+136>>2]=f[n+8>>2],f[e+140>>2]=t,t=f[n+4>>2],f[e+128>>2]=f[n>>2],f[e+132>>2]=t,a=e+128|0,o=d[e+128>>2],c=d[e+132>>2],s=d[e+136>>2],(m=y(y(y(o*o)+y(c*c))+y(s*s)))>y(0)?(d[i+40>>2]=-s,d[i+36>>2]=-c,d[i+32>>2]=-o):(f[i+40>>2]=0,f[i+32>>2]=1065353216,f[i+36>>2]=0),f[i+44>>2]=0,f[e+364>>2]=3,f[e+164>>2]=0,f[e+180>>2]=1,f[e+148>>2]=_,Fn(e,i+32|0,_),f[e+164>>2]=1065353216,t=f[e+148>>2],n=f[t+20>>2],f[a>>2]=f[t+16>>2],f[a+4>>2]=n,n=f[t+28>>2],f[a+8>>2]=f[t+24>>2],f[a+12>>2]=n,n=f[t+28>>2],f[i+88>>2]=f[t+24>>2],f[i+92>>2]=n,n=f[t+20>>2],f[i+80>>2]=f[t+16>>2],f[i+84>>2]=n,n=f[t+28>>2],f[i+72>>2]=f[t+24>>2],f[i+76>>2]=n,n=f[t+20>>2],f[i+64>>2]=f[t+16>>2],f[i+68>>2]=n,n=f[t+28>>2],f[i+56>>2]=f[t+24>>2],f[i+60>>2]=n,n=f[t+20>>2],f[i+48>>2]=f[t+16>>2],f[i+52>>2]=n,n=f[t+28>>2],f[i+40>>2]=f[t+24>>2],f[i+44>>2]=n,n=f[t+20>>2],f[i+32>>2]=f[t+16>>2],f[i+36>>2]=n,o=d[e+136>>2],c=d[e+132>>2],s=d[e+128>>2],_=f[e+368>>2];e:{t:{n:{for(;;){if((v=y(S(y(y(y(s*s)+y(c*c))+y(o*o)))))<y(9999999747378752e-20)){f[e+376>>2]=1;break n}if(f[i+28>>2]=0,d[i+24>>2]=-o,d[i+20>>2]=-c,d[i+16>>2]=-s,h=148+(n=g(_,36)+e|0)|0,t=f[n+180>>2],f[16+(p=h+(t<<2)|0)>>2]=0,u=f[e+364>>2]+-1|0,f[e+364>>2]=u,A=p,p=f[348+((u<<2)+e|0)>>2],f[A>>2]=p,f[n+180>>2]=t+1,Fn(e,i+16|0,p),u=f[n+180>>2],t=f[(h+(u<<2)|0)-4>>2],o=d[t+16>>2],c=y(o-d[i+32>>2]),r=y(c*c),c=d[t+20>>2],s=y(c-d[i+36>>2]),l=y(r+y(s*s)),s=d[t+24>>2],r=y(s-d[i+40>>2]),!(y(l+y(r*r))<y(9999999747378752e-20)||(r=y(o-d[i+48>>2]),l=y(r*r),r=y(c-d[i+52>>2]),l=y(l+y(r*r)),r=y(s-d[i+56>>2]),y(l+y(r*r))<y(9999999747378752e-20)||(r=y(o-d[i+64>>2]),l=y(r*r),r=y(c-d[i+68>>2]),l=y(l+y(r*r)),r=y(s-d[i+72>>2]),y(l+y(r*r))<y(9999999747378752e-20)||(r=y(o-d[i+80>>2]),l=y(r*r),r=y(c-d[i+84>>2]),l=y(l+y(r*r)),r=y(s-d[i+88>>2]),y(l+y(r*r))<y(9999999747378752e-20)))))){if(b=f[t+28>>2],f[8+(p=(i+32|0)+((P=P+1&3)<<4)|0)>>2]=f[t+24>>2],f[p+12>>2]=b,A=f[t+20>>2],f[p>>2]=f[t+16>>2],f[p+4>>2]=A,o=y(y(y(y(d[e+128>>2]*o)+y(d[e+132>>2]*c))+y(d[e+136>>2]*s))/v),y(y(v-(C=o>C?o:C))+y(v*y(-9999999747378752e-20)))<=y(0)){_=f[e+368>>2],n=g(_,36)+e|0,t=f[n+180>>2]+-1|0,f[n+180>>2]=t,t=f[148+(n+(t<<2)|0)>>2],n=f[e+364>>2],f[e+364>>2]=n+1,f[348+((n<<2)+e|0)>>2]=t;break n}f[i+12>>2]=0;i:{o:{a:if(!((t=u+-2|0)>>>0>2)){switch(t-1|0){default:if(t=f[n+152>>2],E=d[t+16>>2],h=f[h>>2],m=d[h+16>>2],v=y(E-m),w=d[t+20>>2],c=d[h+20>>2],r=y(w-c),T=d[t+24>>2],s=d[h+24>>2],l=y(T-s),!((o=y(y(y(v*v)+y(r*r))+y(l*l)))>y(0)))break o;if((o=y(y(-y(y(y(m*v)+y(c*r))+y(s*l)))/o))>=y(1)){f[i+16>>2]=0,f[i+20>>2]=1065353216,f[i+12>>2]=2,m=y(y(y(E*E)+y(w*w))+y(T*T));break a}if(o<=y(0)){f[i+16>>2]=1065353216,f[i+20>>2]=0,f[i+12>>2]=1,m=y(y(y(m*m)+y(c*c))+y(s*s));break a}f[i+12>>2]=3,d[i+20>>2]=o,d[i+16>>2]=y(1)-o,s=y(s+y(l*o)),m=y(m+y(v*o)),o=y(c+y(r*o)),m=y(y(s*s)+y(y(m*m)+y(o*o)));break a;case 0:m=Pe(f[h>>2]+16|0,f[n+152>>2]+16|0,f[n+156>>2]+16|0,i+16|0,i+12|0);break a;case 1:}m=ye(f[h>>2]+16|0,f[n+152>>2]+16|0,f[n+156>>2]+16|0,f[n+160>>2]+16|0,i+16|0,i+12|0)}if(m>=y(0)){if(t=0,A=g(_=1-_|0,36)+e|0,f[(h=A)+180>>2]=0,f[a+8>>2]=0,f[a+12>>2]=0,f[a>>2]=0,f[a+4>>2]=0,f[e+368>>2]=_,o=y(0),p=f[i+12>>2],c=y(0),s=y(0),!(b=f[n+180>>2]))break i;for(;u=f[148+(I=(x=t<<2)+n|0)>>2],p>>>t&1?(N=f[h+180>>2],f[148+(D=(N<<2)+A|0)>>2]=u,o=d[(u=x+(i+16|0)|0)>>2],u=f[u>>2],f[h+180>>2]=N+1,f[D+164>>2]=u,u=f[I+148>>2],v=d[u+24>>2],c=d[u+20>>2],s=y(y(d[u+16>>2]*o)+d[e+128>>2]),d[e+128>>2]=s,c=y(y(c*o)+d[e+132>>2]),d[e+132>>2]=c,o=y(y(v*o)+d[e+136>>2]),d[e+136>>2]=o):(x=f[e+364>>2],f[e+364>>2]=x+1,f[348+((x<<2)+e|0)>>2]=u),(0|b)!=(0|(t=t+1|0)););break i}}_=f[e+368>>2],n=g(_,36)+e|0,t=f[n+180>>2]+-1|0,f[n+180>>2]=t,t=f[148+(n+(t<<2)|0)>>2],n=f[e+364>>2],f[e+364>>2]=n+1,f[348+((n<<2)+e|0)>>2]=t;break n}if(15==(0|p)&&(f[e+376>>2]=1),127==(0|M)){t=2,f[e+376>>2]=2,f[e+372>>2]=148+(g(_,36)+e|0);break e}if(M=M+1|0,!(t=f[e+376>>2]))continue;break t}break}_=f[e+368>>2],n=g(_,36)+e|0,t=f[n+180>>2]+-1|0,f[n+180>>2]=t,t=f[148+(n+(t<<2)|0)>>2],n=f[e+364>>2],f[e+364>>2]=n+1,f[348+((n<<2)+e|0)>>2]=t}t=f[e+376>>2]}f[e+372>>2]=148+(g(_,36)+e|0),t>>>0>1||(t-1?(o=d[e+128>>2],r=y(o*o),o=d[e+132>>2],r=y(r+y(o*o)),o=d[e+136>>2],d[e+144>>2]=S(y(r+y(o*o))),t=0):(f[e+144>>2]=0,t=1))}return R=i+96|0,t}function G(e){var t,n=0,i=0,r=0,s=y(0),_=y(0),v=0,x=y(0),b=y(0),C=y(0),E=0,w=y(0),T=0,P=y(0),I=y(0),N=y(0),D=0,M=0,O=0,z=0,L=y(0),F=y(0),U=0,B=0,k=0,j=0,G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0);if(R=t=R-96|0,a[t+52|0]=1,f[t+48>>2]=0,a[t+72|0]=1,f[t+40>>2]=0,f[t+44>>2]=0,f[t+68>>2]=0,a[t+92|0]=1,f[t+60>>2]=0,f[t+64>>2]=0,f[t+88>>2]=0,f[t+80>>2]=0,f[t+84>>2]=0,f[t+28>>2]=0,a[t+32|0]=1,f[t+20>>2]=0,f[t+24>>2]=0,f[e+72>>2]=0,f[e+76>>2]=0,f[e+64>>2]=0,f[e+68>>2]=0,!((0|(i=f[e+28>>2]))<1)){for(;;){if(n=f[e+36>>2],U=g(E,36),(0|(B=f[4+(n+U|0)>>2]))>=1){for(D=0;;){i=f[12+(n+U|0)>>2],n=f[i+(D<<2)>>2],v=f[i+(((z=(0|B)==(0|(D=D+1|0)))?0:D)<<2)>>2],u[t+10>>1]=v,u[t+8>>1]=n,O=0,(0|(r=v<<16>>16))>(0|(i=n<<16>>16))&&(u[t+10>>1]=n,u[t+8>>1]=v,r=n,i=v);e:if(!((n=(v=r<<16)+(T=i<<16>>16)&f[t+64>>2]+-1)>>>0>=m[t+20>>2])&&-1!=(0|(n=f[f[t+28>>2]+(n<<2)>>2]))){for(M=f[t+48>>2],j=f[t+88>>2];;){if(p[2+(k=(n<<=2)+j|0)>>1]!=(65535&r)||p[k>>1]!=(65535&i)){if(-1!=(0|(n=f[n+M>>2])))continue;break e}break}O=n+f[t+68>>2]|0}i=(r=f[e+16>>2])+(v>>16<<4)|0,r=r+(T<<4)|0,s=y(d[i+8>>2]-d[r+8>>2]),_=y(d[i>>2]-d[r>>2]),x=y(d[i+4>>2]-d[r+4>>2]),C=y(y(1)/y(S(y(y(y(_*_)+y(x*x))+y(s*s))))),s=y(s*C),x=y(x*C),_=y(_*C);e:{if((0|(i=f[e+48>>2]))>=1)for(v=f[e+56>>2],n=0;;){if(C=d[8+(r=v+(n<<4)|0)>>2],P=d[r>>2],w=d[r+4>>2],(+y(A(y(C-s)))>1e-6^1?!(+y(A(y(P-_)))>1e-6|+y(A(y(w-x)))>1e-6):0)|(+y(A(y(s+C)))>1e-6^1?!(+y(A(y(_+P)))>1e-6|+y(A(y(x+w)))>1e-6):0))break e;if(!((0|(n=n+1|0))<(0|i)))break}if(f[e+52>>2]==(0|i)&&!((0|i)>=(0|(r=i?i<<1:1)))){if(n=0,v=0,r&&(f[6257]=f[6257]+1,v=0|o[f[4968]](r<<4,16),i=f[e+48>>2]),(0|i)>=1)for(;M=(T=n<<4)+v|0,T=T+f[e+56>>2]|0,k=f[T+4>>2],f[M>>2]=f[T>>2],f[M+4>>2]=k,j=f[T+12>>2],f[M+8>>2]=f[T+8>>2],f[M+12>>2]=j,(0|i)!=(0|(n=n+1|0)););(i=f[e+56>>2])&&(h[e+60|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[e+56>>2]=0),f[e+56>>2]=v,a[e+60|0]=1,f[e+52>>2]=r,i=f[e+48>>2]}i=f[e+56>>2]+(i<<4)|0,f[i+12>>2]=0,d[i+8>>2]=s,d[i+4>>2]=x,d[i>>2]=_,f[e+48>>2]=f[e+48>>2]+1}if(O?u[O+2>>1]=E:(u[t>>1]=E,u[t+2>>1]=65535,He(t+16|0,t+8|0,t)),z)break;n=f[e+36>>2]}i=f[e+28>>2]}if(!((0|(E=E+1|0))<(0|i)))break}if((0|i)<1)n=0;else for(r=f[e+16>>2],M=f[e+36>>2],E=0;;){if(n=M+g(E,36)|0,(0|(v=f[n+4>>2]))>=3)for(U=v+-1|0,D=f[n+12>>2],B=O=r+(f[D>>2]<<4)|0,_=d[e+72>>2],C=d[e+68>>2],w=d[e+64>>2],n=1;T=r+(f[D+(n<<2)>>2]<<4)|0,s=d[T+8>>2],z=r+(f[D+((0|(n=n+1|0))%(0|v)<<2)>>2]<<4)|0,x=d[z+8>>2],P=d[O>>2],G=d[T>>2],V=y(P-G),b=d[O+4>>2],H=d[z+4>>2],F=y(b-H),W=d[T+4>>2],N=y(b-W),q=d[z>>2],Y=y(P-q),L=y(y(V*F)-y(N*Y)),K=N,N=d[B+8>>2],X=y(N-x),Q=y(N-s),F=y(y(K*X)-y(Q*F)),x=y(y(y(N+s)+x)*y(.3333333432674408)),s=y(y(Q*Y)-y(V*X)),s=y(y(S(y(y(L*L)+y(y(F*F)+y(s*s)))))*y(.5)),_=y(_+y(x*s)),d[e+72>>2]=_,C=y(C+y(y(y(H+y(b+W))*y(.3333333432674408))*s)),d[e+68>>2]=C,w=y(w+y(y(y(q+y(P+G))*y(.3333333432674408))*s)),d[e+64>>2]=w,I=y(I+s),(0|n)!=(0|U););if(n=1,(0|(E=E+1|0))==(0|i))break}}if(f[e+96>>2]=2139095039,s=y(y(1)/I),C=y(s*d[e+64>>2]),d[e+64>>2]=C,w=y(s*d[e+68>>2]),d[e+68>>2]=w,I=y(s*d[e+72>>2]),d[e+72>>2]=I,s=y(34028234663852886e22),x=y(34028234663852886e22),n)for(v=f[e+36>>2],r=0;n=v+g(r,36)|0,(_=y(A(y(d[n+32>>2]+y(y(y(C*d[n+20>>2])+y(w*d[n+24>>2]))+y(I*d[n+28>>2]))))))<x&&(d[e+96>>2]=_,x=_),(0|(r=r+1|0))!=(0|i););if((0|(r=f[e+8>>2]))<1)P=y(-34028234663852886e22),_=y(34028234663852886e22),C=y(-34028234663852886e22),w=y(-34028234663852886e22),I=y(34028234663852886e22);else for(v=f[e+16>>2],w=y(-34028234663852886e22),n=0,I=y(34028234663852886e22),C=y(-34028234663852886e22),P=y(-34028234663852886e22),_=y(34028234663852886e22);w=(b=d[8+(i=v+(n<<4)|0)>>2])>w?b:w,_=b<_?b:_,C=(b=d[i+4>>2])>C?b:C,s=b<s?b:s,P=(b=d[i>>2])>P?b:P,I=b<I?b:I,(0|r)!=(0|(n=n+1|0)););n=0,f[e+128>>2]=0,b=y(w-_),d[e+124>>2]=b,L=y(C-s),d[e+120>>2]=L,N=y(P-I),d[e+116>>2]=N,f[e+112>>2]=0,d[e+108>>2]=_+w,d[e+104>>2]=s+C,d[e+100>>2]=P+I,_=d[(v=(r=(i=N<L?L<b?2:1:(N<b)<<1)<<2)+(e+116|0)|0)>>2],s=y(x/y(1.7320507764816284)),d[e+84>>2]=s,d[e+88>>2]=s,d[e+80>>2]=s,r=r+(e+80|0)|0,x=y(d[v>>2]*y(.5)),d[r>>2]=x,_=y(y(y(_*y(.5))-s)*y(.0009765625));e:{t:{for(;;){if(Et(e))break t;if(x=y(x-_),d[r>>2]=x,1024==(0|(n=n+1|0)))break}d[e+84>>2]=s,d[e+88>>2]=s,d[e+80>>2]=s;break e}if(v=f[(n=(r=e+80|0)+((1<<(i=1<<i&3)&3)<<2)|0)>>2],r=f[(i=E=r+(i<<2)|0)>>2],_=y(y(d[e+96>>2]-s)*y(.0009765625)),d[i>>2]=_+d[i>>2],s=y(_+d[n>>2]),d[n>>2]=s,Et(e)){for(i=0;;){if(x=s,1024==(0|(i=i+1|0)))break e;if(r=f[E>>2],d[E>>2]=_+d[E>>2],s=y(_+d[n>>2]),d[n>>2]=s,!Et(e))break}c(x),v=l(0)}f[E>>2]=r,f[n>>2]=v}(e=f[t+88>>2])&&(h[t+92|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[t+88>>2]=0),f[t+88>>2]=0,a[t+92|0]=1,f[t+80>>2]=0,f[t+84>>2]=0,(e=f[t+68>>2])&&(h[t+72|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[t+68>>2]=0),f[t+68>>2]=0,a[t+72|0]=1,f[t+60>>2]=0,f[t+64>>2]=0,(e=f[t+48>>2])&&(h[t+52|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[t+48>>2]=0),f[t+48>>2]=0,a[t+52|0]=1,f[t+40>>2]=0,f[t+44>>2]=0,(e=f[t+28>>2])&&(h[t+32|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[t+28>>2]=0),R=t+96|0}function V(e,t,n,i,o,a,r,s,c){var l,_,u,p,m,v=y(0),x=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0);p=(u=f[e+16>>2])+g(i,244)|0,l=f[p+240>>2],m=g(n,244)+u|0,_=f[m+240>>2],f[r>>2]=f[a+28>>2],M=d[a+12>>2],U=d[a+36>>2],w=d[a+40>>2];e:if(6&(e=f[o+128>>2])){if(w=2&e?d[o+152>>2]:w,!(4&e))break e;U=d[o+156>>2]}else 8&e&&(x=y(M*d[o+152>>2]),v=y(b(y(x+d[o+156>>2]),y(1.1920928955078125e-7))),U=y(x/v),w=y(y(1)/v));v=d[o+68>>2],x=d[s>>2],S=d[s+4>>2],E=d[o+64>>2],T=y(y(v*x)-y(S*E)),C=d[s+8>>2],N=y(C*E),E=d[o+72>>2],R=y(N-y(E*x)),O=y(y(S*E)-y(C*v)),x=y(0),S=y(0),_&&(D=y(y(y(y(O*d[_+356>>2])+y(R*d[_+360>>2]))+y(T*d[_+364>>2]))*d[_+612>>2]),S=y(y(y(y(O*d[_+340>>2])+y(R*d[_+344>>2]))+y(T*d[_+348>>2]))*d[_+608>>2]),x=y(y(y(y(O*d[_+324>>2])+y(R*d[_+328>>2]))+y(T*d[_+332>>2]))*d[_+604>>2])),d[t+64>>2]=x,f[t+76>>2]=0,d[t+72>>2]=D,d[t+68>>2]=S,v=d[o+68>>2],E=d[c>>2],C=d[c+4>>2],P=d[o+64>>2],z=y(y(v*E)-y(C*P)),N=d[c+8>>2],L=y(N*P),P=d[o+72>>2],F=y(L-y(P*E)),P=y(y(C*P)-y(N*v)),E=y(0),C=y(0),l&&(v=y(-F),C=y(y(y(y(d[l+360>>2]*v)-y(P*d[l+356>>2]))-y(z*d[l+364>>2]))*d[l+612>>2]),I=y(y(y(y(d[l+328>>2]*v)-y(P*d[l+324>>2]))-y(z*d[l+332>>2]))*d[l+604>>2]),E=y(y(y(y(d[l+344>>2]*v)-y(P*d[l+340>>2]))-y(z*d[l+348>>2]))*d[l+608>>2])),d[t+80>>2]=I,f[t+92>>2]=0,d[t+88>>2]=C,d[t+84>>2]=E,v=y(0),_&&(v=d[s+8>>2],N=d[s+4>>2],B=y(y(y(S*v)-y(D*N))*d[o+64>>2]),L=D,D=d[s>>2],v=y(d[_+404>>2]+y(y(B+y(y(y(L*D)-y(v*x))*d[o+68>>2]))+y(y(y(N*x)-y(S*D))*d[o+72>>2])))),e=t,B=d[r>>2],D=y(y(1)/M),S=N=y(D*w),l?(x=d[c+4>>2],M=d[c+8>>2],w=y(y(y(C*x)-y(E*M))*d[o+64>>2]),L=C,C=d[c>>2],C=y(d[l+404>>2]+y(y(w+y(y(y(I*M)-y(L*C))*d[o+68>>2]))+y(y(y(E*C)-y(I*x))*d[o+72>>2])))):C=y(0),d[e+108>>2]=B/y(S+y(v+C)),_?(r=f[4+(e=o- -64|0)>>2],f[t+16>>2]=f[e>>2],f[t+20>>2]=r,r=f[e+12>>2],f[t+24>>2]=f[e+8>>2],f[t+28>>2]=r,f[t+12>>2]=0,d[t+8>>2]=T,d[t+4>>2]=R,d[t>>2]=O):(f[t>>2]=0,f[t+4>>2]=0,f[t+24>>2]=0,f[t+28>>2]=0,f[t+16>>2]=0,f[t+20>>2]=0,f[t+8>>2]=0,f[t+12>>2]=0),l?(v=d[o+64>>2],x=d[o+68>>2],S=d[o+72>>2],f[t+60>>2]=0,f[t+44>>2]=0,d[t+40>>2]=-z,d[t+36>>2]=-F,d[t+32>>2]=-P,d[t+56>>2]=-S,d[t+52>>2]=-x,d[t+48>>2]=-v):(f[t+32>>2]=0,f[t+36>>2]=0,f[t+56>>2]=0,f[t+60>>2]=0,f[t+48>>2]=0,f[t+52>>2]=0,f[t+40>>2]=0,f[t+44>>2]=0),F=d[a+64>>2],L=d[o+80>>2],I=y(0),x=y(0),S=y(0),E=y(0),_&&(v=d[s+4>>2],x=d[_+388>>2],C=d[_+392>>2],S=d[s>>2],E=y(y(y(v*x)-y(C*S))+d[_+380>>2]),w=d[_+396>>2],T=d[s+8>>2],S=y(d[_+376>>2]+y(y(w*S)-y(T*x))),x=y(y(y(C*T)-y(w*v))+d[_+372>>2])),C=y(0),T=y(0),l&&(v=d[c+4>>2],C=d[l+388>>2],w=d[l+392>>2],I=d[c>>2],T=y(y(y(v*C)-y(w*I))+d[l+380>>2]),R=d[l+396>>2],P=y(R*I),I=d[c+8>>2],C=y(d[l+376>>2]+y(P-y(I*C))),I=y(y(y(w*I)-y(R*v))+d[l+372>>2])),v=d[o+72>>2],w=d[o+64>>2],R=d[o+68>>2],f[t+104>>2]=f[o+84>>2],v=y(y(y(w*y(x-I))+y(R*y(S-C)))+y(v*y(E-T))),I=y(A(v))<d[a+96>>2]?y(0):y(d[o+96>>2]*y(-v));e:if(4&h[a+72|0]){if(v=y(d[o+132>>2]*d[a+68>>2]),d[t+100>>2]=v,!_|!f[m+240>>2]||(x=d[_+416>>2],S=d[t+24>>2],E=d[_+412>>2],C=d[t+20>>2],e=g(n,244)+u|0,d[e+64>>2]=y(d[e+112>>2]*y(v*y(y(d[t+16>>2]*d[e+128>>2])*d[_+408>>2])))+d[e+64>>2],d[e+68>>2]=y(y(v*y(E*y(C*d[e+132>>2])))*d[e+116>>2])+d[e+68>>2],d[e+72>>2]=y(y(v*y(x*y(S*d[e+136>>2])))*d[e+120>>2])+d[e+72>>2],x=d[t+72>>2],S=d[t+68>>2],d[e+80>>2]=y(y(v*d[e+96>>2])*d[t+64>>2])+d[e+80>>2],E=d[e+104>>2],d[e+84>>2]=y(S*y(v*d[e+100>>2]))+d[e+84>>2],d[e+88>>2]=y(x*y(v*E))+d[e+88>>2]),!l|!f[p+240>>2])break e;x=d[l+416>>2],S=d[t+56>>2],E=d[l+412>>2],C=d[t+52>>2],w=d[t+88>>2],T=d[t+84>>2],R=d[t+80>>2],e=g(i,244)+u|0,v=y(-d[t+100>>2]),d[e+64>>2]=d[e+64>>2]-y(d[e+112>>2]*y(y(y(d[e+128>>2]*d[t+48>>2])*d[l+408>>2])*v)),d[e+68>>2]=d[e+68>>2]-y(y(y(E*y(C*d[e+132>>2]))*v)*d[e+116>>2]),d[e+72>>2]=d[e+72>>2]-y(y(y(x*y(S*d[e+136>>2]))*v)*d[e+120>>2]),d[e+80>>2]=d[e+80>>2]-y(R*y(d[e+96>>2]*v)),x=d[e+104>>2],d[e+84>>2]=d[e+84>>2]-y(T*y(d[e+100>>2]*v)),d[e+88>>2]=d[e+88>>2]-y(w*y(x*v))}else f[t+100>>2]=0;f[t+96>>2]=0,S=y(0),E=y(0),C=y(0),T=y(0),R=y(0),O=y(0),z=y(0),f[m+240>>2]&&(e=g(n,244)+u|0,z=d[e+224>>2],T=d[e+208>>2],R=d[e+232>>2],O=d[e+228>>2],C=d[e+212>>2],E=d[e+216>>2]),x=y(0),P=y(0),w=y(0),M=y(0),v=y(0),f[p+240>>2]&&(e=g(i,244)+u|0,v=d[e+224>>2],S=d[e+208>>2],w=d[e+232>>2],M=d[e+228>>2],P=d[e+216>>2],x=d[e+212>>2]),e=g(n,244)+u|0,C=y(y(y(y(y(T+d[e+176>>2])*d[t+16>>2])+y(y(C+d[e+180>>2])*d[t+20>>2]))+y(y(E+d[e+184>>2])*d[t+24>>2]))+y(y(y(y(z+d[e+192>>2])*d[t>>2])+y(y(O+d[e+196>>2])*d[t+4>>2]))+y(y(R+d[e+200>>2])*d[t+8>>2]))),e=g(i,244)+u|0,x=y((I<=y(0)?y(0):I)-y(C+y(y(y(y(y(S+d[e+176>>2])*d[t+48>>2])+y(y(x+d[e+180>>2])*d[t+52>>2]))+y(y(P+d[e+184>>2])*d[t+56>>2]))+y(y(y(y(v+d[e+192>>2])*d[t+32>>2])+y(y(M+d[e+196>>2])*d[t+36>>2]))+y(y(w+d[e+200>>2])*d[t+40>>2]))))),S=y(0),(v=y(L+F))>y(0)?x=y(x-y(D*v)):S=y(D*y(U*y(-v))),E=d[t+108>>2],x=y(x*E),S=y(S*E),e=t,v>d[a+56>>2]^1&&f[a+52>>2]||(x=y(S+x),S=y(0)),d[e+128>>2]=S,d[t+112>>2]=x,f[t+120>>2]=0,f[t+124>>2]=1343554297,d[t+116>>2]=N*E}function H(e,t,n,i,r){e|=0,t|=0,n|=0,i|=0,r|=0;var s,c,l,_=0,u=0,p=y(0),m=y(0),v=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=0,T=0,P=0,I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=0,q=0;if(R=s=R-176|0,T=h[e+68|0],c=f[(l=T?n:t)+4>>2],f[c+72>>2]!=f[e+80>>2]){if((0|(w=f[e+52>>2]))>=1)for(;(u=f[(P=_<<2)+f[e+60>>2]>>2])&&(o[f[f[u>>2]>>2]](u),u=f[e+4>>2],o[f[f[u>>2]+60>>2]](u,f[P+f[e+60>>2]>>2])),(0|w)!=(0|(_=_+1|0)););Kt(e,t,n),f[e+80>>2]=f[c+72>>2]}if(u=f[e+52>>2]){if(w=f[c+68>>2],_=f[e+60>>2],P=f[e+4>>2],f[s+172>>2]=f[e+72>>2],f[s+168>>2]=_,f[s+164>>2]=r,f[s+160>>2]=i,f[s+156>>2]=P,i=T?t:n,f[s+152>>2]=i,f[s+148>>2]=l,f[s+144>>2]=10476,(0|(_=f[e+32>>2]))<=-1){for(f[e+36>>2]<=-1&&((t=f[e+40>>2])&&(h[e+44|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+40>>2]=0),f[e+36>>2]=0,f[e+40>>2]=0,a[e+44|0]=1);f[f[e+40>>2]+(_<<2)>>2]=0,n=(t=_+1|0)>>>0>=_>>>0,_=t,n;);u=f[e+52>>2]}if(f[e+32>>2]=0,(0|u)>=1)for(T=e+28|0,n=0;;){if(t=f[f[e+60>>2]+(n<<2)>>2]){if(o[f[f[t>>2]+16>>2]](t,T),u=0,(0|(_=f[e+32>>2]))>0)for(;t=f[f[e+40>>2]+(u<<2)>>2],f[t+844>>2]&&(f[r+4>>2]=t,_=(0|(P=f[t+836>>2]))==(0|(W=f[f[r+8>>2]+8>>2])),q=t,t=f[f[r+12>>2]+8>>2],Se(q,(_?P:t)+4|0,(_?t:W)+4|0),f[r+4>>2]=0,_=f[e+32>>2]),(0|(u=u+1|0))<(0|_););if((0|_)<=-1)for(f[e+36>>2]<=-1&&((t=f[e+40>>2])&&(h[e+44|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+40>>2]=0),a[e+44|0]=1,f[e+36>>2]=0,f[e+40>>2]=0);f[f[e+40>>2]+(_<<2)>>2]=0,u=(t=_+1|0)>>>0>=_>>>0,_=t,u;);f[e+32>>2]=0,u=f[e+52>>2]}if(!((0|(n=n+1|0))<(0|u)))break}e:if(w)t=f[l+12>>2],I=d[t+52>>2],N=d[t+56>>2],n=f[i+12>>2],D=d[n+52>>2],M=d[n+56>>2],p=d[t+20>>2],m=d[t+36>>2],O=d[n+20>>2],z=d[n+36>>2],L=d[n+24>>2],v=d[t+24>>2],F=d[n+40>>2],A=d[t+40>>2],U=d[n+32>>2],x=d[t+32>>2],B=d[n>>2],b=d[t>>2],k=d[n+16>>2],C=d[t+16>>2],j=d[t+48>>2],G=d[n+48>>2],S=d[t+4>>2],V=d[n+4>>2],H=d[n+8>>2],E=d[t+8>>2],f[s+108>>2]=0,f[s+92>>2]=0,f[s+76>>2]=0,d[s+88>>2]=y(y(E*H)+y(v*L))+y(A*F),d[s+84>>2]=y(y(E*V)+y(v*O))+y(A*z),d[s+72>>2]=y(y(S*H)+y(p*L))+y(m*F),d[s+68>>2]=y(y(S*V)+y(p*O))+y(m*z),I=y(-I),d[s+104>>2]=y(y(y(v*I)-y(E*j))-y(A*N))+y(y(y(E*G)+y(v*D))+y(A*M)),d[s+100>>2]=y(y(y(p*I)-y(S*j))-y(m*N))+y(y(y(S*G)+y(p*D))+y(m*M)),f[s+60>>2]=0,d[s+48>>2]=y(y(b*B)+y(C*k))+y(x*U),d[s+80>>2]=y(y(E*B)+y(v*k))+y(A*U),d[s+64>>2]=y(y(S*B)+y(p*k))+y(m*U),d[s+56>>2]=y(y(b*H)+y(C*L))+y(x*F),d[s+52>>2]=y(y(b*V)+y(C*O))+y(x*z),d[s+96>>2]=y(y(y(C*I)-y(b*j))-y(x*N))+y(y(y(b*G)+y(C*D))+y(x*M)),t=f[i+4>>2],o[f[f[t>>2]+8>>2]](t,s+48|0,s+128|0,s+112|0),p=d[r+32>>2],d[s+128>>2]=d[s+128>>2]-p,d[s+132>>2]=d[s+132>>2]-p,d[s+136>>2]=d[s+136>>2]-p,d[s+112>>2]=p+d[s+112>>2],d[s+116>>2]=p+d[s+116>>2],d[s+120>>2]=p+d[s+120>>2],t=f[s+140>>2],f[s+24>>2]=f[s+136>>2],f[s+28>>2]=t,t=f[s+124>>2],f[s+40>>2]=f[s+120>>2],f[s+44>>2]=t,t=f[s+116>>2],f[s+32>>2]=f[s+112>>2],f[s+36>>2]=t,t=f[s+132>>2],f[s+16>>2]=f[s+128>>2],f[s+20>>2]=t,function(e,t,n,i){var r=0,s=0,c=0,l=0,_=y(0),u=y(0),p=y(0),m=y(0),v=y(0),g=y(0);if(e){if(_=d[t+24>>2],u=d[t+20>>2],s=f[n+8>>2],p=d[t+16>>2],m=d[t+8>>2],v=d[t+4>>2],g=d[t>>2],(0|(t=f[n+4>>2]))<=-1)for((0|s)<=-1&&((r=f[n+12>>2])&&(h[n+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[n+12>>2]=0),a[n+16|0]=1,f[n+8>>2]=0,f[n+12>>2]=0,s=0);f[f[n+12>>2]+(t<<2)>>2]=0,c=(r=t+1|0)>>>0>=t>>>0,t=r,c;);if(r=0,f[n+4>>2]=0,(0|s)<=63){if(f[6257]=f[6257]+1,s=0|o[f[4968]](256,16),(0|(r=f[n+4>>2]))>=1)for(t=0;f[(c=t<<2)+s>>2]=f[c+f[n+12>>2]>>2],(0|r)!=(0|(t=t+1|0)););(t=f[n+12>>2])&&(h[n+16|0]&&(t&&(f[6258]=f[6258]+1,o[f[4969]](t)),r=f[n+4>>2]),f[n+12>>2]=0),f[n+12>>2]=s,a[n+16|0]=1,f[n+8>>2]=64,s=64}if((0|r)==(0|s))if((0|s)>=(0|(l=s<<1)))r=s;else{t=0;t:{if(s){if(f[6257]=f[6257]+1,c=0|o[f[4968]](s<<3,16),(0|(r=f[n+4>>2]))<1)break t}else c=0,r=s;for(;f[(s=t<<2)+c>>2]=f[s+f[n+12>>2]>>2],(0|r)!=(0|(t=t+1|0)););}(t=f[n+12>>2])&&(h[n+16|0]&&(t&&(f[6258]=f[6258]+1,o[f[4969]](t)),r=f[n+4>>2]),f[n+12>>2]=0),f[n+12>>2]=c,a[n+16|0]=1,f[n+8>>2]=l}for(f[f[n+12>>2]+(r<<2)>>2]=e,r=r+1|0,f[n+4>>2]=r;;){if(c=f[n+12>>2],e=f[c+((t=r+-1|0)<<2)>>2],f[n+4>>2]=t,d[e>>2]<=p)if(d[e+16>>2]>=g)if(d[e+4>>2]<=u)if(d[e+20>>2]>=v)if(d[e+8>>2]<=_)if(d[e+24>>2]>=m)if(f[e+40>>2]){if((0|(s=f[n+8>>2]))==(0|t))if((0|r)>(0|(s=t?t<<1:1)))s=t;else{if(r=0,c=0,s&&(f[6257]=f[6257]+1,c=0|o[f[4968]](s<<2,16),t=f[n+4>>2]),(0|t)>=1)for(;f[(l=r<<2)+c>>2]=f[l+f[n+12>>2]>>2],(0|(r=r+1|0))!=(0|t););(r=f[n+12>>2])&&(h[n+16|0]&&(r&&(f[6258]=f[6258]+1,o[f[4969]](r)),t=f[n+4>>2]),f[n+12>>2]=0),f[n+12>>2]=c,a[n+16|0]=1,f[n+8>>2]=s}if(f[(t<<2)+c>>2]=f[e+36>>2],t=t+1|0,f[n+4>>2]=t,(0|t)==(0|s)){if((0|s)<(0|(r=s?s<<1:1))){if(t=0,c=0,r&&(f[6257]=f[6257]+1,c=0|o[f[4968]](r<<2,16),s=f[n+4>>2]),(0|s)>=1)for(;f[(l=t<<2)+c>>2]=f[l+f[n+12>>2]>>2],(0|s)!=(0|(t=t+1|0)););(t=f[n+12>>2])&&(h[n+16|0]&&(t&&(f[6258]=f[6258]+1,o[f[4969]](t)),s=f[n+4>>2]),f[n+12>>2]=0),f[n+12>>2]=c,a[n+16|0]=1,f[n+8>>2]=r}t=s}f[f[n+12>>2]+(t<<2)>>2]=f[e+40>>2],r=t+1|0,f[n+4>>2]=r}else o[f[f[i>>2]+12>>2]](i,e),r=f[n+4>>2];else r=t;else r=t;else r=t;else r=t;else r=t;else r=t;if(!((0|r)>0))break}}}(f[w>>2],s+16|0,e+8|0,s+144|0);else{if((0|u)<1)break e;for(_=0;be(s+144|0,f[64+(f[c+28>>2]+g(_,80)|0)>>2],_),(0|u)!=(0|(_=_+1|0)););}if(w=f[e+52>>2],(0|(_=f[e+32>>2]))<=-1)for(f[e+36>>2]<=-1&&((t=f[e+40>>2])&&(h[e+44|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+40>>2]=0),f[e+36>>2]=0,f[e+40>>2]=0,a[e+44|0]=1);f[f[e+40>>2]+(_<<2)>>2]=0,n=(t=_+1|0)>>>0>=_>>>0,_=t,n;);if(f[e+32>>2]=0,!((0|w)<1))for(r=0;f[(_=r<<2)+f[e+60>>2]>>2]&&(t=f[c+28>>2]+g(r,80)|0,T=f[t+64>>2],n=f[l+12>>2],V=d[n+52>>2],H=d[n+56>>2],N=d[t+48>>2],D=d[t+52>>2],M=d[t+56>>2],O=d[t+4>>2],z=d[t+20>>2],L=d[t+36>>2],F=d[t+8>>2],U=d[t+24>>2],B=d[t+40>>2],p=d[n+20>>2],m=d[n+24>>2],k=d[t>>2],j=d[t+16>>2],v=d[n+36>>2],G=d[t+32>>2],A=d[n+40>>2],I=d[n+48>>2],x=d[n+8>>2],b=d[n>>2],C=d[n+4>>2],S=d[n+16>>2],E=d[n+32>>2],u=0,f[s+108>>2]=0,f[s+92>>2]=0,f[s+76>>2]=0,f[s+60>>2]=0,d[s+80>>2]=y(y(E*k)+y(v*j))+y(A*G),d[s+64>>2]=y(y(S*k)+y(p*j))+y(m*G),d[s+48>>2]=y(y(b*k)+y(C*j))+y(x*G),d[s+88>>2]=y(y(E*F)+y(v*U))+y(A*B),d[s+84>>2]=y(y(E*O)+y(v*z))+y(A*L),d[s+72>>2]=y(y(S*F)+y(p*U))+y(m*B),d[s+68>>2]=y(y(S*O)+y(p*z))+y(m*L),d[s+56>>2]=y(y(b*F)+y(C*U))+y(x*B),d[s+52>>2]=y(y(b*O)+y(C*z))+y(x*L),d[s+104>>2]=H+y(y(y(E*N)+y(v*D))+y(A*M)),d[s+100>>2]=V+y(y(y(S*N)+y(p*D))+y(m*M)),d[s+96>>2]=I+y(y(y(b*N)+y(C*D))+y(x*M)),o[f[f[T>>2]+8>>2]](T,s+48|0,s+16|0,s+128|0),t=f[i+4>>2],o[f[f[t>>2]+8>>2]](t,f[i+12>>2],s+112|0,s),t=0,d[s+16>>2]>d[s>>2]||(t=0,d[s+128>>2]<d[s+112>>2]||(t=1)),(1^(u=d[s+136>>2]<d[s+120>>2]|d[s+24>>2]>d[s+8>>2]?u:t)||d[s+132>>2]<d[s+116>>2]|d[s+20>>2]>d[s+4>>2])&&(t=f[_+f[e+60>>2]>>2],o[f[f[t>>2]>>2]](t),t=f[e+4>>2],o[f[f[t>>2]+60>>2]](t,f[_+f[e+60>>2]>>2]),f[_+f[e+60>>2]>>2]=0)),(0|w)!=(0|(r=r+1|0)););}R=s+176|0}function W(e){var t,n,i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=0,A=y(0),x=y(0),b=y(0),C=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0);R=t=R-48|0,p=d[e+1332>>2],A=d[e+1316>>2],x=d[e+1336>>2],b=d[e+1304>>2],C=d[e+1320>>2],E=d[e+1340>>2],w=d[e+1308>>2],T=d[e+1324>>2],l=d[e+1244>>2],_=d[e+1256>>2],c=d[e+1272>>2],r=d[e+1240>>2],a=d[e+1268>>2],u=d[e+1260>>2],s=d[e+1252>>2],h=d[e+1276>>2],P=d[e+1300>>2],i=d[e+1236>>2],f[t+44>>2]=0,f[t+28>>2]=0,D=y(y(_*h)-y(u*c)),m=y(y(u*a)-y(h*s)),v=y(y(c*s)-y(_*a)),o=y(y(1)/y(y(y(i*D)+y(r*m))+y(v*l))),v=y(v*o),I=y(y(y(a*r)-y(c*i))*o),N=y(y(y(_*i)-y(s*r))*o),d[t+40>>2]=y(y(w*v)+y(T*I))+y(E*N),d[t+36>>2]=y(y(b*v)+y(I*C))+y(N*x),m=y(m*o),a=y(y(y(h*i)-y(a*l))*o),i=y(y(y(s*l)-y(u*i))*o),d[t+24>>2]=y(y(w*m)+y(T*a))+y(E*i),d[t+20>>2]=y(y(b*m)+y(a*C))+y(i*x),f[t+12>>2]=0,d[t+32>>2]=y(p*N)+y(y(P*v)+y(A*I)),d[t+16>>2]=y(p*i)+y(y(P*m)+y(A*a)),i=y(D*o),c=y(y(y(c*l)-y(h*r))*o),o=y(y(y(u*r)-y(_*l))*o),d[t+8>>2]=y(y(w*i)+y(T*c))+y(E*o),d[t+4>>2]=y(y(i*b)+y(c*C))+y(o*x),d[t>>2]=y(p*o)+y(y(P*i)+y(A*c)),n=e;e:{t:{n:{i:{o:{a:{r:{s:{if((g=f[e+1232>>2])>>>0<=5){c:{switch(g-1|0){default:Ai(t,e+1364|0);break c;case 0:vi(t,e+1364|0);break c;case 1:Mi(t,e+1364|0);break c;case 2:xi(t,e+1364|0);break c;case 3:Ii(t,e+1364|0);break c;case 4:}Ei(t,e+1364|0)}g=f[e+1232>>2]}if(g>>>0<=5)switch(g-1|0){case 4:break n;case 3:break i;case 2:break o;case 1:break a;case 0:break r;default:break s}l=d[e+1420>>2],r=d[e+1416>>2],i=d[e+1412>>2],_=d[e+1404>>2],c=d[e+1400>>2],a=d[e+1396>>2],u=d[e+1388>>2],s=d[e+1384>>2],o=d[e+1380>>2];break e}f[e+1408>>2]=0,f[e+1424>>2]=0,f[e+1392>>2]=0,o=d[e+1316>>2],s=d[e+1244>>2],r=d[e+1300>>2],h=d[e+1260>>2],_=y(y(o*s)-y(r*h)),d[e+1404>>2]=_,p=d[e+1276>>2],i=d[e+1332>>2],c=y(y(r*p)-y(s*i)),d[e+1400>>2]=c,a=y(y(i*h)-y(o*p)),d[e+1396>>2]=a,l=y(y(r*c)-y(o*a)),d[e+1420>>2]=l,r=y(y(i*a)-y(r*_)),d[e+1416>>2]=r,i=y(y(o*_)-y(i*c)),d[e+1412>>2]=i,u=y(y(h*a)-y(s*c)),d[e+1388>>2]=u,s=y(y(s*_)-y(p*a)),d[e+1384>>2]=s,o=y(y(p*c)-y(h*_));break t}f[e+1424>>2]=0,f[e+1408>>2]=0,f[e+1392>>2]=0,o=d[e+1300>>2],h=d[e+1256>>2],a=d[e+1316>>2],s=d[e+1240>>2],l=y(y(o*h)-y(a*s)),d[e+1420>>2]=l,u=d[e+1332>>2],p=d[e+1272>>2],r=y(y(s*u)-y(o*p)),d[e+1416>>2]=r,i=y(y(a*p)-y(u*h)),d[e+1412>>2]=i,_=y(y(a*i)-y(o*r)),d[e+1404>>2]=_,c=y(y(o*l)-y(u*i)),d[e+1400>>2]=c,a=y(y(u*r)-y(a*l)),d[e+1396>>2]=a,u=y(y(s*r)-y(h*i)),d[e+1388>>2]=u,s=y(y(p*i)-y(s*l)),d[e+1384>>2]=s,o=y(y(h*l)-y(p*r));break t}f[e+1424>>2]=0,f[e+1408>>2]=0,f[e+1392>>2]=0,r=d[e+1304>>2],a=d[e+1260>>2],i=d[e+1320>>2],c=d[e+1244>>2],u=y(y(r*a)-y(i*c)),d[e+1388>>2]=u,_=d[e+1336>>2],h=d[e+1276>>2],s=y(y(c*_)-y(r*h)),d[e+1384>>2]=s,o=y(y(i*h)-y(_*a)),d[e+1380>>2]=o,l=y(y(i*o)-y(r*s)),d[e+1420>>2]=l,r=y(y(r*u)-y(_*o)),d[e+1416>>2]=r,i=y(y(_*s)-y(i*u)),d[e+1412>>2]=i,_=y(y(c*s)-y(a*o)),d[e+1404>>2]=_,c=y(y(h*o)-y(c*u)),d[e+1400>>2]=c,a=y(y(a*u)-y(h*s)),d[e+1396>>2]=a;break e}f[e+1424>>2]=0,f[e+1408>>2]=0,f[e+1392>>2]=0,o=d[e+1236>>2],h=d[e+1320>>2],a=d[e+1252>>2],s=d[e+1304>>2],l=y(y(o*h)-y(a*s)),d[e+1420>>2]=l,u=d[e+1268>>2],p=d[e+1336>>2],r=y(y(s*u)-y(o*p)),d[e+1416>>2]=r,i=y(y(a*p)-y(u*h)),d[e+1412>>2]=i,_=y(y(a*i)-y(o*r)),d[e+1404>>2]=_,c=y(y(o*l)-y(u*i)),d[e+1400>>2]=c,a=y(y(u*r)-y(a*l)),d[e+1396>>2]=a,u=y(y(s*r)-y(h*i)),d[e+1388>>2]=u,s=y(y(p*i)-y(s*l)),d[e+1384>>2]=s,o=y(y(h*l)-y(p*r));break t}f[e+1424>>2]=0,f[e+1408>>2]=0,f[e+1392>>2]=0,r=d[e+1240>>2],a=d[e+1324>>2],i=d[e+1256>>2],c=d[e+1308>>2],u=y(y(r*a)-y(i*c)),d[e+1388>>2]=u,_=d[e+1272>>2],h=d[e+1340>>2],s=y(y(c*_)-y(r*h)),d[e+1384>>2]=s,o=y(y(i*h)-y(_*a)),d[e+1380>>2]=o,l=y(y(i*o)-y(r*s)),d[e+1420>>2]=l,r=y(y(r*u)-y(_*o)),d[e+1416>>2]=r,i=y(y(_*s)-y(i*u)),d[e+1412>>2]=i,_=y(y(c*s)-y(a*o)),d[e+1404>>2]=_,c=y(y(h*o)-y(c*u)),d[e+1400>>2]=c,a=y(y(a*u)-y(h*s)),d[e+1396>>2]=a;break e}f[e+1408>>2]=0,f[e+1424>>2]=0,f[e+1392>>2]=0,o=d[e+1252>>2],s=d[e+1308>>2],r=d[e+1236>>2],h=d[e+1324>>2],_=y(y(o*s)-y(r*h)),d[e+1404>>2]=_,p=d[e+1340>>2],i=d[e+1268>>2],c=y(y(r*p)-y(s*i)),d[e+1400>>2]=c,a=y(y(i*h)-y(o*p)),d[e+1396>>2]=a,l=y(y(r*c)-y(o*a)),d[e+1420>>2]=l,r=y(y(i*a)-y(r*_)),d[e+1416>>2]=r,i=y(y(o*_)-y(i*c)),d[e+1412>>2]=i,u=y(y(h*a)-y(s*c)),d[e+1388>>2]=u,s=y(y(s*_)-y(p*a)),d[e+1384>>2]=s,o=y(y(p*c)-y(h*_))}d[n+1380>>2]=o}h=l,l=y(y(1)/y(S(y(y(y(i*i)+y(r*r))+y(l*l))))),d[e+1420>>2]=h*l,d[e+1416>>2]=r*l,d[e+1412>>2]=i*l,l=y(y(1)/y(S(y(y(y(a*a)+y(c*c))+y(_*_))))),d[e+1404>>2]=_*l,d[e+1400>>2]=c*l,d[e+1396>>2]=a*l,l=y(y(1)/y(S(y(y(y(o*o)+y(s*s))+y(u*u))))),d[e+1388>>2]=u*l,d[e+1384>>2]=s*l,d[e+1380>>2]=o*l,R=t+48|0}function q(e,t,n,i,a,r){e|=0,t|=0,n|=0,i|=0,a|=0,r|=0;var s,c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=0,x=y(0),b=y(0),C=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=0,B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=y(0),J=y(0),$=y(0),ee=y(0),te=y(0),ne=y(0),ie=0,oe=0;R=s=R-96|0,to(f[e+4>>2]),X=d[i+40>>2],Q=d[i+36>>2],K=d[i+24>>2],Z=d[i+20>>2],B=d[t+20>>2],k=d[t+36>>2],j=d[t+24>>2],P=d[t+52>>2],l=d[n+52>>2],I=d[i+52>>2],h=d[a+52>>2],G=d[t+40>>2],N=d[t+56>>2],p=d[n+56>>2],D=d[i+56>>2],c=d[a+56>>2],J=d[i+32>>2],$=d[i+16>>2],ee=d[i+8>>2],te=d[i+4>>2],ne=d[i>>2],V=d[t>>2],H=d[t+16>>2],W=d[t+32>>2],q=d[t+4>>2],Y=d[t+8>>2],M=d[t+48>>2],_=d[n+48>>2],O=d[i+48>>2],u=d[a+48>>2],A=f[e+8>>2],f[s+60>>2]=0,w=y(y(l-P)-y(h-I)),l=y(-w),x=y(y(_-M)-y(u-O)),b=y(y(p-N)-y(c-D)),d[s+56>>2]=y(y(j*l)-y(Y*x))-y(G*b),d[s+52>>2]=y(y(B*l)-y(x*q))-y(b*k),d[s+48>>2]=y(y(H*l)-y(x*V))-y(b*W),o[f[f[A>>2]+64>>2]](s+80|0,A,s+48|0),c=d[t+52>>2],_=d[t+24>>2],u=d[t+20>>2],l=d[t+56>>2],p=d[t+40>>2],h=d[t+36>>2],m=d[t+48>>2],v=d[t+8>>2],g=d[t>>2],E=d[t+4>>2],T=d[t+16>>2],C=d[t+32>>2],f[s+76>>2]=0,z=l,l=d[s+80>>2],L=h,h=d[s+84>>2],F=p,p=d[s+88>>2],d[s+72>>2]=z+y(y(y(C*l)+y(L*h))+y(F*p)),d[s+68>>2]=c+y(y(y(l*T)+y(h*u))+y(p*_)),d[s+64>>2]=m+y(y(y(l*g)+y(h*E))+y(p*v)),A=f[e+12>>2],l=d[i+20>>2],h=d[i+36>>2],p=d[i+24>>2],c=d[i+40>>2],_=d[i>>2],u=d[i+16>>2],m=d[i+32>>2],v=d[i+4>>2],g=d[i+8>>2],f[s+28>>2]=0,d[s+24>>2]=y(y(x*g)+y(w*p))+y(b*c),d[s+20>>2]=y(y(x*v)+y(w*l))+y(b*h),d[s+16>>2]=y(y(x*_)+y(w*u))+y(b*m),o[f[f[A>>2]+64>>2]](s+32|0,A,s+16|0),c=d[i+52>>2],_=d[i+24>>2],u=d[i+20>>2],l=d[i+56>>2],p=d[i+40>>2],h=d[i+36>>2],m=d[i+16>>2],v=d[i+48>>2],g=d[i+8>>2],E=d[i>>2],T=d[i+4>>2],C=d[i+32>>2],f[s+60>>2]=0,f[s+92>>2]=0,z=l,l=d[s+32>>2],L=h,h=d[s+36>>2],F=p,p=d[s+40>>2],C=y(z+y(y(y(C*l)+y(L*h))+y(F*p))),d[s+56>>2]=C,v=y(v+y(y(y(l*E)+y(h*T))+y(p*g))),d[s+48>>2]=v,l=y(c+y(y(y(l*m)+y(h*u))+y(p*_))),d[s+52>>2]=l,c=y(d[s+68>>2]-l),d[s+84>>2]=c,_=y(d[s+64>>2]-v),d[s+80>>2]=_,u=y(d[s+72>>2]-C),d[s+88>>2]=u,l=y(0),h=y(0),p=y(0),m=y(0);e:{t:if(y(y(y(_*_)+y(c*c))+y(u*u))>y(9999999747378752e-20))for(A=32;;){if(!A)break t;if(U=f[e+8>>2],f[s+12>>2]=0,c=y(-d[s+84>>2]),_=d[s+80>>2],u=d[s+88>>2],d[s+8>>2]=y(y(j*c)-y(Y*_))-y(G*u),d[s+4>>2]=y(y(B*c)-y(q*_))-y(k*u),d[s>>2]=y(y(H*c)-y(V*_))-y(W*u),o[f[f[U>>2]+64>>2]](s+16|0,U,s),f[s+76>>2]=0,c=d[s+16>>2],_=d[s+20>>2],u=d[s+24>>2],d[s+72>>2]=N+y(y(y(W*c)+y(k*_))+y(G*u)),d[s+68>>2]=P+y(y(y(H*c)+y(B*_))+y(j*u)),d[s+64>>2]=M+y(y(y(V*c)+y(q*_))+y(Y*u)),U=f[e+12>>2],f[s+12>>2]=0,c=d[s+80>>2],_=d[s+84>>2],u=d[s+88>>2],d[s+8>>2]=y(y(ee*c)+y(K*_))+y(X*u),d[s+4>>2]=y(y(te*c)+y(Z*_))+y(Q*u),d[s>>2]=y(y(ne*c)+y($*_))+y(J*u),o[f[f[U>>2]+64>>2]](s+16|0,U,s),f[s+60>>2]=0,f[s+44>>2]=0,c=d[s+16>>2],_=d[s+20>>2],u=d[s+24>>2],v=y(D+y(y(y(J*c)+y(Q*_))+y(X*u))),d[s+56>>2]=v,v=y(d[s+72>>2]-v),d[s+40>>2]=v,g=y(I+y(y(y($*c)+y(Z*_))+y(K*u))),d[s+52>>2]=g,g=y(d[s+68>>2]-g),d[s+36>>2]=g,c=y(O+y(y(y(ne*c)+y(te*_))+y(ee*u))),d[s+48>>2]=c,E=y(d[s+64>>2]-c),d[s+32>>2]=E,m>y(1))break e;if(c=d[s+80>>2],_=d[s+84>>2],u=d[s+88>>2],(T=y(y(y(E*c)+y(g*_))+y(v*u)))>y(0)){if((l=y(y(y(x*c)+y(w*_))+y(b*u)))>=y(-14210854715202004e-30))break e;h=d[t+48>>2],p=d[n+48>>2],P=d[t+52>>2],M=d[n+52>>2],N=d[t+56>>2],C=d[n+56>>2],O=d[i+48>>2],z=d[a+48>>2],I=d[i+52>>2],L=d[a+52>>2],D=d[i+56>>2],F=d[a+56>>2],f[s+44>>2]=0,d[s+40>>2]=v,d[s+36>>2]=g,d[s+32>>2]=E,m=y(m-y(T/l)),l=y(y(1)-m),D=y(y(D*l)+y(m*F)),I=y(y(l*I)+y(m*L)),O=y(y(l*O)+y(m*z)),N=y(y(l*N)+y(m*C)),P=y(y(l*P)+y(m*M)),M=y(y(l*h)+y(m*p)),ie=f[s+92>>2],h=_,p=u,l=c}if(ni(f[e+4>>2],s+32|0)||Qn(f[e+4>>2],s+32|0,s- -64|0,s+48|0),!Ta(f[e+4>>2],s+80|0))break t;if(A=A+-1|0,c=d[s+80>>2],_=y(c*c),c=d[s+84>>2],_=y(_+y(c*c)),c=d[s+88>>2],!(y(_+y(c*c))>y(9999999747378752e-20)))break}d[r+164>>2]=m,(c=y(y(y(l*l)+y(h*h))+y(p*p)))>=y(14210854715202004e-30)?(f[r+144>>2]=ie,_=p,p=y(y(1)/y(S(c))),m=y(_*p),d[r+140>>2]=m,h=y(h*p),d[r+136>>2]=h,l=y(l*p),d[r+132>>2]=l):(f[r+132>>2]=0,f[r+136>>2]=0,f[r+140>>2]=0,f[r+144>>2]=0,m=y(0),h=y(0),l=y(0)),y(y(y(x*l)+y(w*h))+y(b*m))>=y(-d[r+172>>2])||(ao(f[e+4>>2],s+16|0,s),e=f[s+12>>2],f[r+156>>2]=f[s+8>>2],f[r+160>>2]=e,e=f[s+4>>2],f[r+148>>2]=f[s>>2],f[r+152>>2]=e,oe=1)}return R=s+96|0,0|oe}function Y(e,t,n){var i,o=0,r=y(0),s=0,c=y(0),l=0,_=0,u=0,p=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=0,C=y(0),E=y(0),w=0,T=0,P=y(0),I=y(0);R=i=R-16|0;e:{if(_=f[t+372>>2],!(m[_+32>>2]<2)&&ne(t)){if(s=f[e+18496>>2]){for(o=f[e+18508>>2],u=f[e+18500>>2];(l=f[s+48>>2])&&(f[l+44>>2]=f[s+44>>2]),(l=f[s+44>>2])&&(f[l+48>>2]=f[s+48>>2]),f[e+18496>>2]==(0|s)&&(f[e+18496>>2]=f[s+48>>2]),f[s+44>>2]=0,f[s+48>>2]=f[e+18504>>2],(l=f[e+18504>>2])&&(f[l+44>>2]=s),u=u+-1|0,f[e+18504>>2]=s,o=o+1|0,s=f[e+18496>>2];);f[e+18508>>2]=o,f[e+18500>>2]=u}if(f[e+18492>>2]=0,f[e>>2]=0,o=f[_>>2],u=f[_+12>>2],r=d[u+16>>2],x=y(d[o+16>>2]-r),s=f[_+4>>2],c=d[u+20>>2],v=y(d[s+20>>2]-c),l=f[_+8>>2],p=d[u+24>>2],g=y(d[l+24>>2]-p),A=y(d[o+20>>2]-c),C=y(d[s+24>>2]-p),E=y(d[l+16>>2]-r),p=y(d[o+24>>2]-p),r=y(d[s+16>>2]-r),c=y(d[l+20>>2]-c),y(y(y(y(x*v)*g)+y(y(y(y(y(A*C)*E)+y(y(p*r)*c))-y(y(x*C)*c))-y(y(A*r)*g)))-y(y(p*v)*E))<y(0)?(f[_+4>>2]=o,f[_>>2]=s,u=f[_+16>>2],f[_+16>>2]=f[_+20>>2],f[_+20>>2]=u,u=o):(u=s,s=o),u=tt(e,s,u,l,1),l=tt(e,f[_+4>>2],f[_>>2],f[_+12>>2],1),b=tt(e,f[_+8>>2],f[_+4>>2],f[_+12>>2],1),w=tt(e,f[_>>2],f[_+8>>2],f[_+12>>2],1),4==f[e+18500>>2]){if(o=f[e+18496>>2],r=d[o+16>>2],s=f[o+48>>2]){for(r=y(r*r);c=d[s+16>>2],o=(n=(c=y(c*c))<r)?s:o,r=n?c:r,s=f[s+48>>2];);r=d[o+16>>2]}for(n=f[o+28>>2],_=f[o+24>>2],T=f[o+20>>2],v=d[o+12>>2],x=d[o+8>>2],p=d[o+4>>2],c=d[o>>2],f[u+32>>2]=l,a[u+52|0]=0,f[l+32>>2]=u,a[l+52|0]=0,f[u+36>>2]=b,a[u+53|0]=0,f[b+32>>2]=u,a[b+52|0]=1,f[u+40>>2]=w,a[u+54|0]=0,f[w+32>>2]=u,a[w+52|0]=2,f[l+36>>2]=w,a[l+53|0]=2,f[w+40>>2]=l,a[w+54|0]=1,f[l+40>>2]=b,a[l+54|0]=1,f[b+36>>2]=l,a[b+53|0]=258,a[b+54|0]=1,f[b+40>>2]=w,f[w+36>>2]=b,a[w+53|0]=2,f[e>>2]=0,u=0;;){t:{n:{if(!((l=f[e+18492>>2])>>>0<=127)){f[e>>2]=6;break t}if(s=0,f[i+8>>2]=0,f[i>>2]=0,f[i+4>>2]=0,f[e+18492>>2]=l+1,u=u+1|0,a[o+55|0]=u,Fn(t,o,b=60+(l=(l<<5)+e|0)|0),!(y(y(y(y(d[o>>2]*d[l+76>>2])+y(d[o+4>>2]*d[l+80>>2]))+y(d[o+8>>2]*d[l+84>>2]))-d[o+16>>2])>y(9999999747378752e-20))){f[e>>2]=7;break t}for(;;){if(!(l=Qt(e,u,b,f[32+((s<<2)+o|0)>>2],h[52+(o+s|0)|0],i)))break n;if(w=s>>>0<2,s=s+1|0,!w)break}}if(l&m[i+8>>2]>2){if(n=f[i>>2],s=f[i+4>>2],f[n+36>>2]=s,a[n+53|0]=2,f[s+40>>2]=n,a[s+54|0]=1,(n=f[o+48>>2])&&(f[n+44>>2]=f[o+44>>2]),(n=f[o+44>>2])&&(f[n+48>>2]=f[o+48>>2]),f[e+18496>>2]==(0|o)&&(f[e+18496>>2]=f[o+48>>2]),f[e+18500>>2]=f[e+18500>>2]+-1,f[o+44>>2]=0,f[o+48>>2]=f[e+18504>>2],(n=f[e+18504>>2])&&(f[n+44>>2]=o),f[e+18504>>2]=o,f[e+18508>>2]=f[e+18508>>2]+1,o=f[e+18496>>2],r=d[o+16>>2],s=f[o+48>>2]){for(r=y(r*r);c=d[s+16>>2],o=(n=(c=y(c*c))<r)?s:o,r=n?c:r,s=f[s+48>>2];);r=d[o+16>>2]}if(n=f[o+28>>2],_=f[o+24>>2],T=f[o+20>>2],v=d[o+12>>2],x=d[o+8>>2],p=d[o+4>>2],c=d[o>>2],255!=(0|u))continue}else f[e>>2]=4}break}d[e+56>>2]=r,d[e+40>>2]=c,f[e+4>>2]=T,d[e+52>>2]=v,d[e+48>>2]=x,d[e+44>>2]=p,f[e+36>>2]=3,f[e+12>>2]=n,f[e+8>>2]=_,c=y(c*r),v=y(d[_+16>>2]-c),p=y(p*r),g=y(d[n+20>>2]-p),A=y(d[_+20>>2]-p),C=y(d[n+16>>2]-c),E=y(y(v*g)-y(A*C)),r=y(x*r),x=y(d[n+24>>2]-r),P=y(A*x),A=y(d[_+24>>2]-r),g=y(P-y(A*g)),x=y(y(A*C)-y(v*x)),x=y(S(y(y(E*E)+y(y(g*g)+y(x*x))))),d[e+20>>2]=x,v=y(d[n+16>>2]-c),g=y(d[T+20>>2]-p),A=y(d[n+20>>2]-p),C=y(d[T+16>>2]-c),E=y(y(v*g)-y(A*C)),I=y(E*E),P=A,A=y(d[T+24>>2]-r),E=y(d[n+24>>2]-r),g=y(y(P*A)-y(E*g)),v=y(y(E*C)-y(v*A)),v=y(S(y(I+y(y(g*g)+y(v*v))))),d[e+24>>2]=v,g=y(d[T+16>>2]-c),A=y(d[_+20>>2]-p),p=y(d[T+20>>2]-p),c=y(d[_+16>>2]-c),C=y(y(g*A)-y(p*c)),P=p,p=y(d[_+24>>2]-r),r=y(d[T+24>>2]-r),A=y(y(P*p)-y(r*A)),r=y(y(r*c)-y(g*p)),c=y(S(y(y(C*C)+y(y(A*A)+y(r*r))))),r=y(c+y(x+v)),d[e+28>>2]=c/r,d[e+24>>2]=v/r,d[e+20>>2]=x/r,e=f[e>>2];break e}}f[e>>2]=8,r=d[n>>2],c=d[n+4>>2],p=d[n+8>>2],f[e+52>>2]=0,x=y(-p),d[e+48>>2]=x,v=y(-c),d[e+44>>2]=v,g=y(-r),d[e+40>>2]=g,(r=y(S(y(y(y(r*r)+y(c*c))+y(p*p)))))>y(0)?(r=y(y(1)/r),d[e+48>>2]=r*x,d[e+44>>2]=r*v,d[e+40>>2]=r*g):(f[e+48>>2]=0,f[e+40>>2]=1065353216,f[e+44>>2]=0),f[e+52>>2]=0,f[e+56>>2]=0,f[e+36>>2]=1,t=f[_>>2],f[e+20>>2]=1065353216,f[e+4>>2]=t,e=8}return R=i+16|0,e}function X(e,t,n){var i,r=0,c=0,l=0,u=0,p=y(0),m=y(0),v=y(0),x=0,b=0,C=0,S=0,E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=0,M=0,O=0;if(R=i=R-48|0,u=-246811958,l=1900671690,(0|n)>0)for(r=t,C=1900671690,x=1900671690,c=-246811958,b=-246811958;S=f[r+8>>2],p=d[r+8>>2],s(0,u),u=_()<p?S:u,D=f[r+4>>2],m=d[r+4>>2],s(0,c),c=_()<m?D:c,M=f[r>>2],v=d[r>>2],s(0,b),b=_()<v?M:b,l=p<(s(0,l),_())?S:l,C=m<(s(0,C),_())?D:C,x=v<(s(0,x),_())?M:x,r=r+16|0,(0|(O=O+1|0))!=(0|n););else b=-246811958,c=-246811958,x=1900671690,C=1900671690;if(s(0,c),E=_(),s(0,C),w=_(),p=y(E-w),s(0,u),T=_(),s(0,l),P=_(),c=p<(m=y(T-P)),s(0,b),I=_(),s(0,x),N=_(),l=(v=y(I-N))<m,r=(u=v<p)?c?2:1:l<<1,f[e+112>>2]=r,(0|r)==(0|(l=u?(1^l)<<1:c?1:2))&&(l=(r+1>>>0)%3|0),f[e+104>>2]=l,f[e+12>>2]=0,f[e+28>>2]=0,c=(3^r)-l|0,f[e+108>>2]=c,d[e+24>>2]=y(T+P)*y(.5),d[e+20>>2]=y(E+w)*y(.5),d[e+16>>2]=y(I+N)*y(.5),m=y((r=(0|r)==((c+1|0)%3|0))?m*y(9788566967472434e-20):m*y(-9788566967472434e-20)),d[e+8>>2]=m,p=y(r?p*y(9788566967472434e-20):p*y(-9788566967472434e-20)),d[e+4>>2]=p,v=y(r?v*y(9788566967472434e-20):v*y(-9788566967472434e-20)),d[e>>2]=v,f[i+36>>2]=0,a[i+40|0]=1,f[i+28>>2]=0,f[i+32>>2]=0,(0|n)>=1){if(f[6257]=f[6257]+1,r=0|o[f[4968]](n<<4,16),f[i+36>>2]=r,u=1,a[i+40|0]=1,f[i+32>>2]=n,c=f[i+20>>2],f[r+8>>2]=f[i+16>>2],f[r+12>>2]=c,c=f[i+12>>2],f[r>>2]=f[i+8>>2],f[r+4>>2]=c,1!=(0|n))for(;c=f[i+12>>2],r=f[i+36>>2]+(u<<4)|0,f[r>>2]=f[i+8>>2],f[r+4>>2]=c,c=f[i+20>>2],f[r+8>>2]=f[i+16>>2],f[r+12>>2]=c,(0|(u=u+1|0))!=(0|n););for(m=m!=y(0)?y(y(1)/m):m,E=p!=y(0)?y(y(1)/p):p,v=v!=y(0)?y(y(1)/v):v,f[i+28>>2]=n,x=(i+8|0)+(f[e+104>>2]<<2)|0,b=(i+8|0)+(f[e+112>>2]<<2)|0,C=(i+8|0)+(f[e+108>>2]<<2)|0,w=d[e+24>>2],T=d[e+20>>2],P=d[e+16>>2],S=f[i+36>>2],l=0;p=d[t>>2],I=d[t+4>>2],N=d[t+8>>2],f[i+20>>2]=0,d[i+16>>2]=m*y(N-w),d[i+12>>2]=E*y(I-T),d[i+8>>2]=v*y(p-P),u=r=S+(l<<4)|0,p=d[C>>2],c=y(A(p))<y(2147483648)?~~p:-2147483648,f[u>>2]=c,u=r,p=d[b>>2],c=y(A(p))<y(2147483648)?~~p:-2147483648,f[u+4>>2]=c,p=d[x>>2],f[r+12>>2]=l,u=y(A(p))<y(2147483648)?~~p:-2147483648,f[r+8>>2]=u,t=t+16|0,(0|(l=l+1|0))!=(0|n););(0|n)<2||qt(i+24|0,i+8|0,0,n+-1|0)}else f[i+28>>2]=n;if(f[e+44>>2]=n,f[e+40>>2]=0,f[e+36>>2]=f[e+32>>2],(0|(t=f[e+84>>2]))<(0|n)){if(f[e+88>>2]<(0|n)){if(n?(f[6257]=f[6257]+1,b=0|o[f[4968]](n<<2,16),r=f[e+84>>2]):(b=0,r=t),(0|r)>=1)for(u=0;f[(c=u<<2)+b>>2]=f[c+f[e+92>>2]>>2],(0|r)!=(0|(u=u+1|0)););(r=f[e+92>>2])&&(h[e+96|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+92>>2]=0),f[e+92>>2]=b,f[e+88>>2]=n,a[e+96|0]=1}for(;f[f[e+92>>2]+(t<<2)>>2]=0,(0|n)!=(0|(t=t+1|0)););}if(f[e+84>>2]=n,(0|n)>=1)for(x=0;;){if(!((c=f[e+40>>2])||((l=f[e+36>>2])?f[e+36>>2]=f[l+8>>2]:(f[6257]=f[6257]+1,l=0|o[f[4968]](12,16),t=f[e+44>>2],f[l+8>>2]=0,f[l+4>>2]=t,f[6257]=f[6257]+1,f[l>>2]=o[f[4968]](g(t,112),16),f[l+8>>2]=f[e+32>>2],f[e+32>>2]=l),t=0,u=c=f[l>>2],(0|(r=f[l+4>>2]))<1)))for(;l=u,u=u+112|0,t=t+1|0,f[l>>2]=(0|t)<(0|r)?u:0,(0|t)!=(0|r););if(f[e+40>>2]=f[c>>2],f[c+8>>2]=0,f[c+12>>2]=0,f[c+16>>2]=0,f[c>>2]=0,f[c+4>>2]=0,f[c+104>>2]=-1,f[c+8>>2]=0,t=f[i+36>>2]+(x<<4)|0,r=f[t+4>>2],f[c+88>>2]=f[t>>2],f[c+92>>2]=r,r=f[t+12>>2],f[c+96>>2]=f[t+8>>2],f[c+100>>2]=r,f[c+104>>2]=-1,f[f[e+92>>2]+(x<<2)>>2]=c,(0|(x=x+1|0))==(0|n))break}(t=f[i+36>>2])&&(h[i+40|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[i+36>>2]=0),f[i+36>>2]=0,a[i+40|0]=1,f[i+28>>2]=0,f[i+32>>2]=0,f[e+100>>2]=-3,f[e+56>>2]=0,f[e+60>>2]=g(n,6),f[e+116>>2]=0,f[e+120>>2]=0,f[e+52>>2]=f[e+48>>2],f[i+16>>2]=0,f[i+20>>2]=0,f[i+8>>2]=0,f[i+12>>2]=0,ut(e,0,n,i+8|0),f[e+124>>2]=f[i+8>>2],(e=f[i+36>>2])&&(h[i+40|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[i+36>>2]=0),R=i+48|0}function Q(e,t,n,i,r){var s,c=0,l=0,_=0,m=0,v=0,g=0;if(R=s=R-112|0,a[e+60|0]=n,n){if(function(e,t,n){var i=y(0),o=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0);r=d[t>>2],s=d[t+4>>2],c=d[t+8>>2],f[e+16>>2]=0,l=y(c-y(1)),d[e+12>>2]=l,s=y(s-y(1)),d[e+8>>2]=s,c=y(r-y(1)),d[e+4>>2]=c,o=d[n>>2],i=d[n+4>>2],r=d[n+8>>2],a[e+60|0]=1,f[e+48>>2]=0,f[e+32>>2]=0,m=y(r+y(1)),d[e+28>>2]=m,v=y(i+y(1)),d[e+24>>2]=v,r=y(o+y(1)),d[e+20>>2]=r,h=y(y(65533)/y(m-l)),d[e+44>>2]=h,u=y(y(65533)/y(v-s)),d[e+40>>2]=u,_=y(y(65533)/y(r-c)),d[e+36>>2]=_,t=(i=y(y(l-l)*h))<y(4294967296)&i>=y(0)?~~i>>>0:0,p=y((65534&t)>>>0),g=i=s,t=(o=y(y(i-i)*u))<y(4294967296)&o>=y(0)?~~o>>>0:0,o=y(g+y(y((65534&t)>>>0)/u)),g=i=c,t=(u=y(y(i-i)*_))<y(4294967296)&u>=y(0)?~~u>>>0:0,!((i=y(y(g+y(y((65534&t)>>>0)/_))-y(1)))<c)||(d[e+4>>2]=i,c=i),!((i=y(o-y(1)))<s)||(d[e+8>>2]=i,s=i),!((i=y(y(l+y(p/h))-y(1)))<l)||(d[e+12>>2]=i,l=i),f[e+48>>2]=0,i=y(m-l),A=y(y(65533)/i),d[e+44>>2]=A,o=y(v-s),p=y(y(65533)/o),d[e+40>>2]=p,_=y(r-c),h=y(y(65533)/_),d[e+36>>2]=h,t=(i=y(y(A*i)+y(1)))<y(4294967296)&i>=y(0)?~~i>>>0:0,u=y((1|t)>>>0),i=s,t=(o=y(y(p*o)+y(1)))<y(4294967296)&o>=y(0)?~~o>>>0:0,p=y(i+y(y((1|t)>>>0)/p)),g=r,i=c,t=(_=y(y(h*_)+y(1)))<y(4294967296)&_>=y(0)?~~_>>>0:0,!(g<(i=y(y(i+y(y((1|t)>>>0)/h))+y(1))))||(d[e+20>>2]=i,r=i),!(v<(i=y(p+y(1))))||(d[e+24>>2]=i,v=i),!(m<(i=y(y(l+y(u/A))+y(1))))||(d[e+28>>2]=i,m=i),f[e+48>>2]=0,d[e+44>>2]=y(65533)/y(m-l),d[e+40>>2]=y(65533)/y(v-s),d[e+36>>2]=y(65533)/y(r-c)}(e,i,r),f[s+96>>2]=e,f[s+92>>2]=e+104,f[s+88>>2]=14420,o[f[f[t>>2]+8>>2]](t,s+88|0,e+4|0,e+20|0),r=f[e+108>>2],f[s+16>>2]=0,f[s+20>>2]=0,f[s+8>>2]=0,f[s+12>>2]=0,(0|(n=f[e+128>>2]))<(0|(c=r<<1))){if(f[e+132>>2]<(0|c)){if(r?(f[6257]=f[6257]+1,m=0|o[f[4968]](r<<5,16),i=f[e+128>>2]):i=n,(0|i)>=1)for(t=0;_=v=(l=t<<4)+m|0,l=l+f[e+136>>2]|0,g=f[l+4>>2],f[_>>2]=f[l>>2],f[_+4>>2]=g,_=f[l+12>>2],f[v+8>>2]=f[l+8>>2],f[v+12>>2]=_,(0|i)!=(0|(t=t+1|0)););(t=f[e+136>>2])&&(h[e+140|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+136>>2]=0),f[e+136>>2]=m,f[e+132>>2]=c,a[e+140|0]=1}for(;m=f[s+12>>2],t=f[e+136>>2]+(n<<4)|0,f[t>>2]=f[s+8>>2],f[t+4>>2]=m,i=f[s+20>>2],f[t+8>>2]=f[s+16>>2],f[t+12>>2]=i,(0|c)!=(0|(n=n+1|0)););}f[e+128>>2]=c}else{if(f[s+104>>2]=14552,f[s+108>>2]=e- -64,f[s+96>>2]=-581039253,f[s+100>>2]=0,f[s+88>>2]=-581039253,f[s+92>>2]=-581039253,f[s+80>>2]=1566444395,f[s+84>>2]=0,f[s+72>>2]=1566444395,f[s+76>>2]=1566444395,o[f[f[t>>2]+8>>2]](t,s+104|0,s+88|0,s+72|0),r=f[e+68>>2],f[(t=s- -64|0)>>2]=0,f[t+4>>2]=0,f[s+56>>2]=0,f[s+60>>2]=0,f[s+48>>2]=0,f[s+52>>2]=0,f[s+40>>2]=0,f[s+44>>2]=0,f[s+32>>2]=0,f[s+36>>2]=0,f[s+24>>2]=0,f[s+28>>2]=0,f[s+16>>2]=0,f[s+20>>2]=0,f[s+8>>2]=0,f[s+12>>2]=0,(0|(t=f[e+88>>2]))<(0|(l=r<<1))){if(f[e+92>>2]<(0|l)){if(r?(f[6257]=f[6257]+1,m=0|o[f[4968]](r<<7,16),n=f[e+88>>2]):n=t,(0|n)>=1)for(;c=(i=v<<6)+m|0,i=i+f[e+96>>2]|0,g=f[i+4>>2],f[c>>2]=f[i>>2],f[c+4>>2]=g,_=f[i+60>>2],f[c+56>>2]=f[i+56>>2],f[c+60>>2]=_,_=f[i+52>>2],f[c+48>>2]=f[i+48>>2],f[c+52>>2]=_,_=f[i+44>>2],f[c+40>>2]=f[i+40>>2],f[c+44>>2]=_,_=f[i+36>>2],f[c+32>>2]=f[i+32>>2],f[c+36>>2]=_,_=f[i+28>>2],f[c+24>>2]=f[i+24>>2],f[c+28>>2]=_,_=f[i+20>>2],f[c+16>>2]=f[i+16>>2],f[c+20>>2]=_,_=f[i+12>>2],f[c+8>>2]=f[i+8>>2],f[c+12>>2]=_,(0|n)!=(0|(v=v+1|0)););(n=f[e+96>>2])&&(h[e+100|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+96>>2]=0),f[e+96>>2]=m,f[e+92>>2]=l,a[e+100|0]=1}for(;c=f[s+12>>2],n=f[e+96>>2]+(t<<6)|0,f[n>>2]=f[s+8>>2],f[n+4>>2]=c,c=f[4+(i=s- -64|0)>>2],f[n+56>>2]=f[i>>2],f[n+60>>2]=c,i=f[s+60>>2],f[n+48>>2]=f[s+56>>2],f[n+52>>2]=i,i=f[s+52>>2],f[n+40>>2]=f[s+48>>2],f[n+44>>2]=i,i=f[s+44>>2],f[n+32>>2]=f[s+40>>2],f[n+36>>2]=i,i=f[s+36>>2],f[n+24>>2]=f[s+32>>2],f[n+28>>2]=i,i=f[s+28>>2],f[n+16>>2]=f[s+24>>2],f[n+20>>2]=i,i=f[s+20>>2],f[n+8>>2]=f[s+16>>2],f[n+12>>2]=i,(0|l)!=(0|(t=t+1|0)););}f[e+88>>2]=l}if(f[e+56>>2]=0,ve(e,0,r),!(f[e+152>>2]|!h[e+60|0])){if(t=e,f[e+156>>2])r=f[e+160>>2],n=1;else{if(f[6257]=f[6257]+1,r=0|o[f[4968]](32,16),(0|(m=f[e+152>>2]))>=1)for(i=0;c=(n=i<<5)+r|0,n=n+f[e+160>>2]|0,v=f[n+4>>2],f[c>>2]=f[n>>2],f[c+4>>2]=v,l=f[n+28>>2],f[c+24>>2]=f[n+24>>2],f[c+28>>2]=l,l=f[n+20>>2],f[c+16>>2]=f[n+16>>2],f[c+20>>2]=l,l=f[n+12>>2],f[c+8>>2]=f[n+8>>2],f[c+12>>2]=l,(0|m)!=(0|(i=i+1|0)););(n=f[e+160>>2])&&(h[e+164|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+160>>2]=0),f[e+160>>2]=r,f[e+156>>2]=1,a[e+164|0]=1,n=f[e+152>>2]+1|0}f[t+152>>2]=n,t=f[s+36>>2],f[r+24>>2]=f[s+32>>2],f[r+28>>2]=t,t=f[s+28>>2],f[r+16>>2]=f[s+24>>2],f[r+20>>2]=t,t=f[s+20>>2],f[r+8>>2]=f[s+16>>2],f[r+12>>2]=t,t=f[s+12>>2],f[r>>2]=f[s+8>>2],f[r+4>>2]=t,t=f[e+160>>2],n=f[e+136>>2],u[t>>1]=p[n>>1],u[t+2>>1]=p[n+2>>1],u[t+4>>1]=p[n+4>>1],u[t+6>>1]=p[n+6>>1],u[t+8>>1]=p[n+8>>1],i=p[n+10>>1],f[t+12>>2]=0,u[t+10>>1]=i,i=t,t=f[n+12>>2],f[i+16>>2]=(0|t)>-1?1:0-t|0}f[e+168>>2]=f[e+152>>2],(t=f[e+116>>2])&&(h[e+120|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+116>>2]=0),f[e+116>>2]=0,f[e+108>>2]=0,f[e+112>>2]=0,a[e+120|0]=1,(t=f[e+76>>2])&&(h[e+80|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+76>>2]=0),f[e+76>>2]=0,f[e+68>>2]=0,f[e+72>>2]=0,a[e+80|0]=1,R=s+112|0}function K(e){var t,n=y(0),i=0,o=y(0),r=y(0),s=0,c=y(0),l=y(0),_=y(0),u=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=0,C=y(0),S=y(0);R=t=R-16|0;e:if(h[e+356|0]){a[e+356|0]=0,a[e+352|0]=0,f[e+344>>2]=0,f[e+348>>2]=0,f[e+336>>2]=0,f[e+340>>2]=0,b=-16&h[e+332|0],a[e+332|0]=b;t:if(!((i=f[e>>2])>>>0>4)){s=e+316|0;n:{i:{switch(i-1|0){case 1:if(r=d[e+4>>2],l=y(d[e+20>>2]-r),o=d[e+8>>2],_=y(d[e+24>>2]-o),n=d[e+12>>2],v=y(d[e+28>>2]-n),i=1,(o=y(y(y(y(y(0)-r)*l)+y(y(y(0)-o)*_))+y(y(y(0)-n)*v)))>y(0)&&(o<(n=y(y(y(l*l)+y(_*_))+y(v*v)))?(c=y(o/n),i=3):(c=y(1),i=2)),f[e+344>>2]=0,f[e+348>>2]=0,d[e+340>>2]=c,d[e+336>>2]=y(1)-c,a[e+332|0]=i|b,s=0,f[e+256>>2]=0,n=d[e+92>>2],r=y(n+y(c*y(d[e+108>>2]-n))),d[e+252>>2]=r,n=d[e+88>>2],l=y(n+y(c*y(d[e+104>>2]-n))),d[e+248>>2]=l,n=d[e+84>>2],_=y(n+y(c*y(d[e+100>>2]-n))),d[e+244>>2]=_,v=d[e+180>>2],o=d[e+184>>2],u=d[e+168>>2],n=d[e+188>>2],p=d[e+172>>2],m=d[e+164>>2],f[e+288>>2]=0,g=r,r=y(p+y(c*y(n-p))),d[e+284>>2]=g-r,o=y(u+y(c*y(o-u))),d[e+280>>2]=l-o,n=y(m+y(c*y(v-m))),d[e+276>>2]=_-n,f[e+272>>2]=0,d[e+268>>2]=r,d[e+264>>2]=o,d[e+260>>2]=n,Xe(e,e+332|0),d[e+336>>2]>=y(0)^1|d[e+340>>2]>=y(0)^1|d[e+344>>2]>=y(0)^1)break t;s=d[e+348>>2]>=y(0);break t;case 2:if(f[(i=t)+8>>2]=0,f[i+12>>2]=0,f[i>>2]=0,f[i+4>>2]=0,Me(i,e+4|0,e+20|0,e+36|0,s),s=0,f[e+256>>2]=0,g=d[e+336>>2],A=d[e+340>>2],x=d[e+344>>2],C=y(y(y(g*d[e+92>>2])+y(A*d[e+108>>2]))+y(x*d[e+124>>2])),d[e+252>>2]=C,S=y(y(y(g*d[e+88>>2])+y(A*d[e+104>>2]))+y(x*d[e+120>>2])),d[e+248>>2]=S,c=y(y(y(g*d[e+84>>2])+y(A*d[e+100>>2]))+y(x*d[e+116>>2])),d[e+244>>2]=c,u=d[e+180>>2],p=d[e+196>>2],m=d[e+168>>2],l=d[e+184>>2],_=d[e+200>>2],v=d[e+172>>2],r=d[e+188>>2],o=d[e+204>>2],n=d[e+164>>2],f[e+288>>2]=0,r=y(y(y(g*v)+y(A*r))+y(x*o)),d[e+284>>2]=C-r,o=y(y(y(g*m)+y(A*l))+y(x*_)),d[e+280>>2]=S-o,n=y(y(y(g*n)+y(A*u))+y(x*p)),d[e+276>>2]=c-n,f[e+272>>2]=0,d[e+268>>2]=r,d[e+264>>2]=o,d[e+260>>2]=n,Xe(e,e+332|0),d[e+336>>2]>=y(0)^1|d[e+340>>2]>=y(0)^1|d[e+344>>2]>=y(0)^1)break t;s=d[e+348>>2]>=y(0);break t;case 3:if(f[(i=t)+8>>2]=0,f[i+12>>2]=0,f[i>>2]=0,f[i+4>>2]=0,function(e,t,n,i,o,r){var s,c,l,_,u=y(0),p=y(0),m=y(0),v=y(0),g=0,A=y(0),x=y(0),b=y(0),C=0,S=y(0),E=y(0),w=0,T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=y(0),J=y(0),$=y(0);return R=s=R-48|0,a[s+24|0]=0,g=f[e+12>>2],f[r+8>>2]=f[e+8>>2],f[r+12>>2]=g,g=f[e+4>>2],f[r>>2]=f[e>>2],f[r+4>>2]=g,a[r+16|0]=15|h[r+16|0],q=d[e+8>>2],T=d[t+8>>2],G=y(q-T),P=d[n+8>>2],I=y(P-T),Y=d[i>>2],N=d[t>>2],D=y(Y-N),j=d[o+4>>2],M=d[t+4>>2],O=y(j-M),z=d[i+4>>2],L=y(z-M),A=d[o>>2],F=y(A-N),x=y(y(D*O)-y(L*F)),U=d[n>>2],B=y(U-N),X=d[o+8>>2],b=y(X-T),m=d[i+8>>2],v=y(m-T),u=y(y(L*b)-y(v*O)),k=d[n+4>>2],S=y(k-M),p=y(y(v*F)-y(D*b)),E=y(y(I*x)+y(y(B*u)+y(S*p))),Q=d[e>>2],V=y(Q-N),K=d[e+4>>2],H=y(K-M),c=y(E*E)<y(9.99999905104687e-9)?-1:y(y(y(G*x)+y(y(V*u)+y(H*p)))*E)<y(0),Z=y(y(S*v)-y(I*L)),J=y(y(I*D)-y(B*v)),$=y(y(B*L)-y(S*D)),W=y(y(y(Z*F)+y(J*O))+y($*b)),p=v,v=y(y(S*F)-y(B*O)),S=y(y(I*O)-y(S*b)),E=y(y(B*b)-y(I*F)),b=y(y(p*v)+y(y(D*S)+y(L*E))),u=y(z-k),z=y(A-U),A=y(Y-U),p=y(j-k),x=y(y(u*z)-y(A*p)),m=y(m-P),j=y(m*p),p=y(X-P),u=y(j-y(u*p)),p=y(y(A*p)-y(m*z)),m=y(y(y(T-P)*x)+y(y(y(N-U)*u)+y(y(M-k)*p))),(0|(g=(l=y(m*m)<y(9.99999905104687e-9)?-1:y(y(y(y(q-P)*x)+y(y(y(Q-U)*u)+y(y(K-k)*p)))*m)<y(0))|(_=y(b*b)<y(9.99999905104687e-9)?-1:y(y(y(G*v)+y(y(V*S)+y(H*E)))*b)<y(0))|(C=y(W*W)<y(9.99999905104687e-9)?-1:y(y(y(y(V*Z)+y(H*J))+y($*G))*W)<y(0))|c))<=-1?a[r+36|0]=1:g&&(p=y(34028234663852886e22),C&&(Me(e,t,n,i,s+8|0),A=d[s+8>>2],u=y(A-d[e>>2]),p=y(u*u),x=d[s+12>>2],u=y(x-d[e+4>>2]),p=y(p+y(u*u)),m=d[s+16>>2],u=y(m-d[e+8>>2]),u=y(p+y(u*u)),p=y(34028234663852886e22),u<y(34028234663852886e22)&&(f[r+12>>2]=f[s+20>>2],d[r+8>>2]=m,d[r+4>>2]=x,d[r>>2]=A,g=h[s+24|0],a[r+16|0]=1&g|240&h[r+16|0]|2&g|4&g,w=f[s+36>>2],C=f[s+32>>2],g=f[s+28>>2],f[r+32>>2]=0,f[r+28>>2]=w,f[r+20>>2]=g,f[r+24>>2]=C,p=u)),c&&(Me(e,t,i,o,s+8|0),A=d[s+8>>2],u=y(A-d[e>>2]),v=y(u*u),x=d[s+12>>2],u=y(x-d[e+4>>2]),v=y(v+y(u*u)),m=d[s+16>>2],u=y(m-d[e+8>>2]),(u=y(v+y(u*u)))<p&&(f[r+12>>2]=f[s+20>>2],d[r+8>>2]=m,d[r+4>>2]=x,d[r>>2]=A,C=(g=h[s+24|0])<<1,a[r+16|0]=8&C|4&C|1&g|240&h[r+16|0],w=f[s+36>>2],C=f[s+32>>2],g=f[s+28>>2],f[r+24>>2]=0,f[r+28>>2]=C,f[r+32>>2]=w,f[r+20>>2]=g,p=u)),_&&(Me(e,t,o,n,s+8|0),A=d[s+8>>2],u=y(A-d[e>>2]),v=y(u*u),x=d[s+12>>2],u=y(x-d[e+4>>2]),v=y(v+y(u*u)),m=d[s+16>>2],u=y(m-d[e+8>>2]),(u=y(v+y(u*u)))<p&&(f[r+12>>2]=f[s+20>>2],d[r+8>>2]=m,d[r+4>>2]=x,d[r>>2]=A,t=h[s+24|0],a[r+16|0]=1&t|240&h[r+16|0]|t>>>1&2|t<<2&8,g=f[s+36>>2],t=f[s+28>>2],f[r+32>>2]=f[s+32>>2],f[r+28>>2]=0,f[r+24>>2]=g,f[r+20>>2]=t,p=u)),l?(Me(e,n,o,i,s+8|0),w=1,A=d[s+8>>2],u=y(A-d[e>>2]),v=y(u*u),x=d[s+12>>2],u=y(x-d[e+4>>2]),v=y(v+y(u*u)),m=d[s+16>>2],u=y(m-d[e+8>>2]),y(v+y(u*u))<p&&(f[r+12>>2]=f[s+20>>2],d[r+8>>2]=m,d[r+4>>2]=x,d[r>>2]=A,e=h[s+24|0],a[r+16|0]=4&e|240&h[r+16|0]|e<<1&2|e<<2&8,t=f[s+36>>2],e=f[s+28>>2],f[r+32>>2]=f[s+32>>2],f[r+28>>2]=t,f[r+24>>2]=e,f[r+20>>2]=0)):w=1),R=s+48|0,w}(i,e+4|0,e+20|0,e+36|0,e+52|0,s)){if(s=0,f[e+256>>2]=0,u=d[e+336>>2],p=d[e+340>>2],m=d[e+344>>2],n=d[e+348>>2],l=y(y(y(y(u*d[e+92>>2])+y(p*d[e+108>>2]))+y(m*d[e+124>>2]))+y(n*d[e+140>>2])),d[e+252>>2]=l,_=y(y(y(y(u*d[e+88>>2])+y(p*d[e+104>>2]))+y(m*d[e+120>>2]))+y(n*d[e+136>>2])),d[e+248>>2]=_,v=y(y(y(y(u*d[e+84>>2])+y(p*d[e+100>>2]))+y(m*d[e+116>>2]))+y(n*d[e+132>>2])),d[e+244>>2]=v,f[e+288>>2]=0,f[e+272>>2]=0,r=y(y(y(y(u*d[e+164>>2])+y(p*d[e+180>>2]))+y(m*d[e+196>>2]))+y(n*d[e+212>>2])),d[e+260>>2]=r,o=y(y(y(y(u*d[e+168>>2])+y(p*d[e+184>>2]))+y(m*d[e+200>>2]))+y(n*d[e+216>>2])),d[e+264>>2]=o,n=y(y(y(y(u*d[e+172>>2])+y(p*d[e+188>>2]))+y(m*d[e+204>>2]))+y(n*d[e+220>>2])),d[e+268>>2]=n,d[e+276>>2]=v-r,d[e+280>>2]=_-o,d[e+284>>2]=l-n,Xe(e,e+332|0),d[e+336>>2]>=y(0)^1|d[e+340>>2]>=y(0)^1|d[e+344>>2]>=y(0)^1)break t;s=d[e+348>>2]>=y(0);break t}if(!h[e+352|0])break i;break;case 0:break n}s=0;break t}f[e+276>>2]=0,f[e+280>>2]=0,s=1,a[e+312|0]=1,f[e+284>>2]=0,f[e+288>>2]=0;break e}i=f[e+168>>2],f[e+260>>2]=f[e+164>>2],f[e+264>>2]=i,i=f[e+88>>2],f[e+244>>2]=f[e+84>>2],f[e+248>>2]=i,i=f[e+176>>2],f[e+268>>2]=f[e+172>>2],f[e+272>>2]=i,i=f[e+96>>2],f[e+252>>2]=f[e+92>>2],f[e+256>>2]=i,a[e+352|0]=0,f[e+288>>2]=0,d[e+280>>2]=d[e+248>>2]-d[e+264>>2],d[e+276>>2]=d[e+244>>2]-d[e+260>>2],d[e+284>>2]=d[e+252>>2]-d[e+268>>2],f[e+344>>2]=0,f[e+348>>2]=0,f[e+336>>2]=1065353216,f[e+340>>2]=0,a[e+332|0]=b,s=1}a[e+312|0]=s}else s=h[e+312|0];return R=t+16|0,0!=(0|s)}function Z(e,t,n,i,a,r){var s,c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=0,C=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=0,L=0,F=y(0),U=y(0),B=y(0),k=y(0),G=0;if(R=s=R-544|0,f[r>>2]=0,f[r+4>>2]=0,f[r+32>>2]=0,f[r+24>>2]=0,f[r+28>>2]=0,f[r+16>>2]=0,f[r+20>>2]=0,f[r+8>>2]=0,f[r+12>>2]=0,f[s+388>>2]=n,f[s+384>>2]=e,_=d[i+20>>2],u=d[i+36>>2],h=d[t+20>>2],p=d[t+36>>2],v=d[i+24>>2],c=d[t+24>>2],l=d[i+40>>2],g=d[t+40>>2],A=d[i+32>>2],x=d[i>>2],C=d[i+16>>2],E=d[i+4>>2],w=d[t+32>>2],P=d[t>>2],I=d[t+16>>2],N=d[t+4>>2],T=d[i+8>>2],D=d[t+8>>2],f[s+436>>2]=0,f[s+420>>2]=0,f[s+404>>2]=0,M=y(y(y(D*T)+y(c*v))+y(g*l)),d[s+432>>2]=M,O=y(y(y(N*T)+y(h*v))+y(p*l)),d[s+428>>2]=O,v=y(y(y(P*T)+y(I*v))+y(w*l)),d[s+424>>2]=v,l=y(y(y(D*E)+y(c*_))+y(g*u)),d[s+416>>2]=l,T=y(y(y(N*E)+y(h*_))+y(p*u)),d[s+412>>2]=T,_=y(y(y(P*E)+y(I*_))+y(w*u)),d[s+408>>2]=_,u=y(y(y(x*D)+y(C*c))+y(A*g)),d[s+400>>2]=u,h=y(y(y(x*N)+y(C*h))+y(A*p)),d[s+396>>2]=h,p=y(y(y(x*P)+y(C*I))+y(A*w)),d[s+392>>2]=p,c=d[t+20>>2],g=d[t+36>>2],A=d[t+24>>2],x=d[t+52>>2],C=d[i+52>>2],E=d[t+40>>2],w=d[t+56>>2],P=d[i+56>>2],I=d[t>>2],N=d[t+16>>2],D=d[t+32>>2],F=d[t+4>>2],U=d[t+8>>2],B=d[t+48>>2],k=d[i+48>>2],f[s+508>>2]=0,f[s+500>>2]=0,f[s+484>>2]=0,d[s+480>>2]=M,d[s+476>>2]=l,d[s+472>>2]=u,f[s+468>>2]=0,d[s+464>>2]=O,d[s+460>>2]=T,d[s+456>>2]=h,f[s+452>>2]=0,d[s+448>>2]=v,d[s+444>>2]=_,_=y(k-B),u=y(C-x),h=y(P-w),d[s+496>>2]=y(y(U*_)+y(A*u))+y(E*h),d[s+492>>2]=y(y(_*F)+y(u*c))+y(h*g),d[s+488>>2]=y(y(_*I)+y(u*N))+y(h*D),f[s+504>>2]=183,d[s+440>>2]=p,f[s+136>>2]=0,f[s+140>>2]=0,f[s+128>>2]=0,f[s+132>>2]=0,f[s+364>>2]=0,f[s+368>>2]=0,f[s+376>>2]=2,f[s+144>>2]=0,e=j(s,s+384|0,a))f[r>>2]=1==(0|e)?1:2;else{if(b=f[s+372>>2],f[b+32>>2])for(c=y(0),i=0,v=y(0),p=y(0),h=y(0),u=y(0),_=y(0);l=d[16+(a=(n=i<<2)+b|0)>>2],e=f[s+504>>2],b=s+528|0,z=f[s+508>>2],G=L=f[s+384>>2]+(z>>1)|0,a=f[a>>2],1&z&&(e=f[e+f[L>>2]>>2]),o[e](b,G,a),a=f[s+508>>2],e=f[s+388>>2]+(a>>1)|0,C=y(l*d[s+536>>2]),E=y(l*d[s+532>>2]),w=y(l*d[s+528>>2]),n=f[n+f[s+372>>2]>>2],g=d[n+8>>2],A=d[n>>2],x=y(-d[n+4>>2]),b=f[s+504>>2],b=1&a?f[f[e>>2]+b>>2]:b,c=y(c+C),v=y(v+E),p=y(p+w),f[s+524>>2]=0,d[s+520>>2]=y(y(d[s+428>>2]*x)-y(A*d[s+424>>2]))-y(g*d[s+432>>2]),d[s+516>>2]=y(y(d[s+412>>2]*x)-y(A*d[s+408>>2]))-y(g*d[s+416>>2]),d[s+512>>2]=y(y(d[s+396>>2]*x)-y(A*d[s+392>>2]))-y(g*d[s+400>>2]),o[b](s+528|0,e,s+512|0),g=d[s+528>>2],A=d[s+532>>2],x=d[s+536>>2],h=y(h+y(l*y(y(y(y(g*d[s+472>>2])+y(A*d[s+476>>2]))+y(x*d[s+480>>2]))+d[s+496>>2]))),u=y(u+y(l*y(y(y(y(g*d[s+456>>2])+y(A*d[s+460>>2]))+y(x*d[s+464>>2]))+d[s+492>>2]))),_=y(_+y(l*y(y(y(y(g*d[s+440>>2])+y(A*d[s+444>>2]))+y(x*d[s+448>>2]))+d[s+488>>2]))),i=i+1|0,b=f[s+372>>2],i>>>0<m[b+32>>2];);else _=y(0),u=y(0),h=y(0),p=y(0),v=y(0),c=y(0);l=d[t+48>>2],g=d[t+8>>2],A=d[t>>2],x=d[t+4>>2],C=d[t+52>>2],E=d[t+24>>2],w=d[t+16>>2],P=d[t+20>>2],I=d[t+56>>2],N=d[t+40>>2],T=d[t+32>>2],D=d[t+36>>2],f[r+16>>2]=0,d[r+12>>2]=I+y(y(y(p*T)+y(v*D))+y(c*N)),d[r+8>>2]=C+y(y(y(p*w)+y(v*P))+y(c*E)),d[r+4>>2]=l+y(y(y(p*A)+y(v*x))+y(c*g)),g=d[t+48>>2],A=d[t+8>>2],x=d[t>>2],C=d[t+4>>2],E=d[t+52>>2],w=d[t+24>>2],P=d[t+16>>2],I=d[t+20>>2],N=d[t+56>>2],T=d[t+40>>2],D=d[t+32>>2],M=d[t+36>>2],p=y(p-_),v=y(v-u),c=y(c-h),l=y(S(y(y(y(p*p)+y(v*v))+y(c*c)))),d[r+52>>2]=l,f[r+48>>2]=0,f[r+32>>2]=0,O=c,c=l>y(9999999747378752e-20)?y(y(1)/l):y(1),d[r+44>>2]=O*c,d[r+40>>2]=v*c,d[r+36>>2]=p*c,d[r+28>>2]=N+y(y(y(_*D)+y(u*M))+y(h*T)),d[r+24>>2]=E+y(y(y(_*P)+y(u*I))+y(h*w)),d[r+20>>2]=g+y(y(y(_*x)+y(u*C))+y(h*A)),b=1}return R=s+544|0,b}function J(e,t,n,i,a,r){var s,c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),v=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=0,O=y(0),z=0,L=y(0),F=y(0),U=y(0),B=y(0),k=0,G=0;R=s=R-19040|0,f[r>>2]=0,f[r+4>>2]=0,f[r+32>>2]=0,f[r+24>>2]=0,f[r+28>>2]=0,f[r+16>>2]=0,f[r+20>>2]=0,f[r+8>>2]=0,f[r+12>>2]=0,f[s+18916>>2]=n,f[s+18912>>2]=e,c=d[i+20>>2],l=d[i+36>>2],_=d[t+20>>2],u=d[t+36>>2],h=d[i+24>>2],v=d[t+24>>2],p=d[i+40>>2],A=d[t+40>>2],x=d[i+32>>2],b=d[i>>2],C=d[i+16>>2],S=d[i+4>>2],E=d[t+32>>2],w=d[t>>2],T=d[t+16>>2],I=d[t+4>>2],P=d[i+8>>2],N=d[t+8>>2],f[s+18964>>2]=0,f[s+18948>>2]=0,f[s+18932>>2]=0,D=y(y(y(N*P)+y(v*h))+y(A*p)),d[s+18960>>2]=D,O=y(y(y(I*P)+y(_*h))+y(u*p)),d[s+18956>>2]=O,h=y(y(y(w*P)+y(T*h))+y(E*p)),d[s+18952>>2]=h,p=y(y(y(N*S)+y(v*c))+y(A*l)),d[s+18944>>2]=p,P=y(y(y(I*S)+y(_*c))+y(u*l)),d[s+18940>>2]=P,c=y(y(y(w*S)+y(T*c))+y(E*l)),d[s+18936>>2]=c,l=y(y(y(b*N)+y(C*v))+y(x*A)),d[s+18928>>2]=l,_=y(y(y(b*I)+y(C*_))+y(x*u)),d[s+18924>>2]=_,u=y(y(y(b*w)+y(C*T))+y(x*E)),d[s+18920>>2]=u,v=d[t+20>>2],A=d[t+36>>2],x=d[t+24>>2],b=d[t+52>>2],C=d[i+52>>2],S=d[t+40>>2],E=d[t+56>>2],w=d[i+56>>2],T=d[t>>2],I=d[t+16>>2],N=d[t+32>>2],L=d[t+4>>2],F=d[t+8>>2],U=d[t+48>>2],B=d[i+48>>2],f[s+19036>>2]=0,f[s+19028>>2]=0,f[s+19012>>2]=0,d[s+19008>>2]=D,d[s+19004>>2]=p,d[s+19e3>>2]=l,f[s+18996>>2]=0,d[s+18992>>2]=O,d[s+18988>>2]=P,d[s+18984>>2]=_,f[s+18980>>2]=0,d[s+18976>>2]=h,d[s+18972>>2]=c,c=y(B-U),l=y(C-b),_=y(w-E),d[s+19024>>2]=y(y(F*c)+y(x*l))+y(S*_),d[s+19020>>2]=y(y(c*L)+y(l*v))+y(_*A),d[s+19016>>2]=y(y(c*T)+y(l*I))+y(_*N),f[s+19032>>2]=184,d[s+18968>>2]=u,f[(e=s+18664|0)>>2]=0,f[e+4>>2]=0,f[s+18656>>2]=0,f[s+18660>>2]=0,f[s+18892>>2]=0,f[s+18896>>2]=0,f[s+18904>>2]=2,f[s+18672>>2]=0,c=d[a>>2],l=d[a+4>>2],_=d[a+8>>2],f[s+28>>2]=0,d[s+24>>2]=-_,d[s+20>>2]=-l,d[s+16>>2]=-c;e:if(!((e=j(s+18528|0,s+18912|0,s+16|0)+-1|0)>>>0>1)){t:{if(e-1){for(f[(e=s+18520|0)>>2]=0,f[e+4>>2]=0,f[(e=s- -64|0)>>2]=0,f[e+4>>2]=0,f[s+72>>2]=0,f[s+18512>>2]=0,f[s+18516>>2]=0,f[s+18508>>2]=0,f[s+16>>2]=9,f[s+56>>2]=0,f[s+60>>2]=0,i=0;e=14296+(g(0-i|0,56)+s|0)|0,f[e+4200>>2]=0,n=f[s+18520>>2],f[e+4204>>2]=n,e=e+4156|0,n&&(f[n+44>>2]=e),f[s+18520>>2]=e,256!=(0|(i=i+1|0)););if(f[s+18524>>2]=256,c=d[a>>2],l=d[a+4>>2],_=d[a+8>>2],f[s+12>>2]=0,d[s+8>>2]=-_,d[s+4>>2]=-l,d[s>>2]=-c,9!=(0|Y(s+16|0,s+18528|0,s))){if(!f[s+52>>2]){c=y(0),l=y(0),_=y(0);break t}for(_=y(0),i=0,l=y(0),c=y(0);e=f[s+19032>>2],n=s,a=f[s+19036>>2],k=M=f[s+18912>>2]+(a>>1)|0,G=f[4+(z=(s+16|0)+(i<<2)|0)>>2],1&a&&(e=f[e+f[M>>2]>>2]),o[e](n,k,G),u=d[z+20>>2],_=y(_+y(u*d[s+8>>2])),l=y(l+y(u*d[s+4>>2])),c=y(c+y(d[s>>2]*u)),(i=i+1|0)>>>0<m[s+52>>2];);break t}f[r>>2]=3;break e}f[r>>2]=2;break e}M=1,f[r>>2]=1,u=d[t+48>>2],h=d[t+8>>2],v=d[t>>2],p=d[t+4>>2],A=d[t+52>>2],x=d[t+24>>2],b=d[t+16>>2],C=d[t+20>>2],S=d[t+56>>2],E=d[t+40>>2],w=d[t+32>>2],T=d[t+36>>2],f[r+16>>2]=0,d[r+12>>2]=S+y(y(y(c*w)+y(l*T))+y(_*E)),d[r+8>>2]=A+y(y(y(c*b)+y(l*C))+y(_*x)),d[r+4>>2]=u+y(y(y(c*v)+y(l*p))+y(_*h)),A=d[t+48>>2],x=d[t+8>>2],b=d[t>>2],C=d[t+4>>2],S=d[t+52>>2],E=d[t+24>>2],w=d[t+16>>2],T=d[t+20>>2],I=d[t+56>>2],P=d[t+40>>2],N=d[t+32>>2],D=d[t+36>>2],h=d[s+60>>2],v=d[s- -64>>2],p=d[s+56>>2],u=d[s+72>>2],f[r+48>>2]=0,f[r+32>>2]=0,d[r+52>>2]=-u,d[r+44>>2]=-v,d[r+40>>2]=-h,d[r+36>>2]=-p,c=y(c-y(p*u)),l=y(l-y(u*h)),_=y(_-y(u*v)),d[r+28>>2]=I+y(y(y(N*c)+y(D*l))+y(P*_)),d[r+24>>2]=S+y(y(y(c*w)+y(l*T))+y(_*E)),d[r+20>>2]=A+y(y(y(c*b)+y(l*C))+y(_*x))}return R=s+19040|0,M}function $(e,t){var n=y(0),i=0,o=0,a=0,r=y(0),u=0,f=0,h=y(0),p=y(0),m=y(0),v=0,g=y(0),x=0,b=y(0),C=y(0),E=y(0),w=y(0);r=y(1);e:{t:{c(e);n:if(1065353216!=(0|(u=l(0)))&&(c(t),i=2147483647&(f=l(0)))){if(o=2147483647&u,!(i>>>0<2139095041&&o>>>0<=2139095040))return y(e+t);v=0,(0|u)>-1||(v=2,i>>>0>1266679807||(v=0,i>>>0<1065353216||(v=0,(0|i)==(x=i>>>(a=150-(i>>>23|0)|0)|0)<<a&&(v=2-(1&x)|0)))),a=v;i:{if(1065353216!=(0|i)){if(2139095040!=(0|i))break i;if(1065353216==(0|o))break n;return o>>>0>=1065353217?(0|f)>-1?t:y(0):y((0|f)>-1?0:-t)}return(0|f)>-1?e:y(y(1)/e)}if(1073741824==(0|f))return y(e*e);if(!(1056964608!=(0|f)|(0|u)<0))return y(S(e));if(n=y(A(e)),!o||1065353216==(1073741823&u)){if(r=(0|f)<0?y(y(1)/n):n,(0|u)>-1)break n;return a|o+-1065353216?1==(0|a)?y(-r):r:(e=y(r-r),y(e/e))}if(!((0|u)>-1|a>>>0>1)){if(a-1)return e=y(e-e),y(e/e);r=y(-1)}if(i>>>0>=1291845633){if(o>>>0<=1065353207)return y((0|f)<0?y(r*y(1.0000000150474662e30))*y(1.0000000150474662e30):y(r*y(1.0000000031710769e-30))*y(1.0000000031710769e-30));if(o>>>0>=1065353224)return y((0|f)>0?y(r*y(1.0000000150474662e30))*y(1.0000000150474662e30):y(r*y(1.0000000031710769e-30))*y(1.0000000031710769e-30));e=y(n+y(-1)),n=y(e*y(1.44268798828125)),h=y(y(e*y(7052607543300837e-21))+y(y(y(e*e)*y(y(.5)-y(e*y(y(e*y(-.25))+y(.3333333432674408)))))*y(-1.4426950216293335))),s(0,-4096&(c(y(n+h)),l(0))),e=_(),g=y(e-n)}else a=1065353216|(u=8388607&(o=(i=o>>>0<8388608)?(c(y(n*y(16777216))),l(0)):o)),i=(o>>23)+(i?-151:-127)|0,o=0,u>>>0<1885298||(u>>>0<6140887?o=1:(a=a+-8388608|0,i=i+1|0)),g=d[19408+(u=o<<2)>>2],s(0,a),h=_(),p=d[u+19392>>2],m=y(h-p),b=y(y(1)/y(p+h)),s(0,-4096&(c(n=y(m*b)),l(0))),e=_(),C=y(e*e),E=e,w=m,s(0,4194304+((a>>1&-536875008|536870912)+(o<<21)|0)|0),m=_(),h=y(b*y(y(w-y(e*m))-y(e*y(h-y(m-p))))),m=y(y(n+e)*h),e=y(n*n),p=y(m+y(y(e*e)*y(y(e*y(y(e*y(y(e*y(y(e*y(y(e*y(.20697501301765442))+y(.23066075146198273)))+y(.2727281153202057)))+y(.3333333432674408)))+y(.4285714328289032)))+y(.6000000238418579)))),s(0,-4096&(c(y(y(C+y(3))+p)),l(0))),e=_(),m=y(E*e),n=y(y(h*e)+y(n*y(p-y(y(e+y(-3))-C)))),s(0,-4096&(c(y(m+n)),l(0))),e=_(),p=y(e*y(.9619140625)),h=y(d[u+19400>>2]+y(y(y(n-y(e-m))*y(.9617967009544373))+y(e*y(-.00011736857413779944)))),n=y(0|i),s(0,-4096&(c(y(y(g+y(p+h))+n)),l(0))),e=_(),g=y(y(y(e-n)-g)-p);if(s(0,-4096&f),p=_(),n=y(e*p),e=y(y(y(h-g)*t)+y(y(t-p)*e)),c(t=y(n+e)),(0|(a=l(0)))>=1124073473)break t;o=1124073472;i:{o:{if(1124073472==(0|a)){if(!(y(e+y(4.299566569443414e-8))>y(t-n)))break o;break t}if(o=2147483647&a,!(e<=y(t-n)^1|-1021968384!=(0|a))|o>>>0>=1125515265)break e;if(i=0,o>>>0<1056964609)break i}i=(8388607&(f=(8388608>>>(o>>>23|0)-126|0)+a|0)|8388608)>>>150-(o=f>>>23&255)|0,i=(0|a)<0?0-i|0:i,n=y(n-(s(0,f&-8388608>>o+-127),_())),c(y(e+n)),a=l(0)}s(0,-32768&a),t=_(),h=y(t*y(.693145751953125)),n=y(y(t*y(14286065379565116e-22))+y(y(e-y(t-n))*y(.6931471824645996))),e=y(h+n),t=y(e*e),t=y(e-y(t*y(y(t*y(y(t*y(y(t*y(y(t*y(4.138136944220605e-8))+y(-16533901998627698e-22)))+y(661375597701408e-19)))+y(-.0027777778450399637)))+y(.1666666716337204)))),m=y(y(e*t)/y(t+y(-2))),t=y(n-y(e-h)),(0|(a=0|(c(e=y(y(e-y(m-y(t+y(e*t))))+y(1))),l(0)+(i<<23))))<=8388607?e=function(e,t){i:if((0|t)>=128){if(e=y(e*y(17014118346046923e22)),(0|t)<255){t=t+-127|0;break i}e=y(e*y(17014118346046923e22)),t=((0|t)<381?t:381)+-254|0}else(0|t)>-127||(e=y(e*y(11754943508222875e-54)),(0|t)>-253?t=t+126|0:(e=y(e*y(11754943508222875e-54)),t=((0|t)>-378?t:-378)+252|0));return y(e*(s(0,1065353216+(t<<23)|0),_()))}(e,i):(s(0,a),e=_()),r=y(r*e)}return r}return y(y(r*y(1.0000000150474662e30))*y(1.0000000150474662e30))}return y(y(r*y(1.0000000031710769e-30))*y(1.0000000031710769e-30))}function ee(e,t,n,i,r,s,c,l){var _,u=0,p=0,m=0,v=0,A=y(0),x=y(0),b=y(0),C=0,S=y(0),E=y(0),w=0,T=y(0),P=y(0),I=y(0),N=y(0),D=0,M=0,O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0);if(R=_=R-32|0,(0|(u=f[r+4>>2]))<=-1)for(f[r+8>>2]<=-1&&((p=f[r+12>>2])&&(h[r+16|0]&&p&&(f[6258]=f[6258]+1,o[f[4969]](p)),f[r+12>>2]=0),a[r+16|0]=1,f[r+8>>2]=0,f[r+12>>2]=0);m=f[_+20>>2],p=f[r+12>>2]+(u<<4)|0,f[p>>2]=f[_+16>>2],f[p+4>>2]=m,v=f[_+28>>2],f[p+8>>2]=f[_+24>>2],f[p+12>>2]=v,v=(p=u+1|0)>>>0>=u>>>0,u=p,v;);if(p=0,f[r+4>>2]=0,v=f[i+4>>2],f[r+8>>2]<(0|v)){if(v&&(f[6257]=f[6257]+1,p=0|o[f[4968]](v<<4,16),!((0|(M=f[r+4>>2]))<1)))for(u=0;C=w=(m=u<<4)+p|0,m=m+f[r+12>>2]|0,D=f[m+4>>2],f[C>>2]=f[m>>2],f[C+4>>2]=D,C=f[m+12>>2],f[w+8>>2]=f[m+8>>2],f[w+12>>2]=C,(0|M)!=(0|(u=u+1|0)););(u=f[r+12>>2])&&(h[r+16|0]&&u&&(f[6258]=f[6258]+1,o[f[4969]](u)),f[r+12>>2]=0),f[r+12>>2]=p,a[r+16|0]=1,f[r+8>>2]=v}if(!((0|(m=f[t+28>>2]))<1)){for(T=d[n+40>>2],O=d[n+36>>2],S=d[n+24>>2],z=d[n+20>>2],w=f[t+36>>2],P=d[e+8>>2],L=d[e+4>>2],I=d[e>>2],F=d[n+32>>2],U=d[n+16>>2],B=d[n+8>>2],k=d[n+4>>2],N=d[n>>2],u=0,b=y(34028234663852886e22),v=-1;p=w+g(u,36)|0,x=d[p+20>>2],A=d[p+24>>2],E=d[p+28>>2],b=(p=(x=y(y(y(y(y(y(x*N)+y(A*k))+y(E*B))*I)+y(y(y(y(x*U)+y(A*z))+y(E*S))*L))+y(y(y(y(x*F)+y(A*O))+y(E*T))*P)))<b)?x:b,v=p?u:v,(0|m)!=(0|(u=u+1|0)););if(!((0|v)<0)){if(m=f[t+36>>2]+g(v,36)|0,(0|(M=f[m+4>>2]))<1)p=i;else for(u=0;;){if(p=r,w=(0|(v=u+1|0))==(0|M),D=f[t+16>>2],C=f[m+12>>2],r=D+(f[C+((w?0:v)<<2)>>2]<<4)|0,j=d[r+8>>2],N=d[r>>2],G=d[r+4>>2],r=D+(f[(u<<2)+C>>2]<<4)|0,b=d[r+8>>2],x=d[r>>2],A=d[r+4>>2],X=d[n+56>>2],Q=d[n+52>>2],K=d[n+48>>2],E=d[n+40>>2],T=d[n+32>>2],O=d[n+36>>2],S=d[m+28>>2],z=d[n+8>>2],P=d[m+20>>2],L=d[n>>2],I=d[m+24>>2],F=d[n+4>>2],U=d[n+24>>2],B=d[n+16>>2],k=d[n+20>>2],f[_+28>>2]=0,N=y(x-N),G=y(A-G),j=y(b-j),V=y(y(y(L*N)+y(F*G))+y(z*j)),H=y(y(y(B*P)+y(k*I))+y(U*S)),W=y(y(y(N*B)+y(G*k))+y(j*U)),q=y(y(y(L*P)+y(F*I))+y(z*S)),Y=y(y(V*H)-y(W*q)),d[_+24>>2]=-Y,S=y(y(y(T*P)+y(O*I))+y(E*S)),P=y(y(y(N*T)+y(G*O))+y(j*E)),I=y(y(W*S)-y(P*H)),d[_+16>>2]=-I,S=y(-y(y(P*q)-y(V*S))),d[_+20>>2]=S,he(r=i,p,_+16|0,y(-y(y(y(y(Q+y(y(y(x*B)+y(A*k))+y(b*U)))*S)-y(I*y(K+y(y(y(x*L)+y(A*F))+y(b*z)))))-y(Y*y(X+y(y(y(x*T)+y(A*O))+y(b*E))))))),(0|(u=f[r+4>>2]))<=-1)for(f[r+8>>2]<=-1&&((i=f[r+12>>2])&&(h[r+16|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[r+12>>2]=0),a[r+16|0]=1,f[r+8>>2]=0,f[r+12>>2]=0);D=f[_+4>>2],i=f[r+12>>2]+(u<<4)|0,f[i>>2]=f[_>>2],f[i+4>>2]=D,C=f[_+12>>2],f[i+8>>2]=f[_+8>>2],f[i+12>>2]=C,C=(i=u+1|0)>>>0>=u>>>0,u=i,C;);if(f[r+4>>2]=0,u=v,i=p,w)break}if(!((0|(v=f[p+4>>2]))<1))for(b=d[m+20>>2],x=d[m+24>>2],A=d[m+28>>2],E=y(y(y(b*d[n>>2])+y(x*d[n+4>>2]))+y(A*d[n+8>>2])),T=y(y(y(b*d[n+16>>2])+y(x*d[n+20>>2]))+y(A*d[n+24>>2])),b=y(y(y(b*d[n+32>>2])+y(x*d[n+36>>2]))+y(A*d[n+40>>2])),x=y(d[m+32>>2]-y(y(y(E*d[n+48>>2])+y(T*d[n+52>>2]))+y(b*d[n+56>>2]))),n=0;t=f[p+12>>2]+(n<<4)|0,(A=(A=y(x+y(y(y(E*d[t>>2])+y(T*d[t+4>>2]))+y(b*d[t+8>>2]))))<=s?s:A)<=c&&(i=f[t+12>>2],f[_+24>>2]=f[t+8>>2],f[_+28>>2]=i,i=f[t+4>>2],f[_+16>>2]=f[t>>2],f[_+20>>2]=i,o[f[f[l>>2]+16>>2]](l,e,_+16|0,A),v=f[p+4>>2]),(0|(n=n+1|0))<(0|v););}}R=_+32|0}function te(e,t,n,i,o,a,r,s,c,l,_,u,p){var m=y(0),v=y(0),A=y(0),C=0,E=y(0),w=y(0),T=0,P=y(0),I=y(0),R=y(0),N=y(0),D=y(0);if(l=g(f[c+24>>2],l),(C=f[t+84>>2]+-3|0)>>>0>1)C=0;else{if(C-1)Mt(e,n,i,c,l,_,u,p),d[(C=l<<2)+f[c+28>>2]>>2]=y(y(d[c>>2]*d[t+12>>2])*d[t+72>>2])*y(0|(u?-1:1)),f[C+f[c+36>>2]>>2]=-8388609,f[C+f[c+40>>2]>>2]=2139095039,T=t+16|0,C=1;else{u?(m=d[_>>2],A=d[_+4>>2],v=y(y(d[r>>2]*m)+y(d[r+4>>2]*A)),E=d[_+8>>2],P=y(d[r+8>>2]*E),C=s):(m=d[_>>2],A=d[_+4>>2],v=y(y(d[o>>2]*m)+y(d[o+4>>2]*A)),E=d[_+8>>2],P=y(d[o+8>>2]*E),C=a),I=d[C+8>>2],R=d[C>>2],N=d[C+4>>2],Mt(e,n,i,c,l,_,u,p),C=f[c+28>>2]+(l<<2)|0,D=y(0|(u?-1:1)),w=y(y(y(d[c>>2]*d[t+12>>2])*d[t+72>>2])*D),d[C>>2]=w,v=y(y(v+P)-y(y(y(m*R)+y(A*N))+y(E*I))),m=y(w-y(v*d[t+12>>2]));e:if(u){if(!(m>y(0)))break e;if(!((m=y(v*y(-d[t+8>>2])))>w))break e;d[C>>2]=m}else m<y(0)&&(m=y(v*y(-d[t+8>>2])))<w&&(d[C>>2]=m);d[(C=l<<2)+f[c+36>>2]>>2]=y(u?0:-34028234663852886e22),d[C+f[c+40>>2]>>2]=y(u?34028234663852886e22:0),f[C+f[c+32>>2]>>2]=f[t+16>>2],Mt(e,n,i,c,l=f[c+24>>2]+l|0,_,u,p),C=f[c+28>>2]+(l<<2)|0,m=y(y(y(d[c>>2]*d[t+12>>2])*d[t+76>>2])*D),d[C>>2]=m,A=y(m-y(v*d[t+12>>2])),T=t+16|0;e:if(u){if(!(A<y(0)))break e;if(!((v=y(v*y(-d[t+8>>2])))<m))break e;d[C>>2]=v}else A>y(0)&&(v=y(v*y(-d[t+8>>2])))>m&&(d[C>>2]=v);d[(C=l<<2)+f[c+36>>2]>>2]=y(u?-34028234663852886e22:0),d[C+f[c+40>>2]>>2]=y(u?0:34028234663852886e22),C=2}f[f[c+32>>2]+(l<<2)>>2]=f[T>>2],l=f[c+24>>2]+l|0}return h[t+28|0]&&(!h[t+40|0]&&(Mt(e,n,i,c,l,_,u,p),v=d[t+32>>2],v=ji(d[t+80>>2],d[t>>2],d[t+4>>2],u?v:y(-v),y(d[c>>2]*d[t+20>>2])),d[(T=l<<2)+f[c+28>>2]>>2]=v*d[t+32>>2],d[T+f[c+36>>2]>>2]=-d[t+36>>2],f[T+f[c+40>>2]>>2]=f[t+36>>2],f[T+f[c+32>>2]>>2]=f[t+24>>2],C=C+1|0,l=f[c+24>>2]+l|0,!h[t+28|0]|!h[t+40|0])||(v=d[t+44>>2],m=y(d[t+80>>2]-v),u&&(v=(T=m>y(3.1415927410125732))?y(v+y(6.2831854820251465)):v,(m=T?y(m+y(-6.2831854820251465)):m)<y(-3.1415927410125732)&&(v=y(v+y(-6.2831854820251465)),m=y(m+y(6.2831854820251465)))),Mt(e,n,i,c,l,_,u,p),A=y(0),E=d[t+32>>2],w=m<y(0)?y(-E):E,m!=y(0)&&(P=y(-w),I=d[t+80>>2],(A=d[t>>2])>(E=d[t+4>>2])?(E=m<y(0)?v:y(34028234663852886e22),m=m>y(0)?v:y(-34028234663852886e22)):(E=m<y(0)&&v<E?v:E,m=m>y(0)&&v>A?v:A),A=ji(I,m,E,P,y(d[c>>2]*d[t+20>>2]))),d[(T=l<<2)+f[c+28>>2]>>2]=y(w*A)*y(0|(u?-1:1)),d[T+f[c+36>>2]>>2]=-d[t+36>>2],f[T+f[c+40>>2]>>2]=f[t+36>>2],f[T+f[c+32>>2]>>2]=f[t+24>>2],C=C+1|0,l=f[c+24>>2]+l|0)),h[t+48|0]&&(A=d[t+68>>2],w=d[t+80>>2],Mt(e,n,i,c,l,_,u,p),v=d[t+52>>2],E=d[t+60>>2],m=y(y(1)/d[c>>2]),N=y(w-A),u?(A=d[_>>2],I=d[_+4>>2],R=y(y(d[r>>2]*A)+y(d[r+4>>2]*I)),w=d[_+8>>2],P=y(d[r+8>>2]*w)):(s=a,A=d[_>>2],I=d[_+4>>2],R=y(y(d[o>>2]*A)+y(d[o+4>>2]*I)),w=d[_+8>>2],P=y(d[o+8>>2]*w)),w=y(y(R+P)-y(y(y(A*d[s>>2])+y(I*d[s+4>>2]))+y(w*d[s+8>>2]))),A=y(y(1)/d[f[e+32>>2]+404>>2]),A=(P=y(y(1)/d[f[e+28>>2]+404>>2]))>A?A:P,!h[t+56|0]|y(m*y(S(y(v/A))))>y(.25)^1||(v=y(y(y(y(y(1)/m)/m)*y(.0625))*A)),e=l<<2,P=y(m*y(N*v)),v=y(w*y(-(y(E*m)>A&&h[t+64|0]?y(A/m):E))),A=y(0|(u?-1:1)),v=y(m*y(v*A)),m=y(P+v),d[e+f[c+28>>2]>>2]=w+y(m*A),A=(t=m<v)?v:m,v=t?m:v,u?(d[e+f[c+36>>2]>>2]=x(y(-A),y(0)),A=y(-v)):d[e+f[c+36>>2]>>2]=x(v,y(0)),d[(e=l<<2)+f[c+40>>2]>>2]=b(A,y(0)),f[e+f[c+32>>2]>>2]=0,C=C+1|0),C}function ne(e){var t,n=0,i=0,o=0,a=0,r=y(0),s=y(0),c=y(0),l=y(0),_=0,u=y(0),h=y(0),p=y(0),m=0,v=y(0),g=y(0);R=t=R-48|0;e:{t:{i=f[e+372>>2];n:if(!((n=f[i+32>>2]+-1|0)>>>0>3)){switch(n-1|0){default:for(o=f[e+364>>2],n=1;;){if(f[t+40>>2]=0,f[t+44>>2]=0,f[t+32>>2]=0,f[t+36>>2]=0,f[(t+32|0)+(a<<2)>>2]=1065353216,f[16+(_=(n<<2)+i|0)>>2]=0,o=o+-1|0,f[e+364>>2]=o,o=f[348+((o<<2)+e|0)>>2],f[_>>2]=o,f[i+32>>2]=n+1,Fn(e,t+32|0,o),ne(e))break t;if(i=f[e+372>>2],n=f[i+32>>2]+-1|0,f[i+32>>2]=n,o=f[e+364>>2],n=f[i+(n<<2)>>2],f[348+((o<<2)+e|0)>>2]=n,i=f[e+372>>2],f[t+28>>2]=0,d[t+24>>2]=-d[t+40>>2],d[t+20>>2]=-d[t+36>>2],d[t+16>>2]=-d[t+32>>2],_=f[i+32>>2],f[16+(m=i+(_<<2)|0)>>2]=0,f[e+364>>2]=o,f[m>>2]=n,f[i+32>>2]=_+1,Fn(e,t+16|0,n),ne(e))break t;if(i=f[e+372>>2],n=f[i+32>>2]+-1|0,f[i+32>>2]=n,i=f[i+(n<<2)>>2],o=(n=f[e+364>>2])+1|0,f[e+364>>2]=o,f[348+((n<<2)+e|0)>>2]=i,3==(0|(a=a+1|0)))break n;i=f[e+372>>2],n=f[i+32>>2]}case 0:for(n=f[i+4>>2],i=f[i>>2],r=y(d[n+24>>2]-d[i+24>>2]),c=y(d[n+20>>2]-d[i+20>>2]),s=y(d[n+16>>2]-d[i+16>>2]),i=0;;){if(f[t+40>>2]=0,f[t+44>>2]=0,f[t+32>>2]=0,f[t+36>>2]=0,f[(t+32|0)+(i<<2)>>2]=1065353216,f[t+28>>2]=0,l=d[t+32>>2],u=d[t+40>>2],h=y(y(r*l)-y(s*u)),d[t+20>>2]=h,p=d[t+36>>2],u=y(y(c*u)-y(r*p)),d[t+16>>2]=u,l=y(y(s*p)-y(c*l)),d[t+24>>2]=l,y(y(l*l)+y(y(u*u)+y(h*h)))>y(0)){if(n=f[e+372>>2],o=f[n+32>>2],f[16+(a=(o<<2)+n|0)>>2]=0,_=f[e+364>>2]+-1|0,f[e+364>>2]=_,m=a,a=f[348+((_<<2)+e|0)>>2],f[m>>2]=a,f[n+32>>2]=o+1,Fn(e,t+16|0,a),ne(e))break t;if(n=f[e+372>>2],o=f[n+32>>2]+-1|0,f[n+32>>2]=o,a=f[e+364>>2],o=f[n+(o<<2)>>2],f[348+((a<<2)+e|0)>>2]=o,n=f[e+372>>2],f[t+12>>2]=0,d[t+8>>2]=-d[t+24>>2],d[t+4>>2]=-d[t+20>>2],d[t>>2]=-d[t+16>>2],_=f[n+32>>2],f[16+(m=n+(_<<2)|0)>>2]=0,f[e+364>>2]=a,f[m>>2]=o,f[n+32>>2]=_+1,Fn(e,t,o),ne(e))break t;n=f[e+372>>2],o=f[n+32>>2]+-1|0,f[n+32>>2]=o,n=f[n+(o<<2)>>2],o=f[e+364>>2],f[e+364>>2]=o+1,f[348+((o<<2)+e|0)>>2]=n}if(3==(0|(i=i+1|0)))break}break n;case 1:if(n=f[i+4>>2],h=d[n+20>>2],o=f[i+8>>2],u=d[o+24>>2],a=f[i>>2],r=d[a+24>>2],l=d[n+24>>2],p=d[o+20>>2],c=d[a+20>>2],v=d[o+16>>2],s=d[a+16>>2],g=d[n+16>>2],f[t+44>>2]=0,h=y(h-c),u=y(u-r),l=y(l-r),p=y(p-c),r=y(y(h*u)-y(l*p)),d[t+32>>2]=r,c=l,l=y(v-s),s=y(g-s),c=y(y(c*l)-y(s*u)),d[t+36>>2]=c,s=y(y(s*p)-y(h*l)),d[t+40>>2]=s,!(y(y(s*s)+y(y(r*r)+y(c*c)))>y(0)))break n;if(f[i+28>>2]=0,n=f[e+364>>2]+-1|0,f[e+364>>2]=n,n=f[348+((n<<2)+e|0)>>2],f[i+32>>2]=4,f[i+12>>2]=n,Fn(e,t+32|0,n),ne(e))break t;if(i=f[e+372>>2],n=f[i+32>>2]+-1|0,f[i+32>>2]=n,o=f[e+364>>2],n=f[i+(n<<2)>>2],f[348+((o<<2)+e|0)>>2]=n,i=f[e+372>>2],f[t+28>>2]=0,d[t+24>>2]=-d[t+40>>2],d[t+20>>2]=-d[t+36>>2],d[t+16>>2]=-d[t+32>>2],a=f[i+32>>2],f[16+(_=i+(a<<2)|0)>>2]=0,f[e+364>>2]=o,f[_>>2]=n,f[i+32>>2]=a+1,Fn(e,t+16|0,n),n=1,ne(e))break e;i=f[e+372>>2],n=f[i+32>>2]+-1|0,f[i+32>>2]=n,i=f[i+(n<<2)>>2],n=f[e+364>>2],f[e+364>>2]=n+1,f[348+((n<<2)+e|0)>>2]=i,n=0;break e;case 2:}if(e=f[i>>2],o=f[i+12>>2],r=d[o+16>>2],h=y(d[e+16>>2]-r),a=f[i+4>>2],c=d[o+20>>2],u=y(d[a+20>>2]-c),i=f[i+8>>2],s=d[o+24>>2],l=y(d[i+24>>2]-s),p=y(d[e+20>>2]-c),v=y(d[a+24>>2]-s),g=y(d[i+16>>2]-r),s=y(d[e+24>>2]-s),r=y(d[a+16>>2]-r),c=y(d[i+20>>2]-c),n=1,(r=y(y(y(y(h*u)*l)+y(y(y(y(y(p*v)*g)+y(y(s*r)*c))-y(y(h*v)*c))-y(y(p*r)*l)))-y(y(s*u)*g)))!=y(0)&r==r)break e}n=0;break e}n=1}return R=t+48|0,n}function ie(e,t,n,i,o,a,r,s,c,l,_,u){var p,m,v,A,x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0);v=f[e+16>>2],p=f[240+(v+g(o,244)|0)>>2],m=f[240+(g(i,244)+v|0)>>2],f[t+148>>2]=o,f[t+144>>2]=i,V=d[a+84>>2],A=f[a+84>>2],f[t+132>>2]=0,f[t+104>>2]=A,f[t+96>>2]=0,f[t+100>>2]=0,m?(e=f[n+4>>2],f[t+16>>2]=f[n>>2],f[t+20>>2]=e,e=f[n+12>>2],f[t+24>>2]=f[n+8>>2],f[t+28>>2]=e,b=d[r+8>>2],S=d[r>>2],E=d[r+4>>2],f[t+12>>2]=0,I=d[t+20>>2],z=d[t+16>>2],R=y(y(S*I)-y(E*z)),d[t+8>>2]=R,L=d[t+24>>2],S=y(y(b*z)-y(S*L)),d[t+4>>2]=S,E=y(y(E*L)-y(b*I)),d[t>>2]=E,b=d[m+612>>2],x=d[m+364>>2],N=d[m+356>>2],w=d[m+360>>2],C=d[m+608>>2],F=d[m+348>>2],U=d[m+340>>2],B=d[m+344>>2],T=d[m+332>>2],D=d[m+328>>2],M=d[m+604>>2],P=d[m+324>>2],f[t+76>>2]=0,D=y(M*y(y(y(E*P)+y(S*D))+y(R*T))),d[t+64>>2]=D,M=y(C*y(y(y(E*U)+y(S*B))+y(R*F))),d[t+68>>2]=M,P=y(b*y(y(y(E*N)+y(S*w))+y(R*x))),d[t+72>>2]=P):(f[t+64>>2]=0,f[t+68>>2]=0,f[t>>2]=0,f[t+4>>2]=0,f[t+72>>2]=0,f[t+76>>2]=0,f[t+8>>2]=0,f[t+12>>2]=0,f[t+16>>2]=0,f[t+20>>2]=0,f[t+24>>2]=0,f[t+28>>2]=0),p?(b=d[n>>2],x=d[n+4>>2],C=d[n+8>>2],f[t+60>>2]=0,F=y(-C),d[t+56>>2]=F,U=y(-x),d[t+52>>2]=U,B=y(-b),d[t+48>>2]=B,T=d[s+8>>2],O=d[s+4>>2],w=d[s>>2],f[t+44>>2]=0,N=y(y(b*O)-y(x*w)),d[t+40>>2]=N,w=y(y(C*w)-y(b*T)),d[t+36>>2]=w,C=y(y(x*T)-y(C*O)),d[t+32>>2]=C,b=d[p+332>>2],O=d[p+328>>2],T=d[p+608>>2],j=d[p+348>>2],k=d[p+340>>2],G=d[p+344>>2],x=d[p+612>>2],H=d[p+364>>2],W=d[p+356>>2],q=d[p+360>>2],Y=d[p+604>>2],X=d[p+324>>2],f[t+92>>2]=0,x=y(x*y(y(y(C*W)+y(w*q))+y(N*H))),d[t+88>>2]=x,T=y(T*y(y(y(C*k)+y(w*G))+y(N*j))),d[t+84>>2]=T,O=y(Y*y(y(y(C*X)+y(w*O))+y(N*b))),d[t+80>>2]=O):(f[t+80>>2]=0,f[t+84>>2]=0,f[t+32>>2]=0,f[t+36>>2]=0,f[t+88>>2]=0,f[t+92>>2]=0,f[t+40>>2]=0,f[t+44>>2]=0,f[t+48>>2]=0,f[t+52>>2]=0,f[t+56>>2]=0,f[t+60>>2]=0,N=y(0),w=y(0),C=y(0),F=y(0),U=y(0),B=y(0),x=y(0),T=y(0)),e=t,b=c,m?(c=d[r+8>>2],j=d[r+4>>2],G=y(y(y(M*c)-y(P*j))*d[n>>2]),k=P,P=d[r>>2],c=y(d[m+404>>2]+y(y(G+y(y(y(k*P)-y(c*D))*d[n+4>>2]))+y(y(y(j*D)-y(M*P))*d[n+8>>2])))):c=y(0),p?(D=d[s+4>>2],M=d[s+8>>2],k=y(y(y(x*D)-y(T*M))*d[n>>2]),P=x,x=d[s>>2],x=y(d[p+404>>2]+y(y(k+y(y(y(O*M)-y(P*x))*d[n+4>>2]))+y(y(y(T*x)-y(O*D))*d[n+8>>2])))):x=y(0),b=y(b/y(c+x)),d[e+108>>2]=b,m?(e=g(i,244)+v|0,I=y(y(y(y(d[e+176>>2]+d[e+208>>2])*z)+y(y(d[e+180>>2]+d[e+212>>2])*I))+y(y(d[e+184>>2]+d[e+216>>2])*L)),x=d[e+192>>2],L=d[e+200>>2],c=d[e+196>>2]):(x=y(0),I=y(y(y(z*y(0))+y(I*y(0)))+y(L*y(0))),L=y(0),c=y(0)),I=y(I+y(y(y(x*E)+y(c*S))+y(L*R))),p?(e=g(o,244)+v|0,E=y(y(y(y(d[e+176>>2]+d[e+208>>2])*B)+y(y(d[e+180>>2]+d[e+212>>2])*U))+y(y(d[e+184>>2]+d[e+216>>2])*F)),z=d[e+192>>2],S=d[e+200>>2],c=d[e+196>>2]):(S=y(0),E=y(y(y(B*y(0))+y(U*y(0)))+y(F*y(0))),z=y(0),c=y(0)),R=y(0),R=16&h[a+128|0]?y(b*y(y(d[l+44>>2]*y(-y(y(y(y(d[a+48>>2]-d[a+32>>2])*d[n>>2])+y(y(d[a+52>>2]-d[a+36>>2])*d[n+4>>2]))+y(y(d[a+56>>2]-d[a+40>>2])*d[n+8>>2]))))/d[l+12>>2])):R,f[t+128>>2]=0,f[t+124>>2]=A,d[t+116>>2]=u,d[t+112>>2]=y(b*y(_-y(I+y(E+y(y(y(z*C)+y(c*w))+y(S*N))))))+R,d[t+120>>2]=-V}function oe(e,t,n,i){var a,r=0,s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=0,M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=0,k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=y(0),J=0,$=0,ee=y(0),te=y(0),ne=y(0),ie=y(0),oe=y(0),ae=y(0);R=a=R-240|0,f[e+16>>2]?(to(f[e+4>>2]),r=f[e+12>>2],D=f[r+4>>2],B=f[e+16>>2],J=r,$=f[B+4>>2],M=y(o[f[f[r>>2]+48>>2]](r)),r=f[e+16>>2],e=ki(a+160|0,J,B,D,$,M,y(o[f[f[r>>2]+48>>2]](r)),f[e+4>>2],f[e+8>>2]),f[a+152>>2]=1566444395,r=f[t+12>>2],f[a+32>>2]=f[t+8>>2],f[a+36>>2]=r,r=f[t+4>>2],f[a+24>>2]=f[t>>2],f[a+28>>2]=r,r=f[t+28>>2],f[a+48>>2]=f[t+24>>2],f[a+52>>2]=r,r=f[t+20>>2],f[a+40>>2]=f[t+16>>2],f[a+44>>2]=r,D=f[t+44>>2],f[(r=a- -64|0)>>2]=f[t+40>>2],f[r+4>>2]=D,r=f[t+36>>2],f[a+56>>2]=f[t+32>>2],f[a+60>>2]=r,r=f[t+60>>2],f[a+80>>2]=f[t+56>>2],f[a+84>>2]=r,r=f[t+52>>2],f[a+72>>2]=f[t+48>>2],f[a+76>>2]=r,t=f[n+12>>2],f[a+96>>2]=f[n+8>>2],f[a+100>>2]=t,t=f[n+4>>2],f[a+88>>2]=f[n>>2],f[a+92>>2]=t,t=f[n+20>>2],f[a+104>>2]=f[n+16>>2],f[a+108>>2]=t,t=f[n+28>>2],f[a+112>>2]=f[n+24>>2],f[a+116>>2]=t,t=f[n+44>>2],f[a+128>>2]=f[n+40>>2],f[a+132>>2]=t,t=f[n+36>>2],f[a+120>>2]=f[n+32>>2],f[a+124>>2]=t,t=f[n+52>>2],f[a+136>>2]=f[n+48>>2],f[a+140>>2]=t,t=f[n+60>>2],f[a+144>>2]=f[n+56>>2],f[a+148>>2]=t,Is(e,a+24|0,i,0)):(ee=d[n+52>>2],O=d[n+56>>2],z=d[t+52>>2],L=d[t+56>>2],_=d[t+20>>2],u=d[t+36>>2],l=d[n+20>>2],h=d[n+36>>2],s=d[n+24>>2],p=d[t+24>>2],c=d[n+40>>2],A=d[t+40>>2],F=d[n+48>>2],U=d[t+48>>2],r=f[e+12>>2],x=d[t+32>>2],b=d[t>>2],C=d[t+16>>2],S=d[t+4>>2],v=d[n+32>>2],m=d[n+16>>2],P=d[n>>2],I=d[n+4>>2],N=d[n+8>>2],E=d[t+8>>2],e=f[e+20>>2],g=d[e+56>>2],w=d[e+60>>2],T=d[e+52>>2],f[a+172>>2]=0,k=y(y(y(E*I)+y(p*l))+y(A*h)),g=y(-g),j=y(y(y(E*P)+y(p*m))+y(A*v)),G=y(y(y(E*N)+y(p*s))+y(A*c)),d[a+168>>2]=y(y(k*g)-y(T*j))-y(w*G),V=y(y(y(S*I)+y(_*l))+y(u*h)),H=y(y(y(S*P)+y(_*m))+y(u*v)),W=y(y(y(S*N)+y(_*s))+y(u*c)),d[a+164>>2]=y(y(V*g)-y(T*H))-y(w*W),q=y(y(y(b*I)+y(C*l))+y(x*h)),Y=y(y(y(b*P)+y(C*m))+y(x*v)),X=y(y(y(b*N)+y(C*s))+y(x*c)),d[a+160>>2]=y(y(q*g)-y(T*Y))-y(w*X),o[f[f[r>>2]+64>>2]](a+24|0,r,a+160|0),_=d[e+56>>2],u=d[e+60>>2],te=d[e+68>>2],p=d[e+52>>2],A=d[a+24>>2],x=d[a+28>>2],b=d[a+32>>2],ne=d[n+52>>2],C=d[n+24>>2],S=d[n+20>>2],ie=d[n+56>>2],E=d[n+40>>2],w=d[n+36>>2],oe=d[n+48>>2],T=d[n+8>>2],g=d[n>>2],Q=d[n+4>>2],K=d[n+16>>2],Z=d[n+32>>2],f[a+172>>2]=0,ae=y(y(y(U*P)+y(z*m))+y(L*v)),M=m,m=y(-ee),v=y(y(ae+y(y(y(M*m)-y(P*F))-y(v*O)))+y(y(y(Y*A)+y(H*x))+y(j*b))),c=y(y(y(y(y(U*N)+y(z*s))+y(L*c))+y(y(y(s*m)-y(N*F))-y(c*O)))+y(y(y(X*A)+y(W*x))+y(G*b))),s=y(y(y(y(y(U*I)+y(z*l))+y(L*h))+y(y(y(l*m)-y(I*F))-y(h*O)))+y(y(y(q*A)+y(V*x))+y(k*b))),l=y(y(y(u*c)+y(y(p*v)+y(_*s)))-te),h=y(v-y(p*l)),s=y(s-y(_*l)),c=y(c-y(u*l)),d[a+168>>2]=ie+y(y(y(Z*h)+y(w*s))+y(E*c)),d[a+164>>2]=ne+y(y(y(h*K)+y(s*S))+y(c*C)),d[a+160>>2]=oe+y(y(T*c)+y(y(g*h)+y(Q*s))),f[a+20>>2]=0,d[a+16>>2]=y(y(p*Z)+y(_*w))+y(u*E),d[a+12>>2]=y(y(p*K)+y(_*S))+y(u*C),d[a+8>>2]=y(y(g*p)+y(Q*_))+y(T*u),o[f[f[i>>2]+16>>2]](i,a+8|0,a+160|0,l)),R=a+240|0}function ae(e,t,n){e|=0,t|=0,n|=0;var i,a=y(0),r=y(0),s=0,c=y(0),l=y(0),_=y(0),u=0,h=y(0),p=0,m=y(0),v=0,g=y(0),A=0;R=i=R-48|0;e:{t:if(!((s=f[t+4>>2])>>>0>13)){switch(s-1|0){case 7:f[e>>2]=0,f[e+4>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0;break e;default:h=d[t+36>>2],l=d[t+40>>2],c=d[n+4>>2],r=d[n+8>>2],_=d[t+32>>2],a=d[n>>2],f[e+12>>2]=0,d[e>>2]=a>=y(0)?_:y(-_),d[e+8>>2]=r>=y(0)?l:y(-l),d[e+4>>2]=c>=y(0)?h:y(-h);break e;case 0:l=d[n>>2],_=d[n+4>>2],a=d[n+8>>2],c=y(y(y(l*d[t+76>>2])+y(_*d[t+80>>2]))+y(a*d[t+84>>2])),r=y(y(y(l*d[t+92>>2])+y(_*d[t+96>>2]))+y(a*d[t+100>>2])),a=y(y(y(l*d[t+60>>2])+y(_*d[t- -64>>2]))+y(a*d[t+68>>2])),s=f[4+(t=(t+60|0)+((a<c?c<r?2:1:(a<r)<<1)<<4)|0)>>2],n=f[t>>2],t=f[t+8>>2],f[e+12>>2]=0,f[e+8>>2]=t,f[e>>2]=n,f[e+4>>2]=s;break e;case 12:s=f[t+44>>2],f[i+40>>2]=f[t+40>>2],f[i+44>>2]=s,s=f[t+36>>2],f[i+32>>2]=f[t+32>>2],f[i+36>>2]=s,f[i+16>>2]=f[n>>2],r=d[n+4>>2],f[i+20>>2]=f[n+4>>2],a=d[n+8>>2],n=f[n+8>>2],f[i+28>>2]=0,f[i+24>>2]=n,s=2,n=1,(t=(u=f[t+56>>2])+-1|0)>>>0>1||(t-1?(v=1,n=0):(a=r,v=2,s=1,n=0)),t=s,l=d[(i+32|0)+(u<<2)>>2],_=d[((s=n<<2)|i+32)>>2],c=d[(s|i+16)>>2],(r=y(S(y(y(c*c)+y(a*a)))))==y(0)?(d[(n<<2|i)>>2]=_,d[(n=v<<2)+i>>2]=d[n+(i+16|0)>>2]<y(0)?y(-l):l,f[(t<<2)+i>>2]=0,n=4|i,t=i+8|0):(r=y(_/r),d[(n<<2|i)>>2]=c*r,d[(n=v<<2)+i>>2]=d[n+(i+16|0)>>2]<y(0)?y(-l):l,d[(t<<2)+i>>2]=a*r,n=4|i,t=i+8|0),f[e>>2]=f[i>>2],f[e+4>>2]=f[n>>2],t=f[t>>2],f[e+12>>2]=0,f[e+8>>2]=t;break e;case 9:s=t,A=f[t+56>>2],l=d[32+(s+(t=A<<2)|0)>>2],_=d[n>>2],c=d[n+4>>2],r=d[n+8>>2],(a=y(y(y(_*_)+y(c*c))+y(r*r)))<y(14210854715202004e-30)?c=y(1):(a=y(y(1)/y(S(a))),h=y(r*a),m=y(c*a),c=y(_*a)),f[i+40>>2]=0,f[i+44>>2]=0,f[i+32>>2]=0,f[i+36>>2]=0,d[t+(i+32|0)>>2]=l,a=y(-0xde0b6b000000000),n=0,u=f[i+32>>2],s=f[i+36>>2],t=f[i+40>>2],(r=y(y(y(c*d[i+32>>2])+y(m*d[i+36>>2]))+y(h*d[i+40>>2])))>y(-0xde0b6b000000000)&&(v=t,p=s,a=r,n=u),f[i+40>>2]=0,f[i+44>>2]=0,f[i+32>>2]=0,f[i+36>>2]=0,d[(i+32|0)+(A<<2)>>2]=-l,u=f[i+40>>2],l=d[i+40>>2],s=f[i+32>>2],_=d[i+32>>2],t=f[i+36>>2],r=d[i+36>>2],f[e+12>>2]=0,A=u,u=y(y(y(c*_)+y(m*r))+y(h*l))>a,f[e+8>>2]=u?A:v,f[e+4>>2]=u?t:p,f[e>>2]=u?s:n;break e;case 4:if(g=d[t+16>>2],m=d[t+24>>2],h=d[t+20>>2],u=f[t+96>>2],p=-1,(0|(s=f[t+100>>2]))>=1)for(l=y(d[n>>2]*g),_=y(d[n+8>>2]*m),c=y(d[n+4>>2]*h),t=0,a=y(-34028234663852886e22);a=(n=(r=y(y(y(l*d[(n=u+(t<<4)|0)>>2])+y(c*d[n+4>>2]))+y(_*d[n+8>>2])))>a)?r:a,p=n?t:p,(0|s)!=(0|(t=t+1|0)););c=d[(t=u+(p<<4)|0)>>2],r=d[t+4>>2],a=d[t+8>>2],f[e+12>>2]=0,d[e+8>>2]=m*a,d[e+4>>2]=h*r,d[e>>2]=g*c;break e;case 1:case 2:case 5:case 6:case 8:case 10:case 11:break t;case 3:}if(g=d[t+16>>2],m=d[t+24>>2],h=d[t+20>>2],u=f[t+108>>2],p=-1,(0|(s=f[t+100>>2]))>=1)for(l=y(d[n>>2]*g),_=y(d[n+8>>2]*m),c=y(d[n+4>>2]*h),t=0,a=y(-34028234663852886e22);a=(n=(r=y(y(y(l*d[(n=u+(t<<4)|0)>>2])+y(c*d[n+4>>2]))+y(_*d[n+8>>2])))>a)?r:a,p=n?t:p,(0|s)!=(0|(t=t+1|0)););c=d[(t=u+(p<<4)|0)>>2],r=d[t+4>>2],a=d[t+8>>2],f[e+12>>2]=0,d[e+8>>2]=m*a,d[e+4>>2]=h*r,d[e>>2]=g*c;break e}o[f[f[t>>2]+68>>2]](e,t,n)}R=i+48|0}function re(e,t,n,i,a){var r,s,c,l,_=y(0),u=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=y(0),J=y(0),$=y(0),ee=y(0),te=y(0),ne=y(0),ie=y(0),oe=y(0),ae=y(0);R=r=R-48|0,l=h[e+16|0],s=f[(c=l?n:i)+12>>2],J=d[s+56>>2],W=d[s+52>>2],$=d[s+48>>2],n=f[(i=l?i:n)+12>>2],ee=d[n+56>>2],te=d[n+52>>2],ne=d[n+48>>2],i=f[i+4>>2],b=d[s+40>>2],m=d[s+8>>2],v=d[s+24>>2],g=d[s+36>>2],S=d[s+4>>2],T=d[s+20>>2],E=d[s+32>>2],N=d[n+40>>2],D=d[n+32>>2],M=d[n+36>>2],P=d[s>>2],O=d[n+8>>2],z=d[n>>2],L=d[n+4>>2],I=d[s+16>>2],B=d[n+24>>2],k=d[n+16>>2],j=d[n+20>>2],p=d[t+12>>2],x=d[t+8>>2],_=d[t>>2],u=d[t+4>>2],n=f[c+4>>2],G=d[n+60>>2],ie=d[n+56>>2],V=d[n+52>>2],f[r+28>>2]=0,C=y(y(2)/y(y(y(y(_*_)+y(u*u))+y(x*x))+y(p*p))),A=y(x*C),q=y(_*A),F=y(u*C),Y=y(p*F),U=y(q+Y),X=y(u*A),w=y(_*C),Q=y(p*w),C=y(X-Q),K=y(_*w),Z=y(u*F),u=y(y(1)-y(K+Z)),w=y(y(y(D*U)+y(M*C))+y(N*u)),H=y(y(y(z*U)+y(L*C))+y(O*u)),u=y(y(y(k*U)+y(j*C))+y(B*u)),C=y(-ie),d[r+24>>2]=y(y(y(y(g*w)+y(y(S*H)+y(T*u)))*C)-y(V*y(y(E*w)+y(y(P*H)+y(I*u)))))-y(G*y(y(b*w)+y(y(m*H)+y(v*u)))),u=y(X+Q),F=y(_*F),U=y(p*A),_=y(F-U),w=y(x*A),p=y(y(1)-y(K+w)),x=y(y(N*u)+y(y(D*_)+y(M*p))),A=y(y(O*u)+y(y(z*_)+y(L*p))),_=y(y(B*u)+y(y(k*_)+y(j*p))),d[r+20>>2]=y(y(y(y(g*x)+y(y(S*A)+y(T*_)))*C)-y(V*y(y(E*x)+y(y(P*A)+y(I*_)))))-y(G*y(y(b*x)+y(y(m*A)+y(v*_)))),_=y(q-Y),p=y(F+U),u=y(y(1)-y(Z+w)),x=y(y(N*_)+y(y(M*p)+y(D*u))),A=y(y(O*_)+y(y(L*p)+y(z*u))),_=y(y(B*_)+y(y(j*p)+y(k*u))),d[r+16>>2]=y(y(y(y(g*x)+y(y(S*A)+y(T*_)))*C)-y(V*y(y(E*x)+y(y(P*A)+y(I*_)))))-y(G*y(y(b*x)+y(y(m*A)+y(v*_)))),o[f[f[i>>2]+64>>2]](r+32|0,i,r+16|0),t=f[c+12>>2],C=d[t+48>>2],F=d[t+32>>2],U=d[t+16>>2],w=d[t+8>>2],H=d[t+4>>2],ie=d[t>>2],q=d[t+56>>2],Y=d[t+52>>2],X=d[t+40>>2],Q=d[t+36>>2],K=d[t+24>>2],Z=d[t+20>>2],oe=d[n+68>>2],x=d[n+60>>2],G=d[n+52>>2],V=d[n+56>>2],_=d[r+40>>2],p=d[r+32>>2],u=d[r+36>>2],ae=d[f[e+12>>2]+848>>2],f[a+4>>2]=f[e+12>>2],A=y(-W),W=y(y(y(y(y(ne*m)+y(te*v))+y(ee*b))+y(y(y(v*A)-y(m*$))-y(b*J)))+y(y(y(p*y(y(y(z*m)+y(k*v))+y(D*b)))+y(u*y(y(y(L*m)+y(j*v))+y(M*b))))+y(_*y(y(y(O*m)+y(B*v))+y(N*b))))),E=y(y(y(y(y(ne*P)+y(te*I))+y(ee*E))+y(y(y(I*A)-y(P*$))-y(E*J)))+y(y(y(p*y(y(y(z*P)+y(k*I))+y(D*E)))+y(u*y(y(y(L*P)+y(j*I))+y(M*E))))+y(_*y(y(y(O*P)+y(B*I))+y(N*E))))),S=y(y(y(y(y(ne*S)+y(te*T))+y(ee*g))+y(y(y(T*A)-y(S*$))-y(g*J)))+y(y(y(p*y(y(y(z*S)+y(k*T))+y(D*g)))+y(u*y(y(y(L*S)+y(j*T))+y(M*g))))+y(_*y(y(y(O*S)+y(B*T))+y(N*g))))),(b=y(y(y(x*W)+y(y(G*E)+y(V*S)))-oe))<ae&&(e=f[c+12>>2],T=d[e+24>>2],P=d[e+20>>2],I=d[e+40>>2],N=d[e+36>>2],D=d[e+16>>2],M=d[e+32>>2],m=d[n+60>>2],O=d[e+8>>2],v=d[n+52>>2],z=d[e>>2],g=d[n+56>>2],L=d[e+4>>2],f[r+28>>2]=0,d[r+16>>2]=y(y(z*v)+y(L*g))+y(O*m),d[r+24>>2]=y(y(v*M)+y(g*N))+y(m*I),d[r+20>>2]=y(y(v*D)+y(g*P))+y(m*T),f[r+12>>2]=0,m=y(E-y(G*b)),v=y(S-y(V*b)),g=y(W-y(x*b)),d[r+8>>2]=y(y(y(m*F)+y(v*Q))+y(g*X))+q,d[r+4>>2]=y(y(y(m*U)+y(v*Z))+y(g*K))+Y,d[r>>2]=y(y(w*g)+y(y(ie*m)+y(H*v)))+C,o[f[f[a>>2]+16>>2]](a,r+16|0,r,b)),R=r+48|0}function se(e){e|=0;var t,n=0,i=0,r=y(0),s=0,c=0,l=0,_=y(0),u=0,p=0,m=0,v=0,A=y(0),x=y(0),b=y(0),C=y(0);if(R=t=R-192|0,o[f[f[e>>2]+20>>2]](e)){if(n=0|o[f[f[e>>2]+20>>2]](e),o[f[f[n>>2]+100>>2]](n),n=0|o[f[f[e>>2]+20>>2]](e),o[f[f[n>>2]+8>>2]](t+80|0,n),n=0|o[f[f[e>>2]+20>>2]](e),8&o[f[f[n>>2]+56>>2]](n)&&(n=f[e+24>>2])&&!((0|(u=0|o[f[f[n>>2]+36>>2]](n)))<1))for(v=t+176|0,n=0;;){if(c=0,l=f[e+24>>2],p=0|o[f[f[l>>2]+40>>2]](l,n),(0|(m=f[p+844>>2]))>0)for(;s=0|o[f[f[e>>2]+20>>2]](e),l=p+g(c,208)|0,o[f[f[s>>2]+40>>2]](s,l+36|0,l+68|0,d[l+84>>2],f[l+168>>2],v),(0|m)!=(0|(c=c+1|0)););if((0|u)==(0|(n=n+1|0)))break}if(n=0|o[f[f[e>>2]+20>>2]](e),!(!(3&o[f[f[n>>2]+56>>2]](n))|f[e+8>>2]<1))for(l=t+160|0,u=t+96|0,v=t+112|0,p=t+128|0,m=t+144|0,c=0;;){if(s=f[f[e+16>>2]+(c<<2)>>2],!(32&h[s+204|0])){if(o[f[f[e>>2]+20>>2]](e)&&(n=0|o[f[f[e>>2]+20>>2]](e),1&o[f[f[n>>2]+56>>2]](n))){f[t+72>>2]=1053609165,f[t+76>>2]=0,f[t+64>>2]=1053609165,f[t+68>>2]=1053609165;e:if((n=f[s+220>>2]+-1|0)>>>0<=4){switch(n-1|0){default:n=f[t+92>>2],f[t+72>>2]=f[t+88>>2],f[t+76>>2]=n,n=f[t+84>>2],f[t+64>>2]=f[t+80>>2],f[t+68>>2]=n;break e;case 0:i=f[(n=u)+12>>2],f[t+72>>2]=f[n+8>>2],f[t+76>>2]=i,i=f[n+4>>2],f[t+64>>2]=f[n>>2],f[t+68>>2]=i;break e;case 1:i=f[(n=v)+12>>2],f[t+72>>2]=f[n+8>>2],f[t+76>>2]=i,i=f[n+4>>2],f[t+64>>2]=f[n>>2],f[t+68>>2]=i;break e;case 2:i=f[(n=p)+12>>2],f[t+72>>2]=f[n+8>>2],f[t+76>>2]=i,i=f[n+4>>2],f[t+64>>2]=f[n>>2],f[t+68>>2]=i;break e;case 3:}i=f[(n=m)+12>>2],f[t+72>>2]=f[n+8>>2],f[t+76>>2]=i,i=f[n+4>>2],f[t+64>>2]=f[n>>2],f[t+68>>2]=i}else f[t+72>>2]=1050253722,f[t+76>>2]=0,f[t+64>>2]=1050253722,f[t+68>>2]=1050253722;1&a[s+205|0]&&(n=f[s+320>>2],f[t+72>>2]=f[s+316>>2],f[t+76>>2]=n,n=f[s+312>>2],f[t+64>>2]=f[s+308>>2],f[t+68>>2]=n),o[f[f[e>>2]+28>>2]](e,s+4|0,f[s+192>>2],t- -64|0)}(n=f[e+72>>2])&&2&o[f[f[n>>2]+56>>2]](n)&&(i=f[(n=l)+12>>2],f[t+40>>2]=f[n+8>>2],f[t+44>>2]=i,i=f[n+4>>2],f[t+32>>2]=f[n>>2],f[t+36>>2]=i,n=f[s+192>>2],o[f[f[n>>2]+8>>2]](n,s+4|0,t- -64|0,t+48|0),r=d[4962],d[t+64>>2]=d[t+64>>2]-r,d[t+68>>2]=d[t+68>>2]-r,d[t+72>>2]=d[t+72>>2]-r,d[t+48>>2]=r+d[t+48>>2],d[t+52>>2]=r+d[t+52>>2],d[t+56>>2]=r+d[t+56>>2],3&h[s+204|0]|!h[e+44|0]|2!=f[s+252>>2]||(n=f[s+192>>2],o[f[f[n>>2]+8>>2]](n,s+68|0,t+16|0,t),_=y(d[t+16>>2]-r),d[t+16>>2]=_,A=y(d[t+20>>2]-r),d[t+20>>2]=A,x=y(d[t+24>>2]-r),d[t+24>>2]=x,b=y(r+d[t>>2]),d[t>>2]=b,C=y(r+d[t+4>>2]),d[t+4>>2]=C,r=y(r+d[t+8>>2]),d[t+8>>2]=r,_<d[t+64>>2]&&(d[t+64>>2]=_),A<d[t+68>>2]&&(d[t+68>>2]=A),x<d[t+72>>2]&&(d[t+72>>2]=x),(_=d[t+28>>2])<d[t+76>>2]&&(d[t+76>>2]=_),d[t+48>>2]<b&&(d[t+48>>2]=b),d[t+52>>2]<C&&(d[t+52>>2]=C),d[t+56>>2]<r&&(d[t+56>>2]=r),r=d[t+12>>2],d[t+60>>2]<r&&(d[t+60>>2]=r)),n=f[e+72>>2],o[f[f[n>>2]+60>>2]](n,t- -64|0,t+48|0,t+32|0))}if(!((0|(c=c+1|0))<f[e+8>>2]))break}}R=t+192|0}function ce(e){var t=0,n=0,i=0,o=0,a=0,r=0,s=0;e:if(e|=0){a=(i=e+-8|0)+(e=-8&(n=f[e+-4>>2]))|0;t:if(!(1&n)){if(!(3&n))break e;if((i=i-(n=f[i>>2])|0)>>>0<m[6265])break e;if(e=e+n|0,f[6266]==(0|i)){if(3==(3&(n=f[a+4>>2])))return f[6263]=e,f[a+4>>2]=-2&n,f[i+4>>2]=1|e,void(f[e+i>>2]=e)}else{if(n>>>0<=255){if(o=f[i+8>>2],n=n>>>3|0,(0|(t=f[i+12>>2]))==(0|o)){f[6261]=f[6261]&ds(n);break t}f[o+12>>2]=t,f[t+8>>2]=o;break t}if(s=f[i+24>>2],(0|i)==(0|(n=f[i+12>>2])))if((t=f[(o=i+20|0)>>2])||(t=f[(o=i+16|0)>>2])){for(;r=o,(t=f[(o=(n=t)+20|0)>>2])||(o=n+16|0,t=f[n+16>>2]););f[r>>2]=0}else n=0;else t=f[i+8>>2],f[t+12>>2]=n,f[n+8>>2]=t;if(!s)break t;o=f[i+28>>2];n:{if(f[(t=25348+(o<<2)|0)>>2]==(0|i)){if(f[t>>2]=n,n)break n;f[6262]=f[6262]&ds(o);break t}if(f[s+(f[s+16>>2]==(0|i)?16:20)>>2]=n,!n)break t}if(f[n+24>>2]=s,(t=f[i+16>>2])&&(f[n+16>>2]=t,f[t+24>>2]=n),!(t=f[i+20>>2]))break t;f[n+20>>2]=t,f[t+24>>2]=n}}if(!(a>>>0<=i>>>0)&&1&(n=f[a+4>>2])){t:{if(!(2&n)){if(f[6267]==(0|a)){if(f[6267]=i,e=f[6264]+e|0,f[6264]=e,f[i+4>>2]=1|e,f[6266]!=(0|i))break e;return f[6263]=0,void(f[6266]=0)}if(f[6266]==(0|a))return f[6266]=i,e=f[6263]+e|0,f[6263]=e,f[i+4>>2]=1|e,void(f[e+i>>2]=e);e=(-8&n)+e|0;n:if(n>>>0<=255){if(n=n>>>3|0,(0|(t=f[a+8>>2]))==(0|(o=f[a+12>>2]))){f[6261]=f[6261]&ds(n);break n}f[t+12>>2]=o,f[o+8>>2]=t}else{if(s=f[a+24>>2],(0|a)==(0|(n=f[a+12>>2])))if((t=f[(o=a+20|0)>>2])||(t=f[(o=a+16|0)>>2])){for(;r=o,(t=f[(o=(n=t)+20|0)>>2])||(o=n+16|0,t=f[n+16>>2]););f[r>>2]=0}else n=0;else t=f[a+8>>2],f[t+12>>2]=n,f[n+8>>2]=t;if(s){o=f[a+28>>2];i:{if(f[(t=25348+(o<<2)|0)>>2]==(0|a)){if(f[t>>2]=n,n)break i;f[6262]=f[6262]&ds(o);break n}if(f[s+(f[s+16>>2]==(0|a)?16:20)>>2]=n,!n)break n}f[n+24>>2]=s,(t=f[a+16>>2])&&(f[n+16>>2]=t,f[t+24>>2]=n),(t=f[a+20>>2])&&(f[n+20>>2]=t,f[t+24>>2]=n)}}if(f[i+4>>2]=1|e,f[e+i>>2]=e,f[6266]!=(0|i))break t;return void(f[6263]=e)}f[a+4>>2]=-2&n,f[i+4>>2]=1|e,f[e+i>>2]=e}if(e>>>0<=255)return n=25084+((e=e>>>3|0)<<3)|0,(t=f[6261])&(e=1<<e)?e=f[n+8>>2]:(f[6261]=e|t,e=n),f[n+8>>2]=i,f[e+12>>2]=i,f[i+12>>2]=n,void(f[i+8>>2]=e);f[i+16>>2]=0,f[i+20>>2]=0,t=0,(o=e>>>8|0)&&(t=31,e>>>0>16777215||(t=(n=o)<<(o=o+1048320>>>16&8),t=28+((t=((t<<=s=t+520192>>>16&4)<<(r=t+245760>>>16&2)>>>15|0)-(r|o|s)|0)<<1|e>>>t+21&1)|0)),f[(a=i)+28>>2]=t,r=25348+(t<<2)|0;t:{n:{if((o=f[6262])&(n=1<<t)){for(o=e<<(31==(0|t)?0:25-(t>>>1|0)|0),n=f[r>>2];;){if(t=n,(-8&f[n+4>>2])==(0|e))break n;if(n=o>>>29|0,o<<=1,!(n=f[16+(r=t+(4&n)|0)>>2]))break}f[r+16>>2]=i,f[i+24>>2]=t}else f[6262]=n|o,f[r>>2]=i,f[i+24>>2]=r;f[i+12>>2]=i,f[i+8>>2]=i;break t}e=f[t+8>>2],f[e+12>>2]=i,f[t+8>>2]=i,f[i+24>>2]=0,f[i+12>>2]=t,f[i+8>>2]=e}if(e=f[6269]+-1|0,f[6269]=e,!e){for(i=25500;i=(e=f[i>>2])+8|0,e;);f[6269]=-1}}}}function le(e,t,n,i,a){var r,s=0,c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0);R=r=R-400|0,o[f[4966]](7901),s=f[n+12>>2],f[r+336>>2]=f[n+8>>2],f[r+340>>2]=s,s=f[n+4>>2],f[r+328>>2]=f[n>>2],f[r+332>>2]=s,s=f[n+28>>2],f[r+352>>2]=f[n+24>>2],f[r+356>>2]=s,s=f[n+20>>2],f[r+344>>2]=f[n+16>>2],f[r+348>>2]=s,s=f[n+44>>2],f[r+368>>2]=f[n+40>>2],f[r+372>>2]=s,s=f[n+36>>2],f[r+360>>2]=f[n+32>>2],f[r+364>>2]=s,s=f[n+60>>2],f[r+384>>2]=f[n+56>>2],f[r+388>>2]=s,s=f[n+52>>2],f[r+376>>2]=f[n+48>>2],f[r+380>>2]=s,s=f[i+12>>2],f[r+272>>2]=f[i+8>>2],f[r+276>>2]=s,s=f[i+4>>2],f[r+264>>2]=f[i>>2],f[r+268>>2]=s,s=f[i+28>>2],f[r+288>>2]=f[i+24>>2],f[r+292>>2]=s,s=f[i+20>>2],f[r+280>>2]=f[i+16>>2],f[r+284>>2]=s,s=f[i+44>>2],f[r+304>>2]=f[i+40>>2],f[r+308>>2]=s,s=f[i+36>>2],f[r+296>>2]=f[i+32>>2],f[r+300>>2]=s,s=f[i+60>>2],f[r+320>>2]=f[i+56>>2],f[r+324>>2]=s,s=f[i+52>>2],f[r+312>>2]=f[i+48>>2],f[r+316>>2]=s,Ze(r+328|0,r+264|0,r,r+248|0),f[r+228>>2]=0,c=d[r+248>>2],d[r+224>>2]=c*d[r+8>>2],d[r+220>>2]=c*d[r+4>>2],d[r+216>>2]=c*d[r>>2],f[r+208>>2]=0,f[r+212>>2]=0,f[r+200>>2]=0,f[r+204>>2]=0,f[r+56>>2]=0,f[r+60>>2]=0,f[r+48>>2]=0,f[r+52>>2]=0,Re(r+328|0,r+248|0),f[r+44>>2]=0,f[r+28>>2]=0,c=d[r+248>>2],l=d[r+252>>2],u=d[r+256>>2],p=d[r+260>>2],m=y(y(2)/y(y(y(y(c*c)+y(l*l))+y(u*u))+y(p*p))),v=y(u*m),h=y(l*v),_=y(c*m),g=y(p*_),d[r+36>>2]=h+g,d[r+24>>2]=h-g,h=y(c*_),_=l,l=y(l*m),m=y(_*l),d[r+40>>2]=y(1)-y(h+m),u=y(u*v),d[r+20>>2]=y(1)-y(h+u),f[r+12>>2]=0,h=y(c*v),_=y(p*l),d[r+32>>2]=h-_,c=y(c*l),l=y(p*v),d[r+16>>2]=c+l,d[r+8>>2]=h+_,d[r+4>>2]=c-l,d[r>>2]=y(1)-y(m+u),$t(t,r,r+200|0,r+216|0,r+248|0,r+232|0),f[r>>2]=9544,s=f[n+12>>2],f[r+44>>2]=f[n+8>>2],f[r+48>>2]=s,s=f[n+4>>2],f[r+36>>2]=f[n>>2],f[r+40>>2]=s,s=f[n+28>>2],f[r+60>>2]=f[n+24>>2],f[r+64>>2]=s,s=f[n+20>>2],f[r+52>>2]=f[n+16>>2],f[r+56>>2]=s,s=f[n+44>>2],f[r+76>>2]=f[n+40>>2],f[r+80>>2]=s,s=f[n+36>>2],f[r+68>>2]=f[n+32>>2],f[r+72>>2]=s,s=f[n+60>>2],f[r+92>>2]=f[n+56>>2],f[r+96>>2]=s,s=f[n+52>>2],f[r+84>>2]=f[n+48>>2],f[r+88>>2]=s,n=f[i+12>>2],f[r+108>>2]=f[i+8>>2],f[r+112>>2]=n,n=f[i+4>>2],f[r+100>>2]=f[i>>2],f[r+104>>2]=n,n=f[i+20>>2],f[r+116>>2]=f[i+16>>2],f[r+120>>2]=n,n=f[i+28>>2],f[r+124>>2]=f[i+24>>2],f[r+128>>2]=n,n=f[i+44>>2],f[r+140>>2]=f[i+40>>2],f[r+144>>2]=n,n=f[i+36>>2],f[r+132>>2]=f[i+32>>2],f[r+136>>2]=n,n=f[i+52>>2],f[r+148>>2]=f[i+48>>2],f[r+152>>2]=n,n=f[i+60>>2],f[r+156>>2]=f[i+56>>2],f[r+160>>2]=n,f[r+184>>2]=a,d[r+188>>2]=0,f[r+192>>2]=t,f[r+180>>2]=e,c=y(d[r+148>>2]-d[r+84>>2]),l=y(d[r+152>>2]-d[r+88>>2]),p=y(d[r+156>>2]-d[r+92>>2]),u=y(y(1)/y(S(y(y(y(c*c)+y(l*l))+y(p*p))))),h=(m=y(p*u))==y(0)?y(0xde0b6b000000000):y(y(1)/m),d[r+12>>2]=h,_=(v=y(l*u))==y(0)?y(0xde0b6b000000000):y(y(1)/v),d[r+8>>2]=_,f[r+28>>2]=h<y(0),f[r+24>>2]=_<y(0),_=c,c=y(c*u),d[r+32>>2]=y(p*m)+y(y(_*c)+y(l*v)),c=c==y(0)?y(0xde0b6b000000000):y(y(1)/c),d[r+4>>2]=c,f[r+20>>2]=c<y(0),e=f[e+68>>2],o[f[f[e>>2]+24>>2]](e,r+376|0,r+312|0,r,r+248|0,r+232|0),o[f[4967]](),R=r+400|0}function _e(e,t){var n,i=0,r=y(0),s=y(0),c=0,l=y(0),_=y(0);R=n=R-16|0,f[e+372>>2]=0,f[e+376>>2]=0,f[e+252>>2]=2,f[e+604>>2]=1065353216,f[e+608>>2]=1065353216,f[e+408>>2]=1065353216,f[e+412>>2]=1065353216,f[e+472>>2]=0,f[e+476>>2]=0,f[e+380>>2]=0,f[e+384>>2]=0,f[e+388>>2]=0,f[e+392>>2]=0,f[e+396>>2]=0,f[e+400>>2]=0,f[e+612>>2]=1065353216,f[e+616>>2]=0,f[e+420>>2]=0,f[e+424>>2]=0,f[e+416>>2]=1065353216,f[e+428>>2]=0,f[e+432>>2]=0,f[e+436>>2]=0,f[e+440>>2]=0,f[e+444>>2]=0,f[e+448>>2]=0,f[e+452>>2]=0,f[e+480>>2]=0,f[e+484>>2]=0,f[e+488>>2]=0,f[e+492>>2]=0,f[e+496>>2]=0,f[e+500>>2]=0,r=d[t+96>>2],s=d[t+92>>2],d[n+12>>2]=s,d[n+8>>2]=r,f[n+4>>2]=0,f[n>>2]=1065353216,f[e+504>>2]=f[(s<y(0)?n+4|0:s>y(1)?n:n+12|0)>>2],f[n+4>>2]=0,f[n>>2]=1065353216,f[e+508>>2]=f[(r<y(0)?n+4|0:r>y(1)?n:n+8|0)>>2],f[e+532>>2]=f[t+116>>2],f[e+536>>2]=f[t+120>>2],c=f[t+4>>2],f[e+668>>2]=0,f[e+672>>2]=0,f[e+540>>2]=c,a[e+512|0]=h[t+124|0],f[e+516>>2]=f[t+128>>2],f[e+520>>2]=f[t+132>>2],f[e+524>>2]=f[t+136>>2],f[e+528>>2]=f[t+140>>2],c?(i=e+4|0,o[f[f[c>>2]+8>>2]](c,i)):(i=f[t+12>>2],f[e+4>>2]=f[t+8>>2],f[e+8>>2]=i,i=f[t+20>>2],f[e+12>>2]=f[t+16>>2],f[e+16>>2]=i,i=f[t+36>>2],f[e+28>>2]=f[t+32>>2],f[e+32>>2]=i,i=f[t+28>>2],f[e+20>>2]=f[t+24>>2],f[e+24>>2]=i,i=f[t+44>>2],f[e+36>>2]=f[t+40>>2],f[e+40>>2]=i,i=f[t+52>>2],f[e+44>>2]=f[t+48>>2],f[e+48>>2]=i,c=f[4+(i=t- -64|0)>>2],f[e+60>>2]=f[i>>2],f[e+64>>2]=c,i=f[t+60>>2],f[e+52>>2]=f[t+56>>2],f[e+56>>2]=i,i=e+4|0),c=f[i+4>>2],f[e+68>>2]=f[i>>2],f[e+72>>2]=c,c=f[i+12>>2],f[e+76>>2]=f[i+8>>2],f[e+80>>2]=c,i=f[e+32>>2],f[e+92>>2]=f[e+28>>2],f[e+96>>2]=i,i=f[e+24>>2],f[e+84>>2]=f[e+20>>2],f[e+88>>2]=i,i=f[e+40>>2],f[e+100>>2]=f[e+36>>2],f[e+104>>2]=i,i=f[e+48>>2],f[e+108>>2]=f[e+44>>2],f[e+112>>2]=i,i=f[e+56>>2],f[e+116>>2]=f[e+52>>2],f[e+120>>2]=i,i=f[e+64>>2],f[e+124>>2]=f[e+60>>2],f[e+128>>2]=i,f[e+132>>2]=0,f[e+136>>2]=0,f[e+140>>2]=0,f[e+144>>2]=0,f[e+148>>2]=0,f[e+152>>2]=0,f[e+156>>2]=0,f[e+160>>2]=0,f[e+228>>2]=f[t+100>>2],f[e+236>>2]=f[t+104>>2],f[e+240>>2]=f[t+108>>2],f[e+232>>2]=f[t+112>>2],o[f[f[e>>2]+8>>2]](e,f[t+72>>2]),i=f[5206],f[5206]=i+1,f[e+568>>2]=i,r=y(0),i=f[e+204>>2],(s=d[t>>2])!=y(0)?(f[e+204>>2]=-2&i,r=y(y(1)/s)):f[e+204>>2]=1|i,f[e+436>>2]=0,d[e+404>>2]=r,d[e+432>>2]=s*d[e+448>>2],d[e+428>>2]=s*d[e+444>>2],d[e+424>>2]=s*d[e+440>>2],s=d[t+84>>2],l=d[t+80>>2],_=d[t+76>>2],d[e+620>>2]=r*d[e+408>>2],d[e+624>>2]=r*d[e+412>>2],d[e+628>>2]=r*d[e+416>>2],f[e+632>>2]=0,f[e+468>>2]=0,d[e+456>>2]=_!=y(0)?y(y(1)/_):y(0),d[e+460>>2]=l!=y(0)?y(y(1)/l):y(0),d[e+464>>2]=s!=y(0)?y(y(1)/s):y(0),fn(e),f[e+572>>2]=0,f[e+576>>2]=0,f[e+564>>2]=8,f[e+580>>2]=0,f[e+584>>2]=0,f[e+588>>2]=0,f[e+592>>2]=0,f[e+596>>2]=0,f[e+600>>2]=0,f[e+632>>2]=0,f[e+636>>2]=0,f[e+640>>2]=0,f[e+644>>2]=0,f[e+648>>2]=0,f[e+652>>2]=0,f[e+656>>2]=0,f[e+660>>2]=0,f[e+664>>2]=0,r=d[e+404>>2],d[e+628>>2]=r*d[e+416>>2],d[e+624>>2]=r*d[e+412>>2],d[e+620>>2]=r*d[e+408>>2],R=n+16|0}function ue(e,t){var n,i,o=0,a=0,r=0,s=0,c=0,l=y(0),_=y(0);R=n=R-80|0,f[e+72>>2]=f[e+72>>2]+1,(o=f[e+68>>2])&&dr(o,f[76+(f[e+28>>2]+g(t,80)|0)>>2]),a=f[e+20>>2],s=f[e+28>>2],c=g(t,80),i=f[4+(r=8+(o=s+c|0)|0)>>2],f[n+8>>2]=f[r>>2],f[n+12>>2]=i,r=f[o+4>>2],f[n>>2]=f[o>>2],f[n+4>>2]=r,r=f[o+28>>2],f[n+24>>2]=f[o+24>>2],f[n+28>>2]=r,r=f[o+20>>2],f[n+16>>2]=f[o+16>>2],f[n+20>>2]=r,r=f[o+44>>2],f[n+40>>2]=f[o+40>>2],f[n+44>>2]=r,r=f[o+36>>2],f[n+32>>2]=f[o+32>>2],f[n+36>>2]=r,r=f[o+60>>2],f[n+56>>2]=f[o+56>>2],f[n+60>>2]=r,r=f[o+52>>2],f[n+48>>2]=f[o+48>>2],f[n+52>>2]=r,r=f[o+76>>2],f[n+72>>2]=f[o+72>>2],f[n+76>>2]=r,r=f[o+68>>2],f[n+64>>2]=f[o+64>>2],f[n+68>>2]=r,r=s,s=g(a,80)+-80|0,r=f[4+(a=r+s|0)>>2],f[o>>2]=f[a>>2],f[o+4>>2]=r,r=f[a+12>>2],f[o+8>>2]=f[a+8>>2],f[o+12>>2]=r,r=f[a+20>>2],f[o+16>>2]=f[a+16>>2],f[o+20>>2]=r,r=f[a+28>>2],f[o+24>>2]=f[a+24>>2],f[o+28>>2]=r,r=f[a+44>>2],f[o+40>>2]=f[a+40>>2],f[o+44>>2]=r,r=f[a+36>>2],f[o+32>>2]=f[a+32>>2],f[o+36>>2]=r,r=f[a+52>>2],f[o+48>>2]=f[a+48>>2],f[o+52>>2]=r,r=f[a+60>>2],f[o+56>>2]=f[a+56>>2],f[o+60>>2]=r,r=f[a+76>>2],f[o+72>>2]=f[a+72>>2],f[o+76>>2]=r,r=f[a+68>>2],f[o+64>>2]=f[a+64>>2],f[o+68>>2]=r,o=s+f[e+28>>2]|0,s=f[n+4>>2],f[o>>2]=f[n>>2],f[o+4>>2]=s,a=f[n+12>>2],f[o+8>>2]=f[n+8>>2],f[o+12>>2]=a,a=f[n+20>>2],f[o+16>>2]=f[n+16>>2],f[o+20>>2]=a,a=f[n+28>>2],f[o+24>>2]=f[n+24>>2],f[o+28>>2]=a,a=f[n+36>>2],f[o+32>>2]=f[n+32>>2],f[o+36>>2]=a,a=f[n+44>>2],f[o+40>>2]=f[n+40>>2],f[o+44>>2]=a,a=f[n+52>>2],f[o+48>>2]=f[n+48>>2],f[o+52>>2]=a,a=f[n+60>>2],f[o+56>>2]=f[n+56>>2],f[o+60>>2]=a,a=f[n+68>>2],f[o+64>>2]=f[n+64>>2],f[o+68>>2]=a,a=f[n+76>>2],f[o+72>>2]=f[n+72>>2],f[o+76>>2]=a,f[e+68>>2]&&(f[f[76+(c+f[e+28>>2]|0)>>2]+36>>2]=t),f[e+20>>2]=f[e+20>>2]+-1,_=y(0|t);e:if(!((0|(a=f[e+84>>2]))<1)){for(s=f[e+92>>2],o=0;;){if((l=d[(c=s+(o<<2)|0)>>2])!=_){if((0|a)!=(0|(o=o+1|0)))continue;break e}break}(0|a)<=(0|o)||(a=s+((o=a+-1|0)<<2)|0,f[c>>2]=f[a>>2],d[a>>2]=l,f[e+84>>2]=o)}e:if(!((0|(a=f[e+124>>2]))<1)){for(s=f[e+132>>2],o=0;;){if((l=d[(c=s+(o<<2)|0)>>2])!=_){if((0|a)!=(0|(o=o+1|0)))continue;break e}break}(0|a)<=(0|o)||(a=s+((o=a+-1|0)<<2)|0,f[c>>2]=f[a>>2],d[a>>2]=l,f[e+124>>2]=o)}e:if(!((0|(a=f[e+104>>2]))<1)){for(s=f[e+112>>2],o=0;;){if((l=d[(c=s+(o<<2)|0)>>2])!=_){if((0|a)!=(0|(o=o+1|0)))continue;break e}break}(0|a)<=(0|o)||(a=s+((o=a+-1|0)<<2)|0,f[c>>2]=f[a>>2],d[a>>2]=l,f[e+104>>2]=o)}e:if(!((0|(a=f[e+144>>2]))<1)){for(s=f[e+152>>2],o=0;;){if((l=d[(c=s+(o<<2)|0)>>2])!=_){if((0|a)!=(0|(o=o+1|0)))continue;break e}break}(0|a)<=(0|o)||(a=s+((o=a+-1|0)<<2)|0,f[c>>2]=f[a>>2],d[a>>2]=l,f[e+144>>2]=o)}e:if(!((0|(a=f[e+164>>2]))<1)){for(s=f[e+172>>2],o=0;;){if(f[(c=s+(o<<2)|0)>>2]!=(0|t)){if((0|a)!=(0|(o=o+1|0)))continue;break e}break}(0|a)<=(0|o)||(o=(s+(a<<2)|0)-4|0,f[c>>2]=f[o>>2],f[o>>2]=t,f[e+164>>2]=f[e+164>>2]+-1)}R=n+80|0}function fe(e,t,n,i,r,c){e|=0,t|=0,n|=0,i|=0,r|=0,c|=0;var l,u=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=0,C=0,E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=0,O=0,z=0,L=0;R=l=R-304|0,u=d[t+52>>2],v=d[n+52>>2],p=d[t+56>>2],g=d[n+56>>2],A=d[t+48>>2],m=d[n+48>>2],f[l+300>>2]=0,p=y(g-p),d[l+296>>2]=p,I=y(v-u),d[l+292>>2]=I,N=y(m-A),d[l+288>>2]=N,Ze(t,n,l+112|0,l+48|0),f[l+284>>2]=0,u=d[l+48>>2],v=y(u*d[l+120>>2]),d[l+280>>2]=v,g=y(u*d[l+116>>2]),d[l+276>>2]=g,A=y(u*d[l+112>>2]),d[l+272>>2]=A,u=d[i+52>>2],m=d[r+52>>2],x=d[i+56>>2],E=d[r+56>>2],w=d[i+48>>2],P=d[r+48>>2],f[l+268>>2]=0,E=y(E-x),d[l+264>>2]=E,D=y(m-u),d[l+260>>2]=D,w=y(P-w),d[l+256>>2]=w,Ze(i,r,l+112|0,l+48|0),f[l+252>>2]=0,u=d[l+48>>2],m=y(u*d[l+120>>2]),d[l+248>>2]=m,x=y(u*d[l+116>>2]),d[l+244>>2]=x,u=y(u*d[l+112>>2]),d[l+240>>2]=u,n=f[e+12>>2],T=y(o[f[f[n>>2]+16>>2]](n)),P=y(0),(n=f[e+16>>2])&&(P=y(o[f[f[n>>2]+16>>2]](n)),p=d[l+296>>2],E=d[l+264>>2],I=d[l+292>>2],D=d[l+260>>2],N=d[l+288>>2],w=d[l+256>>2],m=d[l+248>>2],x=d[l+244>>2],v=d[l+280>>2],g=d[l+276>>2],A=d[l+272>>2],u=d[l+240>>2]),m=y(y(T*y(S(y(y(y(A*A)+y(g*g))+y(v*v)))))+y(P*y(S(y(y(y(u*u)+y(x*x))+y(m*m)))))),v=y(w-N),g=y(D-I),A=y(E-p);e:if(y(m+y(S(y(y(y(v*v)+y(g*g))+y(A*A)))))!=y(0)&&(a[l+216|0]=0,f[l+212>>2]=1566444395,f[l+176>>2]=7284,oe(e,t,i,l+176|0),n=f[l+208>>2],f[l+232>>2]=f[l+204>>2],f[l+236>>2]=n,n=f[l+200>>2],f[l+224>>2]=f[l+196>>2],f[l+228>>2]=n,h[l+216|0]&&(n=f[l+180>>2],M=f[l+184>>2],O=f[l+188>>2],!(y(m+y(y(y(v*d[l+180>>2])+y(g*d[l+184>>2]))+y(A*d[l+188>>2])))<=y(1.1920928955078125e-7))))){C=1,u=y(0);t:{if(p=y(d[l+212>>2]+d[c+172>>2]),T=d[l+192>>2],p>y(.0010000000474974513)){for(z=l+20|0,L=l+160|0,r=0;;){if((b=f[c+168>>2])&&(f[l+120>>2]=1065353216,f[l+124>>2]=0,f[l+112>>2]=1065353216,f[l+116>>2]=1065353216,o[f[f[b>>2]+28>>2]](b,l+224|0,y(.20000000298023224),l+112|0)),(x=y(m+y(y(y(v*(s(0,n),_()))+y(g*(s(0,M),_())))+y(A*(s(0,O),_())))))<=y(1.1920928955078125e-7)){C=0;break e}if((p=y(u+y(p/x)))<=u){C=0;break e}if(p>y(1)){C=0;break e}if(p<y(0)){C=0;break e}if(We(t,l+288|0,l+272|0,p,l+112|0),We(i,l+256|0,l+240|0,p,l+48|0),(n=f[c+168>>2])&&(f[l+8>>2]=0,f[l+12>>2]=0,f[l>>2]=1065353216,f[l+4>>2]=0,o[f[f[n>>2]+28>>2]](n,L,y(.20000000298023224),l)),o[f[f[c>>2]>>2]](c,p),a[l+40|0]=0,f[l+36>>2]=1566444395,f[l>>2]=7284,oe(e,l+112|0,l+48|0,l),!h[l+40|0])break t;if(x=d[c+172>>2],b=f[(n=z)+12>>2],f[l+232>>2]=f[n+8>>2],f[l+236>>2]=b,b=f[n+4>>2],f[l+224>>2]=f[n>>2],f[l+228>>2]=b,b=r+1|0,r>>>0>63){o[f[f[c>>2]+8>>2]](c,-2,b),C=0;break e}if(n=f[l+4>>2],M=f[l+8>>2],O=f[l+12>>2],r=b,u=p,!((p=y(d[l+36>>2]+x))>y(.0010000000474974513)))break}T=d[l+16>>2]}p=T,f[c+132>>2]=n,d[c+164>>2]=u,d[c+144>>2]=p,f[c+140>>2]=O,f[c+136>>2]=M,e=f[l+228>>2],f[c+148>>2]=f[l+224>>2],f[c+152>>2]=e,e=f[l+236>>2],f[c+156>>2]=f[l+232>>2],f[c+160>>2]=e;break e}o[f[f[c>>2]+8>>2]](c,-1,r),C=0}return R=l+304|0,0|C}function he(e,t,n,i){var r=0,s=0,c=0,l=0,_=y(0),u=0,p=0,m=0,v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=0,E=y(0),w=0,T=y(0),P=y(0),I=y(0),R=0;e:if(!((0|(w=f[e+4>>2]))<2))for(c=f[e+12>>2],A=d[(r=(c+(w<<4)|0)-16|0)>>2],T=d[n>>2],v=d[r+4>>2],P=d[n+4>>2],g=d[r+8>>2],I=d[n+8>>2],_=y(y(y(y(A*T)+y(v*P))+y(g*I))+i);;){x=d[(r=(R<<4)+c|0)>>2],b=d[r+4>>2],C=d[r+8>>2],E=y(y(y(y(x*T)+y(b*P))+y(C*I))+i),S=f[r+12>>2];t:{n:if(_<y(0)){if(E<y(0)){if((0|(r=f[t+4>>2]))==f[t+8>>2]&&!((0|r)>=(0|(u=r?r<<1:1)))){if(c=0,p=0,u&&(f[6257]=f[6257]+1,p=0|o[f[4968]](u<<4,16),r=f[t+4>>2]),(0|r)>=1)for(;l=(s=c<<4)+p|0,s=s+f[t+12>>2]|0,m=f[s+4>>2],f[l>>2]=f[s>>2],f[l+4>>2]=m,m=f[s+12>>2],f[l+8>>2]=f[s+8>>2],f[l+12>>2]=m,(0|(c=c+1|0))!=(0|r););(r=f[t+12>>2])&&(h[t+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[t+12>>2]=0),f[t+12>>2]=p,a[t+16|0]=1,f[t+8>>2]=u,r=f[t+4>>2]}r=f[t+12>>2]+(r<<4)|0,f[r+12>>2]=S,d[r+8>>2]=C,d[r+4>>2]=b,d[r>>2]=x;break n}if(_=y(_/y(_-E)),g=y(g+y(y(C-g)*_)),v=y(v+y(y(b-v)*_)),_=y(A+y(y(x-A)*_)),(0|(r=f[t+4>>2]))==f[t+8>>2]&&!((0|r)>=(0|(p=r?r<<1:1)))){if(c=0,u=0,p&&(f[6257]=f[6257]+1,u=0|o[f[4968]](p<<4,16),r=f[t+4>>2]),(0|r)>=1)for(;l=S=(s=c<<4)+u|0,s=s+f[t+12>>2]|0,m=f[s+4>>2],f[l>>2]=f[s>>2],f[l+4>>2]=m,l=f[s+12>>2],f[S+8>>2]=f[s+8>>2],f[S+12>>2]=l,(0|(c=c+1|0))!=(0|r););(r=f[t+12>>2])&&(h[t+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[t+12>>2]=0),f[t+12>>2]=u,a[t+16|0]=1,f[t+8>>2]=p,r=f[t+4>>2]}r=f[t+12>>2]+(r<<4)|0,f[r+12>>2]=0,d[r+8>>2]=g,d[r+4>>2]=v,d[r>>2]=_}else{if(!(E<y(0)))break t;if(_=y(_/y(_-E)),g=y(g+y(y(C-g)*_)),v=y(v+y(y(b-v)*_)),_=y(A+y(y(x-A)*_)),(0|(r=f[t+4>>2]))==f[t+8>>2]&&!((0|r)>=(0|(u=r?r<<1:1)))){if(c=0,p=0,u&&(f[6257]=f[6257]+1,p=0|o[f[4968]](u<<4,16),r=f[t+4>>2]),(0|r)>=1)for(;l=(s=c<<4)+p|0,s=s+f[t+12>>2]|0,m=f[s+4>>2],f[l>>2]=f[s>>2],f[l+4>>2]=m,m=f[s+12>>2],f[l+8>>2]=f[s+8>>2],f[l+12>>2]=m,(0|(c=c+1|0))!=(0|r););(r=f[t+12>>2])&&(h[t+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[t+12>>2]=0),f[t+12>>2]=p,a[t+16|0]=1,f[t+8>>2]=u,r=f[t+4>>2]}if(r=f[t+12>>2]+(r<<4)|0,f[r+12>>2]=0,d[r+8>>2]=g,d[r+4>>2]=v,d[r>>2]=_,r=f[t+4>>2]+1|0,f[t+4>>2]=r,f[t+8>>2]==(0|r)&&!((0|r)>=(0|(u=r?r<<1:1)))){if(c=0,p=0,u&&(f[6257]=f[6257]+1,p=0|o[f[4968]](u<<4,16),r=f[t+4>>2]),(0|r)>=1)for(;l=(s=c<<4)+p|0,s=s+f[t+12>>2]|0,m=f[s+4>>2],f[l>>2]=f[s>>2],f[l+4>>2]=m,m=f[s+12>>2],f[l+8>>2]=f[s+8>>2],f[l+12>>2]=m,(0|(c=c+1|0))!=(0|r););(r=f[t+12>>2])&&(h[t+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[t+12>>2]=0),f[t+12>>2]=p,a[t+16|0]=1,f[t+8>>2]=u,r=f[t+4>>2]}r=f[t+12>>2]+(r<<4)|0,f[r+12>>2]=S,d[r+8>>2]=C,d[r+4>>2]=b,d[r>>2]=x}f[t+4>>2]=f[t+4>>2]+1}if((0|(R=R+1|0))==(0|w))break e;I=d[n+8>>2],P=d[n+4>>2],T=d[n>>2],c=f[e+12>>2],_=E,g=C,v=b,A=x}}function pe(e,t,n,i,r,c){e|=0,t|=0,n|=0,i|=0,r|=0,c|=0;var l,u,p=0,m=y(0),v=y(0),g=0,A=y(0),x=0,b=y(0),C=y(0),S=y(0),E=0,w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0);R=l=R-288|0,to(f[e+4>>2]),m=d[t+52>>2],v=d[n+52>>2],A=d[i+52>>2],b=d[r+52>>2],C=d[t+56>>2],S=d[n+56>>2],w=d[i+56>>2],T=d[r+56>>2],P=d[t+48>>2],I=d[n+48>>2],N=d[i+48>>2],D=d[r+48>>2],a[l+264|0]=0,f[l+260>>2]=1566444395,f[l+224>>2]=7284,u=Pi(l+144|0,f[e+8>>2],f[e+12>>2],f[e+4>>2],0),f[l+136>>2]=1566444395,p=f[(e=t)+12>>2],f[l+16>>2]=f[e+8>>2],f[l+20>>2]=p,p=f[e+4>>2],f[l+8>>2]=f[e>>2],f[l+12>>2]=p,p=f[e+28>>2],f[l+32>>2]=f[e+24>>2],f[l+36>>2]=p,p=f[e+20>>2],f[l+24>>2]=f[e+16>>2],f[l+28>>2]=p,p=f[e+44>>2],f[l+48>>2]=f[e+40>>2],f[l+52>>2]=p,p=f[e+36>>2],f[l+40>>2]=f[e+32>>2],f[l+44>>2]=p,x=f[e+60>>2],f[(p=l- -64|0)>>2]=f[e+56>>2],f[p+4>>2]=x,p=f[e+52>>2],f[l+56>>2]=f[e+48>>2],f[l+60>>2]=p,p=f[(e=i)+12>>2],f[l+80>>2]=f[e+8>>2],f[l+84>>2]=p,p=f[e+4>>2],f[l+72>>2]=f[e>>2],f[l+76>>2]=p,p=f[e+20>>2],f[l+88>>2]=f[e+16>>2],f[l+92>>2]=p,p=f[e+28>>2],f[l+96>>2]=f[e+24>>2],f[l+100>>2]=p,p=f[e+44>>2],f[l+112>>2]=f[e+40>>2],f[l+116>>2]=p,p=f[e+36>>2],f[l+104>>2]=f[e+32>>2],f[l+108>>2]=p,p=f[e+52>>2],f[l+120>>2]=f[e+48>>2],f[l+124>>2]=p,p=f[e+60>>2],f[l+128>>2]=f[e+56>>2],f[l+132>>2]=p,Is(u,l+8|0,l+224|0,0),e=f[l+256>>2],f[l+280>>2]=f[l+252>>2],f[l+284>>2]=e,e=f[l+248>>2],f[l+272>>2]=f[l+244>>2],f[l+276>>2]=e,g=0;e:if(h[l+264|0]){C=y(y(S-C)-y(T-w)),b=y(y(v-m)-y(b-A)),S=y(y(I-P)-y(D-N)),x=f[l+232>>2],p=f[l+236>>2],E=f[l+228>>2];t:{if((A=d[l+260>>2])>y(.0010000000474974513)){for(e=0,v=y(0);;){if(g=0,32==(0|e))break e;if(g=0,(m=y(v-y(A/y(y(C*(s(0,p),_()))+y(y(b*(s(0,x),_()))+y(S*(s(0,E),_())))))))<=v)break e;if(g=0,m>y(1))break e;if(g=0,m<y(0))break e;if(o[f[f[c>>2]>>2]](c,m),v=y(y(1)-m),d[l+56>>2]=y(v*d[t+48>>2])+y(m*d[n+48>>2]),d[l+60>>2]=y(v*d[t+52>>2])+y(m*d[n+52>>2]),d[l+64>>2]=y(v*d[t+56>>2])+y(m*d[n+56>>2]),d[l+120>>2]=y(v*d[i+48>>2])+y(m*d[r+48>>2]),d[l+124>>2]=y(v*d[i+52>>2])+y(m*d[r+52>>2]),d[l+128>>2]=y(v*d[i+56>>2])+y(m*d[r+56>>2]),Is(u,l+8|0,l+224|0,0),g=0,!h[l+264|0])break e;if((A=d[l+260>>2])<y(0)){d[c+164>>2]=m,e=f[l+228>>2],t=f[l+232>>2],n=f[l+240>>2],f[c+140>>2]=f[l+236>>2],f[c+144>>2]=n,f[c+132>>2]=e,f[c+136>>2]=t,e=f[l+256>>2],f[c+156>>2]=f[l+252>>2],f[c+160>>2]=e,e=f[l+248>>2],f[c+148>>2]=f[l+244>>2],f[c+152>>2]=e;break t}if(e=e+1|0,p=f[l+256>>2],f[l+280>>2]=f[l+252>>2],f[l+284>>2]=p,p=f[l+248>>2],f[l+272>>2]=f[l+244>>2],f[l+276>>2]=p,E=f[l+228>>2],x=f[l+232>>2],p=f[l+236>>2],v=m,!(A>y(.0010000000474974513)))break}v=d[l+240>>2]}else m=y(0),v=d[l+240>>2];if(g=0,y(y(C*(s(0,p),_()))+y(y(b*(s(0,x),_()))+y(S*(s(0,E),_()))))>=y(-d[c+172>>2]))break e;f[c+132>>2]=E,d[c+164>>2]=m,d[c+144>>2]=v,f[c+140>>2]=p,f[c+136>>2]=x,e=f[l+276>>2],f[c+148>>2]=f[l+272>>2],f[c+152>>2]=e,e=f[l+284>>2],f[c+156>>2]=f[l+280>>2],f[c+160>>2]=e}g=1}return R=l+288|0,0|g}function me(){1&a[22544]||Mr(22544)&&(f[5554]=1062847606,f[5555]=0,f[5552]=1042701022,f[5553]=1056964440,f[5550]=1062847606,f[5551]=0,f[5548]=-1093024784,f[5549]=1050556081,f[5546]=1062847606,f[5547]=0,f[5544]=-1093024784,f[5545]=-1096927567,f[5542]=1062847606,f[5543]=0,f[5540]=1042701022,f[5541]=-1090519208,f[5538]=1062847572,f[5539]=0,f[5536]=1057396286,f[5537]=0,f[5534]=1057396386,f[5535]=0,f[5532]=1060121912,f[5533]=1056964507,f[5530]=1057396420,f[5531]=0,f[5528]=-1098475836,f[5529]=1062148969,f[5526]=1057396386,f[5527]=0,f[5524]=-1084636143,f[5525]=0,f[5522]=1057396420,f[5523]=0,f[5520]=-1098475836,f[5521]=-1085334679,f[5518]=1057396386,f[5519]=0,f[5516]=1060121912,f[5517]=-1090519141,f[5514]=-2147483648,f[5515]=0,f[5512]=1058437413,f[5513]=1062149053,f[5510]=-2147483648,f[5511]=0,f[5508]=-2147483648,f[5509]=1065353216,f[5506]=-2147483648,f[5507]=0,f[5504]=-1089046235,f[5505]=1062149053,f[5502]=-2147483648,f[5503]=0,f[5500]=-1082951543,f[5501]=1050556148,f[5498]=-2147483648,f[5499]=0,f[5496]=-1082951543,f[5497]=-1096927500,f[5494]=0,f[5495]=0,f[5492]=-1089046235,f[5493]=-1085334595,f[5490]=0,f[5491]=0,f[5488]=0,f[5489]=-1082130432,f[5486]=0,f[5487]=0,f[5484]=1058437413,f[5485]=-1085334595,f[5482]=0,f[5483]=0,f[5480]=1064532105,f[5481]=-1096927500,f[5478]=0,f[5479]=0,f[5476]=1064532105,f[5477]=1050556148,f[5474]=-1090087228,f[5475]=0,f[5472]=1049007812,f[5473]=1062148969,f[5470]=-1090087262,f[5471]=0,f[5468]=-1087361736,f[5469]=1056964507,f[5466]=-1084636042,f[5467]=0,f[5464]=-1104782626,f[5465]=1056964440,f[5462]=-1090087262,f[5463]=0,f[5460]=-1087361736,f[5461]=-1090519141,f[5458]=-1084636076,f[5459]=0,f[5456]=-1090087362,f[5457]=-2147483648,f[5454]=-1090087262,f[5455]=0,f[5452]=1062847505,f[5453]=-2147483648,f[5450]=-1084636042,f[5451]=0,f[5448]=1054458864,f[5449]=1050556081,f[5446]=-1090087228,f[5447]=0,f[5444]=1049007812,f[5445]=-1085334679,f[5442]=-1084636042,f[5443]=0,f[5440]=-1104782626,f[5441]=-1090519208,f[5438]=-1084636042,f[5439]=0,f[5436]=1054458864,f[5437]=-1096927567,f[5434]=1065353216,f[5435]=0,f[5432]=-2147483648,f[5433]=0,f[5430]=1055193471,f[5431]=0,f[5428]=1063581978,f[5429]=0,f[5426]=1055193572,f[5427]=0,f[5424]=1049461434,f[5425]=1062847522,f[5422]=1055193572,f[5423]=0,f[5420]=-1086767520,f[5421]=1057396202,f[5418]=1055193572,f[5419]=0,f[5416]=-1086767520,f[5417]=-1090087446,f[5414]=1055193605,f[5415]=0,f[5412]=1049461434,f[5413]=-1084636126,f[5410]=-1092290076,f[5411]=0,f[5408]=1060716128,f[5409]=1057396202,f[5406]=-1092290043,f[5407]=0,f[5404]=-1098022214,f[5405]=1062847522,f[5402]=-1092290177,f[5403]=0,f[5400]=-1083901670,f[5401]=-2147483648,f[5398]=-1092290076,f[5399]=0,f[5396]=-1098022214,f[5397]=-1084636126,f[5394]=-1092290076,f[5395]=0,f[5392]=1060716128,f[5393]=-1090087446,f[5390]=-1082130432,f[5391]=0,f[5388]=0,f[5389]=-2147483648,Kr(22544))}function de(e,t,n){var i=0,r=0,s=0,c=0,l=y(0),_=0,u=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=0;e:{if(h[e+165|0]){if(!(!n|(0|(i=f[e+88>>2]))<1))for(s=f[e+96>>2],p=d[e+168>>2],m=d[t+8>>2],v=d[t+4>>2],g=d[t>>2],n=0;;){if(l=y(d[(r=s+(n<<4)|0)>>2]-g),u=y(l*l),l=y(d[r+4>>2]-v),u=y(u+y(l*l)),l=y(d[r+8>>2]-m),y(u+y(l*l))<=p)break e;if(!((0|(n=n+1|0))<(0|i)))break}if(n=f[e+32>>2],f[n+12>>2]=f[n+12>>2]+1,f[e+92>>2]==(0|i)&&!((0|i)>=(0|(r=i?i<<1:1)))){if(r&&(f[6257]=f[6257]+1,c=0|o[f[4968]](r<<4,16),i=f[e+88>>2]),(0|i)>=1)for(n=0;_=(s=n<<4)+c|0,s=s+f[e+96>>2]|0,A=f[s+4>>2],f[_>>2]=f[s>>2],f[_+4>>2]=A,A=f[s+12>>2],f[_+8>>2]=f[s+8>>2],f[_+12>>2]=A,(0|i)!=(0|(n=n+1|0)););(n=f[e+96>>2])&&(h[e+100|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+96>>2]=0),f[e+96>>2]=c,f[e+92>>2]=r,a[e+100|0]=1,i=f[e+88>>2]}return n=f[e+96>>2]+(i<<4)|0,i=f[t+4>>2],f[n>>2]=f[t>>2],f[n+4>>2]=i,i=f[t+12>>2],f[n+8>>2]=f[t+8>>2],f[n+12>>2]=i,t=f[e+88>>2],f[e+88>>2]=t+1,f[f[e+32>>2]+16>>2]=f[e+96>>2],t}t:if(!(!n|(0|(i=f[e+108>>2]))<1)){for(s=f[e+116>>2],p=d[e+168>>2],m=d[t+8>>2],v=d[t+4>>2],g=d[t>>2],n=0;;){if(l=y(d[(r=s+(n<<2)|0)>>2]-g),u=y(l*l),l=y(d[r+4>>2]-v),u=y(u+y(l*l)),l=y(d[r+8>>2]-m),!(y(u+y(l*l))<=p)){if((0|(n=n+3|0))<(0|i))continue;break t}break}return(n>>>0)/3|0}if((0|(r=f[e+112>>2]))==(0|i))if((0|i)>=(0|(r=i?i<<1:1)))r=i;else{n=0,r&&(f[6257]=f[6257]+1,c=0|o[f[4968]](r<<2,16),i=f[e+108>>2]),s=f[e+116>>2];t:{n:{if((0|i)>=1)for(;;)if(f[(_=n<<2)+c>>2]=f[s+_>>2],(0|i)==(0|(n=n+1|0)))break n;if(!s)break t}h[e+120|0]&&(s&&(f[6258]=f[6258]+1,o[f[4969]](s)),i=f[e+108>>2]),f[e+116>>2]=0}f[e+116>>2]=c,f[e+112>>2]=r,a[e+120|0]=1}if(c=f[e+116>>2],f[c+(i<<2)>>2]=f[t>>2],n=i+1|0,f[e+108>>2]=n,(0|n)==(0|r))if((0|r)>=(0|(s=r?r<<1:1)))i=c,s=r;else{n=0,i=0,s&&(f[6257]=f[6257]+1,i=0|o[f[4968]](s<<2,16),r=f[e+108>>2],c=f[e+116>>2]);t:{n:{if((0|r)>=1)for(;;)if(f[(_=n<<2)+i>>2]=f[c+_>>2],(0|r)==(0|(n=n+1|0)))break n;if(!c)break t}h[e+120|0]&&(c&&(f[6258]=f[6258]+1,o[f[4969]](c)),r=f[e+108>>2]),f[e+116>>2]=0}f[e+116>>2]=i,f[e+112>>2]=s,a[e+120|0]=1}else i=c,s=r,r=n;if(f[(r<<2)+i>>2]=f[t+4>>2],n=r+1|0,f[e+108>>2]=n,(0|n)==(0|s))if((0|s)>=(0|(r=s?s<<1:1)))c=i;else{n=0,c=0,r&&(f[6257]=f[6257]+1,c=0|o[f[4968]](r<<2,16),s=f[e+108>>2],i=f[e+116>>2]);t:{n:{if((0|s)>=1)for(;;)if(f[(_=n<<2)+c>>2]=f[i+_>>2],(0|s)==(0|(n=n+1|0)))break n;if(!i)break t}h[e+120|0]&&(i&&(f[6258]=f[6258]+1,o[f[4969]](i)),s=f[e+108>>2]),f[e+116>>2]=0}f[e+116>>2]=c,f[e+112>>2]=r,a[e+120|0]=1}else c=i,s=n;f[(s<<2)+c>>2]=f[t+8>>2],t=s+1|0,f[e+108>>2]=t,e=f[e+32>>2],f[e+16>>2]=c,f[e+12>>2]=f[e+12>>2]+1,n=((0|t)/3|0)-1|0}return n}function ve(e,t,n){var i,o,a=0,r=0,s=0,c=y(0),l=y(0),_=y(0),m=0,v=0,g=y(0),A=y(0),x=y(0),b=0,C=0,S=y(0),E=0;if(R=i=R-32|0,o=f[e+56>>2],1!=(n-t|0)){if(C=function(e,t,n,i){var o,a=0,r=0,s=0,c=0,l=0,_=0,u=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=0,w=y(0),T=y(0),P=y(0),I=0;if(f[24+(o=R-96|0)>>2]=0,f[o+28>>2]=0,f[o+16>>2]=0,f[o+20>>2]=0,!(a=(0|n)<=(0|t))){for(E=h[e+60|0],_=t;E?(s=f[e+116>>2]+(_<<4)|0,x=d[e+44>>2],m=d[e+12>>2],v=y(y(y(p[s+4>>1])/x)+m),g=d[e+40>>2],w=d[e+8>>2],u=y(y(y(p[s+2>>1])/g)+w),T=d[e+36>>2],P=d[e+4>>2],A=y(y(y(p[s>>1])/T)+P),x=y(y(y(p[s+10>>1])/x)+m),m=y(y(y(p[s+8>>1])/g)+w),g=y(y(y(p[s+6>>1])/T)+P)):(s=f[e+76>>2]+(_<<6)|0,v=d[s+8>>2],u=d[s+4>>2],A=d[s>>2],x=d[s+24>>2],m=d[s+20>>2],g=d[s+16>>2]),b=y(y(y(x+v)*y(.5))+b),C=y(y(y(m+u)*y(.5))+C),S=y(y(y(g+A)*y(.5))+S),(0|(_=_+1|0))!=(0|n););d[o+24>>2]=b,d[o+20>>2]=C,d[o+16>>2]=S}if(E=n-t|0,u=y(y(1)/y(0|E)),d[o+24>>2]=u*b,d[o+20>>2]=u*C,d[o+16>>2]=u*S,s=t,!a)for(x=d[(i<<=2)+(o+16|0)>>2],I=i+o|0,s=_=t;(a=h[e+60|0])?(i=f[e+116>>2]+(_<<4)|0,u=d[e+44>>2],A=d[e+12>>2],b=y(y(y(p[i+4>>1])/u)+A),v=d[e+40>>2],m=d[e+8>>2],C=y(y(y(p[i+2>>1])/v)+m),g=d[e+36>>2],w=d[e+4>>2],S=y(y(y(p[i>>1])/g)+w),u=y(y(y(p[i+10>>1])/u)+A),A=y(y(y(p[i+8>>1])/v)+m),v=y(y(y(p[i+6>>1])/g)+w)):(i=f[e+76>>2]+(_<<6)|0,b=d[i+8>>2],C=d[i+4>>2],S=d[i>>2],u=d[i+24>>2],A=d[i+20>>2],v=d[i+16>>2]),f[o+12>>2]=0,d[o+8>>2]=y(u+b)*y(.5),d[o+4>>2]=y(A+C)*y(.5),d[o>>2]=y(v+S)*y(.5),d[I>>2]>x&&(a?(l=f[e+116>>2],c=f[4+(r=8+(i=a=l+(_<<4)|0)|0)>>2],f[o+40>>2]=f[r>>2],f[o+44>>2]=c,r=f[i+4>>2],f[o+32>>2]=f[i>>2],f[o+36>>2]=r,r=f[4+(a=(a=l)+(l=s<<4)|0)>>2],f[i>>2]=f[a>>2],f[i+4>>2]=r,r=f[a+12>>2],f[i+8>>2]=f[a+8>>2],f[i+12>>2]=r,i=l+f[e+116>>2]|0,l=f[o+36>>2],f[i>>2]=f[o+32>>2],f[i+4>>2]=l,a=f[o+44>>2],f[i+8>>2]=f[o+40>>2],f[i+12>>2]=a):(a=f[e+76>>2],r=f[4+(l=56+(i=a+(_<<6)|0)|0)>>2],f[o+88>>2]=f[l>>2],f[o+92>>2]=r,l=f[i+52>>2],f[o+80>>2]=f[i+48>>2],f[o+84>>2]=l,l=f[i+44>>2],f[o+72>>2]=f[i+40>>2],f[o+76>>2]=l,c=f[i+36>>2],f[(r=l=o- -64|0)>>2]=f[i+32>>2],f[r+4>>2]=c,r=f[i+28>>2],f[o+56>>2]=f[i+24>>2],f[o+60>>2]=r,r=f[i+20>>2],f[o+48>>2]=f[i+16>>2],f[o+52>>2]=r,r=f[i+12>>2],f[o+40>>2]=f[i+8>>2],f[o+44>>2]=r,r=f[i+4>>2],f[o+32>>2]=f[i>>2],f[o+36>>2]=r,c=f[4+(a=a+(r=s<<6)|0)>>2],f[i>>2]=f[a>>2],f[i+4>>2]=c,c=f[a+12>>2],f[i+8>>2]=f[a+8>>2],f[i+12>>2]=c,c=f[a+20>>2],f[i+16>>2]=f[a+16>>2],f[i+20>>2]=c,c=f[a+28>>2],f[i+24>>2]=f[a+24>>2],f[i+28>>2]=c,c=f[a+36>>2],f[i+32>>2]=f[a+32>>2],f[i+36>>2]=c,c=f[a+44>>2],f[i+40>>2]=f[a+40>>2],f[i+44>>2]=c,c=f[a+52>>2],f[i+48>>2]=f[a+48>>2],f[i+52>>2]=c,c=f[a+60>>2],f[i+56>>2]=f[a+56>>2],f[i+60>>2]=c,i=f[e+76>>2]+r|0,r=f[o+36>>2],f[i>>2]=f[o+32>>2],f[i+4>>2]=r,a=f[o+44>>2],f[i+8>>2]=f[o+40>>2],f[i+12>>2]=a,a=f[o+52>>2],f[i+16>>2]=f[o+48>>2],f[i+20>>2]=a,a=f[o+60>>2],f[i+24>>2]=f[o+56>>2],f[i+28>>2]=a,a=f[l+4>>2],f[i+32>>2]=f[l>>2],f[i+36>>2]=a,a=f[o+76>>2],f[i+40>>2]=f[o+72>>2],f[i+44>>2]=a,a=f[o+84>>2],f[i+48>>2]=f[o+80>>2],f[i+52>>2]=a,a=f[o+92>>2],f[i+56>>2]=f[o+88>>2],f[i+60>>2]=a),s=s+1|0),(0|(_=_+1|0))!=(0|n););return i=e=(E>>1)+t|0,(0|s)<=((e=(0|E)/3|0)+t|0)||(0|s)>=((-1^e)+n|0)?i:s}(e,t,n,function(e,t,n){var i,o=0,a=0,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=0,T=y(0);if(i=n-t|0,(0|n)<=(0|t))m=y(0|i);else{for(w=h[e+60|0],o=t;w?(a=f[e+116>>2]+(o<<4)|0,_=d[e+44>>2],u=d[e+12>>2],r=y(y(y(p[a+4>>1])/_)+u),m=d[e+40>>2],v=d[e+8>>2],A=y(y(y(p[a+2>>1])/m)+v),b=d[e+36>>2],C=d[e+4>>2],x=y(y(y(p[a>>1])/b)+C),_=y(y(y(p[a+10>>1])/_)+u),u=y(y(y(p[a+8>>1])/m)+v),m=y(y(y(p[a+6>>1])/b)+C)):(a=f[e+76>>2]+(o<<6)|0,r=d[a+8>>2],A=d[a+4>>2],x=d[a>>2],_=d[a+24>>2],u=d[a+20>>2],m=d[a+16>>2]),s=y(s+y(y(_+r)*y(.5))),c=y(c+y(y(u+A)*y(.5))),l=y(l+y(y(m+x)*y(.5))),(0|(o=o+1|0))!=(0|n););for(m=y(0|i),r=y(y(1)/m),b=y(r*s),C=y(r*c),T=y(r*l),l=y(0),a=h[e+60|0],c=y(0),s=y(0);a?(o=f[e+116>>2]+(t<<4)|0,_=d[e+44>>2],u=d[e+12>>2],r=y(y(y(p[o+4>>1])/_)+u),v=d[e+40>>2],g=d[e+8>>2],A=y(y(y(p[o+2>>1])/v)+g),S=d[e+36>>2],E=d[e+4>>2],x=y(y(y(p[o>>1])/S)+E),_=y(y(y(p[o+10>>1])/_)+u),u=y(y(y(p[o+8>>1])/v)+g),v=y(y(y(p[o+6>>1])/S)+E)):(o=f[e+76>>2]+(t<<6)|0,r=d[o+8>>2],A=d[o+4>>2],x=d[o>>2],_=d[o+24>>2],u=d[o+20>>2],v=d[o+16>>2]),g=l,l=y(y(y(_+r)*y(.5))-b),l=y(g+y(l*l)),g=c,c=y(y(y(u+A)*y(.5))-C),c=y(g+y(c*c)),g=s,s=y(y(y(v+x)*y(.5))-T),s=y(g+y(s*s)),(0|n)!=(0|(t=t+1|0)););}return r=y(y(1)/y(m+y(-1))),c=y(r*c),l=y(r*l),(s=y(r*s))<c?c<l?2:1:(s<l)<<1}(e,t,n)),v=f[e+56>>2],h[e+60|0]?(l=d[e+40>>2],_=d[e+8>>2],g=d[e+24>>2],A=d[e+44>>2],x=d[e+12>>2],S=d[e+28>>2],a=r=f[e+136>>2]+(v<<4)|0,s=(c=y(y(d[e+20>>2]-d[e+4>>2])*d[e+36>>2]))<y(4294967296)&c>=y(0)?~~c>>>0:0,u[a>>1]=65534&s,a=r,s=(c=y(y(S-x)*A))<y(4294967296)&c>=y(0)?~~c>>>0:0,u[a+4>>1]=65534&s,a=(c=y(y(g-_)*l))<y(4294967296)&c>=y(0)?~~c>>>0:0,u[r+2>>1]=65534&a):(m=f[e+24>>2],r=f[e+96>>2]+(v<<6)|0,f[r>>2]=f[e+20>>2],f[r+4>>2]=m,a=f[e+32>>2],f[r+8>>2]=f[e+28>>2],f[r+12>>2]=a),r=f[e+56>>2],h[e+60|0]?(g=d[e+40>>2],c=d[e+8>>2],A=d[e+44>>2],l=d[e+12>>2],a=r=f[e+136>>2]+(r<<4)|0,_=d[e+4>>2],s=(_=y(y(y(_-_)*d[e+36>>2])+y(1)))<y(4294967296)&_>=y(0)?~~_>>>0:0,u[a+6>>1]=1|s,a=r,s=(l=y(y(y(l-l)*A)+y(1)))<y(4294967296)&l>=y(0)?~~l>>>0:0,u[a+10>>1]=1|s,a=(c=y(y(y(c-c)*g)+y(1)))<y(4294967296)&c>=y(0)?~~c>>>0:0,u[r+8>>1]=1|a):(m=f[e+8>>2],r=f[e+96>>2]+(r<<6)|0,f[r+16>>2]=f[e+4>>2],f[r+20>>2]=m,a=f[e+16>>2],f[r+24>>2]=f[e+12>>2],f[r+28>>2]=a),m=f[e+56>>2],(0|n)>(0|t))for(r=t;h[e+60|0]?(a=f[e+116>>2]+(r<<4)|0,s=p[a+4>>1],b=p[a+2>>1],E=p[a>>1],c=d[e+44>>2],l=d[e+40>>2],_=d[e+36>>2],f[i+28>>2]=0,g=d[e+4>>2],d[i+16>>2]=y(y(E>>>0)/_)+g,A=d[e+8>>2],d[i+20>>2]=y(y(b>>>0)/l)+A,x=d[e+12>>2],d[i+24>>2]=y(y(s>>>0)/c)+x,s=p[a+6>>1],b=p[a+8>>1],a=p[a+10>>1],f[i+12>>2]=0,d[i+8>>2]=x+y(y(a>>>0)/c),d[i+4>>2]=A+y(y(b>>>0)/l),d[i>>2]=g+y(y(s>>>0)/_)):(a=f[e+76>>2]+(r<<6)|0,s=f[a+12>>2],f[i+24>>2]=f[a+8>>2],f[i+28>>2]=s,s=f[a+4>>2],f[i+16>>2]=f[a>>2],f[i+20>>2]=s,s=f[a+28>>2],f[i+8>>2]=f[a+24>>2],f[i+12>>2]=s,s=f[a+20>>2],f[i>>2]=f[a+16>>2],f[i+4>>2]=s),rt(e,m,i+16|0,i),m=f[e+56>>2],(0|(r=r+1|0))!=(0|n););a=m+1|0,f[e+56>>2]=a,ve(e,t,C),m=f[e+56>>2],ve(e,C,n),!(r=h[e+60|0])|(0|(t=f[e+56>>2]-o|0))<129||(Ce(e,a,m),r=h[e+60|0]),255&r?f[12+(f[e+136>>2]+(v<<4)|0)>>2]=0-t:f[32+(f[e+96>>2]+(v<<6)|0)>>2]=t}else h[e+60|0]?(t=f[e+116>>2]+(t<<4)|0,v=f[(a=t)+4>>2],n=f[e+136>>2]+(o<<4)|0,f[(r=n)>>2]=f[a>>2],f[r+4>>2]=v):(t=f[e+76>>2]+(t<<6)|0,v=f[(r=t)+4>>2],n=f[e+96>>2]+(o<<6)|0,f[(a=n)>>2]=f[r>>2],f[a+4>>2]=v,a=f[r+60>>2],f[n+56>>2]=f[r+56>>2],f[n+60>>2]=a,a=f[r+52>>2],f[n+48>>2]=f[r+48>>2],f[n+52>>2]=a,a=f[r+44>>2],f[n+40>>2]=f[r+40>>2],f[n+44>>2]=a,a=f[r+36>>2],f[n+32>>2]=f[r+32>>2],f[n+36>>2]=a,a=f[r+28>>2],f[n+24>>2]=f[r+24>>2],f[n+28>>2]=a,a=f[r+20>>2],f[n+16>>2]=f[r+16>>2],f[n+20>>2]=a),r=f[t+12>>2],f[n+8>>2]=f[t+8>>2],f[n+12>>2]=r,f[e+56>>2]=f[e+56>>2]+1;R=i+32|0}function ge(e,t,n,i,a,r,s){var c,l=y(0),_=y(0),u=0,h=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),E=0,w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=0,O=0,z=0,L=0,F=0,U=0,B=0,k=0,j=0,G=0,V=0,H=0,W=0,q=0,Y=0,X=0,Q=0,K=0,Z=0;if(R=c=R-32|0,P=d[n+4>>2],I=d[i+4>>2],N=d[n>>2],D=d[i>>2],v=d[e+28>>2],w=d[e+12>>2],x=d[i+8>>2],b=d[n+8>>2],l=(l=y((x<b?x:b)+d[a+8>>2]))<w?w:l,h=d[e+44>>2],M=(l=y(y((v<l?v:l)-w)*h))<y(4294967296)&l>=y(0)?~~l>>>0:0,g=d[e+24>>2],T=d[e+8>>2],l=(l=y((I<P?I:P)+d[a+4>>2]))<T?T:l,C=d[e+40>>2],O=(l=y(y((g<l?g:l)-T)*C))<y(4294967296)&l>=y(0)?~~l>>>0:0,m=d[e+20>>2],A=d[e+4>>2],l=(l=y((D<N?D:N)+d[a>>2]))<A?A:l,_=d[e+36>>2],z=(l=y(y((m<l?m:l)-A)*_))<y(4294967296)&l>=y(0)?~~l>>>0:0,l=y((b<x?x:b)+d[r+8>>2]),E=(l=y(y(y((v<(l=l<w?w:l)?v:l)-w)*h)+y(1)))<y(4294967296)&l>=y(0)?~~l>>>0:0,l=y((P<I?I:P)+d[r+4>>2]),u=(l=y(y(y((g<(l=l<T?T:l)?g:l)-T)*C)+y(1)))<y(4294967296)&l>=y(0)?~~l>>>0:0,l=y((N<D?D:N)+d[r>>2]),i=(l=y(y(y((m<(l=l<A?A:l)?m:l)-A)*_)+y(1)))<y(4294967296)&l>=y(0)?~~l>>>0:0,0<(0|s))for(m=y(D-N),C=y(I-P),_=y(x-b),l=y(y(1)/y(S(y(y(y(m*m)+y(C*C))+y(_*_))))),h=y(_*l),v=y(_*h),_=y(m*l),l=y(C*l),C=y(v+y(y(m*_)+y(C*l))),k=65534&M,j=65534&O,G=65534&z,V=1|E,H=1|u,W=1|i,i=f[e+136>>2],q=((E=(A=h==y(0)?y(0xde0b6b000000000):y(y(1)/h))<y(0))<<4)+c|8,Y=((u=(x=l==y(0)?y(0xde0b6b000000000):y(y(1)/l))<y(0))<<4)+c|4,X=((1^E)<<4)+c|8,Q=((1^u)<<4)+c|4,K=((u=(b=_==y(0)?y(0xde0b6b000000000):y(y(1)/_))<y(0))<<4)+c|0,Z=((1^u)<<4)+c|0;;){U=f[i+12>>2],u=0;e:{t:{n:{i:if(!(G>>>0>p[i+6>>1]||W>>>0<(B=p[i>>1])>>>0|k>>>0>p[i+10>>1]||V>>>0<(M=p[i+4>>1])>>>0|j>>>0>p[i+8>>1]||H>>>0<(O=p[i+2>>1])>>>0)){if(v=d[e+12>>2],g=d[e+44>>2],m=d[e+8>>2],h=d[e+40>>2],_=d[e+4>>2],l=d[e+36>>2],f[c+12>>2]=0,z=p[i+10>>1],E=p[i+8>>1],u=p[i+6>>1],f[c+28>>2]=0,d[c>>2]=y(_+y(y(B>>>0)/l))-d[r>>2],d[c+4>>2]=y(m+y(y(O>>>0)/h))-d[r+4>>2],d[c+8>>2]=y(v+y(y(M>>>0)/g))-d[r+8>>2],d[c+16>>2]=y(_+y(y(u>>>0)/l))-d[a>>2],d[c+20>>2]=y(m+y(y(E>>>0)/h))-d[a+4>>2],d[c+24>>2]=y(v+y(y(z>>>0)/g))-d[a+8>>2],_=d[n+4>>2],v=y(x*y(d[Y>>2]-_)),l=d[n>>2],!(v>(h=y(b*y(d[Z>>2]-l)))||(g=y(b*y(d[K>>2]-l)))>(_=y(x*y(d[Q>>2]-_)))||(l=d[n+8>>2],(m=y(A*y(d[q>>2]-l)))>(h=_<h?_:h)||(_=v>g?v:g)>(l=y(A*y(d[X>>2]-l)))))){if(!(u=(m>_?m:_)<C&(l<h?l:h)>y(0))|(0|U)<0)break i;u=f[i+12>>2],o[f[f[t>>2]+8>>2]](t,u>>21,2097151&u);break n}u=0}if(!((0|U)>-1||u))break t}L=L+1|0,i=i+16|0;break e}L=L-(u=f[i+12>>2])|0,i=i-(u<<4)|0}if(F=F+1|0,!((0|L)<(0|s)))break}f[5677]<(0|F)&&(f[5677]=F),R=c+32|0}function ye(e,t,n,i,o,a){var r,s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=0,b=0,C=0,S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=0,D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=0;if(R=r=R-96|0,f[r+92>>2]=i,f[r+88>>2]=n,f[r+84>>2]=t,f[r+80>>2]=e,s=d[i>>2],l=d[e>>2],c=d[i+4>>2],S=d[e+4>>2],h=d[i+8>>2],E=d[e+8>>2],f[r+44>>2]=0,p=y(E-h),d[r+40>>2]=p,m=y(S-c),d[r+36>>2]=m,g=y(l-s),d[r+32>>2]=g,w=d[t>>2],T=d[t+4>>2],M=d[t+8>>2],f[r+60>>2]=0,v=y(M-h),d[r+56>>2]=v,P=y(T-c),d[r+52>>2]=P,I=y(w-s),d[r+48>>2]=I,A=d[n>>2],_=d[n+4>>2],D=d[n+8>>2],f[r+76>>2]=0,O=y(D-h),d[r+72>>2]=O,z=y(_-c),d[r+68>>2]=z,L=y(A-s),d[r+64>>2]=L,u=y(-1),!((v=y(y(y(y(g*P)*O)+y(y(y(y(y(m*v)*L)+y(y(p*I)*z))-y(y(g*v)*z))-y(y(m*I)*O)))-y(y(p*P)*L)))==y(0)|v!=v)&&(P=y(S-T),I=y(w-A),w=y(l-w),T=y(T-_),A=y(E*y(y(P*I)-y(w*T))),_=l,l=y(E-M),E=y(M-D),y(v*y(A+y(y(_*y(y(l*T)-y(P*E)))+y(S*y(y(w*E)-y(l*I))))))<=y(0))){for(f[r+24>>2]=0,f[r+16>>2]=0,f[r+20>>2]=0,f[r+12>>2]=0;b=f[4264+(x=N<<2)>>2],l=d[8+(C=(r+32|0)+(b<<4)|0)>>2],S=d[C+4>>2],_=y(y(y(m*l)-y(p*S))*s),s=d[C>>2],y(v*y(y(_+y(c*y(y(p*s)-y(l*g))))+y(y(y(S*g)-y(m*s))*h)))>y(0)&&(C=b<<2,(s=Pe(f[x+(r+80|0)>>2],f[C+(r+80|0)>>2],i,r+16|0,r+12|0))<u^1&&!(u<y(0))||(F=1<<b,b=f[r+12>>2],f[a>>2]=((F&b<<30>>31)+(b<<1&8)|0)+(0-(1&b)&1<<N),f[o+x>>2]=f[r+16>>2],f[o+C>>2]=f[r+20>>2],f[(f[C+4264>>2]<<2)+o>>2]=0,f[o+12>>2]=f[r+24>>2],u=s)),3!=(0|(N=N+1|0));)g=d[(x=(r+32|0)+(N<<4)|0)>>2],p=d[x+8>>2],m=d[x+4>>2],h=d[i+8>>2],c=d[i+4>>2],s=d[i>>2];u<y(0)&&(f[a>>2]=15,u=d[n+4>>2],s=d[t+8>>2],c=d[i>>2],h=d[n+8>>2],p=d[t>>2],m=d[i+4>>2],A=y(y(y(u*s)*c)+y(y(h*p)*m)),_=s,s=d[n>>2],l=y(u*p),u=d[i+8>>2],l=y(y(A-y(m*y(_*s)))-y(l*u)),_=u,u=d[t+4>>2],u=y(y(y(l+y(_*y(s*u)))-y(c*y(h*u)))/v),d[o>>2]=u,s=d[e+4>>2],c=d[n+8>>2],h=d[i>>2],p=d[e+8>>2],m=d[n>>2],g=d[i+4>>2],A=y(y(y(s*c)*h)+y(y(p*m)*g)),_=c,c=d[e>>2],l=y(s*m),s=d[i+8>>2],l=y(y(A-y(g*y(_*c)))-y(l*s)),_=s,s=d[n+4>>2],s=y(y(y(l+y(_*y(c*s)))-y(h*y(p*s)))/v),d[o+4>>2]=s,c=d[t+4>>2],h=d[e+8>>2],p=d[i>>2],m=d[t+8>>2],g=d[e>>2],l=d[i+4>>2],D=y(y(y(c*h)*p)+y(y(m*g)*l)),_=h,h=d[t>>2],A=y(c*g),c=d[i+8>>2],l=y(y(D-y(l*y(_*h)))-y(A*c)),_=c,c=d[e+4>>2],v=y(y(y(l+y(_*y(h*c)))-y(p*y(m*c)))/v),d[o+8>>2]=v,d[o+12>>2]=y(1)-y(y(u+s)+v),u=y(0))}return R=r+96|0,u}function Ae(e,t,n,i,a){e|=0,t|=0,n|=0,i|=0,a|=0;var r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0);R=i=R-144|0,f[i+108>>2]=0,r=d[t+80>>2],c=d[t+96>>2],v=d[t+120>>2],N=d[t+56>>2],E=d[t+112>>2],w=d[t+116>>2],D=d[t+52>>2],l=d[t+68>>2],g=d[t+84>>2],A=d[t+100>>2],s=d[t+20>>2],p=d[t+36>>2],x=d[t+72>>2],_=d[t+88>>2],m=d[t+24>>2],u=d[t+104>>2],b=d[t+40>>2],h=d[t+64>>2],C=d[t+32>>2],S=d[t>>2],T=d[t+16>>2],M=d[t+48>>2],P=d[t+4>>2],I=d[t+8>>2],f[i+100>>2]=0,f[i+84>>2]=0,f[i+68>>2]=0,d[i+80>>2]=y(y(I*x)+y(m*_))+y(b*u),d[i+76>>2]=y(y(P*x)+y(s*_))+y(p*u),d[i- -64>>2]=y(y(I*l)+y(m*g))+y(b*A),d[i+60>>2]=y(y(P*l)+y(s*g))+y(p*A),E=y(M-E),w=y(D-w),v=y(N-v),d[i+96>>2]=y(y(x*E)+y(_*w))+y(u*v),d[i+92>>2]=y(y(E*l)+y(w*g))+y(v*A),f[i+52>>2]=0,d[i+72>>2]=y(y(S*x)+y(T*_))+y(C*u),d[i+56>>2]=y(y(S*l)+y(T*g))+y(C*A),d[i+48>>2]=y(y(h*I)+y(r*m))+y(c*b),d[i+44>>2]=y(y(h*P)+y(r*s))+y(c*p),d[i+40>>2]=y(y(h*S)+y(r*T))+y(c*C),d[i+88>>2]=y(y(E*h)+y(w*r))+y(v*c),Fe(e,i+88|0,i+128|0,i+112|0,i+108|0,d[e+12>>2])&&(a?(g=d[t+72>>2],A=d[t+64>>2],x=d[t+68>>2],_=d[t+88>>2],u=d[t+80>>2],h=d[t+84>>2],s=d[t+104>>2],p=d[t+96>>2],m=d[t+100>>2],r=d[i+120>>2],c=d[i+112>>2],l=d[i+116>>2],f[i+36>>2]=0,b=y(y(y(c*p)+y(l*m))+y(r*s)),d[i+32>>2]=-b,C=y(y(y(c*u)+y(l*h))+y(r*_)),d[i+28>>2]=-C,S=y(y(y(A*c)+y(x*l))+y(g*r)),d[i+24>>2]=-S,T=d[t+112>>2],P=d[t+116>>2],r=d[t+120>>2],f[i+20>>2]=0,c=d[i+128>>2],l=d[i+132>>2],v=s,s=d[i+136>>2],v=y(r+y(y(y(p*c)+y(m*l))+y(v*s))),r=d[i+108>>2],d[i+16>>2]=v+y(b*r),d[i+12>>2]=y(P+y(y(y(c*u)+y(l*h))+y(s*_)))+y(C*r),d[i+8>>2]=y(T+y(y(y(c*A)+y(l*x))+y(s*g)))+y(S*r),o[f[f[n>>2]+16>>2]](n,i+24|0,i+8|0,r)):(r=d[t+72>>2],c=d[t+64>>2],l=d[t+68>>2],g=d[t+88>>2],A=d[t+80>>2],x=d[t+84>>2],_=d[t+104>>2],u=d[t+96>>2],h=d[t+100>>2],f[i+36>>2]=0,s=d[i+112>>2],p=d[i+116>>2],m=d[i+120>>2],d[i+32>>2]=y(y(u*s)+y(h*p))+y(_*m),d[i+28>>2]=y(y(s*A)+y(p*x))+y(m*g),d[i+24>>2]=y(y(c*s)+y(l*p))+y(r*m),s=d[t+112>>2],p=d[t+116>>2],m=d[t+120>>2],f[i+20>>2]=0,v=u,u=d[i+128>>2],b=h,h=d[i+132>>2],C=_,_=d[i+136>>2],d[i+16>>2]=m+y(y(y(v*u)+y(b*h))+y(C*_)),d[i+12>>2]=p+y(y(y(u*A)+y(h*x))+y(_*g)),d[i+8>>2]=s+y(y(y(u*c)+y(h*l))+y(_*r)),o[f[f[n>>2]+16>>2]](n,i+24|0,i+8|0,d[i+108>>2]))),R=i+144|0}function xe(e,t,n,i,o,a){var r,s,_,u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=0,w=0,T=0,P=0,I=0,R=y(0),N=y(0),D=y(0),M=y(0),O=y(0);f[t+48>>2]=-2147483648,f[t+52>>2]=-2147483648,f[t+16>>2]=0,f[t+20>>2]=0,f[t+56>>2]=-2147483648,f[t+60>>2]=0,f[t+24>>2]=0,f[t+28>>2]=0,s=f[e+16>>2],e=f[240+(s+g(i,244)|0)>>2],r=f[240+(g(o,244)+s|0)>>2],f[t+148>>2]=o,f[t+144>>2]=i,f[t+132>>2]=0,d[t+104>>2]=a,f[t+96>>2]=0,f[t+100>>2]=0,u=d[n>>2],C=d[n+4>>2],p=d[n+8>>2],f[t+12>>2]=0,d[t+8>>2]=-p,h=y(-C),d[t+4>>2]=h,S=y(-u),d[t>>2]=S,_=t,e?(c(y(y(y(y(d[e+360>>2]*h)-y(u*d[e+356>>2]))-y(p*d[e+364>>2]))*d[e+612>>2])),w=l(0),c(y(y(y(y(d[e+344>>2]*h)-y(u*d[e+340>>2]))-y(p*d[e+348>>2]))*d[e+608>>2])),T=l(0),c(y(y(y(y(d[e+328>>2]*h)-y(u*d[e+324>>2]))-y(p*d[e+332>>2]))*d[e+604>>2])),E=l(0)):E=0,f[_+64>>2]=E,f[t+76>>2]=0,f[t+72>>2]=w,f[t+68>>2]=T,m=d[n>>2],v=d[n+4>>2],A=d[n+8>>2],f[t+44>>2]=f[n+12>>2],d[t+40>>2]=A,d[t+36>>2]=v,d[t+32>>2]=m,n=0,r&&(c(y(y(y(y(m*d[r+356>>2])+y(v*d[r+360>>2]))+y(A*d[r+364>>2]))*d[r+612>>2])),P=l(0),c(y(y(y(y(m*d[r+324>>2])+y(v*d[r+328>>2]))+y(A*d[r+332>>2]))*d[r+604>>2])),I=l(0),c(y(y(y(y(m*d[r+340>>2])+y(v*d[r+344>>2]))+y(A*d[r+348>>2]))*d[r+608>>2])),n=l(0)),f[t+80>>2]=I,f[t+92>>2]=0,f[t+88>>2]=P,f[t+84>>2]=n,e&&(b=y(y(y(d[e+360>>2]*h)-y(u*d[e+356>>2]))-y(p*d[e+364>>2])),R=y(y(y(d[e+344>>2]*h)-y(u*d[e+340>>2]))-y(p*d[e+348>>2])),x=y(y(y(d[e+328>>2]*h)-y(u*d[e+324>>2]))-y(p*d[e+332>>2]))),n=t,h=y(y(y(y(R*h)-y(u*x))-y(p*b))+y(0)),r?(N=y(y(y(m*d[r+356>>2])+y(v*d[r+360>>2]))+y(A*d[r+364>>2])),D=y(y(y(m*d[r+340>>2])+y(v*d[r+344>>2]))+y(A*d[r+348>>2])),u=y(y(y(d[r+324>>2]*m)+y(d[r+328>>2]*v))+y(d[r+332>>2]*A))):u=y(0),b=y(y(1)/y(h+y(y(y(u*m)+y(D*v))+y(N*A)))),d[n+108>>2]=b,u=y(0),h=y(0),x=y(0),e&&(e=g(i,244)+s|0,u=y(y(y(y(d[e+176>>2]+d[e+208>>2])*y(0))+y(y(d[e+180>>2]+d[e+212>>2])*y(0)))+y(y(d[e+184>>2]+d[e+216>>2])*y(0))),x=d[e+192>>2],M=d[e+196>>2],h=d[e+200>>2]),x=y(u+y(y(y(x*S)-y(C*M))-y(p*h))),r?(e=g(o,244)+s|0,u=y(y(y(y(d[e+176>>2]+d[e+208>>2])*y(-0))+y(y(d[e+180>>2]+d[e+212>>2])*y(-0)))+y(y(d[e+184>>2]+d[e+216>>2])*y(-0))),O=d[e+200>>2],h=d[e+196>>2],p=d[e+192>>2]):(u=y(-0),h=y(0),p=y(0)),d[t+124>>2]=a,d[t+116>>2]=0,d[t+120>>2]=-a,d[t+112>>2]=b*y(y(0)-y(x+y(u+y(y(A*O)+y(y(v*h)+y(m*p))))))}function be(e,t,n){var i,a,r=0,s=0,c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0);R=i=R-160|0,s=f[e+4>>2],r=f[s+12>>2],O=d[r+52>>2],z=d[r+56>>2],c=d[r+24>>2],l=d[r+20>>2],_=d[r+40>>2],u=d[r+36>>2],L=d[r+48>>2],h=d[r+8>>2],p=d[r>>2],m=d[r+4>>2],v=d[r+16>>2],A=d[r+32>>2],r=f[f[s+4>>2]+28>>2]+g(n,80)|0,x=d[r+32>>2],b=d[r>>2],C=d[r+16>>2],S=d[r+56>>2],E=d[r+52>>2],w=d[r+48>>2],T=d[r+36>>2],P=d[r+20>>2],I=d[r+4>>2],N=d[r+40>>2],D=d[r+24>>2],M=d[r+8>>2],s=0,f[i+156>>2]=0,f[i+140>>2]=0,f[i+124>>2]=0,d[i+136>>2]=y(y(A*M)+y(u*D))+y(_*N),d[i+132>>2]=y(y(A*I)+y(u*P))+y(_*T),d[i+120>>2]=y(y(v*M)+y(l*D))+y(c*N),d[i+116>>2]=y(y(v*I)+y(l*P))+y(c*T),d[i+152>>2]=z+y(y(y(A*w)+y(u*E))+y(_*S)),d[i+148>>2]=O+y(y(y(v*w)+y(l*E))+y(c*S)),f[i+108>>2]=0,d[i+128>>2]=y(y(A*b)+y(u*C))+y(_*x),d[i+112>>2]=y(y(v*b)+y(l*C))+y(c*x),d[i+96>>2]=y(y(p*b)+y(m*C))+y(h*x),d[i+104>>2]=y(y(p*M)+y(m*D))+y(h*N),d[i+100>>2]=y(y(p*I)+y(m*P))+y(h*T),d[i+144>>2]=L+y(y(y(p*w)+y(m*E))+y(h*S)),o[f[f[t>>2]+8>>2]](t,i+96|0,i+80|0,i- -64|0),c=d[f[e+20>>2]+32>>2],d[i+80>>2]=d[i+80>>2]-c,d[i+84>>2]=d[i+84>>2]-c,d[i+88>>2]=d[i+88>>2]-c,d[i+64>>2]=c+d[i+64>>2],d[i+68>>2]=c+d[i+68>>2],d[i+72>>2]=c+d[i+72>>2],r=f[e+8>>2],a=f[r+4>>2],o[f[f[a>>2]+8>>2]](a,f[r+12>>2],i+48|0,i+32|0),(r=f[5643])&&!o[r](f[f[e+8>>2]+4>>2],t)||(s=d[i+64>>2]<d[i+48>>2]|d[i+80>>2]>d[i+32>>2]?s:1,r=0,r=d[i+72>>2]<d[i+56>>2]|d[i+88>>2]>d[i+40>>2]?r:s,d[i+68>>2]<d[i+52>>2]|d[i+84>>2]>d[i+36>>2]|1^r||(r=f[e+4>>2],s=f[r+8>>2],f[i+28>>2]=n,f[i+24>>2]=-1,f[i+16>>2]=s,f[i+12>>2]=t,f[i+8>>2]=r,f[i+20>>2]=i+96,d[f[e+20>>2]+32>>2]>y(0)?(t=f[e+12>>2],t=0|o[f[f[t>>2]+8>>2]](t,i+8|0,f[e+8>>2],0,2)):(t=f[(r=n<<2)+f[e+24>>2]>>2])||(t=f[e+12>>2],t=0|o[f[f[t>>2]+8>>2]](t,i+8|0,f[e+8>>2],f[e+28>>2],1),f[r+f[e+24>>2]>>2]=t,t=f[r+f[e+24>>2]>>2]),s=f[e+20>>2],r=f[s+8>>2],f[r+8>>2]!=f[f[e+4>>2]+8>>2]?(r=f[s+12>>2],f[s+12>>2]=i+8,o[f[f[s>>2]+12>>2]](s,-1,n)):(f[s+8>>2]=i+8,o[f[f[s>>2]+8>>2]](s,-1,n)),o[f[f[t>>2]+8>>2]](t,i+8|0,f[e+8>>2],f[e+16>>2],f[e+20>>2]),t=f[e+20>>2],f[(f[f[t+8>>2]+8>>2]==f[f[e+4>>2]+8>>2]?8:12)+t>>2]=r)),R=i+160|0}function Ce(e,t,n){var i,r,s,c,l=0,_=0,m=0,d=0,v=0,g=0,y=0,A=0;if(R=i=R-32|0,r=f[e+136>>2],s=(0|(l=f[12+(r+(n<<4)|0)>>2]))>-1?1:0-l|0,(0|(c=(0|(l=f[12+((t<<4)+r|0)>>2]))>-1?1:0-l|0))<=128){if((0|(l=m=f[e+152>>2]))==f[e+156>>2]&&!((0|(l=m))>=(0|(g=l?l<<1:1)))){if(g?(f[6257]=f[6257]+1,l=0|o[f[4968]](g<<5,16),d=f[e+152>>2]):(l=0,d=m),(0|d)>=1)for(;v=(_=y<<5)+l|0,_=_+f[e+160>>2]|0,A=f[_+4>>2],f[v>>2]=f[_>>2],f[v+4>>2]=A,A=f[_+28>>2],f[v+24>>2]=f[_+24>>2],f[v+28>>2]=A,A=f[_+20>>2],f[v+16>>2]=f[_+16>>2],f[v+20>>2]=A,A=f[_+12>>2],f[v+8>>2]=f[_+8>>2],f[v+12>>2]=A,(0|d)!=(0|(y=y+1|0)););(d=f[e+160>>2])&&(h[e+164|0]&&d&&(f[6258]=f[6258]+1,o[f[4969]](d)),f[e+160>>2]=0),f[e+160>>2]=l,f[e+156>>2]=g,a[e+164|0]=1,l=f[e+152>>2]}f[e+152>>2]=l+1,_=f[(l=i)+4>>2],m=(d=m<<5)+f[e+160>>2]|0,f[m>>2]=f[l>>2],f[m+4>>2]=_,_=f[l+28>>2],f[m+24>>2]=f[l+24>>2],f[m+28>>2]=_,_=f[l+20>>2],f[m+16>>2]=f[l+16>>2],f[m+20>>2]=_,_=f[l+12>>2],f[m+8>>2]=f[l+8>>2],f[m+12>>2]=_,l=d+f[e+160>>2]|0,m=(t<<4)+r|0,u[l>>1]=p[m>>1],u[l+2>>1]=p[m+2>>1],u[l+4>>1]=p[m+4>>1],u[l+6>>1]=p[m+6>>1],u[l+8>>1]=p[m+8>>1],m=p[m+10>>1],f[l+16>>2]=c,f[l+12>>2]=t,u[l+10>>1]=m}if((0|s)<=128){if((0|(l=m=f[e+152>>2]))==f[e+156>>2]&&!((0|(l=m))>=(0|(v=l?l<<1:1)))){if(v?(f[6257]=f[6257]+1,t=0|o[f[4968]](v<<5,16),l=f[e+152>>2]):(t=0,l=m),(0|l)>=1)for(y=0;d=(_=y<<5)+t|0,_=_+f[e+160>>2]|0,g=f[_+4>>2],f[d>>2]=f[_>>2],f[d+4>>2]=g,g=f[_+28>>2],f[d+24>>2]=f[_+24>>2],f[d+28>>2]=g,g=f[_+20>>2],f[d+16>>2]=f[_+16>>2],f[d+20>>2]=g,g=f[_+12>>2],f[d+8>>2]=f[_+8>>2],f[d+12>>2]=g,(0|l)!=(0|(y=y+1|0)););(l=f[e+160>>2])&&(h[e+164|0]&&l&&(f[6258]=f[6258]+1,o[f[4969]](l)),f[e+160>>2]=0),f[e+160>>2]=t,f[e+156>>2]=v,a[e+164|0]=1,l=f[e+152>>2]}f[e+152>>2]=l+1,_=f[(t=i)+4>>2],l=(m<<=5)+f[e+160>>2]|0,f[l>>2]=f[t>>2],f[l+4>>2]=_,d=f[t+28>>2],f[l+24>>2]=f[t+24>>2],f[l+28>>2]=d,d=f[t+20>>2],f[l+16>>2]=f[t+16>>2],f[l+20>>2]=d,d=f[t+12>>2],f[l+8>>2]=f[t+8>>2],f[l+12>>2]=d,t=m+f[e+160>>2]|0,l=(n<<4)+r|0,u[t>>1]=p[l>>1],u[t+2>>1]=p[l+2>>1],u[t+4>>1]=p[l+4>>1],u[t+6>>1]=p[l+6>>1],u[t+8>>1]=p[l+8>>1],l=p[l+10>>1],f[t+16>>2]=s,f[t+12>>2]=n,u[t+10>>1]=l}f[e+168>>2]=f[e+152>>2],R=i+32|0}function Se(e,t,n){var i,a=0,r=0,s=y(0),c=y(0),l=y(0),_=0,u=0,h=y(0),p=y(0),m=y(0),v=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0);if(R=i=R-16|0,!((0|(a=f[e+844>>2]))<1)){for(;m=d[t+48>>2],b=d[t+8>>2],C=d[t>>2],S=d[t+4>>2],v=d[t+52>>2],E=d[t+24>>2],h=d[t+16>>2],w=d[t+20>>2],s=d[t+56>>2],c=d[t+40>>2],l=d[t+32>>2],A=d[t+36>>2],r=g(_=a+-1|0,208)+e|0,f[r- -64>>2]=0,T=s,s=d[r+4>>2],P=y(l*s),l=d[r+8>>2],p=c,c=d[r+12>>2],A=y(T+y(y(P+y(A*l))+y(p*c))),d[r+60>>2]=A,v=y(v+y(y(y(s*h)+y(l*w))+y(c*E))),d[r+56>>2]=v,m=y(m+y(y(y(s*C)+y(l*S))+y(c*b))),d[r+52>>2]=m,b=d[n+56>>2],C=d[n+40>>2],S=d[n+32>>2],E=d[n+36>>2],h=d[n+52>>2],w=d[n+24>>2],I=d[n+16>>2],N=d[n+20>>2],s=d[n+48>>2],c=d[n+8>>2],l=d[n>>2],x=d[n+4>>2],f[r+48>>2]=0,T=s,s=d[r+20>>2],P=y(l*s),l=d[r+24>>2],p=c,c=d[r+28>>2],x=y(T+y(y(P+y(x*l))+y(p*c))),d[r+36>>2]=x,h=y(h+y(y(y(s*I)+y(l*N))+y(c*w))),d[r+40>>2]=h,s=y(b+y(y(y(s*S)+y(l*E))+y(c*C))),d[r+44>>2]=s,d[r+84>>2]=y(y(y(m-x)*d[r+68>>2])+y(y(v-h)*d[r+72>>2]))+y(y(A-s)*d[r+76>>2]),f[r+168>>2]=f[r+168>>2]+1,r=(0|a)>1,a=_,r;);if(!((0|(n=f[e+844>>2]))<1))for(;;){r=4+(a=g(n=(t=n)+-1|0,208)+e|0)|0;e:if((s=d[a+84>>2])<=(l=d[e+848>>2]))if(c=y(d[a+36>>2]-y(d[a+52>>2]-y(d[a+68>>2]*s))),p=y(c*c),c=y(d[a+40>>2]-y(d[a+56>>2]-y(s*d[a+72>>2]))),s=y(d[a+44>>2]-y(d[a+60>>2]-y(s*d[a+76>>2]))),y(y(p+y(c*c))+y(s*s))>y(l*l)){if((_=f[a+120>>2])&&(u=f[5379])&&(o[u](_),f[a+120>>2]=0),_=e,(0|(u=f[e+844>>2]))!=(0|(a=t))&&(It(r,4+(a=g(u+-1|0,208)+e|0)|0,208),f[a+168>>2]=0,f[a+120>>2]=0,f[a+132>>2]=0,f[a+136>>2]=0,f[a+140>>2]=0,f[a+144>>2]=0,a=f[e+844>>2]),a=a+-1|0,f[_+844>>2]=a,a)break e;if(!(a=f[5382]))break e;f[i+8>>2]=e,o[a](i+8|0)}else(a=f[5380])&&o[a](r,f[e+836>>2],f[e+840>>2]);else{if((_=f[a+120>>2])&&(u=f[5379])&&(o[u](_),f[a+120>>2]=0),_=e,(0|(u=f[e+844>>2]))!=(0|(a=t))&&(It(r,4+(a=g(u+-1|0,208)+e|0)|0,208),f[a+168>>2]=0,f[a+120>>2]=0,f[a+132>>2]=0,f[a+136>>2]=0,f[a+140>>2]=0,f[a+144>>2]=0,a=f[e+844>>2]),a=a+-1|0,f[_+844>>2]=a,a)break e;if(!(a=f[5382]))break e;f[i+12>>2]=e,o[a](i+12|0)}if(!((0|t)>1))break}}R=i+16|0}function Ee(e,t,n,i,o,a){var r,s,c,l=y(0),_=y(0),u=0,h=y(0),p=y(0),m=0,v=0,A=0,x=y(0),b=y(0),C=y(0),S=y(0),E=y(0);r=f[e+76>>2],s=f[t+140>>2];e:{if(4&(c=f[a+72>>2])){if(A=f[e+16>>2],t=f[240+(A+g(i,244)|0)>>2],v=f[240+(g(n,244)+A|0)>>2],u=g(s,152)+r|0,l=y(d[o+136>>2]*d[a+68>>2]),d[u+100>>2]=l,v&&(h=d[v+416>>2],p=d[u+24>>2],x=d[v+412>>2],b=d[u+20>>2],e=g(n,244)+A|0,_=d[v+404>>2],d[e+64>>2]=y(y(l*y(y(_*d[u+16>>2])*d[v+408>>2]))*d[e+112>>2])+d[e+64>>2],d[e+68>>2]=y(y(l*y(x*y(_*b)))*d[e+116>>2])+d[e+68>>2],d[e+72>>2]=y(y(l*y(h*y(_*p)))*d[e+120>>2])+d[e+72>>2],_=d[u+72>>2],h=d[u+68>>2],d[e+80>>2]=y(y(l*d[e+96>>2])*d[u+64>>2])+d[e+80>>2],p=d[e+104>>2],d[e+84>>2]=y(h*y(l*d[e+100>>2]))+d[e+84>>2],d[e+88>>2]=y(_*y(l*p))+d[e+88>>2]),t&&(m=g(s,152)+r|0,h=d[m+88>>2],p=d[m+84>>2],x=d[m+80>>2],b=d[t+416>>2],C=d[m+56>>2],S=d[t+412>>2],E=d[m+52>>2],e=g(i,244)+A|0,_=d[t+404>>2],l=d[u+100>>2],d[e+64>>2]=d[e+64>>2]+y(y(y(y(_*d[m+48>>2])*d[t+408>>2])*l)*d[e+112>>2]),d[e+68>>2]=d[e+68>>2]+y(y(l*y(S*y(_*E)))*d[e+116>>2]),d[e+72>>2]=d[e+72>>2]+y(y(l*y(b*y(_*C)))*d[e+120>>2]),d[e+80>>2]=d[e+80>>2]+y(x*y(l*d[e+96>>2])),_=d[e+104>>2],d[e+84>>2]=d[e+84>>2]+y(p*y(l*d[e+100>>2])),d[e+88>>2]=d[e+88>>2]+y(h*y(_*l))),!(16&c))break e;if(u=g(m=s+1|0,152)+r|0,l=y(d[o+140>>2]*d[a+68>>2]),d[u+100>>2]=l,v&&(h=d[u+24>>2],p=d[u+20>>2],e=g(n,244)+A|0,_=d[v+404>>2],d[e+64>>2]=y(y(l*y(_*d[u+16>>2]))*d[e+112>>2])+d[e+64>>2],d[e+68>>2]=y(y(l*y(_*p))*d[e+116>>2])+d[e+68>>2],d[e+72>>2]=y(y(l*y(_*h))*d[e+120>>2])+d[e+72>>2],_=d[u+72>>2],h=d[u+68>>2],d[e+80>>2]=y(y(l*d[e+96>>2])*d[u+64>>2])+d[e+80>>2],p=d[e+104>>2],d[e+84>>2]=y(h*y(l*d[e+100>>2]))+d[e+84>>2],d[e+88>>2]=y(_*y(l*p))+d[e+88>>2]),!t)break e;return n=g(m,152)+r|0,h=d[n+88>>2],p=d[n+84>>2],x=d[n+56>>2],b=d[n+52>>2],C=d[n+48>>2],_=d[t+404>>2],e=g(i,244)+A|0,l=d[u+100>>2],d[e+80>>2]=d[e+80>>2]+y(d[n+80>>2]*y(d[e+96>>2]*l)),d[e+64>>2]=d[e+64>>2]+y(y(l*y(_*C))*d[e+112>>2]),d[e+68>>2]=d[e+68>>2]+y(y(l*y(_*b))*d[e+116>>2]),d[e+72>>2]=d[e+72>>2]+y(y(l*y(_*x))*d[e+120>>2]),_=d[e+104>>2],d[e+84>>2]=d[e+84>>2]+y(p*y(l*d[e+100>>2])),void(d[e+88>>2]=d[e+88>>2]+y(h*y(_*l)))}e=g(s,152)+r|0,f[e+100>>2]=0,16&c&&(f[e+252>>2]=0)}}function we(e,t,n){var i,o=y(0),a=y(0);R=i=R-32|0,f[i+28>>2]=e,f[i+24>>2]=t,f[i+20>>2]=n,f[12+(e=R-16|0)>>2]=f[i+28>>2],d[12+(t=R-16|0)>>2]=d[f[e+12>>2]+8>>2],y(A(d[t+12>>2]))>y(.7071067690849304)?(f[12+(e=R-16|0)>>2]=f[i+28>>2],o=d[f[e+12>>2]+4>>2],f[12+(e=R-16|0)>>2]=f[i+28>>2],o=y(o*d[f[e+12>>2]+4>>2]),f[12+(e=R-16|0)>>2]=f[i+28>>2],a=d[f[e+12>>2]+8>>2],f[12+(e=R-16|0)>>2]=f[i+28>>2],d[i+16>>2]=o+y(a*d[f[e+12>>2]+8>>2]),d[12+(e=R-16|0)>>2]=d[i+16>>2],d[i+12>>2]=y(1)/y(S(d[e+12>>2])),f[12+(e=R-16|0)>>2]=f[i+24>>2],d[f[e+12>>2]>>2]=0,f[12+(e=R-16|0)>>2]=f[i+28>>2],o=y(y(-d[f[e+12>>2]+8>>2])*d[i+12>>2]),f[12+(e=R-16|0)>>2]=f[i+24>>2],d[f[e+12>>2]+4>>2]=o,f[12+(e=R-16|0)>>2]=f[i+28>>2],o=y(d[f[e+12>>2]+4>>2]*d[i+12>>2]),f[12+(e=R-16|0)>>2]=f[i+24>>2],d[f[e+12>>2]+8>>2]=o,o=y(d[i+16>>2]*d[i+12>>2]),f[12+(e=R-16|0)>>2]=f[i+20>>2],d[f[e+12>>2]>>2]=o,f[12+(e=R-16|0)>>2]=f[i+28>>2],o=y(-d[f[e+12>>2]>>2]),f[12+(e=R-16|0)>>2]=f[i+24>>2],o=y(o*d[f[e+12>>2]+8>>2]),f[12+(e=R-16|0)>>2]=f[i+20>>2],d[f[e+12>>2]+4>>2]=o,f[12+(e=R-16|0)>>2]=f[i+28>>2],o=d[f[e+12>>2]>>2],f[12+(e=R-16|0)>>2]=f[i+24>>2],o=y(o*d[f[e+12>>2]+4>>2])):(f[12+(e=R-16|0)>>2]=f[i+28>>2],o=d[f[e+12>>2]>>2],f[12+(e=R-16|0)>>2]=f[i+28>>2],o=y(o*d[f[e+12>>2]>>2]),f[12+(e=R-16|0)>>2]=f[i+28>>2],a=d[f[e+12>>2]+4>>2],f[12+(e=R-16|0)>>2]=f[i+28>>2],d[i+8>>2]=o+y(a*d[f[e+12>>2]+4>>2]),d[12+(e=R-16|0)>>2]=d[i+8>>2],d[i+4>>2]=y(1)/y(S(d[e+12>>2])),f[12+(e=R-16|0)>>2]=f[i+28>>2],o=y(y(-d[f[e+12>>2]+4>>2])*d[i+4>>2]),f[12+(e=R-16|0)>>2]=f[i+24>>2],d[f[e+12>>2]>>2]=o,f[12+(e=R-16|0)>>2]=f[i+28>>2],o=y(d[f[e+12>>2]>>2]*d[i+4>>2]),f[12+(e=R-16|0)>>2]=f[i+24>>2],d[f[e+12>>2]+4>>2]=o,f[12+(e=R-16|0)>>2]=f[i+24>>2],d[f[e+12>>2]+8>>2]=0,f[12+(e=R-16|0)>>2]=f[i+28>>2],o=y(-d[f[e+12>>2]+8>>2]),f[12+(e=R-16|0)>>2]=f[i+24>>2],o=y(o*d[f[e+12>>2]+4>>2]),f[12+(e=R-16|0)>>2]=f[i+20>>2],d[f[e+12>>2]>>2]=o,f[12+(e=R-16|0)>>2]=f[i+28>>2],o=d[f[e+12>>2]+8>>2],f[12+(e=R-16|0)>>2]=f[i+24>>2],o=y(o*d[f[e+12>>2]>>2]),f[12+(e=R-16|0)>>2]=f[i+20>>2],d[f[e+12>>2]+4>>2]=o,o=y(d[i+8>>2]*d[i+4>>2])),f[12+(e=R-16|0)>>2]=f[i+20>>2],d[f[e+12>>2]+8>>2]=o,R=i+32|0}function Te(e,t,n,i,r,s,c,l,_,u){var p,m,v,A=0,x=y(0),b=y(0),C=0,E=y(0),w=y(0),T=0,P=0,I=0,N=y(0),D=0,M=0,O=0,z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0);if(R=p=R-32|0,x=d[e+8>>2],b=d[e>>2],E=d[e+4>>2],f[p+28>>2]=f[e+12>>2],w=x,x=y(y(1)/y(S(y(y(y(b*b)+y(E*E))+y(x*x))))),N=y(w*x),d[p+24>>2]=N,z=y(E*x),d[p+20>>2]=z,L=y(b*x),d[p+16>>2]=L,D=-1,(0|(C=f[n+28>>2]))>=1)for(F=d[r+40>>2],U=d[r+36>>2],B=d[r+24>>2],k=d[r+20>>2],P=f[n+36>>2],j=d[r+32>>2],G=d[r+16>>2],V=d[r+8>>2],H=d[r+4>>2],W=d[r>>2],e=0,x=y(-34028234663852886e22);A=P+g(e,36)|0,b=d[A+20>>2],E=d[A+24>>2],w=d[A+28>>2],x=(A=(b=y(y(y(L*y(y(y(b*W)+y(E*H))+y(w*V)))+y(z*y(y(y(b*G)+y(E*k))+y(w*B))))+y(N*y(y(y(b*j)+y(E*U))+y(w*F)))))>x)?b:x,D=A?e:D,(0|C)!=(0|(e=e+1|0)););if((0|(e=f[l+4>>2]))<=-1)for(f[l+8>>2]<=-1&&((A=f[l+12>>2])&&(h[l+16|0]&&A&&(f[6258]=f[6258]+1,o[f[4969]](A)),f[l+12>>2]=0),a[l+16|0]=1,f[l+8>>2]=0,f[l+12>>2]=0);C=f[p+4>>2],A=f[l+12>>2]+(e<<4)|0,f[A>>2]=f[p>>2],f[A+4>>2]=C,C=f[p+12>>2],f[A+8>>2]=f[p+8>>2],f[A+12>>2]=C,C=(A=e+1|0)>>>0>=e>>>0,e=A,C;);if(f[l+4>>2]=0,m=f[n+36>>2]+g(D,36)|0,(0|(v=f[m+4>>2]))>=1)for(A=0,C=0;;){if(e=f[n+16>>2]+(f[f[m+12>>2]+(C<<2)>>2]<<4)|0,x=d[e>>2],b=d[e+4>>2],E=d[e+8>>2],w=y(y(y(y(x*d[r+32>>2])+y(b*d[r+36>>2]))+y(E*d[r+40>>2]))+d[r+56>>2]),N=y(y(y(y(x*d[r+16>>2])+y(b*d[r+20>>2]))+y(E*d[r+24>>2]))+d[r+52>>2]),x=y(y(y(y(x*d[r>>2])+y(b*d[r+4>>2]))+y(E*d[r+8>>2]))+d[r+48>>2]),f[l+8>>2]==(0|A)&&!((0|A)>=(0|(P=A?A<<1:1)))){if(e=0,M=0,P&&(f[6257]=f[6257]+1,M=0|o[f[4968]](P<<4,16),A=f[l+4>>2]),(0|A)>=1)for(;I=(T=e<<4)+M|0,T=T+f[l+12>>2]|0,O=f[T+4>>2],f[I>>2]=f[T>>2],f[I+4>>2]=O,O=f[T+12>>2],f[I+8>>2]=f[T+8>>2],f[I+12>>2]=O,(0|A)!=(0|(e=e+1|0)););(e=f[l+12>>2])&&(h[l+16|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[l+12>>2]=0),f[l+12>>2]=M,a[l+16|0]=1,f[l+8>>2]=P,A=f[l+4>>2]}if(e=f[l+12>>2]+(A<<4)|0,f[e+12>>2]=0,d[e+8>>2]=w,d[e+4>>2]=N,d[e>>2]=x,A=f[l+4>>2]+1|0,f[l+4>>2]=A,(0|v)==(0|(C=C+1|0)))break}(0|D)>-1&&ee(p+16|0,t,i,l,_,s,c,u),R=p+32|0}function Pe(e,t,n,i,o){var a,r=y(0),s=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=0,x=y(0),b=y(0),C=y(0),E=y(0),w=0,T=y(0),P=y(0),I=0,N=y(0),D=y(0),M=y(0),O=y(0),z=0,L=y(0),F=y(0),U=y(0),B=0,k=0,j=0,G=0;if(f[60+(a=R+-64|0)>>2]=n,f[a+56>>2]=t,f[a+52>>2]=e,r=d[t>>2],u=d[e>>2],m=d[t+4>>2],_=d[e+4>>2],g=d[t+8>>2],p=d[e+8>>2],f[a+12>>2]=0,s=y(p-g),d[a+8>>2]=s,v=y(_-m),d[a+4>>2]=v,h=y(u-r),d[a>>2]=h,b=d[n>>2],C=d[n+4>>2],E=d[n+8>>2],f[a+44>>2]=0,f[a+28>>2]=0,N=y(E-p),d[a+40>>2]=N,D=y(C-_),d[a+36>>2]=D,E=y(g-E),d[a+24>>2]=E,T=y(m-C),d[a+20>>2]=T,M=y(b-u),d[a+32>>2]=M,P=y(r-b),d[a+16>>2]=P,m=y(-1),g=y(y(h*T)-y(v*P)),b=y(y(v*E)-y(s*T)),C=y(y(s*P)-y(h*E)),!((O=y(y(g*g)+y(y(b*b)+y(C*C))))>y(0)))return y(-1);for(;y(y(y(u*y(y(g*v)-y(C*s)))+y(_*y(y(b*s)-y(g*h))))+y(y(y(C*h)-y(b*v))*p))>y(0)?(G=f[4252+(j=w<<2)>>2],z=f[(A=G<<2)+(a+52|0)>>2],L=d[z>>2],s=y(L-u),F=d[z+4>>2],v=y(F-_),U=d[z+8>>2],h=y(U-p),r=y(y(y(s*s)+y(v*v))+y(h*h)),x=y(-1),r>y(0)&&((r=y(y(-y(y(y(u*s)+y(_*v))+y(p*h)))/r))>=y(1)?(B=1065353216,k=0,I=2,x=y(y(y(L*L)+y(F*F))+y(U*U))):r<=y(0)?(B=0,k=1065353216,I=1,x=y(y(y(u*u)+y(_*_))+y(p*p))):(c(y(y(1)-r)),k=l(0),c(r),B=l(0),I=3,p=y(p+y(h*r)),u=y(u+y(s*r)),r=y(_+y(v*r)),x=y(y(p*p)+y(y(u*u)+y(r*r))))),!!((r=x)<m)|m<y(0)?(f[o>>2]=(0-(1&I)&1<<w)+(1<<G&I<<30>>31),f[i+j>>2]=k,f[i+A>>2]=B,f[(f[A+4252>>2]<<2)+i>>2]=0):r=m):r=m,3!=(0|(w=w+1|0));)h=d[(A=(w<<4)+a|0)>>2],s=d[A+8>>2],v=d[A+4>>2],A=f[(a+52|0)+(w<<2)>>2],p=d[A+8>>2],_=d[A+4>>2],u=d[A>>2],m=r;return r<y(0)&&(r=d[e+8>>2],m=d[e>>2],u=d[e+4>>2],f[o>>2]=7,u=y(y(y(y(b*m)+y(C*u))+y(g*r))/O),r=y(C*u),_=y(d[t+4>>2]-r),m=y(b*u),p=y(d[t>>2]-m),s=y(y(P*_)-y(T*p)),x=y(s*s),u=y(g*u),s=y(d[t+8>>2]-u),_=y(y(T*s)-y(E*_)),h=y(_*_),_=y(y(E*p)-y(P*s)),x=y(S(y(x+y(h+y(_*_))))),_=y(S(O)),p=y(x/_),d[i>>2]=p,s=y(d[n+4>>2]-r),v=y(d[n>>2]-m),h=y(y(M*s)-y(D*v)),x=y(h*h),h=y(d[n+8>>2]-u),s=y(y(D*h)-y(N*s)),g=y(s*s),s=y(y(N*v)-y(M*h)),_=y(y(S(y(x+y(g+y(s*s)))))/_),d[i+4>>2]=_,d[i+8>>2]=y(1)-y(p+_),r=y(y(u*u)+y(y(m*m)+y(r*r)))),r}function Ie(e,t,n){var i=y(0),o=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=y(0);I=d[t+52>>2],R=d[t+56>>2],p=d[e+96>>2],m=d[e+100>>2],v=d[e+104>>2],i=d[t+20>>2],o=d[t+24>>2],g=d[e- -64>>2],A=d[e+80>>2],x=d[e+52>>2],b=d[e+68>>2],C=d[e+84>>2],S=d[e+56>>2],r=d[t+36>>2],E=d[e+72>>2],s=d[t+40>>2],w=d[e+88>>2],P=d[t+48>>2],c=d[t+8>>2],l=d[t>>2],_=d[t+4>>2],u=d[t+16>>2],T=d[e+48>>2],h=d[t+32>>2],f[e+1296>>2]=0,f[e+1280>>2]=0,f[e+1264>>2]=0,f[e+1248>>2]=0,d[e+1276>>2]=y(y(S*h)+y(E*r))+y(w*s),d[e+1272>>2]=y(y(x*h)+y(b*r))+y(C*s),d[e+1268>>2]=y(y(T*h)+y(g*r))+y(A*s),d[e+1260>>2]=y(y(S*u)+y(E*i))+y(w*o),d[e+1256>>2]=y(y(x*u)+y(b*i))+y(C*o),d[e+1252>>2]=y(y(T*u)+y(g*i))+y(A*o),d[e+1244>>2]=y(y(l*S)+y(_*E))+y(c*w),d[e+1240>>2]=y(y(l*x)+y(_*b))+y(c*C),d[e+1236>>2]=y(y(T*l)+y(g*_))+y(A*c),d[e+1292>>2]=R+y(y(y(h*p)+y(r*m))+y(s*v)),d[e+1288>>2]=I+y(y(y(u*p)+y(i*m))+y(o*v)),d[e+1284>>2]=P+y(y(y(l*p)+y(_*m))+y(c*v)),I=d[n+52>>2],R=d[n+56>>2],p=d[e+160>>2],m=d[e+164>>2],v=d[e+168>>2],i=d[n+20>>2],o=d[n+24>>2],g=d[e+128>>2],A=d[e+144>>2],x=d[e+116>>2],b=d[e+132>>2],C=d[e+148>>2],S=d[e+120>>2],E=d[e+136>>2],r=d[n+36>>2],w=d[e+152>>2],s=d[n+40>>2],P=d[n+48>>2],c=d[n+8>>2],l=d[n>>2],_=d[n+4>>2],u=d[n+16>>2],T=d[e+112>>2],h=d[n+32>>2],f[e+1360>>2]=0,f[e+1344>>2]=0,f[e+1328>>2]=0,f[e+1312>>2]=0,d[e+1340>>2]=y(y(S*h)+y(E*r))+y(w*s),d[e+1336>>2]=y(y(x*h)+y(b*r))+y(C*s),d[e+1332>>2]=y(y(T*h)+y(g*r))+y(A*s),d[e+1324>>2]=y(y(S*u)+y(E*i))+y(w*o),d[e+1320>>2]=y(y(x*u)+y(b*i))+y(C*o),d[e+1316>>2]=y(y(T*u)+y(g*i))+y(A*o),d[e+1308>>2]=y(y(l*S)+y(_*E))+y(c*w),d[e+1304>>2]=y(y(l*x)+y(_*b))+y(c*C),d[e+1300>>2]=y(y(T*l)+y(g*_))+y(A*c),d[e+1356>>2]=R+y(y(y(h*p)+y(r*m))+y(s*v)),d[e+1352>>2]=I+y(y(y(u*p)+y(i*m))+y(o*v)),d[e+1348>>2]=P+y(y(y(l*p)+y(_*m))+y(c*v)),function(e){var t=y(0),n=y(0),i=y(0),o=y(0),a=0,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=0,m=y(0),v=y(0),g=y(0),A=y(0),x=y(0);f[e+1440>>2]=0,s=d[e+1256>>2],c=d[e+1276>>2],l=d[e+1260>>2],_=d[e+1272>>2],A=y(y(s*c)-y(l*_)),n=d[e+1236>>2],i=d[e+1240>>2],u=d[e+1268>>2],h=d[e+1252>>2],x=y(y(l*u)-y(c*h)),r=y(y(_*h)-y(s*u)),o=d[e+1244>>2],t=y(y(1)/y(y(y(A*n)+y(i*x))+y(r*o))),m=y(d[e+1356>>2]-d[e+1292>>2]),v=y(d[e+1348>>2]-d[e+1284>>2]),g=y(d[e+1352>>2]-d[e+1288>>2]),r=y(y(m*y(y(y(s*n)-y(h*i))*t))+y(y(v*y(r*t))+y(g*y(y(y(u*i)-y(_*n))*t)))),d[e+1436>>2]=r,n=y(y(m*y(y(y(h*o)-y(l*n))*t))+y(y(v*y(x*t))+y(g*y(y(y(c*n)-y(u*o))*t)))),d[e+1432>>2]=n,t=y(y(m*y(y(y(l*i)-y(s*o))*t))+y(y(v*y(A*t))+y(g*y(y(y(_*o)-y(c*i))*t)))),d[e+1428>>2]=t,d[e+940>>2]=t,(i=d[e+680>>2])>(o=d[e+696>>2])?f[e+908>>2]=0:(d[e+908>>2]=t-i,a=3,i!=o&&(d[e+924>>2]=t-o,a=4)),d[e+944>>2]=n,f[e+956>>2]=a;e:if((t=d[e+684>>2])>(i=d[e+700>>2]))f[e+912>>2]=0,a=0;else{if(d[e+912>>2]=n-t,a=3,t==i)break e;d[e+928>>2]=n-i,a=4}d[e+948>>2]=r,f[e+960>>2]=a,a=e;e:if((t=d[e+688>>2])>(n=d[e+704>>2]))f[e+916>>2]=0,p=0;else{if(d[e+916>>2]=r-t,p=3,t==n)break e;d[e+932>>2]=r-n,p=4}f[a+964>>2]=p}(e),W(e),o=d[f[e+28>>2]+404>>2],i=d[f[e+32>>2]+404>>2],a[e+1452|0]=o<y(1.1920928955078125e-7)|i<y(1.1920928955078125e-7),P=i,i=(i=y(o+i))>y(0)?y(P/i):y(.5),d[e+1444>>2]=i,d[e+1448>>2]=y(1)-i}function Re(e,t){var n,i=0,o=y(0);R=n=R+-64|0,f[n+60>>2]=e,f[n+56>>2]=t,e=R-16|0,t=f[n+60>>2],f[e+12>>2]=t,o=d[f[e+12>>2]>>2],f[12+(e=R-16|0)>>2]=t+16,o=y(o+d[f[e+12>>2]+4>>2]),f[12+(e=R-16|0)>>2]=t+32,d[n+52>>2]=o+d[f[e+12>>2]+8>>2],d[n+52>>2]>y(0)?(d[12+(e=R-16|0)>>2]=d[n+52>>2]+y(1),d[n+28>>2]=S(d[e+12>>2]),d[n+44>>2]=d[n+28>>2]*y(.5),d[n+28>>2]=y(.5)/d[n+28>>2],f[12+(e=R-16|0)>>2]=t+32,o=d[f[e+12>>2]+4>>2],f[12+(e=R-16|0)>>2]=t+16,d[n+32>>2]=y(o-d[f[e+12>>2]+8>>2])*d[n+28>>2],f[12+(e=R-16|0)>>2]=t,o=d[f[e+12>>2]+8>>2],f[12+(e=R-16|0)>>2]=t+32,d[n+36>>2]=y(o-d[f[e+12>>2]>>2])*d[n+28>>2],f[12+(e=R-16|0)>>2]=t+16,o=d[f[e+12>>2]>>2],f[12+(e=R-16|0)>>2]=t,d[n+40>>2]=y(o-d[f[e+12>>2]+4>>2])*d[n+28>>2]):(e=n,f[12+(i=R-16|0)>>2]=t,o=d[f[i+12>>2]>>2],f[12+(i=R-16|0)>>2]=t+16,o<d[f[i+12>>2]+4>>2]?(f[12+(i=R-16|0)>>2]=t+16,o=d[f[i+12>>2]+4>>2],f[12+(i=R-16|0)>>2]=t+32,i=o<d[f[i+12>>2]+8>>2]?2:1):(f[12+(i=R-16|0)>>2]=t,o=d[f[i+12>>2]>>2],f[12+(i=R-16|0)>>2]=t+32,i=o<d[f[i+12>>2]+8>>2]?2:0),f[e+24>>2]=i,f[n+20>>2]=(f[n+24>>2]+1|0)%3,f[n+16>>2]=(f[n+24>>2]+2|0)%3,f[12+(e=R-16|0)>>2]=t+(f[n+24>>2]<<4),o=d[f[e+12>>2]+(f[n+24>>2]<<2)>>2],f[12+(e=R-16|0)>>2]=t+(f[n+20>>2]<<4),o=y(o-d[f[e+12>>2]+(f[n+20>>2]<<2)>>2]),f[12+(e=R-16|0)>>2]=t+(f[n+16>>2]<<4),d[12+(i=R-16|0)>>2]=y(o-d[f[e+12>>2]+(f[n+16>>2]<<2)>>2])+y(1),d[n+12>>2]=S(d[i+12>>2]),d[(e=n+32|0)+(f[n+24>>2]<<2)>>2]=d[n+12>>2]*y(.5),d[n+12>>2]=y(.5)/d[n+12>>2],f[12+(i=R-16|0)>>2]=t+(f[n+16>>2]<<4),o=d[f[i+12>>2]+(f[n+20>>2]<<2)>>2],f[12+(i=R-16|0)>>2]=t+(f[n+20>>2]<<4),d[n+44>>2]=y(o-d[f[i+12>>2]+(f[n+16>>2]<<2)>>2])*d[n+12>>2],f[12+(i=R-16|0)>>2]=t+(f[n+20>>2]<<4),o=d[f[i+12>>2]+(f[n+24>>2]<<2)>>2],f[12+(i=R-16|0)>>2]=t+(f[n+24>>2]<<4),d[e+(f[n+20>>2]<<2)>>2]=y(o+d[f[i+12>>2]+(f[n+20>>2]<<2)>>2])*d[n+12>>2],f[12+(i=R-16|0)>>2]=t+(f[n+16>>2]<<4),o=d[f[i+12>>2]+(f[n+24>>2]<<2)>>2],f[12+(i=R-16|0)>>2]=t+(f[n+24>>2]<<4),d[e+(f[n+16>>2]<<2)>>2]=y(o+d[f[i+12>>2]+(f[n+16>>2]<<2)>>2])*d[n+12>>2]),e=n+32|0,oo(f[n+56>>2],e,e+4|0,e+8|0,e+12|0),R=n- -64|0}function Ne(e,t,n){var i,r=0,s=0,c=0,l=0,_=0,u=0,p=0,m=0,d=0,v=0;if(R=i=R-16|0,o[f[4966]](6088),(0|(r=f[e+28>>2]))<=-1)for(f[e+32>>2]<=-1&&((s=f[e+36>>2])&&(h[e+40|0]&&s&&(f[6258]=f[6258]+1,o[f[4969]](s)),f[e+36>>2]=0),f[e+32>>2]=0,f[e+36>>2]=0,a[e+40|0]=1);f[f[e+36>>2]+(r<<2)>>2]=0,c=(s=r+1|0)>>>0>=r>>>0,r=s,c;);if(f[e+28>>2]=0,function(e){var t,n,i=0,o=0,a=0,r=0,s=0,c=0;if(R=n=R-16|0,!((0|(t=f[e+4>>2]))<=0)){for(r=f[e+12>>2];;){if(c=s=(o<<3)+r|0,(0|(i=o))!=(0|(a=f[s>>2])))for(;i=(a<<3)+r|0,f[c>>2]=f[i>>2],(0|(i=f[i>>2]))!=(0|(a=f[(c=(i<<3)+r|0)>>2])););if(f[s>>2]=i,(0|t)==(0|(o=o+1|0)))break}(0|t)<2||Xn(e,n+8|0,0,t+-1|0)}R=n+16|0}(e+4|0),(0|(p=f[e+8>>2]))>=1)for(c=0;;){for(u=(l=(0|p)>(0|(s=(r=c)+1|0))?p:s)+-1|0,_=f[e+16>>2],d=f[_+(r<<3)>>2];;){if((0|(c=(s=c)+1|0))>=(0|p))s=u,c=l;else if(f[(c<<3)+_>>2]==(0|d))continue;break}e:if(!((0|r)>(0|s))){for(u=(0|s)>(0|r)?s:r,v=f[n+16>>2],l=1,s=r;m=f[v+(f[4+((s<<3)+_|0)>>2]<<2)>>2],f[m+208>>2]==(0|d)&&(l&=4!=(0|(m=f[m+220>>2]))&1!=(0|m)),m=(0|s)!=(0|u),s=s+1|0,m;);if(l)for(;;){if(s=f[f[n+16>>2]+(f[4+((r<<3)+_|0)>>2]<<2)>>2],f[s+208>>2]==(0|d)&&4!=(-2&f[s+220>>2])&&(f[s+220>>2]=2),(0|r)==(0|u))break e;r=r+1|0,_=f[e+16>>2]}for(;;){if(s=f[f[n+16>>2]+(f[4+((r<<3)+_|0)>>2]<<2)>>2],f[s+208>>2]!=(0|d)|2!=f[s+220>>2]||(4!=(-2&f[s+220>>2])&&(f[s+220>>2]=3),f[s+224>>2]=0),(0|r)==(0|u))break e;r=r+1|0,_=f[e+16>>2]}}if(!((0|c)<(0|p)))break}if((0|(_=0|o[f[f[t>>2]+36>>2]](t)))>=1)for(s=0;;){if(u=0|o[f[f[t>>2]+40>>2]](t,s),n=f[u+840>>2],r=f[u+836>>2],(!(!n|2==f[n+220>>2])||2!=f[r+220>>2]&&r)&&(!(2&(c=f[r+204>>2]))|4&c|2==f[r+220>>2]||ns(n,0),!(2&(c=f[n+204>>2]))|4&c|2==f[n+220>>2]||ns(r,0),h[e+64|0]&&o[f[f[t>>2]+28>>2]](t,r,n))){if((0|(n=f[e+28>>2]))==f[e+32>>2]&&!((0|n)>=(0|(c=n?n<<1:1)))){if(r=0,l=0,c&&(f[6257]=f[6257]+1,l=0|o[f[4968]](c<<2,16),n=f[e+28>>2]),(0|n)>=1)for(;f[(p=r<<2)+l>>2]=f[p+f[e+36>>2]>>2],(0|(r=r+1|0))!=(0|n););(r=f[e+36>>2])&&(h[e+40|0]&&(n=r,r&&(f[6258]=f[6258]+1,o[f[4969]](n)),n=f[e+28>>2]),f[e+36>>2]=0),f[e+36>>2]=l,a[e+40|0]=1,f[e+32>>2]=c}f[f[e+36>>2]+(n<<2)>>2]=u,f[e+28>>2]=n+1}if((0|_)==(0|(s=s+1|0)))break}o[f[4967]](),R=i+16|0}function De(e,t){var n,i=0,r=0,s=0,c=0,l=0;if(f[e>>2]=5096,r=f[t+20>>2],f[6257]=f[6257]+1,i=0|o[f[4968]](4,16),f[i>>2]=r?4308:4516,f[e+24>>2]=i,f[6257]=f[6257]+1,r=0|o[f[4968]](20,16),i=f[e+24>>2],f[r+12>>2]=0,f[r+16>>2]=3,f[r>>2]=9836,a[r+4|0]=0,f[r+8>>2]=i,f[e+28>>2]=r,f[6257]=f[6257]+1,i=0|o[f[4968]](8,16),f[i>>2]=5212,a[i+4|0]=0,f[e+32>>2]=i,f[6257]=f[6257]+1,i=0|o[f[4968]](8,16),f[i>>2]=5336,a[i+4|0]=0,f[e+36>>2]=i,f[6257]=f[6257]+1,i=0|o[f[4968]](8,16),f[i>>2]=5428,a[i+4|0]=0,f[e+40>>2]=i,f[6257]=f[6257]+1,i=0|o[f[4968]](8,16),f[i>>2]=5508,a[i+4|0]=0,f[e+44>>2]=i,f[6257]=f[6257]+1,i=0|o[f[4968]](8,16),f[i>>2]=5596,a[i+4|0]=0,f[e+48>>2]=i,f[6257]=f[6257]+1,i=0|o[f[4968]](8,16),f[i>>2]=5680,a[i+4|0]=0,f[e+52>>2]=i,f[6257]=f[6257]+1,i=0|o[f[4968]](8,16),f[i>>2]=5748,a[i+4|0]=0,f[e+56>>2]=i,f[6257]=f[6257]+1,i=0|o[f[4968]](8,16),f[i>>2]=5832,a[i+4|0]=0,f[e+72>>2]=i,f[6257]=f[6257]+1,i=0|o[f[4968]](8,16),f[i>>2]=5832,f[e+76>>2]=i,a[i+4|0]=1,f[6257]=f[6257]+1,i=0|o[f[4968]](8,16),f[i>>2]=5916,a[i+4|0]=0,f[e+68>>2]=i,f[6257]=f[6257]+1,i=0|o[f[4968]](16,16),f[i+8>>2]=1,f[i+12>>2]=0,f[i>>2]=5992,a[i+4|0]=0,f[e+84>>2]=i,f[6257]=f[6257]+1,i=0|o[f[4968]](16,16),f[i+8>>2]=1,f[i+12>>2]=0,f[i>>2]=5992,f[e+80>>2]=i,a[i+4|0]=1,n=f[t+16>>2],i=f[t>>2])f[e+8>>2]=i,a[e+12|0]=0;else{if(a[e+12|0]=1,f[6257]=f[6257]+1,c=0|o[f[4968]](24,16),i=f[t+8>>2],f[c+20>>2]=0,f[c+4>>2]=i,f[c>>2]=868,f[6257]=f[6257]+1,r=0|o[f[4968]](g(i,868),16),f[c+12>>2]=r,f[c+16>>2]=r,i=f[c+4>>2],f[c+8>>2]=i,l=i+-1|0)for(s=f[c>>2];i=r+s|0,f[r>>2]=i,r=i,l=l+-1|0;);else i=r;f[i>>2]=0,f[e+8>>2]=c}if(i=f[t+4>>2])return f[e+16>>2]=i,void(a[e+20|0]=0);if(a[e+20|0]=1,f[6257]=f[6257]+1,s=0|o[f[4968]](24,16),i=f[t+12>>2],f[s+20>>2]=0,f[s+4>>2]=i,t=(0|(t=(0|n)>80?n:80))>116?t+16&-16:128,f[s>>2]=t,f[6257]=f[6257]+1,r=0|o[f[4968]](g(t,i),16),f[s+12>>2]=r,f[s+16>>2]=r,t=f[s+4>>2],f[s+8>>2]=t,l=t+-1|0)for(t=f[s>>2];i=t+r|0,f[r>>2]=i,r=i,l=l+-1|0;);else i=r;f[i>>2]=0,f[e+16>>2]=s}function Me(e,t,n,i,o){var r,s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=y(0),N=y(0),D=y(0),M=y(0),O=y(0);r=-16&h[o+16|0],a[o+16|0]=r,D=d[i>>2],m=d[t>>2],b=y(D-m),p=d[e>>2],s=y(p-m),M=d[i+4>>2],v=d[t+4>>2],C=y(M-v),_=d[e+4>>2],c=y(_-v),O=d[i+8>>2],g=d[t+8>>2],S=y(O-g),A=d[e+8>>2],l=y(A-g),u=y(y(y(b*s)+y(C*c))+y(S*l)),e=o,P=d[n>>2],E=y(P-m),I=d[n+4>>2],w=y(I-v),R=d[n+8>>2],T=y(R-g),(c=y(y(y(E*s)+y(w*c))+y(T*l)))<=y(0)^1|u<=y(0)^1?(s=y(p-P),l=y(_-I),x=y(A-R),N=y(y(y(b*s)+y(C*l))+y(S*x)),(l=y(y(y(E*s)+y(w*l))+y(T*x)))>=y(0)^1|N<=l^1?(x=y(y(c*N)-y(l*u)),l<=y(0)^1|c>=y(0)^1||(s=y(0),!(x<=y(0)))?(s=y(p-D),_=y(_-M),A=y(A-O),p=y(y(y(E*s)+y(w*_))+y(T*A)),(s=y(y(y(b*s)+y(C*_))+y(S*A)))>=y(0)^1|p<=s^1?(_=y(y(p*u)-y(c*s)),s<=y(0)^1|u>=y(0)^1||(c=y(0),!(_<=y(0)))?(u=y(y(l*s)-y(p*N)))<=y(0)&&(c=y(N-l))>=y(0)&&(s=y(p-s))>=y(0)?(f[o+12>>2]=0,a[o+16|0]=6|r,s=y(c/y(c+s)),d[o+8>>2]=R+y(y(O-R)*s),d[o+4>>2]=I+y(y(M-I)*s),d[o>>2]=P+y(y(D-P)*s),c=y(y(1)-s),l=y(0)):(f[o+12>>2]=0,a[o+16|0]=7|r,c=y(y(1)/y(x+y(u+_))),s=y(x*c),c=y(_*c),d[o+8>>2]=y(S*s)+y(g+y(T*c)),d[o+4>>2]=y(C*s)+y(v+y(w*c)),d[o>>2]=y(b*s)+y(m+y(E*c)),l=y(y(y(1)-c)-s)):(f[o+12>>2]=0,a[o+16|0]=5|r,s=y(u/y(u-s)),d[o+8>>2]=g+y(S*s),d[o+4>>2]=v+y(C*s),d[o>>2]=m+y(b*s),l=y(y(1)-s))):(t=f[i+4>>2],f[o>>2]=f[i>>2],f[o+4>>2]=t,t=f[i+12>>2],f[o+8>>2]=f[i+8>>2],f[o+12>>2]=t,a[o+16|0]=4|r,s=y(1),c=y(0),l=y(0))):(f[o+12>>2]=0,a[o+16|0]=3|r,c=y(c/y(c-l)),d[o+8>>2]=g+y(T*c),d[o+4>>2]=v+y(w*c),d[o>>2]=m+y(E*c),l=y(y(1)-c))):(t=f[n+4>>2],f[o>>2]=f[n>>2],f[o+4>>2]=t,t=f[n+12>>2],f[o+8>>2]=f[n+8>>2],f[o+12>>2]=t,a[o+16|0]=2|r,c=y(1),s=y(0),l=y(0))):(n=f[t+4>>2],f[o>>2]=f[t>>2],f[o+4>>2]=n,n=f[t+12>>2],f[o+8>>2]=f[t+8>>2],f[o+12>>2]=n,a[o+16|0]=1|r,c=y(0),s=y(0),l=y(1)),d[e+20>>2]=l,f[o+32>>2]=0,d[o+28>>2]=s,d[o+24>>2]=c}function Oe(e,t,n,i,a,r){var s,c=0,l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=0,b=y(0),C=y(0),E=y(0),w=0,T=y(0),P=0,I=0,N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=0,U=0,B=0,k=0,j=0,G=0;R=s=R-32|0;e:if(!(f[e+56>>2]<1))for(u=d[i+8>>2],_=d[n+8>>2],C=m=y(u-_),l=d[i>>2],v=d[n>>2],h=y(l-v),g=d[i+4>>2],A=d[n+4>>2],p=y(g-A),b=y(y(1)/y(S(y(y(y(h*h)+y(p*p))+y(m*m))))),m=y(m*b),E=h,h=y(h*b),T=p,p=y(p*b),T=y(y(C*m)+y(y(E*h)+y(T*p))),b=d[r+8>>2],N=y((_<u?u:_)+b),C=d[r+4>>2],D=y((A<g?g:A)+C),E=d[r>>2],M=y((v<l?l:v)+E),_=u<_?u:_,u=d[a+8>>2],O=y(_+u),_=d[a+4>>2],z=y((g<A?g:A)+_),v=l<v?l:v,l=d[a>>2],L=y(v+l),i=f[e+96>>2],F=((c=(v=m==y(0)?y(0xde0b6b000000000):y(y(1)/m))<y(0))<<4)+s|8,U=((x=(g=p==y(0)?y(0xde0b6b000000000):y(y(1)/p))<y(0))<<4)+s|4,B=((1^c)<<4)+s|8,k=((1^x)<<4)+s|4,j=((c=(A=h==y(0)?y(0xde0b6b000000000):y(y(1)/h))<y(0))<<4)+s|0,G=((1^c)<<4)+s|0;;){c=f[i+4>>2],f[s>>2]=f[i>>2],f[s+4>>2]=c,c=f[i+12>>2],f[s+8>>2]=f[i+8>>2],f[s+12>>2]=c,c=f[i+28>>2],f[s+24>>2]=f[i+24>>2],f[s+28>>2]=c,c=f[i+20>>2],f[s+16>>2]=f[i+16>>2],f[s+20>>2]=c,d[s>>2]=d[s>>2]-E,d[s+4>>2]=d[s+4>>2]-C,d[s+16>>2]=d[s+16>>2]-l,d[s+20>>2]=d[s+20>>2]-_,d[s+8>>2]=d[s+8>>2]-b,d[s+24>>2]=d[s+24>>2]-u,c=0,L>d[i+16>>2]||(c=0,M<d[i>>2]||(c=1)),x=0,x=N<d[i+8>>2]|O>d[i+24>>2]?x:c;t:{n:{i:{o:{if(!(D<d[i+4>>2]|z>d[i+20>>2]|1^x||(h=d[n+4>>2],u=y(g*y(d[U>>2]-h)),l=d[n>>2],u>(_=y(A*y(d[G>>2]-l)))||(l=y(A*y(d[j>>2]-l)))>(h=y(g*y(d[k>>2]-h)))||(m=d[n+8>>2],(p=y(v*y(d[F>>2]-m)))>(_=h<_?h:_)||(u=u>l?u:l)>(l=y(v*y(d[B>>2]-m))))))){if(x=-1==(0|(I=f[i+32>>2])),1!=(0|(c=(p>u?p:u)<T&(l<_?l:_)>y(0)))|-1!=(0|I))break o;o[f[f[t>>2]+8>>2]](t,f[i+36>>2],f[i+40>>2]);break i}x=-1==f[i+32>>2],c=0}if(!x&&!c)break n}w=w+1|0,i=i- -64|0;break t}w=(c=f[i+32>>2])+w|0,i=(c<<6)+i|0}if(P=P+1|0,(0|w)>=f[e+56>>2])break e;u=d[a+8>>2],_=d[a+4>>2],l=d[a>>2],b=d[r+8>>2],C=d[r+4>>2],E=d[r>>2]}f[5677]<(0|P)&&(f[5677]=P),R=s+32|0}function ze(e,t){var n,i=0,r=0,s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),p=0,m=y(0),v=y(0),g=y(0),x=0,b=0,C=0,S=0,E=0,w=0,T=0,P=0,I=y(0),R=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=0,L=0,F=0;if((0|(n=f[e+4>>2]))>=1)for(;;){e:if(!((0|(S=(i=S)+1|0))>=(0|n)))for(L=E=(r=f[e+12>>2])+(i<<4)|0,i=S;;){t:if(!((0|(w=i+1|0))>=(0|n)))for(F=T=(i<<4)+r|0,P=w;;){c=d[4+(i=(P<<4)+r|0)>>2],l=d[T>>2],m=d[T+4>>2],v=d[i>>2],g=y(y(c*l)-y(m*v)),_=d[i+8>>2],I=d[T+8>>2],R=y(y(m*_)-y(I*c)),N=y(y(I*v)-y(_*l));n:if(y(y(g*g)+y(y(R*R)+y(N*N)))>y(9999999747378752e-20)&&(s=d[E+4>>2],u=d[E>>2],D=y(y(v*s)-y(c*u)),M=c,c=d[E+8>>2],O=y(y(M*c)-y(_*s)),v=y(y(_*u)-y(v*c)),y(y(D*D)+y(y(O*O)+y(v*v)))>y(9999999747378752e-20)&&(_=y(y(m*u)-y(l*s)),m=y(y(I*s)-y(m*c)),l=y(y(l*c)-y(I*u)),y(y(_*_)+y(y(m*m)+y(l*l)))>y(9999999747378752e-20)&&(s=y(y(c*g)+y(y(s*N)+y(R*u))),y(A(s))>y(9.999999974752427e-7))))){if(s=y(y(-1)/s),u=d[i+12>>2],c=d[L+12>>2],M=y(g*c),g=d[F+12>>2],_=y(s*y(y(_*u)+y(M+y(D*g)))),l=y(s*y(y(l*u)+y(y(N*c)+y(v*g)))),s=y(s*y(y(m*u)+y(y(R*c)+y(O*g)))),i=0,(0|(b=f[e+4>>2]))>0)for(;;){if(y(y(d[12+(p=(i<<4)+r|0)>>2]+y(y(y(s*d[p>>2])+y(l*d[p+4>>2]))+y(_*d[p+8>>2])))+y(-.009999999776482582))>y(0))break n;if((0|b)==(0|(i=i+1|0)))break}if((0|(r=f[t+4>>2]))==f[t+8>>2]&&!((0|r)>=(0|(p=r?r<<1:1)))){if(i=0,b=0,p&&(f[6257]=f[6257]+1,b=0|o[f[4968]](p<<4,16),r=f[t+4>>2]),(0|r)>=1)for(;C=(x=i<<4)+b|0,x=x+f[t+12>>2]|0,z=f[x+4>>2],f[C>>2]=f[x>>2],f[C+4>>2]=z,z=f[x+12>>2],f[C+8>>2]=f[x+8>>2],f[C+12>>2]=z,(0|r)!=(0|(i=i+1|0)););(i=f[t+12>>2])&&(h[t+16|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[t+12>>2]=0),f[t+12>>2]=b,a[t+16|0]=1,f[t+8>>2]=p,r=f[t+4>>2]}i=f[t+12>>2]+(r<<4)|0,f[i+12>>2]=0,d[i+8>>2]=_,d[i+4>>2]=l,d[i>>2]=s,f[t+4>>2]=f[t+4>>2]+1}if((0|(P=P+1|0))>=(0|n))break t;r=f[e+12>>2]}if((0|n)==(0|w))break e;r=f[e+12>>2],i=w}if((0|n)==(0|S))break}}function Le(e,t,n,i){var r=0,s=0,c=0,l=0,_=0,u=0,p=0,m=0,v=0,g=0;if(!(!t|!n)){if(!(f[e+24>>2]>127|f[e+28>>2]>127)){if(f[6257]=f[6257]+1,r=0|o[f[4968]](1024,16),(0|(_=f[e+24>>2]))>=1)for(;l=(s=c<<3)+r|0,s=s+f[e+32>>2]|0,u=f[s+4>>2],f[l>>2]=f[s>>2],f[l+4>>2]=u,(0|_)!=(0|(c=c+1|0)););(_=f[e+32>>2])&&(h[e+36|0]&&_&&(f[6258]=f[6258]+1,o[f[4969]](_)),f[e+32>>2]=0),f[e+32>>2]=r,f[e+28>>2]=128,a[e+36|0]=1}for(f[e+24>>2]=128,r=f[e+32>>2],f[r+4>>2]=n,f[r>>2]=t,t=124,r=1;;){if(n=f[e+32>>2],_=r,l=f[4+(s=n+(u=(r=r+-1|0)<<3)|0)>>2],s=f[s>>2],(0|r)>(0|t)){if(!((0|(c=f[e+24>>2]))>=(0|(t=c<<1))|f[e+28>>2]>=(0|t))){if(c){if(f[6257]=f[6257]+1,n=0|o[f[4968]](c<<4,16),c=0,!((0|(m=f[e+24>>2]))<1))for(;v=(p=c<<3)+n|0,p=f[e+32>>2]+p|0,g=f[p+4>>2],f[v>>2]=f[p>>2],f[v+4>>2]=g,(0|m)!=(0|(c=c+1|0)););}else n=0;(c=f[e+32>>2])&&(h[e+36|0]&&c&&(f[6258]=f[6258]+1,o[f[4969]](c)),f[e+32>>2]=0),f[e+32>>2]=n,a[e+36|0]=1,f[e+28>>2]=t}f[e+24>>2]=t,t=t+-4|0}e:if((0|s)!=(0|l)){if(!(d[s>>2]<=d[l+16>>2]^1|d[s+16>>2]>=d[l>>2]^1|d[s+4>>2]<=d[l+20>>2]^1|d[s+20>>2]>=d[l+4>>2]^1||d[s+8>>2]<=d[l+24>>2]^1|d[s+24>>2]>=d[l+8>>2]^1))if(c=f[l+40>>2],f[s+40>>2]){if(r=f[s+36>>2],c){f[4+(n=n+u|0)>>2]=f[l+36>>2],f[n>>2]=r,r=f[s+40>>2],c=(n=_<<3)+f[e+32>>2]|0,f[c+4>>2]=f[l+36>>2],f[c>>2]=r,r=f[s+36>>2],c=n+f[e+32>>2]|0,f[c+12>>2]=f[l+40>>2],f[c+8>>2]=r,r=f[s+40>>2],n=n+f[e+32>>2]|0,f[n+20>>2]=f[l+40>>2],f[n+16>>2]=r,r=_+3|0;break e}f[4+(n=n+u|0)>>2]=l,f[n>>2]=r,n=f[s+40>>2],r=f[e+32>>2]+(_<<3)|0,f[r+4>>2]=l,f[r>>2]=n,r=_+1|0}else c?(f[4+(n=n+u|0)>>2]=f[l+36>>2],f[n>>2]=s,n=f[e+32>>2]+(_<<3)|0,f[n+4>>2]=f[l+40>>2],f[n>>2]=s,r=_+1|0):o[f[f[i>>2]+8>>2]](i,s,l)}else{if(!f[s+40>>2])break e;n=n+u|0,r=f[s+36>>2],f[n+4>>2]=r,f[n>>2]=r,r=(n=_<<3)+f[e+32>>2]|0,l=f[s+40>>2],f[r+4>>2]=l,f[r>>2]=l,r=f[s+40>>2],n=n+f[e+32>>2]|0,f[n+8>>2]=f[s+36>>2],f[n+12>>2]=r,r=_+2|0}if(!r)break}}}function Fe(e,t,n,i,a,r){var s,c=y(0),l=y(0),_=y(0),u=0,h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=0,b=0,C=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0);R=s=R-32|0,u=f[e+8>>2],l=d[u+60>>2],c=y(d[u+76>>2]-l),v=d[u- -64>>2],_=y(d[u+96>>2]-v),h=y(d[u+80>>2]-v),m=y(d[u+92>>2]-l),g=y(y(c*_)-y(h*m)),C=h,A=d[u+68>>2],h=y(d[u+100>>2]-A),p=y(d[u+84>>2]-A),_=y(y(C*h)-y(p*_)),m=y(y(p*m)-y(c*h));e:if((h=y(y(g*g)+y(y(_*_)+y(m*m))))>=y(14210854715202004e-30)&&(x=f[e+4>>2],C=y(d[x+32>>2]*d[x+16>>2]),c=y(C+r),r=y(y(1)/y(S(h))),h=y(_*r),_=d[t>>2],m=y(m*r),p=d[t+4>>2],E=y(y(h*y(_-l))+y(m*y(p-v))),v=y(g*r),l=d[t+8>>2],(r=y(E+y(v*y(l-A))))<y(0)&&(v=y(-v),m=y(-m),h=y(-h),r=y(-r)),r<c)){if(x=f[t+12>>2],f[s+24>>2]=f[t+8>>2],f[s+28>>2]=x,x=f[t+4>>2],f[s+16>>2]=f[t>>2],f[s+20>>2]=x,f[s+12>>2]=0,d[s+8>>2]=v,d[s+4>>2]=m,d[s>>2]=h,function(e,t,n){var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),f=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0);return _=d[e+40>>2],c=d[e+24>>2],h=y(_-c),u=d[n+8>>2],m=d[e+32>>2],o=d[e+16>>2],s=y(m-o),a=d[t+4>>2],v=d[e+36>>2],l=d[e+20>>2],r=y(v-l),f=d[t>>2],p=y(y(u-c)*y(y(s*a)-y(r*f))),g=d[n>>2],i=r,r=d[t+8>>2],A=d[n+4>>2],h=y(p+y(y(y(g-o)*y(y(i*r)-y(h*a)))+y(y(A-l)*y(y(h*f)-y(s*r))))),i=c,c=d[e+8>>2],s=y(i-c),i=o,o=d[e>>2],p=y(i-o),i=l,l=d[e+4>>2],i=y(i-l),s=y(y(y(u-c)*y(y(p*a)-y(i*f)))+y(y(y(g-o)*y(y(i*r)-y(s*a)))+y(y(A-l)*y(y(s*f)-y(p*r))))),e=1,i=y(u-_),u=y(o-m),o=y(l-v),_=y(c-_),a=y(y(i*y(y(u*a)-y(o*f)))+y(y(y(g-m)*y(y(o*r)-y(_*a)))+y(y(A-v)*y(y(_*f)-y(u*r))))),h>y(0)&&!(a>y(0)^1|s>y(0)^1)||(e=s<=y(0)&h<=y(0)&a<=y(0)),e}(u+60|0,s,s+16|0))w=y(l-y(r*v)),T=y(p-y(r*m)),P=y(_-y(r*h)),E=y(c*c);else{if((0|o[f[f[u>>2]+100>>2]](u))<1)break e;for(E=y(c*c),x=0,u=0;b=f[e+8>>2],o[f[f[b>>2]+104>>2]](b,u,s+16|0,s),c=y(0),I=d[s+16>>2],r=y(d[t>>2]-I),p=y(d[s>>2]-I),N=d[s+20>>2],l=y(d[t+4>>2]-N),g=y(d[s+4>>2]-N),D=d[s+24>>2],_=y(d[t+8>>2]-D),A=y(d[s+8>>2]-D),(M=y(y(y(r*p)+y(l*g))+y(_*A)))>y(0)&&(M<(c=y(y(y(p*p)+y(g*g))+y(A*A)))?(c=y(M/c),_=y(_-y(A*c)),l=y(l-y(g*c)),r=y(r-y(p*c))):(_=y(_-A),l=y(l-g),r=y(r-p),c=y(1))),y(y(y(r*r)+y(l*l))+y(_*_))<E&&(P=y(I+y(p*c)),T=y(N+y(g*c)),x=1,w=y(D+y(A*c))),u=u+1|0,b=f[e+8>>2],(0|u)<(0|o[f[f[b>>2]+100>>2]](b)););if(b=0,!x)break e;l=d[t+8>>2],p=d[t+4>>2],_=d[t>>2]}r=y(_-P),_=y(p-T),l=y(l-w),(c=y(y(y(r*r)+y(_*_))+y(l*l)))<E&&(c>y(1.1920928955078125e-7)?(f[i+12>>2]=0,h=l,c=y(S(c)),l=y(y(1)/c),d[i+8>>2]=h*l,d[i+4>>2]=_*l,d[i>>2]=r*l,C=y(C-c)):(f[i+12>>2]=0,d[i+8>>2]=v,d[i+4>>2]=m,d[i>>2]=h),f[n+12>>2]=0,d[n+8>>2]=w,d[n+4>>2]=T,d[n>>2]=P,d[a>>2]=-C,b=1)}return R=s+32|0,b}function Ue(e,t,n,i,r,s,c,l,_){var u,p=0,m=0,v=y(0),g=0,A=0,x=0,b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=0,P=0,I=y(0),N=0;if(R=u=R-32|0,e){if((0|(p=f[l+4>>2]))<=127){if(f[l+8>>2]<=127){if(f[6257]=f[6257]+1,g=0|o[f[4968]](512,16),(0|(x=f[l+4>>2]))>=1)for(;f[(m=A<<2)+g>>2]=f[m+f[l+12>>2]>>2],(0|x)!=(0|(A=A+1|0)););(A=f[l+12>>2])&&(h[l+16|0]&&A&&(f[6258]=f[6258]+1,o[f[4969]](A)),f[l+12>>2]=0),f[l+12>>2]=g,a[l+16|0]=1,f[l+8>>2]=128}for(;f[f[l+12>>2]+(p<<2)>>2]=0,128!=(0|(p=p+1|0)););}for(f[l+4>>2]=128,f[f[l+12>>2]>>2]=e,p=126,A=1;;){if(x=f[l+12>>2],g=f[x+(P=(e=A+-1|0)<<2)>>2],b=d[g>>2],C=d[g+4>>2],v=d[g+8>>2],S=d[c>>2],E=d[c+4>>2],w=d[c+8>>2],f[u+12>>2]=0,d[u+8>>2]=v-w,d[u+4>>2]=C-E,d[u>>2]=b-S,b=d[g+16>>2],C=d[g+20>>2],v=d[g+24>>2],S=d[s>>2],E=d[s+4>>2],w=d[s+8>>2],f[u+28>>2]=0,d[u+24>>2]=v-w,d[u+20>>2]=C-E,d[u+16>>2]=b-S,m=f[i+4>>2],S=d[t+4>>2],E=d[n+4>>2],b=y(y(d[4+((m<<4)+u|0)>>2]-S)*E),v=d[n>>2],T=f[i>>2],w=d[t>>2],!(b>(C=y(v*y(d[(1-T<<4)+u>>2]-w)))||(v=y(y(d[(T<<4)+u>>2]-w)*v))>(S=y(E*y(d[4+((1-m<<4)+u|0)>>2]-S)))||(m=f[i+8>>2],w=d[t+8>>2],I=d[n+8>>2],(E=y(y(d[8+((m<<4)+u|0)>>2]-w)*I))>(C=S<C?S:C)||(b=b>v?b:v)>(v=y(I*y(d[8+((1-m<<4)+u|0)>>2]-w)))|(E>b?E:b)<r^1|(v<C?v:C)>y(0)^1)))if(f[g+40>>2]){if((0|e)>(0|p)){if((0|(p=f[l+4>>2]))<(0|(m=p<<1))){if(f[l+8>>2]<(0|m)){if(p){if(f[6257]=f[6257]+1,x=0|o[f[4968]](p<<3,16),e=0,!((0|(T=f[l+4>>2]))<1))for(;f[(N=e<<2)+x>>2]=f[f[l+12>>2]+N>>2],(0|T)!=(0|(e=e+1|0)););}else x=0;(e=f[l+12>>2])&&(h[l+16|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[l+12>>2]=0),f[l+12>>2]=x,a[l+16|0]=1,f[l+8>>2]=m}for(;f[(p<<2)+x>>2]=0,x=f[l+12>>2],(0|m)!=(0|(p=p+1|0)););}f[l+4>>2]=m,p=m+-2|0}f[x+P>>2]=f[g+36>>2],f[f[l+12>>2]+(A<<2)>>2]=f[g+40>>2],e=A+1|0}else o[f[f[_>>2]+12>>2]](_,g);if(A=e,!e)break}}R=u+32|0}function Be(e,t,n){var i,o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0);R=i=R-16|0,r=d[t+464>>2],a=d[t+460>>2],w=d[t+396>>2],T=d[t+392>>2],l=d[t+456>>2],P=d[t+388>>2],Re(t+4|0,i),_=d[i+4>>2],u=d[i>>2],h=d[i+12>>2],p=d[i+8>>2],f[e+12>>2]=0,s=y(y(w*u)+y(y(T*h)-y(P*p))),b=y(y(y(P*u)+y(T*_))+y(w*p)),m=y(y(T*p)+y(y(P*h)-y(w*_))),C=y(y(P*_)+y(y(w*h)-y(T*u))),c=y(y(y(p*s)+y(y(u*b)+y(h*m)))-y(_*C)),v=y(y(y(_*m)+y(y(p*b)+y(h*C)))-y(u*s)),g=y(v*y(0)),x=y(c*y(0)),o=a!=y(0)?y(y(1)/a):y(0),a=y(y(y(u*C)+y(y(_*b)+y(h*s)))-y(p*m)),b=y(g+y(x+y(o*a))),s=l!=y(0)?y(y(1)/l):y(0),m=y(a*y(0)),C=y(g+y(y(c*s)+m)),l=y(y(y(c*b)-y(a*C))*n),O=y(y(y(y(y(x-y(s*a))+y(0))+b)*n)+y(0)),r=r!=y(0)?y(y(1)/r):y(0),I=y(y(r*v)+y(x+m)),N=y(y(y(y(m+y(y(0)-y(o*v)))+I)*n)+y(0)),D=y(y(y(y(y(g+y(0))-y(r*c))+C)*n)+y(0)),E=y(c*y(-0)),g=y(o+y(y(E+y(y(o*y(0))+g))*n)),S=y(v*y(-0)),M=y(y(y(y(y(r*a)+y(S+y(0)))-b)*n)+y(0)),z=y(y(N*D)-y(g*M)),m=y(s+y(y(m+y(y(s*y(0))+S))*n)),S=y(a*y(-0)),r=y(r+y(y(y(r*y(0))+y(S+x))*n)),x=y(y(y(y(y(S+y(o*c))+y(0))-C)*n)+y(0)),S=y(y(g*r)-y(x*D)),E=y(y(y(y(E+y(y(s*v)+y(0)))-I)*n)+y(0)),L=y(y(x*M)-y(r*N)),o=y(y(O*z)+y(y(m*S)+y(E*L))),s=y(A(o))>y(1.1920928955078125e-7)?y(y(1)/o):o,o=y(y(y(a*I)-y(v*b))*n),n=y(y(y(v*C)-y(c*I))*n),c=y(c-y(y(y(l*z)+y(y(o*S)+y(n*L)))*s)),a=y(a-y(y(y(O*y(y(D*o)-y(M*n)))+y(y(m*y(y(r*n)-y(D*l)))+y(E*y(y(M*l)-y(r*o)))))*s)),n=y(v-y(y(y(O*y(y(N*n)-y(g*o)))+y(y(m*y(y(g*l)-y(x*n)))+y(E*y(y(x*o)-y(N*l)))))*s)),v=y(y(y(p*c)+y(h*a))-y(u*n)),l=y(y(y(h*n)+y(u*a))-y(_*c)),o=y(y(y(c*y(-u))-y(_*a))-y(p*n)),n=y(y(y(h*c)+y(_*n))-y(p*a)),d[e+8>>2]=y(y(u*v)+y(y(y(h*l)-y(p*o))-y(_*n)))-w,d[e+4>>2]=y(y(p*n)+y(y(y(h*v)-y(_*o))-y(u*l)))-T,d[e>>2]=y(y(_*l)+y(y(y(h*n)-y(u*o))-y(p*v)))-P,R=i+16|0}function ke(e,t,n){var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=y(0),N=y(0),D=y(0),M=y(0);_=d[t+396>>2],u=d[t+44>>2],C=d[t+40>>2],i=d[t+36>>2],h=d[t+12>>2],p=d[t+8>>2],m=d[t+392>>2],a=d[t+28>>2],o=d[t+464>>2],l=d[t+24>>2],v=d[t+460>>2],r=d[t+20>>2],g=d[t+388>>2],s=d[t+4>>2],S=d[t+456>>2],f[e+12>>2]=0,x=S!=y(0)?y(y(1)/S):y(0),b=y(i*x),T=v!=y(0)?y(y(1)/v):y(0),w=y(C*T),o=o!=y(0)?y(y(1)/o):y(0),P=y(u*o),v=y(y(y(s*b)+y(p*w))+y(h*P)),c=y(x*r),E=y(T*l),I=y(o*a),S=y(y(y(s*c)+y(p*E))+y(h*I)),R=y(g*S),N=y(x*s),D=y(T*p),M=y(o*h),s=y(y(y(s*N)+y(p*D))+y(h*M)),o=y(y(y(c*r)+y(E*l))+y(I*a)),x=y(y(y(c*i)+y(E*C))+y(I*u)),E=y(_*x),h=y(y(R+y(m*o))+E),T=y(v+y(y(y(y(v*y(0))+y(R-y(m*s)))+h)*n)),c=y(y(y(N*r)+y(D*l))+y(M*a)),I=y(g*v),r=y(y(y(b*r)+y(w*l))+y(P*a)),l=y(m*r),a=y(y(y(b*i)+y(w*C))+y(P*u)),p=y(y(I+l)+y(_*a)),l=y(c+y(y(p+y(l+y(y(c*y(0))-y(_*o))))*n)),R=y(m*c),i=y(y(y(N*i)+y(D*C))+y(M*u)),b=y(_*i),u=y(y(y(g*s)+R)+b),P=y(n*y(0)),C=y(y(h+y(y(y(_*u)-y(g*p))*n))-y(P+h)),b=y(x+y(y(u+y(y(y(x*y(0))+b)-y(g*a)))*n)),c=y(o+y(y(y(y(o*y(0))+y(_*c))-y(g*r))*n)),w=y(i+y(y(y(y(m*a)+y(y(i*y(0))-E))-h)*n)),E=y(y(l*b)-y(c*w)),v=y(s+y(y(y(m*v)+y(y(s*y(0))-y(_*S)))*n)),a=y(a+y(y(y(a*y(0))+y(y(g*x)-y(m*i)))*n)),r=y(r+y(y(y(y(r*y(0))+y(y(g*o)-R))-u)*n)),x=y(y(c*a)-y(r*b)),o=y(S+y(y(y(y(y(S*y(0))+y(_*s))-I)-p)*n)),S=y(y(r*w)-y(l*a)),i=y(y(T*E)+y(y(v*x)+y(o*S))),s=y(A(i))>y(1.1920928955078125e-7)?y(y(1)/i):i,i=y(y(u+y(y(y(m*p)-y(_*h))*n))-y(P+u)),n=y(y(p+y(y(y(g*h)-y(m*u))*n))-y(P+p)),d[e+8>>2]=y(_-y(y(y(T*y(y(l*C)-y(c*i)))+y(y(v*y(y(c*n)-y(r*C)))+y(o*y(y(r*i)-y(l*n)))))*s))-_,d[e+4>>2]=y(m-y(y(y(T*y(y(b*i)-y(w*C)))+y(y(v*y(y(a*C)-y(b*n)))+y(o*y(y(w*n)-y(a*i)))))*s))-m,d[e>>2]=y(g-y(y(y(n*E)+y(y(i*x)+y(C*S)))*s))-g}function je(e,t,n,i){var r,s,c=0,l=0,_=0,u=0,p=0,m=0,d=0,v=0,g=0,y=0,A=0;if(R=s=R-16|0,Ne(e,t,n),r=f[e+8>>2],o[f[4966]](6116),h[e+64|0]){if((0|(m=f[e+28>>2]))>=2&&yn(e+24|0,s,0,m+-1|0),!((0|r)<1))for(u=1;;){t=f[e+16>>2],g=f[t+(p<<3)>>2],y=1;e:if(!((0|p)>=(0|r)))for(;;){if(v=f[f[n+16>>2]+(f[4+((p<<3)+t|0)>>2]<<2)>>2],(0|(c=f[e+48>>2]))==f[e+52>>2]&&!((0|c)>=(0|(_=c?c<<1:1)))){if(t=0,l=0,_&&(f[6257]=f[6257]+1,l=0|o[f[4968]](_<<2,16),c=f[e+48>>2]),(0|c)>=1)for(;f[(A=t<<2)+l>>2]=f[A+f[e+56>>2]>>2],(0|c)!=(0|(t=t+1|0)););(t=f[e+56>>2])&&(h[e+60|0]&&(t&&(f[6258]=f[6258]+1,o[f[4969]](t)),c=f[e+48>>2]),f[e+56>>2]=0),f[e+56>>2]=l,a[e+60|0]=1,f[e+52>>2]=_}if(f[f[e+56>>2]+(c<<2)>>2]=v,f[e+48>>2]=c+1,y&=2==(0|(t=f[v+220>>2]))|5==(0|t),(0|r)==(0|(p=p+1|0))){p=r;break e}if(t=f[e+16>>2],f[t+(p<<3)>>2]!=(0|g))break}if(l=0,t=0,!((0|d)>=(0|m))&&(v=f[e+36>>2],t=f[(_=v+(d<<2)|0)>>2],(0|(c=f[f[t+836>>2]+208>>2]))<=-1&&(c=f[f[t+840>>2]+208>>2]),t=0,(0|c)==(0|g))){for(c=(0|m)>(0|(t=d+1|0))?m:t,u=d;;){if((0|(u=u+1|0))>=(0|m))u=c;else if(l=f[(u<<2)+v>>2],(0|(t=f[f[l+836>>2]+208>>2]))<=-1&&(t=f[f[l+840>>2]+208>>2]),(0|t)==(0|g))continue;break}l=u-d|0,t=_}if(y||o[f[f[i>>2]+8>>2]](i,f[e+56>>2],f[e+48>>2],t,l,g),(0|(t=f[e+48>>2]))<=-1)for(f[e+52>>2]<=-1&&((c=f[e+56>>2])&&(h[e+60|0]&&c&&(f[6258]=f[6258]+1,o[f[4969]](c)),f[e+56>>2]=0),a[e+60|0]=1,f[e+52>>2]=0,f[e+56>>2]=0);f[f[e+56>>2]+(t<<2)>>2]=0,_=(c=t+1|0)>>>0>=t>>>0,t=c,_;);if(d=l?u:d,f[e+48>>2]=0,!((0|p)<(0|r)))break}}else e=0|o[f[f[t>>2]+44>>2]](t),t=0|o[f[f[t>>2]+36>>2]](t),o[f[f[i>>2]+8>>2]](i,f[n+16>>2],f[n+8>>2],e,t,-1);o[f[4967]](),R=s+16|0}function Ge(e,t,n){var i=0,a=y(0),r=y(0),s=y(0),c=0;if(!f[e>>2])return f[e>>2]=n,void(f[n+32>>2]=0);if(i=f[t+40>>2])for(r=y(d[n>>2]+d[n+16>>2]),a=y(d[n+8>>2]+d[n+24>>2]),s=y(d[n+4>>2]+d[n+20>>2]);c=t+36|0,t=f[t+36>>2],t=f[c+((y(y(y(A(y(r-y(d[t>>2]+d[t+16>>2]))))+y(A(y(s-y(d[t+4>>2]+d[t+20>>2])))))+y(A(y(a-y(d[t+8>>2]+d[t+24>>2])))))<y(y(y(A(y(r-y(d[i>>2]+d[i+16>>2]))))+y(A(y(s-y(d[i+4>>2]+d[i+20>>2])))))+y(A(y(a-y(d[i+8>>2]+d[i+24>>2])))))^1)<<2)>>2],i=f[t+40>>2];);c=f[t+32>>2],(i=f[e+4>>2])?f[e+4>>2]=0:(f[6257]=f[6257]+1,i=0|o[f[4968]](44,16),f[i>>2]=0,f[i+4>>2]=0,f[i+40>>2]=0,f[i+32>>2]=0,f[i+36>>2]=0,f[i+24>>2]=0,f[i+28>>2]=0,f[i+16>>2]=0,f[i+20>>2]=0,f[i+8>>2]=0,f[i+12>>2]=0),f[i+36>>2]=0,f[i+40>>2]=0,f[i+32>>2]=c,r=d[n>>2],a=d[t>>2],d[i>>2]=r<a?r:a,r=d[n+16>>2],a=d[t+16>>2],d[i+16>>2]=r>a?r:a,r=d[n+4>>2],a=d[t+4>>2],d[i+4>>2]=r<a?r:a,r=d[n+20>>2],a=d[t+20>>2],d[i+20>>2]=r>a?r:a,r=d[n+8>>2],a=d[t+8>>2],d[i+8>>2]=r<a?r:a,r=d[n+24>>2],a=d[t+24>>2],d[i+24>>2]=r>a?r:a;e:if(c)for(f[36+(((f[f[t+32>>2]+40>>2]==(0|t))<<2)+c|0)>>2]=i,f[i+36>>2]=t,f[t+32>>2]=i,f[i+40>>2]=n,f[n+32>>2]=i,r=d[i>>2];;){if(e=i,!(d[(i=c)>>2]<=r^1|d[i+4>>2]<=d[e+4>>2]^1|d[i+8>>2]<=d[e+8>>2]^1|d[i+16>>2]>=d[e+16>>2]^1)&&d[i+20>>2]>=d[e+20>>2]&&d[i+24>>2]>=d[e+24>>2])break e;if(e=f[i+36>>2],r=d[e>>2],t=f[i+40>>2],r=r<(a=d[t>>2])?r:a,d[i>>2]=r,a=d[e+16>>2],s=d[t+16>>2],d[i+16>>2]=a>s?a:s,a=d[e+4>>2],s=d[t+4>>2],d[i+4>>2]=a<s?a:s,a=d[e+20>>2],s=d[t+20>>2],d[i+20>>2]=a>s?a:s,a=d[e+8>>2],s=d[t+8>>2],d[i+8>>2]=a<s?a:s,a=d[e+24>>2],s=d[t+24>>2],d[i+24>>2]=a>s?a:s,!(c=f[i+32>>2]))break}else f[i+36>>2]=t,f[t+32>>2]=i,f[i+40>>2]=n,f[n+32>>2]=i,f[e>>2]=i}function Ve(e,t,n){e|=0,n|=0;var i,a=0;return f[16+(t|=0)>>2]=f[e+4>>2],f[t+20>>2]=f[e+8>>2],f[t+24>>2]=f[e+12>>2],f[t+28>>2]=f[e+16>>2],f[t+32>>2]=f[e+20>>2],f[t+36>>2]=f[e+24>>2],f[t+40>>2]=f[e+28>>2],f[t+44>>2]=f[e+32>>2],f[t+48>>2]=f[e+36>>2],f[t+52>>2]=f[e+40>>2],f[t+56>>2]=f[e+44>>2],f[t+60>>2]=f[e+48>>2],f[t+64>>2]=f[e+52>>2],f[t+68>>2]=f[e+56>>2],f[t+72>>2]=f[e+60>>2],f[t+76>>2]=f[e- -64>>2],f[t+80>>2]=f[e+68>>2],f[t+84>>2]=f[e+72>>2],f[t+88>>2]=f[e+76>>2],f[t+92>>2]=f[e+80>>2],f[t+96>>2]=f[e+84>>2],f[t+100>>2]=f[e+88>>2],f[t+104>>2]=f[e+92>>2],f[t+108>>2]=f[e+96>>2],f[t+112>>2]=f[e+100>>2],f[t+116>>2]=f[e+104>>2],f[t+120>>2]=f[e+108>>2],f[t+124>>2]=f[e+112>>2],f[t+128>>2]=f[e+116>>2],f[t+132>>2]=f[e+120>>2],f[t+136>>2]=f[e+124>>2],f[t+140>>2]=f[e+128>>2],f[t+144>>2]=f[e+132>>2],f[t+148>>2]=f[e+136>>2],f[t+152>>2]=f[e+140>>2],f[t+156>>2]=f[e+144>>2],f[t+160>>2]=f[e+148>>2],f[t+164>>2]=f[e+152>>2],f[t+168>>2]=f[e+156>>2],f[t+172>>2]=f[e+160>>2],f[t+176>>2]=f[e+164>>2],f[t+180>>2]=f[e+168>>2],f[t+184>>2]=f[e+172>>2],f[t+188>>2]=f[e+176>>2],f[t+232>>2]=f[e+180>>2],a=f[e+184>>2],f[t>>2]=0,f[t+192>>2]=a,a=0|o[f[f[n>>2]+28>>2]](n,f[e+192>>2]),f[t+8>>2]=0,f[t+4>>2]=a,f[t+236>>2]=f[e+204>>2],f[t+240>>2]=f[e+208>>2],f[t+244>>2]=f[e+212>>2],f[t+248>>2]=f[e+220>>2],f[t+196>>2]=f[e+224>>2],f[t+200>>2]=f[e+228>>2],f[t+204>>2]=f[e+236>>2],f[t+208>>2]=f[e+244>>2],f[t+212>>2]=f[e+248>>2],f[t+216>>2]=f[e+232>>2],f[t+252>>2]=f[e+252>>2],a=0|o[f[f[n>>2]+40>>2]](n,e),i=0|o[f[f[n>>2]+28>>2]](n,a),f[t+12>>2]=i,i&&o[f[f[n>>2]+48>>2]](n,a),f[t+220>>2]=f[e+268>>2],f[t+224>>2]=f[e+272>>2],f[t+228>>2]=f[e+276>>2],e=f[e+280>>2],f[t+260>>2]=0,f[t+256>>2]=e,4e3}function He(e,t,n){var i=0,r=0,s=0,c=0,l=0,_=0,d=0,v=0,g=0;e:{if(!((g=(r=u[t>>1])+((_=p[t+2>>1])<<16)&(d=f[e+48>>2])+-1)>>>0>=m[e+4>>2])&&-1!=(0|(i=f[f[e+12>>2]+(g<<2)>>2])))for(v=f[e+72>>2],l=65535&r;;){if((0|_)==p[2+(r=(s=i<<2)+v|0)>>1]&&(0|l)==p[r>>1])break e;if(-1==(0|(i=f[s+f[e+32>>2]>>2])))break}if((0|d)==(0|(i=v=f[e+44>>2]))&&!((0|(i=d))>=(0|(_=i?i<<1:1)))){if(_?(f[6257]=f[6257]+1,c=0|o[f[4968]](_<<2,16),i=f[e+44>>2]):i=d,(0|(r=i))>=1)for(i=0;l=(s=i<<2)+c|0,s=s+f[e+52>>2]|0,s=p[s>>1]|p[s+2>>1]<<16,u[l>>1]=s,u[l+2>>1]=s>>>16,(0|r)!=(0|(i=i+1|0)););(r=f[e+52>>2])&&(h[e+56|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+52>>2]=0),f[e+52>>2]=c,f[e+48>>2]=_,a[e+56|0]=1,i=f[e+44>>2]}if(r=f[e+52>>2]+(i<<2)|0,n=p[n>>1]|p[n+2>>1]<<16,u[r>>1]=n,u[r+2>>1]=n>>>16,f[e+44>>2]=f[e+44>>2]+1,(0|(c=f[e- -64>>2]))==f[e+68>>2]&&!((0|c)>=(0|(l=c?c<<1:1)))){if(l?(f[6257]=f[6257]+1,s=0|o[f[4968]](l<<2,16),c=f[e+64>>2]):s=0,(0|c)>=1)for(i=0;r=(n=i<<2)+s|0,n=n+f[e+72>>2]|0,n=p[n>>1]|p[n+2>>1]<<16,u[r>>1]=n,u[r+2>>1]=n>>>16,(0|c)!=(0|(i=i+1|0)););(n=f[e+72>>2])&&(h[e+76|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+72>>2]=0),f[e+72>>2]=s,f[e+68>>2]=l,a[e+76|0]=1,c=f[e+64>>2]}return r=f[e+72>>2]+(c<<2)|0,n=p[t>>1]|p[t+2>>1]<<16,u[r>>1]=n,u[r+2>>1]=n>>>16,f[e+64>>2]=f[e+64>>2]+1,(0|d)<f[e+48>>2]&&(function(e){var t,n=0,i=0,r=0,s=0,c=0,l=0,_=0,m=0;if(!((0|(t=f[e+4>>2]))>=(0|(i=f[e+48>>2])))){if(f[e+8>>2]>=(0|i))s=f[e+12>>2];else{n=t,i&&(f[6257]=f[6257]+1,s=0|o[f[4968]](i<<2,16),n=f[e+4>>2]),l=f[e+12>>2];t:{n:{if((0|n)>=1)for(;;)if(f[(c=r<<2)+s>>2]=f[l+c>>2],(0|(r=r+1|0))==(0|n))break n;if(!l)break t}h[e+16|0]&&l&&(f[6258]=f[6258]+1,o[f[4969]](l))}f[e+12>>2]=s,a[e+16|0]=1,f[e+8>>2]=i}if(dn((n=t<<2)+s|0,0,(c=i<<2)-n|0),f[e+4>>2]=i,(0|(l=f[e+24>>2]))<(0|i)){t:if(f[e+28>>2]>=(0|i))s=f[e+32>>2];else{r=0,n=l,s=0,i&&(f[6257]=f[6257]+1,s=0|o[f[4968]](c,16),n=f[e+24>>2]),_=f[e+32>>2];n:{if((0|n)>=1)for(;;)if(f[(m=r<<2)+s>>2]=f[_+m>>2],(0|(r=r+1|0))==(0|n))break n;if(!_){f[e+32>>2]=s,f[e+28>>2]=i,a[e+36|0]=1;break t}}h[e+36|0]&&_&&(f[6258]=f[6258]+1,o[f[4969]](_)),f[e+32>>2]=s,a[e+36|0]=1,f[e+28>>2]=i}dn((n=l<<2)+s|0,0,c-n|0)}if(f[e+24>>2]=i,(0|i)>=1&&(dn(f[e+12>>2],255,c),dn(f[e+32>>2],255,c)),!((0|t)<1))for(l=f[e+32>>2],i=f[e+72>>2],s=f[e+12>>2],r=0;n=s+(((p[2+(n=(c=r<<2)+i|0)>>1]<<16)+u[n>>1]&f[e+48>>2]+-1)<<2)|0,f[l+c>>2]=f[n>>2],f[n>>2]=r,(0|t)!=(0|(r=r+1|0)););}}(e),g=u[t>>1]+(p[t+2>>1]<<16)&f[e+48>>2]+-1),t=f[e+32>>2]+(v<<2)|0,e=f[e+12>>2]+(g<<2)|0,f[t>>2]=f[e>>2],void(f[e>>2]=v)}t=f[e+52>>2]+(i<<2)|0,e=p[n>>1]|p[n+2>>1]<<16,u[t>>1]=e,u[t+2>>1]=e>>>16}function We(e,t,n,i,o){var a,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0);R=a=R-16|0,r=d[e+52>>2],s=d[e+56>>2],l=d[e+48>>2],c=d[t>>2],_=d[t+4>>2],u=d[t+8>>2],f[o+60>>2]=0,d[o+56>>2]=s+y(u*i),d[o+52>>2]=r+y(_*i),d[o+48>>2]=l+y(c*i),l=d[n>>2],h=d[n+4>>2],p=d[n+8>>2],r=(r=y(y(y(l*l)+y(h*h))+y(p*p)))>y(1.1920928955078125e-7)?y(S(r)):y(0),r=(s=y(r*i)>y(.7853981852531433)?y(y(.7853981852531433)/i):r)<y(.0010000000474974513)?y(y(i*y(.5))+y(s*y(y(y(y(i*i)*i)*y(-.02083333395421505))*s))):y(cn(y(y(s*y(.5))*i))/s),Re(e,a),c=d[a+4>>2],_=d[a+12>>2],s=sn(y(y(s*i)*y(.5))),u=y(l*r),m=d[a>>2],h=y(h*r),p=y(p*r),v=d[a+8>>2],r=y(y(y(y(_*s)-y(u*m))-y(c*h))-y(p*v)),l=y(y(y(y(p*_)+y(s*v))+y(u*c))-y(h*m)),i=y(y(y(y(s*m)+y(u*_))+y(h*v))-y(p*c)),s=y(y(y(p*m)+y(y(h*_)+y(s*c)))-y(u*v)),(c=y(y(r*r)+y(y(l*l)+y(y(i*i)+y(s*s)))))>y(1.1920928955078125e-7)&&(c=y(y(1)/y(S(c))),r=y(r*c),l=y(l*c),s=y(s*c),i=y(i*c),c=y(y(r*r)+y(y(l*l)+y(y(s*s)+y(i*i))))),c>y(1.1920928955078125e-7)?(f[o+12>>2]=0,f[o+44>>2]=0,f[o+28>>2]=0,_=y(y(2)/c),c=y(l*_),u=y(s*c),m=y(i*_),h=y(r*m),d[o+36>>2]=u+h,p=y(i*c),_=y(s*_),v=y(r*_),d[o+32>>2]=p-v,d[o+24>>2]=u-h,u=y(i*_),r=y(r*c),d[o+16>>2]=u+r,d[o+8>>2]=p+v,d[o+4>>2]=u-r,i=y(i*m),r=y(s*_),d[o+40>>2]=y(1)-y(i+r),s=i,i=y(l*c),d[o+20>>2]=y(1)-y(s+i),d[o>>2]=y(1)-y(r+i)):(t=f[e+4>>2],f[o>>2]=f[e>>2],f[o+4>>2]=t,t=f[e+12>>2],f[o+8>>2]=f[e+8>>2],f[o+12>>2]=t,t=f[e+20>>2],f[o+16>>2]=f[e+16>>2],f[o+20>>2]=t,t=f[e+28>>2],f[o+24>>2]=f[e+24>>2],f[o+28>>2]=t,t=f[e+36>>2],f[o+32>>2]=f[e+32>>2],f[o+36>>2]=t,t=f[e+44>>2],f[o+40>>2]=f[e+40>>2],f[o+44>>2]=t),R=a+16|0}function qe(e,t,n,i,o,a,r){var s,c=0,l=0,_=0,u=0,h=0,p=0,m=0,d=0,v=0,g=0,y=0,A=0;if(R=s=R-48|0,c=f[n+8>>2])for(d=c;;){if(f[d+20>>2]>f[e+100>>2]){c=f[d+12>>2],h=f[c+92>>2],p=f[c+96>>2],_=f[n+88>>2],u=f[c+88>>2],l=f[n+92>>2],c=f[n+96>>2],f[s+44>>2]=-1,m=p-c|0,f[s+40>>2]=m,l=h-l|0,f[s+36>>2]=l,c=u-_|0,f[s+32>>2]=c,_=Gs(p=l,g=l>>31,f[(l=o)+8>>2],f[l+12>>2]),u=N,h=_,_=c,l=h+(c=Gs(c,y=c>>31,f[l>>2],f[l+4>>2]))|0,h=N+u|0,h=l>>>0<c>>>0?h+1|0:h,m=(c=Gs(u=m,A=u>>31,f[o+16>>2],f[o+20>>2]))+l|0,l=N+h|0,l=m>>>0<c>>>0?l+1|0:l,c=m,h=Gs(f[(m=a)+8>>2],f[m+12>>2],p,g),p=N,_=Gs(f[m>>2],f[m+4>>2],_,y),p=N+p|0,p=(m=_+h|0)>>>0<_>>>0?p+1|0:p,u=Gs(f[a+16>>2],f[a+20>>2],u,A),h=N+p|0,h=(_=u+m|0)>>>0<u>>>0?h+1|0:h,u=_,(0|(_=h))>0||(0|_)>=0&&!(u>>>0<1)?(f[s+8>>2]=u,f[s+12>>2]=_,f[s+24>>2]=1,p=-1,u=-1):(0|_)<-1||(0|_)<=-1&&!(u>>>0>4294967295)?(f[s+24>>2]=-1,f[s+8>>2]=0-u,f[s+12>>2]=0-((0<u>>>0)+_|0),p=1,u=-1):(f[s+8>>2]=0,f[s+12>>2]=0,f[s+24>>2]=0,p=0,u=0);e:{t:{n:{if(_=s,m=s,(0|l)<0||(0|l)<=0&&!(c>>>0>0)){if((0|l)>-1||(0|l)>=-1&&!(c>>>0<=4294967295))break n;f[s+24>>2]=p,l=0-((0<c>>>0)+l|0)|0,c=0-c|0}f[m+16>>2]=c,f[_+20>>2]=l;break t}if(f[s+16>>2]=0,f[s+20>>2]=0,!u)break e}v?(0|(c=Ct(s+8|0,r)))<=-1?(c=f[s+12>>2],f[r>>2]=f[s+8>>2],f[r+4>>2]=c,f[r+16>>2]=f[s+24>>2],c=f[s+20>>2],f[r+8>>2]=f[s+16>>2],f[r+12>>2]=c,v=d):c||(v=2!=(0|hn(v,d,i,s+32|0))^t?d:v):(c=f[s+12>>2],f[r>>2]=f[s+8>>2],f[r+4>>2]=c,f[r+16>>2]=f[s+24>>2],c=f[s+20>>2],f[r+8>>2]=f[s+16>>2],f[r+12>>2]=c,v=d)}c=f[n+8>>2]}if((0|(d=f[d>>2]))==(0|c))break}return R=s+48|0,v}function Ye(e,t){var n=0,i=0,r=0,s=0;if(f[(n=e)+8>>2]=0,f[n+12>>2]=-1,f[n>>2]=11020,f[n+76>>2]=0,f[n+68>>2]=0,f[n+72>>2]=1,f[n+52>>2]=-581039253,f[n+56>>2]=-581039253,f[n+36>>2]=1566444395,f[n+40>>2]=1566444395,a[n+32|0]=1,f[n+28>>2]=0,a[n+96|0]=1,f[n+60>>2]=-581039253,f[n+64>>2]=0,f[n+44>>2]=1566444395,f[n+48>>2]=0,f[n+20>>2]=0,f[n+24>>2]=0,f[n+92>>2]=0,f[n+84>>2]=0,f[n+88>>2]=0,a[n+116|0]=1,f[n+112>>2]=0,a[n+136|0]=1,f[n+104>>2]=0,f[n+108>>2]=0,f[n+124>>2]=0,f[n+128>>2]=0,f[n+132>>2]=0,a[n+156|0]=1,f[n+152>>2]=0,f[n+144>>2]=0,f[n+148>>2]=0,a[n+176|0]=1,f[n+172>>2]=0,f[n+164>>2]=0,f[n+168>>2]=0,f[n+184>>2]=1065353216,f[n+188>>2]=1065353216,f[n+192>>2]=1065353216,f[n+196>>2]=0,a[n+180|0]=0,f[n+4>>2]=31,t?(f[6257]=f[6257]+1,t=0|o[f[4968]](40,16),f[t+16>>2]=0,f[t+8>>2]=-1,f[t+12>>2]=0,f[t>>2]=0,f[t+4>>2]=0,f[t+32>>2]=0,a[t+36|0]=1,f[t+24>>2]=0,f[t+28>>2]=0,f[e+68>>2]=t,t=f[e+24>>2]):t=0,(0|t)<0){if((0|(s=f[e+20>>2]))>=1)for(;n=(t=g(r,80))+f[e+28>>2]|0,i=f[n+4>>2],f[t>>2]=f[n>>2],f[t+4>>2]=i,i=f[n+12>>2],f[t+8>>2]=f[n+8>>2],f[t+12>>2]=i,i=f[n+28>>2],f[t+24>>2]=f[n+24>>2],f[t+28>>2]=i,i=f[n+20>>2],f[t+16>>2]=f[n+16>>2],f[t+20>>2]=i,i=f[n+44>>2],f[t+40>>2]=f[n+40>>2],f[t+44>>2]=i,i=f[n+36>>2],f[t+32>>2]=f[n+32>>2],f[t+36>>2]=i,i=f[n+60>>2],f[t+56>>2]=f[n+56>>2],f[t+60>>2]=i,i=f[n+52>>2],f[t+48>>2]=f[n+48>>2],f[t+52>>2]=i,i=f[n+68>>2],f[t+64>>2]=f[n+64>>2],f[t+68>>2]=i,i=f[n+76>>2],f[t+72>>2]=f[n+72>>2],f[t+76>>2]=i,(0|s)!=(0|(r=r+1|0)););(t=f[e+28>>2])&&(h[e+32|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+28>>2]=0),f[e+28>>2]=0,a[e+32|0]=1,f[e+24>>2]=0}}function Xe(e,t){var n=0,i=0,o=0;e:{t:{n:{i:{o:{a:if((0|(n=f[e>>2]))>=4){if(8&h[0|t]){o=n;break a}o=n+-1|0,f[e>>2]=o,n=f[16+(i=(o<<4)+e|0)>>2],f[e+60>>2]=f[i+12>>2],f[e+64>>2]=n,n=f[i+8>>2],f[e+52>>2]=f[i+4>>2],f[e+56>>2]=n,n=f[i+88>>2],f[e+132>>2]=f[i+84>>2],f[e+136>>2]=n,n=f[i+96>>2],f[e+140>>2]=f[i+92>>2],f[e+144>>2]=n,n=f[i+176>>2],f[e+220>>2]=f[i+172>>2],f[e+224>>2]=n,n=f[i+168>>2],f[e+212>>2]=f[i+164>>2],f[e+216>>2]=n}else if(o=3,3!=(0|n))break o;if(4&h[0|t])break i;o=o+-1|0,f[e>>2]=o,n=f[16+(i=(o<<4)+e|0)>>2],f[e+44>>2]=f[i+12>>2],f[e+48>>2]=n,n=f[i+8>>2],f[e+36>>2]=f[i+4>>2],f[e+40>>2]=n,n=f[i+88>>2],f[e+116>>2]=f[i+84>>2],f[e+120>>2]=n,n=f[i+96>>2],f[e+124>>2]=f[i+92>>2],f[e+128>>2]=n,n=f[i+176>>2],f[e+204>>2]=f[i+172>>2],f[e+208>>2]=n,n=f[i+168>>2],f[e+196>>2]=f[i+164>>2],f[e+200>>2]=n;break i}if(o=2,(0|n)<2)break n}if(2&h[0|t])break t;o=o+-1|0,f[e>>2]=o,n=f[16+(i=(o<<4)+e|0)>>2],f[e+28>>2]=f[i+12>>2],f[e+32>>2]=n,n=f[i+8>>2],f[e+20>>2]=f[i+4>>2],f[e+24>>2]=n,n=f[i+88>>2],f[e+100>>2]=f[i+84>>2],f[e+104>>2]=n,n=f[i+96>>2],f[e+108>>2]=f[i+92>>2],f[e+112>>2]=n,n=f[i+176>>2],f[e+188>>2]=f[i+172>>2],f[e+192>>2]=n,n=f[i+168>>2],f[e+180>>2]=f[i+164>>2],f[e+184>>2]=n;break t}if(o=1,1!=(0|n))break e}1&a[0|t]||(t=o+-1|0,f[e>>2]=t,t=f[4+(o=(n=t<<4)+(e+4|0)|0)>>2],f[e+4>>2]=f[o>>2],f[e+8>>2]=t,t=f[o+12>>2],f[e+12>>2]=f[o+8>>2],f[e+16>>2]=t,t=f[4+(o=n+(e+84|0)|0)>>2],f[e+84>>2]=f[o>>2],f[e+88>>2]=t,t=f[o+12>>2],f[e+92>>2]=f[o+8>>2],f[e+96>>2]=t,t=f[12+(n=n+(e+164|0)|0)>>2],f[e+172>>2]=f[n+8>>2],f[e+176>>2]=t,t=f[n+4>>2],f[e+164>>2]=f[n>>2],f[e+168>>2]=t)}}function Qe(e,t,n,i){var a,r=y(0),s=y(0),c=0,l=y(0),_=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=0,b=y(0),C=y(0),S=y(0),E=0,w=0,T=0,P=0,I=0,N=0,D=0,M=0;R=a=R-16|0;e:if(h[e+60|0]){if(_=d[e+28>>2],l=d[e+12>>2],r=(r=d[n+8>>2])<l?l:r,b=d[e+44>>2],c=(r=y(y((_<r?_:r)-l)*b))<y(4294967296)&r>=y(0)?~~r>>>0:0,C=d[e+40>>2],g=d[e+24>>2],r=d[e+8>>2],S=d[e+36>>2],A=d[e+20>>2],v=d[e+4>>2],s=d[n>>2],m=d[n+4>>2],E=65534&c,u[a+14>>1]=E,n=a,w=65534&(c=(m=y(C*y((g<(m=m<r?r:m)?g:m)-r)))<y(4294967296)&m>=y(0)?~~m>>>0:0),u[n+12>>1]=w,n=a,T=65534&(c=(s=y(y((A<(s=s<v?v:s)?A:s)-v)*S))<y(4294967296)&s>=y(0)?~~s>>>0:0),u[n+10>>1]=T,s=d[i+8>>2],n=(l=y(y(b*y((_<(s=s<l?l:s)?_:s)-l))+y(1)))<y(4294967296)&l>=y(0)?~~l>>>0:0,l=d[i>>2],_=d[i+4>>2],P=1|n,u[a+8>>1]=P,n=a,I=1|(i=(r=y(y(C*y((g<(_=_<r?r:_)?g:_)-r))+y(1)))<y(4294967296)&r>=y(0)?~~r>>>0:0),u[n+6>>1]=I,n=a,N=1|(i=(r=y(y(S*y((A<(r=l<v?v:l)?A:r)-v))+y(1)))<y(4294967296)&r>=y(0)?~~r>>>0:0),u[n+4>>1]=N,(n=f[e+144>>2])>>>0>2)break e;switch(n-1|0){default:if(i=0,(0|(D=f[e+56>>2]))>=1)for(e=f[e+136>>2],n=0;(M=(0|(x=f[e+12>>2]))<0)|!(c=T>>>0<=p[e+6>>1]&N>>>0>=p[e>>1]&E>>>0<=p[e+10>>1]&P>>>0>=p[e+4>>1]&w>>>0<=p[e+8>>1]&I>>>0>=p[e+2>>1])||o[f[f[t>>2]+8>>2]](t,x>>>21|0,2097151&x),(-1^c)&M?(n=n-(c=f[e+12>>2])|0,e=e-(c<<4)|0):(n=n+1|0,e=e+16|0),i=i+1|0,(0|n)<(0|D););if(f[5677]>=(0|i))break e;f[5677]=i;break e;case 0:!function(e,t,n,i){var a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0,m=0,d=0,v=0;if(f[e+152>>2]>=1)for(;;){if(h=p[n>>1],r=f[e+160>>2]+(m<<5)|0,!(h>>>0>p[r+6>>1]||(d=p[i>>1])>>>0<p[r>>1]||(v=p[n+4>>1])>>>0>p[r+10>>1]||(_=p[i+4>>1])>>>0<p[r+4>>1]||(c=p[n+2>>1])>>>0>p[r+8>>1]||(s=p[i+2>>1])>>>0<p[r+2>>1])){t:if((0|(a=f[r+16>>2]))<1)u=0;else for(r=a+(l=f[r+12>>2])|0,a=f[e+136>>2]+(l<<4)|0,u=0;;){if(_=h>>>0<=p[a+6>>1]&d>>>0>=p[a>>1]&v>>>0<=p[a+10>>1]&_>>>0>=p[a+4>>1]&c>>>0<=p[a+8>>1]&s>>>0>=p[a+2>>1],(s=(0|(c=f[a+12>>2]))<0)|!_||o[f[f[t>>2]+8>>2]](t,c>>>21|0,2097151&c),s&(-1^_)?(l=l-(s=f[a+12>>2])|0,a=a-(s<<4)|0):(l=l+1|0,a=a+16|0),u=u+1|0,(0|l)>=(0|r))break t;s=p[i+2>>1],c=p[n+2>>1],_=p[i+4>>1],v=p[n+4>>1],d=p[i>>1],h=p[n>>1]}f[5677]>=(0|u)||(f[5677]=u)}if(!((0|(m=m+1|0))<f[e+152>>2]))break}}(e,t,a+10|0,a+4|0);break e;case 1:}Ci(e,f[e+136>>2],t,a+10|0,a+4|0)}else!function(e,t,n,i){var a=0,r=0,s=0,c=0,l=0;if(f[e+56>>2]>=1)for(a=f[e+96>>2];;){r=0,d[n>>2]>d[a+16>>2]||(r=0,d[i>>2]<d[a>>2]||(r=1)),s=0,s=d[i+8>>2]<d[a+8>>2]|d[n+8>>2]>d[a+24>>2]?s:r;t:{n:{if(d[i+4>>2]<d[a+4>>2]^1&&!(d[n+4>>2]>d[a+20>>2])){if(1==(s&(r=-1==f[a+32>>2]))){o[f[f[t>>2]+8>>2]](t,f[a+36>>2],f[a+40>>2]);break n}}else r=-1==f[a+32>>2],s=0;if(!(r|s)){c=(r=f[a+32>>2])+c|0,a=(r<<6)+a|0;break t}}c=c+1|0,a=a- -64|0}if(l=l+1|0,!((0|c)<f[e+56>>2]))break}f[5677]<(0|l)&&(f[5677]=l)}(e,t,n,i);R=a+16|0}function Ke(e,t,n){var i=0,r=0,s=0,c=0,l=0,_=0,u=0,p=0,d=0;e:{if(l=f[e+48>>2],i=f[t>>2],r=g((r=(i<<15^-1)+i|0)>>>10^r,9),!((u=l+-1&((r=((r^=r>>>6)<<11^-1)+r|0)>>>16^r))>>>0>=m[e+4>>2])&&-1!=(0|(r=f[f[e+12>>2]+(u<<2)>>2])))for(s=f[e+72>>2];;){if((0|i)==f[s+(r<<3)>>2])break e;if(-1==(0|(r=f[f[e+32>>2]+(r<<2)>>2])))break}if((0|l)==(0|(i=p=f[e+44>>2]))&&!((0|(i=l))>=(0|(s=i?i<<1:1)))){if(s?(f[6257]=f[6257]+1,c=0|o[f[4968]](s<<2,16),i=f[e+44>>2]):i=l,(0|i)>=1)for(r=0;f[(_=r<<2)+c>>2]=f[_+f[e+52>>2]>>2],(0|(r=r+1|0))!=(0|i););(r=f[e+52>>2])&&(h[e+56|0]&&(r&&(f[6258]=f[6258]+1,o[f[4969]](r)),i=f[e+44>>2]),f[e+52>>2]=0),f[e+52>>2]=c,f[e+48>>2]=s,a[e+56|0]=1}if(f[f[e+52>>2]+(i<<2)>>2]=f[n>>2],f[e+44>>2]=i+1,(0|(i=f[e- -64>>2]))==f[e+68>>2]&&!((0|i)>=(0|(n=i?i<<1:1)))){if(n?(f[6257]=f[6257]+1,c=0|o[f[4968]](n<<3,16),i=f[e+64>>2]):c=0,(0|i)>=1)for(r=0;_=(s=r<<3)+c|0,s=s+f[e+72>>2]|0,d=f[s+4>>2],f[_>>2]=f[s>>2],f[_+4>>2]=d,(0|(r=r+1|0))!=(0|i););(i=f[e+72>>2])&&(h[e+76|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[e+72>>2]=0),f[e+72>>2]=c,f[e+68>>2]=n,a[e+76|0]=1,i=f[e+64>>2]}return n=f[e+72>>2]+(i<<3)|0,i=f[t+4>>2],f[n>>2]=f[t>>2],f[n+4>>2]=i,f[e+64>>2]=f[e+64>>2]+1,(0|l)<f[e+48>>2]&&(function(e){var t,n=0,i=0,r=0,s=0,c=0,l=0,_=0,u=0;if(!((0|(t=f[e+4>>2]))>=(0|(i=f[e+48>>2])))){if(f[e+8>>2]>=(0|i))n=f[e+12>>2];else{r=t,i&&(f[6257]=f[6257]+1,n=0|o[f[4968]](i<<2,16),r=f[e+4>>2]),c=f[e+12>>2];t:{n:{if((0|r)>=1)for(;;)if(f[(l=s<<2)+n>>2]=f[c+l>>2],(0|(s=s+1|0))==(0|r))break n;if(!c)break t}h[e+16|0]&&c&&(f[6258]=f[6258]+1,o[f[4969]](c))}f[e+12>>2]=n,a[e+16|0]=1,f[e+8>>2]=i}if(dn((r=t<<2)+n|0,0,(l=i<<2)-r|0),f[e+4>>2]=i,(0|(c=f[e+24>>2]))<(0|i)){t:if(f[e+28>>2]>=(0|i))n=f[e+32>>2];else{s=0,r=c,n=0,i&&(f[6257]=f[6257]+1,n=0|o[f[4968]](l,16),r=f[e+24>>2]),_=f[e+32>>2];n:{if((0|r)>=1)for(;;)if(f[(u=s<<2)+n>>2]=f[_+u>>2],(0|(s=s+1|0))==(0|r))break n;if(!_){f[e+32>>2]=n,f[e+28>>2]=i,a[e+36|0]=1;break t}}h[e+36|0]&&_&&(f[6258]=f[6258]+1,o[f[4969]](_)),f[e+32>>2]=n,a[e+36|0]=1,f[e+28>>2]=i}dn((r=c<<2)+n|0,0,l-r|0)}if(f[e+24>>2]=i,(0|i)>=1&&(dn(f[e+12>>2],255,l),dn(f[e+32>>2],255,l)),!((0|t)<1))for(r=f[e+32>>2],c=f[e+72>>2],i=f[e+12>>2],s=0;n=f[c+(s<<3)>>2],n=g((n=(n<<15^-1)+n|0)>>>10^n,9),n=((n^=n>>>6)<<11^-1)+n|0,n=i+((f[e+48>>2]+-1&(n>>>16^n))<<2)|0,f[r+(s<<2)>>2]=f[n>>2],f[n>>2]=s,(0|t)!=(0|(s=s+1|0)););}}(e),t=f[t>>2],t=g((t=(t<<15^-1)+t|0)>>>10^t,9),t=((t^=t>>>6)<<11^-1)+t|0,u=f[e+48>>2]+-1&(t>>>16^t)),t=f[e+32>>2]+(p<<2)|0,e=f[e+12>>2]+(u<<2)|0,f[t>>2]=f[e>>2],void(f[e>>2]=p)}f[f[e+52>>2]+(r<<2)>>2]=f[n>>2]}function Ze(e,t,n,i){var o,a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),C=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0);R=o=R+-64|0,v=d[t+24>>2],g=d[t+20>>2],A=d[t+40>>2],C=d[t+36>>2],l=d[e+40>>2],_=d[e+20>>2],p=d[e+36>>2],u=d[e+24>>2],E=d[t+8>>2],w=d[t>>2],T=d[t+4>>2],P=d[t+16>>2],I=d[t+32>>2],r=d[e+8>>2],s=d[e+4>>2],m=d[e+32>>2],h=d[e+16>>2],c=d[e>>2],f[o+60>>2]=0,f[o+44>>2]=0,D=y(y(_*l)-y(u*p)),M=y(y(u*m)-y(l*h)),O=y(y(p*h)-y(_*m)),a=y(y(1)/y(y(y(c*D)+y(s*M))+y(r*O))),N=y(y(y(u*s)-y(_*r))*a),u=y(y(y(h*r)-y(u*c))*a),_=y(y(y(_*c)-y(h*s))*a),d[o+56>>2]=y(y(I*N)+y(C*u))+y(A*_),h=y(y(y(p*r)-y(l*s))*a),r=y(y(y(l*c)-y(m*r))*a),s=y(y(y(m*s)-y(p*c))*a),d[o+52>>2]=y(y(I*h)+y(C*r))+y(A*s),d[o+40>>2]=y(y(N*P)+y(u*g))+y(_*v),d[o+36>>2]=y(y(h*P)+y(r*g))+y(s*v),f[o+28>>2]=0,c=y(D*a),l=y(M*a),a=y(O*a),d[o+48>>2]=y(y(I*c)+y(C*l))+y(A*a),d[o+32>>2]=y(y(c*P)+y(l*g))+y(a*v),d[o+24>>2]=y(E*_)+y(y(w*N)+y(T*u)),d[o+20>>2]=y(E*s)+y(y(w*h)+y(T*r)),d[o+16>>2]=y(E*a)+y(y(w*c)+y(T*l)),Re(o+16|0,o),c=d[o>>2],s=d[o+4>>2],r=d[o+8>>2],l=d[o+12>>2],a=y(y(1)/y(S(y(y(y(y(c*c)+y(s*s))+y(r*r))+y(l*l))))),r=y(r*a),d[o+8>>2]=r,s=y(s*a),d[o+4>>2]=s,c=y(c*a),d[o>>2]=c,a=y(l*a),d[o+12>>2]=a,a=Yt(y(x(y(b(a,y(-1))),y(1)))),d[i>>2]=a+a,f[n+12>>2]=0,d[n+8>>2]=r,d[n+4>>2]=s,d[n>>2]=c,(a=y(y(y(c*c)+y(s*s))+y(r*r)))<y(14210854715202004e-30)?(f[n+8>>2]=0,f[n+12>>2]=0,f[n>>2]=1065353216,f[n+4>>2]=0):(a=y(y(1)/y(S(a))),d[n+8>>2]=r*a,d[n+4>>2]=s*a,d[n>>2]=c*a),R=o- -64|0}function Je(e,t,n,i){var r;!function(e,t,n){f[e>>2]=7540,a[e+76|0]=1,f[e+72>>2]=0,f[e+68>>2]=n,f[e+28>>2]=0,f[e+32>>2]=0,f[e+24>>2]=t,a[e+20|0]=1,f[e+16>>2]=0,f[e- -64>>2]=0,a[e+60|0]=0,f[e+56>>2]=1025758986,a[e+54|0]=1,u[e+52>>1]=256,f[e+48>>2]=0,a[e+44|0]=1,f[e+36>>2]=1,f[e+40>>2]=1065353216,f[e+8>>2]=0,f[e+12>>2]=0}(e,t,n),f[(n=e)+100>>2]=1050253722,f[n+104>>2]=1015580809,f[n+92>>2]=1058642330,f[n+96>>2]=1065353216,f[n+88>>2]=0,f[n+80>>2]=0,f[n+84>>2]=0,f[n+132>>2]=0,f[n+136>>2]=1045220557,f[n+124>>2]=1045220557,f[n+128>>2]=1045220557,f[n+108>>2]=0,f[n+112>>2]=10,f[n+184>>2]=0,f[n+188>>2]=1045220557,f[n+176>>2]=1120403456,f[n+180>>2]=1900671690,f[n+172>>2]=128,f[n+164>>2]=260,f[n+168>>2]=2,f[n+156>>2]=0,f[n+160>>2]=1062836634,f[n+148>>2]=-1121724662,f[n+152>>2]=1036831949,f[n+140>>2]=0,f[n+144>>2]=1,f[n+116>>2]=1101004800,f[n+120>>2]=1065353216,f[n>>2]=2328,a[n+208|0]=1,f[n+204>>2]=0,a[n+240|0]=1,f[n+216>>2]=i,f[n+212>>2]=0,f[n+196>>2]=0,f[n+200>>2]=0,f[n+236>>2]=0,f[n+228>>2]=0,f[n+232>>2]=0,a[n+260|0]=1,u[n+290>>1]=0,f[n+256>>2]=0,f[n+248>>2]=0,f[n+252>>2]=0,f[n+264>>2]=0,f[n+268>>2]=-1054867456,f[n+272>>2]=0,f[n+276>>2]=0,f[n+280>>2]=0,f[n+284>>2]=0,a[n+308|0]=1,f[n+312>>2]=0,f[n+304>>2]=0,f[n+296>>2]=0,f[n+300>>2]=0,a[n+336|0]=1,a[n+316|0]=1,f[n+324>>2]=0,f[n+328>>2]=0,f[n+332>>2]=0,f[n+340>>2]=0,r=n,i?n=0:(f[6257]=f[6257]+1,Nn(n=0|o[f[4968]](236,16)),f[e+216>>2]=n,n=1),a[r+289|0]=n,f[6257]=f[6257]+1,function(e){f[e>>2]=6072,f[e+16>>2]=0,a[e+20|0]=1,f[e+8>>2]=0,f[e+12>>2]=0,f[e+36>>2]=0,a[e+40|0]=1,a[e+60|0]=1,f[e+28>>2]=0,f[e+32>>2]=0,f[e+56>>2]=0,a[e+64|0]=1,f[e+48>>2]=0,f[e+52>>2]=0}(n=0|o[f[4968]](68,16)),a[e+288|0]=1,f[e+220>>2]=n,f[6257]=f[6257]+1,n=0|o[f[4968]](88,16),i=f[e+216>>2],a[n+44|0]=1,f[n+24>>2]=t,f[n+20>>2]=0,f[n+12>>2]=0,f[n+16>>2]=0,f[n+8>>2]=i,f[n+4>>2]=0,f[n>>2]=2936,f[n+40>>2]=0,a[n+64|0]=1,f[n+32>>2]=0,f[n+36>>2]=0,f[n+60>>2]=0,a[n+84|0]=1,f[n+52>>2]=0,f[n+56>>2]=0,f[n+80>>2]=0,f[n+72>>2]=0,f[n+76>>2]=0,f[e+212>>2]=n}function $e(e){var t=0;return f[(e|=0)>>2]=5096,h[e+20|0]&&((t=f[f[e+16>>2]+16>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),(t=f[e+16>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t))),h[e+12|0]&&((t=f[f[e+8>>2]+16>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),(t=f[e+8>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t))),t=f[e+28>>2],o[f[f[t>>2]>>2]](t),(t=f[e+28>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+32>>2],o[f[f[t>>2]>>2]](t),(t=f[e+32>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+36>>2],o[f[f[t>>2]>>2]](t),(t=f[e+36>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+40>>2],o[f[f[t>>2]>>2]](t),(t=f[e+40>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+44>>2],o[f[f[t>>2]>>2]](t),(t=f[e+44>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+48>>2],o[f[f[t>>2]>>2]](t),(t=f[e+48>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+52>>2],o[f[f[t>>2]>>2]](t),(t=f[e+52>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+56>>2],o[f[f[t>>2]>>2]](t),(t=f[e+56>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+72>>2],o[f[f[t>>2]>>2]](t),(t=f[e+72>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+76>>2],o[f[f[t>>2]>>2]](t),(t=f[e+76>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+68>>2],o[f[f[t>>2]>>2]](t),(t=f[e+68>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+84>>2],o[f[f[t>>2]>>2]](t),(t=f[e+84>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+80>>2],o[f[f[t>>2]>>2]](t),(t=f[e+80>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),t=f[e+24>>2],o[f[f[t>>2]>>2]](t),(t=f[e+24>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),0|e}function et(e,t){var n,i=0,r=0,s=0,c=0,l=0,_=0;if(R=n=R-96|0,a[n+92|0]=1,f[n+60>>2]=0,f[n+64>>2]=0,a[n+52|0]=1,f[n+48>>2]=0,a[n+72|0]=1,f[n+40>>2]=0,f[n+44>>2]=0,f[n+68>>2]=0,f[n+88>>2]=0,f[n+80>>2]=0,f[n+84>>2]=0,f[n+28>>2]=0,a[n+32|0]=1,f[n+20>>2]=0,f[n+24>>2]=0,!((0|(c=f[e+8>>2]))<1)){for(;;){s=f[f[f[e+16>>2]+(l<<2)>>2]+192>>2],f[n+12>>2]=s,_=i+-1|0,i=g((i=s+(s<<15^-1)|0)>>>10^i,9);e:{t:if(!((i=_&((i=((i^=i>>>6)<<11^-1)+i|0)>>>16^i))>>>0>=r>>>0)&&-1!=(0|(r=f[f[n+28>>2]+(i<<2)>>2]))){for(i=f[n+48>>2],_=f[n+88>>2];;){if((0|s)!=f[(r<<3)+_>>2]){if(-1!=(0|(r=f[i+(r<<2)>>2])))continue;break t}break}if(f[n+68>>2])break e}f[n>>2]=s,Ke(n+16|0,n,n+12|0),r=f[n+12>>2],o[f[f[r>>2]+60>>2]](r,t),c=f[e+8>>2]}if(!((0|(l=l+1|0))<(0|c)))break;r=f[n+20>>2],i=f[n+64>>2]}if(r=0,!((0|c)<=0))for(;s=f[f[e+16>>2]+(r<<2)>>2],1!=(0|(l=f[s+252>>2]))&&64!=(0|l)||(o[f[f[s>>2]+24>>2]](s,t),c=f[e+8>>2]),(0|(r=r+1|0))<(0|c););}(e=f[n+88>>2])&&(h[n+92|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[n+88>>2]=0),f[n+88>>2]=0,a[n+92|0]=1,f[n+80>>2]=0,f[n+84>>2]=0,(e=f[n+68>>2])&&(h[n+72|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[n+68>>2]=0),f[n+68>>2]=0,a[n+72|0]=1,f[n+60>>2]=0,f[n+64>>2]=0,(e=f[n+48>>2])&&(h[n+52|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[n+48>>2]=0),f[n+48>>2]=0,a[n+52|0]=1,f[n+40>>2]=0,f[n+44>>2]=0,(e=f[n+28>>2])&&(h[n+32|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[n+28>>2]=0),R=n+96|0}function tt(e,t,n,i,o){var r,s=0,c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=0,A=y(0);if(r=f[e+18504>>2]){if((s=f[r+48>>2])&&(f[s+44>>2]=f[r+44>>2]),(s=f[r+44>>2])&&(f[s+48>>2]=f[r+48>>2]),f[e+18504>>2]==(0|r)&&(f[e+18504>>2]=f[r+48>>2]),f[(s=e+18508|0)>>2]=f[s>>2]+-1,f[r+44>>2]=0,f[r+48>>2]=f[e+18496>>2],(s=f[e+18496>>2])&&(f[s+44>>2]=r),f[e+18496>>2]=r,f[(s=e+18500|0)>>2]=f[s>>2]+1,f[r+28>>2]=i,f[r+24>>2]=n,f[r+20>>2]=t,a[r+55|0]=0,u=d[n+24>>2],A=d[i+24>>2],c=d[t+24>>2],h=d[i+20>>2],_=d[t+20>>2],p=d[n+20>>2],m=d[n+16>>2],v=d[i+16>>2],l=d[t+16>>2],f[r+12>>2]=0,m=y(m-l),h=y(h-_),p=y(p-_),l=y(v-l),_=y(y(m*h)-y(p*l)),d[r+8>>2]=_,u=y(u-c),v=y(u*l),l=y(A-c),c=y(v-y(m*l)),d[r+4>>2]=c,l=y(y(p*l)-y(u*h)),d[r>>2]=l,g=2,(c=y(S(y(y(y(l*l)+y(c*c))+y(_*_)))))>y(9999999747378752e-20)){if(Cn(r,t,n,s=r+16|0)||Cn(r,n,i,s)||Cn(r,i,t,s)||(d[r+16>>2]=y(y(y(d[t+16>>2]*d[r>>2])+y(d[t+20>>2]*d[r+4>>2]))+y(d[t+24>>2]*d[r+8>>2]))/c),c=y(y(1)/c),d[r>>2]=c*d[r>>2],d[r+4>>2]=c*d[r+4>>2],d[r+8>>2]=c*d[r+8>>2],o)return r;if(g=3,d[s>>2]>=y(-9999999747378752e-21))return r}return f[e>>2]=g,(t=f[r+48>>2])&&(f[t+44>>2]=f[r+44>>2]),(t=f[r+44>>2])&&(f[t+48>>2]=f[r+48>>2]),f[e+18496>>2]==(0|r)&&(f[e+18496>>2]=f[r+48>>2]),f[e+18500>>2]=f[e+18500>>2]+-1,f[r+44>>2]=0,f[r+48>>2]=f[e+18504>>2],(t=f[e+18504>>2])&&(f[t+44>>2]=r),f[e+18504>>2]=r,f[e+18508>>2]=f[e+18508>>2]+1,0}return f[e>>2]=5,0}function nt(e){var t=0;return f[(e|=0)>>2]=3756,(t=f[e+204>>2])&&(h[e+208|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+204>>2]=0),f[e+204>>2]=0,f[e+196>>2]=0,f[e+200>>2]=0,a[e+208|0]=1,(t=f[e+176>>2])&&(h[e+180|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+176>>2]=0),f[e+176>>2]=0,f[e+168>>2]=0,f[e+172>>2]=0,a[e+180|0]=1,(t=f[e+156>>2])&&(h[e+160|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+156>>2]=0),f[e+156>>2]=0,f[e+148>>2]=0,f[e+152>>2]=0,a[e+160|0]=1,(t=f[e+136>>2])&&(h[e+140|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+136>>2]=0),f[e+136>>2]=0,f[e+128>>2]=0,f[e+132>>2]=0,a[e+140|0]=1,(t=f[e+116>>2])&&(h[e+120|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+116>>2]=0),f[e+116>>2]=0,f[e+108>>2]=0,f[e+112>>2]=0,a[e+120|0]=1,(t=f[e+96>>2])&&(h[e+100|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+96>>2]=0),f[e+96>>2]=0,f[e+88>>2]=0,f[e+92>>2]=0,a[e+100|0]=1,(t=f[e+76>>2])&&(h[e+80|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+76>>2]=0),f[e+76>>2]=0,f[e+68>>2]=0,f[e+72>>2]=0,a[e+80|0]=1,(t=f[e+56>>2])&&(h[e+60|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+56>>2]=0),f[e+56>>2]=0,f[e+48>>2]=0,f[e+52>>2]=0,a[e+60|0]=1,(t=f[e+36>>2])&&(h[e+40|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+36>>2]=0),f[e+36>>2]=0,f[e+28>>2]=0,f[e+32>>2]=0,a[e+40|0]=1,(t=f[e+16>>2])&&(h[e+20|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+16>>2]=0),f[e+16>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0,a[e+20|0]=1,0|e}function it(e,t,n,i,o){var a,r=0,s=y(0),c=y(0),l=0,_=y(0),u=y(0),h=0,p=y(0),m=y(0),v=y(0),g=0,x=y(0),b=y(0);R=a=R+-64|0;e:{t:{n:{i:{if((r=e+-1|0)>>>0<=1){if(r-1)break i;break n}if((0|e)>=2)for(g=e+-1|0,r=0;u=d[(l=(h=r<<3)+t|0)>>2],p=d[l+12>>2],m=d[l+8>>2],v=d[(4|h)+t>>2],_=y(y(u*p)-y(m*v)),s=y(s+_),c=y(c+y(y(p+v)*_)),x=y(x+y(y(u+m)*_)),(0|g)!=(0|(r=r+1|0)););if(_=y(0xde0b6b000000000),b=s,u=d[(r=(e<<3)+t|0)-8>>2],p=d[t+4>>2],m=d[t>>2],v=d[r+-4>>2],s=y(y(u*p)-y(m*v)),b=y(b+s),y(A(b))>y(1.1920928955078125e-7)&&(_=y(y(1)/y(b*y(3)))),g=0,(0|e)<=0)break e;c=y(y(c+y(y(p+v)*s))*_),s=y(y(x+y(y(u+m)*s))*_);break t}c=d[t+4>>2],s=d[t>>2];break t}c=y(y(d[t+4>>2]+d[t+12>>2])*y(.5)),s=y(y(d[t>>2]+d[t+8>>2])*y(.5))}for(r=0;l=r<<3,d[(a+32|0)+(r<<2)>>2]=Zt(y(d[(4|l)+t>>2]-c),y(d[t+l>>2]-s)),(0|(r=r+1|0))!=(0|e););for(r=0;g=1,f[(r<<2)+a>>2]=1,(0|(r=r+1|0))!=(0|e););}if(f[(t=i<<2)+a>>2]=0,f[o>>2]=i,(0|n)>=2)for(_=y(y(6.2831854820251465)/y(0|n)),x=d[t+(a+32|0)>>2],l=1;;){if(f[o+4>>2]=i,o=o+4|0,t=i,g)for(u=(s=y(y(_*y(0|l))+x))>y(3.1415927410125732)?y(s+y(-6.2831854820251465)):s,r=0,s=y(1e9);f[(h=r<<2)+a>>2]&&(c=(c=y(A(y(d[h+(a+32|0)>>2]-u))))>y(3.1415927410125732)?y(y(6.2831854820251465)-c):c)<s&&(f[o>>2]=r,t=r,s=c),(0|(r=r+1|0))!=(0|e););if(f[(t<<2)+a>>2]=0,(0|(l=l+1|0))==(0|n))break}R=a- -64|0}function ot(e,t){var n,i=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),p=0;R=n=R+-64|0,p=f[t+192>>2],o[f[f[p>>2]+8>>2]](p,t+4|0,n+48|0,n+32|0),i=d[4962],s=y(d[n+48>>2]-i),d[n+48>>2]=s,c=y(d[n+52>>2]-i),d[n+52>>2]=c,l=y(d[n+56>>2]-i),d[n+56>>2]=l,r=y(i+d[n+32>>2]),d[n+32>>2]=r,_=y(i+d[n+36>>2]),d[n+36>>2]=_,u=y(i+d[n+40>>2]),d[n+40>>2]=u,3&h[t+204|0]|!h[e+44|0]|2!=f[t+252>>2]||(p=f[t+192>>2],o[f[f[p>>2]+8>>2]](p,t+68|0,n+16|0,n),c=y(d[n+16>>2]-i),d[n+16>>2]=c,l=y(d[n+20>>2]-i),d[n+20>>2]=l,r=y(d[n+24>>2]-i),d[n+24>>2]=r,_=y(i+d[n>>2]),d[n>>2]=_,u=y(i+d[n+4>>2]),d[n+4>>2]=u,i=y(i+d[n+8>>2]),d[n+8>>2]=i,c<(s=d[n+48>>2])&&(d[n+48>>2]=c,s=c),l<(c=d[n+52>>2])&&(d[n+52>>2]=l,c=l),r<(l=d[n+56>>2])&&(d[n+56>>2]=r,l=r),(r=d[n+28>>2])<d[n+60>>2]&&(d[n+60>>2]=r),(r=d[n+32>>2])<_&&(d[n+32>>2]=_,r=_),(_=d[n+36>>2])<u&&(d[n+36>>2]=u,_=u),(u=d[n+40>>2])<i&&(d[n+40>>2]=i,u=i),i=d[n+12>>2],d[n+44>>2]<i&&(d[n+44>>2]=i)),p=f[e+68>>2],1&a[t+204|0]||(s=y(r-s),r=y(s*s),s=y(_-c),r=y(r+y(s*s)),s=y(u-l),y(r+y(s*s))<y(999999995904))?o[f[f[p>>2]+16>>2]](p,f[t+188>>2],n+48|0,n+32|0,f[e+24>>2]):(4!=(-2&f[t+220>>2])&&(f[t+220>>2]=5),h[22552]||(t=f[e+72>>2])&&(a[22552]=1,o[f[f[t>>2]+44>>2]](t,7592),t=f[e+72>>2],o[f[f[t>>2]+44>>2]](t,7641),t=f[e+72>>2],o[f[f[t>>2]+44>>2]](t,7709),e=f[e+72>>2],o[f[f[e>>2]+44>>2]](e,7774))),R=n- -64|0}function at(e,t){var n=0,i=0;2&h[e+204|0]?(n=f[e+8>>2],f[e+68>>2]=f[e+4>>2],f[e+72>>2]=n,n=f[e+16>>2],f[e+76>>2]=f[e+12>>2],f[e+80>>2]=n,n=f[e+24>>2],f[e+84>>2]=f[e+20>>2],f[e+88>>2]=n,n=f[e+32>>2],f[e+92>>2]=f[e+28>>2],f[e+96>>2]=n,n=f[e+40>>2],f[e+100>>2]=f[e+36>>2],f[e+104>>2]=n,n=f[e+48>>2],f[e+108>>2]=f[e+44>>2],f[e+112>>2]=n,n=f[e+56>>2],f[e+116>>2]=f[e+52>>2],f[e+120>>2]=n,n=f[e+64>>2],f[e+124>>2]=f[e+60>>2],f[e+128>>2]=n):(i=f[(n=t)+4>>2],f[e+68>>2]=f[n>>2],f[e+72>>2]=i,i=f[n+12>>2],f[e+76>>2]=f[n+8>>2],f[e+80>>2]=i,i=f[n+28>>2],f[e+92>>2]=f[n+24>>2],f[e+96>>2]=i,i=f[n+20>>2],f[e+84>>2]=f[n+16>>2],f[e+88>>2]=i,i=f[n+36>>2],f[e+100>>2]=f[n+32>>2],f[e+104>>2]=i,i=f[n+44>>2],f[e+108>>2]=f[n+40>>2],f[e+112>>2]=i,i=f[n+60>>2],f[e+124>>2]=f[n+56>>2],f[e+128>>2]=i,i=f[n+52>>2],f[e+116>>2]=f[n+48>>2],f[e+120>>2]=i),n=f[e+392>>2],f[e+148>>2]=f[e+388>>2],f[e+152>>2]=n,n=f[e+376>>2],f[e+132>>2]=f[e+372>>2],f[e+136>>2]=n,n=f[e+400>>2],f[e+156>>2]=f[e+396>>2],f[e+160>>2]=n,n=f[e+384>>2],f[e+140>>2]=f[e+380>>2],f[e+144>>2]=n,n=f[t+12>>2],f[e+12>>2]=f[t+8>>2],f[e+16>>2]=n,n=f[t+4>>2],f[e+4>>2]=f[t>>2],f[e+8>>2]=n,n=f[t+28>>2],f[e+28>>2]=f[t+24>>2],f[e+32>>2]=n,n=f[t+20>>2],f[e+20>>2]=f[t+16>>2],f[e+24>>2]=n,n=f[t+44>>2],f[e+44>>2]=f[t+40>>2],f[e+48>>2]=n,n=f[t+36>>2],f[e+36>>2]=f[t+32>>2],f[e+40>>2]=n,n=f[t+60>>2],f[e+60>>2]=f[t+56>>2],f[e+64>>2]=n,n=f[t+52>>2],f[e+52>>2]=f[t+48>>2],f[e+56>>2]=n,fn(e)}function rt(e,t,n,i){var o=y(0),a=y(0),r=0,s=y(0),c=0,l=y(0),_=y(0),m=0,v=0,g=0,A=0,x=0,b=0;e:{if(h[e+60|0]){if(_=d[e+12>>2],a=d[e+44>>2],m=(o=y(y(d[n+8>>2]-_)*a))<y(4294967296)&o>=y(0)?~~o>>>0:0,s=d[e+8>>2],o=d[e+40>>2],v=(l=y(y(d[n+4>>2]-s)*o))<y(4294967296)&l>=y(0)?~~l>>>0:0,g=(a=y(y(a*y(d[i+8>>2]-_))+y(1)))<y(4294967296)&a>=y(0)?~~a>>>0:0,r=(o=y(y(o*y(d[i+4>>2]-s))+y(1)))<y(4294967296)&o>=y(0)?~~o>>>0:0,c=f[e+136>>2],b=p[(A=c+(t<<4)|0)>>1],s=d[e+4>>2],o=d[e+36>>2],n=b>>>0<=(x=65534&(e=(a=y(y(d[n>>2]-s)*o))<y(4294967296)&a>=y(0)?~~a>>>0:0))>>>0,e=(o=y(y(o*y(d[i>>2]-s))+y(1)))<y(4294967296)&o>=y(0)?~~o>>>0:0,n||(u[A>>1]=x),e|=1,p[6+(n=c+(t<<4)|0)>>1]<e>>>0&&(u[n+6>>1]=e),e=65534&v,p[n+2>>1]>e>>>0&&(u[n+2>>1]=e),e=1|r,p[8+(n=i=c+(t<<4)|0)>>1]<e>>>0&&(u[n+8>>1]=e),e=65534&m,p[i+4>>1]>e>>>0&&(u[i+4>>1]=e),e=1|g,p[10+(t=c+(t<<4)|0)>>1]>=e>>>0)break e;return void(u[t+10>>1]=e)}o=d[n>>2],r=f[e+96>>2],o<d[(e=r+(t<<6)|0)>>2]&&(d[e>>2]=o),(o=d[n+4>>2])<d[e+4>>2]&&(d[e+4>>2]=o),(o=d[n+8>>2])<d[8+(e=r+(t<<6)|0)>>2]&&(d[e+8>>2]=o),(o=d[n+12>>2])<d[e+12>>2]&&(d[e+12>>2]=o),e=r+(t<<6)|0,o=d[i>>2],d[e+16>>2]<o&&(d[e+16>>2]=o),o=d[i+4>>2],d[e+20>>2]<o&&(d[e+20>>2]=o),e=t=r+(t<<6)|0,o=d[i+8>>2],d[e+24>>2]<o&&(d[e+24>>2]=o),o=d[i+12>>2],d[t+28>>2]<o&&(d[t+28>>2]=o)}}function st(e,t){var n;R=n=R-112|0,f[n+108>>2]=e,f[n+104>>2]=t,e=f[n+108>>2],d[n+100>>2]=function(e){var t,n=y(0);return R=t=R-16|0,f[t+12>>2]=e,n=function(e,t){var n,i=y(0),o=y(0);return R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],i=d[e>>2],f[12+(t=R-16|0)>>2]=f[n+8>>2],i=y(i*d[f[t+12>>2]>>2]),o=d[e+4>>2],f[12+(t=R-16|0)>>2]=f[n+8>>2],i=y(i+y(o*d[f[t+12>>2]+4>>2])),o=d[e+8>>2],f[12+(t=R-16|0)>>2]=f[n+8>>2],R=n+16|0,y(y(i+y(o*d[f[t+12>>2]+8>>2]))+y(d[e+12>>2]*d[f[n+8>>2]+12>>2]))}(e=f[t+12>>2],e),R=t+16|0,n}(f[n+104>>2]),d[n+96>>2]=y(2)/d[n+100>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+92>>2]=d[f[t+12>>2]>>2]*d[n+96>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+88>>2]=d[f[t+12>>2]+4>>2]*d[n+96>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+84>>2]=d[f[t+12>>2]+8>>2]*d[n+96>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+80>>2]=d[f[t+12>>2]+12>>2]*d[n+92>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+76>>2]=d[f[t+12>>2]+12>>2]*d[n+88>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+72>>2]=d[f[t+12>>2]+12>>2]*d[n+84>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+68>>2]=d[f[t+12>>2]>>2]*d[n+92>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+64>>2]=d[f[t+12>>2]>>2]*d[n+88>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+60>>2]=d[f[t+12>>2]>>2]*d[n+84>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+56>>2]=d[f[t+12>>2]+4>>2]*d[n+88>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+52>>2]=d[f[t+12>>2]+4>>2]*d[n+84>>2],f[12+(t=R-16|0)>>2]=f[n+104>>2],d[n+48>>2]=d[f[t+12>>2]+8>>2]*d[n+84>>2],d[n+44>>2]=y(1)-y(d[n+56>>2]+d[n+48>>2]),d[n+40>>2]=d[n+64>>2]-d[n+72>>2],d[n+36>>2]=d[n+60>>2]+d[n+76>>2],d[n+32>>2]=d[n+64>>2]+d[n+72>>2],d[n+28>>2]=y(1)-y(d[n+68>>2]+d[n+48>>2]),d[n+24>>2]=d[n+52>>2]-d[n+80>>2],d[n+20>>2]=d[n+60>>2]-d[n+76>>2],d[n+16>>2]=d[n+52>>2]+d[n+80>>2],d[n+12>>2]=y(1)-y(d[n+68>>2]+d[n+56>>2]),Oi(e,n+44|0,n+40|0,n+36|0,n+32|0,n+28|0,n+24|0,n+20|0,n+16|0,n+12|0),R=n+112|0}function ct(e,t,n,i){var o,a,r=y(0),s=0,c=0,l=0,_=0,u=y(0),h=0,p=y(0),m=y(0),v=y(0),A=y(0),x=y(0),b=0,C=y(0),S=y(0),E=y(0);for(R=o=R-32|0,l=(c=f[e+12>>2])+g((n+i|0)/2|0,24)|0,a=f[l+20>>2],m=d[l+16>>2],C=d[l+8>>2],S=d[l+4>>2],E=d[l>>2],l=n,h=i;;){for(v=d[t>>2],u=y(E-v),r=y(u*u),A=d[t+4>>2],u=y(S-A),r=y(r+y(u*u)),x=d[t+8>>2],u=y(C-x),u=y(r+y(u*u));;){e:{s=g(l,24)+c|0;t:{if((r=d[s+16>>2])!=m){if(r<m)break t;break e}if(r=y(d[s>>2]-v),p=y(r*r),r=y(d[s+4>>2]-A),p=y(p+y(r*r)),r=y(d[s+8>>2]-x),1!=(0|((r=y(p+y(r*r)))!=u?r<u:f[s+20>>2]<(0|a))))break e}l=l+1|0;continue}break}for(;;){e:{b=g(h,24);t:{if(m!=(r=d[16+(_=b+c|0)>>2])){if(m<r)break t;break e}if(r=y(d[_>>2]-v),p=y(r*r),r=y(d[_+4>>2]-A),p=y(p+y(r*r)),r=y(d[_+8>>2]-x),1!=(0|(u!=(r=y(p+y(r*r)))?u<r:(0|a)<f[_+20>>2])))break e}h=h+-1|0;continue}break}if((0|l)<=(0|h)&&(c=f[s+20>>2],f[o+24>>2]=f[s+16>>2],f[o+28>>2]=c,c=f[s+12>>2],f[o+16>>2]=f[s+8>>2],f[o+20>>2]=c,c=f[s+4>>2],f[o+8>>2]=f[s>>2],f[o+12>>2]=c,c=f[_+4>>2],f[s>>2]=f[_>>2],f[s+4>>2]=c,c=f[_+12>>2],f[s+8>>2]=f[_+8>>2],f[s+12>>2]=c,c=f[_+20>>2],f[s+16>>2]=f[_+16>>2],f[s+20>>2]=c,c=f[o+12>>2],s=f[e+12>>2]+b|0,f[s>>2]=f[o+8>>2],f[s+4>>2]=c,_=f[o+28>>2],f[s+16>>2]=f[o+24>>2],f[s+20>>2]=_,_=f[o+20>>2],f[s+8>>2]=f[o+16>>2],f[s+12>>2]=_,h=h+-1|0,l=l+1|0),!((0|l)<=(0|h)))break;c=f[e+12>>2]}(0|h)>(0|n)&&ct(e,t,n,h),(0|l)<(0|i)&&ct(e,t,l,i),R=o+32|0}function lt(e,t,n,i,o,a,r,s,c,l,_){var u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),x=y(0),b=y(0),C=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0);x=d[(s=(s<<2)+l|0)>>2],b=y(d[l+48>>2]-d[c+48>>2]),w=d[s+16>>2],T=y(d[l+52>>2]-d[c+52>>2]),P=d[s+32>>2],I=y(d[l+56>>2]-d[c+56>>2]),p=y(y(y(x*b)+y(w*T))+y(P*I)),C=d[(r=(r<<2)+c|0)>>2],m=d[r+16>>2],g=d[r+32>>2],E=y(y(y(C*b)+y(m*T))+y(g*I)),v=y(y(y(C*x)+y(m*w))+y(g*P)),(h=y(y(1)-y(v*v)))!=y(0)&&((h=y(y(E-y(v*p))/h))<(u=y(-n))||(u=h)>n&&(u=n));e:{if((h=y(y(v*u)-p))<(p=y(-o))){if((o=y(E-y(v*o)))<(u=y(-n))){h=p;break e}if(!(o>n)){h=p,u=o;break e}o=p}else{if(!(h>o))break e;if((p=y(y(v*o)+E))<(u=y(-n))){h=o;break e}if(!(p>n)){h=o,u=p;break e}}h=o,u=n}if(p=y(P*h),n=y(p+y(I-y(g*u))),v=y(x*h),o=y(v+y(b-y(C*u))),h=y(w*h),u=y(h+y(T-y(m*u))),E=y(y(n*n)+y(y(o*o)+y(u*u))),x=y(S(E)),!((b=y(y(x-i)-a))>_)){e:if(E<=y(14210854715202004e-30)){if(y(A(g))>y(.7071067690849304)){f[e>>2]=0,i=y(y(1)/y(S(y(y(m*m)+y(g*g))))),n=y(m*i),d[e+8>>2]=n,u=y(i*y(-g)),d[e+4>>2]=u,i=y(0);break e}f[e+8>>2]=0,n=y(y(1)/y(S(y(y(C*C)+y(m*m))))),u=y(C*n),d[e+4>>2]=u,i=y(n*y(-m)),d[e>>2]=i,n=y(0)}else f[e+12>>2]=0,i=y(y(-1)/x),n=y(n*i),d[e+8>>2]=n,u=y(u*i),d[e+4>>2]=u,i=y(o*i),d[e>>2]=i;o=d[l+48>>2],_=d[l+52>>2],m=d[l+56>>2],f[t+12>>2]=0,d[t+8>>2]=y(p+m)+y(n*a),d[t+4>>2]=y(h+_)+y(u*a),d[t>>2]=y(v+o)+y(i*a)}return b}function _t(e,t){var n,i=0,o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0;R=n=R-32|0;e:if(!((0|(t=(0|t)<=-1?f[e+12>>2]:t))<1)&&(o=f[e>>2]))for(;;){if(l=0,f[(r=o+40|0)>>2])for(;(a=f[o+32>>2])>>>0<=o>>>0?a=o:(s=(0|(i=f[a+40>>2]))==(0|o),u=f[36+((_=((0|o)!=(0|i))<<2)+a|0)>>2],c=e,(i=f[a+32>>2])&&(c=36+(i+((f[i+40>>2]==(0|a))<<2)|0)|0),f[c>>2]=o,f[u+32>>2]=o,f[a+32>>2]=o,f[o+32>>2]=i,f[a+36>>2]=f[o+36>>2],f[a+40>>2]=f[r>>2],f[f[o+36>>2]+32>>2]=a,f[f[r>>2]+32>>2]=a,f[(i=o+36|0)+(s<<2)>>2]=a,f[i+_>>2]=u,r=f[4+(i=a+24|0)>>2],f[n+24>>2]=f[i>>2],f[n+28>>2]=r,r=f[4+(i=a+16|0)>>2],f[n+16>>2]=f[i>>2],f[n+20>>2]=r,r=f[4+(i=a+8|0)>>2],f[n+8>>2]=f[i>>2],f[n+12>>2]=r,i=f[a+4>>2],f[n>>2]=f[a>>2],f[n+4>>2]=i,r=f[4+(i=o+24|0)>>2],f[a+24>>2]=f[i>>2],f[a+28>>2]=r,r=f[4+(i=o+16|0)>>2],f[a+16>>2]=f[i>>2],f[a+20>>2]=r,r=f[4+(i=o+8|0)>>2],f[a+8>>2]=f[i>>2],f[a+12>>2]=r,i=f[o+4>>2],f[a>>2]=f[o>>2],f[a+4>>2]=i,i=f[n+28>>2],f[o+24>>2]=f[n+24>>2],f[o+28>>2]=i,i=f[n+20>>2],f[o+16>>2]=f[n+16>>2],f[o+20>>2]=i,i=f[n+12>>2],f[o+8>>2]=f[n+8>>2],f[o+12>>2]=i,i=f[n+4>>2],f[o>>2]=f[n>>2],f[o+4>>2]=i),o=f[e+16>>2]>>>l|0,l=l+1&31,o=f[36+(((1&o)<<2)+a|0)>>2],f[(r=o+40|0)>>2];);if(c=a=e,s=0,Wt(a,o)&&(s=f[e>>2]),Ge(c,s,o),f[e+16>>2]=f[e+16>>2]+1,!(t=t+-1|0))break e;o=f[e>>2]}R=n+32|0}function ut(e,t,n,i){var o,a=0,r=0,s=0,c=0,l=0,_=0,u=0;R=o=R-16|0;e:if((a=n-t|0)>>>0<=2){switch(a-1|0){default:f[i>>2]=0,f[i+4>>2]=0,f[i+8>>2]=0,f[i+12>>2]=0;break e;case 1:if(a=f[f[e+92>>2]+(t<<2)>>2],t=f[a+204>>2],(0|(c=f[a+88>>2]))!=(0|(s=f[a+200>>2]))|(0|(r=f[a+92>>2]))!=(0|t)||(t=r,f[a+96>>2]!=f[a+208>>2])){n=a+112|0,(t=r-t|0)|(r=c-s|0)?(f[a+4>>2]=n,f[a>>2]=n,f[a+116>>2]=a,f[a+112>>2]=a,s=(c=(0|t)<0)&!r,s|=r=(0|r)<0,f[i+4>>2]=s?n:a,f[i>>2]=s?a:n,r&!t||c?(f[i+8>>2]=a,t=n):(f[i+8>>2]=n,t=a)):(r=f[a+96>>2]>f[a+208>>2],f[(t=r?n:a)+4>>2]=t,f[t>>2]=t,f[i+8>>2]=t,f[i+4>>2]=t,f[i>>2]=t,n=r?a:n,a=t),f[i+12>>2]=t,e=wt(e,a,n),f[e+4>>2]=e,f[e>>2]=e,f[a+8>>2]=e,e=f[e+8>>2],f[e+4>>2]=e,f[e>>2]=e,f[n+8>>2]=e;break e}f[a+8>>2]=0,f[a+4>>2]=a,f[a>>2]=a,f[i+12>>2]=a,f[i+8>>2]=a,f[i+4>>2]=a,f[i>>2]=a;break e;case 0:}e=f[f[e+92>>2]+(t<<2)>>2],f[e+8>>2]=0,f[e+4>>2]=e,f[e>>2]=e,f[i+12>>2]=e,f[i+8>>2]=e,f[i+4>>2]=e,f[i>>2]=e}else{t:if(!((0|(a=r=((0|a)/2|0)+t|0))>=(0|n))){for(s=f[e+92>>2],a=f[(s+(r<<2)|0)-4>>2],l=f[a+88>>2],_=f[a+96>>2],u=f[a+92>>2],a=r;;){if(c=f[(a<<2)+s>>2],(0|l)!=f[c+88>>2]|(0|u)!=f[c+92>>2]|(0|_)!=f[c+96>>2])break t;if(!((0|(a=a+1|0))<(0|n)))break}a=n}ut(e,t,r,i),f[o+8>>2]=0,f[o+12>>2]=0,f[o>>2]=0,f[o+4>>2]=0,ut(e,a,n,o),function(e,t,n){var i,o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0,p=0,m=0,d=0,v=0,y=0,A=0,x=0,b=0,C=0,S=0,E=0,w=0,T=0,P=0,I=0,D=0,O=0,z=0,L=0,F=0,U=0;R=i=R-128|0;t:if(f[n+4>>2])if(f[t+4>>2]){if(f[e+100>>2]=f[e+100>>2]+-1,f[i+124>>2]=0,f[i+120>>2]=0,function(e,t,n,i){var o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0,p=0,m=0,d=0,v=0,y=0,A=0,x=0,b=0,C=0,S=0;a=f[e+12>>2],u=f[t+8>>2];n:{if(!(f[a+88>>2]!=f[u+88>>2]|f[a+92>>2]!=f[u+92>>2])){if((0|(o=f[u+4>>2]))==(0|u)){if(f[n>>2]=a,e=0,!(t=f[u+8>>2]))break n;return f[i>>2]=f[t+12>>2],0}a=f[u>>2],f[o>>2]=a,f[a+4>>2]=o,f[t>>2]==(0|u)&&(_=t,c=a,(0|(l=f[a+88>>2]))<(0|(r=f[o+88>>2]))|(f[a+92>>2]<f[o+92>>2]?(0|r)==(0|l):0)||(c=o),f[_>>2]=c),f[t+4>>2]==(0|u)&&(l=f[a+88>>2],(0|(r=f[o+88>>2]))!=(0|l)|f[a+92>>2]<=f[o+92>>2]&&(0|l)<=(0|r)?f[t+4>>2]=o:f[t+4>>2]=a)}for(A=f[t>>2],C=f[e>>2],r=S=f[e+4>>2],o=x=f[t+4>>2],l=0,a=0,c=1;;){d=s,u=a,b=l,_=f[r+88>>2];i:if((0|(s=g(f[o+88>>2]-_|0,c)))>=1)for(l=r;;){for(a=o,_=f[o+92>>2],r=s;p=_-(s=f[l+92>>2])|0,!((0|(o=f[(m=!d<<2)+l>>2]))==(0|l)||(0|(h=f[o+92>>2]-s|0))>0||(v=f[o+88>>2],(0|(s=g(v-f[l+88>>2]|0,c)))>-1|(0|g(r,h))>(0|g(s,p))&&s));)r=g(f[a+88>>2]-v|0,c),l=o;if((0|a)==(0|(o=f[a+m>>2])))break i;if((0|(m=f[o+92>>2]-_|0))>-1)break i;if(_=f[o+88>>2],(0|(s=g(_-f[l+88>>2]|0,c)))<1)break i;if(_=g(_-f[a+88>>2]|0,c)){if((0|_)>-1)break i;if(!((0|g(r,m))<(0|g(_,p))))break}}else if((0|s)<=-1){o:for(;;){for(p=f[o+92>>2],a=f[(v=(0!=(0|d))<<2)+o>>2];;){if(_=s,l=r,m=p-(s=f[r+92>>2])|0,(0|o)!=(0|a)&&!((0|(h=f[a+92>>2]-p|0))<0||(y=f[a+88>>2],(0|(r=g(y-f[o+88>>2]|0,c)))>-1|(0|g(_,h))>(0|g(r,m))&&r))){s=g(y-f[l+88>>2]|0,c),o=a,r=l;continue o}if((0|l)==(0|(r=f[l+v>>2]))){a=o;break i}if((0|(y=f[r+92>>2]-s|0))<1){a=o;break i}if(h=f[r+88>>2],(0|(s=g(f[o+88>>2]-h|0,c)))>-1){a=o;break i}if(h=g(h-f[l+88>>2]|0,c)){if((0|h)>-1){a=o;break i}if(!((0|g(_,y))<(0|g(h,m))))break}}break}a=o}else{for(s=f[r+92>>2],c=r;l=c,!((0|(c=f[(!d<<2)+c>>2]))==(0|r)|(0|_)!=f[c+88>>2])&&(p=(0|(a=f[c+92>>2]))<=(0|s),s=a,p););for(s=f[o+92>>2],c=o;;){if((0|(c=f[(a=c)+((0!=(0|d))<<2)>>2]))==(0|o)|(0|_)!=f[c+88>>2])break i;if(p=(0|(r=f[c+92>>2]))>=(0|s),s=r,!p)break}}if(s=1,c=-1,r=C,o=A,d)break}f[l+4>>2]=a,f[a>>2]=l,f[b>>2]=u,f[u+4>>2]=b,f[A+88>>2]<f[C+88>>2]&&(f[e>>2]=A),f[x+88>>2]>=f[S+88>>2]&&(f[e+4>>2]=x),f[e+12>>2]=f[t+12>>2],f[n>>2]=b,e=1}return f[i>>2]=u,e}(t,n,i+124|0,i+120|0)){if(S=f[i+124>>2],_=f[S+92>>2],y=f[i+120>>2],u=f[y+92>>2],A=f[S+96>>2],d=f[y+96>>2],v=f[S+88>>2],I=f[y+88>>2],f[i+92>>2]=-1,n=d-A|0,f[i+88>>2]=n,r=u-_|0,f[i+84>>2]=r,c=I-v|0,f[i+80>>2]=c,t=f[S+8>>2],f[i+32>>2]=0,o=n,s=r,b=Gs(n,T=n>>31,r,p=r>>31),z=N,a=n=0-c|0,n=Gs(n,l=n>>31,c,c>>31),r=N,c=n-(P=Gs(s,p,s,p))|0,P=r-(N+(n>>>0<P>>>0)|0)|0,T=0-(n=Gs(o,T,a,l))|0,L=0-(N+(0<n>>>0)|0)|0,t){for(n=t;o=f[n+12>>2],m=Gs(x=r=f[o+92>>2]-_|0,r>>=31,a,l),E=N,(0|m)!=(0-(U=Gs(s,p,F=m=f[o+88>>2]-v|0,m>>=31))|0)|(0-(N+(0<U>>>0)|0)|0)!=(0|E)||(r=Gs(b,z,x,r),E=N,x=(m=Gs(F,m,T,L))+r|0,r=N+E|0,r=x>>>0<m>>>0?r+1|0:r,m=Gs(c,P,o=f[o+96>>2]-A|0,o>>31),o=N+r|0,(0|(o=(x=m+x|0)>>>0<m>>>0?o+1|0:o))<0||(0|o)<=0&&!(x>>>0>=1)||h&&(f[i+64>>2]=-1,f[i+68>>2]=-1,f[i+56>>2]=0,f[i+60>>2]=0,1!=(0|hn(h,n,i+80|0,i+56|0)))||(h=n)),(0|t)!=(0|(n=f[n>>2])););f[i+32>>2]=h}if(r=f[y+8>>2],t=0,f[i+8>>2]=0,r){for(n=r;_=f[n+12>>2],v=Gs(A=o=f[_+92>>2]-u|0,o>>=31,a,l),x=N,(0|v)!=(0-(E=Gs(s,p,m=v=f[_+88>>2]-I|0,v=m>>31))|0)|(0-(N+(0<E>>>0)|0)|0)!=(0|x)||(o=Gs(b,z,A,o),x=N,A=(v=Gs(m,v,T,L))+o|0,o=N+x|0,o=A>>>0<v>>>0?o+1|0:o,m=A,A=Gs(c,P,_=f[_+96>>2]-d|0,_>>31),o=N+o|0,(0|(o=(_=m+A|0)>>>0<A>>>0?o+1|0:o))<0||(0|o)<=0&&!(_>>>0>=1)||t&&(f[i+64>>2]=-1,f[i+68>>2]=-1,f[i+56>>2]=0,f[i+60>>2]=0,2!=(0|hn(t,n,i+80|0,i+56|0)))||(t=n)),(0|r)!=(0|(n=f[n>>2])););f[i+8>>2]=t}t|h&&(M(e,S,y,i+32|0,i+8|0),(t=f[i+32>>2])&&(S=f[t+12>>2],f[i+124>>2]=S),(t=f[i+8>>2])&&(y=f[t+12>>2],f[i+120>>2]=y)),v=f[y+96>>2]+1|0,I=f[y+88>>2],A=f[y+92>>2]}else y=f[i+120>>2],I=f[y+88>>2]+1|0,v=f[y+96>>2],S=f[i+124>>2],A=f[y+92>>2];for(n=y,t=S,p=0,h=0,z=1,l=0,r=0;;){o=f[n+96>>2],a=f[t+96>>2],_=f[t+92>>2],s=f[n+92>>2],d=f[t+88>>2],c=f[n+88>>2],f[i+116>>2]=-1,s=s-_|0,f[i+108>>2]=s,o=o-a|0,f[i+112>>2]=o,c=c-d|0,f[i+104>>2]=c,a=v-a|0,u=(b=g(_=A-_|0,o)-g(a,s)|0)>>31,P=b,f[i+80>>2]=b,f[i+84>>2]=u,d=(b=(m=g(a,c))-g(a=I-d|0,o)|0)>>31,T=b,f[i+88>>2]=b,f[i+92>>2]=d,b=(a=g(a,s)-g(c,_)|0)>>31,L=a,f[i+96>>2]=a,f[i+100>>2]=b,c=Gs(T,d,a=c,x=a>>31),m=N,_=s,s=Gs(P,u,s,E=s>>31),f[i+72>>2]=c-s,f[i+76>>2]=m-(N+(c>>>0<s>>>0)|0),s=o,o=Gs(P,u,o,c=o>>31),u=N,a=Gs(L,b,a,x),f[i+64>>2]=o-a,f[i+68>>2]=u-(N+(o>>>0<a>>>0)|0),o=Gs(L,b,_,E),a=N,s=Gs(s,c,T,d),f[i+56>>2]=o-s,f[i+60>>2]=a-(N+(o>>>0<s>>>0)|0),f[i+48>>2]=0,f[i+40>>2]=0,f[i+44>>2]=0,f[i+32>>2]=0,f[i+36>>2]=0,d=qe(e,0,t,i+104|0,i+80|0,i+56|0,i+32|0),f[i+24>>2]=0,f[i+16>>2]=0,f[i+20>>2]=0,f[i+8>>2]=0,f[i+12>>2]=0;n:if((u=qe(e,1,n,i+104|0,i+80|0,i+56|0,i+8|0))|d){_=d?-1:1,!d|!u||(_=Ct(i+32|0,i+8|0));i:{o:if(!z){a:{if((0|_)>=0){if(f[i+24>>2]>-1)break o;if(!(f[i+16>>2]|f[i+20>>2]))break a;break o}if(f[i+40>>2]|f[i+44>>2]|f[i+48>>2]>-1)break o}a=p,s=h,c=l,o=r;break i}o=c=wt(e,t,n),l&&(f[l+4>>2]=c,o=r),f[c>>2]=l,s=a=f[c+8>>2],p&&(f[p>>2]=a,s=h),f[a+4>>2]=p}if(f[i+4>>2]=d,f[i>>2]=u,p=u,_||(M(e,f[i+124>>2],f[i+120>>2],i+4|0,i),p=f[i>>2]),t=a,!((0|_)<0)&&(t=a,p)){i:{o:{a:{if(C){if((0|u)!=(0|(n=f[C>>2])))for(;l=f[n+8>>2],r=0,t=0,(0|(h=f[n>>2]))!=(0|n)&&(f[h+4>>2]=f[n+4>>2],f[f[n+4>>2]>>2]=h,t=h),f[f[l+12>>2]+8>>2]=t,(0|(t=f[l>>2]))!=(0|l)&&(f[t+4>>2]=f[l+4>>2],f[f[l+4>>2]>>2]=t,r=t),f[f[n+12>>2]+8>>2]=r,f[n+12>>2]=0,f[n+16>>2]=0,f[n+4>>2]=0,f[n+8>>2]=0,f[n>>2]=f[e+56>>2],f[e+56>>2]=n,f[l+12>>2]=0,f[l+16>>2]=0,f[l+4>>2]=0,f[l+8>>2]=0,f[l>>2]=f[e+56>>2],f[e+56>>2]=l,f[e+116>>2]=f[e+116>>2]+-1,(0|u)!=(0|(n=h)););if(a)break a;break o}if(!a)break o;C=f[u+4>>2],D=s}f[C>>2]=s,f[s+4>>2]=C,f[a>>2]=u,f[u+4>>2]=a,s=0,p=f[i>>2];break i}D=C?D:u}t=f[i+120>>2],v=f[t+96>>2],A=f[t+92>>2],I=f[t+88>>2],f[i+120>>2]=f[p+12>>2],C=f[p+8>>2],t=0}if(p=t,(0|_)<=0&&(a=f[i+4>>2])){i:{o:{a:{r:{if(w){if((0|d)!=(0|(t=f[w+4>>2])))for(;h=t+4|0,u=f[t+8>>2],l=f[t+4>>2],n=0,_=0,(0|(r=f[t>>2]))!=(0|t)&&(f[r+4>>2]=l,f[f[h>>2]>>2]=r,_=r),f[f[u+12>>2]+8>>2]=_,(0|(r=f[u>>2]))!=(0|u)&&(f[r+4>>2]=f[u+4>>2],f[f[u+4>>2]>>2]=r,n=r),f[f[t+12>>2]+8>>2]=n,f[(n=h)+8>>2]=0,f[n+12>>2]=0,f[n>>2]=0,f[n+4>>2]=0,f[t>>2]=f[e+56>>2],f[e+56>>2]=t,f[u+12>>2]=0,f[u+16>>2]=0,f[u+4>>2]=0,f[u+8>>2]=0,f[u>>2]=f[e+56>>2],f[e+56>>2]=u,f[e+116>>2]=f[e+116>>2]+-1,(0|d)!=(0|(t=l)););if(!c)break r;f[o>>2]=w,t=w+4|0;break o}if(c)break a}O=w?O:d;break i}t=f[d>>2],f[o>>2]=t,O=o,t=t+4|0}f[t>>2]=o,f[d>>2]=c,f[c+4>>2]=d,o=0,a=f[i+4>>2]}t=f[i+124>>2],v=f[t+96>>2],A=f[t+92>>2],I=f[t+88>>2],t=f[a+12>>2],f[i+124>>2]=t,w=f[a+8>>2],c=0}else t=f[i+124>>2];if(n=1,(0|t)!=(0|S)|f[i+120>>2]!=(0|y))z=0;else{if(w){if((0|O)!=(0|(t=f[w+4>>2])))for(;h=t+4|0,l=f[t+8>>2],a=f[t+4>>2],n=0,_=0,(0|(r=f[t>>2]))!=(0|t)&&(f[r+4>>2]=a,f[f[h>>2]>>2]=r,_=r),f[f[l+12>>2]+8>>2]=_,(0|(r=f[l>>2]))!=(0|l)&&(f[r+4>>2]=f[l+4>>2],f[f[l+4>>2]>>2]=r,n=r),f[f[t+12>>2]+8>>2]=n,f[(n=h)+8>>2]=0,f[n+12>>2]=0,f[n>>2]=0,f[n+4>>2]=0,f[t>>2]=f[e+56>>2],f[e+56>>2]=t,f[l+12>>2]=0,f[l+16>>2]=0,f[l+4>>2]=0,f[l+8>>2]=0,f[l>>2]=f[e+56>>2],f[e+56>>2]=l,f[e+116>>2]=f[e+116>>2]+-1,(0|O)!=(0|(t=a)););c&&(f[o>>2]=w,f[w+4>>2]=o,f[O>>2]=c,f[c+4>>2]=O)}else f[o>>2]=c,f[c+4>>2]=o,f[f[i+124>>2]+8>>2]=c;if(!C){f[p>>2]=s,f[s+4>>2]=p,f[f[i+120>>2]+8>>2]=p,C=0,h=s,l=c,r=o,n=0;break n}if((0|D)!=(0|(n=f[C>>2])))for(;a=f[n+8>>2],r=0,t=0,(0|(h=f[n>>2]))!=(0|n)&&(f[h+4>>2]=f[n+4>>2],f[f[n+4>>2]>>2]=h,t=h),f[f[a+12>>2]+8>>2]=t,(0|(t=f[a>>2]))!=(0|a)&&(f[t+4>>2]=f[a+4>>2],f[f[a+4>>2]>>2]=t,r=t),f[f[n+12>>2]+8>>2]=r,f[n+12>>2]=0,f[n+16>>2]=0,f[n+4>>2]=0,f[n+8>>2]=0,f[n>>2]=f[e+56>>2],f[e+56>>2]=n,f[a+12>>2]=0,f[a+16>>2]=0,f[a+4>>2]=0,f[a+8>>2]=0,f[a>>2]=f[e+56>>2],f[e+56>>2]=a,f[e+116>>2]=f[e+116>>2]+-1,(0|D)!=(0|(n=h)););n=0,p?(f[C>>2]=s,f[s+4>>2]=C,f[p>>2]=D,f[D+4>>2]=p):p=0}h=s,l=c,r=o}else s=wt(e,t,n),f[s+4>>2]=s,f[s>>2]=s,f[t+8>>2]=s,t=f[s+8>>2],f[t+4>>2]=t,f[t>>2]=t,f[n+8>>2]=t,n=0;if(!n)break t;t=f[i+124>>2],n=f[i+120>>2]}}else e=f[n+4>>2],f[t>>2]=f[n>>2],f[t+4>>2]=e,e=f[n+12>>2],f[t+8>>2]=f[n+8>>2],f[t+12>>2]=e;R=i+128|0}(e,i,o)}R=o+16|0}function ft(e){var t,n=0,i=0,r=0,s=0,c=0,l=0,_=0,u=0;if(!((0|(t=f[e+32>>2]))>=(0|(i=f[e+12>>2])))){e:if(f[e+36>>2]>=(0|i))n=f[e+40>>2];else{r=t,i&&(f[6257]=f[6257]+1,n=0|o[f[4968]](i<<2,16),r=f[e+32>>2]),c=f[e+40>>2];t:{if((0|r)>=1)for(;;)if(f[(l=s<<2)+n>>2]=f[c+l>>2],(0|(s=s+1|0))==(0|r))break t;if(!c){f[e+40>>2]=n,f[e+36>>2]=i,a[e+44|0]=1;break e}}h[e+44|0]&&c&&(f[6258]=f[6258]+1,o[f[4969]](c)),f[e+40>>2]=n,a[e+44|0]=1,f[e+36>>2]=i}if(dn((r=t<<2)+n|0,0,(l=i<<2)-r|0),f[e+32>>2]=i,(0|(c=f[e+52>>2]))<(0|i)){e:if(f[e+56>>2]>=(0|i))n=f[e+60>>2];else{s=0,r=c,n=0,i&&(f[6257]=f[6257]+1,n=0|o[f[4968]](l,16),r=f[e+52>>2]),_=f[e+60>>2];t:{if((0|r)>=1)for(;;)if(f[(u=s<<2)+n>>2]=f[_+u>>2],(0|(s=s+1|0))==(0|r))break t;if(!_){f[e+60>>2]=n,f[e+56>>2]=i,a[e- -64|0]=1;break e}}h[e- -64|0]&&_&&(f[6258]=f[6258]+1,o[f[4969]](_)),f[e+60>>2]=n,a[e+64|0]=1,f[e+56>>2]=i}dn((r=c<<2)+n|0,0,l-r|0)}if(f[e+52>>2]=i,(0|i)>=1&&(dn(f[e+40>>2],255,l),dn(f[e+60>>2],255,l)),!((0|t)<1))for(r=f[e+60>>2],c=f[e+16>>2],i=f[e+40>>2],s=0;n=f[f[4+(n=c+(s<<4)|0)>>2]+12>>2]<<16|f[f[n>>2]+12>>2],n=g((n=(n<<15^-1)+n|0)>>>10^n,9),n=((n^=n>>>6)<<11^-1)+n|0,n=i+((f[e+12>>2]+-1&(n>>>16^n))<<2)|0,f[r+(s<<2)>>2]=f[n>>2],f[n>>2]=s,(0|t)!=(0|(s=s+1|0)););}}function ht(e,t){var n=0,i=0,r=0,s=0,c=0,l=0,_=0,u=0;if(c=i=f[e+4>>2],(0|i)==f[e+8>>2]&&(c=i,!((0|i)>=(0|(l=i?i<<1:1))))){if(l?(f[6257]=f[6257]+1,u=0|o[f[4968]](g(l,244),16),c=f[e+4>>2]):c=i,(0|c)>=1)for(;r=(n=g(_,244))+u|0,n=n+f[e+12>>2]|0,s=f[n+4>>2],f[r>>2]=f[n>>2],f[r+4>>2]=s,s=f[n+12>>2],f[r+8>>2]=f[n+8>>2],f[r+12>>2]=s,s=f[n+28>>2],f[r+24>>2]=f[n+24>>2],f[r+28>>2]=s,s=f[n+20>>2],f[r+16>>2]=f[n+16>>2],f[r+20>>2]=s,s=f[n+44>>2],f[r+40>>2]=f[n+40>>2],f[r+44>>2]=s,s=f[n+36>>2],f[r+32>>2]=f[n+32>>2],f[r+36>>2]=s,s=f[n+52>>2],f[r+48>>2]=f[n+48>>2],f[r+52>>2]=s,s=f[n+60>>2],f[r+56>>2]=f[n+56>>2],f[r+60>>2]=s,It(r- -64|0,n- -64|0,180),(0|c)!=(0|(_=_+1|0)););(c=f[e+12>>2])&&(h[e+16|0]&&c&&(f[6258]=f[6258]+1,o[f[4969]](c)),f[e+12>>2]=0),f[e+12>>2]=u,a[e+16|0]=1,f[e+8>>2]=l,c=f[e+4>>2]}return f[e+4>>2]=c+1,r=f[t+12>>2],i=(c=g(i,244))+f[e+12>>2]|0,f[(n=i)+8>>2]=f[t+8>>2],f[n+12>>2]=r,n=f[t+4>>2],f[i>>2]=f[t>>2],f[i+4>>2]=n,n=f[t+28>>2],f[i+24>>2]=f[t+24>>2],f[i+28>>2]=n,n=f[t+20>>2],f[i+16>>2]=f[t+16>>2],f[i+20>>2]=n,n=f[t+36>>2],f[i+32>>2]=f[t+32>>2],f[i+36>>2]=n,n=f[t+44>>2],f[i+40>>2]=f[t+40>>2],f[i+44>>2]=n,n=f[t+52>>2],f[i+48>>2]=f[t+48>>2],f[i+52>>2]=n,n=f[t+60>>2],f[i+56>>2]=f[t+56>>2],f[i+60>>2]=n,It(i- -64|0,t- -64|0,180),c+f[e+12>>2]|0}function pt(e){var t,n=0,i=0,r=0,s=0,c=0,l=0,_=0,u=0;if(!((0|(t=f[e+28>>2]))>=(0|(i=f[e+12>>2])))){e:if(f[e+32>>2]>=(0|i))n=f[e+36>>2];else{r=t,i&&(f[6257]=f[6257]+1,n=0|o[f[4968]](i<<2,16),r=f[e+28>>2]),c=f[e+36>>2];t:{if((0|r)>=1)for(;;)if(f[(l=s<<2)+n>>2]=f[c+l>>2],(0|(s=s+1|0))==(0|r))break t;if(!c){f[e+36>>2]=n,f[e+32>>2]=i,a[e+40|0]=1;break e}}h[e+40|0]&&c&&(f[6258]=f[6258]+1,o[f[4969]](c)),f[e+36>>2]=n,a[e+40|0]=1,f[e+32>>2]=i}if(dn((r=t<<2)+n|0,0,(l=i<<2)-r|0),f[e+28>>2]=i,(0|(c=f[e+48>>2]))<(0|i)){e:if(f[e+52>>2]>=(0|i))n=f[e+56>>2];else{s=0,r=c,n=0,i&&(f[6257]=f[6257]+1,n=0|o[f[4968]](l,16),r=f[e+48>>2]),_=f[e+56>>2];t:{if((0|r)>=1)for(;;)if(f[(u=s<<2)+n>>2]=f[_+u>>2],(0|(s=s+1|0))==(0|r))break t;if(!_){f[e+56>>2]=n,f[e+52>>2]=i,a[e+60|0]=1;break e}}h[e+60|0]&&_&&(f[6258]=f[6258]+1,o[f[4969]](_)),f[e+56>>2]=n,a[e+60|0]=1,f[e+52>>2]=i}dn((r=c<<2)+n|0,0,l-r|0)}if(f[e+48>>2]=i,(0|i)>=1&&(dn(f[e+36>>2],255,l),dn(f[e+56>>2],255,l)),!((0|t)<1))for(r=f[e+56>>2],c=f[e+16>>2],i=f[e+36>>2],s=0;n=c+g(s,12)|0,n=f[n+4>>2]<<16|f[n>>2],n=g((n=(n<<15^-1)+n|0)>>>10^n,9),n=((n^=n>>>6)<<11^-1)+n|0,n=i+((f[e+12>>2]+-1&(n>>>16^n))<<2)|0,f[r+(s<<2)>>2]=f[n>>2],f[n>>2]=s,(0|t)!=(0|(s=s+1|0)););}}function mt(e,t,n,i,o,a,r,s,c,l){var _=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=0,w=y(0),T=y(0),P=y(0),I=y(0),R=y(0),N=y(0),D=y(0);E=f[a+4>>2],f[e>>2]=f[a>>2],f[e+4>>2]=E,E=f[a+12>>2],f[e+8>>2]=f[a+8>>2],f[e+12>>2]=E,S=d[t+24>>2],A=d[t+20>>2],p=d[t+40>>2],u=d[t+36>>2],x=d[t+8>>2],b=d[t>>2],w=d[t+4>>2],T=d[t+16>>2],_=d[t+32>>2],v=d[i+4>>2],m=d[i+8>>2],C=d[i>>2],f[e+28>>2]=0,P=_,_=d[e+8>>2],h=d[e+4>>2],g=y(y(v*_)-y(m*h)),I=u,R=m,m=d[e>>2],u=y(y(R*m)-y(_*C)),v=y(y(h*C)-y(v*m)),C=y(y(y(P*g)+y(I*u))+y(p*v)),d[e+24>>2]=C,S=y(y(y(g*T)+y(u*A))+y(v*S)),d[e+20>>2]=S,v=y(y(y(g*b)+y(w*u))+y(v*x)),d[e+16>>2]=v,x=d[n+24>>2],b=d[n+20>>2],w=d[n+40>>2],T=d[n+36>>2],N=d[n+8>>2],D=d[n>>2],P=d[n+4>>2],I=d[n+16>>2],p=d[n+32>>2],g=d[o+4>>2],u=d[o>>2],A=d[o+8>>2],f[e+44>>2]=0,R=p,p=y(y(h*A)-y(_*g)),_=y(y(_*u)-y(m*A)),h=y(y(m*g)-y(h*u)),m=y(y(y(R*p)+y(T*_))+y(w*h)),d[e+40>>2]=m,g=y(y(y(p*I)+y(_*b))+y(h*x)),d[e+36>>2]=g,_=y(y(y(D*p)+y(P*_))+y(h*N)),d[e+32>>2]=_,h=d[r+8>>2],u=d[r+4>>2],A=d[r>>2],f[e+60>>2]=0,A=y(A*v),d[e+48>>2]=A,u=y(u*S),d[e+52>>2]=u,h=y(h*C),d[e+56>>2]=h,p=d[c+8>>2],x=d[c+4>>2],b=d[c>>2],f[e+76>>2]=0,b=y(b*_),d[e+64>>2]=b,x=y(x*g),d[e+68>>2]=x,p=y(p*m),d[e+72>>2]=p,d[e+80>>2]=y(y(y(y(y(v*A)+y(S*u))+y(C*h))+s)+l)+y(y(y(_*b)+y(g*x))+y(m*p))}function dt(e,t,n){var i,o=0;return R=i=R-256|0,(0|(o=f[t+212>>2]))>-1||(2&(o=f[t+252>>2])&&(2&h[204+(o=o<<30>>31&t)|0]||d[o+404>>2]!=y(0))?(o=f[e+8>>2],dn(i+8|0,0,244),function(e,t,n){var i=0,o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0);t=t?f[t+252>>2]<<30>>31&t:0,f[e+64>>2]=0,f[e+68>>2]=0,f[e+144>>2]=0,f[e+148>>2]=0,f[e+88>>2]=0,f[e+92>>2]=0,f[e+80>>2]=0,f[e+84>>2]=0,f[e+72>>2]=0,f[e+76>>2]=0,f[e+152>>2]=0,f[e+156>>2]=0,f[e+160>>2]=0,f[e+164>>2]=0,f[e+168>>2]=0,f[e+172>>2]=0,t?(i=f[t+8>>2],f[e>>2]=f[t+4>>2],f[e+4>>2]=i,i=f[t+16>>2],f[e+8>>2]=f[t+12>>2],f[e+12>>2]=i,i=f[t+32>>2],f[e+24>>2]=f[t+28>>2],f[e+28>>2]=i,i=f[t+24>>2],f[e+16>>2]=f[t+20>>2],f[e+20>>2]=i,i=f[t+48>>2],f[e+40>>2]=f[t+44>>2],f[e+44>>2]=i,i=f[t+40>>2],f[e+32>>2]=f[t+36>>2],f[e+36>>2]=i,i=f[t+64>>2],f[e+56>>2]=f[t+60>>2],f[e+60>>2]=i,i=f[t+56>>2],f[e+48>>2]=f[t+52>>2],f[e+52>>2]=i,a=d[t+412>>2],r=d[t+416>>2],s=d[t+408>>2],o=d[t+404>>2],f[e+240>>2]=t,f[e+140>>2]=0,d[e+136>>2]=o*r,d[e+132>>2]=o*a,d[e+128>>2]=o*s,i=f[t+616>>2],f[e+104>>2]=f[t+612>>2],f[e+108>>2]=i,i=f[t+608>>2],f[e+96>>2]=f[t+604>>2],f[e+100>>2]=i,i=f[t+420>>2],f[e+120>>2]=f[t+416>>2],f[e+124>>2]=i,i=f[t+412>>2],f[e+112>>2]=f[t+408>>2],f[e+116>>2]=i,i=f[t+384>>2],f[e+184>>2]=f[t+380>>2],f[e+188>>2]=i,i=f[t+376>>2],f[e+176>>2]=f[t+372>>2],f[e+180>>2]=i,i=f[t+400>>2],f[e+200>>2]=f[t+396>>2],f[e+204>>2]=i,i=f[t+392>>2],f[e+192>>2]=f[t+388>>2],f[e+196>>2]=i,a=d[t+476>>2],r=d[t+480>>2],s=d[t+472>>2],o=d[t+404>>2],f[e+220>>2]=0,d[e+216>>2]=y(o*r)*n,d[e+212>>2]=y(o*a)*n,d[e+208>>2]=y(o*s)*n,s=d[t+340>>2],c=d[t+356>>2],l=d[t+328>>2],_=d[t+344>>2],u=d[t+360>>2],h=d[t+324>>2],o=d[t+488>>2],a=d[t+492>>2],r=d[t+496>>2],d[e+232>>2]=y(y(y(o*d[t+332>>2])+y(a*d[t+348>>2]))+y(r*d[t+364>>2]))*n,d[e+228>>2]=y(y(y(o*l)+y(a*_))+y(r*u))*n,d[e+224>>2]=y(y(y(h*o)+y(s*a))+y(c*r))*n):(f[e+4>>2]=0,f[e+8>>2]=0,f[e>>2]=1065353216,f[e+32>>2]=0,f[e+36>>2]=0,f[e+240>>2]=0,f[e+128>>2]=0,f[e+132>>2]=0,f[e+112>>2]=1065353216,f[e+116>>2]=1065353216,f[e+96>>2]=1065353216,f[e+100>>2]=1065353216,f[e+176>>2]=0,f[e+180>>2]=0,f[e+12>>2]=0,f[e+16>>2]=0,f[e+24>>2]=0,f[e+28>>2]=0,f[e+20>>2]=1065353216,f[e+44>>2]=0,f[e+48>>2]=0,f[e+40>>2]=1065353216,f[e+52>>2]=0,f[e+56>>2]=0,f[e+60>>2]=0,f[e+136>>2]=0,f[e+140>>2]=0,f[e+120>>2]=1065353216,f[e+124>>2]=0,f[e+104>>2]=1065353216,f[e+108>>2]=0,f[e+232>>2]=0,f[e+224>>2]=0,f[e+228>>2]=0,f[e+216>>2]=0,f[e+220>>2]=0,f[e+208>>2]=0,f[e+212>>2]=0,f[e+200>>2]=0,f[e+204>>2]=0,f[e+192>>2]=0,f[e+196>>2]=0,f[e+184>>2]=0,f[e+188>>2]=0),f[e+236>>2]=0}(ht(e+4|0,i+8|0),t,n),f[t+212>>2]=o):(0|(o=f[e+188>>2]))>-1||(f[e+188>>2]=f[e+8>>2],dn(i+8|0,0,244),t=ht(e+4|0,i+8|0),f[t+88>>2]=0,f[t+92>>2]=0,f[t+80>>2]=0,f[t+84>>2]=0,f[t+72>>2]=0,f[t+76>>2]=0,f[t+64>>2]=0,f[t+68>>2]=0,f[t+144>>2]=0,f[t+148>>2]=0,f[t+152>>2]=0,f[t+156>>2]=0,f[t+160>>2]=0,f[t+164>>2]=0,f[t+168>>2]=0,f[t+172>>2]=0,f[t+4>>2]=0,f[t+8>>2]=0,f[t>>2]=1065353216,f[t+12>>2]=0,f[t+16>>2]=0,f[t+24>>2]=0,f[t+28>>2]=0,f[t+20>>2]=1065353216,f[t+32>>2]=0,f[t+36>>2]=0,f[t+44>>2]=0,f[t+48>>2]=0,f[t+40>>2]=1065353216,f[t+52>>2]=0,f[t+56>>2]=0,f[t+60>>2]=0,f[t+136>>2]=0,f[t+140>>2]=0,f[t+240>>2]=0,f[t+128>>2]=0,f[t+132>>2]=0,f[t+120>>2]=1065353216,f[t+124>>2]=0,f[t+112>>2]=1065353216,f[t+116>>2]=1065353216,f[t+104>>2]=1065353216,f[t+108>>2]=0,f[t+96>>2]=1065353216,f[t+100>>2]=1065353216,f[t+232>>2]=0,f[t+236>>2]=0,f[t+224>>2]=0,f[t+228>>2]=0,f[t+216>>2]=0,f[t+220>>2]=0,f[t+208>>2]=0,f[t+212>>2]=0,f[t+200>>2]=0,f[t+204>>2]=0,f[t+192>>2]=0,f[t+196>>2]=0,f[t+184>>2]=0,f[t+188>>2]=0,f[t+176>>2]=0,f[t+180>>2]=0,o=f[e+188>>2])),R=i+256|0,o}function vt(e,t,n,i,o,a){var r;f[e+4>>2]=t,f[e>>2]=7432,t=f[n+12>>2],f[e+16>>2]=f[n+8>>2],f[e+20>>2]=t,t=f[n+4>>2],f[e+8>>2]=f[n>>2],f[e+12>>2]=t,t=f[n+28>>2],f[e+32>>2]=f[n+24>>2],f[e+36>>2]=t,t=f[n+20>>2],f[e+24>>2]=f[n+16>>2],f[e+28>>2]=t,t=f[n+44>>2],f[e+48>>2]=f[n+40>>2],f[e+52>>2]=t,t=f[n+36>>2],f[e+40>>2]=f[n+32>>2],f[e+44>>2]=t,r=f[n+60>>2],f[(t=e- -64|0)>>2]=f[n+56>>2],f[t+4>>2]=r,t=f[n+52>>2],f[e+56>>2]=f[n+48>>2],f[e+60>>2]=t,t=f[i+12>>2],f[e+80>>2]=f[i+8>>2],f[e+84>>2]=t,t=f[i+4>>2],f[e+72>>2]=f[i>>2],f[e+76>>2]=t,t=f[i+28>>2],f[e+96>>2]=f[i+24>>2],f[e+100>>2]=t,t=f[i+20>>2],f[e+88>>2]=f[i+16>>2],f[e+92>>2]=t,t=f[i+44>>2],f[e+112>>2]=f[i+40>>2],f[e+116>>2]=t,t=f[i+36>>2],f[e+104>>2]=f[i+32>>2],f[e+108>>2]=t,t=f[i+60>>2],f[e+128>>2]=f[i+56>>2],f[e+132>>2]=t,t=f[i+52>>2],f[e+120>>2]=f[i+48>>2],f[e+124>>2]=t,t=f[o+12>>2],f[e+144>>2]=f[o+8>>2],f[e+148>>2]=t,t=f[o+4>>2],f[e+136>>2]=f[o>>2],f[e+140>>2]=t,t=f[o+28>>2],f[e+160>>2]=f[o+24>>2],f[e+164>>2]=t,t=f[o+20>>2],f[e+152>>2]=f[o+16>>2],f[e+156>>2]=t,t=f[o+44>>2],f[e+176>>2]=f[o+40>>2],f[e+180>>2]=t,t=f[o+36>>2],f[e+168>>2]=f[o+32>>2],f[e+172>>2]=t,t=f[o+60>>2],f[e+192>>2]=f[o+56>>2],f[e+196>>2]=t,t=f[o+52>>2],f[e+184>>2]=f[o+48>>2],f[e+188>>2]=t,f[e+208>>2]=0,d[e+204>>2]=a,f[e+200>>2]=1065353216}function gt(e,t,n){var i,r=0,s=0,c=0;if(f[e+4>>2]=1065353216,f[e+8>>2]=1065353216,f[e+48>>2]=0,f[e>>2]=15268,a[e+36|0]=1,f[e+12>>2]=1065353216,f[e+16>>2]=0,f[e+32>>2]=0,f[e+24>>2]=0,f[e+28>>2]=0,a[e+100|0]=1,f[e+96>>2]=0,a[e+120|0]=1,f[e+88>>2]=0,f[e+92>>2]=0,f[e+116>>2]=0,a[e+140|0]=1,f[e+108>>2]=0,f[e+112>>2]=0,f[e+136>>2]=0,a[e+160|0]=1,f[e+128>>2]=0,f[e+132>>2]=0,f[e+168>>2]=0,a[e+164|0]=t,f[e+148>>2]=0,f[e+152>>2]=0,f[e+156>>2]=0,a[e+165|0]=n,f[6257]=f[6257]+1,c=0|o[f[4968]](32,16),(0|(i=f[e+24>>2]))>=1)for(;n=(t=s<<5)+c|0,t=t+f[e+32>>2]|0,r=f[t+4>>2],f[n>>2]=f[t>>2],f[n+4>>2]=r,r=f[t+28>>2],f[n+24>>2]=f[t+24>>2],f[n+28>>2]=r,r=f[t+20>>2],f[n+16>>2]=f[t+16>>2],f[n+20>>2]=r,r=f[t+12>>2],f[n+8>>2]=f[t+8>>2],f[n+12>>2]=r,(0|i)!=(0|(s=s+1|0)););(t=f[e+32>>2])&&(h[e+36|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+32>>2]=0),f[e+32>>2]=c,a[e+36|0]=1,f[e+28>>2]=1,t=c+(f[e+24>>2]<<5)|0,f[t+24>>2]=2,f[t+28>>2]=0,f[t+16>>2]=0,f[t+20>>2]=16,f[t+8>>2]=12,f[t+12>>2]=0,f[t>>2]=0,f[t+4>>2]=0,f[e+24>>2]=f[e+24>>2]+1,n=h[e+164|0],c=f[(n?128:148)+e>>2],t=f[e+32>>2],f[t+24>>2]=n?2:3,f[t+4>>2]=0,s=12,f[t+8>>2]=n?12:6,f[t>>2]=(0|c)/3,h[e+165|0]?(s=16,e=f[e+88>>2]):e=f[e+108>>2]/3|0,f[t+20>>2]=s,f[t+16>>2]=0,f[t+12>>2]=e}function yt(e,t){var n=0,i=0,r=0,s=0,c=0,l=0,_=0,u=0,p=0,m=0,d=0,v=0;if(f[e+8>>2]<(0|t)){if(t?(f[6257]=f[6257]+1,u=0|o[f[4968]](g(t,36),16)):u=0,!((0|(m=f[e+4>>2]))<1)){for(;;){if(i=f[e+12>>2],r=g(p,36),f[12+(n=r+u|0)>>2]=0,a[n+16|0]=1,f[n+4>>2]=0,f[n+8>>2]=0,(0|(s=f[4+(r=i+r|0)>>2]))>=1){f[6257]=f[6257]+1,l=s<<2,_=0|o[f[4968]](l,16),c=f[n+12>>2],i=0;e:{t:{if((0|(d=f[n+4>>2]))>=1)for(;;)if(f[_+(v=i<<2)>>2]=f[c+v>>2],(0|d)==(0|(i=i+1|0)))break t;if(!c)break e}h[n+16|0]&&c&&(f[6258]=f[6258]+1,o[f[4969]](c))}for(a[n+16|0]=1,f[n+12>>2]=_,f[n+8>>2]=s,i=0,dn(_,0,l),f[n+4>>2]=s,c=f[r+12>>2],_=f[n+12>>2];f[(l=i<<2)+_>>2]=f[c+l>>2],(0|s)!=(0|(i=i+1|0)););}else f[n+4>>2]=s;if(i=f[r+24>>2],f[n+20>>2]=f[r+20>>2],f[n+24>>2]=i,i=f[r+32>>2],f[n+28>>2]=f[r+28>>2],f[n+32>>2]=i,(0|m)==(0|(p=p+1|0)))break}if(!((0|(c=f[e+4>>2]))<1))for(i=0;r=n=f[e+12>>2]+g(i,36)|0,(s=f[n+12>>2])&&(h[n+16|0]&&s&&(f[6258]=f[6258]+1,o[f[4969]](s)),f[r+12>>2]=0),a[n+16|0]=1,f[r+12>>2]=0,f[n+4>>2]=0,f[n+8>>2]=0,(0|c)!=(0|(i=i+1|0)););}(n=f[e+12>>2])&&(h[e+16|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+12>>2]=0),f[e+12>>2]=u,a[e+16|0]=1,f[e+8>>2]=t}}function At(e,t,n){e|=0,t|=0,n|=0;var i,a,r,s,c,l,_=0,u=0,h=0,m=y(0),A=y(0),x=y(0),b=y(0),C=0;R=i=R-80|0,u=f[e+4>>2],o[f[f[u>>2]+16>>2]](u,i+28|0,i+24|0,i+20|0,i+16|0,i+12|0,i+8|0,i+4|0,i,t),r=f[i+12>>2]+g(f[i+8>>2],n)|0,s=f[i+20>>2],u=(a=f[e+4>>2])+12|0,_=h=f[i+28>>2],c=f[i>>2],C=p[r+4>>1],3!=(0|c)&&(C=f[r+8>>2]),l=f[i+16>>2],_=_+g(C,l)|0,s?(m=y(d[a+8>>2]*y(v[_+8>>3])),A=y(d[a+4>>2]*y(v[_>>3])),x=y(v[_+16>>3]),_=u):(m=y(d[_+4>>2]*d[a+8>>2]),A=y(d[_>>2]*d[a+4>>2]),x=d[a+12>>2],_=_+8|0),b=d[_>>2],f[i+76>>2]=0,d[i+68>>2]=m,d[i+72>>2]=b*x,d[i+64>>2]=A,_=3!=(0|c)?f[r+4>>2]:p[r+2>>1],_=g(_,l)+h|0,s?(m=y(d[a+8>>2]*y(v[_+8>>3])),A=y(d[a+4>>2]*y(v[_>>3])),x=y(v[_+16>>3]),_=u):(m=y(d[_+4>>2]*d[a+8>>2]),A=y(d[_>>2]*d[a+4>>2]),x=d[a+12>>2],_=_+8|0),b=d[_>>2],f[i+60>>2]=0,d[i+52>>2]=m,d[i+56>>2]=b*x,d[i+48>>2]=A,_=3!=(0|c)?f[r>>2]:p[r>>1],h=g(_,l)+h|0,s?(x=y(v[h+16>>3]),m=y(d[a+8>>2]*y(v[h+8>>3])),A=y(d[a+4>>2]*y(v[h>>3]))):(u=h+8|0,x=d[a+12>>2],m=y(d[h+4>>2]*d[a+8>>2]),A=y(d[h>>2]*d[a+4>>2])),b=d[u>>2],f[i+44>>2]=0,d[i+36>>2]=m,d[i+32>>2]=A,d[i+40>>2]=b*x,u=f[e+8>>2],o[f[f[u>>2]+8>>2]](u,i+32|0,t,n),e=f[e+4>>2],o[f[f[e>>2]+24>>2]](e,t),R=i+80|0}function xt(e,t,n){var i,a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0);if(R=i=R-256|0,e){for(h=d[t+24>>2],p=d[t+20>>2],m=d[t+16>>2],v=d[t+8>>2],g=d[t+4>>2],A=d[t>>2],f[i>>2]=e,s=64,r=i,t=1;;){c=f[((e=t+-1|0)<<2)+r>>2];e:if(!(d[c>>2]<=m^1|d[c+16>>2]>=A^1|d[c+4>>2]<=p^1|d[c+20>>2]>=g^1||d[c+8>>2]<=h^1|d[c+24>>2]>=v^1)){t:{n:{if(f[c+40>>2]){if((0|e)!=(0|s)){a=s,l=r;break t}if((0|t)>(0|(a=s?s<<1:1))){l=r,e=a=s;break t}if(e=0,l=0,a&&(f[6257]=f[6257]+1,l=0|o[f[4968]](a<<2,16)),(0|t)>=2)for(;;)if(f[(t=e<<2)+l>>2]=f[t+r>>2],(0|s)==(0|(e=e+1|0)))break n;if(r)break n;_=1;break t}o[f[f[n>>2]+12>>2]](n,c);break e}e=_,_=1,e&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),e=s}if(f[(e<<2)+l>>2]=f[c+36>>2],(0|(u=e+1|0))!=(0|a)||(0|a)>=(0|(s=a?a<<1:1)))s=a,r=l;else{t=0,r=0,s&&(f[6257]=f[6257]+1,r=0|o[f[4968]](s<<2,16));t:{n:{if((0|e)>=0){for(;f[(a=t<<2)+r>>2]=f[a+l>>2],a=(0|e)==(0|t),t=t+1|0,!a;);if(_)break n;break t}if(!l|!_)break t}l&&(f[6258]=f[6258]+1,o[f[4969]](l))}_=1}f[(u<<2)+r>>2]=f[c+40>>2],e=e+2|0}if(!((0|(t=e))>0))break}!r|!_||r&&(f[6258]=f[6258]+1,o[f[4969]](r))}R=i+256|0}function bt(e,t){var n=y(0),i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0);if(n=d[e+372>>2],c=d[e+504>>2],i=$(y(y(1)-c),t),n=y(n*i),d[e+372>>2]=n,r=y(i*d[e+376>>2]),d[e+376>>2]=r,i=y(i*d[e+380>>2]),d[e+380>>2]=i,a=d[e+388>>2],l=d[e+508>>2],o=$(y(y(1)-l),t),t=y(a*o),d[e+388>>2]=t,a=y(o*d[e+392>>2]),d[e+392>>2]=a,o=y(o*d[e+396>>2]),d[e+396>>2]=o,h[e+512|0]&&(y(y(y(t*t)+y(a*a))+y(o*o))<d[e+524>>2]^1|y(y(y(n*n)+y(r*r))+y(i*i))<d[e+520>>2]^1||(s=d[e+516>>2],o=y(o*s),d[e+396>>2]=o,a=y(a*s),d[e+392>>2]=a,t=y(t*s),d[e+388>>2]=t,i=y(i*s),d[e+380>>2]=i,r=y(r*s),d[e+376>>2]=r,n=y(n*s),d[e+372>>2]=n),(s=y(S(y(y(y(n*n)+y(r*r))+y(i*i)))))<c&&(s>y(.004999999888241291)?(c=i,i=y(y(1)/s),d[e+380>>2]=c-y(y(c*i)*y(.004999999888241291)),d[e+376>>2]=r-y(y(r*i)*y(.004999999888241291)),d[e+372>>2]=n-y(y(n*i)*y(.004999999888241291))):(f[e+372>>2]=0,f[e+376>>2]=0,f[e+380>>2]=0,f[e+384>>2]=0)),(n=y(S(y(y(y(t*t)+y(a*a))+y(o*o)))))<l)){if(n>y(.004999999888241291))return n=y(y(1)/n),d[e+396>>2]=o-y(y(o*n)*y(.004999999888241291)),d[e+392>>2]=a-y(y(a*n)*y(.004999999888241291)),void(d[e+388>>2]=t-y(y(t*n)*y(.004999999888241291)));f[e+388>>2]=0,f[e+392>>2]=0,f[e+396>>2]=0,f[e+400>>2]=0}}function Ct(e,t){var n,i,o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0,p=0,m=0,d=0;return(0|(n=f[e+16>>2]))!=(0|(a=f[t+16>>2]))?n-a|0:n?(c=f[e+4>>2],_=f[t+8>>2],h=Gs(u=f[t+12>>2],0,d=f[e>>2],0),l=N,u=Gs(u,r,c,0),a=N+s|0,s=o=u+l|0,o=o>>>0<u>>>0?a+1|0:a,c=Gs(_,u=0,c,r),(r=(a=s)+(s=N)|0)>>>0<s>>>0&&(o=o+1|0),a=r,s=o,r=0,(o=c+h|0)>>>0<c>>>0&&(r=r+1|0),h=r,r=r+a|0,a=s,a=r>>>0<h>>>0?a+1|0:a,s=r,r=o,h=0,_=Gs(d,p,_,u),o=N+o|0,o=(c=h+_|0)>>>0<_>>>0?o+1|0:o,i=c,_=c,c=o,(o=s+(r=(0|r)==(0|o)&_>>>0<h>>>0|o>>>0<r>>>0)|0)>>>0<r>>>0&&(a=a+1|0),h=o,_=a,u=o,d=a,r=f[e+8>>2],e=f[e+12>>2],o=f[t>>2],p=r,s=Gs(l=f[t+4>>2],a=0,r,0),t=N,m=e,l=Gs(l,a,e,r=0),a=N,a=(e=t+l|0)>>>0<l>>>0?a+1|0:a,t=e,l=o,e=Gs(o,0,m,r),o=a,r=o=(t=(m=N)+t|0)>>>0<m>>>0?o+1|0:o,a=0,(o=e+s|0)>>>0<e>>>0&&(a=a+1|0),m=a,s=a+t|0,a=r,a=s>>>0<m>>>0?a+1|0:a,t=s,s=-1,r=a,m=t,t=0,p=Gs(l,0,p,0),a=o,o=o+N|0,o=(e=t+p|0)>>>0<p>>>0?o+1|0:o,p=e,l=e,e=o,(a=m+(t=(0|a)==(0|o)&l>>>0<t>>>0|o>>>0<a>>>0)|0)>>>0<t>>>0&&(r=r+1|0),t=r,(0|r)==(0|d)&u>>>0<(o=a)>>>0|d>>>0<r>>>0||(s=1,(0|t)==(0|_)&h>>>0>a>>>0|_>>>0>t>>>0||(s=-1,(0|e)==(0|c)&i>>>0<p>>>0|c>>>0<e>>>0||(s=(0|e)==(0|c)&i>>>0>p>>>0|c>>>0>e>>>0))),g(s,n)):0}function St(e){var t;f[e+132>>2]=0,f[e+136>>2]=0,f[e>>2]=3972,f[e+188>>2]=0,f[e+192>>2]=0,f[e+180>>2]=0,f[e+184>>2]=1566444395,f[e+164>>2]=1065353216,f[e+168>>2]=1065353216,f[e+276>>2]=0,f[e+280>>2]=0,f[e+268>>2]=1065353216,f[e+272>>2]=0,f[e+260>>2]=-1,f[e+264>>2]=-1,f[e+252>>2]=1,f[e+256>>2]=0,f[e+244>>2]=1036831949,f[e+248>>2]=1176256512,f[e+236>>2]=0,f[e+240>>2]=0,f[e+228>>2]=1056964608,f[e+232>>2]=0,f[e+220>>2]=1,f[e+224>>2]=0,f[e+212>>2]=-1,f[e+216>>2]=-1,f[e+204>>2]=1,f[e+208>>2]=-1,f[e+140>>2]=0,f[e+144>>2]=0,f[e+148>>2]=0,f[e+152>>2]=0,f[e+156>>2]=0,f[e+160>>2]=0,f[e+172>>2]=1065353216,f[e+176>>2]=0,f[e+196>>2]=0,f[e+200>>2]=0,a[e+300|0]=1,f[e+304>>2]=0,f[e+296>>2]=0,f[e+288>>2]=0,f[e+292>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0,f[e+4>>2]=1065353216,f[e+16>>2]=0,f[e+20>>2]=0,f[e+28>>2]=0,f[e+32>>2]=0,f[e+24>>2]=1065353216,f[e+36>>2]=0,f[e+40>>2]=0,f[e+48>>2]=0,f[e+52>>2]=0,f[e+44>>2]=1065353216,f[e+56>>2]=0,f[e+60>>2]=0,f[e+72>>2]=0,f[e+76>>2]=0,f[(t=e- -64|0)>>2]=0,f[t+4>>2]=1065353216,f[e+80>>2]=0,f[e+84>>2]=0,f[e+88>>2]=1065353216,f[e+100>>2]=0,f[e+104>>2]=0,f[e+92>>2]=0,f[e+96>>2]=0,f[e+128>>2]=0,f[e+108>>2]=1065353216,f[e+120>>2]=0,f[e+124>>2]=0,f[e+112>>2]=0,f[e+116>>2]=0}function Et(e){var t,n,i=y(0),o=y(0),a=y(0),r=0,s=0,c=0,l=0,_=0;for(n=(0|(t=f[e+28>>2]))<1;;){e:if(!(r>>>0>7)){switch(r-1|0){default:i=y(d[e+88>>2]+d[e+72>>2]),o=y(d[e+84>>2]+d[e+68>>2]),a=y(d[e+80>>2]+d[e+64>>2]);break e;case 0:i=y(d[e+72>>2]-d[e+88>>2]),o=y(d[e+84>>2]+d[e+68>>2]),a=y(d[e+80>>2]+d[e+64>>2]);break e;case 1:i=y(d[e+88>>2]+d[e+72>>2]),o=y(d[e+68>>2]-d[e+84>>2]),a=y(d[e+80>>2]+d[e+64>>2]);break e;case 2:i=y(d[e+72>>2]-d[e+88>>2]),o=y(d[e+68>>2]-d[e+84>>2]),a=y(d[e+80>>2]+d[e+64>>2]);break e;case 3:i=y(d[e+88>>2]+d[e+72>>2]),o=y(d[e+84>>2]+d[e+68>>2]),a=y(d[e+64>>2]-d[e+80>>2]);break e;case 4:i=y(d[e+72>>2]-d[e+88>>2]),o=y(d[e+84>>2]+d[e+68>>2]),a=y(d[e+64>>2]-d[e+80>>2]);break e;case 5:i=y(d[e+88>>2]+d[e+72>>2]),o=y(d[e+68>>2]-d[e+84>>2]),a=y(d[e+64>>2]-d[e+80>>2]);break e;case 6:}i=y(d[e+72>>2]-d[e+88>>2]),o=y(d[e+68>>2]-d[e+84>>2]),a=y(d[e+64>>2]-d[e+80>>2])}e:{if(!n)for(_=f[e+36>>2],l=0,s=0;;){if(c=g(s,36)+_|0,y(d[c+32>>2]+y(y(y(a*d[c+20>>2])+y(o*d[c+24>>2]))+y(i*d[c+28>>2])))>y(0))break e;if(!((0|(s=s+1|0))<(0|t)))break}if(l=1,8!=(0|(r=r+1|0)))continue}break}return l}function wt(e,t,n){var i=0,a=0,r=0,s=0,c=0,l=0;if(!((r=f[e+56>>2])||((i=f[e+52>>2])?f[e+52>>2]=f[i+8>>2]:(f[6257]=f[6257]+1,i=0|o[f[4968]](12,16),a=f[e+60>>2],f[i+8>>2]=0,f[i+4>>2]=a,f[6257]=f[6257]+1,f[i>>2]=o[f[4968]](g(a,24),16),f[i+8>>2]=f[e+48>>2],f[e+48>>2]=i),r=f[i>>2],(0|(s=f[i+4>>2]))<1)))for(i=0,a=r;c=a,a=a+24|0,i=i+1|0,f[c>>2]=(0|i)<(0|s)?a:0,(0|i)!=(0|s););if(f[e+56>>2]=f[r>>2],f[r+16>>2]=0,f[r+20>>2]=0,f[r+8>>2]=0,f[r+12>>2]=0,f[r>>2]=0,f[r+4>>2]=0,!((s=f[e+56>>2])||((i=f[e+52>>2])?f[e+52>>2]=f[i+8>>2]:(f[6257]=f[6257]+1,i=0|o[f[4968]](12,16),a=f[e+60>>2],f[i+8>>2]=0,f[i+4>>2]=a,f[6257]=f[6257]+1,f[i>>2]=o[f[4968]](g(a,24),16),f[i+8>>2]=f[e+48>>2],f[e+48>>2]=i),s=f[i>>2],(0|(l=f[i+4>>2]))<1)))for(i=0,a=s;c=a,a=a+24|0,i=i+1|0,f[c>>2]=(0|i)<(0|l)?a:0,(0|i)!=(0|l););return f[e+56>>2]=f[s>>2],f[s>>2]=0,f[s+4>>2]=0,f[r+8>>2]=s,f[s+8>>2]=r,a=f[e+100>>2],f[r+20>>2]=a,f[s+20>>2]=a,f[r+12>>2]=n,f[s+12>>2]=t,f[r+16>>2]=0,f[s+16>>2]=0,n=(t=f[e+116>>2])+1|0,f[e+116>>2]=n,(0|t)>=f[e+120>>2]&&(f[e+120>>2]=n),r}function Tt(e,t,n,i){for(var o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0,p=0,d=0,v=0,g=0,y=0,A=0,x=0,b=0;;){for(A=n,p=f[e+12>>2],x=f[8+(a=p+((n+i|0)/2<<4)|0)>>2],u=f[a+4>>2],_=f[a>>2],a=i;;){r=-1,c=-1,(h=f[(o=(n<<4)+p|0)>>2])&&(c=f[h+12>>2]),r=_?f[_+12>>2]:r,s=-1,l=-1,(d=f[o+4>>2])&&(l=f[d+12>>2]),s=u?f[u+12>>2]:s;e:{t:if(!((0|c)>(0|r))){if(!((0|_)!=(0|h)|(0|l)>(0|s))){if((0|u)!=(0|d))break e;if(m[o+8>>2]>x>>>0)break t;break e}if((0|_)!=(0|h)|(0|l)<=(0|s))break e}n=n+1|0;continue}for(;;){r=(b=a<<4)+p|0,c=-1,s=-1,s=_?f[_+12>>2]:s,(v=f[r>>2])&&(c=f[v+12>>2]),l=-1,g=-1,g=u?f[u+12>>2]:g,(y=f[r+4>>2])&&(l=f[y+12>>2]);e:{t:if(!((0|s)>(0|c))){if(!((0|_)!=(0|v)|(0|g)>(0|l))){if((0|u)!=(0|y))break e;if(m[r+8>>2]<x>>>0)break t;break e}if((0|_)!=(0|v)|(0|g)<=(0|l))break e}a=a+-1|0;continue}break}if((0|n)<=(0|a)&&(l=f[o+8>>2],s=f[o+12>>2],c=f[r+4>>2],f[o>>2]=f[r>>2],f[o+4>>2]=c,c=f[r+12>>2],f[o+8>>2]=f[r+8>>2],f[o+12>>2]=c,o=f[e+12>>2]+b|0,f[o+4>>2]=d,f[o+8>>2]=l,f[o+12>>2]=s,f[o>>2]=h,a=a+-1|0,n=n+1|0),!((0|n)<=(0|a)))break;p=f[e+12>>2]}if((0|a)>(0|A)&&Tt(e,t,A,a),!((0|n)<(0|i)))break}}function Pt(e,t,n,i,o,r){yo(e,4,t,n),f[e>>2]=3640,t=f[i+12>>2],f[e+560>>2]=f[i+8>>2],f[e+564>>2]=t,t=f[i+4>>2],f[e+552>>2]=f[i>>2],f[e+556>>2]=t,t=f[i+28>>2],f[e+576>>2]=f[i+24>>2],f[e+580>>2]=t,t=f[i+20>>2],f[e+568>>2]=f[i+16>>2],f[e+572>>2]=t,t=f[i+44>>2],f[e+592>>2]=f[i+40>>2],f[e+596>>2]=t,t=f[i+36>>2],f[e+584>>2]=f[i+32>>2],f[e+588>>2]=t,t=f[i+60>>2],f[e+608>>2]=f[i+56>>2],f[e+612>>2]=t,t=f[i+52>>2],f[e+600>>2]=f[i+48>>2],f[e+604>>2]=t,t=f[o+12>>2],f[e+624>>2]=f[o+8>>2],f[e+628>>2]=t,t=f[o+4>>2],f[e+616>>2]=f[o>>2],f[e+620>>2]=t,t=f[o+20>>2],f[e+632>>2]=f[o+16>>2],f[e+636>>2]=t,t=f[o+28>>2],f[e+640>>2]=f[o+24>>2],f[e+644>>2]=t,t=f[o+36>>2],f[e+648>>2]=f[o+32>>2],f[e+652>>2]=t,t=f[o+44>>2],f[e+656>>2]=f[o+40>>2],f[e+660>>2]=t,t=f[o+52>>2],f[e+664>>2]=f[o+48>>2],f[e+668>>2]=t,t=f[o+60>>2],f[e+672>>2]=f[o+56>>2],f[e+676>>2]=t,f[e+688>>2]=0,f[e+692>>2]=-1082130432,f[e+696>>2]=1063675494,f[e+700>>2]=1050253722,f[e+704>>2]=1065353216,f[e+708>>2]=0,f[e+712>>2]=0,a[e+716|0]=0,a[e+740|0]=r,f[e+736>>2]=16777216,f[e+764>>2]=0,f[e+756>>2]=0,f[e+760>>2]=0,f[e+748>>2]=0,f[e+752>>2]=0,d[e+732>>2]=y(r?-1:1)}function It(e,t,n){var i,o=0;if(n>>>0>=512)T(0|e,0|t,0|n);else{i=e+n|0;e:if(3&(e^t))if(i>>>0<4)n=e;else if((o=i+-4|0)>>>0<e>>>0)n=e;else for(n=e;a[0|n]=h[0|t],a[n+1|0]=h[t+1|0],a[n+2|0]=h[t+2|0],a[n+3|0]=h[t+3|0],t=t+4|0,(n=n+4|0)>>>0<=o>>>0;);else{t:if((0|n)<1)n=e;else if(3&e)for(n=e;;){if(a[0|n]=h[0|t],t=t+1|0,(n=n+1|0)>>>0>=i>>>0)break t;if(!(3&n))break}else n=e;if(!((e=-4&i)>>>0<64||n>>>0>(o=e+-64|0)>>>0))for(;f[n>>2]=f[t>>2],f[n+4>>2]=f[t+4>>2],f[n+8>>2]=f[t+8>>2],f[n+12>>2]=f[t+12>>2],f[n+16>>2]=f[t+16>>2],f[n+20>>2]=f[t+20>>2],f[n+24>>2]=f[t+24>>2],f[n+28>>2]=f[t+28>>2],f[n+32>>2]=f[t+32>>2],f[n+36>>2]=f[t+36>>2],f[n+40>>2]=f[t+40>>2],f[n+44>>2]=f[t+44>>2],f[n+48>>2]=f[t+48>>2],f[n+52>>2]=f[t+52>>2],f[n+56>>2]=f[t+56>>2],f[n+60>>2]=f[t+60>>2],t=t- -64|0,(n=n- -64|0)>>>0<=o>>>0;);if(n>>>0>=e>>>0)break e;for(;f[n>>2]=f[t>>2],t=t+4|0,(n=n+4|0)>>>0<e>>>0;);}if(n>>>0<i>>>0)for(;a[0|n]=h[0|t],t=t+1|0,(0|i)!=(0|(n=n+1|0)););}}function Rt(e,t){var n,i=y(0),o=y(0),a=y(0),r=y(0),s=y(0);if(o=d[1364+((t<<2)+e|0)>>2],n=g(t,88)+e|0,(a=d[n+968>>2])>=(r=d[n+972>>2])||(o<a?((i=mn(y(a-o)))<y(-3.1415927410125732)?i=y(i+y(6.2831854820251465)):i>y(3.1415927410125732)&&(i=y(i+y(-6.2831854820251465))),s=y(A(i)),(i=mn(y(r-o)))<y(-3.1415927410125732)?i=y(i+y(6.2831854820251465)):i>y(3.1415927410125732)&&(i=y(i+y(-6.2831854820251465))),o=s<y(A(i))?o:y(o+y(6.2831854820251465))):o>r&&((i=mn(y(o-r)))<y(-3.1415927410125732)?i=y(i+y(6.2831854820251465)):i>y(3.1415927410125732)&&(i=y(i+y(-6.2831854820251465))),s=y(A(i)),(i=mn(y(o-a)))<y(-3.1415927410125732)?i=y(i+y(6.2831854820251465)):i>y(3.1415927410125732)&&(i=y(i+y(-6.2831854820251465))),o=y(A(i))<s?y(o+y(-6.2831854820251465)):o)),d[n+1048>>2]=o,a>r)return e=g(t,88)+e|0,f[e+1040>>2]=0,void(f[e+1052>>2]=0);e=g(t,88)+e|0,d[e+1040>>2]=o-a,a!=r?(f[e+1052>>2]=4,d[e+1044>>2]=o-r):f[e+1052>>2]=3}function Nt(e){var t,n,i,r,s=0,c=0,l=0,_=0;if(n=t=f[e+8>>2],i=c=(l=f[e+32>>2])?f[e+40>>2]:0,r=s=(c=f[e+52>>2])?f[e+60>>2]:0,_=0,(s=f[e+72>>2])&&(_=f[e+80>>2]),y(o[f[f[t>>2]+12>>2]](n,i,l,r,c,_,s,f[e+4>>2],f[e+20>>2],f[e+24>>2])),(0|(c=f[e+32>>2]))<=-1)for(f[e+36>>2]<=-1&&((s=f[e+40>>2])&&(h[e+44|0]&&s&&(f[6258]=f[6258]+1,o[f[4969]](s)),f[e+40>>2]=0),f[e+36>>2]=0,f[e+40>>2]=0,a[e+44|0]=1);f[f[e+40>>2]+(c<<2)>>2]=0,l=(s=c+1|0)>>>0>=c>>>0,c=s,l;);if(f[e+32>>2]=0,(0|(c=f[e+52>>2]))<=-1)for(f[e+56>>2]<=-1&&((s=f[e+60>>2])&&(h[e- -64|0]&&s&&(f[6258]=f[6258]+1,o[f[4969]](s)),f[e+60>>2]=0),f[e+56>>2]=0,f[e+60>>2]=0,a[e- -64|0]=1);f[f[e+60>>2]+(c<<2)>>2]=0,l=(s=c+1|0)>>>0>=c>>>0,c=s,l;);if(f[e+52>>2]=0,(0|(c=f[e+72>>2]))<=-1)for(f[e+76>>2]<=-1&&((s=f[e+80>>2])&&(h[e+84|0]&&s&&(f[6258]=f[6258]+1,o[f[4969]](s)),f[e+80>>2]=0),f[e+76>>2]=0,f[e+80>>2]=0,a[e+84|0]=1);f[f[e+80>>2]+(c<<2)>>2]=0,l=(s=c+1|0)>>>0>=c>>>0,c=s,l;);f[e+72>>2]=0}function Dt(e){var t=0;return f[(e|=0)>>2]=2328,h[e+288|0]&&(t=f[e+220>>2],o[f[f[t>>2]>>2]](t),(t=f[e+220>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t))),(t=f[e+212>>2])&&(o[f[f[t>>2]>>2]](t),(t=f[e+212>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t))),h[e+289|0]&&(t=f[e+216>>2],o[f[f[t>>2]>>2]](t),(t=f[e+216>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t))),(t=f[e+332>>2])&&(h[e+336|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+332>>2]=0),f[e+332>>2]=0,f[e+324>>2]=0,f[e+328>>2]=0,a[e+336|0]=1,(t=f[e+304>>2])&&(h[e+308|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+304>>2]=0),f[e+304>>2]=0,f[e+296>>2]=0,f[e+300>>2]=0,a[e+308|0]=1,(t=f[e+256>>2])&&(h[e+260|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+256>>2]=0),f[e+256>>2]=0,f[e+248>>2]=0,f[e+252>>2]=0,a[e+260|0]=1,(t=f[e+236>>2])&&(h[e+240|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+236>>2]=0),f[e+236>>2]=0,f[e+228>>2]=0,f[e+232>>2]=0,a[e+240|0]=1,(t=f[e+204>>2])&&(h[e+208|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+204>>2]=0),f[e+204>>2]=0,f[e+196>>2]=0,f[e+200>>2]=0,a[e+208|0]=1,Jn(e),0|e}function Mt(e,t,n,i,o,a,r,s){var c,l,_,u,p,m,v=y(0),g=y(0),A=y(0),x=y(0),b=0,C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0);c=R-16|0,l=f[(r?20:16)+i>>2],b=f[(r?12:8)+i>>2],f[b+(_=o<<2)>>2]=f[a>>2],f[(p=(u=o+1|0)<<2)+b>>2]=f[a+4>>2],f[b+(m=(b=o+2|0)<<2)>>2]=f[a+8>>2],d[l+_>>2]=-d[a>>2],d[l+p>>2]=-d[a+4>>2],d[l+m>>2]=-d[a+8>>2],r||(S=d[e+1348>>2],C=d[n+52>>2],E=d[e+1352>>2],w=d[n+56>>2],D=d[e+1356>>2],x=d[t+56>>2],T=d[e+1292>>2],P=d[e+1284>>2],I=d[t+52>>2],N=d[e+1288>>2],M=d[n+48>>2],g=d[a+8>>2],A=d[a+4>>2],O=d[t+48>>2],v=d[a>>2],f[c+12>>2]=0,P=y(P-O),I=y(N-I),N=y(y(A*P)-y(v*I)),d[c+8>>2]=N,x=y(T-x),T=y(y(v*x)-y(P*g)),d[c+4>>2]=T,x=y(y(I*g)-y(x*A)),d[c>>2]=x,E=y(E-C),w=y(D-w),C=y(y(g*E)-y(A*w)),S=y(S-M),A=y(y(A*S)-y(E*v)),g=y(y(w*v)-y(S*g)),!h[e+1452|0]|s||(v=d[e+1444>>2],d[c+8>>2]=N*v,d[c+4>>2]=T*v,d[c>>2]=x*v,v=d[e+1448>>2],A=y(A*v),C=y(C*v),g=y(g*v)),n=f[c+4>>2],e=(t=o<<2)+f[i+12>>2]|0,f[e>>2]=f[c>>2],f[e+4>>2]=n,f[e+8>>2]=f[c+8>>2],e=f[i+20>>2],d[e+t>>2]=-C,d[e+(u<<2)>>2]=-g,d[e+(b<<2)>>2]=-A)}function Ot(e,t,n){var i;R=i=R-48|0,f[i+44>>2]=e,f[i+40>>2]=t,f[i+36>>2]=n,n=f[i+36>>2],f[12+(t=R-16|0)>>2]=f[i+40>>2],f[t+8>>2]=0,d[i+32>>2]=_i(n,f[t+12>>2]+(f[t+8>>2]<<4)|0),n=f[i+36>>2],f[12+(t=R-16|0)>>2]=f[i+40>>2],f[t+8>>2]=0,d[i+28>>2]=ri(n,f[t+12>>2]+(f[t+8>>2]<<4)|0),n=f[i+36>>2],f[12+(t=R-16|0)>>2]=f[i+40>>2],f[t+8>>2]=0,d[i+24>>2]=si(n,f[t+12>>2]+(f[t+8>>2]<<4)|0),n=f[i+36>>2],f[12+(t=R-16|0)>>2]=f[i+40>>2],f[t+8>>2]=1,d[i+20>>2]=_i(n,f[t+12>>2]+(f[t+8>>2]<<4)|0),n=f[i+36>>2],f[12+(t=R-16|0)>>2]=f[i+40>>2],f[t+8>>2]=1,d[i+16>>2]=ri(n,f[t+12>>2]+(f[t+8>>2]<<4)|0),n=f[i+36>>2],f[12+(t=R-16|0)>>2]=f[i+40>>2],f[t+8>>2]=1,d[i+12>>2]=si(n,f[t+12>>2]+(f[t+8>>2]<<4)|0),n=f[i+36>>2],f[12+(t=R-16|0)>>2]=f[i+40>>2],f[t+8>>2]=2,d[i+8>>2]=_i(n,f[t+12>>2]+(f[t+8>>2]<<4)|0),n=f[i+36>>2],f[12+(t=R-16|0)>>2]=f[i+40>>2],f[t+8>>2]=2,d[i+4>>2]=ri(n,f[t+12>>2]+(f[t+8>>2]<<4)|0),n=f[i+36>>2],f[12+(t=R-16|0)>>2]=f[i+40>>2],f[t+8>>2]=2,d[i>>2]=si(n,f[t+12>>2]+(f[t+8>>2]<<4)|0),ui(e,i+32|0,i+28|0,i+24|0,i+20|0,i+16|0,i+12|0,i+8|0,i+4|0,i),R=i+48|0}function zt(e,t,n,i){t|=0,n|=0,i|=0;var r,s=0,c=0,l=0,_=0,u=0;if(R=r=R-96|0,s=f[8+(e|=0)>>2],f[t+216>>2]=s,f[e+12>>2]==(0|s)&&!((0|s)>=(0|(l=s?s<<1:1)))){if(l&&(f[6257]=f[6257]+1,_=0|o[f[4968]](l<<2,16),s=f[e+8>>2]),(0|s)>=1)for(;f[(u=c<<2)+_>>2]=f[f[e+16>>2]+u>>2],(0|(c=c+1|0))!=(0|s););(c=f[e+16>>2])&&(h[e+20|0]&&(c&&(f[6258]=f[6258]+1,o[f[4969]](c)),s=f[e+8>>2]),f[e+16>>2]=0),f[e+16>>2]=_,f[e+12>>2]=l,a[e+20|0]=1}f[f[e+16>>2]+(s<<2)>>2]=t,f[e+8>>2]=s+1,s=f[t+16>>2],f[r+40>>2]=f[t+12>>2],f[r+44>>2]=s,s=f[t+8>>2],f[r+32>>2]=f[t+4>>2],f[r+36>>2]=s,s=f[t+32>>2],f[r+56>>2]=f[t+28>>2],f[r+60>>2]=s,s=f[t+24>>2],f[r+48>>2]=f[t+20>>2],f[r+52>>2]=s,s=f[t+48>>2],f[r+72>>2]=f[t+44>>2],f[r+76>>2]=s,s=f[t+40>>2],f[r+64>>2]=f[t+36>>2],f[r+68>>2]=s,s=f[t+64>>2],f[r+88>>2]=f[t+60>>2],f[r+92>>2]=s,s=f[t+56>>2],f[r+80>>2]=f[t+52>>2],f[r+84>>2]=s,s=f[t+192>>2],o[f[f[s>>2]+8>>2]](s,r+32|0,r+16|0,r),s=f[e+68>>2],f[t+188>>2]=o[f[f[s>>2]+8>>2]](s,r+16|0,r,f[f[t+192>>2]+4>>2],t,n,i,f[e+24>>2]),R=r+96|0}function Lt(e,t,n){var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),E=y(0);a=d[t+396>>2],p=d[t+44>>2],m=d[t+40>>2],v=d[t+36>>2],c=d[t+392>>2],g=d[t+28>>2],l=d[t+12>>2],i=d[t+464>>2],A=d[t+24>>2],_=d[t+8>>2],u=d[t+460>>2],x=d[t+20>>2],o=d[t+388>>2],b=d[t+4>>2],h=d[t+456>>2],f[e+12>>2]=0,h=h!=y(0)?y(y(1)/h):y(0),r=y(x*h),u=u!=y(0)?y(y(1)/u):y(0),s=y(A*u),C=i!=y(0)?y(y(1)/i):y(0),i=y(g*C),E=y(y(y(o*y(y(y(b*r)+y(_*s))+y(l*i)))+y(c*y(y(y(r*x)+y(s*A))+y(i*g))))+y(a*y(y(y(r*v)+y(s*m))+y(i*p)))),i=y(h*b),r=y(u*_),s=y(C*l),r=y(y(y(o*y(y(y(b*i)+y(_*r))+y(l*s)))+y(c*y(y(y(i*x)+y(r*A))+y(s*g))))+y(a*y(y(y(i*v)+y(r*m))+y(s*p)))),i=y(y(o*E)-y(c*r)),d[e+8>>2]=i,s=o,o=y(h*v),h=_,_=y(u*m),u=l,l=y(C*p),p=y(y(y(s*y(y(y(b*o)+y(h*_))+y(u*l)))+y(c*y(y(y(o*x)+y(_*A))+y(l*g))))+y(a*y(y(y(o*v)+y(_*m))+y(l*p)))),o=y(y(a*r)-y(s*p)),d[e+4>>2]=o,a=y(y(c*p)-y(a*E)),d[e>>2]=a,(c=y(y(i*i)+y(y(a*a)+y(o*o))))>y(n*n)&&(n=y(y(y(1)/y(S(c)))*n),d[e+8>>2]=i*n,d[e+4>>2]=o*n,d[e>>2]=a*n)}function Ft(e,t){var n,i=0,a=y(0),r=y(0),s=y(0),c=y(0);R=n=R-32|0,t!=y(0)&&((i=f[e+540>>2])&&o[f[f[i>>2]+8>>2]](i,e+4|0),f[e+384>>2]=0,t=y(y(1)/t),d[e+380>>2]=t*y(d[e+60>>2]-d[e+124>>2]),d[e+376>>2]=t*y(d[e+56>>2]-d[e+120>>2]),d[e+372>>2]=t*y(d[e+52>>2]-d[e+116>>2]),Ze(e+68|0,e+4|0,n+16|0,n+12|0),r=d[n+16>>2],s=d[n+20>>2],c=d[n+24>>2],a=d[n+12>>2],f[e+400>>2]=0,d[e+396>>2]=t*y(a*c),d[e+392>>2]=t*y(a*s),d[e+388>>2]=t*y(r*a),i=f[e+384>>2],f[e+140>>2]=f[e+380>>2],f[e+144>>2]=i,i=f[e+376>>2],f[e+132>>2]=f[e+372>>2],f[e+136>>2]=i,i=f[e+392>>2],f[e+148>>2]=f[e+388>>2],f[e+152>>2]=i,i=f[e+400>>2],f[e+156>>2]=f[e+396>>2],f[e+160>>2]=i,i=f[e+8>>2],f[e+68>>2]=f[e+4>>2],f[e+72>>2]=i,i=f[e+16>>2],f[e+76>>2]=f[e+12>>2],f[e+80>>2]=i,i=f[e+24>>2],f[e+84>>2]=f[e+20>>2],f[e+88>>2]=i,i=f[e+32>>2],f[e+92>>2]=f[e+28>>2],f[e+96>>2]=i,i=f[e+48>>2],f[e+108>>2]=f[e+44>>2],f[e+112>>2]=i,i=f[e+40>>2],f[e+100>>2]=f[e+36>>2],f[e+104>>2]=i,i=f[e+64>>2],f[e+124>>2]=f[e+60>>2],f[e+128>>2]=i,i=f[e+56>>2],f[e+116>>2]=f[e+52>>2],f[e+120>>2]=i),R=n+32|0}function Ut(e,t,n,i,a){e|=0,t|=0,n|=0,i|=0,a|=0;var r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0);R=i=R-160|0,f[i+112>>2]=f[t>>2],f[i+64>>2]=f[t+64>>2],f[i+116>>2]=f[t+4>>2],f[i+68>>2]=f[t+68>>2],f[i+120>>2]=f[t+8>>2],f[i+72>>2]=f[t+72>>2],f[i+128>>2]=f[t+16>>2],f[i+80>>2]=f[t+80>>2],f[i+132>>2]=f[t+20>>2],f[i+84>>2]=f[t+84>>2],f[i+136>>2]=f[t+24>>2],f[i+88>>2]=f[t+88>>2],f[i+144>>2]=f[t+32>>2],f[i+96>>2]=f[t+96>>2],f[i+148>>2]=f[t+36>>2],f[i+100>>2]=f[t+100>>2],f[i+152>>2]=f[t+40>>2],f[i+104>>2]=f[t+104>>2],a=f[e+4>>2],s=d[a+40>>2],r=d[a+36>>2],c=d[a+32>>2],l=y(o[f[f[a>>2]+48>>2]](a)),_=y(o[f[f[a>>2]+48>>2]](a)),u=y(o[f[f[a>>2]+48>>2]](a)),f[i+36>>2]=0,r=y(r+_),d[i+28>>2]=r+r,r=y(c+l),d[i+24>>2]=r+r,s=y(s+u),d[i+32>>2]=s+s,e=f[e+8>>2],s=d[e+40>>2],r=d[e+36>>2],c=d[e+32>>2],l=y(o[f[f[e>>2]+48>>2]](e)),_=y(o[f[f[e>>2]+48>>2]](e)),u=y(o[f[f[e>>2]+48>>2]](e)),f[i+20>>2]=0,r=y(r+_),d[i+12>>2]=r+r,r=y(c+l),d[i+8>>2]=r+r,s=y(s+u),d[i+16>>2]=s+s,function(e,t,n,i,a,r,s,c,l,_){var u,h=y(0),p=y(0),m=y(0),v=y(0),x=y(0),b=y(0),C=y(0),E=y(0),w=y(0),T=y(0),P=0,I=0,N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=0,Z=y(0),J=y(0),$=y(0),ee=y(0),te=y(0),ne=y(0),ie=y(0),oe=y(0),ae=y(0),re=0,se=y(0),ce=y(0),le=y(0),_e=y(0),ue=y(0),fe=0,he=y(0),pe=0,me=0,de=0,ve=0,ge=0,ye=0,Ae=y(0),xe=y(0),be=0,Ce=0,Se=0,Ee=0,we=0;R=u=R-384|0,O=d[t+36>>2],W=d[t+4>>2],E=d[t+20>>2],k=d[t+40>>2],oe=d[t+8>>2],Z=d[t+24>>2],C=d[e+8>>2],T=d[i+8>>2],x=d[e>>2],b=d[i>>2],F=d[e+4>>2],U=d[i+4>>2],h=d[t+32>>2],he=d[t>>2],p=d[t+16>>2],m=y(d[n>>2]*y(.5)),d[u+372>>2]=m,v=y(d[n+4>>2]*y(.5)),d[u+376>>2]=v,N=y(d[n+8>>2]*y(.5)),d[u+380>>2]=N,z=y(d[r>>2]*y(.5)),d[u+360>>2]=z,D=y(d[r+4>>2]*y(.5)),d[u+364>>2]=D,w=y(d[r+8>>2]*y(.5)),d[u+368>>2]=w,x=y(b-x),b=y(U-F),C=y(T-C),T=y(y(y(he*x)+y(p*b))+y(h*C)),J=d[a>>2],j=d[a+16>>2],q=d[a+32>>2],F=y(y(y(he*J)+y(p*j))+y(h*q)),se=y(A(F)),M=d[a+4>>2],$=d[a+20>>2],ee=d[a+36>>2],U=y(y(y(he*M)+y(p*$))+y(h*ee)),Ae=y(A(U)),te=d[a+8>>2],ne=d[a+24>>2],ae=d[a+40>>2],G=y(y(y(he*te)+y(p*ne))+y(h*ae)),xe=y(A(G));e:if(!((p=y(y(A(T))-y(y(y(m+y(z*se))+y(D*Ae))+y(w*xe))))>y(0)||(V=y(y(y(W*te)+y(E*ne))+y(O*ae)),ce=y(A(V)),Y=y(y(y(W*M)+y(E*$))+y(O*ee)),ie=y(A(Y)),X=y(y(y(W*J)+y(E*j))+y(O*q)),Q=y(A(X)),h=y(-34028234663852886e22),n=0,p>y(-34028234663852886e22)&&(P=T<y(0),h=p,I=t,n=1),O=y(y(y(x*W)+y(b*E))+y(C*O)),(p=y(y(A(O))-y(y(y(v+y(z*Q))+y(D*ie))+y(w*ce))))>y(0)||(H=y(y(y(oe*te)+y(Z*ne))+y(k*ae)),le=y(A(H)),B=y(y(y(oe*M)+y(Z*$))+y(k*ee)),_e=y(A(B)),L=y(y(y(oe*J)+y(Z*j))+y(k*q)),ue=y(A(L)),p>h&&(I=t+4|0,P=O<y(0),h=p,n=2),E=y(y(y(x*oe)+y(b*Z))+y(C*k)),(p=y(y(A(E))-y(y(y(N+y(z*ue))+y(D*_e))+y(w*le))))>y(0)||(p>h&&(I=t+8|0,P=E<y(0),h=p,n=3),k=y(y(y(x*J)+y(b*j))+y(C*q)),(p=y(y(A(k))-y(z+y(y(N*ue)+y(y(m*se)+y(v*Q))))))>y(0)||(p>h&&(P=k<y(0),h=p,I=a,n=4),k=y(y(y(x*M)+y(b*$))+y(C*ee)),(p=y(y(A(k))-y(D+y(y(N*_e)+y(y(m*Ae)+y(v*ie))))))>y(0)||(p>h&&(I=a+4|0,P=k<y(0),h=p,n=5),x=y(y(y(x*te)+y(b*ne))+y(C*ae)),(p=y(y(A(x))-y(w+y(y(N*le)+y(y(m*xe)+y(v*ce))))))>y(0)||(p>h&&(I=a+8|0,P=x<y(0),h=p,n=6),q=y(y(E*X)-y(O*L)),$=y(Ae+y(9999999747378752e-21)),ee=y(ue+y(9999999747378752e-21)),te=y(Q+y(9999999747378752e-21)),ne=y(xe+y(9999999747378752e-21)),(p=y(y(A(q))-y(y(w*$)+y(y(y(v*ee)+y(N*te))+y(D*ne)))))>y(1.1920928955078125e-7)||(k=y(_e+y(9999999747378752e-21)),Z=y(ie+y(9999999747378752e-21)),J=y(se+y(9999999747378752e-21)),b=y(0),ae=y(X*X),ie=y(y(L*L)+y(0)),(j=y(S(y(ae+ie))))>y(1.1920928955078125e-7)?(C=y(0),p=y(p/j),x=y(0),y(p*y(1.0499999523162842))>h&&(P=q<y(0),C=y(y(-L)/j),b=y(y(0)/j),I=0,n=7,h=p,x=y(X/j))):(C=y(0),x=y(0)),Q=y(y(E*Y)-y(O*B)),(p=y(y(A(Q))-y(y(w*J)+y(y(y(v*k)+y(N*Z))+y(z*ne)))))>y(1.1920928955078125e-7)||(j=y(le+y(9999999747378752e-21)),q=y(ce+y(9999999747378752e-21)),ce=y(Y*Y),le=y(y(B*B)+y(0)),(M=y(S(y(ce+le))))>y(1.1920928955078125e-7)&&(p=y(p/M),y(p*y(1.0499999523162842))>h&&(P=Q<y(0),x=y(Y/M),C=y(y(-B)/M),b=y(y(0)/M),I=0,n=8,h=p)),Q=y(y(E*V)-y(O*H)),(p=y(y(A(Q))-y(y(D*J)+y(y(z*$)+y(y(v*j)+y(N*q))))))>y(1.1920928955078125e-7)||(_e=y(V*V),ue=y(y(H*H)+y(0)),(M=y(S(y(_e+ue))))>y(1.1920928955078125e-7)&&(p=y(p/M),y(p*y(1.0499999523162842))>h&&(P=Q<y(0),x=y(V/M),C=y(y(-H)/M),b=y(y(0)/M),I=0,n=9,h=p)),Q=y(y(T*L)-y(E*F)),(p=y(y(A(Q))-y(y(w*Z)+y(y(y(m*ee)+y(N*J))+y(D*q)))))>y(1.1920928955078125e-7)||(se=y(F*F),(M=y(S(y(se+ie))))>y(1.1920928955078125e-7)&&(p=y(p/M),y(p*y(1.0499999523162842))>h&&(P=Q<y(0),x=y(y(-F)/M),C=y(y(0)/M),b=y(L/M),I=0,n=10,h=p)),M=y(y(T*B)-y(E*U)),(p=y(y(A(M))-y(y(w*te)+y(y(y(m*k)+y(N*$))+y(z*q)))))>y(1.1920928955078125e-7)||(ie=y(U*U),(L=y(S(y(ie+le))))>y(1.1920928955078125e-7)&&(p=y(p/L),y(p*y(1.0499999523162842))>h&&(P=M<y(0),x=y(y(-U)/L),C=y(y(0)/L),b=y(B/L),I=0,n=11,h=p)),B=y(y(T*H)-y(E*G)),(p=y(y(A(B))-y(y(D*te)+y(y(z*Z)+y(y(m*j)+y(N*ne))))))>y(1.1920928955078125e-7)||(L=y(G*G),(E=y(S(y(L+ue))))>y(1.1920928955078125e-7)&&(p=y(p/E),y(p*y(1.0499999523162842))>h&&(P=B<y(0),x=y(y(-G)/E),C=y(y(0)/E),b=y(H/E),I=0,n=12,h=p)),H=y(y(O*F)-y(T*X)),(p=y(y(A(H))-y(y(w*k)+y(y(y(m*te)+y(v*J))+y(D*j)))))>y(1.1920928955078125e-7)||((E=y(S(y(y(ae+se)+y(0)))))>y(1.1920928955078125e-7)&&(p=y(p/E),y(p*y(1.0499999523162842))>h&&(P=H<y(0),x=y(y(0)/E),C=y(F/E),b=y(y(-X)/E),I=0,n=13,h=p)),E=y(y(O*U)-y(T*Y)),(p=y(y(A(E))-y(y(w*ee)+y(y(y(m*Z)+y(v*$))+y(z*j)))))>y(1.1920928955078125e-7)||((w=y(S(y(y(ce+ie)+y(0)))))>y(1.1920928955078125e-7)&&(p=y(p/w),y(p*y(1.0499999523162842))>h&&(P=E<y(0),x=y(y(0)/w),C=y(U/w),b=y(y(-Y)/w),I=0,n=14,h=p)),w=y(y(O*G)-y(T*V)),(p=y(y(A(w))-y(y(D*ee)+y(y(z*k)+y(y(m*q)+y(v*ne))))))>y(1.1920928955078125e-7))))))))))))))))){t:{n:{if((m=y(S(y(y(_e+L)+y(0)))))>y(1.1920928955078125e-7)&&(p=y(p/m),y(p*y(1.0499999523162842))>h))P=w<y(0),x=y(y(0)/m),C=y(G/m),b=y(y(-V)/m),n=15;else{if(!n)break e;if(I)break n;p=h}m=y(y(y(he*b)+y(W*C))+y(oe*x)),d[s>>2]=m,v=y(y(y(b*d[t+16>>2])+y(C*d[t+20>>2]))+y(x*d[t+24>>2])),d[s+4>>2]=v,b=y(y(y(b*d[t+32>>2])+y(C*d[t+36>>2]))+y(x*d[t+40>>2])),d[s+8>>2]=b;break t}m=d[I>>2],f[s>>2]=f[I>>2],v=d[I+16>>2],f[s+4>>2]=f[I+16>>2],b=d[I+32>>2],f[s+8>>2]=f[I+32>>2],p=h}if(P&&(d[s+8>>2]=-b,d[s+4>>2]=-v,d[s>>2]=-m),d[c>>2]=-p,(0|n)>=7)f[u+120>>2]=f[e+8>>2],r=f[e+4>>2],f[u+112>>2]=f[e>>2],f[u+116>>2]=r,v=y(0),D=d[u+112>>2],w=d[u+116>>2],E=h=d[u+372>>2],b=y(-h),h=d[s>>2],T=d[t>>2],x=d[s+4>>2],O=d[t+16>>2],m=d[s+8>>2],C=d[t+32>>2],b=y(y(y(h*T)+y(x*O))+y(m*C))>y(0)?E:b,M=y(d[u+120>>2]+y(b*C)),C=d[u+376>>2],E=d[t+4>>2],F=d[t+20>>2],U=d[t+36>>2],C=y(y(y(h*E)+y(x*F))+y(m*U))>y(0)?C:y(-C),M=y(M+y(C*U)),U=d[t+8>>2],G=d[t+24>>2],V=d[t+40>>2],N=y(y(y(h*U)+y(x*G))+y(m*V))>y(0)?N:y(-N),d[u+120>>2]=M+y(N*V),d[u+116>>2]=y(y(w+y(b*O))+y(C*F))+y(N*G),d[u+112>>2]=y(y(D+y(b*T))+y(C*E))+y(N*U),f[u+216>>2]=f[i+8>>2],e=f[i+4>>2],f[u+208>>2]=f[i>>2],f[u+212>>2]=e,E=y(-z),T=z,N=d[a>>2],z=d[a+16>>2],C=d[a+32>>2],b=y(y(y(h*N)+y(x*z))+y(m*C))>y(0)?E:T,E=y(d[u+216>>2]+y(b*C)),C=d[u+364>>2],D=d[a+4>>2],w=d[a+20>>2],T=d[a+36>>2],C=y(y(y(h*D)+y(x*w))+y(m*T))>y(0)?y(-C):C,M=y(E+y(C*T)),T=d[u+368>>2],L=y(-T),E=T,T=d[a+8>>2],O=d[a+24>>2],h=y(y(h*T)+y(x*O)),x=d[a+40>>2],h=y(h+y(m*x))>y(0)?L:E,x=y(M+y(h*x)),d[u+216>>2]=x,m=y(y(y(d[u+212>>2]+y(b*z))+y(C*w))+y(h*O)),d[u+212>>2]=m,h=y(y(y(d[u+208>>2]+y(b*N))+y(C*D))+y(h*T)),d[u+208>>2]=h,D=d[(e=(e=t)+((i=(0|(t=n+-7|0))/3|0)<<2)|0)>>2],t=(t-g(i,3)<<2)+a|0,b=d[t>>2],w=d[e+16>>2],C=d[t+16>>2],T=d[e+32>>2],N=d[t+32>>2],z=y(y(y(D*b)+y(w*C))+y(T*N)),(O=y(y(1)-y(z*z)))<=y(9999999747378752e-20)||(v=y(h-d[u+112>>2]),E=y(v*D),D=y(m-d[u+116>>2]),E=y(E+y(D*w)),w=y(x-d[u+120>>2]),v=y(y(y(y(E+y(w*T))*z)-y(y(y(v*b)+y(D*C))+y(w*N)))*y(y(1)/O))),d[u+216>>2]=x+y(v*N),d[u+212>>2]=m+y(v*C),d[u+208>>2]=h+y(v*b),h=d[s>>2],x=d[s+4>>2],m=d[s+8>>2],f[u+300>>2]=0,d[u+296>>2]=-m,d[u+292>>2]=-x,d[u+288>>2]=-h,o[f[f[_>>2]+16>>2]](_,u+288|0,u+208|0,p),f[l>>2]=n;else{C=d[s>>2],(0|n)<=3?(p=d[s+8>>2],x=d[s+4>>2],ve=u+372|0,P=a,I=u+360|0):(C=y(-C),p=y(-d[s+8>>2]),x=y(-d[s+4>>2]),r=i,ve=u+360|0,i=e,e=r,P=t,t=a,I=u+372|0),m=y(y(y(C*d[P>>2])+y(x*d[P+16>>2]))+y(p*d[P+32>>2])),d[u+344>>2]=m,v=y(y(y(C*d[P+4>>2])+y(x*d[P+20>>2]))+y(p*d[P+36>>2])),d[u+348>>2]=v,h=y(y(y(C*d[P+8>>2])+y(x*d[P+24>>2]))+y(p*d[P+40>>2])),d[u+352>>2]=h,h=y(A(h)),(v=y(A(v)))>(m=y(A(m)))?(a=(c=v>h)?1:2,r=0):(a=(1^(c=m>h))<<1,r=c),Se=r,h=d[(r=a<<2)+I>>2],m=y(h*d[r+P>>2]),v=y(d[i>>2]-d[e>>2]),Ee=c?2:1,a=u,d[r+(u+344|0)>>2]<y(0)?(m=y(v+m),d[u+328>>2]=m,v=y(y(d[i+4>>2]-d[e+4>>2])+y(h*d[(16|r)+P>>2])),d[u+332>>2]=v,h=y(y(d[i+8>>2]-d[e+8>>2])+y(h*d[(32|r)+P>>2]))):(m=y(v-m),d[u+328>>2]=m,v=y(y(d[i+4>>2]-d[e+4>>2])-y(h*d[(16|r)+P>>2])),d[u+332>>2]=v,h=y(y(d[i+8>>2]-d[e+8>>2])-y(h*d[(32|r)+P>>2]))),d[a+336>>2]=h,a=1;t:{if((be=((0|n)<4?-1:-4)+n|0)>>>0<=1){if(i=2,be-1)break t}else i=1;a=0}b=d[32+(a=(r=a<<2)+t|0)>>2],N=d[a>>2],z=d[a+16>>2],D=d[(t=(i<<=2)+t|0)>>2],w=d[t+16>>2],T=d[t+32>>2],O=y(y(y(m*D)+y(v*w))+y(h*T)),F=d[(ge=(t=Se<<2)+P|0)>>2],U=d[ge+16>>2],G=d[ge+32>>2],E=y(y(y(D*F)+y(w*U))+y(T*G)),V=d[t+I>>2],Y=y(E*V),X=y(O+Y),H=d[(ye=(t=Ee<<2)+P|0)>>2],B=d[ye+16>>2],L=d[ye+32>>2],w=y(y(y(D*H)+y(w*B))+y(T*L)),W=d[t+I>>2],D=y(w*W),d[u+316>>2]=X-D,T=y(y(y(m*N)+y(v*z))+y(h*b)),F=y(y(y(N*F)+y(z*U))+y(b*G)),m=y(V*F),v=y(T+m),N=y(y(y(N*H)+y(z*B))+y(b*L)),h=y(W*N),d[u+312>>2]=v-h,d[u+308>>2]=X+D,d[u+304>>2]=v+h,v=y(O-Y),d[u+300>>2]=v+D,m=y(T-m),d[u+296>>2]=m+h,d[u+292>>2]=v-D,d[u+288>>2]=m-h,f[u+280>>2]=f[r+ve>>2],f[u+284>>2]=f[i+ve>>2],t=4,r=u+208|0,I=u+288|0,a=0;t:{for(;;){n:{Ce=a;i:if((0|t)>0){for(we=1^Ce,fe=(re=Ce<<2)+(u+280|0)|0,i=r,a=I,c=0;;){if(m=d[fe>>2],v=d[(K=a+re|0)>>2],m>(b=y(-v))){if(f[i>>2]=f[a>>2],f[i+4>>2]=f[a+4>>2],8&(c=c+1|0))break n;m=d[fe>>2],v=d[K>>2],b=y(-v),i=i+8|0}if(pe=b<m,K=a+8|0,b=d[(de=(me=(0|t)>1)?K:I)+re>>2],(0|pe)!=(m>y(-b)|0)){if(h=d[(pe=a)+(a=we<<2)>>2],d[i+a>>2]=h+y(y(y(-m)-v)*y(y(d[a+de>>2]-h)/y(b-v))),d[i+re>>2]=-d[fe>>2],8&(c=c+1|0))break n;i=i+8|0}if(t=t+-1|0,a=K,!me)break}if(t=0,I=(u+208|0)==(0|r)?u+112|0:u+208|0,(0|c)<=0)break i;for(i=I,a=r;;){if((v=d[(K=a+re|0)>>2])<(m=d[fe>>2])){if(f[i>>2]=f[a>>2],f[i+4>>2]=f[a+4>>2],8&(t=t+1|0))break t;m=d[fe>>2],v=d[K>>2],i=i+8|0}if(K=a+8|0,(v<m|0)!=((b=d[(de=(me=(0|c)>1)?K:r)+re>>2])<m|0)){if(h=d[(pe=a)+(a=we<<2)>>2],d[i+a>>2]=h+y(y(m-v)*y(y(d[a+de>>2]-h)/y(b-v))),f[i+re>>2]=f[fe>>2],8&(t=t+1|0))break t;i=i+8|0}if(c=c+-1|0,a=K,!me)break}}else I=(u+208|0)==(0|r)?u+112|0:u+208|0,t=0;if(r=(u+208|0)==(0|I)?u+112|0:u+208|0,a=1,!Ce)continue;break t}break}I=r,t=c}if((u+208|0)!=(0|I)&&It(u+208|0,I,t<<3),!((0|t)<1)){for(h=y(y(1)/y(y(F*w)-y(E*N))),v=y(h*y(-E)),b=y(w*h),N=y(N*h),z=y(F*h),D=d[(be<<2)+ve>>2],w=d[(32|(i=Ee<<2))+P>>2],E=d[(32|(a=Se<<2))+P>>2],F=d[(16|i)+P>>2],U=d[(16|a)+P>>2],G=d[ye>>2],V=d[ge>>2],a=0,Y=d[u+336>>2],X=d[u+332>>2],H=d[u+328>>2],i=0;r=(u+112|0)+g(a,12)|0,B=d[(c=i<<3)+(u+208|0)>>2],m=y(B-T),L=d[(u+208|0)+(4|c)>>2],W=y(L-O),h=y(y(b*m)-y(N*W)),m=y(y(v*m)+y(z*W)),W=y(y(H+y(h*V))+y(m*G)),d[r>>2]=W,oe=y(y(X+y(h*U))+y(m*F)),d[r+4>>2]=oe,h=y(y(Y+y(h*E))+y(m*w)),d[r+8>>2]=h,h=y(D-y(y(y(C*W)+y(x*oe))+y(p*h))),d[(u+80|0)+(a<<2)>>2]=h,h>=y(0)&&(d[(r=a<<3)+(u+208|0)>>2]=B,d[(u+208|0)+(4|r)>>2]=L,a=a+1|0),(0|(i=i+1|0))!=(0|t););if(!((0|a)<1)){t:if((0|a)<=(0|(r=(0|(t=(0|a)<4?a:4))>1?t:1))){if((0|n)>=4){for(t=0;i=(u+112|0)+g(t,12)|0,p=d[s>>2],h=d[(u+80|0)+(t<<2)>>2],d[u+32>>2]=y(d[i>>2]+d[e>>2])-y(p*h),x=d[s+4>>2],d[u+36>>2]=y(d[i+4>>2]+d[e+4>>2])-y(h*x),m=d[s+8>>2],d[u+40>>2]=y(d[i+8>>2]+d[e+8>>2])-y(h*m),f[u+76>>2]=0,d[u+72>>2]=-m,d[u+68>>2]=-x,d[u+64>>2]=-p,o[f[f[_>>2]+16>>2]](_,u- -64|0,u+32|0,y(-h)),(0|a)!=(0|(t=t+1|0)););break t}for(t=0;i=(u+112|0)+g(t,12)|0,d[u+32>>2]=d[i>>2]+d[e>>2],d[u+36>>2]=d[i+4>>2]+d[e+4>>2],d[u+40>>2]=d[i+8>>2]+d[e+8>>2],h=d[s>>2],p=d[s+4>>2],x=d[s+8>>2],f[u+76>>2]=0,d[u+72>>2]=-x,d[u+68>>2]=-p,d[u+64>>2]=-h,o[f[f[_>>2]+16>>2]](_,u- -64|0,u+32|0,y(-d[(u+80|0)+(t<<2)>>2])),(0|a)!=(0|(t=t+1|0)););}else{if(i=0,(0|a)>=2)for(m=d[u+80>>2],t=1;m=(c=(h=d[(u+80|0)+(t<<2)>>2])>m)?h:m,i=c?t:i,(0|a)!=(0|(t=t+1|0)););for(it(a,u+208|0,r,i,u+32|0),c=(0|n)>3,t=0;i=f[(u+32|0)+(t<<2)>>2],a=(u+112|0)+g(i,12)|0,m=y(d[a>>2]+d[e>>2]),d[u+64>>2]=m,v=y(d[a+4>>2]+d[e+4>>2]),d[u+68>>2]=v,b=y(d[a+8>>2]+d[e+8>>2]),d[u+72>>2]=b,c?(p=d[s>>2],x=d[s+4>>2],h=d[s+8>>2],f[u+28>>2]=0,d[u+24>>2]=-h,d[u+20>>2]=-x,d[u+16>>2]=-p,f[u+12>>2]=0,T=h,h=d[(u+80|0)+(i<<2)>>2],d[u+8>>2]=b-y(T*h),d[u+4>>2]=v-y(x*h),d[u>>2]=m-y(p*h),o[f[f[_>>2]+16>>2]](_,u+16|0,u,y(-h))):(h=d[s>>2],p=d[s+4>>2],x=d[s+8>>2],f[u+28>>2]=0,d[u+24>>2]=-x,d[u+20>>2]=-p,d[u+16>>2]=-h,o[f[f[_>>2]+16>>2]](_,u+16|0,u- -64|0,y(-d[(u+80|0)+(i<<2)>>2]))),(0|r)!=(0|(t=t+1|0)););}f[l>>2]=n}}}}R=u+384|0}(t+48|0,i+112|0,i+24|0,t+112|0,i- -64|0,i+8|0,i+48|0,i+44|0,i+40|0,n),R=i+160|0}function Bt(e,t,n,i,o,a,r){var s,c,l=y(0),_=y(0),u=0,h=0,p=y(0),m=y(0),v=y(0);if(s=R-16|0,f[i>>2]=2139095039,u=-8388609,f[o>>2]=-8388609,c=f[e+8>>2],l=y(-34028234663852886e22),!((0|c)<1)){for(u=0;h=f[e+16>>2]+(u<<4)|0,l=d[h>>2],_=d[h+4>>2],p=d[h+8>>2],m=y(y(y(y(l*d[t>>2])+y(_*d[t+4>>2]))+y(p*d[t+8>>2]))+d[t+48>>2]),v=y(y(y(y(l*d[t+16>>2])+y(_*d[t+20>>2]))+y(p*d[t+24>>2]))+d[t+52>>2]),_=y(y(y(y(l*d[t+32>>2])+y(_*d[t+36>>2]))+y(p*d[t+40>>2]))+d[t+56>>2]),(l=y(y(y(m*d[n>>2])+y(v*d[n+4>>2]))+y(_*d[n+8>>2])))<d[i>>2]&&(d[i>>2]=l,f[a+12>>2]=0,d[a+8>>2]=_,d[a+4>>2]=v,d[a>>2]=m),l>d[o>>2]&&(d[o>>2]=l,f[r+12>>2]=0,d[r+8>>2]=_,d[r+4>>2]=v,d[r>>2]=m),(0|c)!=(0|(u=u+1|0)););u=f[o>>2],l=d[o>>2]}(_=d[i>>2])>l&&(f[i>>2]=u,d[o>>2]=_,e=f[a+12>>2],f[s+8>>2]=f[a+8>>2],f[s+12>>2]=e,e=f[a+4>>2],f[s>>2]=f[a>>2],f[s+4>>2]=e,e=f[r+12>>2],f[a+8>>2]=f[r+8>>2],f[a+12>>2]=e,e=f[r+4>>2],f[a>>2]=f[r>>2],f[a+4>>2]=e,e=f[s+12>>2],f[r+8>>2]=f[s+8>>2],f[r+12>>2]=e,e=f[s+4>>2],f[r>>2]=f[s>>2],f[r+4>>2]=e)}function kt(e,t){var n=0,i=0,r=0,s=0,c=0,l=0;if(h[e+164|0]){if((0|(n=f[e+128>>2]))==f[e+132>>2]&&!((0|n)>=(0|(i=n?n<<1:1)))){i&&(f[6257]=f[6257]+1,s=0|o[f[4968]](i<<2,16),n=f[e+128>>2]),r=f[e+136>>2];e:{t:{if((0|n)>=1)for(;;)if(f[(l=c<<2)+s>>2]=f[r+l>>2],(0|(c=c+1|0))==(0|n))break t;if(!r)break e}h[e+140|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+136>>2]=0,n=f[e+128>>2]}f[e+136>>2]=s,f[e+132>>2]=i,a[e+140|0]=1}return i=n<<2,n=f[e+136>>2],f[i+n>>2]=t,f[e+128>>2]=f[e+128>>2]+1,void(f[f[e+32>>2]+4>>2]=n)}if((0|(n=f[e+148>>2]))==f[e+152>>2]&&!((0|n)>=(0|(i=n?n<<1:1)))){i&&(f[6257]=f[6257]+1,s=0|o[f[4968]](i<<1,16),n=f[e+148>>2]),r=f[e+156>>2];e:{t:{if((0|n)>=1)for(;;)if(u[(l=c<<1)+s>>1]=p[r+l>>1],(0|(c=c+1|0))==(0|n))break t;if(!r)break e}h[e+160|0]&&(r&&(f[6258]=f[6258]+1,o[f[4969]](r)),n=f[e+148>>2]),f[e+156>>2]=0}f[e+156>>2]=s,f[e+152>>2]=i,a[e+160|0]=1}s=f[e+156>>2],u[s+(n<<1)>>1]=t,f[e+148>>2]=n+1,f[f[e+32>>2]+4>>2]=s}function jt(e){var t,n=0;R=t=R-48|0,f[t+44>>2]=0,f[t+36>>2]=0,f[t+40>>2]=0,f[t+32>>2]=1065353216,o[f[f[e>>2]+68>>2]](t+16|0,e,t+32|0),d[e+36>>2]=d[t+16>>2]+d[e+16>>2],f[t+32>>2]=-1082130432,o[f[f[e>>2]+68>>2]](t,e,t+32|0),n=f[t+12>>2],f[t+24>>2]=f[t+8>>2],f[t+28>>2]=n,n=f[t+4>>2],f[t+16>>2]=f[t>>2],f[t+20>>2]=n,d[e+20>>2]=d[t+16>>2]-d[e+16>>2],f[t+32>>2]=0,f[t+36>>2]=0,f[t+40>>2]=0,f[t+44>>2]=0,f[t+36>>2]=1065353216,o[f[f[e>>2]+68>>2]](t+16|0,e,t+32|0),d[e+40>>2]=d[t+20>>2]+d[e+16>>2],f[t+36>>2]=-1082130432,o[f[f[e>>2]+68>>2]](t,e,t+32|0),n=f[t+12>>2],f[t+24>>2]=f[t+8>>2],f[t+28>>2]=n,n=f[t+4>>2],f[t+16>>2]=f[t>>2],f[t+20>>2]=n,d[e+24>>2]=d[t+20>>2]-d[e+16>>2],f[t+40>>2]=0,f[t+44>>2]=0,f[t+32>>2]=0,f[t+36>>2]=0,f[t+40>>2]=1065353216,o[f[f[e>>2]+68>>2]](t+16|0,e,t+32|0),d[e+44>>2]=d[t+24>>2]+d[e+16>>2],f[t+40>>2]=-1082130432,o[f[f[e>>2]+68>>2]](t,e,t+32|0),n=f[t+12>>2],f[t+24>>2]=f[t+8>>2],f[t+28>>2]=n,n=f[t+4>>2],f[t+16>>2]=f[t>>2],f[t+20>>2]=n,d[e+28>>2]=d[t+24>>2]-d[e+16>>2],R=t+48|0}function Gt(e){var t=0;return f[(e|=0)>>2]=11020,(t=f[e+68>>2])&&(Bi(t),(t=f[e+68>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t))),(t=f[e+172>>2])&&(h[e+176|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+172>>2]=0),f[e+172>>2]=0,f[e+164>>2]=0,f[e+168>>2]=0,a[e+176|0]=1,(t=f[e+152>>2])&&(h[e+156|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+152>>2]=0),f[e+152>>2]=0,f[e+144>>2]=0,f[e+148>>2]=0,a[e+156|0]=1,(t=f[e+132>>2])&&(h[e+136|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+132>>2]=0),f[e+132>>2]=0,f[e+124>>2]=0,f[e+128>>2]=0,a[e+136|0]=1,(t=f[e+112>>2])&&(h[e+116|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+112>>2]=0),f[e+112>>2]=0,f[e+104>>2]=0,f[e+108>>2]=0,a[e+116|0]=1,(t=f[e+92>>2])&&(h[e+96|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+92>>2]=0),f[e+92>>2]=0,f[e+84>>2]=0,f[e+88>>2]=0,a[e+96|0]=1,(t=f[e+28>>2])&&(h[e+32|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+28>>2]=0),f[e+28>>2]=0,f[e+20>>2]=0,f[e+24>>2]=0,a[e+32|0]=1,0|e}function Vt(e,t){var n=0,i=0,o=0,a=0;e:if(!((0|(i=f[e+548>>2]))<1)){for(o=f[e+556>>2];;){if(f[o+(n<<2)>>2]!=(0|t)){if((0|i)!=(0|(n=n+1|0)))continue;break e}break}if(!((0|n)>=(0|i))){n=0;t:{for(;;){if(f[(a=o+(n<<2)|0)>>2]!=(0|t)){if((0|i)!=(0|(n=n+1|0)))continue;break t}break}(0|i)<=(0|n)||(i=(n=i+-1|0)<<2,f[a>>2]=f[i+o>>2],f[i+f[e+556>>2]>>2]=t,f[e+548>>2]=n)}if(i=f[t+32>>2],(0|(o=f[t+28>>2]))==(0|e)){t:if(!((0|(t=f[e+288>>2]))<1)){for(o=f[e+296>>2],n=0;;){if((0|i)!=f[(a=o+(n<<2)|0)>>2]){if((0|(n=n+1|0))!=(0|t))continue;break t}break}(0|t)<=(0|n)||(n=(t=t+-1|0)<<2,f[a>>2]=f[n+o>>2],f[n+f[e+296>>2]>>2]=i,f[e+288>>2]=t)}return void(f[e+280>>2]=(0|t)>0)}t:if(!((0|(t=f[i+288>>2]))<1)){for(e=f[i+296>>2],n=0;;){if((0|o)!=f[(a=e+(n<<2)|0)>>2]){if((0|(n=n+1|0))!=(0|t))continue;break t}break}(0|t)<=(0|n)||(n=e,e=(t=t+-1|0)<<2,f[a>>2]=f[n+e>>2],f[e+f[i+296>>2]>>2]=o,f[i+288>>2]=t)}f[i+280>>2]=(0|t)>0}}}function Ht(e,t,n){var i,o=0,a=y(0),r=y(0),s=y(0);R=i=R-80|0,f[e+240>>2]&&(d[e+176>>2]=d[e+64>>2]+d[e+176>>2],d[e+192>>2]=d[e+80>>2]+d[e+192>>2],d[e+180>>2]=d[e+68>>2]+d[e+180>>2],d[e+184>>2]=d[e+72>>2]+d[e+184>>2],d[e+196>>2]=d[e+84>>2]+d[e+196>>2],d[e+200>>2]=d[e+88>>2]+d[e+200>>2],(d[e+144>>2]!=y(0)|d[e+148>>2]!=y(0)|d[e+152>>2]!=y(0)|d[e+160>>2]!=y(0)||d[e+164>>2]!=y(0)||d[e+168>>2]!=y(0))&&(a=d[e+164>>2],r=d[e+168>>2],s=d[e+160>>2],f[i+12>>2]=0,d[i>>2]=s*n,d[i+8>>2]=r*n,d[i+4>>2]=a*n,We(e,e+144|0,i,t,i+16|0),o=f[i+28>>2],f[e+8>>2]=f[i+24>>2],f[e+12>>2]=o,o=f[i+20>>2],f[e>>2]=f[i+16>>2],f[e+4>>2]=o,o=f[i+44>>2],f[e+24>>2]=f[i+40>>2],f[e+28>>2]=o,o=f[i+36>>2],f[e+16>>2]=f[i+32>>2],f[e+20>>2]=o,o=f[i+52>>2],f[e+32>>2]=f[i+48>>2],f[e+36>>2]=o,o=f[i+60>>2],f[e+40>>2]=f[i+56>>2],f[e+44>>2]=o,o=f[i+68>>2],f[e+48>>2]=f[i+64>>2],f[e+52>>2]=o,o=f[i+76>>2],f[e+56>>2]=f[i+72>>2],f[e+60>>2]=o)),R=i+80|0}function Wt(e,t){var n=0,i=0,a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0);if(f[e>>2]==(0|t))return f[e>>2]=0,0;i=f[t+32>>2],n=f[36+(((f[i+40>>2]!=(0|t))<<2)+i|0)>>2];e:{if(t=f[i+32>>2])for(f[36+((((0|i)==f[t+40>>2])<<2)+t|0)>>2]=n,f[n+32>>2]=t,(n=f[e+4>>2])&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+4>>2]=i;;){if(A=d[t>>2],i=f[t+36>>2],a=d[i>>2],n=f[t+40>>2],a=a<(u=d[n>>2])?a:u,d[t>>2]=a,u=d[t+16>>2],r=(r=d[i+16>>2])>(h=d[n+16>>2])?r:h,d[t+16>>2]=r,h=d[t+4>>2],s=(s=d[i+4>>2])<(p=d[n+4>>2])?s:p,d[t+4>>2]=s,p=d[t+20>>2],c=(c=d[i+20>>2])>(m=d[n+20>>2])?c:m,d[t+20>>2]=c,m=d[t+8>>2],l=(l=d[i+8>>2])<(v=d[n+8>>2])?l:v,d[t+8>>2]=l,v=d[t+24>>2],_=(_=d[i+24>>2])>(g=d[n+24>>2])?_:g,d[t+24>>2]=_,!(p!=c|u!=r|A!=a|h!=s)&&m==l&&v==_)break e;if(!(t=f[t+32>>2]))break}else f[e>>2]=n,f[n+32>>2]=0,(t=f[e+4>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+4>>2]=i;t=f[e>>2]}return t}function qt(e,t,n,i){var o,a,r,s,c=0,l=0,_=0,u=0,h=0,p=0,m=0;for(R=o=R-16|0,_=f[e+12>>2],s=f[8+(u=_+((n+i|0)/2<<4)|0)>>2],a=f[u+4>>2],r=f[u>>2],u=n,h=i;;){e:{if(!((0|(l=f[4+(c=(u<<4)+_|0)>>2]))<(0|a))){if((0|l)!=(0|a))break e;if(!((0|(l=f[c>>2]))<(0|r))&&(0|l)!=(0|r)|f[c+8>>2]>=(0|s))break e}u=u+1|0;continue}for(;;){e:{if(!((0|a)<(0|(p=f[4+(l=(m=h<<4)+_|0)>>2])))){if((0|a)!=(0|p))break e;if(!((0|r)<(0|(p=f[l>>2])))&&(0|r)!=(0|p)|(0|s)>=f[l+8>>2])break e}h=h+-1|0;continue}break}if((0|u)<=(0|h)&&(_=f[c+12>>2],f[o+8>>2]=f[c+8>>2],f[o+12>>2]=_,_=f[c+4>>2],f[o>>2]=f[c>>2],f[o+4>>2]=_,_=f[l+4>>2],f[c>>2]=f[l>>2],f[c+4>>2]=_,_=f[l+12>>2],f[c+8>>2]=f[l+8>>2],f[c+12>>2]=_,_=f[o+4>>2],c=f[e+12>>2]+m|0,f[c>>2]=f[o>>2],f[c+4>>2]=_,l=f[o+12>>2],f[c+8>>2]=f[o+8>>2],f[c+12>>2]=l,h=h+-1|0,u=u+1|0),!((0|u)<=(0|h)))break;_=f[e+12>>2]}(0|h)>(0|n)&&qt(e,t,n,h),(0|u)<(0|i)&&qt(e,t,u,i),R=o+16|0}function Yt(e){var t,n,i=y(0),o=y(0);if(c(e),(t=2147483647&(n=l(0)))>>>0>=1065353216)return y(1065353216==(0|t)?(0|n)<0?3.141592502593994:0:y(0)/y(e-e));e:{if(t>>>0<=1056964607){if(i=y(1.570796251296997),t>>>0<847249409)break e;return i=y(e*e),y(y(y(y(7.549789415861596e-8)-y(y(y(i*y(y(i*y(y(i*y(-.008656363002955914))+y(-.04274342209100723)))+y(.16666586697101593)))/y(y(i*y(-.7066296339035034))+y(1)))*e))-e)+y(1.570796251296997))}if((0|n)<=-1)return e=y(y(e+y(1))*y(.5)),i=y(S(e)),e=y(y(1.570796251296997)-y(i+y(y(i*y(y(e*y(y(e*y(y(e*y(-.008656363002955914))+y(-.04274342209100723)))+y(.16666586697101593)))/y(y(e*y(-.7066296339035034))+y(1))))+y(-7.549789415861596e-8)))),y(e+e);e=y(y(y(1)-e)*y(.5)),s(0,-4096&(c(o=y(S(e))),l(0))),i=_(),e=y(y(y(y(y(e*y(y(e*y(y(e*y(-.008656363002955914))+y(-.04274342209100723)))+y(.16666586697101593)))/y(y(e*y(-.7066296339035034))+y(1)))*o)+y(y(e-y(i*i))/y(o+i)))+i),i=y(e+e)}return i}function Xt(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=y(0);a=y(o[f[f[e>>2]+48>>2]](e)),I=d[t+52>>2],c=d[t+24>>2],l=d[t+20>>2],_=d[t+56>>2],u=d[t+40>>2],h=d[e+68>>2],g=d[e+84>>2],x=d[t+36>>2],r=d[e- -64>>2],b=d[e+80>>2],R=d[t+48>>2],C=d[t+8>>2],S=d[t>>2],E=d[t+4>>2],w=d[t+16>>2],T=d[t+32>>2],s=d[e+60>>2],P=d[e+76>>2],f[n+12>>2]=0,p=_,_=y(y(P+s)*y(.5)),m=y(y(b+r)*y(.5)),v=y(y(g+h)*y(.5)),p=y(p+y(y(y(T*_)+y(x*m))+y(u*v))),s=y(a+y(y(P-s)*y(.5))),r=y(a+y(y(b-r)*y(.5))),a=y(a+y(y(g-h)*y(.5))),u=y(y(y(s*y(A(T)))+y(r*y(A(x))))+y(a*y(A(u)))),d[n+8>>2]=p-u,h=y(I+y(y(y(_*w)+y(m*l))+y(v*c))),c=y(y(y(s*y(A(w)))+y(r*y(A(l))))+y(a*y(A(c)))),d[n+4>>2]=h-c,l=y(R+y(y(y(_*S)+y(m*E))+y(v*C))),a=y(y(y(s*y(A(S)))+y(r*y(A(E))))+y(a*y(A(C)))),d[n>>2]=l-a,f[i+12>>2]=0,d[i+8>>2]=u+p,d[i+4>>2]=c+h,d[i>>2]=a+l}function Qt(e,t,n,i,o,r){var s=0,c=0,l=0;e:if(h[i+55|0]!=(0|t)){if(c=f[4276+(s=o<<2)>>2],y(y(y(y(d[i>>2]*d[n+16>>2])+y(d[i+4>>2]*d[n+20>>2]))+y(d[i+8>>2]*d[n+24>>2]))-d[i+16>>2])<y(-9999999747378752e-21)){if(!(e=tt(t=e,f[(e=i+20|0)+(c<<2)>>2],f[e+s>>2],n,0)))break e;return f[e+32>>2]=i,a[e+52|0]=o,a[52+(i+o|0)|0]=0,f[32+((o<<2)+i|0)>>2]=e,(t=f[r>>2])?(f[t+36>>2]=e,a[t+53|0]=2,f[e+40>>2]=t,a[e+54|0]=1):f[r+4>>2]=e,f[r>>2]=e,f[r+8>>2]=f[r+8>>2]+1,1}a[i+55|0]=t,Qt(e,t,n,f[32+((c<<2)+i|0)>>2],h[52+(i+c|0)|0],r)&&(o=t,t=f[s+4288>>2],Qt(e,o,n,f[32+((t<<2)+i|0)>>2],h[52+(t+i|0)|0],r)&&((t=f[i+48>>2])&&(f[t+44>>2]=f[i+44>>2]),(t=f[i+44>>2])&&(f[t+48>>2]=f[i+48>>2]),f[e+18496>>2]==(0|i)&&(f[e+18496>>2]=f[i+48>>2]),f[(t=e+18500|0)>>2]=f[t>>2]+-1,f[i+44>>2]=0,f[i+48>>2]=f[e+18504>>2],(t=f[e+18504>>2])&&(f[t+44>>2]=i),f[e+18504>>2]=i,l=1,f[(e=e+18508|0)>>2]=f[e>>2]+1))}return l}function Kt(e,t,n){var i,r,s,c,l,_=0,u=0,p=0,m=0,d=0;if(R=i=R-32|0,_=f[e+52>>2],l=h[e+68|0],c=f[(s=l?n:t)+4>>2],(0|_)<(0|(r=f[c+20>>2]))){if(f[e+56>>2]<(0|r)){if(r?(f[6257]=f[6257]+1,m=0|o[f[4968]](r<<2,16),u=f[e+52>>2]):u=_,(0|u)>=1)for(;f[(d=p<<2)+m>>2]=f[f[e+60>>2]+d>>2],(0|u)!=(0|(p=p+1|0)););(u=f[e+60>>2])&&(h[e- -64|0]&&u&&(f[6258]=f[6258]+1,o[f[4969]](u)),f[e+60>>2]=0),f[e+60>>2]=m,f[e+56>>2]=r,a[e- -64|0]=1}for(;f[f[e+60>>2]+(_<<2)>>2]=0,(0|r)!=(0|(_=_+1|0)););}if(f[e+52>>2]=r,(0|r)>=1)for(t=l?t:n,_=0;f[c+68>>2]?f[f[e+60>>2]+(_<<2)>>2]=0:(n=f[s+12>>2],u=f[s+8>>2],f[i+12>>2]=f[64+(f[c+28>>2]+g(_,80)|0)>>2],f[i+16>>2]=u,f[i+20>>2]=n,f[i+28>>2]=_,f[i+24>>2]=-1,f[i+8>>2]=s,n=f[e+4>>2],n=0|o[f[f[n>>2]+8>>2]](n,i+8|0,t,f[e+72>>2],1),f[f[e+60>>2]+(_<<2)>>2]=n),(0|r)!=(0|(_=_+1|0)););R=i+32|0}function Zt(e,t){var n,i=0,o=0,a=0,r=y(0);if(c(t),!((n=2147483647&(i=l(0)))>>>0<=2139095040&&(c(e),(o=2147483647&(a=l(0)))>>>0<2139095041)))return y(e+t);if(1065353216==(0|i))return ln(e);i=a>>>31|0|(a=i>>>30&2);e:{t:{n:{i:{if(!o){o:switch(i-2|0){case 0:break i;case 1:break o;default:break n}return y(-3.1415927410125732)}if(2139095040!=(0|n)){if(!n|!(n+218103808>>>0>=o>>>0&&2139095040!=(0|o)))break e;if(o+218103808>>>0<n>>>0&&(r=y(0),a)||(r=ln(y(A(y(e/t))))),e=r,i>>>0<=2){o:switch(i-1|0){case 0:return y(-e);case 1:break o;default:break n}return y(y(3.1415927410125732)-y(e+y(8.742277657347586e-8)))}return y(y(e+y(8.742277657347586e-8))+y(-3.1415927410125732))}if(2139095040==(0|o))break t;return d[19376+(i<<2)>>2]}e=y(3.1415927410125732)}return e}return d[19360+(i<<2)>>2]}return s(0,-2147483648&(c(e),l(0))|1070141403),_()}function Jt(e,t,n,i,o,a,r){var s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),f=y(0),h=y(0),p=y(0);return s=d[i>>2],_=d[i+4>>2],u=d[i+8>>2],h=y(y(y(d[n>>2]*s)+y(d[n+4>>2]*_))+y(d[n+8>>2]*u)),c=y(y(y(s*d[e>>2])+y(_*d[e+16>>2]))+y(u*d[e+32>>2])),l=d[o+80>>2],f=y(c*(c<y(0)?y(-l):l)),c=y(y(y(s*d[e+4>>2])+y(_*d[e+20>>2]))+y(u*d[e+36>>2])),l=d[o+84>>2],f=y(f+y(c*(c<y(0)?y(-l):l))),c=y(y(y(s*d[e+8>>2])+y(_*d[e+24>>2]))+y(u*d[e+40>>2])),l=d[o+88>>2],f=(c=y(f+y(c*(c<y(0)?y(-l):l))))>(l=d[o+96>>2])?c:l,c=y(y(y(s*d[t>>2])+y(_*d[t+16>>2]))+y(u*d[t+32>>2])),l=d[a+80>>2],p=y(c*(c<y(0)?y(-l):l)),c=y(y(y(s*d[t+4>>2])+y(_*d[t+20>>2]))+y(u*d[t+36>>2])),l=d[a+84>>2],s=y(y(y(s*d[t+8>>2])+y(_*d[t+24>>2]))+y(u*d[t+40>>2])),_=d[a+88>>2],s=y(y(p+y(c*(c<y(0)?y(-l):l)))+y(s*(s<y(0)?y(-_):_))),_=d[a+96>>2],s=y(f+(s>_?s:_)),((_=y(h+s))<(s=y(s-h))?_:s)>r^1}function $t(e,t,n,i,a,r){var s=y(0),_=y(0),u=y(0),h=y(0),p=0,m=0,v=0,g=0,A=0,x=y(0),b=y(0),C=y(0),E=y(0),w=y(0);o[f[f[e>>2]+8>>2]](e,t,a,r),s=d[n+8>>2],_=d[n+4>>2],h=d[a+8>>2],t=f[a+8>>2],x=d[a+4>>2],p=f[a+4>>2],b=d[a>>2],m=f[a>>2],C=d[r+8>>2],v=f[r+8>>2],E=d[r+4>>2],g=f[r+4>>2],w=d[r>>2],A=f[r>>2],(u=d[n>>2])>y(0)?(c(y(u+w)),A=l(0)):(c(y(u+b)),m=l(0)),_>y(0)?(c(y(_+E)),g=l(0)):(c(y(_+x)),p=l(0)),s>y(0)?(c(y(s+C)),v=l(0)):(c(y(s+h)),t=l(0)),s=d[i+8>>2],_=d[i>>2],u=d[i+4>>2],h=y(o[f[f[e>>2]+16>>2]](e)),f[a+12>>2]=0,f[a+8>>2]=t,f[a+4>>2]=p,f[a>>2]=m,f[r+12>>2]=0,f[r+8>>2]=v,f[r+4>>2]=g,f[r>>2]=A,s=y(h*y(S(y(y(y(_*_)+y(u*u))+y(s*s))))),d[a>>2]=d[a>>2]-s,d[a+4>>2]=d[a+4>>2]-s,d[a+8>>2]=d[a+8>>2]-s,d[r>>2]=s+d[r>>2],d[r+4>>2]=s+d[r+4>>2],d[r+8>>2]=s+d[r+8>>2]}function en(e,t,n,i){var a,r,s=0,c=0;R=a=R+-64|0,s=(r=g(t,80))+f[e+28>>2]|0,c=f[(t=n)+4>>2],f[s>>2]=f[t>>2],f[s+4>>2]=c,c=f[t+12>>2],f[s+8>>2]=f[t+8>>2],f[s+12>>2]=c,c=f[t+28>>2],f[s+24>>2]=f[t+24>>2],f[s+28>>2]=c,c=f[t+20>>2],f[s+16>>2]=f[t+16>>2],f[s+20>>2]=c,c=f[t+44>>2],f[s+40>>2]=f[t+40>>2],f[s+44>>2]=c,c=f[t+36>>2],f[s+32>>2]=f[t+32>>2],f[s+36>>2]=c,c=f[t+60>>2],f[s+56>>2]=f[t+56>>2],f[s+60>>2]=c,c=f[t+52>>2],f[s+48>>2]=f[t+48>>2],f[s+52>>2]=c,f[e+68>>2]&&(t=f[64+(f[e+28>>2]+r|0)>>2],o[f[f[t>>2]+8>>2]](t,n,a+48|0,a+32|0),n=f[(t=a)+60>>2],s=f[t+56>>2],f[t+8>>2]=s,f[t+12>>2]=n,n=f[t+44>>2],f[t+24>>2]=f[t+40>>2],f[t+28>>2]=n,n=f[t+36>>2],f[t+16>>2]=f[t+32>>2],f[t+20>>2]=n,n=f[t+52>>2],f[t>>2]=f[t+48>>2],f[t+4>>2]=n,fi(f[e+68>>2],f[76+(f[e+28>>2]+r|0)>>2],t)),i&&o[f[f[e>>2]+68>>2]](e),R=a- -64|0}function tn(e,t,n){var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),f=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0);return i=d[e+552>>2],o=d[t>>2],a=d[e+568>>2],r=d[t+4>>2],s=d[e+584>>2],c=d[t+8>>2],_=d[e+620>>2],u=d[e+636>>2],l=d[e+652>>2],f=y(y(y(_*d[n>>2])+y(u*d[n+4>>2]))+y(l*d[n+8>>2])),h=d[t+16>>2],p=d[t+20>>2],m=d[t+24>>2],v=y(y(y(_*d[n+16>>2])+y(u*d[n+20>>2]))+y(l*d[n+24>>2])),g=y(y(y(y(y(i*o)+y(a*r))+y(s*c))*f)+y(y(y(y(i*h)+y(a*p))+y(s*m))*v)),A=i,i=d[t+32>>2],x=a,a=d[t+36>>2],b=s,s=d[t+40>>2],l=y(y(y(_*d[n+32>>2])+y(u*d[n+36>>2]))+y(l*d[n+40>>2])),_=o,o=d[e+556>>2],u=r,r=d[e+572>>2],C=c,c=d[e+588>>2],y(Zt(y(g+y(y(y(y(A*i)+y(x*a))+y(b*s))*l)),y(y(y(y(y(y(_*o)+y(u*r))+y(C*c))*f)+y(y(y(y(h*o)+y(p*r))+y(m*c))*v))+y(y(y(y(i*o)+y(a*r))+y(s*c))*l)))*d[e+732>>2])}function nn(e){f[e>>2]=1025,f[e+120>>2]=0,f[e+124>>2]=0,f[e+128>>2]=0,f[e+132>>2]=0,f[e+136>>2]=0,f[e+140>>2]=0,f[e+144>>2]=0,f[e+148>>2]=0,f[e+152>>2]=0,f[e+156>>2]=0,f[e+160>>2]=0,f[e+164>>2]=0,f[e+168>>2]=0,f[e+328>>2]=0,f[e+332>>2]=0,f[e+336>>2]=0,f[e+340>>2]=0,f[e+344>>2]=0,f[e+348>>2]=0,f[e+352>>2]=0,f[e+356>>2]=0,f[e+360>>2]=0,f[e+364>>2]=0,f[e+368>>2]=0,f[e+372>>2]=0,f[e+376>>2]=0,f[e+536>>2]=0,f[e+540>>2]=0,f[e+544>>2]=0,f[e+548>>2]=0,f[e+552>>2]=0,f[e+556>>2]=0,f[e+560>>2]=0,f[e+564>>2]=0,f[e+568>>2]=0,f[e+572>>2]=0,f[e+576>>2]=0,f[e+580>>2]=0,f[e+584>>2]=0,f[e+792>>2]=0,f[e+784>>2]=0,f[e+788>>2]=0,f[e+776>>2]=0,f[e+780>>2]=0,f[e+768>>2]=0,f[e+772>>2]=0,f[e+760>>2]=0,f[e+764>>2]=0,f[e+752>>2]=0,f[e+756>>2]=0,f[e+744>>2]=0,f[e+748>>2]=0,f[e+836>>2]=0,f[e+840>>2]=0,f[e+864>>2]=0,f[e+844>>2]=0}function on(e){var t=0,n=0,i=0,r=0,s=0,c=0;if((t=f[e+16>>2])&&(h[e+20|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+16>>2]=0),f[e+16>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0,a[e+20|0]=1,(t=f[e+36>>2])&&(h[e+40|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+36>>2]=0),f[e+36>>2]=0,f[e+28>>2]=0,f[e+32>>2]=0,a[e+40|0]=1,(t=f[e+56>>2])&&(h[e+60|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+56>>2]=0),t=0,f[e+56>>2]=0,f[e+48>>2]=0,f[e+52>>2]=0,a[e+60|0]=1,f[e+12>>2]<=1){if(f[6257]=f[6257]+1,r=0|o[f[4968]](24,16),(0|(s=f[e+8>>2]))>=1)for(;i=(n=g(t,12))+f[e+16>>2]|0,c=f[i+4>>2],f[(n=n+r|0)>>2]=f[i>>2],f[n+4>>2]=c,f[n+8>>2]=f[i+8>>2],(0|s)!=(0|(t=t+1|0)););(t=f[e+16>>2])&&(h[e+20|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+16>>2]=0),f[e+16>>2]=r,a[e+20|0]=1,f[e+12>>2]=2}pt(e)}function an(e,t){var n,i,r=0,s=0,c=0,l=0,_=0,u=0,p=0,m=0;if((0|(c=f[e+4>>2]))==f[e+8>>2]&&(yt(e,c?c<<1:1),c=f[e+4>>2]),r=(i=f[e+12>>2])+g(c,36)|0,f[r+12>>2]=0,a[r+16|0]=1,f[r+4>>2]=0,f[r+8>>2]=0,(0|(n=f[t+4>>2]))>=1){f[6257]=f[6257]+1,u=n<<2,l=0|o[f[4968]](u,16),_=f[r+12>>2];e:{t:{if((0|(p=f[r+4>>2]))>=1)for(;;)if(f[l+(m=s<<2)>>2]=f[_+m>>2],(0|p)==(0|(s=s+1|0)))break t;if(!_)break e}h[r+16|0]&&_&&(f[6258]=f[6258]+1,o[f[4969]](_))}for(a[r+16|0]=1,f[r+12>>2]=l,f[r+8>>2]=n,s=0,dn(l,0,u),f[r+4>>2]=n,_=f[t+12>>2],r=f[r+12>>2];f[(l=s<<2)+r>>2]=f[_+l>>2],(0|n)!=(0|(s=s+1|0)););}else f[r+4>>2]=n;s=f[t+24>>2],r=g(c,36)+i|0,f[r+20>>2]=f[t+20>>2],f[r+24>>2]=s,s=f[t+32>>2],f[r+28>>2]=f[t+28>>2],f[r+32>>2]=s,f[e+4>>2]=f[e+4>>2]+1}function rn(e,t,n,i,o){var a;R=a=R-32|0,f[a+28>>2]=e,f[a+24>>2]=t,f[a+20>>2]=n,f[a+16>>2]=i,d[a+12>>2]=o,t=f[a+24>>2],n=f[t+4>>2],e=f[a+28>>2],f[e>>2]=f[t>>2],f[e+4>>2]=n,n=f[t+12>>2],f[e+8>>2]=f[t+8>>2],f[e+12>>2]=n,t=f[a+20>>2],n=f[t+4>>2],f[e+16>>2]=f[t>>2],f[e+20>>2]=n,n=f[t+12>>2],f[e+24>>2]=f[t+8>>2],f[e+28>>2]=n,f[12+(R-16|0)>>2]=e+32,f[12+(R-16|0)>>2]=e+48,t=f[a+16>>2],n=f[t+4>>2],f[e+64>>2]=f[t>>2],f[e+68>>2]=n,n=f[t+12>>2],f[e+72>>2]=f[t+8>>2],f[e+76>>2]=n,d[e+80>>2]=d[a+12>>2],d[e+84>>2]=0,d[e+88>>2]=0,d[e+92>>2]=0,d[e+96>>2]=0,f[e+116>>2]=0,f[e+120>>2]=0,f[e+124>>2]=0,f[e+128>>2]=0,d[e+132>>2]=0,d[e+136>>2]=0,d[e+140>>2]=0,d[e+144>>2]=0,d[e+148>>2]=0,d[e+152>>2]=0,d[e+156>>2]=0,d[e+160>>2]=0,f[e+164>>2]=0,f[12+(R-16|0)>>2]=e+168,f[12+(R-16|0)>>2]=e+184,R=a+32|0}function sn(e){var t,n=y(0),i=0,o=0,a=0;R=t=R-16|0,c(e);e:if((i=2147483647&(o=l(0)))>>>0<=1061752794){if(n=y(1),i>>>0<964689920)break e;n=Pa(+e)}else if(i>>>0<=1081824209){if(a=+e,i>>>0>=1075235812){n=y(-Pa(((0|o)<0?3.141592653589793:-3.141592653589793)+a));break e}if((0|o)<=-1){n=da(a+1.5707963267948966);break e}n=da(1.5707963267948966-a)}else if(i>>>0<=1088565717){if(i>>>0>=1085271520){n=Pa(+e+((0|o)<0?6.283185307179586:-6.283185307179586));break e}if((0|o)<=-1){n=da(-4.71238898038469-+e);break e}n=da(+e-4.71238898038469)}else if(n=y(e-e),!(i>>>0>=2139095040))if((i=3&Kn(e,t+8|0))>>>0<=2){switch(i-1|0){default:n=Pa(v[t+8>>3]);break e;case 0:n=da(-v[t+8>>3]);break e;case 1:}n=y(-Pa(v[t+8>>3]))}else n=da(v[t+8>>3]);return R=t+16|0,n}function cn(e){var t,n=0,i=0,o=0;R=t=R-16|0,c(e);e:if((n=2147483647&(o=l(0)))>>>0<=1061752794){if(n>>>0<964689920)break e;e=da(+e)}else if(n>>>0<=1081824209){if(i=+e,n>>>0<=1075235811){if((0|o)<=-1){e=y(-Pa(i+1.5707963267948966));break e}e=Pa(i+-1.5707963267948966);break e}e=da(-(((0|o)<0?3.141592653589793:-3.141592653589793)+i))}else if(n>>>0<=1088565717){if(i=+e,n>>>0<=1085271519){if((0|o)<=-1){e=Pa(i+4.71238898038469);break e}e=y(-Pa(i+-4.71238898038469));break e}e=da(((0|o)<0?6.283185307179586:-6.283185307179586)+i)}else if(n>>>0>=2139095040)e=y(e-e);else if((n=3&Kn(e,t+8|0))>>>0<=2){switch(n-1|0){default:e=da(v[t+8>>3]);break e;case 0:e=Pa(v[t+8>>3]);break e;case 1:}e=da(-v[t+8>>3])}else e=y(-Pa(v[t+8>>3]));return R=t+16|0,e}function ln(e){var t,n=0,i=y(0),o=0,a=y(0),r=y(0);if(c(e),(n=2147483647&(t=l(0)))>>>0<1283457024){e:{t:{if(n>>>0<=1054867455){if(o=-1,n>>>0>=964689920)break t;break e}if(e=y(A(e)),n>>>0<=1066926079){if(n>>>0<=1060110335){e=y(y(y(e+e)+y(-1))/y(e+y(2))),o=0;break t}e=y(y(e+y(-1))/y(e+y(1))),o=1}else n>>>0<=1075576831?(e=y(y(e+y(-1.5))/y(y(e*y(1.5))+y(1))),o=2):(e=y(y(-1)/e),o=3)}if(n=o,a=y(e*e),i=y(a*a),r=y(i*y(y(i*y(-.106480173766613))+y(-.19999158382415771))),i=y(a*y(y(i*y(y(i*y(.06168760731816292))+y(.14253635704517365)))+y(.333333283662796))),(0|n)<=-1)return y(e-y(e*y(r+i)));e=y(d[19328+(n<<=2)>>2]-y(y(y(e*y(r+i))-d[n+19344>>2])-e)),e=(0|t)<0?y(-e):e}return e}return n>>>0>2139095040?e:(s(0,-2147483648&(c(e),l(0))|1070141402),_())}function _n(e){var t=0;return f[(e|=0)>>2]=16296,(t=f[e+160>>2])&&(h[e+164|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+160>>2]=0),f[e+160>>2]=0,f[e+152>>2]=0,f[e+156>>2]=0,a[e+164|0]=1,(t=f[e+136>>2])&&(h[e+140|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+136>>2]=0),f[e+136>>2]=0,f[e+128>>2]=0,f[e+132>>2]=0,a[e+140|0]=1,(t=f[e+116>>2])&&(h[e+120|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+116>>2]=0),f[e+116>>2]=0,f[e+108>>2]=0,f[e+112>>2]=0,a[e+120|0]=1,(t=f[e+96>>2])&&(h[e+100|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+96>>2]=0),f[e+96>>2]=0,f[e+88>>2]=0,f[e+92>>2]=0,a[e+100|0]=1,(t=f[e+76>>2])&&(h[e+80|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+76>>2]=0),f[e+76>>2]=0,f[e+68>>2]=0,f[e+72>>2]=0,a[e+80|0]=1,0|e}function un(e,t,n){e|=0,n|=0;var i=0,a=0;if(f[(t|=0)>>2]=o[f[f[n>>2]+28>>2]](n,f[e+28>>2]),f[t+4>>2]=o[f[f[n>>2]+28>>2]](n,f[e+32>>2]),i=0|o[f[f[n>>2]+40>>2]](n,e),a=0|o[f[f[n>>2]+28>>2]](n,i),f[t+8>>2]=a,a&&o[f[f[n>>2]+48>>2]](n,i),f[t+12>>2]=f[e+4>>2],f[t+24>>2]=h[e+21|0],f[t+40>>2]=f[e+24>>2],f[t+44>>2]=f[e+16>>2],f[t+48>>2]=h[e+20|0],f[t+20>>2]=f[e+12>>2],f[t+16>>2]=f[e+8>>2],f[t+28>>2]=f[e+36>>2],i=f[e+40>>2],n=0,f[t+36>>2]=0,f[t+32>>2]=i,i=f[e+28>>2],(0|(a=f[i+548>>2]))>=1)for(i=f[i+556>>2];f[i+(n<<2)>>2]==(0|e)&&(f[t+36>>2]=1),(0|a)!=(0|(n=n+1|0)););if(n=f[e+32>>2],(0|(i=f[n+548>>2]))>=1)for(a=f[n+556>>2],n=0;f[a+(n<<2)>>2]==(0|e)&&(f[t+36>>2]=1),(0|i)!=(0|(n=n+1|0)););return 3536}function fn(e){var t=y(0),n=y(0),i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0);f[e+368>>2]=0,f[e+352>>2]=0,f[e+336>>2]=0,p=d[e+456>>2],t=d[e+36>>2],n=y(p*t),m=d[e+460>>2],i=d[e+40>>2],o=y(m*i),v=d[e+464>>2],a=d[e+44>>2],r=y(v*a),d[e+364>>2]=y(y(n*t)+y(o*i))+y(r*a),_=d[e+20>>2],u=d[e+24>>2],h=d[e+28>>2],d[e+360>>2]=y(y(n*_)+y(o*u))+y(r*h),s=n,n=d[e+4>>2],c=o,o=d[e+8>>2],l=r,r=d[e+12>>2],d[e+356>>2]=y(y(s*n)+y(c*o))+y(l*r),s=y(p*_),c=y(m*u),l=y(v*h),d[e+348>>2]=y(y(t*s)+y(i*c))+y(a*l),d[e+344>>2]=y(y(s*_)+y(c*u))+y(l*h),d[e+340>>2]=y(y(s*n)+y(c*o))+y(l*r),s=t,t=y(n*p),c=i,i=y(o*m),l=a,a=y(r*v),d[e+332>>2]=y(y(s*t)+y(c*i))+y(l*a),d[e+328>>2]=y(y(t*_)+y(i*u))+y(a*h),d[e+324>>2]=y(y(t*n)+y(i*o))+y(a*r)}function hn(e,t,n,i){var o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0,p=0,m=0,d=0;a=f[e+4>>2];e:{if(f[e>>2]==(0|t)){if(o=2,(0|t)!=(0|a))break e;return a=f[t+12>>2],t=f[f[t+8>>2]+12>>2],s=f[t+96>>2],h=f[a+96>>2]-s|0,e=f[e+12>>2],o=f[t+92>>2],c=f[e+92>>2]-o|0,o=f[a+92>>2]-o|0,s=f[e+96>>2]-s|0,r=l=g(h,c)-g(o,s)|0,u=l>>31,l=f[n+8>>2],p=f[i+4>>2],m=f[n+4>>2],d=f[i+8>>2],_=Gs(r,u,_=g(l,p)-g(m,d)|0,_>>31),u=N,r=o,o=(o=f[e+88>>2])-(e=f[t+88>>2])|0,a=f[a+88>>2]-e|0,t=e=g(r,o)-g(a,c)|0,r=e>>31,i=f[i>>2],n=f[n>>2],c=Gs(t,r,e=g(i,m)-g(n,p)|0,e>>31),e=N+u|0,e=(t=c+_|0)>>>0<c>>>0?e+1|0:e,r=t,n=Gs(o=t=g(a,s)-g(o,h)|0,a=t>>31,t=g(n,d)-g(i,l)|0,t>>31),e=N+e|0,(0|(e=(t=r+n|0)>>>0<n>>>0?e+1|0:e))>0||(0|e)>=0&&!(t>>>0<=0)?2:1}o=(0|t)==(0|a)}return o}function pn(e,t){var n,i=0;R=n=R-144|0,St(e),a[e+560|0]=1,f[e>>2]=2244,f[e+556>>2]=0,f[e+548>>2]=0,f[e+552>>2]=0,f[n+72>>2]=0,f[n+4>>2]=0,d[n>>2]=0,i=f[t+12>>2],f[n+84>>2]=f[t+8>>2],f[n+88>>2]=i,i=f[t>>2],t=f[t+4>>2],f[n+20>>2]=0,f[n+24>>2]=0,f[n+12>>2]=0,f[n+16>>2]=0,f[n+28>>2]=1065353216,f[n+32>>2]=0,f[n+36>>2]=0,f[n+40>>2]=0,f[n+44>>2]=0,f[n+48>>2]=1065353216,f[n+68>>2]=0,f[n+60>>2]=0,f[n+64>>2]=0,f[n+52>>2]=0,f[n+56>>2]=0,f[n+76>>2]=i,f[n+80>>2]=t,f[n+136>>2]=1008981770,f[n+140>>2]=1008981770,f[n+128>>2]=1000593162,f[n+132>>2]=1008981770,a[n+124|0]=0,f[n+116>>2]=1061997773,f[n+120>>2]=1065353216,f[n+108>>2]=0,f[n+112>>2]=0,f[n+100>>2]=1056964608,f[n+104>>2]=0,f[n+92>>2]=0,f[n+96>>2]=0,f[n+8>>2]=1065353216,_e(e,n),R=n+144|0}function mn(e){var t,n=0,i=0,o=0,a=0;if(c(e),255==(0|(i=(t=l(0))>>>23&255)))return e=y(e*y(6.2831854820251465)),y(e/e);if((n=t<<1)>>>0>2173837238){if(i)n=8388607&t|8388608;else{if(i=0,(0|(n=t<<9))>=0)for(;i=i+-1|0,(0|(n<<=1))>-1;);n=t<<1-i}if(a=(0|(o=n-13176795|0))>-1,(0|i)>129){for(;;){if(1&a&&!(n=o))return y(e*y(0));if(a=(0|(o=(n<<=1)-13176795|0))>-1,!((0|(i=i+-1|0))>129))break}i=129}if(a&&!(n=o))return y(e*y(0));if(n>>>0>8388607)a=n;else for(;i=i+-1|0,o=n>>>0<4194304,n=a=n<<1,o;);return s(0,(o=-2147483648&t)|((0|i)>=1?a+-8388608|i<<23:a>>>1-i|0)),_()}return-2121130058==(0|n)?y(e*y(0)):e}function dn(e,t,n){var i=0,o=0,r=0,s=0;if(n&&(a[(i=e+n|0)-1|0]=t,a[0|e]=t,!(n>>>0<3||(a[i+-2|0]=t,a[e+1|0]=t,a[i+-3|0]=t,a[e+2|0]=t,n>>>0<7||(a[i+-4|0]=t,a[e+3|0]=t,n>>>0<9||(o=(i=0-e&3)+e|0,t=g(255&t,16843009),f[o>>2]=t,f[(i=(n=n-i&-4)+o|0)-4>>2]=t,n>>>0<9||(f[o+8>>2]=t,f[o+4>>2]=t,f[i+-8>>2]=t,f[i+-12>>2]=t,n>>>0<25||(f[o+24>>2]=t,f[o+20>>2]=t,f[o+16>>2]=t,f[o+12>>2]=t,f[i+-16>>2]=t,f[i+-20>>2]=t,f[i+-24>>2]=t,f[i+-28>>2]=t,(n=n-(s=4&o|24)|0)>>>0<32))))))))for(i=t,r=t,t=o+s|0;f[t+24>>2]=r,f[t+28>>2]=i,f[t+16>>2]=r,f[t+20>>2]=i,f[t+8>>2]=r,f[t+12>>2]=i,f[t>>2]=r,f[t+4>>2]=i,t=t+32|0,(n=n+-32|0)>>>0>31;);return e}function vn(e){var t,n=0,i=0,r=0,s=0;if(f[(e|=0)>>2]=11340,(n=f[e+56>>2])&&(h[e+60|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+56>>2]=0),f[e+56>>2]=0,f[e+48>>2]=0,f[e+52>>2]=0,a[e+60|0]=1,(0|(t=f[e+28>>2]))>=1)for(;s=n=f[e+36>>2]+g(i,36)|0,(r=f[n+12>>2])&&(h[n+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[s+12>>2]=0),a[n+16|0]=1,f[s+12>>2]=0,f[n+4>>2]=0,f[n+8>>2]=0,(0|t)!=(0|(i=i+1|0)););return(n=f[e+36>>2])&&(h[e+40|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+36>>2]=0),f[e+36>>2]=0,f[e+28>>2]=0,f[e+32>>2]=0,a[e+40|0]=1,(n=f[e+16>>2])&&(h[e+20|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+16>>2]=0),f[e+16>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0,a[e+20|0]=1,0|e}function gn(e,t,n,i,o,r,s){var c,l;R=c=R-32|0,f[c+28>>2]=e,f[c+24>>2]=t,d[c+20>>2]=n,d[c+16>>2]=i,d[c+12>>2]=o,d[c+8>>2]=r,f[c+4>>2]=s,n=d[c+20>>2],s=f[c+24>>2],t=R-16|0,e=f[c+28>>2],f[t+12>>2]=e+80,f[t+8>>2]=s,d[f[f[t+12>>2]+12>>2]+(f[t+8>>2]<<2)>>2]=n,n=d[c+16>>2],s=f[c+24>>2],f[12+(t=R-16|0)>>2]=e+120,f[t+8>>2]=s,d[f[f[t+12>>2]+12>>2]+(f[t+8>>2]<<2)>>2]=n,n=d[c+12>>2],s=f[c+24>>2],f[12+(t=R-16|0)>>2]=e+100,f[t+8>>2]=s,d[f[f[t+12>>2]+12>>2]+(f[t+8>>2]<<2)>>2]=n,n=d[c+8>>2],s=f[c+24>>2],f[12+(t=R-16|0)>>2]=e+140,f[t+8>>2]=s,d[f[f[t+12>>2]+12>>2]+(f[t+8>>2]<<2)>>2]=n,s=f[c+4>>2],l=f[c+24>>2],f[12+(t=R-16|0)>>2]=e+160,f[t+8>>2]=l,f[f[f[t+12>>2]+12>>2]+(f[t+8>>2]<<2)>>2]=s,a[e+180|0]=1,R=c+32|0}function yn(e,t,n,i){for(var o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0,p=0,m=0,d=0,v=0,g=0;;){for(h=n,r=f[e+12>>2],l=f[r+((n+i|0)/2<<2)>>2],s=i,c=n;;){for(p=f[f[l+836>>2]+208>>2];_=f[(m=((n=c)<<2)+r|0)>>2],(0|(o=f[f[_+836>>2]+208>>2]))<=-1&&(o=f[f[_+840>>2]+208>>2]),c=n+1|0,a=o,(d=(0|(o=p))>-1)||(o=f[f[l+840>>2]+208>>2]),(0|a)<(0|o););for(;u=f[(v=(o=s)<<2)+r>>2],a=p,s=o+-1|0,d||(a=f[f[l+840>>2]+208>>2]),g=a,(0|(a=f[f[u+836>>2]+208>>2]))<=-1&&(a=f[f[u+840>>2]+208>>2]),(0|g)<(0|a););if((0|n)<=(0|o)&&(f[m>>2]=u,f[f[e+12>>2]+v>>2]=_,o=s,n=c),!((0|n)<=(0|o)))break;r=f[e+12>>2],s=o,c=n}if((0|o)>(0|h)&&yn(e,t,h,o),!((0|n)<(0|i)))break}}function An(e,t){var n=0,i=0,r=0,s=0,c=0;e:{t:if(!((0|(n=f[e+548>>2]))<1)){for(r=f[e+556>>2];;){if(f[r+(i<<2)>>2]!=(0|t)){if((0|(i=i+1|0))!=(0|n))continue;break t}break}if((0|n)!=(0|i))break e}if(f[e+552>>2]==(0|n)&&!((0|n)>=(0|(r=n?n<<1:1)))){if(r&&(f[6257]=f[6257]+1,s=0|o[f[4968]](r<<2,16),n=f[e+548>>2]),(0|n)>=1)for(i=0;f[(c=i<<2)+s>>2]=f[f[e+556>>2]+c>>2],(0|(i=i+1|0))!=(0|n););(i=f[e+556>>2])&&(h[e+560|0]&&(i&&(f[6258]=f[6258]+1,o[f[4969]](i)),n=f[e+548>>2]),f[e+556>>2]=0),f[e+556>>2]=s,f[e+552>>2]=r,a[e+560|0]=1}if(f[f[e+556>>2]+(n<<2)>>2]=t,f[e+548>>2]=n+1,n=f[t+32>>2],(0|(i=e))==(0|(e=f[t+28>>2])))return void ro(e,n,1);ro(n,e,1)}}function xn(e,t,n,i){for(var o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0,p=0,m=0,d=0,v=0,g=0;;){for(h=n,r=f[e+12>>2],l=f[r+((n+i|0)/2<<2)>>2],s=i,c=n;;){for(p=f[f[l+28>>2]+208>>2];_=f[(m=((n=c)<<2)+r|0)>>2],(d=(0|(a=p))>-1)||(a=f[f[l+32>>2]+208>>2]),c=n+1|0,(0|(o=f[f[_+28>>2]+208>>2]))<=-1&&(o=f[f[_+32>>2]+208>>2]),(0|o)<(0|a););for(;u=f[(v=(o=s)<<2)+r>>2],(0|(a=f[f[u+28>>2]+208>>2]))<=-1&&(a=f[f[u+32>>2]+208>>2]),g=p,s=o+-1|0,d||(g=f[f[l+32>>2]+208>>2]),(0|g)<(0|a););if((0|n)<=(0|o)&&(f[m>>2]=u,f[f[e+12>>2]+v>>2]=_,o=s,n=c),!((0|n)<=(0|o)))break;r=f[e+12>>2],s=o,c=n}if((0|o)>(0|h)&&xn(e,t,h,o),!((0|n)<(0|i)))break}}function bn(e,t){e|=0;var n=0,i=0,a=0,r=0,s=0,c=0,l=0;(i=f[188+(t|=0)>>2])&&(n=f[e+68>>2],n=0|o[f[f[n>>2]+36>>2]](n),o[f[f[n>>2]+40>>2]](n,i,f[e+24>>2]),n=f[e+68>>2],o[f[f[n>>2]+12>>2]](n,i,f[e+24>>2]),f[t+188>>2]=0);e:if((0|(n=f[t+216>>2]))<0|(0|n)>=(0|(i=f[e+8>>2]))){if(!((0|i)<1)){for(a=f[e+16>>2],n=0;;){if(f[(r=a+(n<<2)|0)>>2]!=(0|t)){if((0|i)!=(0|(n=n+1|0)))continue;break e}break}(0|i)<=(0|n)||(n=(i=i+-1|0)<<2,f[r>>2]=f[n+a>>2],f[n+f[e+16>>2]>>2]=t,f[e+8>>2]=i)}}else{if(a=f[e+16>>2],c=f[(s=a+(r=n<<2)|0)>>2],l=a,a=(i=i+-1|0)<<2,f[s>>2]=f[l+a>>2],f[a+f[e+16>>2]>>2]=c,f[e+8>>2]=i,(0|n)>=(0|i))break e;f[f[r+f[e+16>>2]>>2]+216>>2]=n}f[t+216>>2]=-1}function Cn(e,t,n,i){var o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),f=y(0),h=y(0),p=y(0),m=y(0);return c=d[n+24>>2],o=d[t+24>>2],u=y(c-o),l=d[n+16>>2],r=d[t+16>>2],f=y(l-r),a=d[e+4>>2],_=d[n+20>>2],s=d[t+20>>2],h=y(_-s),p=d[e>>2],m=d[e+8>>2],y(y(o*y(y(f*a)-y(h*p)))+y(y(r*y(y(h*m)-y(u*a)))+y(s*y(y(u*p)-y(f*m)))))<y(0)?(a=y(y(y(r*r)+y(s*s))+y(o*o)),y(y(y(r*f)+y(s*h))+y(o*u))>y(0)||(a=y(y(y(l*l)+y(_*_))+y(c*c)),y(y(y(l*f)+y(_*h))+y(c*u))<y(0)||(a=y(y(y(y(l*l)+y(_*_))+y(c*c))*y(y(y(r*r)+y(s*s))+y(o*o))),o=y(y(y(l*r)+y(_*s))+y(c*o)),a=(o=y(y(a-y(o*o))/y(y(y(f*f)+y(h*h))+y(u*u))))>y(0)?o:y(0))),d[i>>2]=S(a),e=1):e=0,e}function Sn(e,t,n){var i,o=y(0),a=y(0),r=0,s=0,c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0);R=i=R-16|0;e:{t:{n:{i:{if(f[n+100>>2]>=0)d[(f[t+108>>2]<<2)+i>>2]=f[n+88>>2];else if(o=ci(n+24|0),a=ci(r=n+72|0),s=f[n+100>>2],d[(f[t+108>>2]<<2)+i>>2]=o/a,(0|s)<0)break i;d[(f[t+112>>2]<<2)+i>>2]=f[n+92>>2];break n}if(o=ci(n+40|0),a=ci(r),s=f[n+100>>2],d[(f[t+112>>2]<<2)+i>>2]=o/a,(0|s)<0)break t}o=y(f[n+96>>2]);break e}o=y(ci(n+56|0)/ci(r))}d[(f[t+104>>2]<<2)+i>>2]=o,o=d[t+20>>2],a=d[t+24>>2],c=d[t+16>>2],l=d[t>>2],_=d[t+4>>2],u=d[t+8>>2],h=d[i>>2],p=d[i+4>>2],m=d[i+8>>2],f[e+12>>2]=0,d[e+8>>2]=a+y(m*u),d[e+4>>2]=o+y(p*_),d[e>>2]=c+y(h*l),R=i+16|0}function En(e){var t,n=0,i=0,r=0;if(f[(e|=0)>>2]=10404,(0|(t=f[e+52>>2]))>=1)for(;(i=f[(r=n<<2)+f[e+60>>2]>>2])&&(o[f[f[i>>2]>>2]](i),i=f[e+4>>2],o[f[f[i>>2]+60>>2]](i,f[f[e+60>>2]+r>>2])),(0|t)!=(0|(n=n+1|0)););return(n=f[e+60>>2])&&(h[e- -64|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+60>>2]=0),f[e+60>>2]=0,f[e+52>>2]=0,f[e+56>>2]=0,a[e- -64|0]=1,(n=f[e+40>>2])&&(h[e+44|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+40>>2]=0),f[e+40>>2]=0,f[e+32>>2]=0,f[e+36>>2]=0,a[e+44|0]=1,(n=f[e+20>>2])&&(h[e+24|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+20>>2]=0),f[e+20>>2]=0,f[e+12>>2]=0,f[e+16>>2]=0,a[e+24|0]=1,0|e}function wn(e,t,n){var i;return e|=0,t|=0,n|=0,R=i=R+-64|0,f[i+60>>2]=e,f[i+56>>2]=t,a[i+55|0]=n,e=f[i+60>>2],f[e+8>>2]=f[f[i+56>>2]>>2],hi(e+24|0,f[i+56>>2]),f[12+(R-16|0)>>2]=i+32,1&a[i+55|0]?(t=f[i+56>>2],n=f[t+12>>2],f[i+32>>2]=f[t+8>>2],f[i+36>>2]=n,n=f[t+20>>2],f[i+40>>2]=f[t+16>>2],f[i+44>>2]=n):(f[12+(t=R-16|0)>>2]=f[e+8>>2],f[12+(n=R-16|0)>>2]=f[t+12>>2]+4,mi(i+16|0,f[n+12>>2],f[i+56>>2]+8|0),t=f[i+20>>2],f[i+32>>2]=f[i+16>>2],f[i+36>>2]=t,t=f[i+28>>2],f[i+40>>2]=f[i+24>>2],f[i+44>>2]=t),Vn(e+76|0,i+32|0),f[12+(R-16|0)>>2]=i,bi(i,e+44|0,e+60|0,d[f[i+56>>2]+24>>2]),Vn(e+96|0,i),function(e,t){var n,i=0;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=R-16|0,e=f[n+12>>2],f[t+12>>2]=e,f[n+4>>2]=f[f[t+12>>2]+4>>2],t=f[n+4>>2],f[12+(i=R-16|0)>>2]=e,f[f[i+12>>2]+8>>2]==(0|t)&&(f[12+(i=R-16|0)>>2]=e,t=f[f[i+12>>2]+4>>2],f[12+(i=R-16|0)>>2]=e,f[i+8>>2]=t,function(e,t){var n;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=R-16|0,e=f[n+12>>2],f[t+12>>2]=e,f[f[t+12>>2]+8>>2]<f[n+8>>2]&&(f[n+4>>2]=ra(e,f[n+8>>2]),f[12+(t=R-16|0)>>2]=e,function(e,t,n){var i;for(f[28+(i=R-32|0)>>2]=e,f[i+24>>2]=0,f[i+20>>2]=t,f[i+16>>2]=n,e=f[i+28>>2],f[i+12>>2]=f[i+24>>2];f[i+12>>2]<f[i+20>>2];)d[f[i+16>>2]+(f[i+12>>2]<<2)>>2]=d[f[e+12>>2]+(f[i+12>>2]<<2)>>2],f[i+12>>2]=f[i+12>>2]+1}(e,f[f[t+12>>2]+4>>2],f[n+4>>2]),f[12+(t=R-16|0)>>2]=e,ga(e,f[f[t+12>>2]+4>>2]),ka(e),a[e+16|0]=1,f[e+12>>2]=f[n+4>>2],f[e+8>>2]=f[n+8>>2]),R=n+16|0}(t=e,i=f[i+8>>2]?f[i+8>>2]<<1:1)),d[f[e+12>>2]+(f[e+4>>2]<<2)>>2]=d[f[n+8>>2]>>2],f[e+4>>2]=f[e+4>>2]+1,R=n+16|0}(e+116|0,f[i+56>>2]+24|0),R=i- -64|0,y(d[e+4>>2])}function Tn(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),x=y(0),b=y(0),C=y(0),S=y(0);a=y(o[f[f[e>>2]+48>>2]](e)),_=d[t+52>>2],c=d[t+20>>2],p=d[t+24>>2],u=d[t+56>>2],l=d[t+36>>2],r=d[e+36>>2],m=d[t+40>>2],v=d[e+40>>2],h=d[t+48>>2],g=d[t>>2],x=d[t+4>>2],b=d[t+8>>2],C=d[t+16>>2],S=d[t+32>>2],s=d[e+32>>2],f[n+12>>2]=0,s=y(a+s),r=y(a+r),a=y(a+v),l=y(y(y(s*y(A(S)))+y(r*y(A(l))))+y(a*y(A(m)))),d[n+8>>2]=u-l,c=y(y(y(s*y(A(C)))+y(r*y(A(c))))+y(a*y(A(p)))),d[n+4>>2]=_-c,a=y(y(y(s*y(A(g)))+y(r*y(A(x))))+y(a*y(A(b)))),d[n>>2]=h-a,f[i+12>>2]=0,d[i+8>>2]=u+l,d[i+4>>2]=c+_,d[i>>2]=a+h}function Pn(e){var t=0,n=0,i=y(0),o=0;e:{t:{if(c(e),(n=2147483647&(o=l(0)))>>>0>=1065353216){if(1065353216!=(0|n))break t;return y(1.5707963267948966*+e+752316384526264e-51)}if(n>>>0<=1056964607){if(n+-8388608>>>0<956301312)break e;return i=y(e*e),y(y(y(y(i*y(y(i*y(y(i*y(-.008656363002955914))+y(-.04274342209100723)))+y(.16666586697101593)))/y(y(i*y(-.7066296339035034))+y(1)))*e)+e)}return e=y(y(y(1)-y(A(e)))*y(.5)),t=S(+e),t+=t*+y(y(e*y(y(e*y(y(e*y(-.008656363002955914))+y(-.04274342209100723)))+y(.16666586697101593)))/y(y(e*y(-.7066296339035034))+y(1))),e=y(1.5707963267948966-(t+t)),(0|o)<0?y(-e):e}e=y(y(0)/y(e-e))}return e}function In(e,t,n){var i;return e|=0,t|=0,n|=0,R=i=R-32|0,f[i+28>>2]=e,f[i+24>>2]=t,a[i+23|0]=n,e=f[i+28>>2],d[e+4>>2]=d[f[i+24>>2]+40>>2],f[e+80>>2]=f[f[i+24>>2]>>2],1&a[i+23|0]?(t=f[i+24>>2],n=f[t+12>>2],f[e+48>>2]=f[t+8>>2],f[e+52>>2]=n,n=f[t+20>>2],f[e+56>>2]=f[t+16>>2],f[e+60>>2]=n):(f[12+(t=R-16|0)>>2]=f[e+80>>2],f[12+(n=R-16|0)>>2]=f[t+12>>2]+4,mi(i,f[n+12>>2],f[i+24>>2]+8|0),t=f[i+4>>2],f[e+48>>2]=f[i>>2],f[e+52>>2]=t,t=f[i+12>>2],f[e+56>>2]=f[i+8>>2],f[e+60>>2]=t),t=f[i+24>>2],n=f[t+28>>2],f[e+64>>2]=f[t+24>>2],f[e+68>>2]=n,n=f[t+36>>2],f[e+72>>2]=f[t+32>>2],f[e+76>>2]=n,R=i+32|0,y(d[f[i+24>>2]+40>>2])}function Rn(e,t,n,i){var o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0);a=sn(n),o=d[t+444>>2],n=cn(n),y(A(a))>y(1.1920928955078125e-7)?(r=y(n*n),c=y(a*a),l=y(r/c),s=d[t+448>>2],o=y(S(y(y(l+y(1))/y(y(y(1)/y(s*s))+y(l/y(o*o))))))):(r=y(n*n),c=y(a*a)),f[e+12>>2]=0,o=y(o*y(.5)),r=y(cn(o)/y(S(y(r+y(c+y(0)))))),c=y(r*y(0)),o=sn(o),s=y(o*y(0)),n=y(r*y(-n)),_=y(c*y(0)),l=y(y(s+y(n*i))-_),a=y(a*r),s=y(y(s+_)-y(a*i)),_=y(a*y(0)),u=y(n*y(0)),r=y(y(y(y(r*y(-0))*i)-_)-u),i=y(y(y(o*i)+_)-u),d[e+8>>2]=y(c*l)+y(y(y(o*s)-y(n*r))-y(a*i)),d[e+4>>2]=y(n*i)+y(y(y(o*l)-y(a*r))-y(c*s)),d[e>>2]=y(a*s)+y(y(y(o*i)-y(c*r))-y(n*l))}function Nn(e){f[e>>2]=3756,a[e+20|0]=1,f[e+16>>2]=0,a[e+40|0]=1,f[e+8>>2]=0,f[e+12>>2]=0,f[e+36>>2]=0,a[e+60|0]=1,f[e+28>>2]=0,f[e+32>>2]=0,f[e+56>>2]=0,a[e+80|0]=1,f[e+48>>2]=0,f[e+52>>2]=0,f[e+76>>2]=0,a[e+100|0]=1,f[e+68>>2]=0,f[e+72>>2]=0,f[e+96>>2]=0,a[e+120|0]=1,f[e+88>>2]=0,f[e+92>>2]=0,f[e+116>>2]=0,a[e+140|0]=1,f[e+108>>2]=0,f[e+112>>2]=0,f[e+136>>2]=0,f[e+128>>2]=0,f[e+132>>2]=0,a[e+160|0]=1,f[e+156>>2]=0,f[e+148>>2]=0,f[e+152>>2]=0,a[e+180|0]=1,f[e+176>>2]=0,f[e+168>>2]=0,f[e+172>>2]=0,a[e+208|0]=1,f[e+232>>2]=0,f[e+204>>2]=0,f[e+196>>2]=0,f[e+200>>2]=0,f[e+224>>2]=0,f[e+212>>2]=142,f[e+216>>2]=143,f[e+220>>2]=144}function Dn(e){var t=0;return f[(e|=0)>>2]=15268,(t=f[e+156>>2])&&(h[e+160|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+156>>2]=0),f[e+156>>2]=0,f[e+148>>2]=0,f[e+152>>2]=0,a[e+160|0]=1,(t=f[e+136>>2])&&(h[e+140|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+136>>2]=0),f[e+136>>2]=0,f[e+128>>2]=0,f[e+132>>2]=0,a[e+140|0]=1,(t=f[e+116>>2])&&(h[e+120|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+116>>2]=0),f[e+116>>2]=0,f[e+108>>2]=0,f[e+112>>2]=0,a[e+120|0]=1,(t=f[e+96>>2])&&(h[e+100|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+96>>2]=0),f[e+96>>2]=0,f[e+88>>2]=0,f[e+92>>2]=0,a[e+100|0]=1,bo(e),0|e}function Mn(e){var t=0,n=y(0);R=t=R-96|0,a[e+92|0]=1,1&a[22688]||Mr(22688)&&(f[5649]=0,f[5650]=0,f[5648]=1065353216,f[5651]=0,f[5652]=0,f[5654]=0,f[5655]=0,f[5653]=1065353216,f[5656]=0,f[5657]=0,f[5661]=0,f[5662]=0,f[5660]=-1082130432,f[5658]=1065353216,f[5659]=0,f[5663]=0,f[5664]=0,f[5666]=0,f[5667]=0,f[5665]=-1082130432,f[5668]=0,f[5669]=0,f[5670]=-1082130432,f[5671]=0,Kr(22688)),t=dn(t,0,96),o[f[f[e>>2]+76>>2]](e,22592,t,6),n=d[e+48>>2],d[e+76>>2]=d[t>>2]+n,d[e+60>>2]=d[t+48>>2]-n,d[e+80>>2]=n+d[t+20>>2],d[e- -64>>2]=d[t+68>>2]-n,d[e+84>>2]=n+d[t+40>>2],d[e+68>>2]=d[t+88>>2]-n,R=t+96|0}function On(e,t){var n,i,r=0,s=0,c=0;if(f[e+12>>2]=0,a[e+16|0]=1,f[e+4>>2]=0,f[e+8>>2]=0,(0|(n=f[t+4>>2]))<=0)f[e+4>>2]=n;else{if(f[6257]=f[6257]+1,s=0|o[f[4968]](n<<2,16),(0|(i=f[e+4>>2]))>=1)for(;f[(c=r<<2)+s>>2]=f[f[e+12>>2]+c>>2],(0|i)!=(0|(r=r+1|0)););for((r=f[e+12>>2])&&(h[e+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+12>>2]=0),f[e+12>>2]=s,a[e+16|0]=1,f[e+8>>2]=n,r=0;f[(r<<2)+s>>2]=0,s=f[e+12>>2],(0|n)!=(0|(r=r+1|0)););for(f[e+4>>2]=n,r=0;f[(e=r<<2)+s>>2]=f[e+f[t+12>>2]>>2],(0|n)!=(0|(r=r+1|0)););}}function zn(e,t){var n=y(0),i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0);!e|!(1&f[e+180>>2])||(g=d[e+172>>2],n=d[e+44>>2],l=d[e+12>>2],_=d[e+28>>2],o=d[e+36>>2],u=d[e+20>>2],A=d[e+168>>2],i=d[e+40>>2],h=d[e+8>>2],p=d[e+24>>2],a=d[e+164>>2],m=d[e+4>>2],f[t+12>>2]=0,v=o,r=a,a=d[t>>2],s=d[t+4>>2],o=d[t+8>>2],c=y(r*y(y(y(m*a)+y(u*s))+y(v*o))),x=i,i=y(A*y(y(y(a*h)+y(s*p))+y(o*i))),r=n,n=y(g*y(y(y(a*l)+y(s*_))+y(o*n))),d[t+8>>2]=y(y(v*c)+y(x*i))+y(r*n),d[t+4>>2]=y(y(u*c)+y(p*i))+y(_*n),d[t>>2]=y(y(m*c)+y(h*i))+y(l*n))}function Ln(e,t,n,i,o){var r;R=r=R-32|0,f[r+28>>2]=e,d[r+24>>2]=t,f[r+20>>2]=n,f[r+16>>2]=i,f[r+12>>2]=o,e=f[r+28>>2],d[e>>2]=d[r+24>>2],f[e+4>>2]=f[r+20>>2],Yr(e+8|0),f[e+72>>2]=f[r+16>>2],n=f[r+12>>2],i=f[n+4>>2],f[e+76>>2]=f[n>>2],f[e+80>>2]=i,i=f[n+12>>2],f[e+84>>2]=f[n+8>>2],f[e+88>>2]=i,d[e+92>>2]=0,d[e+96>>2]=0,d[e+100>>2]=.5,d[e+104>>2]=0,d[e+108>>2]=0,d[e+112>>2]=0,d[e+116>>2]=.800000011920929,d[e+120>>2]=1,a[e+124|0]=0,d[e+128>>2]=.004999999888241291,d[e+132>>2]=.009999999776482582,d[e+136>>2]=.009999999776482582,d[e+140>>2]=.009999999776482582,Da(e+8|0),R=r+32|0}function Fn(e,t,n){var i,a,r,s,c,l,_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0);R=i=R-48|0,_=d[t+8>>2],u=d[t>>2],h=d[t+4>>2],f[n+12>>2]=0,p=_,_=y(y(1)/y(S(y(y(y(u*u)+y(h*h))+y(_*_))))),d[n+8>>2]=p*_,d[n+4>>2]=h*_,d[n>>2]=u*_,t=f[e+120>>2],s=i+32|0,a=f[e+124>>2],c=r=f[e>>2]+(a>>1)|0,l=n,1&a&&(t=f[t+f[r>>2]>>2]),o[t](s,c,l),_=d[n>>2],u=d[n+4>>2],h=d[n+8>>2],f[i+12>>2]=0,d[i+8>>2]=-h,d[i+4>>2]=-u,d[i>>2]=-_,function(e,t,n){var i,a,r,s=y(0),c=y(0),l=y(0),_=0,u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0);R=i=R-32|0,a=f[t+124>>2],r=f[t+4>>2]+(a>>1)|0,_=f[t+120>>2],_=1&a?f[f[r>>2]+_>>2]:_,u=d[t+16>>2],h=d[t+12>>2],p=d[t+32>>2],m=d[t+24>>2],v=d[t+28>>2],g=d[t+48>>2],A=d[t+40>>2],x=d[t+44>>2],b=d[t+8>>2],s=d[n+8>>2],c=d[n>>2],l=d[n+4>>2],f[i+12>>2]=0,d[i+8>>2]=y(y(c*A)+y(l*x))+y(s*g),d[i+4>>2]=y(y(c*m)+y(l*v))+y(s*p),d[i>>2]=y(y(b*c)+y(h*l))+y(u*s),o[_](i+16|0,r,i),u=d[t+104>>2],h=d[t- -64>>2],p=d[t+60>>2],m=d[t+108>>2],v=d[t+80>>2],g=d[t+72>>2],A=d[t+76>>2],x=d[t+112>>2],b=d[t+96>>2],C=d[t+88>>2],S=d[t+92>>2],E=d[t+56>>2],s=d[i+24>>2],c=d[i+16>>2],l=d[i+20>>2],f[e+12>>2]=0,d[e+8>>2]=x+y(y(y(c*C)+y(l*S))+y(s*b)),d[e+4>>2]=m+y(y(y(c*g)+y(l*A))+y(s*v)),d[e>>2]=u+y(y(y(c*E)+y(l*p))+y(s*h)),R=i+32|0}(i+16|0,e,i),_=d[i+16>>2],u=d[i+32>>2],h=d[i+20>>2],p=d[i+36>>2],m=d[i+24>>2],v=d[i+40>>2],f[n+28>>2]=0,d[n+24>>2]=v-m,d[n+20>>2]=p-h,d[n+16>>2]=u-_,R=i+48|0}function Un(e){var t,n=0,i=0,r=0,s=0;if(f[(e|=0)>>2]=15928,h[e+152|0]&&(n=f[e+96>>2],o[f[f[n>>2]>>2]](n),(n=f[e+96>>2])&&(f[6258]=f[6258]+1,o[f[4969]](n))),(0|(t=f[e+160>>2]))>=1)for(;s=n=f[e+168>>2]+g(i,20)|0,(r=f[n+12>>2])&&(h[n+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[s+12>>2]=0),a[n+16|0]=1,f[s+12>>2]=0,f[n+4>>2]=0,f[n+8>>2]=0,(0|t)!=(0|(i=i+1|0)););return(n=f[e+168>>2])&&(h[e+172|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+168>>2]=0),f[e+168>>2]=0,f[e+160>>2]=0,f[e+164>>2]=0,a[e+172|0]=1,Bi(e+44|0),Bi(e+4|0),0|e}function Bn(e,t,n){var i;return e|=0,t|=0,n|=0,R=i=R-32|0,f[i+28>>2]=e,f[i+24>>2]=t,a[i+23|0]=n,e=f[i+28>>2],d[e+4>>2]=d[f[i+24>>2]+24>>2],f[e+8>>2]=f[f[i+24>>2]>>2],1&a[i+23|0]?(t=f[i+24>>2],n=f[t+12>>2],f[e+56>>2]=f[t+8>>2],f[e+60>>2]=n,n=f[t+20>>2],f[e+64>>2]=f[t+16>>2],f[e+68>>2]=n):(f[12+(t=R-16|0)>>2]=f[e+8>>2],f[12+(n=R-16|0)>>2]=f[t+12>>2]+4,mi(i,f[n+12>>2],f[i+24>>2]+8|0),t=f[i+4>>2],f[e+56>>2]=f[i>>2],f[e+60>>2]=t,t=f[i+12>>2],f[e+64>>2]=f[i+8>>2],f[e+68>>2]=t),bi(e+72|0,e+24|0,e+40|0,d[f[i+24>>2]+24>>2]),R=i+32|0,y(d[f[i+24>>2]+24>>2])}function kn(e,t,n,i,r,s,c,l,_,u,p,m){var d,v=0,y=0,A=0,x=0,b=0;if(v=d=f[e+68>>2],(0|d)==f[e+72>>2]&&(v=d,!((0|d)>=(0|(A=d?d<<1:1))))){if(A?(f[6257]=f[6257]+1,x=0|o[f[4968]](g(A,152),16),v=f[e+68>>2]):v=d,(0|(y=v))>=1)for(v=0;It((b=g(v,152))+x|0,f[e+76>>2]+b|0,152),(0|y)!=(0|(v=v+1|0)););(y=f[e+76>>2])&&(h[e+80|0]&&y&&(f[6258]=f[6258]+1,o[f[4969]](y)),f[e+76>>2]=0),f[e+76>>2]=x,f[e+72>>2]=A,a[e+80|0]=1,v=f[e+68>>2]}f[e+68>>2]=v+1,y=f[e+76>>2]+g(d,152)|0,f[y+140>>2]=r,ie(e,y,t,n,i,s,c,l,_,u,p,m)}function jn(e,t,n,i,r,s){var c,l=0,_=0,u=0,p=0,m=0;if(l=c=f[e+88>>2],(0|c)==f[e+92>>2]&&(l=c,!((0|c)>=(0|(u=c?c<<1:1))))){if(u?(f[6257]=f[6257]+1,p=0|o[f[4968]](g(u,152),16),l=f[e+88>>2]):l=c,(0|(_=l))>=1)for(l=0;It((m=g(l,152))+p|0,f[e+96>>2]+m|0,152),(0|_)!=(0|(l=l+1|0)););(_=f[e+96>>2])&&(h[e+100|0]&&_&&(f[6258]=f[6258]+1,o[f[4969]](_)),f[e+96>>2]=0),f[e+96>>2]=p,f[e+92>>2]=u,a[e+100|0]=1,l=f[e+88>>2]}f[e+88>>2]=l+1,_=f[e+96>>2]+g(c,152)|0,f[_+140>>2]=r,xe(e,_,t,n,i,s)}function Gn(e,t,n){var i,o,a=y(0),r=y(0),s=y(0),c=0,l=y(0),_=y(0);r=y(d[t+64>>2]*y(.5)),i=f[t+68>>2],c=(o=f[t+72>>2])<<2,a=d[n>>2],s=y(a*a),a=d[n+4>>2],s=y(s+y(a*a)),a=d[n+8>>2];e:{if(d[c+n>>2]>y(d[t+56>>2]*y(S(y(s+y(a*a))))))f[(i<<2)+e>>2]=0,d[e+c>>2]=r,n=f[t+76>>2];else{if(a=d[(i<<2)+n>>2],c=n,n=f[t+76>>2],l=d[c+(n<<2)>>2],(_=y(S(y(y(a*a)+y(l*l)))))>y(1.1920928955078125e-7)){s=a,a=y(d[t+60>>2]/_),d[(i<<2)+e>>2]=s*a,d[(o<<2)+e>>2]=-r,r=y(l*a);break e}f[(i<<2)+e>>2]=0,d[(o<<2)+e>>2]=-r}r=y(0)}d[(n<<2)+e>>2]=r}function Vn(e,t){var n,i=0,r=0;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=R-16|0,e=f[n+12>>2],f[t+12>>2]=e,f[n+4>>2]=f[f[t+12>>2]+4>>2],t=f[n+4>>2],f[12+(i=R-16|0)>>2]=e,f[f[i+12>>2]+8>>2]==(0|t)&&(f[12+(i=R-16|0)>>2]=e,r=f[f[i+12>>2]+4>>2],f[12+(i=R-16|0)>>2]=e,f[i+8>>2]=r,function(e,t){var n;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=R-16|0,e=f[n+12>>2],f[t+12>>2]=e,f[f[t+12>>2]+8>>2]<f[n+8>>2]&&(f[n+4>>2]=function(e,t){var n;return R=n=R-16|0,f[n+8>>2]=e,f[n+4>>2]=t,e=f[n+8>>2],f[n+4>>2]?f[n+12>>2]=function(e,t){var n;return R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,f[n+4>>2]=0,e=f[n+8>>2]<<4,f[6257]=f[6257]+1,e=0|o[f[4968]](e,16),R=n+16|0,e}(e,f[n+4>>2]):f[n+12>>2]=0,R=n+16|0,f[n+12>>2]}(e,f[n+8>>2]),f[12+(t=R-16|0)>>2]=e,function(e,t,n){var i,o=0;for(R=i=R-32|0,f[i+28>>2]=e,f[i+24>>2]=0,f[i+20>>2]=t,f[i+16>>2]=n,n=f[i+28>>2],f[i+12>>2]=f[i+24>>2];f[i+12>>2]<f[i+20>>2];)t=f[i+16>>2]+(f[i+12>>2]<<4)|0,f[12+(e=R-16|0)>>2]=16,f[e+8>>2]=t,t=f[n+12>>2]+(f[i+12>>2]<<4)|0,o=f[t+4>>2],e=f[e+8>>2],f[e>>2]=f[t>>2],f[e+4>>2]=o,o=f[t+12>>2],f[e+8>>2]=f[t+8>>2],f[e+12>>2]=o,f[i+12>>2]=f[i+12>>2]+1;R=i+32|0}(e,f[f[t+12>>2]+4>>2],f[n+4>>2]),f[12+(t=R-16|0)>>2]=e,ga(e,f[f[t+12>>2]+4>>2]),ka(e),a[e+16|0]=1,f[e+12>>2]=f[n+4>>2],f[e+8>>2]=f[n+8>>2]),R=n+16|0}(t=e,i=f[i+8>>2]?f[i+8>>2]<<1:1)),i=f[e+12>>2]+(f[e+4>>2]<<4)|0,f[12+(t=R-16|0)>>2]=16,f[t+8>>2]=i,i=f[n+8>>2],r=f[i+4>>2],t=f[t+8>>2],f[t>>2]=f[i>>2],f[t+4>>2]=r,r=f[i+12>>2],f[t+8>>2]=f[i+8>>2],f[t+12>>2]=r,f[e+4>>2]=f[e+4>>2]+1,R=n+16|0}function Hn(e,t,n){var i=0;return(i=f[e+4>>2])?f[e+4>>2]=0:(f[6257]=f[6257]+1,i=0|o[f[4968]](44,16),f[i>>2]=0,f[i+4>>2]=0,f[i+40>>2]=0,f[i+32>>2]=0,f[i+36>>2]=0,f[i+24>>2]=0,f[i+28>>2]=0,f[i+16>>2]=0,f[i+20>>2]=0,f[i+8>>2]=0,f[i+12>>2]=0),f[i+36>>2]=n,f[i+32>>2]=0,f[i+40>>2]=0,n=f[t+4>>2],f[i>>2]=f[t>>2],f[i+4>>2]=n,n=f[t+12>>2],f[i+8>>2]=f[t+8>>2],f[i+12>>2]=n,n=f[t+20>>2],f[i+16>>2]=f[t+16>>2],f[i+20>>2]=n,n=f[t+28>>2],f[i+24>>2]=f[t+24>>2],f[i+28>>2]=n,Ge(e,f[e>>2],i),f[e+12>>2]=f[e+12>>2]+1,i}function Wn(e,t){t|=0;var n=0,i=0,r=0,s=0,c=0;if(!(!(n=f[12+(e|=0)>>2])|!h[e+8|0])){if((0|(i=f[t+4>>2]))==f[t+8>>2]&&!((0|i)>=(0|(r=i?i<<1:1)))){if(r&&(f[6257]=f[6257]+1,s=0|o[f[4968]](r<<2,16),i=f[t+4>>2]),(0|i)>=1)for(n=0;f[(c=n<<2)+s>>2]=f[f[t+12>>2]+c>>2],(0|(n=n+1|0))!=(0|i););(n=f[t+12>>2])&&(h[t+16|0]&&(n&&(f[6258]=f[6258]+1,o[f[4969]](n)),i=f[t+4>>2]),f[t+12>>2]=0),f[t+12>>2]=s,a[t+16|0]=1,f[t+8>>2]=r,n=f[e+12>>2]}f[f[t+12>>2]+(i<<2)>>2]=n,f[t+4>>2]=i+1}}function qn(e){var t,n=0,i=0,r=0,s=0;if(f[(e|=0)>>2]=10616,n=f[e+84>>2],(0|(t=f[n+8>>2]))>=1){for(;(i=f[8+(f[n+16>>2]+g(r,12)|0)>>2])&&(o[f[f[i>>2]>>2]](i),s=f[e+4>>2],o[f[f[s>>2]+60>>2]](s,i)),(0|t)!=(0|(r=r+1|0)););n=f[e+84>>2]}return on(n),n=f[e+84>>2],o[f[f[n>>2]>>2]](n),(n=f[e+84>>2])&&(f[6258]=f[6258]+1,o[f[4969]](n)),(n=f[e+100>>2])&&(h[e+104|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+100>>2]=0),f[e+100>>2]=0,f[e+92>>2]=0,f[e+96>>2]=0,a[e+104|0]=1,En(e),0|e}function Yn(e,t){var n,i=0;for(R=n=R-16|0,f[n+8>>2]=e,f[n+4>>2]=t,e=f[n+8>>2],f[n+12>>2]=e,i=e+48|0,t=e;f[12+(R-16|0)>>2]=t,(0|i)!=(0|(t=t+16|0)););t=f[n+4>>2],i=f[t+4>>2],f[e>>2]=f[t>>2],f[e+4>>2]=i,i=f[t+12>>2],f[e+8>>2]=f[t+8>>2],f[e+12>>2]=i,t=f[n+4>>2],i=f[t+20>>2],f[e+16>>2]=f[t+16>>2],f[e+20>>2]=i,i=f[t+28>>2],f[e+24>>2]=f[t+24>>2],f[e+28>>2]=i,t=f[n+4>>2],i=f[t+36>>2],f[e+32>>2]=f[t+32>>2],f[e+36>>2]=i,i=f[t+44>>2],f[e+40>>2]=f[t+40>>2],f[e+44>>2]=i,R=n+16|0}function Xn(e,t,n,i){for(var o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0;;){for(_=n,r=f[e+12>>2],u=f[r+((n+i|0)/2<<3)>>2],s=n,o=i;;)if(s=(n=s)+1|0,!(f[(a=(n<<3)+r|0)>>2]<(0|u))){for(c=o;c=(o=c)+-1|0,f[(l=(h=o<<3)+r|0)>>2]>(0|u););if((0|n)<=(0|o)&&(n=f[a>>2],o=f[a+4>>2],r=f[l+4>>2],f[a>>2]=f[l>>2],f[a+4>>2]=r,a=f[e+12>>2]+h|0,f[a>>2]=n,f[a+4>>2]=o,o=c,n=s),!((0|n)<=(0|o)))break;r=f[e+12>>2],s=n}if((0|o)>(0|_)&&Xn(e,t,_,o),!((0|n)<(0|i)))break}}function Qn(e,t,n,i){var o=0,r=0;o=f[t+4>>2],f[e+292>>2]=f[t>>2],f[e+296>>2]=o,o=f[t+12>>2],f[e+300>>2]=f[t+8>>2],f[e+304>>2]=o,a[e+356|0]=1,r=f[t+4>>2],o=e+(f[e>>2]<<4)|0,f[o+4>>2]=f[t>>2],f[o+8>>2]=r,r=f[t+12>>2],f[o+12>>2]=f[t+8>>2],f[o+16>>2]=r,r=f[n+12>>2],t=(f[e>>2]<<4)+e|0,f[t+92>>2]=f[n+8>>2],f[t+96>>2]=r,o=f[n+4>>2],f[t+84>>2]=f[n>>2],f[t+88>>2]=o,o=f[i+12>>2],t=(f[e>>2]<<4)+e|0,f[t+172>>2]=f[i+8>>2],f[t+176>>2]=o,n=f[i+4>>2],f[t+164>>2]=f[i>>2],f[t+168>>2]=n,f[e>>2]=f[e>>2]+1}function Kn(e,t){var n,i=0,o=0,a=0,r=0,u=0;R=n=R-16|0,c(e);e:if((i=2147483647&(a=l(0)))>>>0<=1305022426){if(o=.6366197723675814*(r=+e)+6755399441055744-6755399441055744,v[t>>3]=r+-1.5707963109016418*o+-1.5893254773528196e-8*o,A(o)<2147483648){i=~~o;break e}i=-2147483648}else i>>>0>=2139095040?(v[t>>3]=y(e-e),i=0):(u=i,i=(i>>>23|0)-150|0,v[n+8>>3]=(s(0,u-(i<<23)|0),_()),i=function(e,t,n){var i,o,a,r,s,c,l=0,_=0,u=0,h=0,p=0,m=0,d=0,y=0,x=0,b=0,S=0,E=0,w=0;if(R=i=R-560|0,m=(_=n)+g(o=(0|(n=(n+-3|0)/24|0))>0?n:0,-24)|0,(0|(d=f[4120]))>=0)for(_=d+1|0,n=o;v[(i+320|0)+(u<<3)>>3]=(0|n)<0?0:+f[16496+(n<<2)>>2],n=n+1|0,(0|_)!=(0|(u=u+1|0)););for(y=m+-24|0,_=0,a=(0|d)>0?d:0;;){for(n=0,l=0;l+=v[(n<<3)+e>>3]*v[(i+320|0)+(_-n<<3)>>3],1!=(0|(n=n+1|0)););if(v[(_<<3)+i>>3]=l,n=(0|_)==(0|a),_=_+1|0,n)break}c=47-m|0,r=48-m|0,s=m+-25|0,_=d;t:{for(;;){if(l=v[(_<<3)+i>>3],n=0,u=_,!(b=(0|_)<1))for(;p=(i+480|0)+(n<<2)|0,x=l,h=A(l*=5.960464477539063e-8)<2147483648?~~l:-2147483648,h=A(x+=-16777216*(l=+(0|h)))<2147483648?~~x:-2147483648,f[p>>2]=h,l=v[((u=u+-1|0)<<3)+i>>3]+l,(0|_)!=(0|(n=n+1|0)););l=Si(l,y),l+=-8*C(.125*l),l-=+(0|(h=A(l)<2147483648?~~l:-2147483648));n:{i:{o:{if(E=(0|y)<1){if(y)break o;p=f[476+((_<<2)+i|0)>>2]>>23}else S=u=(_<<2)+i|0,u=(p=f[u+476>>2])-((n=p>>r)<<r)|0,f[S+476>>2]=u,h=n+h|0,p=u>>c;if((0|p)<1)break n;break i}if(p=2,!(l>=.5)){p=0;break n}}if(n=0,u=0,!b)for(;b=f[(S=(i+480|0)+(n<<2)|0)>>2],w=16777215,u||(w=16777216,b)?(f[S>>2]=w-b,u=1):u=0,(0|_)!=(0|(n=n+1|0)););s>>>0>1|E||(f[476+(n=(_<<2)+i|0)>>2]=s-1?8388607&f[n+476>>2]:4194303&f[n+476>>2]),h=h+1|0,2==(0|p)&&(l=1-l,p=2,u&&(l-=Si(1,y)))}if(0!=l)break;if(u=0,!((0|(n=_))<=(0|d))){for(;u=f[(i+480|0)+((n=n+-1|0)<<2)>>2]|u,(0|n)>(0|d););if(u){for(m=y;m=m+-24|0,!f[(i+480|0)+((_=_+-1|0)<<2)>>2];);break t}}for(n=1;u=n,n=n+1|0,!f[(i+480|0)+(d-u<<2)>>2];);for(u=_+u|0;;){for(h=_+1|0,_=_+1|0,v[(i+320|0)+(h<<3)>>3]=f[16496+(o+_<<2)>>2],n=0,l=0;l+=v[(n<<3)+e>>3]*v[(i+320|0)+(h-n<<3)>>3],1!=(0|(n=n+1|0)););if(v[(_<<3)+i>>3]=l,!((0|_)<(0|u)))break}_=u}(l=Si(l,0-y|0))>=16777216?(u=(i+480|0)+(_<<2)|0,x=l,n=A(l*=5.960464477539063e-8)<2147483648?~~l:-2147483648,e=A(l=x+-16777216*+(0|n))<2147483648?~~l:-2147483648,f[u>>2]=e,_=_+1|0):(n=A(l)<2147483648?~~l:-2147483648,m=y),f[(i+480|0)+(_<<2)>>2]=n}if(l=Si(1,m),(0|_)>=0){for(n=_;v[(n<<3)+i>>3]=l*+f[(i+480|0)+(n<<2)>>2],l*=5.960464477539063e-8,e=0,u=(0|n)>0,n=n+-1|0,u;);for(u=_;;){for(m=a>>>0<e>>>0?a:e,y=_-u|0,n=0,l=0;l+=v[19264+(n<<3)>>3]*v[(n+u<<3)+i>>3],d=(0|n)!=(0|m),n=n+1|0,d;);if(v[(i+160|0)+(y<<3)>>3]=l,u=u+-1|0,n=(0|e)!=(0|_),e=e+1|0,!n)break}}if(l=0,(0|_)>=0)for(;l+=v[(i+160|0)+(_<<3)>>3],e=(0|_)>0,_=_+-1|0,e;);return v[t>>3]=p?-l:l,R=i+560|0,7&h}(n+8|0,n,i),o=v[n>>3],(0|a)<=-1?(v[t>>3]=-o,i=0-i|0):v[t>>3]=o);return R=n+16|0,i}function Zn(e,t,n){var i,o=y(0),a=y(0),r=y(0);i=f[e+204>>2],t!=y(0)?(f[e+204>>2]=-2&i,o=y(y(1)/t)):f[e+204>>2]=1|i,d[e+404>>2]=o,f[e+436>>2]=0,d[e+424>>2]=d[e+440>>2]*t,d[e+432>>2]=d[e+448>>2]*t,d[e+428>>2]=d[e+444>>2]*t,t=d[n+8>>2],a=d[n+4>>2],r=d[n>>2],d[e+620>>2]=d[e+408>>2]*o,d[e+624>>2]=o*d[e+412>>2],d[e+628>>2]=o*d[e+416>>2],f[e+632>>2]=0,f[e+468>>2]=0,d[e+456>>2]=r!=y(0)?y(y(1)/r):y(0),d[e+460>>2]=a!=y(0)?y(y(1)/a):y(0),d[e+464>>2]=t!=y(0)?y(y(1)/t):y(0)}function Jn(e){var t=0,n=0,i=0,r=0,s=0;if(f[(e|=0)>>2]=7540,t=f[e+16>>2],(0|(n=f[e+8>>2]))>=1)for(;s=f[(i<<2)+t>>2],(r=f[s+188>>2])&&(t=f[e+68>>2],t=0|o[f[f[t>>2]+36>>2]](t),o[f[f[t>>2]+40>>2]](t,r,f[e+24>>2]),t=f[e+68>>2],o[f[f[t>>2]+12>>2]](t,r,f[e+24>>2]),f[s+188>>2]=0,n=f[e+8>>2],t=f[e+16>>2]),(0|(i=i+1|0))<(0|n););return t&&(h[e+20|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+16>>2]=0),f[e+16>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0,a[e+20|0]=1,0|e}function $n(e){var t=0;return f[(e|=0)>>2]=15368,(t=f[e+60>>2])&&(h[e- -64|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+60>>2]=0),f[e+60>>2]=0,f[e+52>>2]=0,f[e+56>>2]=0,a[e- -64|0]=1,(t=f[e+40>>2])&&(h[e+44|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+40>>2]=0),f[e+40>>2]=0,f[e+32>>2]=0,f[e+36>>2]=0,a[e+44|0]=1,(t=f[e+16>>2])&&(h[e+20|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+16>>2]=0),f[e+16>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0,a[e+20|0]=1,0|e}function ei(e){var t=0;return f[(e|=0)>>2]=10552,(t=f[e+56>>2])&&(h[e+60|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+56>>2]=0),f[e+56>>2]=0,f[e+48>>2]=0,f[e+52>>2]=0,a[e+60|0]=1,(t=f[e+36>>2])&&(h[e+40|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+36>>2]=0),f[e+36>>2]=0,f[e+28>>2]=0,f[e+32>>2]=0,a[e+40|0]=1,(t=f[e+16>>2])&&(h[e+20|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+16>>2]=0),f[e+16>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0,a[e+20|0]=1,0|e}function ti(e,t,n,i,o){var a,r=y(0),s=y(0);return R=a=R-32|0,f[a+28>>2]=e,f[a+24>>2]=t,f[a+20>>2]=n,f[a+16>>2]=i,f[a+12>>2]=o,t=R-16|0,e=f[a+28>>2],f[t+12>>2]=e+(f[a+24>>2]<<4),r=d[f[t+12>>2]+(f[a+20>>2]<<2)>>2],f[12+(t=R-16|0)>>2]=e+(f[a+16>>2]<<4),r=y(r*d[f[t+12>>2]+(f[a+12>>2]<<2)>>2]),f[12+(t=R-16|0)>>2]=e+(f[a+24>>2]<<4),s=d[f[t+12>>2]+(f[a+12>>2]<<2)>>2],f[12+(t=R-16|0)>>2]=e+(f[a+16>>2]<<4),R=a+32|0,y(r-y(s*d[f[t+12>>2]+(f[a+20>>2]<<2)>>2]))}function ni(e,t){var n,i=0,o=y(0),a=0,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0);i=0;e:if(!((0|(n=f[e>>2]))<1)){for(s=d[e+308>>2],c=d[t+8>>2],l=d[t+4>>2],_=d[t>>2];;){if(o=y(_-d[4+(i=(a<<4)+e|0)>>2]),r=y(o*o),o=y(l-d[i+8>>2]),r=y(r+y(o*o)),o=y(c-d[i+12>>2]),i=1,y(r+y(o*o))<=s)break e;if((0|n)==(0|(a=a+1|0)))break}i=0}return a=i,d[t+12>>2]!=d[e+304>>2]|d[t+8>>2]!=d[e+300>>2]|d[t+4>>2]!=d[e+296>>2]|d[t>>2]!=d[e+292>>2]||(a=1),a}function ii(e,t,n,i,a,r){var s;return e|=0,t|=0,n|=0,i=y(i),a|=0,r|=0,R=s=R+-64|0,f[s+60>>2]=r,f[s+56>>2]=a,a=f[e+212>>2],d[a+4>>2]>=i&&(f[s+8>>2]=f[e+216>>2],f[s+12>>2]=s+56,e=f[t+12>>2],f[s+24>>2]=f[t+8>>2],f[s+28>>2]=e,e=f[t+4>>2],f[s+16>>2]=f[t>>2],f[s+20>>2]=e,e=f[n+12>>2],f[s+40>>2]=f[n+8>>2],f[s+44>>2]=e,e=f[n+4>>2],f[s+32>>2]=f[n>>2],f[s+36>>2]=e,d[s+48>>2]=i,i=y(o[f[f[a>>2]+12>>2]](a,s+8|0,1))),R=s- -64|0,y(i)}function oi(e,t,n){e|=0,t|=0,n|=0;var i=y(0),a=y(0),r=y(0),s=y(0),c=y(0);o[f[f[t>>2]+68>>2]](e,t,n),y(o[f[f[t>>2]+48>>2]](t))!=y(0)&&(a=d[n+4>>2],i=d[n>>2],r=d[n+8>>2],s=y(o[f[f[t>>2]+48>>2]](t)),c=i=(t=y(y(y(i*i)+y(a*a))+y(r*r))<y(14210854715202004e-30))?y(-1):i,r=t?y(-1):r,a=t?y(-1):a,i=y(y(1)/y(S(y(y(r*r)+y(y(i*i)+y(a*a)))))),d[e>>2]=d[e>>2]+y(s*y(c*i)),d[e+4>>2]=d[e+4>>2]+y(s*y(a*i)),d[e+8>>2]=d[e+8>>2]+y(s*y(r*i)))}function ai(e){var t=0,n=0;return f[(e|=0)>>2]=9856,h[e+52|0]&&(t=f[e+56>>2])&&(n=f[e+4>>2],o[f[f[n>>2]+16>>2]](n,t)),(t=f[e+44>>2])&&(h[e+48|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+44>>2]=0),f[e+44>>2]=0,f[e+36>>2]=0,f[e+40>>2]=0,a[e+48|0]=1,(t=f[e+24>>2])&&(h[e+28|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+24>>2]=0),f[e+24>>2]=0,f[e+16>>2]=0,f[e+20>>2]=0,a[e+28|0]=1,0|e}function ri(e,t){var n,i=y(0),o=y(0);return R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=R-16|0,e=f[n+12>>2],f[t+12>>2]=e,i=d[f[t+12>>2]+4>>2],f[12+(t=R-16|0)>>2]=f[n+8>>2],i=y(i*d[f[t+12>>2]>>2]),f[12+(t=R-16|0)>>2]=e+16,o=d[f[t+12>>2]+4>>2],f[12+(t=R-16|0)>>2]=f[n+8>>2],i=y(i+y(o*d[f[t+12>>2]+4>>2])),f[12+(t=R-16|0)>>2]=e+32,o=d[f[t+12>>2]+4>>2],f[12+(e=R-16|0)>>2]=f[n+8>>2],R=n+16|0,y(i+y(o*d[f[e+12>>2]+8>>2]))}function si(e,t){var n,i=y(0),o=y(0);return R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=R-16|0,e=f[n+12>>2],f[t+12>>2]=e,i=d[f[t+12>>2]+8>>2],f[12+(t=R-16|0)>>2]=f[n+8>>2],i=y(i*d[f[t+12>>2]>>2]),f[12+(t=R-16|0)>>2]=e+16,o=d[f[t+12>>2]+8>>2],f[12+(t=R-16|0)>>2]=f[n+8>>2],i=y(i+y(o*d[f[t+12>>2]+4>>2])),f[12+(t=R-16|0)>>2]=e+32,o=d[f[t+12>>2]+8>>2],f[12+(e=R-16|0)>>2]=f[n+8>>2],R=n+16|0,y(i+y(o*d[f[e+12>>2]+8>>2]))}function ci(e){var t,n,i=0,o=0,a=0,r=y(0);return R=t=R-16|0,o=i=f[e+12>>2],n=f[e+8>>2],(0|i)>0||(0|i)>=0&&!(n>>>0<0)?r=y(y(y(+(n>>>0)+4294967296*+(o>>>0))*y(0x10000000000000000))+y(+m[e>>2]+4294967296*+m[e+4>>2])):(a=f[e+4>>2],e=i=f[e>>2],f[t>>2]=0-e,f[t+4>>2]=0-(a+(0<e>>>0)|0),o^=-1,(i=(e=!(e|a))+(a=-1^n)|0)>>>0<a>>>0&&(o=o+1|0),f[(e=t)+8>>2]=i,f[e+12>>2]=o,r=y(-ci(e))),R=t+16|0,r}function li(e,t){var n=y(0);if(f[e+20>>2]=0,f[e+24>>2]=0,a[e+28|0]=0,(n=d[e+4>>2])>=y(0)){if((t=mn(y(t-d[e>>2])))<y(-3.1415927410125732)?t=y(t+y(6.2831854820251465)):t>y(3.1415927410125732)&&(t=y(t+y(-6.2831854820251465))),t<y(-n))return f[e+24>>2]=1065353216,a[e+28|0]=1,void(d[e+20>>2]=-y(n+t));t>n&&(f[e+24>>2]=-1082130432,a[e+28|0]=1,d[e+20>>2]=n-t)}}function _i(e,t){var n,i=y(0),o=y(0);return R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=R-16|0,e=f[n+12>>2],f[t+12>>2]=e,i=d[f[t+12>>2]>>2],f[12+(t=R-16|0)>>2]=f[n+8>>2],i=y(i*d[f[t+12>>2]>>2]),f[12+(t=R-16|0)>>2]=e+16,o=d[f[t+12>>2]>>2],f[12+(t=R-16|0)>>2]=f[n+8>>2],i=y(i+y(o*d[f[t+12>>2]+4>>2])),f[12+(t=R-16|0)>>2]=e+32,o=d[f[t+12>>2]>>2],f[12+(e=R-16|0)>>2]=f[n+8>>2],R=n+16|0,y(i+y(o*d[f[e+12>>2]+8>>2]))}function ui(e,t,n,i,o,a,r,s,c,l){var _;for(R=_=R-48|0,f[_+40>>2]=e,f[_+36>>2]=t,f[_+32>>2]=n,f[_+28>>2]=i,f[_+24>>2]=o,f[_+20>>2]=a,f[_+16>>2]=r,f[_+12>>2]=s,f[_+8>>2]=c,f[_+4>>2]=l,e=f[_+40>>2],f[_+44>>2]=e,n=e+48|0,t=e;f[12+(R-16|0)>>2]=t,(0|n)!=(0|(t=i=t+16|0)););Oi(e,f[_+36>>2],f[_+32>>2],f[_+28>>2],f[_+24>>2],f[_+20>>2],f[_+16>>2],f[_+12>>2],f[_+8>>2],f[_+4>>2]),R=_+48|0}function fi(e,t,n){var i=0,o=0,a=0,r=0;e:if(o=Wt(e,t))if((0|(a=f[e+8>>2]))>=0){if(!a)break e;for(;;){if(!(i=f[o+32>>2]))break e;if(o=i,(0|a)==(0|(r=r+1|0)))break}}else o=f[e>>2];else o=0;i=f[n+4>>2],f[t>>2]=f[n>>2],f[t+4>>2]=i,i=f[n+28>>2],f[t+24>>2]=f[n+24>>2],f[t+28>>2]=i,i=f[n+20>>2],f[t+16>>2]=f[n+16>>2],f[t+20>>2]=i,i=f[n+12>>2],f[t+8>>2]=f[n+8>>2],f[t+12>>2]=i,Ge(e,o,t)}function hi(e,t){var n,i=0;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=R-16|0,e=f[n+12>>2],f[t+12>>2]=e,f[n+4>>2]=f[f[t+12>>2]+4>>2],t=f[n+4>>2],f[12+(i=R-16|0)>>2]=e,f[f[i+12>>2]+8>>2]==(0|t)&&(f[12+(i=R-16|0)>>2]=e,t=f[f[i+12>>2]+4>>2],f[12+(i=R-16|0)>>2]=e,f[i+8>>2]=t,Di(t=e,i=f[i+8>>2]?f[i+8>>2]<<1:1)),f[f[e+12>>2]+(f[e+4>>2]<<2)>>2]=f[f[n+8>>2]>>2],f[e+4>>2]=f[e+4>>2]+1,R=n+16|0}function pi(e,t){e|=0,t|=0;var n=y(0),i=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0);n=y(o[f[f[e>>2]+48>>2]](e)),i=y(o[f[f[e>>2]+48>>2]](e)),a=y(o[f[f[e>>2]+48>>2]](e)),r=d[e+20>>2],s=d[e+36>>2],c=d[e+24>>2],l=d[e+40>>2],_=d[e+16>>2],u=d[e+32>>2],xa(e,t),f[e+44>>2]=0,d[e+40>>2]=y(y(y(a+l)/c)*d[e+24>>2])-a,d[e+36>>2]=y(y(y(i+s)/r)*d[e+20>>2])-i,d[e+32>>2]=y(y(y(n+u)/_)*d[e+16>>2])-n}function mi(e,t,n){var i;R=i=R-32|0,f[i+28>>2]=t,f[i+24>>2]=n,f[12+(t=R-16|0)>>2]=f[i+28>>2],f[t+8>>2]=0,d[i+20>>2]=Ho(f[t+12>>2]+(f[t+8>>2]<<4)|0,f[i+24>>2]),f[12+(t=R-16|0)>>2]=f[i+28>>2],f[t+8>>2]=1,d[i+16>>2]=Ho(f[t+12>>2]+(f[t+8>>2]<<4)|0,f[i+24>>2]),f[12+(t=R-16|0)>>2]=f[i+28>>2],f[t+8>>2]=2,d[i+12>>2]=Ho(f[t+12>>2]+(f[t+8>>2]<<4)|0,f[i+24>>2]),Lo(e,i+20|0,i+16|0,i+12|0),R=i+32|0}function di(e,t){var n=0,i=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],i=f[t+4>>2],e=f[n+12>>2],f[e>>2]=f[t>>2],f[e+4>>2]=i,i=f[t+12>>2],f[e+8>>2]=f[t+8>>2],f[e+12>>2]=i,t=f[n+8>>2],i=f[t+20>>2],f[e+16>>2]=f[t+16>>2],f[e+20>>2]=i,i=f[t+28>>2],f[e+24>>2]=f[t+24>>2],f[e+28>>2]=i,t=f[n+8>>2],n=f[t+36>>2],f[e+32>>2]=f[t+32>>2],f[e+36>>2]=n,n=f[t+44>>2],f[e+40>>2]=f[t+40>>2],f[e+44>>2]=n}function vi(e,t){var n=y(0),i=y(0);if((n=d[e+16>>2])<y(1))return n>y(-1)?(d[t>>2]=Zt(d[e+24>>2],d[e+20>>2]),d[t+4>>2]=Zt(d[e+32>>2],d[e>>2]),void(d[t+8>>2]=Pn(y(x(y(b(y(-d[e+16>>2]),y(-1))),y(1)))))):(n=d[e+40>>2],i=d[e+8>>2],f[t+4>>2]=0,d[t>>2]=-Zt(y(-i),n),void(d[t+8>>2]=1.5707963705062866));n=d[e+40>>2],i=d[e+8>>2],f[t+4>>2]=0,d[t>>2]=Zt(y(-i),n),d[t+8>>2]=-1.5707963705062866}function gi(e,t){e|=0,t=y(t);var n=y(0),i=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0);n=y(o[f[f[e>>2]+48>>2]](e)),i=y(o[f[f[e>>2]+48>>2]](e)),a=y(o[f[f[e>>2]+48>>2]](e)),d[e+48>>2]=t,t=d[e+40>>2],r=d[e+36>>2],s=d[e+32>>2],c=y(o[f[f[e>>2]+48>>2]](e)),l=y(o[f[f[e>>2]+48>>2]](e)),_=y(o[f[f[e>>2]+48>>2]](e)),f[e+44>>2]=0,d[e+36>>2]=y(i+r)-l,d[e+32>>2]=y(n+s)-c,d[e+40>>2]=y(a+t)-_}function yi(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0);c=y(o[f[f[e>>2]+48>>2]](e)),l=y(o[f[f[e>>2]+48>>2]](e)),_=y(o[f[f[e>>2]+48>>2]](e)),a=d[t+52>>2],r=d[t+56>>2],s=d[t+48>>2],f[n+12>>2]=0,d[n+8>>2]=r-_,d[n+4>>2]=a-l,d[n>>2]=s-c,a=d[t+52>>2],r=d[t+56>>2],s=d[t+48>>2],f[i+12>>2]=0,d[i+8>>2]=_+r,d[i+4>>2]=l+a,d[i>>2]=c+s}function Ai(e,t){var n=y(0),i=y(0);if((n=d[e+32>>2])<y(1)){if(n>y(-1))return d[t>>2]=Zt(y(-d[e+36>>2]),d[e+40>>2]),d[t+4>>2]=Pn(y(x(y(b(d[e+32>>2],y(-1))),y(1)))),void(d[t+8>>2]=Zt(y(-d[e+16>>2]),d[e>>2]));n=d[e+20>>2],i=d[e+4>>2],f[t+4>>2]=-1077342245,d[t>>2]=-Zt(i,n)}else n=d[e+20>>2],i=d[e+4>>2],f[t+4>>2]=1070141403,d[t>>2]=Zt(i,n);d[t+8>>2]=0}function xi(e,t){var n=y(0);if((n=d[e+4>>2])<y(1))return n>y(-1)?(d[t>>2]=Zt(y(-d[e+36>>2]),d[e+20>>2]),d[t+4>>2]=Zt(y(-d[e+8>>2]),d[e>>2]),void(d[t+8>>2]=Pn(y(x(y(b(d[e+4>>2],y(-1))),y(1)))))):(f[t>>2]=0,d[t+4>>2]=-Zt(d[e+24>>2],d[e+40>>2]),void(d[t+8>>2]=-1.5707963705062866));f[t>>2]=0,d[t+4>>2]=Zt(d[e+24>>2],d[e+40>>2]),d[t+8>>2]=1.5707963705062866}function bi(e,t,n,i){var o;f[28+(o=R-32|0)>>2]=e,f[o+24>>2]=t,f[o+20>>2]=n,d[o+16>>2]=i,e=f[o+28>>2],d[o+12>>2]=y(1)-d[o+16>>2],d[e>>2]=y(d[o+12>>2]*d[f[o+24>>2]>>2])+y(d[o+16>>2]*d[f[o+20>>2]>>2]),d[e+4>>2]=y(d[o+12>>2]*d[f[o+24>>2]+4>>2])+y(d[o+16>>2]*d[f[o+20>>2]+4>>2]),d[e+8>>2]=y(d[o+12>>2]*d[f[o+24>>2]+8>>2])+y(d[o+16>>2]*d[f[o+20>>2]+8>>2])}function Ci(e,t,n,i,a){for(var r=0,s=0;;){e:{if(!(p[a>>1]<p[t>>1]|p[i>>1]>p[t+6>>1]|p[a+4>>1]<p[t+4>>1]|p[i+4>>1]>p[t+10>>1]||p[a+2>>1]<p[t+2>>1]|p[i+2>>1]>p[t+8>>1])){if((0|(r=f[t+12>>2]))<0)break e;o[f[f[n>>2]+8>>2]](n,r>>>21|0,2097151&r)}return}Ci(e,r=t+16|0,n,i,a),s=t+32|0,t=(0|(t=f[t+28>>2]))>-1?s:r-(t<<4)|0}}function Si(e,t){e:if((0|t)>=1024){if(e*=898846567431158e293,(0|t)<2047){t=t+-1023|0;break e}e*=898846567431158e293,t=((0|t)<3069?t:3069)+-2046|0}else(0|t)>-1023||(e*=22250738585072014e-324,(0|t)>-2045?t=t+1022|0:(e*=22250738585072014e-324,t=((0|t)>-3066?t:-3066)+2044|0));return s(0,0),s(1,t+1023<<20),e*+r[0]}function Ei(e,t){var n=y(0);if((n=d[e+8>>2])<y(1))return n>y(-1)?(d[t>>2]=Zt(d[e+24>>2],d[e+40>>2]),d[t+4>>2]=Pn(y(x(y(b(y(-d[e+8>>2]),y(-1))),y(1)))),void(d[t+8>>2]=Zt(d[e+4>>2],d[e>>2]))):(f[t>>2]=0,f[t+4>>2]=1070141403,void(d[t+8>>2]=-Zt(d[e+16>>2],d[e+32>>2])));f[t>>2]=0,f[t+4>>2]=-1077342245,d[t+8>>2]=Zt(y(-d[e+16>>2]),y(-d[e+32>>2]))}function wi(e,t,n){var i,o,a,r,s;R=i=R-32|0,f[i+28>>2]=t,f[i+24>>2]=n,a=f[i+24>>2],t=R-16|0,n=f[i+28>>2],f[t+12>>2]=n,f[t+8>>2]=0,r=f[t+12>>2]+(f[t+8>>2]<<4)|0,f[12+(t=R-16|0)>>2]=n,f[t+8>>2]=1,s=f[t+12>>2]+(f[t+8>>2]<<4)|0,f[12+(t=R-16|0)>>2]=n,f[t+8>>2]=2,function(e,t,n,i,o){var a;R=a=R-32|0,f[a+28>>2]=t,f[a+24>>2]=n,f[a+20>>2]=i,f[a+16>>2]=o,t=f[a+28>>2],d[a+12>>2]=Ho(t,f[a+24>>2]),d[a+8>>2]=Ho(t,f[a+20>>2]),d[a+4>>2]=Ho(t,f[a+16>>2]),Lo(e,a+12|0,a+8|0,a+4|0),R=a+32|0}(o=i+8|0,a,r,s,f[t+12>>2]+(f[t+8>>2]<<4)|0),Xi(e,o,n+48|0),R=i+32|0}function Ti(e,t,n,i){a[e+53|0]=1;e:if(f[e+4>>2]==(0|n)){if(a[e+52|0]=1,!(n=f[e+16>>2])){if(f[e+36>>2]=1,f[e+24>>2]=i,f[e+16>>2]=t,1!=(0|i)|1!=f[e+48>>2])break e;return void(a[e+54|0]=1)}if((0|t)==(0|n)){if(2==(0|(n=f[e+24>>2]))&&(f[e+24>>2]=i,n=i),1!=f[e+48>>2]|1!=(0|n))break e;return void(a[e+54|0]=1)}a[e+54|0]=1,f[e+36>>2]=f[e+36>>2]+1}}function Pi(e,t,n,i,r){var s=y(0);return f[e+32>>2]=n,f[e+28>>2]=t,f[e+24>>2]=i,f[e+20>>2]=r,f[e+4>>2]=0,f[e+8>>2]=1065353216,f[e>>2]=4416,f[e+12>>2]=0,f[e+16>>2]=0,f[e+36>>2]=f[t+4>>2],f[e+40>>2]=f[n+4>>2],d[e+44>>2]=o[f[f[t>>2]+48>>2]](t),s=y(o[f[f[n>>2]+48>>2]](n)),f[e+72>>2]=1,f[e+76>>2]=1,f[e+60>>2]=-1,a[e+52|0]=0,d[e+48>>2]=s,e}function Ii(e,t){var n=y(0);if((n=d[e+24>>2])<y(1))return n>y(-1)?(d[t>>2]=Pn(y(x(y(b(n,y(-1))),y(1)))),d[t+4>>2]=Zt(y(-d[e+8>>2]),d[e+40>>2]),void(d[t+8>>2]=Zt(y(-d[e+16>>2]),d[e+20>>2]))):(f[t>>2]=-1077342245,f[t+4>>2]=0,void(d[t+8>>2]=-Zt(d[e+32>>2],d[e>>2])));f[t>>2]=1070141403,f[t+4>>2]=0,d[t+8>>2]=Zt(d[e+32>>2],d[e>>2])}function Ri(e,t,n,i,o){f[e>>2]=16448,f[e+4>>2]=f[t>>2],f[e>>2]=4944,a[e+24|0]=1,f[e>>2]=10404,f[e+20>>2]=0,a[e+44|0]=1,f[e+12>>2]=0,f[e+16>>2]=0,f[e+40>>2]=0,a[e- -64|0]=1,f[e+32>>2]=0,f[e+36>>2]=0,f[e+60>>2]=0,a[e+68|0]=o,f[e+52>>2]=0,f[e+56>>2]=0,t=f[t+4>>2],a[e+76|0]=0,f[e+72>>2]=t,f[e+80>>2]=f[f[(o?i:n)+4>>2]+72>>2],Kt(e,n,i)}function Ni(e,t,n){var i;R=i=R-32|0,f[i+28>>2]=t,f[i+24>>2]=n,t=f[i+28>>2],d[i+20>>2]=y(d[t+4>>2]*d[f[i+24>>2]+8>>2])-y(d[t+8>>2]*d[f[i+24>>2]+4>>2]),d[i+16>>2]=y(d[t+8>>2]*d[f[i+24>>2]>>2])-y(d[t>>2]*d[f[i+24>>2]+8>>2]),d[i+12>>2]=y(d[t>>2]*d[f[i+24>>2]+4>>2])-y(d[t+4>>2]*d[f[i+24>>2]>>2]),Lo(e,i+20|0,i+16|0,i+12|0),R=i+32|0}function Di(e,t){var n;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=R-16|0,e=f[n+12>>2],f[t+12>>2]=e,f[f[t+12>>2]+8>>2]<f[n+8>>2]&&(f[n+4>>2]=ra(e,f[n+8>>2]),f[12+(t=R-16|0)>>2]=e,function(e,t,n){var i;for(f[28+(i=R-32|0)>>2]=e,f[i+24>>2]=0,f[i+20>>2]=t,f[i+16>>2]=n,e=f[i+28>>2],f[i+12>>2]=f[i+24>>2];f[i+12>>2]<f[i+20>>2];)f[f[i+16>>2]+(f[i+12>>2]<<2)>>2]=f[f[e+12>>2]+(f[i+12>>2]<<2)>>2],f[i+12>>2]=f[i+12>>2]+1}(e,f[f[t+12>>2]+4>>2],f[n+4>>2]),f[12+(t=R-16|0)>>2]=e,ga(e,f[f[t+12>>2]+4>>2]),ka(e),a[e+16|0]=1,f[e+12>>2]=f[n+4>>2],f[e+8>>2]=f[n+8>>2]),R=n+16|0}function Mi(e,t){var n=y(0);if((n=d[e+36>>2])<y(1)){if(n>y(-1))return d[t>>2]=Pn(y(x(y(b(y(-n),y(-1))),y(1)))),d[t+4>>2]=Zt(d[e+32>>2],d[e+40>>2]),void(d[t+8>>2]=Zt(d[e+4>>2],d[e+20>>2]));f[t>>2]=1070141403,d[t+4>>2]=-Zt(y(-d[e+16>>2]),d[e>>2])}else f[t>>2]=-1077342245,d[t+4>>2]=Zt(y(-d[e+16>>2]),d[e>>2]);d[t+8>>2]=0}function Oi(e,t,n,i,o,a,r,s,c,l){var _;R=_=R-48|0,f[_+44>>2]=e,f[_+40>>2]=t,f[_+36>>2]=n,f[_+32>>2]=i,f[_+28>>2]=o,f[_+24>>2]=a,f[_+20>>2]=r,f[_+16>>2]=s,f[_+12>>2]=c,f[_+8>>2]=l,Lo(e=f[_+44>>2],f[_+40>>2],f[_+36>>2],f[_+32>>2]),Lo(e+16|0,f[_+28>>2],f[_+24>>2],f[_+20>>2]),Lo(e+32|0,f[_+16>>2],f[_+12>>2],f[_+8>>2]),R=_+48|0}function zi(e,t){var n,i;R=n=R-32|0,f[n+28>>2]=e,d[n+24>>2]=t,Fo(e=f[n+28>>2]),f[e>>2]=11388,f[e+4>>2]=8,d[n+20>>2]=1,d[n+16>>2]=1,d[n+12>>2]=1,Lo(e+16|0,n+20|0,n+16|0,n+12|0),cr(e+32|0),t=d[n+24>>2],f[12+(i=R-16|0)>>2]=e+32,d[i+8>>2]=t,d[f[i+12>>2]>>2]=d[i+8>>2],d[e+48>>2]=d[n+24>>2],d[e+52>>2]=0,R=n+32|0}function Li(e,t,n,i,r){var s;f[e>>2]=16448,f[e+4>>2]=f[t>>2],f[e>>2]=4944,f[e>>2]=6336,t=f[t>>2],f[e+60>>2]=0,f[e+56>>2]=t,f[e+8>>2]=6364,s=r?n:i,f[e+48>>2]=s,n=r?i:n,f[e+44>>2]=n,t=0|o[f[f[t>>2]+12>>2]](t,f[n+8>>2],f[s+8>>2]),f[e+72>>2]=t,n=f[e+56>>2],o[f[f[n>>2]+20>>2]](n,t),a[e+76|0]=r}function Fi(e,t){var n=y(0),i=0,o=y(0),a=y(0),r=y(0);(n=d[e+404>>2])!=y(0)&&(o=d[t>>2],a=d[t+4>>2],r=d[t+8>>2],f[e+436>>2]=0,n=y(y(1)/n),d[e+432>>2]=r*n,d[e+428>>2]=n*a,d[e+424>>2]=n*o),i=f[t+4>>2],f[e+440>>2]=f[t>>2],f[e+444>>2]=i,i=f[t+12>>2],f[e+448>>2]=f[t+8>>2],f[e+452>>2]=i}function Ui(e){var t=0;(t=f[e>>2])&&sa(e,t),(t=f[e+4>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+4>>2]=0,f[e+8>>2]=-1,(t=f[e+32>>2])&&(h[e+36|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+32>>2]=0),f[e+32>>2]=0,f[e+24>>2]=0,f[e+28>>2]=0,f[e+16>>2]=0,a[e+36|0]=1}function Bi(e){var t=0;(t=f[e>>2])&&sa(e,t),(t=f[e+4>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+4>>2]=0,f[e+8>>2]=-1,(t=f[e+32>>2])&&(h[e+36|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+32>>2]=0),f[e+16>>2]=0,f[e+32>>2]=0,f[e+24>>2]=0,f[e+28>>2]=0,a[e+36|0]=1}function ki(e,t,n,i,o,r,s,c,l){return f[e+72>>2]=1,f[e+76>>2]=1,f[e+60>>2]=-1,a[e+52|0]=0,d[e+48>>2]=s,d[e+44>>2]=r,f[e+40>>2]=o,f[e+36>>2]=i,f[e+32>>2]=n,f[e+28>>2]=t,f[e+24>>2]=c,f[e+20>>2]=l,f[e+4>>2]=0,f[e+8>>2]=1065353216,f[e>>2]=4416,f[e+12>>2]=0,f[e+16>>2]=0,e}function ji(e,t,n,i,o){var a=y(0);if(a=y(1),!(t>n)&&(a=y(0),t!=n)){if((i=y(i/o))<y(0))return e>=t^1|y(t-i)>e^1?y(e<t?0:1):y(y(t-e)/i);if(i>y(0)){if(!(e<=n^1|y(n-i)<e^1))return y(y(n-e)/i);a=y(e>n?0:1)}}return a}function Gi(e,t,n,i,o,a,r,s,c,l){t|=0,n|=0,i|=0,o|=0,a|=0,r|=0,s|=0,c|=0,l|=0,e=f[32+(e|=0)>>2]+(l<<5)|0,f[n>>2]=f[e+12>>2],f[t>>2]=f[e+16>>2],f[i>>2]=f[e+28>>2],f[o>>2]=f[e+20>>2],f[s>>2]=f[e>>2],f[a>>2]=f[e+4>>2],f[r>>2]=f[e+8>>2],f[c>>2]=f[e+24>>2]}function Vi(e,t,n,i){var o=0;f[e>>2]=7408,o=f[t+4>>2],f[e+4>>2]=f[t>>2],f[e+8>>2]=o,o=f[t+12>>2],f[e+12>>2]=f[t+8>>2],f[e+16>>2]=o,t=f[n+4>>2],f[e+20>>2]=f[n>>2],f[e+24>>2]=t,t=f[n+12>>2],f[e+28>>2]=f[n+8>>2],f[e+32>>2]=t,f[e+40>>2]=1065353216,f[e+36>>2]=i}function Hi(e,t,n,i,o,a,r){var s;e|=0,t|=0,n|=0,i|=0,o|=0,a|=0,r|=0,R=s=R-32|0,f[s+28>>2]=e,f[s+24>>2]=t,f[s+20>>2]=n,f[s+16>>2]=i,f[s+12>>2]=o,f[s+8>>2]=a,f[s+4>>2]=r,function(e,t,n,i,o,a){var r;R=r=R-32|0,f[r+24>>2]=-1,f[r+28>>2]=-1,f[r+20>>2]=o,f[r+16>>2]=n,f[r+12>>2]=i,f[r+8>>2]=0,U(e,t,r+8|0,a),R=r+32|0}(f[s+24>>2],f[s+20>>2],f[s+16>>2],f[s+12>>2],f[s+8>>2],f[s+4>>2]),R=s+32|0}function Wi(e,t){var n=0,i=0,a=0,r=0;e:if(4!=(0|(n=f[e+844>>2])))f[e+844>>2]=n+1;else{if(n=function(e,t){var n,i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),f=y(0),p=y(0),m=y(0),v=y(0),g=y(0),x=y(0),b=y(0),C=y(0),S=0,E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=0,k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0);B=(S=(i=d[e+84>>2])<(o=d[t+80>>2]))?0:-1,n=(S=(r=d[e+292>>2])<(i=S?i:o))?1:B,S=(o=d[e+500>>2])<(i=S?r:i),S=(B=d[e+708>>2]<(S?o:i))?3:S?2:n,l=d[t>>2];t:{n:{i:{o:{if(h[19852]){if(!S){g=d[e+636>>2],E=d[e+428>>2],s=y(g-E),C=d[e+632>>2],w=d[e+424>>2],r=y(C-w),a=d[e+628>>2],R=d[e+420>>2],f=y(a-R),i=d[t+8>>2],o=d[t+4>>2];break o}if(c=d[e+212>>2],_=y(l-c),C=d[e+632>>2],w=d[e+424>>2],r=y(C-w),o=d[t+4>>2],m=d[e+216>>2],i=y(o-m),a=d[e+628>>2],R=d[e+420>>2],f=y(a-R),s=y(y(_*r)-y(i*f)),u=y(s*s),g=d[e+636>>2],E=d[e+428>>2],s=y(g-E),p=y(i*s),i=d[t+8>>2],T=d[e+220>>2],x=y(i-T),b=y(p-y(x*r)),_=y(y(x*f)-y(_*s)),W=y(u+y(y(b*b)+y(_*_))),1!=(0|S))break o;l=y(l-d[e+4>>2]),i=y(i-d[e+12>>2]),o=y(o-d[e+8>>2]),f=y(0);break i}a:{r:{if(S){if(M=d[e+212>>2],C=y(l-M),m=d[e+424>>2],x=d[e+632>>2],I=y(m-x),w=d[t+4>>2],O=d[e+216>>2],g=y(w-O),c=d[e+420>>2],b=d[e+628>>2],N=y(c-b),i=y(y(C*I)-y(g*N)),o=y(i*i),T=d[e+428>>2],_=d[e+636>>2],f=y(T-_),E=d[t+8>>2],a=d[e+220>>2],R=y(E-a),i=y(y(g*f)-y(R*I)),r=y(i*i),i=y(y(R*N)-y(C*f)),r=y(o+y(r+y(i*i))),s=y(l-c),D=y(O-x),i=y(w-m),k=y(M-b),o=y(y(s*D)-y(i*k)),u=y(o*o),j=y(a-_),o=y(E-T),p=y(y(i*j)-y(o*D)),v=y(p*p),p=y(y(o*k)-y(s*j)),p=r>(p=y(u+y(v+y(p*p))))?r:p,r=y(O-m),F=y(l-b),v=y(M-c),L=y(w-x),P=y(y(r*F)-y(v*L)),z=y(P*P),P=y(a-T),u=r,r=y(E-_),u=y(y(P*L)-y(u*r)),v=y(y(v*r)-y(P*F)),W=p>(v=y(z+y(y(u*u)+y(v*v))))?p:v,1==(0|S)){p=d[e+4>>2],G=y(p-b),u=y(l-p),v=d[e+12>>2],V=y(v-_),P=d[e+8>>2],H=y(P-x),z=y(E-v),U=y(w-P),f=y(0);break r}}else T=d[e+428>>2],_=d[e+636>>2],f=y(T-_),m=d[e+424>>2],x=d[e+632>>2],I=y(m-x),c=d[e+420>>2],b=d[e+628>>2],N=y(c-b),E=d[t+8>>2],r=y(E-_),w=d[t+4>>2],L=y(w-x),F=y(l-b),o=y(E-T),i=y(w-m),s=y(l-c);if(p=d[e+4>>2],u=y(l-p),P=d[e+8>>2],U=y(w-P),a=y(y(u*I)-y(U*N)),g=y(a*a),v=d[e+12>>2],z=y(E-v),a=y(y(U*f)-y(z*I)),f=y(y(z*N)-y(u*f)),f=y(g+y(y(a*a)+y(f*f))),H=y(P-x),G=y(p-b),a=y(y(s*H)-y(i*G)),g=y(a*a),V=y(v-_),a=y(y(i*V)-y(o*H)),C=y(a*a),a=y(y(o*G)-y(s*V)),f=f>(a=y(g+y(C+y(a*a))))?f:a,I=y(P-m),N=y(p-c),a=y(y(I*F)-y(N*L)),g=y(a*a),D=y(v-T),a=y(y(D*L)-y(I*r)),C=y(a*a),a=y(y(N*r)-y(D*F)),f=f>(a=y(g+y(C+y(a*a))))?f:a,a=d[e+220>>2],R=y(E-a),O=d[e+216>>2],g=y(w-O),M=d[e+212>>2],C=y(l-M),2==(0|S)){_=y(v-a),x=y(P-O),b=y(p-M),r=y(0);break a}j=y(a-_),D=y(O-x),k=y(M-b)}if(i=y(y(u*D)-y(U*k)),o=y(i*i),i=y(y(U*j)-y(z*D)),s=y(i*i),i=y(y(z*k)-y(u*j)),i=y(o+y(s+y(i*i))),o=y(y(C*H)-y(g*G)),s=y(o*o),o=y(y(g*V)-y(R*H)),_=y(o*o),o=y(y(R*G)-y(C*V)),i=i>(o=y(s+y(_+y(o*o))))?i:o,x=y(P-O),b=y(p-M),o=y(y(x*F)-y(b*L)),s=y(o*o),_=y(v-a),o=y(y(_*L)-y(x*r)),I=y(o*o),o=y(y(b*r)-y(_*F)),r=i>(o=y(s+y(I+y(o*o))))?i:o,s=y(0),B)break t;D=y(v-T),I=y(P-m),N=y(p-c),o=y(E-T),i=y(w-m),s=y(l-c)}l=y(O-m),c=y(M-c),m=y(y(u*l)-y(U*c)),p=y(m*m),m=y(a-T),l=y(y(U*m)-y(z*l)),a=y(l*l),l=y(y(z*c)-y(u*m)),l=y(p+y(a+y(l*l))),c=y(y(C*I)-y(g*N)),u=y(c*c),c=y(y(g*D)-y(R*I)),a=y(c*c),c=y(y(R*N)-y(C*D)),l=l>(c=y(u+y(a+y(c*c))))?l:c,c=y(y(x*s)-y(b*i)),i=y(y(_*i)-y(x*o)),u=y(i*i),i=y(y(b*o)-y(_*s)),s=l>(i=y(y(c*c)+y(u+y(i*i))))?l:i;break t}if(l=y(l-d[e+4>>2]),o=y(o-d[e+8>>2]),c=y(y(l*r)-y(o*f)),i=y(i-d[e+12>>2]),r=y(y(o*s)-y(i*r)),u=y(r*r),r=y(y(i*f)-y(l*s)),f=y(y(c*c)+y(u+y(r*r))),T=d[e+220>>2],m=d[e+216>>2],c=d[e+212>>2],r=y(0),2==(0|S))break n}if(r=y(C-m),s=y(a-c),_=y(y(l*r)-y(o*s)),u=y(_*_),_=y(g-T),r=y(y(o*_)-y(i*r)),a=y(r*r),r=y(y(i*s)-y(l*_)),r=y(u+y(a+y(r*r))),s=y(0),B)break t}s=y(w-m),c=y(R-c),m=y(y(l*s)-y(o*c)),u=o,o=y(E-T),s=y(y(u*o)-y(i*s)),i=y(y(i*c)-y(l*o)),s=y(y(m*m)+y(y(s*s)+y(i*i)))}return t=(e=(i=y(A(W)))>y(-0xde0b6b000000000))?0:-1,t=(e=(o=y(A(f)))>(i=e?i:y(-0xde0b6b000000000)))?1:t,e=(r=y(A(r)))>(i=e?o:i),y(A(s))>(e?r:i)?3:e?2:t}(e,t),i=g(n,208)+e|0,!(a=f[i+120>>2]))break e;if(!(r=f[5379]))break e;o[r](a),f[i+120>>2]=0}return It(4+((i=e)+g(e=(0|n)>0?n:0,208)|0)|0,t,208),e}function qi(e,t,n){var i;R=i=R-48|0,f[i+44>>2]=e,f[i+40>>2]=t,f[i+36>>2]=n,e=f[i+44>>2],d[e+404>>2]!=y(0)&&(function(e,t){var n,i;R=n=R-48|0,f[n+44>>2]=e,f[n+40>>2]=t,t=n+8|0,e=f[n+44>>2],Ki(t,f[n+40>>2],e+408|0),Ji(i=n+24|0,t,e+404|0),ko(e+372|0,i),R=n+48|0}(e,f[i+40>>2]),f[12+(t=R-16|0)>>2]=e+604,f[t+12>>2]&&(t=f[i+36>>2],Ki(i,f[i+40>>2],e+408|0),Ni(n=i+16|0,t,i),fa(e,n))),R=i+48|0}function Yi(e){var t;return Fo(e),a[e+92|0]=0,f[e+88>>2]=0,f[e+80>>2]=-1082130432,f[e+84>>2]=-1082130432,f[e+72>>2]=0,f[e+76>>2]=-1082130432,f[(t=e- -64|0)>>2]=1065353216,f[t+4>>2]=1065353216,f[e>>2]=12764,f[e+56>>2]=0,f[e+60>>2]=1065353216,e}function Xi(e,t,n){var i;R=i=R-32|0,f[i+28>>2]=t,f[i+24>>2]=n,d[i+20>>2]=d[f[i+28>>2]>>2]+d[f[i+24>>2]>>2],d[i+16>>2]=d[f[i+28>>2]+4>>2]+d[f[i+24>>2]+4>>2],d[i+12>>2]=d[f[i+28>>2]+8>>2]+d[f[i+24>>2]+8>>2],Lo(e,i+20|0,i+16|0,i+12|0),R=i+32|0}function Qi(e,t,n){var i;R=i=R-32|0,f[i+28>>2]=t,f[i+24>>2]=n,d[i+20>>2]=d[f[i+28>>2]>>2]-d[f[i+24>>2]>>2],d[i+16>>2]=d[f[i+28>>2]+4>>2]-d[f[i+24>>2]+4>>2],d[i+12>>2]=d[f[i+28>>2]+8>>2]-d[f[i+24>>2]+8>>2],Lo(e,i+20|0,i+16|0,i+12|0),R=i+32|0}function Ki(e,t,n){var i;R=i=R-32|0,f[i+28>>2]=t,f[i+24>>2]=n,d[i+20>>2]=d[f[i+28>>2]>>2]*d[f[i+24>>2]>>2],d[i+16>>2]=d[f[i+28>>2]+4>>2]*d[f[i+24>>2]+4>>2],d[i+12>>2]=d[f[i+28>>2]+8>>2]*d[f[i+24>>2]+8>>2],Lo(e,i+20|0,i+16|0,i+12|0),R=i+32|0}function Zi(e,t,n,i,o){var a;R=a=R-32|0,f[a+28>>2]=e,f[a+24>>2]=t,f[a+20>>2]=n,f[a+16>>2]=i,f[a+12>>2]=o,function(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,function(e){var t;f[12+(t=R-16|0)>>2]=e,e=f[t+12>>2],f[e>>2]=1556,d[e+4>>2]=1,f[e+8>>2]=1,f[e+12>>2]=-1}(e=f[i+12>>2]),f[e>>2]=1532,t=f[i+8>>2],n=f[t+4>>2],f[e+16>>2]=f[t>>2],f[e+20>>2]=n,n=f[t+12>>2],f[e+24>>2]=f[t+8>>2],f[e+28>>2]=n,t=f[i+4>>2],n=f[t+4>>2],f[e+32>>2]=f[t>>2],f[e+36>>2]=n,n=f[t+12>>2],f[e+40>>2]=f[t+8>>2],f[e+44>>2]=n,f[12+(R-16|0)>>2]=e+48,f[12+(R-16|0)>>2]=e- -64,f[e+80>>2]=0,R=i+16|0}(e=f[a+28>>2],f[a+16>>2],f[a+12>>2]),f[e>>2]=1692,f[e+84>>2]=f[a+24>>2],f[e+88>>2]=f[a+20>>2],f[e+92>>2]=0,f[e+96>>2]=0,R=a+32|0}function Ji(e,t,n){var i;R=i=R-32|0,f[i+28>>2]=t,f[i+24>>2]=n,d[i+20>>2]=d[f[i+28>>2]>>2]*d[f[i+24>>2]>>2],d[i+16>>2]=d[f[i+28>>2]+4>>2]*d[f[i+24>>2]>>2],d[i+12>>2]=d[f[i+28>>2]+8>>2]*d[f[i+24>>2]>>2],Lo(e,i+20|0,i+16|0,i+12|0),R=i+32|0}function $i(e){var t=0;e:if(!((t=f[e+4>>2])>>>0>13)){switch(t-2|0){case 6:return y(d[e+32>>2]*d[e+16>>2]);case 0:case 1:case 4:case 5:case 7:case 10:break e}return d[e+48>>2]}return y(o[f[f[e>>2]+48>>2]](e))}function eo(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,t=R-16|0,e=f[i+12>>2],f[t+12>>2]=e,f[f[t+12>>2]>>2]=2220,f[e>>2]=2136,_o(e+4|0,f[i+8>>2]),_o(e+68|0,f[i+4>>2]),_o(e+132|0,f[i+8>>2]),f[e+196>>2]=0,R=i+16|0}function to(e){a[e+356|0]=1,f[e>>2]=0,a[e+312|0]=0,f[e+292>>2]=1566444395,f[e+296>>2]=1566444395,f[e+336>>2]=0,f[e+340>>2]=0,f[e+300>>2]=1566444395,f[e+304>>2]=0,f[e+344>>2]=0,f[e+348>>2]=0,a[e+352|0]=0,a[e+332|0]=240&h[e+332|0]}function no(e,t,n,i){!function(e,t){f[e+4>>2]=35,f[e+8>>2]=0,f[e+12>>2]=-1,f[e+16>>2]=0,f[e>>2]=13904,f[e+52>>2]=t,f[e>>2]=12156,f[e+4>>2]=21,o[f[f[t>>2]+40>>2]](t)?o[f[f[t>>2]+48>>2]](t,e+20|0,e+36|0):jt(e)}(e,t),a[e+65|0]=0,a[e+64|0]=n,f[e+56>>2]=0,f[e+60>>2]=0,f[e>>2]=11524,f[e+4>>2]=21,i&&(f[6257]=f[6257]+1,n=js(t=0|o[f[4968]](172,16)),f[e+56>>2]=t,Q(n,f[e+52>>2],h[e+64|0],e+20|0,e+36|0),a[e+65|0]=1)}function io(e,t,n,i){var o;R=o=R-32|0,f[o+24>>2]=0,f[o+28>>2]=0,f[o+16>>2]=0,f[o+20>>2]=0,f[o+8>>2]=0,f[o+12>>2]=0,f[o>>2]=0,f[o+4>>2]=0,h[e+60|0]?ge(e,t,n,i,o+16|0,o,f[e+56>>2]):Oe(e,t,n,i,o+16|0,o),R=o+32|0}function oo(e,t,n,i,o){var a;f[28+(a=R-32|0)>>2]=e,f[a+24>>2]=t,f[a+20>>2]=n,f[a+16>>2]=i,f[a+12>>2]=o,e=f[a+28>>2],d[e>>2]=d[f[a+24>>2]>>2],d[e+4>>2]=d[f[a+20>>2]>>2],d[e+8>>2]=d[f[a+16>>2]>>2],d[e+12>>2]=d[f[a+12>>2]>>2]}function ao(e,t,n){var i=0;K(e),i=f[e+248>>2],f[t>>2]=f[e+244>>2],f[t+4>>2]=i,i=f[e+256>>2],f[t+8>>2]=f[e+252>>2],f[t+12>>2]=i,t=f[e+272>>2],f[n+8>>2]=f[e+268>>2],f[n+12>>2]=t,t=f[e+264>>2],f[n>>2]=f[e+260>>2],f[n+4>>2]=t}function ro(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,a[i+7|0]=n,e=f[i+12>>2],1&a[i+7|0]?hi(e+284|0,i+8|0):function(e,t){var n;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],f[n+4>>2]=function(e,t){var n,i=0;for(R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=R-16|0,e=f[n+12>>2],f[t+12>>2]=e,f[n+4>>2]=f[f[t+12>>2]+4>>2],f[n>>2]=0;;){if(t=f[n>>2],f[12+(i=R-16|0)>>2]=e,(0|t)<f[f[i+12>>2]+4>>2]){if(f[f[e+12>>2]+(f[n>>2]<<2)>>2]!=f[f[n+8>>2]>>2]){f[n>>2]=f[n>>2]+1;continue}f[n+4>>2]=f[n>>2]}break}return R=n+16|0,f[n+4>>2]}(e,f[n+8>>2]),function(e,t){var n,i=0;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],i=R-16|0,e=f[n+12>>2],f[i+12>>2]=e,(0|t)<f[f[i+12>>2]+4>>2]&&(t=f[n+8>>2],f[12+(i=R-16|0)>>2]=e,function(e,t,n){var i;f[12+(i=R-16|0)>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,e=f[i+12>>2],f[i>>2]=f[f[e+12>>2]+(f[i+8>>2]<<2)>>2],f[f[e+12>>2]+(f[i+8>>2]<<2)>>2]=f[f[e+12>>2]+(f[i+4>>2]<<2)>>2],f[f[e+12>>2]+(f[i+4>>2]<<2)>>2]=f[i>>2]}(e,t,f[f[i+12>>2]+4>>2]-1|0),f[12+(t=R-16|0)>>2]=e,e=f[t+12>>2],f[e+4>>2]=f[e+4>>2]+-1),R=n+16|0}(e,f[n+4>>2]),R=n+16|0}(e+284|0,i+8|0),f[12+(t=R-16|0)>>2]=e+284,f[e+280>>2]=f[f[t+12>>2]+4>>2]>0,R=i+16|0}function so(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,Yn(e=f[i+12>>2],f[i+8>>2]),t=f[i+4>>2],n=f[t+4>>2],f[e+48>>2]=f[t>>2],f[e+52>>2]=n,n=f[t+12>>2],f[e+56>>2]=f[t+8>>2],f[e+60>>2]=n,R=i+16|0}function co(){var e,t=0,n=0;return R=e=R-32|0,1&a[20764]||Mr(20764)&&(n=function(){var e;return R=e=R-48|0,1&a[20816]||Mr(20816)&&(d[e+44>>2]=1,d[e+40>>2]=0,d[e+36>>2]=0,d[e+32>>2]=0,d[e+28>>2]=1,d[e+24>>2]=0,d[e+20>>2]=0,d[e+16>>2]=0,d[e+12>>2]=1,ui(20768,e+44|0,e+40|0,e+36|0,e+32|0,e+28|0,e+24|0,e+20|0,e+16|0,e+12|0),Kr(20816)),R=e+48|0,20768}(),d[e+12>>2]=0,d[e+8>>2]=0,d[e+4>>2]=0,Lo(t=e+16|0,e+12|0,e+8|0,e+4|0),so(20700,n,t),Kr(20764)),R=e+32|0,20700}function lo(e,t){var n,i=0;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,di(e=f[n+12>>2],f[n+8>>2]),t=f[n+8>>2],i=f[t+52>>2],f[e+48>>2]=f[t+48>>2],f[e+52>>2]=i,i=f[t+60>>2],f[e+56>>2]=f[t+56>>2],f[e+60>>2]=i,R=n+16|0}function _o(e,t){var n,i=0;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,Yn(e=f[n+12>>2],f[n+8>>2]),t=f[n+8>>2],i=f[t+52>>2],f[e+48>>2]=f[t+48>>2],f[e+52>>2]=i,i=f[t+60>>2],f[e+56>>2]=f[t+56>>2],f[e+60>>2]=i,R=n+16|0}function uo(e,t,n){var i;if(!(i=f[e+16>>2]))return f[e+36>>2]=1,f[e+24>>2]=n,void(f[e+16>>2]=t);e:{if((0|t)==(0|i)){if(2!=f[e+24>>2])break e;return void(f[e+24>>2]=n)}a[e+54|0]=1,f[e+24>>2]=2,f[e+36>>2]=f[e+36>>2]+1}}function fo(e,t,n,i,o,a){var r;R=r=R-32|0,f[r+28>>2]=e,d[r+24>>2]=t,d[r+20>>2]=n,d[r+16>>2]=i,d[r+12>>2]=o,d[r+8>>2]=a,function(e,t,n,i,o,a){n=y(y(n-t)*y(.5)),d[e+4>>2]=n,(t=mn(y(n+t)))<y(-3.1415927410125732)?t=y(t+y(6.2831854820251465)):t>y(3.1415927410125732)&&(t=y(t+y(-6.2831854820251465))),d[e+16>>2]=a,d[e+12>>2]=o,d[e+8>>2]=i,d[e>>2]=t}(f[r+28>>2]+688|0,d[r+24>>2],d[r+20>>2],d[r+16>>2],d[r+12>>2],d[r+8>>2]),R=r+32|0}function ho(e,t,n,i){var a;return e|=0,t=y(t),n|=0,i=y(i),R=a=R-16|0,f[a+12>>2]=e,d[a+8>>2]=t,f[a+4>>2]=n,d[a>>2]=i,e=f[a+12>>2],e=0|o[f[f[e>>2]+52>>2]](e,d[a+8>>2],f[a+4>>2],d[a>>2]),R=a+16|0,0|e}function po(e,t){f[e+28>>2]=t,f[e+24>>2]=-1,u[e+20>>1]=1,f[e+16>>2]=2139095039,f[e+8>>2]=-1,f[e+12>>2]=-1,f[e>>2]=3492,f[e+4>>2]=3,function(){var e;R=e=R-16|0,1&a[21508]||Mr(21508)&&(f[e+8>>2]=0,f[e+12>>2]=0,f[e>>2]=0,f[e+4>>2]=0,pn(20832,e),Kr(21508)),f[e+8>>2]=0,f[e+12>>2]=0,f[e>>2]=0,f[e+4>>2]=0,Zn(20832,y(0),e),R=e+16|0}(),f[e+44>>2]=0,f[e+36>>2]=0,f[e+40>>2]=1028443341,f[e+32>>2]=20832}function mo(e,t){var n;return e|=0,t|=0,f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],a[n+7|0]=0!=(f[f[n+8>>2]+4>>2]&f[t+12>>2]),a[n+7|0]=1&a[n+7|0]?0!=(f[t+8>>2]&f[f[n+8>>2]+8>>2]):0,1&a[n+7|0]}function vo(e,t,n){var i;return e|=0,t=y(t),n|=0,R=i=R-16|0,f[i+12>>2]=e,d[i+8>>2]=t,f[i+4>>2]=n,e=f[i+12>>2],e=0|o[f[f[e>>2]+52>>2]](e,d[i+8>>2],f[i+4>>2],y(.01666666753590107)),R=i+16|0,0|e}function go(e,t,n){var i,a;return e|=0,t|=0,i=0|o[f[f[(n|=0)>>2]+40>>2]](n,e),a=0|o[f[f[n>>2]+28>>2]](n,i),f[t>>2]=a,a&&o[f[f[n>>2]+48>>2]](n,i),e=f[e+4>>2],f[t+8>>2]=0,f[t+4>>2]=e,13090}function yo(e,t,n,i){f[e+44>>2]=0,f[e+36>>2]=0,f[e+40>>2]=1028443341,f[e+32>>2]=i,f[e+28>>2]=n,f[e+24>>2]=-1,u[e+20>>1]=1,f[e+16>>2]=2139095039,f[e+8>>2]=-1,f[e+12>>2]=-1,f[e>>2]=3492,f[e+4>>2]=t}function Ao(e){var t;return f[(e|=0)>>2]=3972,(t=f[e+296>>2])&&(h[e+300|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+296>>2]=0),f[e+296>>2]=0,f[e+288>>2]=0,f[e+292>>2]=0,a[e+300|0]=1,0|e}function xo(e){var t,n,i;return R=t=R-16|0,f[t+12>>2]=e,e=0,n=R-16|0,i=f[t+12>>2],f[n+12>>2]=i,2!=f[f[n+12>>2]+220>>2]&&(f[12+(e=R-16|0)>>2]=i,e=5!=f[f[e+12>>2]+220>>2]),R=t+16|0,1&e}function bo(e){var t;return f[(e|=0)>>2]=15156,(t=f[e+32>>2])&&(h[e+36|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+32>>2]=0),f[e+32>>2]=0,f[e+24>>2]=0,f[e+28>>2]=0,a[e+36|0]=1,0|e}function Co(e){3&h[e+204|0]||(d[e+472>>2]=y(d[e+424>>2]*d[e+408>>2])+d[e+472>>2],d[e+476>>2]=y(d[e+428>>2]*d[e+412>>2])+d[e+476>>2],d[e+480>>2]=y(d[e+432>>2]*d[e+416>>2])+d[e+480>>2])}function So(e,t){e|=0,t|=0;var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t+44>>2]=f[e>>2],f[t+48>>2]=n,n=f[e+12>>2],f[t+52>>2]=f[e+8>>2],f[t+56>>2]=n}function Eo(e,t){e|=0,t|=0;var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t+60>>2]=f[e>>2],f[t+64>>2]=n,n=f[e+12>>2],f[t+68>>2]=f[e+8>>2],f[t+72>>2]=n}function wo(e,t){e|=0,t|=0;var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t+24>>2]=f[e>>2],f[t+28>>2]=n,n=f[e+12>>2],f[t+32>>2]=f[e+8>>2],f[t+36>>2]=n}function To(e,t){e|=0,t|=0;var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t+40>>2]=f[e>>2],f[t+44>>2]=n,n=f[e+12>>2],f[t+48>>2]=f[e+8>>2],f[t+52>>2]=n}function Po(e,t,n,i){var a;e|=0,t|=0,n=y(n),i|=0,R=a=R-16|0,f[a+12>>2]=e,f[a+8>>2]=t,d[a+4>>2]=n,f[a>>2]=i,e=f[a+12>>2],o[f[f[e>>2]+28>>2]](e,f[a+8>>2],d[a+4>>2],f[a>>2]),R=a+16|0}function Io(e,t){e|=0,t|=0;var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t+48>>2]=f[e>>2],f[t+52>>2]=n,n=f[e+12>>2],f[t+56>>2]=f[e+8>>2],f[t+60>>2]=n}function Ro(e,t){var n;return R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2]+16,f[e+8>>2]=t,R=n+16|0,f[64+(f[f[e+12>>2]+12>>2]+g(f[e+8>>2],80)|0)>>2]}function No(e,t,n,i){var a;e|=0,t|=0,n|=0,i|=0,R=a=R-16|0,f[a+12>>2]=e,f[a+8>>2]=t,f[a+4>>2]=n,f[a>>2]=i,e=f[a+12>>2],o[f[f[e>>2]+32>>2]](e,f[a+8>>2],f[a+4>>2],f[a>>2]),R=a+16|0}function Do(e,t,n,i){var a;e|=0,t|=0,n|=0,i|=0,R=a=R-16|0,f[a+12>>2]=e,f[a+8>>2]=t,f[a+4>>2]=n,f[a>>2]=i,e=f[a+12>>2],o[f[f[e>>2]+88>>2]](e,f[a+8>>2],f[a+4>>2],f[a>>2]),R=a+16|0}function Mo(e,t,n,i){var a;e|=0,t|=0,n|=0,i|=0,R=a=R-16|0,f[a+12>>2]=e,f[a+8>>2]=t,f[a+4>>2]=n,f[a>>2]=i,e=f[a+12>>2],o[f[f[e>>2]+36>>2]](e,f[a+8>>2],f[a+4>>2],f[a>>2]),R=a+16|0}function Oo(e,t,n,i){var a;e|=0,t|=0,n|=0,i|=0,R=a=R-16|0,f[a+12>>2]=e,f[a+8>>2]=t,f[a+4>>2]=n,f[a>>2]=i,e=f[a+12>>2],o[f[f[e>>2]+8>>2]](e,f[a+8>>2],f[a+4>>2],f[a>>2]),R=a+16|0}function zo(e,t,n){e|=0,t|=0,n|=0;var i,a=y(0);return R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,e=f[i+12>>2],a=y(o[f[f[e>>2]+32>>2]](e,f[i+8>>2],f[i+4>>2])),R=i+16|0,y(a)}function Lo(e,t,n,i){var o;f[12+(o=R-16|0)>>2]=e,f[o+8>>2]=t,f[o+4>>2]=n,f[o>>2]=i,e=f[o+12>>2],d[e>>2]=d[f[o+8>>2]>>2],d[e+4>>2]=d[f[o+4>>2]>>2],d[e+8>>2]=d[f[o>>2]>>2],d[e+12>>2]=0}function Fo(e){f[e+12>>2]=-1,f[e+4>>2]=35,f[e+8>>2]=0,f[e>>2]=13148,f[e+48>>2]=1025758986,f[e+24>>2]=1065353216,f[e+28>>2]=0,f[e+16>>2]=1065353216,f[e+20>>2]=1065353216,f[e>>2]=13276}function Uo(e){var t=y(0);return(t=mn(y(d[e>>2]+d[e+4>>2])))<y(-3.1415927410125732)?y(t+y(6.2831854820251465)):t>y(3.1415927410125732)^1?t:y(t+y(-6.2831854820251465))}function Bo(e){var t=y(0);return(t=mn(y(d[e>>2]-d[e+4>>2])))<y(-3.1415927410125732)?y(t+y(6.2831854820251465)):t>y(3.1415927410125732)^1?t:y(t+y(-6.2831854820251465))}function ko(e,t){var n;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],d[e>>2]=d[e>>2]+d[f[n+8>>2]>>2],d[e+4>>2]=d[e+4>>2]+d[f[n+8>>2]+4>>2],d[e+8>>2]=d[e+8>>2]+d[f[n+8>>2]+8>>2]}function jo(e,t,n,i){var a,r,s,c=0;a=f[e+4>>2],r=e=f[e>>2],s=t,c=0,n&&(c=t=a>>8,1&a&&(c=f[t+f[n>>2]>>2])),o[f[f[e>>2]+28>>2]](r,s,c+n|0,2&a?i:2)}function Go(e,t,n,i,o){var a;R=a=R-32|0,f[a+28>>2]=e,f[a+24>>2]=t,f[a+20>>2]=n,f[a+16>>2]=i,f[a+12>>2]=o,oo(f[a+28>>2],f[a+24>>2],f[a+20>>2],f[a+16>>2],f[a+12>>2]),R=a+32|0}function Vo(e){var t,n;return(e=(t=f[6388])+(n=e+3&-4)|0)>>>0<=t>>>0&&(0|n)>=1||e>>>0>(i.byteLength/65536|0)<<16>>>0&&!P(0|e)?(f[6259]=48,-1):(f[6388]=e,t)}function Ho(e,t){var n;return f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],y(y(y(d[e>>2]*d[f[n+8>>2]>>2])+y(d[e+4>>2]*d[f[n+8>>2]+4>>2]))+y(d[e+8>>2]*d[f[n+8>>2]+8>>2]))}function Wo(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,a[n+11|0]=t,t=1&a[n+11|0],f[12+(e=R-16|0)>>2]=f[n+12>>2],a[e+11|0]=t,a[f[e+12>>2]+21|0]=1&a[e+11|0],R=n+16|0}function qo(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]+276>>2]=d[e+8>>2],R=n+16|0}function Yo(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]+272>>2]=d[e+8>>2],R=n+16|0}function Xo(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,f[f[e+12>>2]+204>>2]=f[e+8>>2],R=n+16|0}function Qo(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]+16>>2]=d[e+8>>2],R=n+16|0}function Ko(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]+12>>2]=d[e+8>>2],R=n+16|0}function Zo(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,f[f[e+12>>2]+264>>2]=f[e+8>>2],R=n+16|0}function Jo(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,f[f[e+12>>2]+260>>2]=f[e+8>>2],R=n+16|0}function $o(e,t){var n;return e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,e=f[n+12>>2],e=0|o[f[f[e>>2]+52>>2]](e,d[n+8>>2],1,y(.01666666753590107)),R=n+16|0,0|e}function ea(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]+4>>2]=d[e+8>>2],R=n+16|0}function ta(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]+8>>2]=d[e+8>>2],R=n+16|0}function na(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,f[f[e+12>>2]+12>>2]=f[e+8>>2],R=n+16|0}function ia(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,f[f[e+12>>2]+8>>2]=f[e+8>>2],R=n+16|0}function oa(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]>>2]=d[e+8>>2],R=n+16|0}function aa(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],f[e>>2]=1940,ms(e+116|0),ms(e+96|0),ms(e+76|0),ms(e+24|0),f[12+(R-16|0)>>2]=e,R=t+16|0,0|e}function ra(e,t){var n;return R=n=R-16|0,f[n+8>>2]=e,f[n+4>>2]=t,e=f[n+8>>2],f[n+4>>2]?f[n+12>>2]=function(e,t){var n;return R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,f[n+4>>2]=0,e=f[n+8>>2]<<2,f[6257]=f[6257]+1,e=0|o[f[4968]](e,16),R=n+16|0,e}(e,f[n+4>>2]):f[n+12>>2]=0,R=n+16|0,f[n+12>>2]}function sa(e,t){var n;f[t+40>>2]&&(sa(e,f[t+36>>2]),sa(e,f[t+40>>2])),f[e>>2]==(0|t)&&(f[e>>2]=0),(n=f[e+4>>2])&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+4>>2]=t}function ca(e,t){var n;R=n=R-16|0,f[n+12>>2]=t,d[n+8>>2]=-d[f[n+12>>2]>>2],d[n+4>>2]=-d[f[n+12>>2]+4>>2],d[n>>2]=-d[f[n+12>>2]+8>>2],Lo(e,n+8|0,n+4|0,n),R=n+16|0}function la(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,e=f[i+12>>2],o[f[f[e>>2]+36>>2]](e,f[i+8>>2],f[i+4>>2],-1),R=i+16|0}function _a(e,t,n){var i;R=i=R-80|0,f[i+76>>2]=e,f[i+72>>2]=t,f[i+68>>2]=n,Ot(t=i+16|0,n=f[i+72>>2],f[i+68>>2]),wi(i,n,f[i+68>>2]+48|0),so(e,t,i),R=i+80|0}function ua(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,e=f[i+12>>2],o[f[f[e>>2]+36>>2]](e,f[i+8>>2],f[i+4>>2],-3),R=i+16|0}function fa(e,t){var n,i;R=n=R-48|0,f[n+44>>2]=e,f[n+40>>2]=t,mi(t=n+8|0,(e=f[n+44>>2])+324|0,f[n+40>>2]),Ki(i=n+24|0,t,e+604|0),ko(e+388|0,i),R=n+48|0}function ha(e,t,n){var i;e|=0,t=y(t),n|=0,R=i=R-16|0,f[i+12>>2]=e,d[i+8>>2]=t,f[i+4>>2]=n,e=f[i+12>>2],o[f[f[e>>2]+32>>2]](e,d[i+8>>2],f[i+4>>2]),R=i+16|0}function pa(e,t){var n,i,o=0;R=n=R-96|0,f[n+92>>2]=e,f[n+88>>2]=t,function(e,t){var n,i,o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,o=R-16|0,t=f[n+8>>2],f[o+12>>2]=t,o=f[o+12>>2],f[12+(a=R-16|0)>>2]=t+16,a=f[a+12>>2],f[12+(r=R-16|0)>>2]=t+32,r=f[r+12>>2],f[12+(s=R-16|0)>>2]=t,s=f[s+12>>2]+4|0,f[12+(c=R-16|0)>>2]=t+16,c=f[c+12>>2]+4|0,f[12+(l=R-16|0)>>2]=t+32,l=f[l+12>>2]+4|0,f[12+(_=R-16|0)>>2]=t,_=f[_+12>>2]+8|0,f[12+(u=R-16|0)>>2]=t+16,u=f[u+12>>2]+8|0,f[12+(i=R-16|0)>>2]=t+32,ui(e,o,a,r,s,c,l,_,u,f[i+12>>2]+8|0),R=n+16|0}(t=n+40|0,o=f[n+88>>2]),ca(i=n+8|0,o+48|0),mi(o=n+24|0,t,i),so(e,t,o),R=n+96|0}function ma(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,a[i+7|0]=n,e=f[i+12>>2],o[f[f[e>>2]+56>>2]](e,f[i+8>>2],1&a[i+7|0]),R=i+16|0}function da(e){var t,n;return y((n=(t=e*e)*e)*t*t*(2718311493989822e-21*t-.00019839334836096632)+(n*(.008333329385889463*t-.16666666641626524)+e))}function va(e){var t;(t=f[e+12>>2])&&(h[e+16|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+12>>2]=0),f[e+12>>2]=0,a[e+16|0]=1,f[e+4>>2]=0,f[e+8>>2]=0}function ga(e,t){var n;for(f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=0,f[n+4>>2]=t,f[n>>2]=f[n+8>>2];f[n>>2]<f[n+4>>2];)f[n>>2]=f[n>>2]+1}function ya(e){var t,n;return R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],f[12+(n=R-16|0)>>2]=f[f[e+12>>2]+4>>2],R=t+16|0,31==f[n+12>>2]}function Aa(e){var t,n;return R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],f[12+(n=R-16|0)>>2]=f[f[e+12>>2]+4>>2],R=t+16|0,f[n+12>>2]<20}function xa(e,t){e|=0,t|=0;var n=y(0),i=y(0),o=y(0);n=d[t>>2],i=d[t+4>>2],o=d[t+8>>2],f[e+28>>2]=0,d[e+24>>2]=A(o),d[e+20>>2]=A(i),d[e+16>>2]=A(n)}function ba(e,t){e|=0;var n,i=0;i=f[4+(t|=0)>>2],n=f[e+52>>2],f[n+4>>2]=f[t>>2],f[n+8>>2]=i,i=f[t+12>>2],f[n+12>>2]=f[t+8>>2],f[n+16>>2]=i,jt(e)}function Ca(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+8>>2],t=f[n+12>>2],4!=(-2&f[t+220>>2])&&(f[t+220>>2]=e),R=n+16|0}function Sa(e){var t=0;return f[(e|=0)>>2]=12632,(t=f[e+56>>2])&&(o[f[f[t>>2]>>2]](t),(t=f[e+56>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t))),0|e}function Ea(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],e=0|o[f[f[e>>2]+40>>2]](e,f[n+8>>2]),R=n+16|0,0|e}function wa(e,t,n,i,a,r){var s,c,l=0;l=(s=f[e+4>>2])>>8,c=e=f[e>>2],1&s&&(l=f[f[i>>2]+l>>2]),o[f[f[e>>2]+20>>2]](c,t,n,i+l|0,2&s?a:2,r)}function Ta(e,t){var n,i=0;return n=K(e),i=f[e+288>>2],f[t+8>>2]=f[e+284>>2],f[t+12>>2]=i,i=f[e+280>>2],f[t>>2]=f[e+276>>2],f[t+4>>2]=i,n}function Pa(e){var t;return y(-.499999997251031*(e*=e)+1+.04166662332373906*(t=e*e)+e*t*(2439044879627741e-20*e-.001388676377460993))}function Ia(e,t,n,i,a){var r,s,c=0;c=(r=f[e+4>>2])>>8,s=e=f[e>>2],1&r&&(c=f[f[n>>2]+c>>2]),o[f[f[e>>2]+24>>2]](s,t,n+c|0,2&r?i:2,a)}function Ra(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,a[i+7|0]=n,ro(f[i+12>>2],f[i+8>>2],1&a[i+7|0]),R=i+16|0}function Na(e){var t;f[12+(t=R-16|0)>>2]=e,e=f[t+12>>2],f[e>>2]=0,f[e+4>>2]=0,f[e+8>>2]=4096,f[e+12>>2]=4096,f[e+16>>2]=0,f[e+20>>2]=1}function Da(e){var t;R=t=R-16|0,f[t+12>>2]=e,function(e){var t;R=t=R-48|0,f[t+44>>2]=e,e=f[t+44>>2],d[t+40>>2]=1,d[t+36>>2]=0,d[t+32>>2]=0,d[t+28>>2]=0,d[t+24>>2]=1,d[t+20>>2]=0,d[t+16>>2]=0,d[t+12>>2]=0,d[t+8>>2]=1,Oi(e,t+40|0,t+36|0,t+32|0,t+28|0,t+24|0,t+20|0,t+16|0,t+12|0,t+8|0),R=t+48|0}(e=f[t+12>>2]),d[t+8>>2]=0,d[t+4>>2]=0,d[t>>2]=0,Lo(e+48|0,t+8|0,t+4|0,t),R=t+16|0}function Ma(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+36>>2]](e,f[n+8>>2],1,-1),R=n+16|0}function Oa(e){var t;f[12+(t=R-16|0)>>2]=e,e=f[t+12>>2],f[e>>2]=1964,d[e+4>>2]=1,f[e+8>>2]=0,f[e+12>>2]=1,f[e+16>>2]=-1,f[e+20>>2]=0}function za(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+36>>2]](e,f[n+8>>2],2,-3),R=n+16|0}function La(e){var t,n;R=t=R-16|0,f[t+12>>2]=e,n=R-16|0,e=f[t+12>>2],f[n+12>>2]=e,ga(e,f[f[n+12>>2]+4>>2]),ka(e),Vr(e),R=t+16|0}function Fa(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,d[12+(e=R-16|0)>>2]=d[n+8>>2],d[4962]=d[e+12>>2],R=n+16|0}function Ua(e,t){var n;R=n=R-32|0,f[n+28>>2]=e,f[n+24>>2]=t,e=n+8|0,t=f[n+28>>2],Ki(e,f[n+24>>2],t+408|0),ko(t+472|0,e),R=n+32|0}function Ba(e,t){var n;R=n=R-32|0,f[n+28>>2]=e,f[n+24>>2]=t,e=n+8|0,t=f[n+28>>2],Ki(e,f[n+24>>2],t+604|0),ko(t+488|0,e),R=n+32|0}function ka(e){var t;R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],f[e+12>>2]&&(1&a[e+16|0]&&function(e,t){var n;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,(e=f[n+8>>2])&&(f[6258]=f[6258]+1,o[f[4969]](e)),R=n+16|0}(e,f[e+12>>2]),f[e+12>>2]=0),R=t+16|0}function ja(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+56>>2]](e,f[n+8>>2],0),R=n+16|0}function Ga(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,0!=(2&f[f[e+12>>2]+204>>2])|0}function Va(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,0!=(1&f[f[e+12>>2]+204>>2])|0}function Ha(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,0!=(3&f[f[e+12>>2]+204>>2])|0}function Wa(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],f[e>>2]=1032,ms(e+348|0),Gr(e+344|0),Dt(e),R=t+16|0,0|e}function qa(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+44>>2]](e,d[n+8>>2]),R=n+16|0}function Ya(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+12>>2]](e,f[n+8>>2]),R=n+16|0}function Xa(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+24>>2]](e,f[n+8>>2]),R=n+16|0}function Qa(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+68>>2]](e,f[n+8>>2]),R=n+16|0}function Ka(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+72>>2]](e,f[n+8>>2]),R=n+16|0}function Za(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+84>>2]](e,f[n+8>>2]),R=n+16|0}function Ja(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+92>>2]](e,f[n+8>>2]),R=n+16|0}function $a(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+40>>2]](e,f[n+8>>2]),R=n+16|0}function er(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+60>>2]](e,f[n+8>>2]),R=n+16|0}function tr(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+64>>2]](e,f[n+8>>2]),R=n+16|0}function nr(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],o[f[f[e>>2]+8>>2]](e,f[n+8>>2]),R=n+16|0}function ir(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,0!=f[f[e+12>>2]+8>>2]|0}function or(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,y(d[f[e+12>>2]+16>>2])}function ar(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,y(d[f[e+12>>2]+12>>2])}function rr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,y(d[f[e+12>>2]+4>>2])}function sr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,y(d[f[e+12>>2]+8>>2])}function cr(e){var t;R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],d[t+8>>2]=0,d[t+4>>2]=0,d[t>>2]=0,Lo(e,t+8|0,t+4|0,t),R=t+16|0}function lr(e){e|=0;var t,n=y(0);return R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],n=y(o[f[f[e>>2]+48>>2]](e)),R=t+16|0,y(n)}function _r(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+192>>2]}function ur(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+220>>2]}function fr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+264>>2]}function hr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+204>>2]}function pr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+12>>2]}function mr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,y(d[f[e+12>>2]>>2])}function dr(e,t){var n;Wt(e,t),(n=f[e+4>>2])&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+4>>2]=t,f[e+12>>2]=f[e+12>>2]+-1}function vr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+4>>2]}function gr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+8>>2]}function yr(e){var t=0;e=e||1;e:{for(;;){if(t=D(e))break e;if(!(t=f[6260]))break;o[t]()}I(),E()}return t}function Ar(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],f[e>>2]=2244,ms(e+544|0),Ao(e),R=t+16|0,0|e}function xr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],f[e>>2]=1768,ms(e+136|0),aa(e),R=t+16|0,0|e}function br(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+32|0}function Cr(e){var t;return R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],f[6257]=f[6257]+1,e=0|o[f[4968]](e,16),R=t+16|0,e}function Sr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+4|0}function Er(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],e=0|o[f[f[e>>2]+36>>2]](e),R=t+16|0,0|e}function wr(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,f[f[n+12>>2]+220>>2]=f[n+8>>2],R=n+16|0}function Tr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],e=0|o[f[f[e>>2]+28>>2]](e),R=t+16|0,0|e}function Pr(e){for(var t=0;f[e+4>>2]=0,f[e+8>>2]=0,(t=f[e+24>>2])&&Pr(t),e=f[e+28>>2];);}function Ir(e,t){t|=0,f[(e|=0)>>2]=0,f[e+4>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0,f[e+(f[t+56>>2]<<2)>>2]=1065353216}function Rr(e,t,n){return n?(0|e)==(0|t)?1:!function(e,t){var n=0,i=0;e:if(!(!(n=h[0|e])|(0|n)!=(0|(i=h[0|t]))))for(;;){if(i=h[t+1|0],!(n=h[e+1|0]))break e;if(t=t+1|0,e=e+1|0,(0|n)!=(0|i))break}return n-i|0}(f[e+4>>2],f[t+4>>2]):f[e+4>>2]==f[t+4>>2]}function Nr(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,a[n+11|0]=t,ns(f[n+12>>2],1&a[n+11|0]),R=n+16|0}function Dr(e){var t=0;(t=f[e+24>>2])&&(Dr(t),ce(t)),f[e+24>>2]=0,(t=f[e+28>>2])&&(Dr(t),ce(t)),f[e+28>>2]=0}function Mr(e){var t;return R=t=R-16|0,f[t+12>>2]=0,f[t+4>>2]=e,f[t>>2]=e,f[t+8>>2]=e+1,e=function(e){var t,n=0;return R=t=R-16|0,f[t+8>>2]=f[e+4>>2],h[f[t+8>>2]]||(n=function(e){var t=0;e:{if(e=f[e+8>>2],1!=(0|(t=h[0|e]))){if(2&t)break e;a[0|e]=2,e=1}else e=0;return e}E()}(e)),R=t+16|0,n}(t),R=t+16|0,e}function Or(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,function(e,t){var n;f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,e=f[n+12>>2],f[e+304>>2]=f[e+304>>2]+1,d[e+240>>2]=d[n+8>>2]}(f[n+12>>2],d[n+8>>2]),R=n+16|0}function zr(e,t,n,i,o){var a;a=f[e+32>>2],f[a>>2]=f[a>>2]+1,kt(e,de(e,t,o)),kt(e,de(e,n,o)),kt(e,de(e,i,o))}function Lr(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,function(e,t){var n;f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,e=f[n+12>>2],f[e+304>>2]=f[e+304>>2]+1,d[e+232>>2]=d[n+8>>2]}(f[n+12>>2],d[n+8>>2]),R=n+16|0}function Fr(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,function(e,t){var n;f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,e=f[n+12>>2],f[e+304>>2]=f[e+304>>2]+1,d[e+228>>2]=d[n+8>>2]}(f[n+12>>2],d[n+8>>2]),R=n+16|0}function Ur(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,function(e,t){var n;f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,e=f[n+12>>2],f[e+304>>2]=f[e+304>>2]+1,d[e+236>>2]=d[n+8>>2]}(f[n+12>>2],d[n+8>>2]),R=n+16|0}function Br(e){var t;R=t=R-16|0,f[t+12>>2]=e,(e=f[t+12>>2])&&(f[6258]=f[6258]+1,o[f[4969]](e)),R=t+16|0}function kr(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],f[e+304>>2]=f[e+304>>2]+1,lo(e+4|0,f[n+8>>2]),R=n+16|0}(f[n+12>>2],f[n+8>>2]),R=n+16|0}function jr(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t+4>>2]=f[e>>2],f[t+8>>2]=n,n=f[e+12>>2],f[t+12>>2]=f[e+8>>2],f[t+16>>2]=n}(f[n+12>>2],f[n+8>>2]),R=n+16|0}function Gr(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],f[12+(R-16|0)>>2]=e,R=t+16|0,0|e}function Vr(e){var t;f[12+(t=R-16|0)>>2]=e,e=f[t+12>>2],a[e+16|0]=1,f[e+12>>2]=0,f[e+4>>2]=0,f[e+8>>2]=0}function Hr(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,(e=f[t+12>>2])&&o[f[f[e>>2]+4>>2]](e),R=t+16|0}function Wr(e){var t;R=t=R-16|0,f[t+12>>2]=e,R=e=R-16|0,f[e+12>>2]=f[t+12>>2],R=e+16|0,R=t+16|0}function qr(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=t,f[i+8>>2]=n,wi(e,f[i+12>>2],f[i+8>>2]),R=i+16|0}function Yr(e){var t;R=t=R-16|0,f[t+12>>2]=e,function(e){var t,n;for(R=t=R-16|0,f[t+8>>2]=e,e=f[t+8>>2],f[t+12>>2]=e,n=e+48|0;f[12+(R-16|0)>>2]=e,(0|n)!=(0|(e=e+16|0)););R=t+16|0}(e=f[t+12>>2]),f[12+(R-16|0)>>2]=e+48,R=t+16|0}function Xr(e,t){var n;e|=0,t|=0,f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,f[f[n+12>>2]+4>>2]=f[n+8>>2]}function Qr(e){e|=0;var t,n=y(0);return R=t=R-16|0,f[t+12>>2]=e,n=function(e){var t,n,i,a,r=y(0);return R=t=R-128|0,f[t+124>>2]=e,e=f[t+124>>2],Yr(n=t+56|0),Da(n),i=t+40|0,f[12+(R-16|0)>>2]=i,a=t+24|0,f[12+(R-16|0)>>2]=a,o[f[f[e>>2]+8>>2]](e,n,i,a),Qi(e=t+8|0,a,i),r=function(e){var t,n=y(0);return R=t=R-16|0,f[t+12>>2]=e,n=$r(f[t+12>>2]),d[12+(e=R-16|0)>>2]=n,R=t+16|0,y(S(d[e+12>>2]))}(e),R=t+128|0,y(r*y(.5))}(f[t+12>>2]),R=t+16|0,y(n)}function Kr(e){var t;R=t=R-16|0,f[t+12>>2]=0,f[t+4>>2]=e,f[t>>2]=e,f[t+8>>2]=e+1,function(e){var t;R=t=R-16|0,f[t+8>>2]=f[e+4>>2],a[f[t+8>>2]]=1,a[f[e+8>>2]]=1,R=t+16|0}(t),R=t+16|0}function Zr(e,t){var n;e|=0,t|=0,f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,f[f[n+12>>2]>>2]=f[n+8>>2]}function Jr(e,t){var n;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,di(f[n+12>>2],f[n+8>>2]),R=n+16|0}function $r(e){var t,n=y(0);return R=t=R-16|0,f[t+12>>2]=e,n=Ho(e=f[t+12>>2],e),R=t+16|0,n}function es(e){var t;R=t=R-16|0,f[t+12>>2]=e,e=f[t+12>>2],f[12+(R-16|0)>>2]=e,Vr(e),R=t+16|0}function ts(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,(e=f[t+12>>2])&&(ms(e),ce(e)),R=t+16|0}function ns(e,t){3&h[e+204|0]&&!t||(4!=(-2&f[e+220>>2])&&(f[e+220>>2]=1),f[e+224>>2]=0)}function is(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=1&ya(f[t+12>>2]),R=t+16|0,0|e}function os(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=1&xo(f[t+12>>2]),R=t+16|0,0|e}function as(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,Gr(e=f[t+12>>2]),R=t+16|0,0|e}function rs(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,Gr(e=f[t+12>>2]),ce(e),R=t+16|0}function ss(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,(e=f[t+12>>2])&&Br(e),R=t+16|0}function cs(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,as(e=f[t+12>>2]),ce(e),R=t+16|0}function ls(e,t,n,i,o,a){h[e+60|0]?ge(e,t,n,i,o,a,f[e+56>>2]):Oe(e,t,n,i,o,a)}function _s(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,(e=f[t+12>>2])&&ce(e),R=t+16|0}function us(e,t,n){var i;i=Yi(e),f[e+96>>2]=t,f[e>>2]=13652,f[e+4>>2]=3,n&&Mn(i)}function fs(e,t,n){t=y(t),f[(n|=0)>>2]=0,f[n+4>>2]=0,f[n+8>>2]=0,f[n+12>>2]=0}function hs(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=function(){var e,t=0;return R=e=R+-64|0,1&a[20696]||Mr(20696)&&(d[e+44>>2]=0,d[e+40>>2]=0,d[e+36>>2]=0,Lo(t=e+48|0,e+44|0,e+40|0,e+36|0),pn(20020,t),Kr(20696)),d[e+12>>2]=0,d[e+8>>2]=0,d[e+4>>2]=0,Lo(t=e+16|0,e+12|0,e+8|0,e+4|0),Zn(20020,y(0),t),R=e- -64|0,20020}(),R=t+16|0,0|e}function ps(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,ns(f[t+12>>2],0),R=t+16|0}function ms(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,La(f[t+12>>2]),R=t+16|0}function ds(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function vs(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[f[t+12>>2]+4>>2]}function gs(e,t){t|=0,e=f[4+(e|=0)>>2],o[f[f[e>>2]+8>>2]](e,f[t+36>>2])}function ys(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[f[t+12>>2]>>2]}function As(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[t+12>>2]+44|0}function xs(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[t+12>>2]+60|0}function bs(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[t+12>>2]+24|0}function Cs(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[t+12>>2]+40|0}function Ss(e,t,n,i){t|=0,n|=0,i|=0,o[f[f[(e|=0)>>2]+80>>2]](e,t,n,i)}function Es(e){f[(e|=0)>>2]=3492,e&&(f[6258]=f[6258]+1,o[f[4969]](e))}function ws(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[t+12>>2]}function Ts(){return y(y(1))}function Ps(e){Sa(e|=0),e&&(f[6258]=f[6258]+1,o[f[4969]](e))}function Is(e,t,n,i){!function(e,t,n,i){var a,r,s=y(0),c=y(0),l=y(0),_=0,u=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=0,C=y(0),E=0,w=y(0),T=y(0),P=0,I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=0,W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=y(0),J=y(0),$=y(0),ee=y(0),te=y(0),ne=y(0),ie=y(0),oe=y(0),re=y(0),se=y(0),ce=y(0),le=y(0),_e=y(0),ue=y(0);for(R=a=R-272|0,f[e+56>>2]=0,f[a+264>>2]=0,f[a+268>>2]=0,f[a+256>>2]=0,f[a+260>>2]=0,_=f[t+12>>2],f[a+168>>2]=f[t+8>>2],f[a+172>>2]=_,_=f[t+4>>2],f[a+160>>2]=f[t>>2],f[a+164>>2]=_,_=f[t+28>>2],f[a+184>>2]=f[t+24>>2],f[a+188>>2]=_,_=f[t+20>>2],f[a+176>>2]=f[t+16>>2],f[a+180>>2]=_,_=f[t+44>>2],f[a+200>>2]=f[t+40>>2],f[a+204>>2]=_,_=f[t+36>>2],f[a+192>>2]=f[t+32>>2],f[a+196>>2]=_,_=f[t+60>>2],f[a+216>>2]=f[t+56>>2],f[a+220>>2]=_,_=f[t+52>>2],f[a+208>>2]=f[t+48>>2],f[a+212>>2]=_,_=f[t+76>>2],f[a+104>>2]=f[t+72>>2],f[a+108>>2]=_,_=f[t+68>>2],f[a+96>>2]=f[t+64>>2],f[a+100>>2]=_,_=f[t+92>>2],f[a+120>>2]=f[t+88>>2],f[a+124>>2]=_,_=f[t+84>>2],f[a+112>>2]=f[t+80>>2],f[a+116>>2]=_,_=f[t+108>>2],f[a+136>>2]=f[t+104>>2],f[a+140>>2]=_,_=f[t+100>>2],f[a+128>>2]=f[t+96>>2],f[a+132>>2]=_,_=f[t+124>>2],f[a+152>>2]=f[t+120>>2],f[a+156>>2]=_,_=f[t+116>>2],f[a+144>>2]=f[t+112>>2],f[a+148>>2]=_,s=d[a+212>>2],c=d[a+148>>2],M=y(y(s+c)*y(.5)),d[a+212>>2]=s-M,s=d[a+216>>2],l=d[a+152>>2],O=y(y(s+l)*y(.5)),d[a+216>>2]=s-O,d[a+148>>2]=c-M,d[a+152>>2]=l-O,s=d[a+208>>2],c=d[a+144>>2],z=y(y(s+c)*y(.5)),d[a+208>>2]=s-z,d[a+144>>2]=c-z,P=f[f[e+28>>2]+4>>2]+-17>>>0<=1?f[f[e+32>>2]+4>>2]+-17>>>0<2:P,v=d[e+44>>2],s=d[e+48>>2],f[5385]=f[5385]+1,f[e+68>>2]=0,f[e+12>>2]=0,f[e+16>>2]=0,f[e+4>>2]=0,f[e+8>>2]=1065353216,f[e+60>>2]=-1,f[e+64>>2]=0,r=h[e+52|0],to(f[e+24>>2]),g=r?y(0):s,_=e+4|0,c=y(0xde0b6b000000000);;){m=d[t+32>>2],x=d[t+16>>2],C=d[t>>2],A=d[t+36>>2],T=d[t+20>>2],I=d[t+4>>2],N=d[t+40>>2],s=d[e+12>>2],p=d[t+24>>2],u=d[e+8>>2],D=d[t+8>>2],l=d[e+4>>2],f[a+252>>2]=0,w=p,p=y(-u),d[a+248>>2]=y(y(w*p)-y(l*D))-y(s*N),d[a+244>>2]=y(y(T*p)-y(l*I))-y(s*A),d[a+240>>2]=y(y(x*p)-y(l*C))-y(s*m),p=d[t+96>>2],m=d[t+64>>2],x=d[t+80>>2],C=d[t+100>>2],A=d[t+68>>2],T=d[t+84>>2],I=d[t+104>>2],N=d[t+72>>2],D=d[t+88>>2],f[a+236>>2]=0,d[a+232>>2]=y(y(l*N)+y(u*D))+y(s*I),d[a+228>>2]=y(y(l*A)+y(u*T))+y(s*C),d[a+224>>2]=y(y(l*m)+y(u*x))+y(s*p),ae(a+80|0,f[e+28>>2],a+240|0),ae(a- -64|0,f[e+32>>2],a+224|0),f[a+60>>2]=0,s=d[a+80>>2],u=d[a+84>>2],p=d[a+88>>2],l=y(y(y(y(s*d[a+192>>2])+y(u*d[a+196>>2]))+y(p*d[a+200>>2]))+d[a+216>>2]),d[a+56>>2]=l,x=y(y(y(y(s*d[a+176>>2])+y(u*d[a+180>>2]))+y(p*d[a+184>>2]))+d[a+212>>2]),d[a+52>>2]=x,C=y(y(y(y(s*d[a+160>>2])+y(u*d[a+164>>2]))+y(p*d[a+168>>2]))+d[a+208>>2]),d[a+48>>2]=C,f[a+44>>2]=0,s=d[a+64>>2],p=d[a+68>>2],m=d[a+72>>2],u=y(y(y(y(s*d[a+128>>2])+y(p*d[a+132>>2]))+y(m*d[a+136>>2]))+d[a+152>>2]),d[a+40>>2]=u,A=y(y(y(y(s*d[a+112>>2])+y(p*d[a+116>>2]))+y(m*d[a+120>>2]))+d[a+148>>2]),d[a+36>>2]=A,s=y(y(y(y(s*d[a+96>>2])+y(p*d[a+100>>2]))+y(m*d[a+104>>2]))+d[a+144>>2]),d[a+32>>2]=s,P&&(f[a+40>>2]=0,f[a+56>>2]=0,u=y(0),l=y(0)),f[a+28>>2]=0,l=y(l-u),d[a+24>>2]=l,s=y(C-s),d[a+16>>2]=s,u=y(x-A),d[a+20>>2]=u;e:{if((s=y(y(y(s*d[e+4>>2])+y(u*d[e+8>>2]))+y(l*d[e+12>>2])))>y(0)^1|y(s*s)>y(c*d[t+128>>2])^1){if(ni(f[e+24>>2],a+16|0)){E=1,f[e+68>>2]=1,b=2;break e}if((s=y(c-s))<=y(c*y(9.999999974752427e-7))){b=2,f[e+68>>2]=s<=y(0)?2:11,E=1;break e}if(Qn(f[e+24>>2],a+16|0,a+48|0,a+32|0),Ta(f[e+24>>2],a)){if(s=d[a>>2],l=y(s*s),s=d[a+4>>2],l=y(l+y(s*s)),s=d[a+8>>2],!((s=y(l+y(s*s)))<y(9.999999974752427e-7))){y(c-s)<=y(c*y(1.1920928955078125e-7))?(f[e+68>>2]=12,E=1,b=2):(b=f[a+4>>2],f[_>>2]=f[a>>2],f[_+4>>2]=b,b=f[a+12>>2],f[_+8>>2]=f[a+8>>2],f[_+12>>2]=b,H=f[e+64>>2],f[e+64>>2]=H+1,b=2,(0|H)>1e3||(4==f[f[e+24>>2]>>2]?f[e+68>>2]=13:b=0)),c=s;break e}b=f[a+4>>2],f[_>>2]=f[a>>2],f[_+4>>2]=b,b=f[a+12>>2],f[_+8>>2]=f[a+8>>2],f[_+12>>2]=b,f[e+68>>2]=6}else f[e+68>>2]=3}else f[e+68>>2]=10;E=1,b=2}if(b)break}s=y(0),l=r?y(0):v,u=y(l+g),P=0,b=0,1&E&&(ao(f[e+24>>2],a+240|0,a+224|0),E=f[_+12>>2],f[a+264>>2]=f[_+8>>2],f[a+268>>2]=E,E=f[_+4>>2],f[a+256>>2]=f[_>>2],f[a+260>>2]=E,s=d[e+4>>2],p=d[e+8>>2],m=d[e+12>>2],(v=y(y(y(s*s)+y(p*p))+y(m*m)))<y(9.999999974752427e-7)&&(f[e+68>>2]=5),E=1,v>y(14210854715202004e-30)?(v=y(y(1)/y(S(v))),d[a+256>>2]=v*d[a+256>>2],d[a+260>>2]=v*d[a+260>>2],d[a+264>>2]=v*d[a+264>>2],x=y(S(c)),c=y(l/x),d[a+240>>2]=d[a+240>>2]-y(c*s),d[a+244>>2]=d[a+244>>2]-y(c*p),d[a+248>>2]=d[a+248>>2]-y(c*m),c=y(g/x),d[a+224>>2]=y(c*s)+d[a+224>>2],d[a+228>>2]=y(c*p)+d[a+228>>2],d[a+232>>2]=y(c*m)+d[a+232>>2],b=1,s=y(y(y(1)/v)-u)):(E=2,s=y(0)),f[e+60>>2]=E),!f[e+68>>2]|!f[e+72>>2]|!f[e+20>>2]||(P=y(u+s)<d[4964]);e:{t:{if(((E=1^b)||P)&&(P=f[e+20>>2])){if(f[5384]=f[5384]+1,f[_+8>>2]=0,f[_+12>>2]=0,f[_>>2]=0,f[_+4>>2]=0,o[f[f[P>>2]+8>>2]](P,f[e+24>>2],f[e+28>>2],f[e+32>>2],a+160|0,a+96|0,_,a+80|0,a- -64|0,i)){if(m=y(0),c=d[a+64>>2],v=d[a+80>>2],g=y(c-v),x=d[a+68>>2],C=d[a+84>>2],p=y(x-C),A=d[a+72>>2],T=d[a+88>>2],l=y(A-T),(u=y(y(y(g*g)+y(p*p))+y(l*l)))<=y(14210854715202004e-30)&&(m=d[e+16>>2],g=d[e+4>>2],p=d[e+8>>2],l=d[e+12>>2],u=y(y(y(g*g)+y(p*p))+y(l*l))),u>y(14210854715202004e-30)){if(f[e+60>>2]=3,c=y(v-c),w=y(c*c),c=y(C-x),w=y(w+y(c*c)),c=y(T-A),!((s>(c=y(-y(S(y(w+y(c*c))))))^-1)&(1^E))){i=f[a+92>>2],f[a+248>>2]=f[a+88>>2],f[a+252>>2]=i,i=f[a+76>>2],f[a+232>>2]=f[a+72>>2],f[a+236>>2]=i,i=f[a+84>>2],f[a+240>>2]=f[a+80>>2],f[a+244>>2]=i,i=f[a+68>>2],f[a+224>>2]=f[a+64>>2],f[a+228>>2]=i,d[a+268>>2]=m,s=y(y(1)/y(S(u))),d[a+264>>2]=l*s,d[a+260>>2]=p*s,d[a+256>>2]=g*s,s=c;break t}if(f[e+60>>2]=8,b)break t;break e}if(f[e+60>>2]=9,b)break t;break e}if(p=d[e+4>>2],m=d[e+8>>2],v=d[e+12>>2],y(y(y(p*p)+y(m*m))+y(v*v))>y(0)){if(c=y(d[a+80>>2]-d[a+64>>2]),A=y(c*c),c=y(d[a+84>>2]-d[a+68>>2]),A=y(A+y(c*c)),c=y(d[a+88>>2]-d[a+72>>2]),!(((c=y(y(S(y(A+y(c*c))))-u))<s^-1)&(1^E))){i=f[a+92>>2],f[a+248>>2]=f[a+88>>2],f[a+252>>2]=i,i=f[a+76>>2],f[a+232>>2]=f[a+72>>2],f[a+236>>2]=i,d[a+248>>2]=d[a+248>>2]-y(l*v),d[a+232>>2]=y(g*v)+d[a+232>>2],i=f[a+68>>2],f[a+224>>2]=f[a+64>>2],f[a+228>>2]=i,i=f[a+84>>2],f[a+240>>2]=f[a+80>>2],f[a+244>>2]=i,d[a+224>>2]=y(g*p)+d[a+224>>2],d[a+228>>2]=y(g*m)+d[a+228>>2],d[a+240>>2]=d[a+240>>2]-y(l*p),d[a+244>>2]=d[a+244>>2]-y(l*m),i=f[_+12>>2],f[a+264>>2]=f[_+8>>2],f[a+268>>2]=i,i=f[_+4>>2],f[a+256>>2]=f[_>>2],f[a+260>>2]=i,l=d[a+256>>2],u=d[a+260>>2],g=d[a+264>>2],s=y(y(1)/y(S(y(y(y(l*l)+y(u*u))+y(g*g))))),d[a+264>>2]=g*s,d[a+260>>2]=u*s,d[a+256>>2]=l*s,f[e+60>>2]=6,s=c;break t}f[e+60>>2]=5}}if(!b)break e}y(s*s)<d[t+128>>2]^1&&!(s<y(0))||(i=f[a+260>>2],f[_>>2]=f[a+256>>2],f[_+4>>2]=i,i=f[a+268>>2],f[_+8>>2]=f[a+264>>2],f[_+12>>2]=i,d[e+56>>2]=s,g=d[t+32>>2],p=d[t>>2],m=d[t+16>>2],v=d[t+36>>2],x=d[t+4>>2],C=d[t+20>>2],l=d[t+40>>2],c=d[t+8>>2],u=d[t+24>>2],f[a+92>>2]=0,A=c,c=d[a+256>>2],w=u,u=d[a+260>>2],T=l,l=d[a+264>>2],d[a+88>>2]=y(y(A*c)+y(w*u))+y(T*l),d[a+84>>2]=y(y(c*x)+y(u*C))+y(l*v),d[a+80>>2]=y(y(p*c)+y(m*u))+y(g*l),g=d[t+96>>2],p=d[t+80>>2],m=d[t+64>>2],v=d[t+100>>2],x=d[t+84>>2],C=d[t+68>>2],A=d[t+104>>2],T=d[t+88>>2],I=d[t+72>>2],f[a+76>>2]=0,u=y(-u),d[a+72>>2]=y(y(T*u)-y(c*I))-y(l*A),d[a+68>>2]=y(y(x*u)-y(c*C))-y(l*v),d[a+64>>2]=y(y(p*u)-y(c*m))-y(l*g),ae(a+48|0,f[e+28>>2],a+80|0),ae(a+32|0,f[e+32>>2],a- -64|0),c=d[a+264>>2],T=d[a+216>>2],I=d[a+200>>2],N=d[a+192>>2],D=d[a+196>>2],W=d[a+152>>2],q=d[a+136>>2],Y=d[a+128>>2],X=d[a+132>>2],Q=d[a+212>>2],K=d[a+184>>2],Z=d[a+176>>2],J=d[a+180>>2],$=d[a+148>>2],ee=d[a+120>>2],te=d[a+112>>2],ne=d[a+116>>2],ie=d[a+208>>2],oe=d[a+168>>2],g=d[a+56>>2],re=d[a+160>>2],p=d[a+48>>2],se=d[a+164>>2],m=d[a+52>>2],ce=d[a+144>>2],le=d[a+104>>2],v=d[a+40>>2],_e=d[a+96>>2],x=d[a+32>>2],ue=d[a+100>>2],C=d[a+36>>2],u=d[a+260>>2],l=d[a+256>>2],L=d[t+32>>2],F=d[t+16>>2],U=d[t>>2],B=d[t+36>>2],k=d[t+20>>2],j=d[t+4>>2],G=d[t+40>>2],A=d[t+24>>2],V=d[t+8>>2],f[a+92>>2]=0,w=A,A=y(-u),d[a+88>>2]=y(y(w*A)-y(l*V))-y(c*G),d[a+84>>2]=y(y(k*A)-y(l*j))-y(c*B),d[a+80>>2]=y(y(F*A)-y(l*U))-y(c*L),L=d[t+96>>2],F=d[t+64>>2],U=d[t+80>>2],B=d[t+100>>2],k=d[t+68>>2],j=d[t+84>>2],G=d[t+104>>2],V=d[t+72>>2],w=d[t+88>>2],f[a+76>>2]=0,d[a+72>>2]=y(y(l*V)+y(u*w))+y(c*G),d[a+68>>2]=y(y(l*k)+y(u*j))+y(c*B),d[a+64>>2]=y(y(l*F)+y(u*U))+y(c*L),ae(a+48|0,f[e+28>>2],a+80|0),ae(a+32|0,f[e+32>>2],a- -64|0),A=y(y(y(y(y(Q+y(y(y(p*Z)+y(m*J))+y(g*K)))-y($+y(y(y(x*te)+y(C*ne))+y(v*ee))))*A)-y(l*y(y(ie+y(y(y(p*re)+y(m*se))+y(g*oe)))-y(ce+y(y(y(x*_e)+y(C*ue))+y(v*le))))))-y(c*y(y(T+y(y(y(p*N)+y(m*D))+y(g*I)))-y(W+y(y(y(x*Y)+y(C*X))+y(v*q)))))),c=d[a+48>>2],l=d[a+52>>2],u=d[a+56>>2],g=d[a+32>>2],p=d[a+36>>2],m=d[a+40>>2],v=d[a+256>>2],x=d[a+260>>2],w=y(y(y(y(y(y(y(c*d[a+160>>2])+y(l*d[a+164>>2]))+y(u*d[a+168>>2]))+d[a+208>>2])-y(y(y(y(g*d[a+96>>2])+y(p*d[a+100>>2]))+y(m*d[a+104>>2]))+d[a+144>>2]))*v)+y(y(y(y(y(y(c*d[a+176>>2])+y(l*d[a+180>>2]))+y(u*d[a+184>>2]))+d[a+212>>2])-y(y(y(y(g*d[a+112>>2])+y(p*d[a+116>>2]))+y(m*d[a+120>>2]))+d[a+148>>2]))*x)),l=y(y(y(y(y(c*d[a+192>>2])+y(l*d[a+196>>2]))+y(u*d[a+200>>2]))+d[a+216>>2])-y(y(y(y(g*d[a+128>>2])+y(p*d[a+132>>2]))+y(m*d[a+136>>2]))+d[a+152>>2])),c=d[a+264>>2],A>y(w+y(l*c))&&(f[e+60>>2]=10,d[a+264>>2]=-c,d[a+260>>2]=-x,d[a+256>>2]=-v),f[a+92>>2]=0,d[a+88>>2]=O+d[a+232>>2],d[a+84>>2]=M+d[a+228>>2],d[a+80>>2]=z+d[a+224>>2],o[f[f[n>>2]+16>>2]](n,a+256|0,a+80|0,s))}R=a+272|0}(e|=0,t|=0,n|=0,i|=0)}function Rs(e,t){return t|=0,f[f[236+(e|=0)>>2]+(t<<2)>>2]}function Ns(e){(e|=0)&&(f[6258]=f[6258]+1,o[f[4969]](e))}function Ds(e){return Fo(e),f[e+56>>2]=0,f[e>>2]=12632,e}function Ms(e,t){t|=0,o[f[f[(e|=0)>>2]+68>>2]](e,t)}function Os(e,t){t|=0,o[f[f[(e|=0)>>2]+64>>2]](e,t)}function zs(e,t,n){We(e+4|0,e+372|0,e+388|0,t,n)}function Ls(e,t,n){return n=y(n),0}function Fs(e,t,n,i){i=y(i)}function Us(e){return f[(e|=0)>>2]=3492,0|e}function Bs(e){e|=0,f[12+(R-16|0)>>2]=e,E()}function ks(){}function js(e){return function(e){a[e+60|0]=0,f[e+52>>2]=287,f[e>>2]=16296,f[e+144>>2]=0,a[e+80|0]=1,f[e+76>>2]=0,a[e+100|0]=1,f[e+68>>2]=0,f[e+72>>2]=0,f[e+96>>2]=0,a[e+120|0]=1,f[e+88>>2]=0,f[e+92>>2]=0,f[e+116>>2]=0,a[e+140|0]=1,f[e+108>>2]=0,f[e+112>>2]=0,f[e+136>>2]=0,a[e+164|0]=1,f[e+128>>2]=0,f[e+132>>2]=0,f[e+160>>2]=0,f[e+168>>2]=0,f[e+152>>2]=0,f[e+156>>2]=0,f[e+4>>2]=-8388609,f[e+8>>2]=-8388609,f[e+12>>2]=-8388609,f[e+16>>2]=0,f[e+20>>2]=2139095039,f[e+24>>2]=2139095039,f[e+28>>2]=2139095039,f[e+32>>2]=0}(e),f[e>>2]=14348,e}function Gs(e,t,n,i){return function(e,t,n,i){var o,a,r,s,c=0,l=0;return s=g(c=n>>>16|0,l=e>>>16|0),c=(65535&(l=((r=g(o=65535&n,a=65535&e))>>>16|0)+g(l,o)|0))+g(c,a)|0,e=(g(t,n)+s|0)+g(e,i)+(l>>>16)+(c>>>16)|0,N=e,65535&r|c<<16}(e,t,n,i)}function Vs(e){return f[72+(e|=0)>>2]}function Hs(e){return f[16+(e|=0)>>2]}function Ws(e){return f[96+(e|=0)>>2]}function qs(e){return f[8+(e|=0)>>2]}function Ys(){return 1}function Xs(){}function Qs(e){return 0|e}function Ks(){return 84}function Zs(){return 52}function Js(){return 12}function $s(){return 60}function ec(){return 6}function tc(){return 0}function nc(){return 1}function ic(){return 3}function oc(e,t){t=y(t)}function ac(){}function rc(e){ce(e|=0)}function sc(){E()}function cc(){return 1}function lc(){return 2}function _c(){return 3}function uc(){return 4}function fc(){}return o[1]=function(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,Ar(20020),R=t+16|0},o[2]=function(e,t,n,i,r){var s;return e|=0,t|=0,n|=0,i|=0,r|=0,R=s=R-32|0,f[s+28>>2]=e,f[s+24>>2]=t,f[s+20>>2]=n,f[s+16>>2]=i,f[s+12>>2]=r,Je(e=f[s+28>>2],f[s+24>>2],f[s+20>>2],f[s+16>>2]),f[e>>2]=1032,function(e){var t,n;R=t=R-16|0,f[t+12>>2]=e,e=R-16|0,n=f[t+12>>2],f[e+12>>2]=n,f[f[e+12>>2]>>2]=1672,f[n>>2]=1580,R=t+16|0}(e+344|0),es(e+348|0),a[e+368|0]=0,d[e+56>>2]=.009999999776482582,t=function(e){var t;return R=t=R-16|0,f[t+12>>2]=e,e=f[f[t+12>>2]+68>>2],e=0|o[f[f[e>>2]+36>>2]](e),R=t+16|0,e}(e),o[f[f[t>>2]+44>>2]](t,e+344|0),R=s+32|0,0|e},o[3]=Wa,o[4]=function(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,Wa(e=f[t+12>>2]),Br(e),R=t+16|0},o[5]=function(e){e|=0;var t,n=0,i=0,a=0,r=0;if(R=t=R-16|0,o[f[4966]](7783),(0|(n=f[e+8>>2]))>=1)for(;;){a=f[f[e+16>>2]+(i<<2)>>2];e:{t:if(!(h[e+76|0]||(r=f[a+220>>2]+-2|0)>>>0>3))switch(r-1|0){case 0:case 1:break t;default:break e}ot(e,a),n=f[e+8>>2]}if(!((0|(i=i+1|0))<(0|n)))break}o[f[4967]](),R=t+16|0},o[6]=function(e){var t,n;e|=0,R=t=R-16|0,o[f[4966]](7795),n=f[e+68>>2],o[f[f[n>>2]+32>>2]](n,f[e+24>>2]),o[f[4967]](),R=t+16|0},o[7]=function(e,t){var n;e|=0,t|=0,f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,f[f[n+12>>2]+72>>2]=f[n+8>>2]},o[8]=function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[f[t+12>>2]+72>>2]},o[9]=function(e){e|=0;var t,n=0,i=0,a=0,r=0,s=0,c=0;if(R=t=R-16|0,o[f[4966]](2516),se(e),o[f[f[e>>2]+20>>2]](e)&&(n=0|o[f[f[e>>2]+20>>2]](e),6144&o[f[f[n>>2]+56>>2]](n)&&!((0|(i=0|o[f[f[e>>2]+104>>2]](e)))<1)))for(;n=i+-1|0,s=e,c=0|o[f[f[e>>2]+108>>2]](e,n),r=f[f[e>>2]+172>>2],o[r](0|s,0|c),a=(0|i)>1,i=n,a;);if(o[f[f[e>>2]+20>>2]](e)&&(n=0|o[f[f[e>>2]+20>>2]](e),16387&o[f[f[n>>2]+56>>2]](n)&&o[f[f[e>>2]+20>>2]](e)&&(n=0|o[f[f[e>>2]+20>>2]](e),!(!o[f[f[n>>2]+56>>2]](n)|f[e+296>>2]<1))))for(i=0;n=f[f[e+304>>2]+(i<<2)>>2],o[f[f[n>>2]+12>>2]](n,f[e+72>>2]),(0|(i=i+1|0))<f[e+296>>2];);o[f[f[e>>2]+20>>2]](e)&&(e=0|o[f[f[e>>2]+20>>2]](e),o[f[f[e>>2]+104>>2]](e)),o[f[4967]](),R=t+16|0},o[10]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a,r=0,s=y(0),c=y(0),l=0,_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),A=y(0),x=y(0),b=y(0),C=0,S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=0,O=0,z=y(0),L=y(0),F=0,U=0,B=0,k=0,j=0,G=y(0),V=y(0),H=y(0);R=a=R-144|0,o[f[f[e>>2]+20>>2]](e)&&(r=0|o[f[f[e>>2]+20>>2]](e),32768&o[f[f[r>>2]+56>>2]](r)&&(r=0|o[f[f[e>>2]+20>>2]](e),o[f[f[r>>2]+64>>2]](r,t,y(.10000000149011612))));e:{t:if(!((r=f[n+4>>2])>>>0>31)){switch(r-1|0){case 30:if((0|(C=f[n+20>>2]))<1)break e;for(;r=C+-1|0,l=f[n+28>>2]+g(r,80)|0,M=f[l+64>>2],A=d[l+56>>2],x=d[l+48>>2],T=d[l+52>>2],S=d[l+32>>2],P=d[l>>2],I=d[l+16>>2],D=d[l+36>>2],u=d[l+4>>2],b=d[l+20>>2],N=d[l+40>>2],z=d[l+8>>2],L=d[l+24>>2],G=d[t+48>>2],V=d[t+52>>2],H=d[t+56>>2],s=d[t+8>>2],c=d[t>>2],_=d[t+4>>2],h=d[t+24>>2],p=d[t+16>>2],m=d[t+20>>2],E=d[t+40>>2],w=d[t+32>>2],v=d[t+36>>2],f[a+60>>2]=0,f[a+44>>2]=0,f[a+28>>2]=0,f[a+12>>2]=0,d[a+40>>2]=y(y(z*w)+y(L*v))+y(N*E),d[a+36>>2]=y(y(u*w)+y(b*v))+y(D*E),d[a+32>>2]=y(y(P*w)+y(I*v))+y(S*E),d[a+24>>2]=y(y(z*p)+y(L*m))+y(N*h),d[a+20>>2]=y(y(u*p)+y(b*m))+y(D*h),d[a+16>>2]=y(y(P*p)+y(I*m))+y(S*h),d[a+8>>2]=y(y(z*c)+y(L*_))+y(N*s),d[a+4>>2]=y(y(u*c)+y(b*_))+y(D*s),d[a>>2]=y(y(P*c)+y(I*_))+y(S*s),d[a+56>>2]=H+y(y(y(x*w)+y(T*v))+y(A*E)),d[a+52>>2]=V+y(y(y(x*p)+y(T*m))+y(A*h)),d[a+48>>2]=G+y(y(y(x*c)+y(T*_))+y(A*s)),o[f[f[e>>2]+28>>2]](e,a,M,i),l=(0|C)>1,C=r,l;);break e;default:r=f[n+44>>2],f[a+8>>2]=f[n+40>>2],f[a+12>>2]=r,r=f[n+36>>2],f[a>>2]=f[n+32>>2],f[a+4>>2]=r,s=y(o[f[f[n>>2]+48>>2]](n)),c=y(o[f[f[n>>2]+48>>2]](n)),_=y(y(o[f[f[n>>2]+48>>2]](n))+d[a+8>>2]),d[a+8>>2]=_,s=y(s+d[a>>2]),d[a>>2]=s,c=y(c+d[a+4>>2]),d[a+4>>2]=c,e=0|o[f[f[e>>2]+20>>2]](e),f[a+140>>2]=0,d[a+136>>2]=-_,d[a+132>>2]=-c,d[a+128>>2]=-s,o[f[f[e>>2]+80>>2]](e,a+128|0,a,t,i);break e;case 7:s=y(o[f[f[n>>2]+48>>2]](n)),e=0|o[f[f[e>>2]+20>>2]](e),o[f[f[e>>2]+24>>2]](e,s,t,i);break e;case 8:if((0|(r=f[n+96>>2]))<1)break e;for(;l=r+-1|0,C=f[n+104>>2]+(l<<4)|0,s=d[C+8>>2],c=d[C>>2],_=d[C+4>>2],C=0|o[f[f[e>>2]+20>>2]](e),S=d[f[n+124>>2]+(l<<2)>>2],P=d[t+48>>2],I=d[t+52>>2],D=d[t+56>>2],h=d[t+8>>2],p=d[t>>2],m=d[t+4>>2],E=d[t+24>>2],w=d[t+16>>2],v=d[t+20>>2],A=d[t+40>>2],x=d[t+32>>2],T=d[t+36>>2],f[a+60>>2]=0,f[a+44>>2]=0,f[a+28>>2]=0,f[a+12>>2]=0,u=y(x*y(0)),b=y(T*y(0)),d[a+40>>2]=A+y(u+b),N=y(u+T),u=y(A*y(0)),d[a+36>>2]=N+u,d[a+32>>2]=y(x+b)+u,u=y(w*y(0)),b=y(v*y(0)),d[a+24>>2]=E+y(u+b),N=y(u+v),u=y(E*y(0)),d[a+20>>2]=N+u,d[a+16>>2]=y(w+b)+u,u=y(p*y(0)),b=y(m*y(0)),d[a+8>>2]=h+y(u+b),N=y(u+m),u=y(h*y(0)),d[a+4>>2]=N+u,d[a>>2]=y(p+b)+u,d[a+56>>2]=D+y(y(y(c*x)+y(_*T))+y(s*A)),d[a+52>>2]=I+y(y(y(c*w)+y(_*v))+y(s*E)),d[a+48>>2]=P+y(y(y(c*p)+y(_*m))+y(s*h)),o[f[f[C>>2]+24>>2]](C,S,a,i),C=(0|r)>1,r=l,C;);break e;case 9:r=f[n+56>>2],s=d[(r<<2)+(n=n+32|0)>>2],c=d[n+((r+2|0)%3<<2)>>2],e=0|o[f[f[e>>2]+20>>2]](e),o[f[f[e>>2]+84>>2]](e,c,s,r,t,i);break e;case 10:r=f[n+72>>2],s=d[n+60>>2],c=d[n+64>>2],e=0|o[f[f[e>>2]+20>>2]](e),o[f[f[e>>2]+92>>2]](e,s,c,r,t,i);break e;case 12:r=f[n+56>>2],s=y(o[f[f[n>>2]+92>>2]](n)),l=f[n+44>>2],f[a+8>>2]=f[n+40>>2],f[a+12>>2]=l,l=f[n+36>>2],f[a>>2]=f[n+32>>2],f[a+4>>2]=l,c=y(o[f[f[n>>2]+48>>2]](n)),_=y(o[f[f[n>>2]+48>>2]](n)),d[a+8>>2]=y(o[f[f[n>>2]+48>>2]](n))+d[a+8>>2],d[a>>2]=c+d[a>>2],d[a+4>>2]=_+d[a+4>>2],c=d[(r<<2)+a>>2],e=0|o[f[f[e>>2]+20>>2]](e),o[f[f[e>>2]+88>>2]](e,s,c,r,t,i);break e;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 28:case 29:break t;case 27:}s=d[n+68>>2],e=0|o[f[f[e>>2]+20>>2]](e),o[f[f[e>>2]+96>>2]](e,n+52|0,s,t,i);break e}t:if(!((0|r)>6))if(M=f[n+56>>2]){if(f[M+28>>2]<1)break t;for(;;){_=y(0);n:if(r=(B=g(U,36))+f[M+36>>2]|0,F=f[r+4>>2]){if(s=y(0),c=y(0),!((0|F)<1))for(O=f[r+12>>2],r=f[(O+(F<<2)|0)-4>>2],C=0;;){if(O=(k=(l=f[(C<<2)+O>>2])<<4)+f[M+16>>2]|0,N=d[O>>2],z=d[O+4>>2],L=d[O+8>>2],O=0|o[f[f[e>>2]+20>>2]](e),j=f[M+16>>2],h=d[8+(r=j+(r<<4)|0)>>2],p=d[r>>2],m=d[r+4>>2],E=d[t+48>>2],w=d[t+8>>2],v=d[t>>2],A=d[t+4>>2],x=d[t+52>>2],T=d[t+24>>2],S=d[t+16>>2],P=d[t+20>>2],I=d[t+56>>2],D=d[t+40>>2],u=d[t+32>>2],b=d[t+36>>2],f[a+12>>2]=0,d[a+8>>2]=I+y(y(y(p*u)+y(m*b))+y(h*D)),d[a+4>>2]=x+y(y(y(p*S)+y(m*P))+y(h*T)),d[a>>2]=E+y(y(y(p*v)+y(m*A))+y(h*w)),h=d[8+(r=k+j|0)>>2],p=d[r>>2],m=d[r+4>>2],f[a+140>>2]=0,d[a+136>>2]=I+y(y(y(u*p)+y(b*m))+y(D*h)),d[a+132>>2]=x+y(y(y(S*p)+y(P*m))+y(T*h)),d[a+128>>2]=E+y(y(y(v*p)+y(A*m))+y(w*h)),o[f[f[O>>2]+16>>2]](O,a,a+128|0,i),c=y(c+L),s=y(s+z),_=y(_+N),C=C+1|0,r=f[M+36>>2]+B|0,(0|C)>=f[r+4>>2])break n;O=f[r+12>>2],r=l}}else s=y(0),c=y(0);if(r=0|o[f[f[e>>2]+20>>2]](e),16384&o[f[f[r>>2]+56>>2]](r)&&(f[a+8>>2]=0,f[a+12>>2]=0,f[a>>2]=1065353216,f[a+4>>2]=1065353216,r=f[M+36>>2]+B|0,u=d[r+28>>2],b=d[r+20>>2],N=d[r+24>>2],r=0|o[f[f[e>>2]+20>>2]](e),h=d[t+48>>2],p=d[t+8>>2],m=d[t>>2],E=d[t+4>>2],w=d[t+52>>2],v=d[t+24>>2],A=d[t+16>>2],x=d[t+20>>2],T=d[t+56>>2],S=d[t+40>>2],P=d[t+32>>2],I=d[t+36>>2],f[a+140>>2]=0,D=y(y(1)/y(0|F)),_=y(D*_),s=y(D*s),c=y(D*c),d[a+136>>2]=T+y(y(y(P*_)+y(I*s))+y(S*c)),d[a+132>>2]=w+y(y(y(_*A)+y(s*x))+y(c*v)),d[a+128>>2]=h+y(y(y(_*m)+y(s*E))+y(c*p)),f[a+124>>2]=0,_=y(_+b),s=y(s+N),c=y(c+u),d[a+120>>2]=T+y(y(y(P*_)+y(I*s))+y(S*c)),d[a+116>>2]=w+y(y(y(_*A)+y(s*x))+y(c*v)),d[a+112>>2]=h+y(y(y(_*m)+y(s*E))+y(c*p)),o[f[f[r>>2]+16>>2]](r,a+128|0,a+112|0,a)),!((0|(U=U+1|0))<f[M+28>>2]))break}}else if(!((0|o[f[f[n>>2]+100>>2]](n))<1))for(r=0;o[f[f[n>>2]+104>>2]](n,r,a,a+128|0),s=d[t+48>>2],c=d[t+8>>2],_=d[t>>2],h=d[t+4>>2],p=d[t+52>>2],m=d[t+24>>2],E=d[t+16>>2],w=d[t+20>>2],v=d[t+56>>2],A=d[t+40>>2],x=d[t+32>>2],T=d[t+36>>2],f[a+124>>2]=0,S=d[a>>2],P=d[a+4>>2],I=d[a+8>>2],d[a+120>>2]=v+y(y(y(x*S)+y(T*P))+y(A*I)),d[a+116>>2]=p+y(y(y(S*E)+y(P*w))+y(I*m)),d[a+112>>2]=s+y(y(y(S*_)+y(P*h))+y(I*c)),f[a+108>>2]=0,u=v,v=d[a+128>>2],S=y(x*v),x=d[a+132>>2],b=A,A=d[a+136>>2],d[a+104>>2]=u+y(y(S+y(T*x))+y(b*A)),d[a+100>>2]=p+y(y(y(E*v)+y(w*x))+y(m*A)),d[a+96>>2]=s+y(y(y(_*v)+y(h*x))+y(c*A)),l=0|o[f[f[e>>2]+20>>2]](e),o[f[f[l>>2]+16>>2]](l,a+112|0,a+96|0,i),(0|(r=r+1|0))<(0|o[f[f[n>>2]+100>>2]](n)););(r=f[n+4>>2])+-21>>>0<=8&&(f[a+136>>2]=1566444395,f[a+140>>2]=0,f[a+128>>2]=1566444395,f[a+132>>2]=1566444395,f[a+120>>2]=-581039253,f[a+124>>2]=0,f[a+112>>2]=-581039253,f[a+116>>2]=-581039253,f[a+8>>2]=o[f[f[e>>2]+20>>2]](e),f[a+4>>2]=9624,f[a>>2]=9600,r=f[i+12>>2],f[a+20>>2]=f[i+8>>2],f[a+24>>2]=r,r=f[i+4>>2],f[a+12>>2]=f[i>>2],f[a+16>>2]=r,r=f[t+12>>2],f[a+36>>2]=f[t+8>>2],f[a+40>>2]=r,r=f[t+4>>2],f[a+28>>2]=f[t>>2],f[a+32>>2]=r,r=f[t+20>>2],f[a+44>>2]=f[t+16>>2],f[a+48>>2]=r,r=f[t+28>>2],f[a+52>>2]=f[t+24>>2],f[a+56>>2]=r,r=f[t+44>>2],f[a+68>>2]=f[t+40>>2],f[a+72>>2]=r,r=f[t+36>>2],f[a+60>>2]=f[t+32>>2],f[a+64>>2]=r,r=f[t+52>>2],f[a+76>>2]=f[t+48>>2],f[a+80>>2]=r,r=f[t+60>>2],f[a+84>>2]=f[t+56>>2],f[a+88>>2]=r,o[f[f[n>>2]+64>>2]](n,a,a+112|0,a+128|0),r=f[n+4>>2]),3==(0|r)&&(f[a+136>>2]=1566444395,f[a+140>>2]=0,f[a+128>>2]=1566444395,f[a+132>>2]=1566444395,f[a+120>>2]=-581039253,f[a+124>>2]=0,f[a+112>>2]=-581039253,f[a+116>>2]=-581039253,f[a+8>>2]=o[f[f[e>>2]+20>>2]](e),f[a+4>>2]=9624,f[a>>2]=9600,e=f[i+12>>2],f[a+20>>2]=f[i+8>>2],f[a+24>>2]=e,e=f[i+4>>2],f[a+12>>2]=f[i>>2],f[a+16>>2]=e,e=f[t+12>>2],f[a+36>>2]=f[t+8>>2],f[a+40>>2]=e,e=f[t+4>>2],f[a+28>>2]=f[t>>2],f[a+32>>2]=e,e=f[t+20>>2],f[a+44>>2]=f[t+16>>2],f[a+48>>2]=e,e=f[t+28>>2],f[a+52>>2]=f[t+24>>2],f[a+56>>2]=e,e=f[t+44>>2],f[a+68>>2]=f[t+40>>2],f[a+72>>2]=e,e=f[t+36>>2],f[a+60>>2]=f[t+32>>2],f[a+64>>2]=e,e=f[t+52>>2],f[a+76>>2]=f[t+48>>2],f[a+80>>2]=e,e=f[t+60>>2],f[a+84>>2]=f[t+56>>2],f[a+88>>2]=e,e=f[n+96>>2],o[f[f[e>>2]+8>>2]](e,4|a,a+112|0,a+128|0))}R=a+144|0},o[11]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a,r,s=0,c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0);R=a=R-256|0,f[a+32>>2]=9416,s=f[t+12>>2],f[a+76>>2]=f[t+8>>2],f[a+80>>2]=s,s=f[t+4>>2],f[a+68>>2]=f[t>>2],f[a+72>>2]=s,s=f[n+12>>2],f[a+92>>2]=f[n+8>>2],f[a+96>>2]=s,s=f[n>>2],r=f[n+4>>2],f[a+104>>2]=0,f[a+108>>2]=0,f[a+112>>2]=0,f[a+116>>2]=0,f[a+124>>2]=0,f[a+128>>2]=0,f[a+120>>2]=1065353216,f[a+132>>2]=0,f[a+136>>2]=0,f[a+140>>2]=1065353216,f[a+144>>2]=0,f[a+84>>2]=s,f[a+88>>2]=r,f[a+248>>2]=i,f[a+100>>2]=1065353216,f[a+244>>2]=e,i=f[a+72>>2],f[a+148>>2]=f[a+68>>2],f[a+152>>2]=i,i=f[a+80>>2],f[a+156>>2]=f[a+76>>2],f[a+160>>2]=i,f[a+164>>2]=1065353216,f[a+176>>2]=0,f[a+180>>2]=0,f[a+168>>2]=0,f[a+172>>2]=0,f[a+184>>2]=1065353216,f[a+196>>2]=0,f[a+200>>2]=0,f[a+188>>2]=0,f[a+192>>2]=0,f[a+204>>2]=1065353216,f[a+208>>2]=0,i=f[n+12>>2],f[a+220>>2]=f[n+8>>2],f[a+224>>2]=i,i=f[n+4>>2],f[a+212>>2]=f[n>>2],f[a+216>>2]=i,u=y(d[n>>2]-d[t>>2]),c=y(d[n+4>>2]-d[t+4>>2]),l=y(d[n+8>>2]-d[t+8>>2]),_=y(y(1)/y(S(y(y(y(u*u)+y(c*c))+y(l*l))))),h=(l=y(l*_))==y(0)?y(0xde0b6b000000000):y(y(1)/l),d[a+44>>2]=h,p=(c=y(c*_))==y(0)?y(0xde0b6b000000000):y(y(1)/c),d[a+40>>2]=p,f[a+60>>2]=h<y(0),f[a+56>>2]=p<y(0),u=(_=y(u*_))==y(0)?y(0xde0b6b000000000):y(y(1)/_),d[a+36>>2]=u,f[a+52>>2]=u<y(0),d[a+64>>2]=y(y(_*y(d[a+84>>2]-d[a+68>>2]))+y(c*y(d[a+88>>2]-d[a+72>>2])))+y(l*y(d[a+92>>2]-d[a+76>>2])),e=f[e+68>>2],f[a+24>>2]=0,f[a+28>>2]=0,f[a+16>>2]=0,f[a+20>>2]=0,f[a+8>>2]=0,f[a+12>>2]=0,f[a>>2]=0,f[a+4>>2]=0,o[f[f[e>>2]+24>>2]](e,t,n,a+32|0,a+16|0,a),R=a+256|0},o[12]=function(e,t,n,i){zt(e|=0,t|=0,n|=0,i|=0)},o[13]=function(e,t){e|=0,!(t|=0)|!(2&f[t+252>>2])?bn(e,t):o[f[f[e>>2]+92>>2]](e,t)},o[14]=function(e){e|=0;var t,n,i=0,a=0,r=0,s=0,c=0,l=0;R=n=R-16|0,o[f[4966]](7821),o[f[f[e>>2]+8>>2]](e),o[f[f[e>>2]+12>>2]](e),t=f[e+24>>2],o[f[4966]](7855),t&&(i=f[e+68>>2],r=t,s=0|o[f[f[i>>2]+36>>2]](i),c=e+28|0,l=f[e+24>>2],a=f[f[t>>2]+32>>2],o[a](0|r,0|s,0|c,0|l)),o[f[4967]](),o[f[4967]](),R=n+16|0},o[15]=function(e,t){var n,i,a;e|=0,o[f[f[(t|=0)>>2]+32>>2]](t),i=0|o[f[f[t>>2]+16>>2]](t,104,1),n=dn(f[i+8>>2],0,104),f[n+88>>2]=f[e+264>>2],f[n+92>>2]=f[e+268>>2],f[n+96>>2]=f[e+272>>2],f[n+100>>2]=f[e+276>>2],f[n>>2]=f[e+92>>2],f[n+4>>2]=f[e+96>>2],f[n+8>>2]=f[e+100>>2],f[n+12>>2]=f[e+104>>2],f[n+16>>2]=f[e+108>>2],f[n+20>>2]=f[e+116>>2],f[n+24>>2]=f[e+120>>2],f[n+28>>2]=f[e+124>>2],f[n+32>>2]=f[e+128>>2],f[n+36>>2]=f[e+132>>2],f[n+40>>2]=f[e+148>>2],f[n+44>>2]=f[e+152>>2],f[n+48>>2]=f[e+156>>2],f[n+52>>2]=f[e+160>>2],f[n+56>>2]=f[e+176>>2],f[n+60>>2]=f[e+180>>2],f[n+64>>2]=f[e+112>>2],f[n+68>>2]=f[e+164>>2],f[n+72>>2]=f[e+168>>2],f[n+76>>2]=f[e+172>>2],a=f[e+144>>2],f[n+84>>2]=0,f[n+80>>2]=a,o[f[f[t>>2]+20>>2]](t,i,2833,1145853764,n),et(e,t),function(e,t){var n=0,i=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0;if((0|(i=f[e+8>>2]))>=1)for(;n=f[f[e+16>>2]+(a<<2)>>2],2&h[n+252|0]&&(s=t,c=0|o[f[f[n>>2]+16>>2]](n),l=1,r=f[f[t>>2]+16>>2],i=0|o[r](0|s,0|c,0|l),l=t,c=i,s=0|o[f[f[n>>2]+20>>2]](n,f[i+8>>2],t),_=1497645650,u=n,r=f[f[t>>2]+20>>2],o[r](0|l,0|c,0|s,0|_,0|u),i=f[e+8>>2]),(0|(a=a+1|0))<(0|i););if(f[e+228>>2]>=1)for(a=0;n=f[f[e+236>>2]+(a<<2)>>2],u=t,_=0|o[f[f[n>>2]+36>>2]](n),s=1,r=f[f[t>>2]+16>>2],i=0|o[r](0|u,0|_,0|s),s=t,_=i,u=0|o[f[f[n>>2]+40>>2]](n,f[i+8>>2],t),c=1397641027,l=n,r=f[f[t>>2]+20>>2],o[r](0|s,0|_,0|u,0|c,0|l),(0|(a=a+1|0))<f[e+228>>2];);}(e,t),o[f[f[t>>2]+36>>2]](t)},o[16]=function(e,t,n,i){e|=0,t=y(t),n|=0,i=y(i);var r=0,s=0,c=y(0);w(f[5678],0);e:if(n){if(d[e+284>>2]=i,t=y(d[e+280>>2]+t),d[e+280>>2]=t,!(t>=i))break e;r=e,c=t,t=y(t/i),s=y(A(t))<y(2147483648)?~~t:-2147483648,d[r+280>>2]=c-y(y(0|s)*i)}else f[e+284>>2]=0,d[e+280>>2]=h[e+316|0]?y(0):t,i=t,n=s=y(A(t))<y(1.1920928955078125e-7)^1;o[f[f[e>>2]+20>>2]](e)&&(r=0|o[f[f[e>>2]+20>>2]](e),a[20820]=o[f[f[r>>2]+56>>2]](r)>>>4&1);e:if(s){if(r=(0|s)>(0|n)?n:s,o[f[f[e>>2]+168>>2]](e,y(i*y(0|r))),o[f[f[e>>2]+176>>2]](e),(0|r)<1)break e;for(n=0;o[f[f[e>>2]+160>>2]](e,i),o[f[f[e>>2]+80>>2]](e),(0|r)!=(0|(n=n+1|0)););}else o[f[f[e>>2]+80>>2]](e);return o[f[f[e>>2]+120>>2]](e),f[6256]=f[6256]+1,0|s},o[17]=function(e,t,n){t|=0,n|=0;var i=0,r=0,s=0,c=0,l=0;if((0|(i=f[228+(e|=0)>>2]))==f[e+232>>2]&&!((0|i)>=(0|(s=i?i<<1:1)))){if(s&&(f[6257]=f[6257]+1,c=0|o[f[4968]](s<<2,16),i=f[e+228>>2]),(0|i)>=1)for(;f[(l=r<<2)+c>>2]=f[f[e+236>>2]+l>>2],(0|(r=r+1|0))!=(0|i););(r=f[e+236>>2])&&(h[e+240|0]&&(r&&(f[6258]=f[6258]+1,o[f[4969]](r)),i=f[e+228>>2]),f[e+236>>2]=0),f[e+236>>2]=c,f[e+232>>2]=s,a[e+240|0]=1}f[f[e+236>>2]+(i<<2)>>2]=t,f[e+228>>2]=i+1,n&&(An(f[t+28>>2],t),An(f[t+32>>2],t))},o[18]=function(e,t){t|=0;var n=0,i=0,o=0,a=0;e:if(!((0|(n=f[228+(e|=0)>>2]))<1)){for(o=f[e+236>>2];;){if(f[(a=(i<<2)+o|0)>>2]!=(0|t)){if((0|n)!=(0|(i=i+1|0)))continue;break e}break}(0|n)<=(0|i)||(i=(n=n+-1|0)<<2,f[a>>2]=f[i+o>>2],f[i+f[e+236>>2]>>2]=t,f[e+228>>2]=n)}Vt(f[t+28>>2],t),Vt(f[t+32>>2],t)},o[19]=function(e,t){t|=0;var n=0,i=0,r=0,s=0,c=0;if((0|(n=f[296+(e|=0)>>2]))==f[e+300>>2]&&!((0|n)>=(0|(r=n?n<<1:1)))){if(r&&(f[6257]=f[6257]+1,s=0|o[f[4968]](r<<2,16),n=f[e+296>>2]),(0|n)>=1)for(;f[(c=i<<2)+s>>2]=f[f[e+304>>2]+c>>2],(0|(i=i+1|0))!=(0|n););(i=f[e+304>>2])&&(h[e+308|0]&&(i&&(f[6258]=f[6258]+1,o[f[4969]](i)),n=f[e+296>>2]),f[e+304>>2]=0),f[e+304>>2]=s,f[e+300>>2]=r,a[e+308|0]=1}f[f[e+304>>2]+(n<<2)>>2]=t,f[e+296>>2]=n+1},o[20]=function(e,t){t|=0;var n=0,i=0,o=0,a=0;e:if(!((0|(n=f[296+(e|=0)>>2]))<1)){for(o=f[e+304>>2];;){if(f[(a=(i<<2)+o|0)>>2]!=(0|t)){if((0|n)!=(0|(i=i+1|0)))continue;break e}break}(0|n)<=(0|i)||(i=(n=n+-1|0)<<2,f[a>>2]=f[i+o>>2],f[i+f[e+304>>2]>>2]=t,f[e+296>>2]=n)}},o[21]=function(e,t){e|=0;var n=0,i=0,o=0,r=0;if(i=f[4+(n=t|=0)>>2],f[e+264>>2]=f[n>>2],f[e+268>>2]=i,i=f[n+12>>2],f[e+272>>2]=f[n+8>>2],f[e+276>>2]=i,(0|(n=f[e+248>>2]))>=1)for(;;){e:{t:if(i=f[f[e+256>>2]+(o<<2)>>2],!((r=f[i+220>>2]+-2|0)>>>0>3))switch(r-1|0){case 0:case 1:break t;default:break e}1&a[i+564|0]||(Fi(i,t),n=f[e+248>>2])}if(!((0|(o=o+1|0))<(0|n)))break}},o[22]=function(e,t){e|=0;var n=0;n=f[268+(t|=0)>>2],f[e>>2]=f[t+264>>2],f[e+4>>2]=n,n=f[t+276>>2],f[e+8>>2]=f[t+272>>2],f[e+12>>2]=n},o[23]=function(e){e|=0;var t,n=0,i=0,a=y(0),r=0,s=0;R=t=R+-64|0;e:if(h[e+290|0]){if((0|(i=f[e+8>>2]))<1)break e;for(;!(n=f[f[e+16>>2]+(r<<2)>>2])|!(2&f[n+252>>2])|!f[n+540>>2]|3&h[n+204|0]||(We(i=n+68|0,s=n+132|0,n+148|0,a=h[e+316|0]&&(a=d[e+284>>2])!=y(0)?y(d[e+280>>2]-a):y(d[e+280>>2]*d[n+268>>2]),t),n=f[n+540>>2],o[f[f[n>>2]+12>>2]](n,t),i=f[e+8>>2]),(0|(r=r+1|0))<(0|i););}else if(!((0|(i=f[e+248>>2]))<1))for(;;){t:{n:if(n=f[f[e+256>>2]+(r<<2)>>2],!((s=f[n+220>>2]+-2|0)>>>0>3))switch(s-1|0){case 0:case 1:break n;default:break t}!f[n+540>>2]|3&h[n+204|0]||(We(i=n+68|0,s=n+132|0,n+148|0,a=h[e+316|0]&&(a=d[e+284>>2])!=y(0)?y(d[e+280>>2]-a):y(d[e+280>>2]*d[n+268>>2]),t),n=f[n+540>>2],o[f[f[n>>2]+12>>2]](n,t),i=f[e+248>>2])}if(!((0|(r=r+1|0))<(0|i)))break}R=t- -64|0},o[24]=function(e,t){e|=0;var n=0,i=0,r=0,s=0,c=0;if(3&h[204+(t|=0)|0]|1&a[t+564|0]||Fi(t,e+264|0),f[t+192>>2]){if(1&a[t+204|0])4!=(-2&f[t+220>>2])&&(f[t+220>>2]=2);else{if((0|(n=f[e+248>>2]))==f[e+252>>2]&&!((0|n)>=(0|(r=n?n<<1:1)))){if(r&&(f[6257]=f[6257]+1,s=0|o[f[4968]](r<<2,16),n=f[e+248>>2]),(0|n)>=1)for(;f[(c=i<<2)+s>>2]=f[f[e+256>>2]+c>>2],(0|(i=i+1|0))!=(0|n););(i=f[e+256>>2])&&(h[e+260|0]&&(i&&(f[6258]=f[6258]+1,o[f[4969]](i)),n=f[e+248>>2]),f[e+256>>2]=0),f[e+256>>2]=s,f[e+252>>2]=r,a[e+260|0]=1}f[f[e+256>>2]+(n<<2)>>2]=t,f[e+248>>2]=n+1}n=t,t=3&f[t+204>>2],o[f[f[e>>2]+36>>2]](e,n,t?2:1,t?-3:-1)}},o[25]=function(e,t,n,i){e|=0,n|=0,i|=0;var r=0,s=0,c=0,l=0,_=0;if(3&h[204+(t|=0)|0]|1&a[t+564|0]||Fi(t,e+264|0),f[t+192>>2]){if(1&a[t+204|0])4!=(-2&f[t+220>>2])&&(f[t+220>>2]=2);else{if((0|(r=f[e+248>>2]))==f[e+252>>2]&&!((0|r)>=(0|(c=r?r<<1:1)))){if(c&&(f[6257]=f[6257]+1,l=0|o[f[4968]](c<<2,16),r=f[e+248>>2]),(0|r)>=1)for(;f[(_=s<<2)+l>>2]=f[f[e+256>>2]+_>>2],(0|(s=s+1|0))!=(0|r););(s=f[e+256>>2])&&(h[e+260|0]&&(s&&(f[6258]=f[6258]+1,o[f[4969]](s)),r=f[e+248>>2]),f[e+256>>2]=0),f[e+256>>2]=l,f[e+252>>2]=c,a[e+260|0]=1}f[f[e+256>>2]+(r<<2)>>2]=t,f[e+248>>2]=r+1}o[f[f[e>>2]+36>>2]](e,t,n,i)}},o[26]=function(e,t){t|=0;var n=0,i=0,o=0,a=0;e:if(!((0|(n=f[248+(e|=0)>>2]))<1)){for(o=f[e+256>>2];;){if(f[(a=(i<<2)+o|0)>>2]!=(0|t)){if((0|n)!=(0|(i=i+1|0)))continue;break e}break}(0|n)<=(0|i)||(i=(n=n+-1|0)<<2,f[a>>2]=f[i+o>>2],f[i+f[e+256>>2]>>2]=t,f[e+248>>2]=n)}bn(e,t)},o[27]=function(e,t){t|=0;var n=0;h[289+(e|=0)|0]&&(n=f[e+216>>2])&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+216>>2]=t,a[e+289|0]=0,f[f[e+212>>2]+8>>2]=t},o[28]=function(e){return f[216+(e|=0)>>2]},o[29]=function(e){return f[228+(e|=0)>>2]},o[30]=Rs,o[31]=Rs,o[32]=function(e){return e|=0,f[12+(R-16|0)>>2]=e,2},o[33]=function(e){var t=0,n=0;if(f[248+(e|=0)>>2]>=1)for(;t=f[f[e+256>>2]+(n<<2)>>2],f[t+472>>2]=0,f[t+476>>2]=0,f[t+496>>2]=0,f[t+500>>2]=0,f[t+488>>2]=0,f[t+492>>2]=0,f[t+480>>2]=0,f[t+484>>2]=0,(0|(n=n+1|0))<f[e+248>>2];);},o[34]=Os,o[35]=Ms,o[36]=Os,o[37]=Ms,o[38]=function(e,t){e|=0,t=y(t);var n,i=0,a=0,r=0;if(R=n=R-16|0,o[f[4966]](2807),(0|(a=f[e+248>>2]))>=1)for(;i=f[f[e+256>>2]+(r<<2)>>2],3&h[i+204|0]||(bt(i,t),zs(i,t,i+68|0),a=f[e+248>>2]),(0|(r=r+1|0))<(0|a););o[f[4967]](),R=n+16|0},o[39]=function(e,t){e|=0,t=y(t);var n,i=0,a=y(0),r=0,s=0,c=0,l=y(0),_=y(0),u=y(0),p=0,m=0,v=y(0),A=y(0),x=y(0),b=y(0);if(R=n=R-80|0,o[f[4966]](2749),(0|(i=f[e+248>>2]))>=1&&function(e,t,n,i){var a,r=0,s=0,c=y(0),l=0,_=0,u=0,p=0,m=y(0),v=y(0);if(R=a=R-304|0,(0|n)>=1)for(;;){s=f[(p<<2)+t>>2],f[s+268>>2]=1065353216;e:{t:if(!((_=f[s+220>>2]+-2|0)>>>0>3))switch(_-1|0){case 0:case 1:break t;default:break e}3&h[s+204|0]||(zs(s,i,a+240|0),h[e+44|0]&&(c=d[s+276>>2],(c=y(c*c))!=y(0)&&(v=c,c=y(d[a+288>>2]-d[s+52>>2]),m=y(c*c),c=y(d[a+292>>2]-d[s+56>>2]),m=y(m+y(c*c)),c=y(d[a+296>>2]-d[s+60>>2]),v<y(m+y(c*c))&&(o[f[4966]](2729),f[f[s+192>>2]+4>>2]<=19&&(_=0,f[5207]=f[5207]+1,r=f[e+68>>2],r=0|o[f[f[r>>2]+36>>2]](r),u=f[e+24>>2],f[a+140>>2]=-1,f[a+132>>2]=1065353216,f[a+136>>2]=1,l=f[s+64>>2],f[a+152>>2]=f[s+60>>2],f[a+156>>2]=l,l=f[s+56>>2],f[a+144>>2]=f[s+52>>2],f[a+148>>2]=l,l=f[a+300>>2],f[a+168>>2]=f[a+296>>2],f[a+172>>2]=l,l=f[a+292>>2],f[a+160>>2]=f[a+288>>2],f[a+164>>2]=l,f[a+208>>2]=0,f[a+128>>2]=3052,f[a+220>>2]=r,f[a+224>>2]=u,f[a+216>>2]=0,f[a+212>>2]=s,r=f[s+272>>2],Fo(a+72|0),f[a+96>>2]=1065353216,f[a+88>>2]=1065353216,f[a+92>>2]=1065353216,f[a+76>>2]=8,f[a+72>>2]=11388,f[a+108>>2]=0,f[a+112>>2]=0,f[a+116>>2]=0,f[a+100>>2]=0,f[a+104>>2]=0,f[a+124>>2]=0,f[a+120>>2]=r,f[a+104>>2]=r,f[a+216>>2]=f[e+56>>2],r=f[s+188>>2],f[a+136>>2]=f[r+4>>2],f[a+140>>2]=f[r+8>>2],r=f[a+252>>2],f[a+16>>2]=f[a+248>>2],f[a+20>>2]=r,r=f[a+244>>2],f[a+8>>2]=f[a+240>>2],f[a+12>>2]=r,r=f[a+268>>2],f[a+32>>2]=f[a+264>>2],f[a+36>>2]=r,r=f[a+260>>2],f[a+24>>2]=f[a+256>>2],f[a+28>>2]=r,r=f[a+284>>2],f[a+48>>2]=f[a+280>>2],f[a+52>>2]=r,r=f[a+276>>2],f[a+40>>2]=f[a+272>>2],f[a+44>>2]=r,r=f[a+300>>2],f[a+64>>2]=f[a+296>>2],f[a+68>>2]=r,r=f[a+292>>2],f[a+56>>2]=f[a+288>>2],f[a+60>>2]=r,l=f[12+(r=u=s+4|0)>>2],f[a+16>>2]=f[r+8>>2],f[a+20>>2]=l,l=f[r+4>>2],f[a+8>>2]=f[r>>2],f[a+12>>2]=l,r=f[s+32>>2],f[a+32>>2]=f[s+28>>2],f[a+36>>2]=r,r=f[s+24>>2],f[a+24>>2]=f[s+20>>2],f[a+28>>2]=r,r=f[s+48>>2],f[a+48>>2]=f[s+44>>2],f[a+52>>2]=r,r=f[s+40>>2],f[a+40>>2]=f[s+36>>2],f[a+44>>2]=r,le(e,a+72|0,u,a+8|0,a+128|0),(c=d[a+132>>2])<y(1)&&(d[s+268>>2]=c,zs(s,y(c*i),a+240|0),f[s+268>>2]=0,at(s,a+240|0),_=4),_)||(_=0),o[f[4967]](),_)))||at(s,a+240|0))}if((0|(p=p+1|0))==(0|n))break}R=a+304|0}(e,f[e+256>>2],i,t),h[e+291|0]){if(o[f[4966]](2769),(0|(i=f[e+324>>2]))>=1)for(;;){if(s=f[f[e+332>>2]+(m<<2)>>2],f[s+844>>2]>=1){for(i=f[s+840>>2],c=f[i+252>>2]<<30>>31&i,i=f[s+836>>2],r=f[i+252>>2]<<30>>31&i,p=0;(t=y(d[r+232>>2]*d[c+232>>2]))>y(0)&&(i=g(p,208)+s|0,(a=d[i+136>>2])!=y(0)&&(l=d[i+68>>2],_=d[i+72>>2],u=d[i+76>>2],f[n+60>>2]=0,u=y(t*y(a*y(-u))),d[n+56>>2]=u,_=y(t*y(a*y(-_))),d[n+52>>2]=_,t=y(t*y(a*y(-l))),d[n+48>>2]=t,a=d[i+52>>2],l=d[i+56>>2],v=d[i+60>>2],A=d[r+52>>2],x=d[r+56>>2],b=d[r+60>>2],f[n+44>>2]=0,d[n+40>>2]=v-b,d[n+36>>2]=l-x,d[n+32>>2]=a-A,a=d[i+36>>2],l=d[i+40>>2],v=d[i+44>>2],A=d[c+52>>2],x=d[c+56>>2],b=d[c+60>>2],f[n+28>>2]=0,d[n+24>>2]=v-b,d[n+20>>2]=l-x,d[n+16>>2]=a-A,r&&(qi(r,n+48|0,n+32|0),u=d[n+56>>2],_=d[n+52>>2],t=d[n+48>>2]),f[n+12>>2]=0,d[n+8>>2]=-u,d[n+4>>2]=-_,d[n>>2]=-t,qi(c,n,n+16|0))),(0|(p=p+1|0))<f[s+844>>2];);i=f[e+324>>2]}if(!((0|(m=m+1|0))<(0|i)))break}o[f[4967]]()}o[f[4967]](),R=n+80|0},o[40]=function(e){e|=0;var t,n=0,i=0,a=0,r=0,s=0,c=0,l=0,_=0;if(R=t=R-16|0,o[f[4966]](2613),n=f[e+220>>2],o[f[f[n>>2]+8>>2]](n,e,f[e+24>>2]),(0|(l=f[e+324>>2]))>=1)for(_=f[e+332>>2];;){if(n=f[_+(c<<2)>>2],(i=f[n+836>>2])&&!(!(n=f[n+840>>2])|3&f[i+204>>2]|3&h[n+204|0])){if(n=f[n+208>>2],a=f[f[e+220>>2]+16>>2],r=f[i+208>>2],(0|(i=f[(s=a+(r<<3)|0)>>2]))!=(0|r))for(;i=a+(i<<3)|0,f[s>>2]=f[i>>2],r=f[i>>2],(0|(i=f[(s=a+(r<<3)|0)>>2]))!=(0|r););if((0|(i=f[(s=a+(n<<3)|0)>>2]))!=(0|n))for(;n=a+(i<<3)|0,f[s>>2]=f[n>>2],(0|(n=f[n>>2]))!=(0|(i=f[(s=a+(n<<3)|0)>>2])););(0|n)!=(0|r)&&(f[(i=a+(r<<3)|0)>>2]=n,f[4+(n=a+(n<<3)|0)>>2]=f[n+4>>2]+f[i+4>>2])}if((0|l)==(0|(c=c+1|0)))break}if((0|(l=f[e+228>>2]))>=1)for(_=f[e+236>>2],s=0;;){if(n=f[_+(s<<2)>>2],h[n+20|0]&&(i=f[n+28>>2],!(3&h[i+204|0]||(n=f[n+32>>2],3&h[n+204|0])))){if(n=f[n+208>>2],a=f[f[e+220>>2]+16>>2],r=f[i+208>>2],(0|(c=f[(i=a+(r<<3)|0)>>2]))!=(0|r))for(;r=i,i=a+(c<<3)|0,f[r>>2]=f[i>>2],r=f[i>>2],(0|(c=f[(i=a+(r<<3)|0)>>2]))!=(0|r););if((0|(c=f[(i=a+(n<<3)|0)>>2]))!=(0|n))for(;n=a+(c<<3)|0,f[i>>2]=f[n>>2],(0|(n=f[n>>2]))!=(0|(c=f[(i=a+(n<<3)|0)>>2])););(0|n)!=(0|r)&&(f[(i=a+(r<<3)|0)>>2]=n,f[4+(n=a+(n<<3)|0)>>2]=f[n+4>>2]+f[i+4>>2])}if((0|l)==(0|(s=s+1|0)))break}n=f[e+220>>2],o[f[f[n>>2]+12>>2]](n,e),o[f[4967]](),R=t+16|0},o[41]=function(e,t){e|=0,t|=0;var n,i,r,s,c,l,_=0,u=0,p=0,m=0,d=0;if(R=i=R-16|0,o[f[4966]](2596),(0|(u=f[e+196>>2]))<(0|(n=f[e+228>>2]))){if(f[e+200>>2]<(0|n)){if(n?(f[6257]=f[6257]+1,m=0|o[f[4968]](n<<2,16),_=f[e+196>>2]):_=u,(0|_)>=1)for(;f[(d=p<<2)+m>>2]=f[f[e+204>>2]+d>>2],(0|_)!=(0|(p=p+1|0)););(_=f[e+204>>2])&&(h[e+208|0]&&_&&(f[6258]=f[6258]+1,o[f[4969]](_)),f[e+204>>2]=0),f[e+204>>2]=m,f[e+200>>2]=n,a[e+208|0]=1}for(;f[f[e+204>>2]+(u<<2)>>2]=0,(0|n)!=(0|(u=u+1|0)););}if(f[e+196>>2]=n,(0|o[f[f[e>>2]+104>>2]](e))>=1)for(u=0;f[(_=u<<2)+f[e+204>>2]>>2]=f[_+f[e+236>>2]>>2],(0|(u=u+1|0))<(0|o[f[f[e>>2]+104>>2]](e)););(0|(_=f[e+196>>2]))>=2&&xn(e+192|0,i,0,_+-1|0),_=0,o[f[f[e>>2]+104>>2]](e)&&(_=f[e+204>>2]),function(e,t,n,i,r){if(f[e+20>>2]=r,f[e+16>>2]=i,f[e+12>>2]=n,f[e+4>>2]=t,(0|(t=f[e+32>>2]))<=-1)for(f[e+36>>2]<=-1&&((n=f[e+40>>2])&&(h[e+44|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+40>>2]=0),f[e+36>>2]=0,f[e+40>>2]=0,a[e+44|0]=1);f[f[e+40>>2]+(t<<2)>>2]=0,i=(n=t+1|0)>>>0>=t>>>0,t=n,i;);if(f[e+32>>2]=0,(0|(t=f[e+52>>2]))<=-1)for(f[e+56>>2]<=-1&&((n=f[e+60>>2])&&(h[e- -64|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+60>>2]=0),f[e+56>>2]=0,f[e+60>>2]=0,a[e- -64|0]=1);f[f[e+60>>2]+(t<<2)>>2]=0,i=(n=t+1|0)>>>0>=t>>>0,t=n,i;);if(f[e+52>>2]=0,(0|(t=f[e+72>>2]))<=-1)for(f[e+76>>2]<=-1&&((n=f[e+80>>2])&&(h[e+84|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+80>>2]=0),f[e+76>>2]=0,f[e+80>>2]=0,a[e+84|0]=1);f[f[e+80>>2]+(t<<2)>>2]=0,i=(n=t+1|0)>>>0>=t>>>0,t=n,i;);f[e+72>>2]=0}(f[e+212>>2],t,_,f[e+196>>2],0|o[f[f[e>>2]+20>>2]](e)),_=f[e+216>>2],u=f[e+24>>2],s=_,c=f[e+8>>2],l=0|o[f[f[u>>2]+36>>2]](u),r=f[f[_>>2]+8>>2],o[r](0|s,0|c,0|l),je(f[e+220>>2],f[e+24>>2],e,f[e+212>>2]),Nt(f[e+212>>2]),_=f[e+216>>2],o[f[f[_>>2]+16>>2]](_,t,f[e+72>>2]),o[f[4967]](),R=i+16|0},o[42]=function(e,t){e|=0,t=y(t);var n,i=0,a=y(0),r=y(0),s=0,c=0,l=0;if(R=n=R-16|0,o[f[4966]](2574),f[e+248>>2]>=1)for(;;){e:if(i=f[f[e+256>>2]+(c<<2)>>2]){t:{if(!((l=(s=f[i+220>>2])+-2|0)-1|0&&l>>>0<=2)){if(a=d[i+372>>2],r=y(a*a),a=d[i+376>>2],r=y(r+y(a*a)),a=d[i+380>>2],r=y(r+y(a*a)),a=d[i+532>>2],r<y(a*a)&&(a=d[i+388>>2],r=y(a*a),a=d[i+392>>2],r=y(r+y(a*a)),a=d[i+396>>2],r=y(r+y(a*a)),a=d[i+536>>2],r<y(a*a))){d[i+224>>2]=d[i+224>>2]+t;break t}f[i+224>>2]=0,4!=(-2&f[i+220>>2])&&(f[i+220>>2]=0),s=f[i+220>>2]}if(4==(0|s))break e}if(h[20820]||(a=d[4961])==y(0)|(d[i+224>>2]>a^1?2!=(-2&s):0))4!=(-2&f[i+220>>2])&&(f[i+220>>2]=1);else{if(3&h[i+204|0]){4!=(-2&f[i+220>>2])&&(f[i+220>>2]=2);break e}if(1==(0|s)&&(4!=(-2&f[i+220>>2])&&(f[i+220>>2]=3),s=f[i+220>>2]),2!=(0|s))break e;f[i+388>>2]=0,f[i+392>>2]=0,f[i+372>>2]=0,f[i+376>>2]=0,f[i+396>>2]=0,f[i+400>>2]=0,f[i+380>>2]=0,f[i+384>>2]=0,f[i+304>>2]=f[i+304>>2]+2}}if(!((0|(c=c+1|0))<f[e+248>>2]))break}o[f[4967]](),R=n+16|0},o[43]=function(e,t){e|=0,t=y(t);var n,i=0,a=0;if(R=n=R-16|0,o[f[4966]](2531),(i=f[e+84>>2])&&o[i](e,t),o[f[f[e>>2]+140>>2]](e,t),i=0,f[e+32>>2]=0,d[e+28>>2]=t,f[e+48>>2]=o[f[f[e>>2]+20>>2]](e),o[f[f[e>>2]+164>>2]](e,t),o[f[f[e>>2]+44>>2]](e),o[f[f[e>>2]+148>>2]](e),d[e+104>>2]=t,o[f[f[e>>2]+152>>2]](e,e+92|0),o[f[f[e>>2]+144>>2]](e,t),o[f[4966]](2560),f[e+296>>2]>=1)for(;a=f[f[e+304>>2]+(i<<2)>>2],o[f[f[a>>2]+8>>2]](a,e,t),(0|(i=i+1|0))<f[e+296>>2];);o[f[4967]](),o[f[f[e>>2]+156>>2]](e,t),(i=f[e+80>>2])&&o[i](e,t),o[f[4967]](),R=n+16|0},o[44]=function(e,t){e|=0,t=y(t);var n,i=0,r=0,s=0,c=0,l=0;if(R=n=R-768|0,f[n+764>>2]=e,d[n+760>>2]=t,e=f[n+764>>2],o[f[4966]](1220),f[12+(i=R-16|0)>>2]=e,i=f[i+12>>2]+348|0,f[n+748>>2]=0,function(e,t){var n;if(R=n=R-32|0,f[n+28>>2]=e,f[n+24>>2]=0,f[n+20>>2]=t,t=R-16|0,e=f[n+28>>2],f[t+12>>2]=e,f[n+16>>2]=f[f[t+12>>2]+4>>2],f[n+24>>2]<f[n+16>>2])for(f[n+12>>2]=f[n+24>>2];f[n+12>>2]<f[n+16>>2];)f[n+12>>2]=f[n+12>>2]+1;else for(f[n+24>>2]>f[n+16>>2]&&Di(e,f[n+24>>2]),f[n+8>>2]=f[n+16>>2];f[n+8>>2]<f[n+24>>2];)f[f[e+12>>2]+(f[n+8>>2]<<2)>>2]=f[f[n+20>>2]>>2],f[n+8>>2]=f[n+8>>2]+1;f[e+4>>2]=f[n+24>>2],R=n+32|0}(i,n+748|0),function(e){var t,n=0,i=0,r=0;if(R=t=R-16|0,o[f[4966]](2667),n=f[e+332>>2],f[e+324>>2]>=1)for(;r=f[e+24>>2],o[f[f[r>>2]+16>>2]](r,f[(i<<2)+n>>2]),n=f[e+332>>2],(0|(i=i+1|0))<f[e+324>>2];);n&&(h[e+336|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+332>>2]=0),f[e+332>>2]=0,f[e+324>>2]=0,f[e+328>>2]=0,a[e+336|0]=1,o[f[4967]](),R=t+16|0}(e),f[12+(i=R-16|0)>>2]=e+244,f[n+744>>2]=f[f[i+12>>2]+4>>2],f[n+744>>2]>0)for(Yr(n+680|0),f[n+676>>2]=0;f[n+676>>2]<f[n+744>>2];)r=f[n+676>>2],f[12+(i=R-16|0)>>2]=e+244,f[i+8>>2]=r,f[n+672>>2]=f[f[f[i+12>>2]+12>>2]+(f[i+8>>2]<<2)>>2],f[12+(i=R-16|0)>>2]=f[n+672>>2],d[i+8>>2]=1,d[f[i+12>>2]+268>>2]=d[i+8>>2],1&xo(f[n+672>>2])&&(f[12+(i=R-16|0)>>2]=f[n+672>>2],3&f[f[i+12>>2]+204>>2]||(i=n+680|0,zs(f[n+672>>2],d[n+760>>2],i),f[12+(r=R-16|0)>>2]=f[n+672>>2],f[n+668>>2]=f[r+12>>2]+4,f[12+(r=R-16|0)>>2]=i,i=f[r+12>>2]+48|0,f[12+(r=R-16|0)>>2]=f[n+668>>2],Qi(s=n+648|0,i,f[r+12>>2]+48|0),d[n+664>>2]=$r(s),f[12+(i=R-16|0)>>2]=e,1&a[16+(f[i+12>>2]+28|0)|0]&&(f[12+(i=R-16|0)>>2]=f[n+672>>2],i=f[i+12>>2],y(d[i+276>>2]*d[i+276>>2])!=y(0)&&(f[12+(i=R-16|0)>>2]=f[n+672>>2],i=f[i+12>>2],y(d[i+276>>2]*d[i+276>>2])<d[n+664>>2]&&(o[f[4966]](1245),f[12+(i=R-16|0)>>2]=f[n+672>>2],1&Aa(f[f[i+12>>2]+192>>2])&&(r=f[n+672>>2],f[12+(i=R-16|0)>>2]=f[n+668>>2],s=f[i+12>>2]+48|0,l=n+680|0,f[12+(c=R-16|0)>>2]=l,Zi(i=n+536|0,r,e,s,f[c+12>>2]+48|0),f[12+(r=R-16|0)>>2]=f[n+672>>2],zi(s=n+480|0,d[f[r+12>>2]+272>>2]),f[12+(r=R-16|0)>>2]=f[n+672>>2],f[n+544>>2]=f[f[f[r+12>>2]+188>>2]+4>>2],f[12+(r=R-16|0)>>2]=f[n+672>>2],f[n+548>>2]=f[f[f[r+12>>2]+188>>2]+8>>2],_o(r=n+416|0,l),f[12+(c=R-16|0)>>2]=f[n+668>>2],Jr(r,f[c+12>>2]),le(e,s,f[n+668>>2],r,i),f[12+(r=R-16|0)>>2]=i,d[f[r+12>>2]+4>>2]<y(1)&&(f[12+(i=R-16|0)>>2]=n+680,i=f[i+12>>2]+48|0,f[12+(r=R-16|0)>>2]=f[n+668>>2],Qi(s=n+384|0,i,f[r+12>>2]+48|0),Ji(r=n+400|0,i=s,4+(s=n+536|0)|0),ca(i=n+360|0,s+48|0),d[n+380>>2]=Ho(r,i),i=f[e+24>>2],f[n+356>>2]=o[f[f[i>>2]+12>>2]](i,f[n+672>>2],f[n+616>>2]),f[12+(R-16|0)>>2]=e+340,hi(e+320|0,n+356|0),f[12+(R-16|0)>>2]=e+340,f[12+(c=R-16|0)>>2]=f[n+668>>2],Xi(i=n+336|0,f[c+12>>2]+48|0,r),f[12+(r=R-16|0)>>2]=f[n+616>>2],pa(c=n+256|0,f[r+12>>2]+4|0),qr(r=n+320|0,c,i),d[n+28>>2]=0,d[n+24>>2]=0,d[n+20>>2]=0,Lo(c=n+32|0,n+28|0,n+24|0,n+20|0),rn(l=n+48|0,c,r,s+48|0,d[n+380>>2]),f[n+16>>2]=Wi(f[n+356>>2],l),s=f[n+16>>2],f[12+(r=R-16|0)>>2]=f[n+356>>2],f[r+8>>2]=s,f[n+12>>2]=(f[r+12>>2]+4|0)+g(f[r+8>>2],208),d[f[n+12>>2]+96>>2]=0,d[f[n+12>>2]+84>>2]=x(y(b(y(d[f[n+672>>2]+228>>2]*d[f[n+616>>2]+228>>2]),y(-10))),y(10)),f[12+(s=R-16|0)>>2]=f[n+668>>2],s=f[s+12>>2]+48|0,c=f[s+4>>2],r=f[n+12>>2],f[r+48>>2]=f[s>>2],f[r+52>>2]=c,c=f[s+12>>2],f[r+56>>2]=f[s+8>>2],f[r+60>>2]=c,s=f[i+4>>2],r=f[n+12>>2],f[r+32>>2]=f[i>>2],f[r+36>>2]=s,s=f[i+12>>2],f[r+40>>2]=f[i+8>>2],f[r+44>>2]=s),Wr(n+480|0),as(n+536|0)),o[f[4967]]()))))),f[n+676>>2]=f[n+676>>2]+1;o[f[4967]](),R=n+768|0},o[45]=function(e,t){e|=0,t=y(t);var n=0,i=0,o=0;if((0|(i=f[e+8>>2]))>=1)for(;!(n=f[f[e+16>>2]+(o<<2)>>2])|!(2&f[n+252>>2])|!(2&h[n+204|0])|2==f[n+220>>2]||(Ft(n,t),i=f[e+8>>2]),(0|(o=o+1|0))<(0|i););},o[46]=function(e,t){e|=0,t|=0;var n,i=0,a=0,r=0,s=0,c=y(0),l=y(0),_=y(0),u=0,p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=0,k=0,j=y(0),G=y(0),V=y(0);R=n=R-176|0,i=0|o[f[f[e>>2]+20>>2]](e),u=0|o[f[f[i>>2]+56>>2]](i),i=0|o[f[f[e>>2]+20>>2]](e),s=0|o[f[f[i>>2]+56>>2]](i);e:if(!((U=d[t+40>>2])<=y(0)||(i=f[t+4>>2]+-3|0)>>>0>9)){switch(r=2048&u,k=4096&s,i-1|0){default:if(f[n+124>>2]=0,f[n+128>>2]=0,f[n+136>>2]=0,f[n+140>>2]=0,f[n+132>>2]=1065353216,f[n+156>>2]=0,f[n+160>>2]=0,f[n+152>>2]=1065353216,f[n+164>>2]=0,f[n+168>>2]=0,f[n+172>>2]=0,f[n+116>>2]=0,f[n+120>>2]=0,f[n+112>>2]=1065353216,f[n+144>>2]=0,f[n+148>>2]=0,i=f[t+28>>2],z=d[i+52>>2],A=d[i+8>>2],P=d[i+12>>2],I=d[i+56>>2],D=d[i+28>>2],m=d[i+20>>2],v=d[i+24>>2],g=d[i+60>>2],N=d[t+308>>2],p=d[i+44>>2],M=d[t+300>>2],_=d[i+36>>2],O=d[t+304>>2],c=d[i+40>>2],l=d[i+4>>2],f[n+172>>2]=0,d[n+168>>2]=g+y(y(y(M*_)+y(O*c))+y(N*p)),d[n+164>>2]=I+y(y(y(M*m)+y(O*v))+y(N*D)),d[n+160>>2]=z+y(y(y(M*l)+y(O*A))+y(N*P)),i=0|o[f[f[e>>2]+20>>2]](e),o[f[f[i>>2]+64>>2]](i,n+112|0,U),i=f[t+32>>2],z=d[i+52>>2],A=d[i+8>>2],P=d[i+12>>2],I=d[i+56>>2],D=d[i+28>>2],m=d[i+20>>2],v=d[i+24>>2],g=d[i+60>>2],N=d[t+324>>2],p=d[i+44>>2],M=d[t+316>>2],_=d[i+36>>2],O=d[t+320>>2],c=d[i+40>>2],l=d[i+4>>2],f[n+172>>2]=0,d[n+168>>2]=g+y(y(y(M*_)+y(O*c))+y(N*p)),d[n+164>>2]=I+y(y(y(M*m)+y(O*v))+y(N*D)),d[n+160>>2]=z+y(y(y(M*l)+y(O*A))+y(N*P)),!r)break e;e=0|o[f[f[e>>2]+20>>2]](e),o[f[f[e>>2]+64>>2]](e,n+112|0,U);break e;case 0:if(i=f[t+28>>2],_=d[i+52>>2],b=d[i+8>>2],C=d[i+12>>2],N=d[t+584>>2],M=d[t+552>>2],O=d[t+568>>2],c=d[i+56>>2],l=d[i+60>>2],z=d[t+608>>2],A=d[t+600>>2],P=d[t+604>>2],x=d[i+28>>2],S=d[i+20>>2],E=d[i+24>>2],I=d[t+588>>2],D=d[t+556>>2],m=d[t+572>>2],v=d[t+592>>2],w=d[i+44>>2],g=d[t+560>>2],T=d[i+36>>2],p=d[t+576>>2],L=d[i+40>>2],F=d[i+4>>2],f[n+172>>2]=0,f[n+156>>2]=0,f[n+140>>2]=0,d[n+152>>2]=y(y(g*T)+y(p*L))+y(v*w),d[n+148>>2]=y(y(D*T)+y(m*L))+y(I*w),d[n+136>>2]=y(y(g*S)+y(p*E))+y(v*x),d[n+132>>2]=y(y(D*S)+y(m*E))+y(I*x),d[n+168>>2]=l+y(y(y(T*A)+y(L*P))+y(w*z)),d[n+164>>2]=c+y(y(y(S*A)+y(E*P))+y(x*z)),f[n+124>>2]=0,d[n+144>>2]=y(y(M*T)+y(O*L))+y(N*w),d[n+128>>2]=y(y(M*S)+y(O*E))+y(N*x),d[n+120>>2]=y(y(F*g)+y(b*p))+y(C*v),d[n+116>>2]=y(y(F*D)+y(b*m))+y(C*I),d[n+112>>2]=y(y(M*F)+y(O*b))+y(N*C),d[n+160>>2]=_+y(y(y(F*A)+y(b*P))+y(C*z)),r?(i=0|o[f[f[e>>2]+20>>2]](e),o[f[f[i>>2]+64>>2]](i,n+112|0,U),i=f[t+32>>2],_=d[i+52>>2],c=d[i+56>>2],l=d[i+60>>2],N=d[t+672>>2],M=d[t+664>>2],O=d[t+668>>2],b=d[i+8>>2],C=d[i+12>>2],x=d[i+28>>2],S=d[i+20>>2],E=d[i+24>>2],z=d[t+648>>2],A=d[t+616>>2],P=d[t+632>>2],I=d[t+652>>2],D=d[t+620>>2],m=d[t+636>>2],v=d[t+656>>2],w=d[i+44>>2],g=d[t+624>>2],T=d[i+36>>2],p=d[t+640>>2],L=d[i+40>>2],F=d[i+4>>2],f[n+172>>2]=0,f[n+156>>2]=0,f[n+140>>2]=0,f[n+124>>2]=0,d[n+152>>2]=y(y(g*T)+y(p*L))+y(v*w),d[n+148>>2]=y(y(D*T)+y(m*L))+y(I*w),d[n+144>>2]=y(y(A*T)+y(P*L))+y(z*w),d[n+136>>2]=y(y(g*S)+y(p*E))+y(v*x),d[n+132>>2]=y(y(D*S)+y(m*E))+y(I*x),d[n+128>>2]=y(y(A*S)+y(P*E))+y(z*x),d[n+120>>2]=y(y(F*g)+y(b*p))+y(C*v),d[n+116>>2]=y(y(F*D)+y(b*m))+y(C*I),d[n+112>>2]=y(y(A*F)+y(P*b))+y(z*C),d[n+168>>2]=l+y(y(y(T*M)+y(L*O))+y(w*N)),d[n+164>>2]=c+y(y(y(S*M)+y(E*O))+y(x*N)),d[n+160>>2]=_+y(y(y(F*M)+y(b*O))+y(C*N)),i=0|o[f[f[e>>2]+20>>2]](e),o[f[f[i>>2]+64>>2]](i,n+112|0,U)):(i=f[t+32>>2],_=d[i+52>>2],c=d[i+56>>2],l=d[i+60>>2],N=d[t+672>>2],M=d[t+664>>2],O=d[t+668>>2],b=d[i+8>>2],C=d[i+12>>2],x=d[i+28>>2],S=d[i+20>>2],E=d[i+24>>2],z=d[t+648>>2],A=d[t+616>>2],P=d[t+632>>2],I=d[t+652>>2],D=d[t+620>>2],m=d[t+636>>2],v=d[t+656>>2],w=d[i+44>>2],g=d[t+624>>2],T=d[i+36>>2],p=d[t+640>>2],L=d[i+40>>2],F=d[i+4>>2],f[n+172>>2]=0,f[n+156>>2]=0,f[n+140>>2]=0,f[n+124>>2]=0,d[n+152>>2]=y(y(g*T)+y(p*L))+y(v*w),d[n+148>>2]=y(y(D*T)+y(m*L))+y(I*w),d[n+144>>2]=y(y(A*T)+y(P*L))+y(z*w),d[n+136>>2]=y(y(g*S)+y(p*E))+y(v*x),d[n+132>>2]=y(y(D*S)+y(m*E))+y(I*x),d[n+128>>2]=y(y(A*S)+y(P*E))+y(z*x),d[n+120>>2]=y(y(F*g)+y(b*p))+y(C*v),d[n+116>>2]=y(y(F*D)+y(b*m))+y(C*I),d[n+112>>2]=y(y(A*F)+y(P*b))+y(z*C),d[n+168>>2]=l+y(y(y(T*M)+y(L*O))+y(w*N)),d[n+164>>2]=c+y(y(y(S*M)+y(E*O))+y(x*N)),d[n+160>>2]=_+y(y(y(F*M)+y(b*O))+y(C*N))),!k|(_=Bo(i=t+688|0))==(c=Uo(i)))break e;l=d[t+692>>2],f[n+96>>2]=f[n+120>>2],f[n+100>>2]=f[n+136>>2],f[n+108>>2]=0,f[n+104>>2]=f[n+152>>2],f[n+80>>2]=f[n+112>>2],f[n+84>>2]=f[n+128>>2],f[n+92>>2]=0,f[n+88>>2]=f[n+144>>2],t=0|o[f[f[e>>2]+20>>2]](e),f[n+72>>2]=0,f[n+76>>2]=0,f[n+64>>2]=0,f[n+68>>2]=0,e=l>y(0),o[f[f[t>>2]+68>>2]](t,n+160|0,n+96|0,n+80|0,U,U,e?_:y(0),e?c:y(6.2831854820251465),n- -64|0,e,y(10));break e;case 1:if(i=f[t+28>>2],_=d[i+52>>2],b=d[i+8>>2],C=d[i+12>>2],N=d[t+332>>2],M=d[t+300>>2],O=d[t+316>>2],c=d[i+56>>2],l=d[i+60>>2],z=d[t+356>>2],A=d[t+348>>2],P=d[t+352>>2],x=d[i+28>>2],S=d[i+20>>2],E=d[i+24>>2],I=d[t+336>>2],D=d[t+304>>2],m=d[t+320>>2],v=d[t+340>>2],w=d[i+44>>2],g=d[t+308>>2],T=d[i+36>>2],p=d[t+324>>2],L=d[i+40>>2],F=d[i+4>>2],f[n+172>>2]=0,f[n+156>>2]=0,f[n+140>>2]=0,d[n+152>>2]=y(y(g*T)+y(p*L))+y(v*w),d[n+148>>2]=y(y(D*T)+y(m*L))+y(I*w),d[n+136>>2]=y(y(g*S)+y(p*E))+y(v*x),d[n+132>>2]=y(y(D*S)+y(m*E))+y(I*x),d[n+168>>2]=l+y(y(y(T*A)+y(L*P))+y(w*z)),d[n+164>>2]=c+y(y(y(S*A)+y(E*P))+y(x*z)),f[n+124>>2]=0,d[n+144>>2]=y(y(M*T)+y(O*L))+y(N*w),d[n+128>>2]=y(y(M*S)+y(O*E))+y(N*x),d[n+120>>2]=y(y(F*g)+y(b*p))+y(C*v),d[n+116>>2]=y(y(F*D)+y(b*m))+y(C*I),d[n+112>>2]=y(y(M*F)+y(O*b))+y(N*C),d[n+160>>2]=_+y(y(y(F*A)+y(b*P))+y(C*z)),r?(i=0|o[f[f[e>>2]+20>>2]](e),o[f[f[i>>2]+64>>2]](i,n+112|0,U),i=f[t+32>>2],_=d[i+52>>2],c=d[i+56>>2],l=d[i+60>>2],N=d[t+420>>2],M=d[t+412>>2],O=d[t+416>>2],b=d[i+8>>2],C=d[i+12>>2],x=d[i+28>>2],S=d[i+20>>2],E=d[i+24>>2],z=d[t+396>>2],A=d[t+364>>2],P=d[t+380>>2],I=d[t+400>>2],D=d[t+368>>2],m=d[t+384>>2],v=d[t+404>>2],w=d[i+44>>2],g=d[t+372>>2],T=d[i+36>>2],p=d[t+388>>2],L=d[i+40>>2],F=d[i+4>>2],f[n+172>>2]=0,f[n+156>>2]=0,f[n+140>>2]=0,f[n+124>>2]=0,d[n+152>>2]=y(y(g*T)+y(p*L))+y(v*w),d[n+148>>2]=y(y(D*T)+y(m*L))+y(I*w),d[n+144>>2]=y(y(A*T)+y(P*L))+y(z*w),d[n+136>>2]=y(y(g*S)+y(p*E))+y(v*x),d[n+132>>2]=y(y(D*S)+y(m*E))+y(I*x),d[n+128>>2]=y(y(A*S)+y(P*E))+y(z*x),d[n+120>>2]=y(y(F*g)+y(b*p))+y(C*v),d[n+116>>2]=y(y(F*D)+y(b*m))+y(C*I),d[n+112>>2]=y(y(A*F)+y(P*b))+y(z*C),d[n+168>>2]=l+y(y(y(T*M)+y(L*O))+y(w*N)),d[n+164>>2]=c+y(y(y(S*M)+y(E*O))+y(x*N)),d[n+160>>2]=_+y(y(y(F*M)+y(b*O))+y(C*N)),i=0|o[f[f[e>>2]+20>>2]](e),o[f[f[i>>2]+64>>2]](i,n+112|0,U)):(i=f[t+32>>2],_=d[i+52>>2],c=d[i+56>>2],l=d[i+60>>2],N=d[t+420>>2],M=d[t+412>>2],O=d[t+416>>2],b=d[i+8>>2],C=d[i+12>>2],x=d[i+28>>2],S=d[i+20>>2],E=d[i+24>>2],z=d[t+396>>2],A=d[t+364>>2],P=d[t+380>>2],I=d[t+400>>2],D=d[t+368>>2],m=d[t+384>>2],v=d[t+404>>2],w=d[i+44>>2],g=d[t+372>>2],T=d[i+36>>2],p=d[t+388>>2],L=d[i+40>>2],F=d[i+4>>2],f[n+172>>2]=0,f[n+156>>2]=0,f[n+140>>2]=0,f[n+124>>2]=0,d[n+152>>2]=y(y(g*T)+y(p*L))+y(v*w),d[n+148>>2]=y(y(D*T)+y(m*L))+y(I*w),d[n+144>>2]=y(y(A*T)+y(P*L))+y(z*w),d[n+136>>2]=y(y(g*S)+y(p*E))+y(v*x),d[n+132>>2]=y(y(D*S)+y(m*E))+y(I*x),d[n+128>>2]=y(y(A*S)+y(P*E))+y(z*x),d[n+120>>2]=y(y(F*g)+y(b*p))+y(C*v),d[n+116>>2]=y(y(F*D)+y(b*m))+y(C*I),d[n+112>>2]=y(y(A*F)+y(P*b))+y(z*C),d[n+168>>2]=l+y(y(y(T*M)+y(L*O))+y(w*N)),d[n+164>>2]=c+y(y(y(S*M)+y(E*O))+y(x*N)),d[n+160>>2]=_+y(y(y(F*M)+y(b*O))+y(C*N))),!k)break e;for(Rn(n+96|0,t,y(6.0868353843688965),U),f[n+108>>2]=0,_=d[n+96>>2],c=d[n+100>>2],l=d[n+104>>2],d[n+104>>2]=y(y(y(_*d[n+144>>2])+y(c*d[n+148>>2]))+y(l*d[n+152>>2]))+d[n+168>>2],d[n+100>>2]=y(y(y(_*d[n+128>>2])+y(c*d[n+132>>2]))+y(l*d[n+136>>2]))+d[n+164>>2],d[n+96>>2]=y(y(y(_*d[n+112>>2])+y(c*d[n+116>>2]))+y(l*d[n+120>>2]))+d[n+160>>2],i=n+160|0,u=0;Rn(n+80|0,t,y(y(y(0|u)*y(6.283185005187988))*y(.03125)),U),f[n+92>>2]=0,_=d[n+80>>2],c=d[n+84>>2],l=d[n+88>>2],d[n+88>>2]=y(y(y(_*d[n+144>>2])+y(c*d[n+148>>2]))+y(l*d[n+152>>2]))+d[n+168>>2],d[n+84>>2]=y(y(y(_*d[n+128>>2])+y(c*d[n+132>>2]))+y(l*d[n+136>>2]))+d[n+164>>2],d[n+80>>2]=y(y(y(_*d[n+112>>2])+y(c*d[n+116>>2]))+y(l*d[n+120>>2]))+d[n+160>>2],s=0|o[f[f[e>>2]+20>>2]](e),f[n+72>>2]=0,f[n+76>>2]=0,f[n+64>>2]=0,f[n+68>>2]=0,o[f[f[s>>2]+16>>2]](s,n+96|0,n+80|0,n- -64|0),3&u||(s=0|o[f[f[e>>2]+20>>2]](e),f[n+72>>2]=0,f[n+76>>2]=0,f[n+64>>2]=0,f[n+68>>2]=0,o[f[f[s>>2]+16>>2]](s,i,n+80|0,n- -64|0)),s=f[n+92>>2],f[n+104>>2]=f[n+88>>2],f[n+108>>2]=s,s=f[n+84>>2],f[n+96>>2]=f[n+80>>2],f[n+100>>2]=s,32!=(0|(u=u+1|0)););L=d[t+512>>2],F=d[t+452>>2],u=f[t+32>>2],d[u+404>>2]>y(0)?(j=d[u+36>>2],c=d[t+412>>2],A=d[u+40>>2],l=d[t+416>>2],N=y(y(j*c)+y(A*l)),b=d[u+20>>2],C=d[u+24>>2],x=d[u+28>>2],P=d[t+420>>2],M=y(y(y(b*c)+y(C*l))+y(x*P)),S=d[u+4>>2],E=d[u+8>>2],w=d[u+12>>2],O=y(y(y(S*c)+y(E*l))+y(w*P)),I=d[t+372>>2],D=d[t+388>>2],m=d[t+404>>2],T=d[u+44>>2],z=y(y(y(I*j)+y(D*A))+y(m*T)),v=d[t+368>>2],g=d[t+384>>2],p=d[t+400>>2],G=y(y(y(v*j)+y(g*A))+y(p*T)),_=d[t+364>>2],c=d[t+380>>2],l=d[t+396>>2],V=y(y(y(_*j)+y(c*A))+y(l*T)),A=y(y(y(I*b)+y(D*C))+y(m*x)),j=y(y(y(v*b)+y(g*C))+y(p*x)),x=y(y(y(_*b)+y(c*C))+y(l*x)),m=y(y(y(S*I)+y(E*D))+y(w*m)),v=y(y(y(S*v)+y(E*g))+y(w*p)),g=y(y(y(_*S)+y(c*E))+y(l*w)),p=y(T*P)):(u=f[t+28>>2],j=d[u+36>>2],c=d[t+348>>2],A=d[u+40>>2],l=d[t+352>>2],N=y(y(j*c)+y(A*l)),b=d[u+20>>2],C=d[u+24>>2],x=d[u+28>>2],P=d[t+356>>2],M=y(y(y(b*c)+y(C*l))+y(x*P)),S=d[u+4>>2],E=d[u+8>>2],w=d[u+12>>2],O=y(y(y(S*c)+y(E*l))+y(w*P)),I=d[t+308>>2],D=d[t+324>>2],m=d[t+340>>2],T=d[u+44>>2],z=y(y(y(I*j)+y(D*A))+y(m*T)),v=d[t+304>>2],g=d[t+320>>2],p=d[t+336>>2],G=y(y(y(v*j)+y(g*A))+y(p*T)),_=d[t+300>>2],c=d[t+316>>2],l=d[t+332>>2],V=y(y(y(_*j)+y(c*A))+y(l*T)),A=y(y(y(I*b)+y(D*C))+y(m*x)),j=y(y(y(v*b)+y(g*C))+y(p*x)),x=y(y(y(_*b)+y(c*C))+y(l*x)),m=y(y(y(S*I)+y(E*D))+y(w*m)),v=y(y(y(S*v)+y(E*g))+y(w*p)),g=y(y(y(_*S)+y(c*E))+y(l*w)),p=y(T*P)),_=d[u+52>>2],c=d[u+56>>2],l=d[u+60>>2],f[n+172>>2]=0,f[n+156>>2]=0,d[n+152>>2]=z,d[n+148>>2]=G,d[n+144>>2]=V,f[n+140>>2]=0,d[n+136>>2]=A,d[n+132>>2]=j,d[n+128>>2]=x,f[n+124>>2]=0,d[n+120>>2]=m,d[n+116>>2]=v,d[n+112>>2]=g,d[n+168>>2]=l+y(N+p),d[n+164>>2]=M+c,d[n+160>>2]=_+O,t=f[i+12>>2],f[n+88>>2]=f[i+8>>2],f[n+92>>2]=t,t=f[i+4>>2],f[n+80>>2]=f[i>>2],f[n+84>>2]=t,f[n+76>>2]=0,d[n+72>>2]=V,d[n+68>>2]=x,d[n+64>>2]=g,f[n+60>>2]=0,d[n+56>>2]=G,d[n+52>>2]=j,d[n+48>>2]=v,e=0|o[f[f[e>>2]+20>>2]](e),f[n+40>>2]=0,f[n+44>>2]=0,f[n+32>>2]=0,f[n+36>>2]=0,o[f[f[e>>2]+68>>2]](e,n+80|0,n- -64|0,n+48|0,U,U,y(y(-L)-F),y(F-L),n+32|0,1,y(10));break e;case 2:case 5:if(i=f[4+(s=t+1072|0)>>2],f[n+120>>2]=f[s>>2],f[n+124>>2]=i,i=f[4+(s=B=t+1064|0)>>2],f[n+112>>2]=f[s>>2],f[n+116>>2]=i,i=f[4+(s=t+1088|0)>>2],f[n+136>>2]=f[s>>2],f[n+140>>2]=i,i=f[4+(s=u=t+1080|0)>>2],f[n+128>>2]=f[s>>2],f[n+132>>2]=i,i=f[4+(s=t+1104|0)>>2],f[n+152>>2]=f[s>>2],f[n+156>>2]=i,i=f[4+(a=s=t+1096|0)>>2],f[n+144>>2]=f[a>>2],f[n+148>>2]=i,i=f[4+(a=t+1120|0)>>2],f[n+168>>2]=f[a>>2],f[n+172>>2]=i,a=f[4+(i=t+1112|0)>>2],f[n+160>>2]=f[i>>2],f[n+164>>2]=a,r?(a=0|o[f[f[e>>2]+20>>2]](e),o[f[f[a>>2]+64>>2]](a,n+112|0,U),a=f[4+(r=t+1136|0)>>2],f[n+120>>2]=f[r>>2],f[n+124>>2]=a,a=f[4+(r=t+1128|0)>>2],f[n+112>>2]=f[r>>2],f[n+116>>2]=a,a=f[4+(r=t+1152|0)>>2],f[n+136>>2]=f[r>>2],f[n+140>>2]=a,a=f[4+(r=t+1144|0)>>2],f[n+128>>2]=f[r>>2],f[n+132>>2]=a,a=f[4+(r=t+1168|0)>>2],f[n+152>>2]=f[r>>2],f[n+156>>2]=a,a=f[4+(r=t+1160|0)>>2],f[n+144>>2]=f[r>>2],f[n+148>>2]=a,a=f[4+(r=t+1184|0)>>2],f[n+168>>2]=f[r>>2],f[n+172>>2]=a,a=f[4+(r=t+1176|0)>>2],f[n+160>>2]=f[r>>2],f[n+164>>2]=a,a=0|o[f[f[e>>2]+20>>2]](e),o[f[f[a>>2]+64>>2]](a,n+112|0,U)):(a=f[4+(r=t+1136|0)>>2],f[n+120>>2]=f[r>>2],f[n+124>>2]=a,a=f[4+(r=t+1128|0)>>2],f[n+112>>2]=f[r>>2],f[n+116>>2]=a,a=f[4+(r=t+1152|0)>>2],f[n+136>>2]=f[r>>2],f[n+140>>2]=a,a=f[4+(r=t+1144|0)>>2],f[n+128>>2]=f[r>>2],f[n+132>>2]=a,a=f[4+(r=t+1168|0)>>2],f[n+152>>2]=f[r>>2],f[n+156>>2]=a,a=f[4+(r=t+1160|0)>>2],f[n+144>>2]=f[r>>2],f[n+148>>2]=a,a=f[4+(r=t+1184|0)>>2],f[n+168>>2]=f[r>>2],f[n+172>>2]=a,a=f[4+(r=t+1176|0)>>2],f[n+160>>2]=f[r>>2],f[n+164>>2]=a),!k)break e;r=f[(a=B)+12>>2],f[n+120>>2]=f[a+8>>2],f[n+124>>2]=r,r=f[a+4>>2],f[n+112>>2]=f[a>>2],f[n+116>>2]=r,r=f[(a=u)+12>>2],f[n+136>>2]=f[a+8>>2],f[n+140>>2]=r,r=f[a+4>>2],f[n+128>>2]=f[a>>2],f[n+132>>2]=r,r=f[(a=s)+12>>2],f[n+152>>2]=f[a+8>>2],f[n+156>>2]=r,r=f[a+4>>2],f[n+144>>2]=f[a>>2],f[n+148>>2]=r,r=f[i+12>>2],f[n+168>>2]=f[i+8>>2],f[n+172>>2]=r,r=f[i+4>>2],f[n+160>>2]=f[i>>2],f[n+164>>2]=r,f[n+96>>2]=f[n+120>>2],f[n+100>>2]=f[n+136>>2],f[n+108>>2]=0,f[n+104>>2]=f[n+152>>2],f[n+80>>2]=f[n+112>>2],f[n+84>>2]=f[n+128>>2],f[n+92>>2]=0,f[n+88>>2]=f[n+144>>2],p=d[t+1e3>>2],_=d[t+996>>2],c=d[t+936>>2],l=d[t+932>>2],a=0|o[f[f[e>>2]+20>>2]](e),f[n+72>>2]=0,f[n+76>>2]=0,f[n+64>>2]=0,f[n+68>>2]=0,k=t+1176|0,o[f[f[a>>2]+72>>2]](a,k,n+96|0,n+80|0,y(U*y(.8999999761581421)),l,c,_,p,n- -64|0,y(10),1),f[n+92>>2]=0,f[n+88>>2]=f[n+148>>2],f[n+84>>2]=f[n+132>>2],f[n+80>>2]=f[n+116>>2],c=d[t+1196>>2],m=d[n+80>>2],v=cn(l=d[t+1200>>2]),g=d[n+84>>2],p=sn(l),d[n+68>>2]=y(g*p)-y(v*m),_=cn(c),l=d[n+88>>2],c=sn(c),d[n+72>>2]=y(y(m*y(p*_))+y(g*y(_*v)))+y(l*c),d[n+64>>2]=y(y(m*y(c*p))+y(g*y(c*v)))-y(_*l),a=f[4+(r=t+1136|0)>>2],f[n+120>>2]=f[r>>2],f[n+124>>2]=a,a=f[4+(r=t+1128|0)>>2],f[n+112>>2]=f[r>>2],f[n+116>>2]=a,a=f[4+(r=t+1152|0)>>2],f[n+136>>2]=f[r>>2],f[n+140>>2]=a,a=f[4+(r=t+1144|0)>>2],f[n+128>>2]=f[r>>2],f[n+132>>2]=a,a=f[4+(r=t+1168|0)>>2],f[n+152>>2]=f[r>>2],f[n+156>>2]=a,a=f[4+(r=t+1160|0)>>2],f[n+144>>2]=f[r>>2],f[n+148>>2]=a,a=f[k+4>>2],f[n+160>>2]=f[k>>2],f[n+164>>2]=a,a=f[4+(r=t+1184|0)>>2],f[n+168>>2]=f[r>>2],f[n+172>>2]=a,f[n+60>>2]=0,d[n+56>>2]=-d[n+144>>2],d[n+52>>2]=-d[n+128>>2],d[n+48>>2]=-d[n+112>>2],(c=d[t+868>>2])>(l=d[t+872>>2])?(a=0|o[f[f[e>>2]+20>>2]](e),f[n+40>>2]=0,f[n+44>>2]=0,f[n+32>>2]=0,f[n+36>>2]=0,o[f[f[a>>2]+68>>2]](a,k,n+48|0,n- -64|0,U,U,y(-3.1415927410125732),y(3.1415927410125732),n+32|0,0,y(10))):c<l&&(a=0|o[f[f[e>>2]+20>>2]](e),f[n+40>>2]=0,f[n+44>>2]=0,f[n+32>>2]=0,f[n+36>>2]=0,o[f[f[a>>2]+68>>2]](a,k,n+48|0,n- -64|0,U,U,c,l,n+32|0,1,y(10))),a=f[B+12>>2],f[n+120>>2]=f[B+8>>2],f[n+124>>2]=a,a=f[B+4>>2],f[n+112>>2]=f[B>>2],f[n+116>>2]=a,B=f[u+12>>2],f[n+136>>2]=f[u+8>>2],f[n+140>>2]=B,B=f[u+4>>2],f[n+128>>2]=f[u>>2],f[n+132>>2]=B,u=f[s+12>>2],f[n+152>>2]=f[s+8>>2],f[n+156>>2]=u,u=f[s+4>>2],f[n+144>>2]=f[s>>2],f[n+148>>2]=u,s=f[i+12>>2],f[n+168>>2]=f[i+8>>2],f[n+172>>2]=s,s=f[i+4>>2],f[n+160>>2]=f[i>>2],f[n+164>>2]=s,i=f[t+692>>2],f[n+40>>2]=f[t+688>>2],f[n+44>>2]=i,i=f[t+684>>2],f[n+32>>2]=f[t+680>>2],f[n+36>>2]=i,i=f[t+708>>2],f[n+24>>2]=f[t+704>>2],f[n+28>>2]=i,i=f[t+700>>2],f[n+16>>2]=f[t+696>>2],f[n+20>>2]=i,e=0|o[f[f[e>>2]+20>>2]](e),f[n+8>>2]=0,f[n+12>>2]=0,f[n>>2]=0,f[n+4>>2]=0,o[f[f[e>>2]+80>>2]](e,n+32|0,n+16|0,n+112|0,n);break e;case 8:if(i=f[4+(s=t+1244|0)>>2],f[n+120>>2]=f[s>>2],f[n+124>>2]=i,i=f[4+(s=B=t+1236|0)>>2],f[n+112>>2]=f[s>>2],f[n+116>>2]=i,i=f[4+(s=t+1260|0)>>2],f[n+136>>2]=f[s>>2],f[n+140>>2]=i,i=f[4+(s=u=t+1252|0)>>2],f[n+128>>2]=f[s>>2],f[n+132>>2]=i,i=f[4+(s=t+1276|0)>>2],f[n+152>>2]=f[s>>2],f[n+156>>2]=i,i=f[4+(a=s=t+1268|0)>>2],f[n+144>>2]=f[a>>2],f[n+148>>2]=i,i=f[4+(a=t+1292|0)>>2],f[n+168>>2]=f[a>>2],f[n+172>>2]=i,a=f[4+(i=t+1284|0)>>2],f[n+160>>2]=f[i>>2],f[n+164>>2]=a,r?(a=0|o[f[f[e>>2]+20>>2]](e),o[f[f[a>>2]+64>>2]](a,n+112|0,U),a=f[4+(r=t+1308|0)>>2],f[n+120>>2]=f[r>>2],f[n+124>>2]=a,a=f[4+(r=t+1300|0)>>2],f[n+112>>2]=f[r>>2],f[n+116>>2]=a,a=f[4+(r=t+1324|0)>>2],f[n+136>>2]=f[r>>2],f[n+140>>2]=a,a=f[4+(r=t+1316|0)>>2],f[n+128>>2]=f[r>>2],f[n+132>>2]=a,a=f[4+(r=t+1340|0)>>2],f[n+152>>2]=f[r>>2],f[n+156>>2]=a,a=f[4+(r=t+1332|0)>>2],f[n+144>>2]=f[r>>2],f[n+148>>2]=a,a=f[4+(r=t+1356|0)>>2],f[n+168>>2]=f[r>>2],f[n+172>>2]=a,a=f[4+(r=t+1348|0)>>2],f[n+160>>2]=f[r>>2],f[n+164>>2]=a,a=0|o[f[f[e>>2]+20>>2]](e),o[f[f[a>>2]+64>>2]](a,n+112|0,U)):(a=f[4+(r=t+1308|0)>>2],f[n+120>>2]=f[r>>2],f[n+124>>2]=a,a=f[4+(r=t+1300|0)>>2],f[n+112>>2]=f[r>>2],f[n+116>>2]=a,a=f[4+(r=t+1324|0)>>2],f[n+136>>2]=f[r>>2],f[n+140>>2]=a,a=f[4+(r=t+1316|0)>>2],f[n+128>>2]=f[r>>2],f[n+132>>2]=a,a=f[4+(r=t+1340|0)>>2],f[n+152>>2]=f[r>>2],f[n+156>>2]=a,a=f[4+(r=t+1332|0)>>2],f[n+144>>2]=f[r>>2],f[n+148>>2]=a,a=f[4+(r=t+1356|0)>>2],f[n+168>>2]=f[r>>2],f[n+172>>2]=a,a=f[4+(r=t+1348|0)>>2],f[n+160>>2]=f[r>>2],f[n+164>>2]=a),!k)break e;r=f[(a=B)+12>>2],f[n+120>>2]=f[a+8>>2],f[n+124>>2]=r,r=f[a+4>>2],f[n+112>>2]=f[a>>2],f[n+116>>2]=r,r=f[(a=u)+12>>2],f[n+136>>2]=f[a+8>>2],f[n+140>>2]=r,r=f[a+4>>2],f[n+128>>2]=f[a>>2],f[n+132>>2]=r,r=f[(a=s)+12>>2],f[n+152>>2]=f[a+8>>2],f[n+156>>2]=r,r=f[a+4>>2],f[n+144>>2]=f[a>>2],f[n+148>>2]=r,r=f[i+12>>2],f[n+168>>2]=f[i+8>>2],f[n+172>>2]=r,r=f[i+4>>2],f[n+160>>2]=f[i>>2],f[n+164>>2]=r,f[n+96>>2]=f[n+120>>2],f[n+100>>2]=f[n+136>>2],f[n+108>>2]=0,f[n+104>>2]=f[n+152>>2],f[n+80>>2]=f[n+112>>2],f[n+84>>2]=f[n+128>>2],f[n+92>>2]=0,f[n+88>>2]=f[n+144>>2],p=d[t+1148>>2],_=d[t+1144>>2],c=d[t+1060>>2],l=d[t+1056>>2],a=0|o[f[f[e>>2]+20>>2]](e),f[n+72>>2]=0,f[n+76>>2]=0,f[n+64>>2]=0,f[n+68>>2]=0,k=t+1348|0,o[f[f[a>>2]+72>>2]](a,k,n+96|0,n+80|0,y(U*y(.8999999761581421)),l,c,_,p,n- -64|0,y(10),1),f[n+92>>2]=0,g=d[n+148>>2],f[n+88>>2]=f[n+148>>2],c=d[n+132>>2],f[n+84>>2]=f[n+132>>2],l=d[n+116>>2],f[n+80>>2]=f[n+116>>2],m=cn(_=d[t+1372>>2]),v=sn(_),_=d[t+1368>>2],d[n+68>>2]=y(v*c)-y(m*l),p=cn(_),_=sn(_),d[n+72>>2]=y(y(y(v*p)*l)+y(y(p*m)*c))+y(_*g),d[n+64>>2]=y(y(y(_*v)*l)+y(y(_*m)*c))-y(p*g),a=f[4+(r=t+1308|0)>>2],f[n+120>>2]=f[r>>2],f[n+124>>2]=a,a=f[4+(r=t+1300|0)>>2],f[n+112>>2]=f[r>>2],f[n+116>>2]=a,a=f[4+(r=t+1324|0)>>2],f[n+136>>2]=f[r>>2],f[n+140>>2]=a,a=f[4+(r=t+1316|0)>>2],f[n+128>>2]=f[r>>2],f[n+132>>2]=a,a=f[4+(r=t+1340|0)>>2],f[n+152>>2]=f[r>>2],f[n+156>>2]=a,a=f[4+(r=t+1332|0)>>2],f[n+144>>2]=f[r>>2],f[n+148>>2]=a,a=f[4+(r=t+1356|0)>>2],f[n+168>>2]=f[r>>2],f[n+172>>2]=a,a=f[k+4>>2],f[n+160>>2]=f[k>>2],f[n+164>>2]=a,f[n+60>>2]=0,d[n+56>>2]=-d[n+144>>2],d[n+52>>2]=-d[n+128>>2],d[n+48>>2]=-d[n+112>>2],(c=d[t+968>>2])>(l=d[t+972>>2])?(a=0|o[f[f[e>>2]+20>>2]](e),f[n+40>>2]=0,f[n+44>>2]=0,f[n+32>>2]=0,f[n+36>>2]=0,o[f[f[a>>2]+68>>2]](a,k,n+48|0,n- -64|0,U,U,y(-3.1415927410125732),y(3.1415927410125732),n+32|0,0,y(10))):c<l&&(a=0|o[f[f[e>>2]+20>>2]](e),f[n+40>>2]=0,f[n+44>>2]=0,f[n+32>>2]=0,f[n+36>>2]=0,o[f[f[a>>2]+68>>2]](a,k,n+48|0,n- -64|0,U,U,c,l,n+32|0,1,y(10))),a=f[B+12>>2],f[n+120>>2]=f[B+8>>2],f[n+124>>2]=a,a=f[B+4>>2],f[n+112>>2]=f[B>>2],f[n+116>>2]=a,B=f[u+12>>2],f[n+136>>2]=f[u+8>>2],f[n+140>>2]=B,B=f[u+4>>2],f[n+128>>2]=f[u>>2],f[n+132>>2]=B,u=f[s+12>>2],f[n+152>>2]=f[s+8>>2],f[n+156>>2]=u,u=f[s+4>>2],f[n+144>>2]=f[s>>2],f[n+148>>2]=u,s=f[i+12>>2],f[n+168>>2]=f[i+8>>2],f[n+172>>2]=s,s=f[i+4>>2],f[n+160>>2]=f[i>>2],f[n+164>>2]=s,i=f[t+692>>2],f[n+40>>2]=f[t+688>>2],f[n+44>>2]=i,i=f[t+684>>2],f[n+32>>2]=f[t+680>>2],f[n+36>>2]=i,i=f[t+708>>2],f[n+24>>2]=f[t+704>>2],f[n+28>>2]=i,i=f[t+700>>2],f[n+16>>2]=f[t+696>>2],f[n+20>>2]=i,e=0|o[f[f[e>>2]+20>>2]](e),f[n+8>>2]=0,f[n+12>>2]=0,f[n>>2]=0,f[n+4>>2]=0,o[f[f[e>>2]+80>>2]](e,n+32|0,n+16|0,n+112|0,n);break e;case 4:case 6:case 7:break e;case 3:}i=f[t+836>>2],f[n+120>>2]=f[t+832>>2],f[n+124>>2]=i,i=f[4+(s=u=t+824|0)>>2],f[n+112>>2]=f[s>>2],f[n+116>>2]=i,i=f[t+852>>2],f[n+136>>2]=f[t+848>>2],f[n+140>>2]=i,i=f[t+844>>2],f[n+128>>2]=f[t+840>>2],f[n+132>>2]=i,i=f[t+868>>2],f[n+152>>2]=f[t+864>>2],f[n+156>>2]=i,i=f[t+860>>2],f[n+144>>2]=f[t+856>>2],f[n+148>>2]=i,i=f[t+884>>2],f[n+168>>2]=f[t+880>>2],f[n+172>>2]=i,i=f[t+876>>2],f[n+160>>2]=f[t+872>>2],f[n+164>>2]=i,r?(i=0|o[f[f[e>>2]+20>>2]](e),o[f[f[i>>2]+64>>2]](i,n+112|0,U),i=f[t+900>>2],f[n+120>>2]=f[t+896>>2],f[n+124>>2]=i,i=f[t+892>>2],f[n+112>>2]=f[t+888>>2],f[n+116>>2]=i,i=f[t+916>>2],f[n+136>>2]=f[t+912>>2],f[n+140>>2]=i,i=f[t+908>>2],f[n+128>>2]=f[t+904>>2],f[n+132>>2]=i,i=f[t+932>>2],f[n+152>>2]=f[t+928>>2],f[n+156>>2]=i,i=f[t+924>>2],f[n+144>>2]=f[t+920>>2],f[n+148>>2]=i,i=f[t+948>>2],f[n+168>>2]=f[t+944>>2],f[n+172>>2]=i,i=f[t+940>>2],f[n+160>>2]=f[t+936>>2],f[n+164>>2]=i,i=0|o[f[f[e>>2]+20>>2]](e),o[f[f[i>>2]+64>>2]](i,n+112|0,U)):(i=f[t+900>>2],f[n+120>>2]=f[t+896>>2],f[n+124>>2]=i,i=f[t+892>>2],f[n+112>>2]=f[t+888>>2],f[n+116>>2]=i,i=f[t+916>>2],f[n+136>>2]=f[t+912>>2],f[n+140>>2]=i,i=f[t+908>>2],f[n+128>>2]=f[t+904>>2],f[n+132>>2]=i,i=f[t+932>>2],f[n+152>>2]=f[t+928>>2],f[n+156>>2]=i,i=f[t+924>>2],f[n+144>>2]=f[t+920>>2],f[n+148>>2]=i,i=f[t+948>>2],f[n+168>>2]=f[t+944>>2],f[n+172>>2]=i,i=f[t+940>>2],f[n+160>>2]=f[t+936>>2],f[n+164>>2]=i),k&&(i=h[t+180|0],M=d[(s=i?u:t+888|0)+48>>2],D=d[s+8>>2],m=d[s+4>>2],r=f[s+4>>2],O=d[s+52>>2],p=d[s+24>>2],z=d[s+16>>2],a=f[s+16>>2],_=d[s+20>>2],B=f[s+20>>2],A=d[s+56>>2],c=d[s+40>>2],P=d[s+32>>2],u=f[s+32>>2],l=d[s+36>>2],s=f[s+36>>2],I=d[(i=(i?824:888)+t|0)>>2],i=f[i>>2],N=d[t+184>>2],f[n+108>>2]=0,v=y(c*y(0)),g=y(l*y(0)),d[n+104>>2]=A+y(v+y(g+y(N*P))),p=y(p*y(0)),_=y(_*y(0)),d[n+100>>2]=O+y(p+y(_+y(N*z))),c=y(D*y(0)),l=y(m*y(0)),d[n+96>>2]=M+y(c+y(l+y(N*I))),m=d[t+188>>2],f[n+92>>2]=0,d[n+88>>2]=A+y(v+y(g+y(m*P))),d[n+84>>2]=O+y(p+y(_+y(m*z))),d[n+80>>2]=M+y(c+y(l+y(m*I))),k=0|o[f[f[e>>2]+20>>2]](e),f[n+72>>2]=0,f[n+76>>2]=0,f[n+64>>2]=0,f[n+68>>2]=0,o[f[f[k>>2]+16>>2]](k,n+96|0,n+80|0,n- -64|0),f[n+76>>2]=0,f[n+72>>2]=u,f[n+68>>2]=a,f[n+64>>2]=i,f[n+60>>2]=0,f[n+56>>2]=s,f[n+52>>2]=B,f[n+48>>2]=r,c=d[t+196>>2],l=d[t+192>>2],e=0|o[f[f[e>>2]+20>>2]](e),f[n+40>>2]=0,f[n+44>>2]=0,f[n+32>>2]=0,f[n+36>>2]=0,o[f[f[e>>2]+68>>2]](e,t+936|0,n- -64|0,n+48|0,U,U,l,c,n+32|0,1,y(10)))}R=n+176|0},o[47]=function(e){e|=0;var t,n,i=0;for(R=t=R-16|0,f[t+12>>2]=e,n=f[t+12>>2],f[t+8>>2]=0;e=f[t+8>>2],f[12+(i=R-16|0)>>2]=n+244,(0|e)<f[f[i+12>>2]+4>>2];)i=f[t+8>>2],f[12+(e=R-16|0)>>2]=n+244,f[e+8>>2]=i,f[t+4>>2]=f[f[f[e+12>>2]+12>>2]+(f[e+8>>2]<<2)>>2],1&xo(f[t+4>>2])&&(f[12+(e=R-16|0)>>2]=f[t+4>>2],2&f[f[e+12>>2]+204>>2]||(f[12+(e=R-16|0)>>2]=f[t+4>>2],1!=+d[f[e+12>>2]+504>>2]?Co(f[t+4>>2]):(f[12+(e=R-16|0)>>2]=f[t+4>>2],cr(f[e+12>>2]+472|0)),f[12+(e=R-16|0)>>2]=f[t+4>>2],1==+d[f[e+12>>2]+508>>2]&&(f[12+(e=R-16|0)>>2]=f[t+4>>2],cr(f[e+12>>2]+488|0)))),f[t+8>>2]=f[t+8>>2]+1;R=t+16|0},o[48]=function(e,t){var n;e|=0,t|=0,f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t},o[49]=function(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,function(e,t){var n,i=0,a=0;if(R=n=R-16|0,o[f[4966]](2560),f[e+296>>2]>=1)for(;a=f[f[e+304>>2]+(i<<2)>>2],o[f[f[a>>2]+8>>2]](a,e,t),(0|(i=i+1|0))<f[e+296>>2];);o[f[4967]](),R=n+16|0}(f[n+12>>2],d[n+8>>2]),R=n+16|0},o[50]=Gr,o[51]=rs,o[52]=mo,o[53]=In,o[54]=ws,o[55]=Bs,o[56]=function(){E()},o[57]=Gr,o[58]=rs,o[59]=function(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-32|0,f[i+24>>2]=e,f[i+20>>2]=t,f[i+16>>2]=n,a[i+15|0]=0!=(f[f[i+20>>2]+4>>2]&f[f[i+16>>2]+8>>2]),a[i+15|0]=1&a[i+15|0]?0!=(f[f[i+16>>2]+4>>2]&f[f[i+20>>2]+8>>2]):0;e:{if(1&a[i+15|0]){if(f[i+8>>2]=f[f[i+20>>2]>>2],f[i+4>>2]=f[f[i+16>>2]>>2],f[12+(e=R-16|0)>>2]=f[i+8>>2],1&f[f[e+12>>2]+204>>2]&&(f[12+(e=R-16|0)>>2]=f[i+4>>2],1&f[f[e+12>>2]+204>>2])){a[i+31|0]=0;break e}if(f[12+(e=R-16|0)>>2]=f[i+8>>2],2==f[f[e+12>>2]+220>>2]&&(f[12+(e=R-16|0)>>2]=f[i+4>>2],2==f[f[e+12>>2]+220>>2])){a[i+31|0]=0;break e}}a[i+31|0]=1&a[i+15|0]}return R=i+32|0,1&a[i+31|0]},o[60]=ws,o[61]=Bs,o[62]=as,o[63]=cs,o[64]=function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+8>>2]=e,f[n+4>>2]=t,e=f[n+8>>2],f[f[n+4>>2]>>2]!=f[e+84>>2]&&1&mo(e,f[n+4>>2])?(f[12+(t=R-16|0)>>2]=f[e+88>>2],1&a[f[t+12>>2]+368|0]||(f[n>>2]=f[f[n+4>>2]>>2],f[12+(t=R-16|0)>>2]=f[e+88>>2],t=f[f[t+12>>2]+24>>2],1&o[f[f[t>>2]+28>>2]](t,f[e+84>>2],f[n>>2]))?a[n+15|0]=1:a[n+15|0]=0):a[n+15|0]=0,R=n+16|0,1&a[n+15|0]},o[65]=function(e,t,n){e|=0,t|=0,n|=0;var i,o=0;return R=i=R-48|0,f[i+40>>2]=e,f[i+36>>2]=t,a[i+35|0]=n,e=f[i+40>>2],f[12+(t=R-16|0)>>2]=f[f[i+36>>2]>>2],4&f[f[t+12>>2]+204>>2]?(f[12+(t=R-16|0)>>2]=f[e+88>>2],f[i+28>>2]=f[t+12>>2]+348,f[e+92>>2]?(n=f[e+92>>2]+1|0,o=f[e+96>>2],f[12+(t=R-16|0)>>2]=f[i+28>>2],f[t+8>>2]=o,f[f[f[t+12>>2]+12>>2]+(f[t+8>>2]<<2)>>2]=n):(f[12+(t=R-16|0)>>2]=f[i+28>>2],f[e+96>>2]=f[f[t+12>>2]+4>>2],t=f[i+28>>2],f[i+24>>2]=1,hi(t,i+24|0),t=f[i+28>>2],f[12+(n=R-16|0)>>2]=f[e+84>>2],f[12+(o=R-16|0)>>2]=f[f[n+12>>2]+192>>2],f[i+20>>2]=f[f[o+12>>2]+8>>2],hi(t,i+20|0)),f[12+(t=R-16|0)>>2]=f[f[i+36>>2]>>2],f[i+16>>2]=f[f[t+12>>2]+192>>2],1&ya(f[i+16>>2])?(f[i+12>>2]=f[i+16>>2],f[i+8>>2]=f[f[f[i+36>>2]+4>>2]+4>>2],t=f[i+28>>2],n=Ro(f[i+12>>2],f[i+8>>2]),f[12+(o=R-16|0)>>2]=n,f[i+4>>2]=f[f[o+12>>2]+8>>2],hi(t,i+4|0)):(t=f[i+28>>2],f[12+(n=R-16|0)>>2]=f[i+16>>2],f[i>>2]=f[f[n+12>>2]+8>>2],hi(t,i)),f[e+92>>2]=f[e+92>>2]+1,d[i+44>>2]=1):d[i+44>>2]=In(e,f[i+36>>2],1&a[i+35|0]),R=i+48|0,y(d[i+44>>2])},o[66]=xr,o[67]=function(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,xr(e=f[t+12>>2]),ce(e),R=t+16|0},o[68]=function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+8>>2]=e,f[n+4>>2]=t,e=f[n+8>>2];e:if(f[f[n+4>>2]+4>>2]&f[e+16>>2]){if(!(!f[f[n+4>>2]>>2]|1&a[e+156|0])){f[n>>2]=f[f[n+4>>2]>>2],f[12+(e=R-16|0)>>2]=f[n>>2],a[n+15|0]=!(4&f[f[e+12>>2]+204>>2]);break e}a[n+15|0]=1}else a[n+15|0]=0;return R=n+16|0,1&a[n+15|0]},o[69]=function(e,t,n){e|=0,t|=0,n|=0;var i,o=y(0);return R=i=R-32|0,f[i+28>>2]=e,f[i+24>>2]=t,a[i+23|0]=n,e=f[i+28>>2],f[12+(t=R-16|0)>>2]=f[f[i+24>>2]>>2],f[i+16>>2]=f[f[t+12>>2]+192>>2],!(1&ya(f[i+16>>2]))|!f[f[i+24>>2]+4>>2]?(f[12+(t=R-16|0)>>2]=f[i+16>>2],f[i>>2]=f[f[t+12>>2]+8>>2],hi(e+136|0,i)):(f[i+12>>2]=f[i+16>>2],f[i+8>>2]=f[f[f[i+24>>2]+4>>2]>>2],t=Ro(f[i+12>>2],f[i+8>>2]),f[12+(n=R-16|0)>>2]=t,f[i+4>>2]=f[f[n+12>>2]+8>>2],hi(e+136|0,i+4|0)),o=wn(e,f[i+24>>2],1&a[i+23|0]),R=i+32|0,y(o)},o[70]=aa,o[71]=function(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,aa(e=f[t+12>>2]),ce(e),R=t+16|0},o[72]=function(e,t){var n;return e|=0,t|=0,f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],a[n+7|0]=0!=(f[f[n+8>>2]+4>>2]&f[t+16>>2]),a[n+7|0]=1&a[n+7|0]?0!=(f[t+12>>2]&f[f[n+8>>2]+8>>2]):0,1&a[n+7|0]},o[73]=wn,o[74]=ws,o[75]=Bs,o[76]=as,o[77]=cs,o[78]=function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+8>>2]=e,f[n+4>>2]=t,e=f[n+8>>2];e:if(f[f[n+4>>2]+4>>2]&f[e+16>>2]){if(!(!f[f[n+4>>2]>>2]|1&a[e+92|0])){f[n>>2]=f[f[n+4>>2]>>2],f[12+(e=R-16|0)>>2]=f[n>>2],a[n+15|0]=!(4&f[f[e+12>>2]+204>>2]);break e}a[n+15|0]=1}else a[n+15|0]=0;return R=n+16|0,1&a[n+15|0]},o[79]=function(e,t,n){e|=0,t|=0,n|=0;var i,o=y(0);return R=i=R-32|0,f[i+28>>2]=e,f[i+24>>2]=t,a[i+23|0]=n,e=f[i+28>>2],f[12+(t=R-16|0)>>2]=f[f[i+24>>2]>>2],f[i+16>>2]=f[f[t+12>>2]+192>>2],!(1&ya(f[i+16>>2]))|!f[f[i+24>>2]+4>>2]?(f[12+(t=R-16|0)>>2]=f[i+16>>2],f[e+88>>2]=f[f[t+12>>2]+8>>2]):(f[i+12>>2]=f[i+16>>2],f[i+8>>2]=f[f[f[i+24>>2]+4>>2]>>2],t=Ro(f[i+12>>2],f[i+8>>2]),f[12+(n=R-16|0)>>2]=t,f[e+88>>2]=f[f[n+12>>2]+8>>2]),o=Bn(e,f[i+24>>2],1&a[i+23|0]),R=i+32|0,y(o)},o[80]=Gr,o[81]=rs,o[82]=Bn,o[83]=Gr,o[84]=function(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,Gr(e=f[t+12>>2]),Br(e),R=t+16|0},o[85]=function(e,t){var n,i;e|=0,t|=0,R=n=R-144|0,f[n+140>>2]=e,f[n+136>>2]=t,pa(e=n+8|0,(t=f[n+140>>2])+68|0),_a(i=n+72|0,t+4|0,e),lo(f[n+136>>2],i),R=n+144|0},o[86]=function(e,t){var n;e|=0,t|=0,R=n=R-80|0,f[n+76>>2]=e,f[n+72>>2]=t,e=n+8|0,t=f[n+76>>2],_a(e,f[n+72>>2],t+68|0),lo(t+4|0,e),R=n+80|0},o[87]=ws,o[88]=Bs,o[89]=Ar,o[90]=function(e){var t;f[(e|=0)>>2]=2244,(t=f[e+556>>2])&&(h[e+560|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+556>>2]=0),f[e+556>>2]=0,f[e+548>>2]=0,f[e+552>>2]=0,a[e+560|0]=1,Ao(e),e&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[91]=function(e,t){t|=0,f[200+(e|=0)>>2]=t,f[e+192>>2]=t,f[e+304>>2]=f[e+304>>2]+1},o[92]=function(e,t){t|=0;var n,i=0;i=n=f[288+(e|=0)>>2];e:if(!((0|n)<1)){for(e=f[e+296>>2],i=0;;){if(f[e+(i<<2)>>2]==(0|t))break e;if((0|n)==(0|(i=i+1|0)))break}i=n}return(0|i)>=(0|n)|0},o[93]=function(){return 496},o[94]=function(e,t,n){return Ve(e|=0,t|=0,n|=0),f[t+264>>2]=f[e+324>>2],f[t+268>>2]=f[e+328>>2],f[t+272>>2]=f[e+332>>2],f[t+276>>2]=f[e+336>>2],f[t+280>>2]=f[e+340>>2],f[t+284>>2]=f[e+344>>2],f[t+288>>2]=f[e+348>>2],f[t+292>>2]=f[e+352>>2],f[t+296>>2]=f[e+356>>2],f[t+300>>2]=f[e+360>>2],f[t+304>>2]=f[e+364>>2],f[t+308>>2]=f[e+368>>2],f[t+312>>2]=f[e+372>>2],f[t+316>>2]=f[e+376>>2],f[t+320>>2]=f[e+380>>2],f[t+324>>2]=f[e+384>>2],f[t+328>>2]=f[e+388>>2],f[t+332>>2]=f[e+392>>2],f[t+336>>2]=f[e+396>>2],f[t+340>>2]=f[e+400>>2],f[t+456>>2]=f[e+404>>2],f[t+344>>2]=f[e+604>>2],f[t+348>>2]=f[e+608>>2],f[t+352>>2]=f[e+612>>2],f[t+356>>2]=f[e+616>>2],f[t+360>>2]=f[e+408>>2],f[t+364>>2]=f[e+412>>2],f[t+368>>2]=f[e+416>>2],f[t+372>>2]=f[e+420>>2],f[t+376>>2]=f[e+424>>2],f[t+380>>2]=f[e+428>>2],f[t+384>>2]=f[e+432>>2],f[t+388>>2]=f[e+436>>2],f[t+392>>2]=f[e+440>>2],f[t+396>>2]=f[e+444>>2],f[t+400>>2]=f[e+448>>2],f[t+404>>2]=f[e+452>>2],f[t+408>>2]=f[e+456>>2],f[t+412>>2]=f[e+460>>2],f[t+416>>2]=f[e+464>>2],f[t+420>>2]=f[e+468>>2],f[t+424>>2]=f[e+472>>2],f[t+428>>2]=f[e+476>>2],f[t+432>>2]=f[e+480>>2],f[t+436>>2]=f[e+484>>2],f[t+440>>2]=f[e+488>>2],f[t+444>>2]=f[e+492>>2],f[t+448>>2]=f[e+496>>2],f[t+452>>2]=f[e+500>>2],f[t+460>>2]=f[e+504>>2],f[t+464>>2]=f[e+508>>2],f[t+492>>2]=h[e+512|0],f[t+468>>2]=f[e+516>>2],f[t+472>>2]=f[e+520>>2],f[t+476>>2]=f[e+524>>2],f[t+480>>2]=f[e+528>>2],f[t+484>>2]=f[e+532>>2],f[t+488>>2]=f[e+536>>2],2272},o[95]=function(e,t){var n,i,a=0,r=0,s=0,c=0;r=t|=0,s=0|o[f[f[(e|=0)>>2]+16>>2]](e),c=1,a=f[f[t>>2]+16>>2],i=0|o[a](0|r,0|s,0|c),c=t,s=i,r=0|o[f[f[e>>2]+20>>2]](e,f[i+8>>2],t),n=e,a=f[f[t>>2]+20>>2],o[a](0|c,0|s,0|r,1497645650,0|n)},o[96]=Dt,o[97]=function(e){(e=Dt(e|=0))&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[98]=function(e,t){e|=0,t=y(t);var n,i=0,r=0,s=0;if(R=n=R-16|0,o[f[4966]](2704),o[f[4966]](2667),i=f[e+332>>2],f[e+324>>2]>=1)for(;s=f[e+24>>2],o[f[f[s>>2]+16>>2]](s,f[(r<<2)+i>>2]),i=f[e+332>>2],(0|(r=r+1|0))<f[e+324>>2];);i&&(h[e+336|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[e+332>>2]=0),f[e+332>>2]=0,f[e+324>>2]=0,f[e+328>>2]=0,a[e+336|0]=1,o[f[4967]](),(0|(i=f[e+248>>2]))>=1&&function(e,t,n,i){var r,s=0,c=0,l=y(0),_=0,u=0,p=y(0),m=0,v=y(0),A=y(0),C=y(0),S=y(0),E=0,w=0,T=y(0),P=y(0),I=0,N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0);if(R=r=R-512|0,(0|n)>=1)for(;;){c=f[(E<<2)+t>>2],f[c+268>>2]=1065353216;e:{t:if(!((s=f[c+220>>2]+-2|0)>>>0>3))switch(s-1|0){case 0:case 1:break t;default:break e}if(!(3&h[c+204|0])&&(zs(c,i,r+448|0),h[e+44|0]&&(l=d[c+276>>2],(l=y(l*l))!=y(0)&&(p=l,l=y(d[r+496>>2]-d[c+52>>2]),v=y(l*l),l=y(d[r+500>>2]-d[c+56>>2]),v=y(v+y(l*l)),l=y(d[r+504>>2]-d[c+60>>2]),p<y(v+y(l*l)))))){if(o[f[4966]](2640),f[f[c+192>>2]+4>>2]<=19&&(f[5207]=f[5207]+1,s=f[e+68>>2],s=0|o[f[f[s>>2]+36>>2]](s),_=f[e+24>>2],f[r+348>>2]=-1,f[r+340>>2]=1065353216,f[r+344>>2]=1,u=f[c+64>>2],f[r+360>>2]=f[c+60>>2],f[r+364>>2]=u,u=f[c+56>>2],f[r+352>>2]=f[c+52>>2],f[r+356>>2]=u,u=f[r+508>>2],f[r+376>>2]=f[r+504>>2],f[r+380>>2]=u,u=f[r+500>>2],f[r+368>>2]=f[r+496>>2],f[r+372>>2]=u,f[r+416>>2]=0,f[r+336>>2]=3052,f[r+428>>2]=s,f[r+432>>2]=_,f[r+424>>2]=0,f[r+420>>2]=c,s=f[c+272>>2],Fo(r+280|0),f[r+304>>2]=1065353216,f[r+296>>2]=1065353216,f[r+300>>2]=1065353216,f[r+284>>2]=8,f[r+280>>2]=11388,f[r+316>>2]=0,f[r+320>>2]=0,f[r+324>>2]=0,f[r+308>>2]=0,f[r+312>>2]=0,f[r+332>>2]=0,f[r+328>>2]=s,f[r+312>>2]=s,f[r+424>>2]=f[e+56>>2],s=f[c+188>>2],f[r+344>>2]=f[s+4>>2],f[r+348>>2]=f[s+8>>2],s=f[r+460>>2],f[r+224>>2]=f[r+456>>2],f[r+228>>2]=s,s=f[r+452>>2],f[r+216>>2]=f[r+448>>2],f[r+220>>2]=s,s=f[r+476>>2],f[r+240>>2]=f[r+472>>2],f[r+244>>2]=s,s=f[r+468>>2],f[r+232>>2]=f[r+464>>2],f[r+236>>2]=s,s=f[r+492>>2],f[r+256>>2]=f[r+488>>2],f[r+260>>2]=s,s=f[r+484>>2],f[r+248>>2]=f[r+480>>2],f[r+252>>2]=s,s=f[r+508>>2],f[r+272>>2]=f[r+504>>2],f[r+276>>2]=s,s=f[r+500>>2],f[r+264>>2]=f[r+496>>2],f[r+268>>2]=s,_=f[12+(s=c+4|0)>>2],f[r+224>>2]=f[s+8>>2],f[r+228>>2]=_,_=f[s+4>>2],f[r+216>>2]=f[s>>2],f[r+220>>2]=_,_=f[c+32>>2],f[r+240>>2]=f[c+28>>2],f[r+244>>2]=_,_=f[c+24>>2],f[r+232>>2]=f[c+20>>2],f[r+236>>2]=_,_=f[c+48>>2],f[r+256>>2]=f[c+44>>2],f[r+260>>2]=_,_=f[c+40>>2],f[r+248>>2]=f[c+36>>2],f[r+252>>2]=_,le(e,r+280|0,s,r+216|0,r+336|0),(l=d[r+340>>2])<y(1))){if(A=y(l*y(d[r+500>>2]-d[c+56>>2])),C=y(l*y(d[r+496>>2]-d[c+52>>2])),S=y(l*y(d[r+504>>2]-d[c+60>>2])),B=y(y(y(A*y(-d[r+388>>2]))-y(C*d[r+384>>2]))-y(S*d[r+392>>2])),s=f[e+24>>2],_=0|o[f[f[s>>2]+12>>2]](s,c,f[r+416>>2]),(0|(s=f[e+324>>2]))==f[e+328>>2]&&!((0|s)>=(0|(u=s?s<<1:1)))){if(m=0,w=0,u&&(f[6257]=f[6257]+1,w=0|o[f[4968]](u<<2,16),s=f[e+324>>2]),(0|s)>=1)for(;f[(I=m<<2)+w>>2]=f[f[e+332>>2]+I>>2],(0|s)!=(0|(m=m+1|0)););(m=f[e+332>>2])&&(h[e+336|0]&&(m&&(f[6258]=f[6258]+1,o[f[4969]](m)),s=f[e+324>>2]),f[e+332>>2]=0),f[e+332>>2]=w,a[e+336|0]=1,f[e+328>>2]=u}f[f[e+332>>2]+(s<<2)>>2]=_,f[e+324>>2]=s+1,s=f[r+416>>2],N=d[s+20>>2],D=d[s+36>>2],M=d[s+40>>2],O=d[s+8>>2],z=d[s+24>>2],l=d[s+60>>2],k=d[s+56>>2],T=d[s+52>>2],L=d[s+44>>2],F=d[s+12>>2],p=d[s+28>>2],U=d[s+4>>2],v=d[c+60>>2],P=d[c+52>>2],j=d[c+56>>2],f[r+16>>2]=0,f[r+20>>2]=0,f[r+36>>2]=0,f[r+8>>2]=0,f[r+12>>2]=0,C=y(C+P),A=y(A+j),S=y(S+v),P=y(y(y(F*C)+y(p*A))+y(L*S)),v=p,p=y(-k),d[r+32>>2]=P+y(y(y(v*p)-y(F*T))-y(L*l)),d[r+28>>2]=y(y(y(C*O)+y(A*z))+y(S*M))+y(y(y(z*p)-y(O*T))-y(M*l)),d[r+24>>2]=y(y(y(C*U)+y(A*N))+y(S*D))+y(y(y(N*p)-y(U*T))-y(D*l)),s=f[r+388>>2],f[r+72>>2]=f[r+384>>2],f[r+76>>2]=s,s=f[r+396>>2],f[r+80>>2]=f[r+392>>2],f[r+84>>2]=s,d[r+88>>2]=B,f[r+100>>2]=0,f[r+104>>2]=0,f[r+92>>2]=0,f[r+96>>2]=0,f[r+172>>2]=0,f[r+164>>2]=0,f[r+168>>2]=0,f[r+156>>2]=0,f[r+160>>2]=0,f[r+148>>2]=0,f[r+152>>2]=0,f[r+140>>2]=0,f[r+144>>2]=0,f[r+132>>2]=0,f[r+136>>2]=0,f[r+124>>2]=0,f[r+128>>2]=0,s=g(Wi(_,r+8|0),208)+_|0,f[s+100>>2]=0,d[s+88>>2]=x(y(b(y(d[c+228>>2]*d[f[r+416>>2]+228>>2]),y(-10))),y(10)),_=f[c+56>>2],f[s+52>>2]=f[c+52>>2],f[s+56>>2]=_,_=f[c+64>>2],f[s+60>>2]=f[c+60>>2],f[s+64>>2]=_,f[s+48>>2]=0,d[s+44>>2]=S,d[s+40>>2]=A,d[s+36>>2]=C}o[f[4967]]()}}if((0|(E=E+1|0))==(0|n))break}R=r+512|0}(e,f[e+256>>2],i,t),o[f[4967]](),R=n+16|0},o[99]=function(e){var t=0,n=0,i=0,o=0;if((0|(t=f[248+(e|=0)>>2]))>=1)for(;;){e:{t:if(i=f[f[e+256>>2]+(n<<2)>>2],!((o=f[i+220>>2]+-2|0)>>>0>3))switch(o-1|0){case 0:case 1:break t;default:break e}Co(i),t=f[e+248>>2]}if(!((0|(n=n+1|0))<(0|t)))break}},o[100]=function(e){var t=0;return f[(e|=0)>>2]=2936,(t=f[e+80>>2])&&(h[e+84|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+80>>2]=0),f[e+80>>2]=0,f[e+72>>2]=0,f[e+76>>2]=0,a[e+84|0]=1,(t=f[e+60>>2])&&(h[e- -64|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+60>>2]=0),f[e+60>>2]=0,f[e+52>>2]=0,f[e+56>>2]=0,a[e- -64|0]=1,(t=f[e+40>>2])&&(h[e+44|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+40>>2]=0),f[e+40>>2]=0,f[e+32>>2]=0,f[e+36>>2]=0,a[e+44|0]=1,0|e},o[101]=function(e){var t=0;f[(e|=0)>>2]=2936,(t=f[e+80>>2])&&(h[e+84|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+80>>2]=0),f[e+80>>2]=0,f[e+72>>2]=0,f[e+76>>2]=0,a[e+84|0]=1,(t=f[e+60>>2])&&(h[e- -64|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+60>>2]=0),f[e+60>>2]=0,f[e+52>>2]=0,f[e+56>>2]=0,a[e- -64|0]=1,!(t=f[e+40>>2])|!h[e+44|0]||t&&(f[6258]=f[6258]+1,o[f[4969]](t)),ce(e)},o[102]=function(e,t,n,i,r,s){e|=0,t|=0,n|=0,i|=0,r|=0;var c=0,l=0,_=0,u=0,p=0,m=0,d=0,v=0;if(!((0|(s|=0))>=0))return s=f[e+8>>2],void y(o[f[f[s>>2]+12>>2]](s,t,n,i,r,f[e+12>>2],f[e+16>>2],f[e+4>>2],f[e+20>>2],f[e+24>>2]));e:{if((0|(l=f[e+16>>2]))>=1)for(m=f[e+12>>2];;){if(p=f[(d=m+(c<<2)|0)>>2],(0|(_=f[f[p+28>>2]+208>>2]))<=-1&&(_=f[f[p+32>>2]+208>>2]),(0|s)==(0|_))break e;if(!((0|(c=c+1|0))<(0|l)))break}d=0}if(p=0,(0|c)<(0|l))for(v=f[e+12>>2];m=f[v+(c<<2)>>2],(0|(_=f[f[m+28>>2]+208>>2]))<=-1&&(_=f[f[m+32>>2]+208>>2]),p=((0|s)==(0|_))+p|0,(0|l)!=(0|(c=c+1|0)););if(c=f[e+4>>2],f[c+80>>2]<2)s=f[e+8>>2],y(o[f[f[s>>2]+12>>2]](s,t,n,i,r,d,p,c,f[e+20>>2],f[e+24>>2]));else{if(!((0|n)<1))for(s=f[e+36>>2],c=f[e+32>>2];;){if(v=(u<<2)+t|0,(0|s)==(0|c))if((0|s)>=(0|(_=s?s<<1:1)))c=s;else{if(c=0,l=0,_&&(f[6257]=f[6257]+1,l=0|o[f[4968]](_<<2,16),s=f[e+32>>2]),(0|s)>=1)for(;f[(m=c<<2)+l>>2]=f[f[e+40>>2]+m>>2],(0|(c=c+1|0))!=(0|s););(c=f[e+40>>2])&&(h[e+44|0]&&(c&&(f[6258]=f[6258]+1,o[f[4969]](c)),s=f[e+32>>2]),f[e+40>>2]=0),c=s,f[e+40>>2]=l,a[e+44|0]=1,f[e+36>>2]=_,s=_}if(f[f[e+40>>2]+(c<<2)>>2]=f[v>>2],c=c+1|0,f[e+32>>2]=c,(0|(u=u+1|0))==(0|n))break}if((0|r)>=1)for(s=f[e+56>>2],c=f[e+52>>2],u=0;;){if(_=(u<<2)+i|0,(0|s)==(0|c))if((0|s)>=(0|(t=s?s<<1:1)))c=s;else{if(c=0,l=0,t&&(f[6257]=f[6257]+1,l=0|o[f[4968]](t<<2,16),s=f[e+52>>2]),(0|s)>=1)for(;f[(n=c<<2)+l>>2]=f[n+f[e+60>>2]>>2],(0|(c=c+1|0))!=(0|s););(n=f[e+60>>2])&&(h[e+64|0]&&(n&&(f[6258]=f[6258]+1,o[f[4969]](n)),s=f[e+52>>2]),f[e+60>>2]=0),c=s,f[e+60>>2]=l,a[e+64|0]=1,f[e+56>>2]=t,s=t}if(f[f[e+60>>2]+(c<<2)>>2]=f[_>>2],c=c+1|0,f[e+52>>2]=c,(0|(u=u+1|0))==(0|r))break}if(p)for(s=f[e+76>>2],c=f[e+72>>2],u=0;;){if(i=(u<<2)+d|0,(0|s)==(0|c))if((0|s)>=(0|(t=s?s<<1:1)))c=s;else{if(c=0,l=0,t&&(f[6257]=f[6257]+1,l=0|o[f[4968]](t<<2,16),s=f[e+72>>2]),(0|s)>=1)for(;f[(n=c<<2)+l>>2]=f[n+f[e+80>>2]>>2],(0|(c=c+1|0))!=(0|s););(n=f[e+80>>2])&&(h[e+84|0]&&(n&&(f[6258]=f[6258]+1,o[f[4969]](n)),s=f[e+72>>2]),f[e+80>>2]=0),c=s,f[e+80>>2]=l,a[e+84|0]=1,f[e+76>>2]=t,s=t}if(f[f[e+80>>2]+(c<<2)>>2]=f[i>>2],c=c+1|0,f[e+72>>2]=c,(0|p)==(0|(u=u+1|0)))break}else c=f[e+72>>2];(f[e+52>>2]+c|0)>f[f[e+4>>2]+80>>2]&&Nt(e)}},o[103]=rc,o[104]=function(e,t){e|=0;var n,i,a=0;return n=f[(t|=0)>>2],i=f[e+84>>2],!(f[t+8>>2]&f[e+8>>2])|!(f[e+12>>2]&f[t+4>>2])|(0|n)==(0|i)||(e=f[e+96>>2],a=0|o[f[f[e>>2]+28>>2]](e,i,n)),0|a},o[105]=function(e,t,n){e|=0,t|=0,n|=0;var i=0,o=y(0),a=y(0),r=y(0),s=0,c=y(0),l=y(0),_=y(0),u=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0);return o=y(1),(0|(i=f[t>>2]))==f[e+84>>2]|4&h[i+204|0]|y(y(y(y(d[e+32>>2]-d[e+16>>2])*d[t+8>>2])+y(y(d[e+36>>2]-d[e+20>>2])*d[t+12>>2]))+y(y(d[e+40>>2]-d[e+24>>2])*d[t+16>>2]))>=y(-d[e+88>>2])||(s=f[t+40>>2],f[e+80>>2]=i,f[e+4>>2]=s,n?(i=f[4+(n=t+8|0)>>2],f[e+48>>2]=f[n>>2],f[e+52>>2]=i,i=f[n+12>>2],f[e+56>>2]=f[n+8>>2],f[e+60>>2]=i):(c=d[i+12>>2],l=d[i+8>>2],_=d[i+28>>2],u=d[i+20>>2],p=d[i+24>>2],m=d[i+44>>2],v=d[i+36>>2],g=d[i+40>>2],A=d[i+4>>2],o=d[t+16>>2],a=d[t+8>>2],r=d[t+12>>2],f[e+60>>2]=0,d[e+56>>2]=y(y(a*v)+y(r*g))+y(o*m),d[e+52>>2]=y(y(a*u)+y(r*p))+y(o*_),d[e+48>>2]=y(y(A*a)+y(l*r))+y(c*o)),n=f[t+28>>2],f[e+64>>2]=f[t+24>>2],f[e+68>>2]=n,n=f[t+36>>2],f[e+72>>2]=f[t+32>>2],f[e+76>>2]=n,o=d[t+40>>2]),y(o)},o[106]=Us,o[107]=Es,o[108]=fc,o[109]=function(e,t,n,i,o){o=y(o)},o[110]=function(e,t){t|=0;var n=0,i=0,o=0;Ie(e|=0,f[e+28>>2]+4|0,f[e+32>>2]+4|0),f[t>>2]=0,f[t+4>>2]=0;e:{t:{n:if(!((n=f[e+956>>2])>>>0>4))switch(i=2,n-1|0){case 3:break t;case 0:case 1:case 2:break n;default:break e}i=1}f[t>>2]=i,n=i}h[e+792|0]&&(n=n+1|0,f[t>>2]=n),h[e+798|0]&&(n=n+1|0,f[t>>2]=n),o=t;e:{t:{n:if(!((i=f[e+960>>2])>>>0>4)){i:switch(i-1|0){case 0:case 1:case 2:break n;case 3:break i;default:break e}n=n+2|0;break t}n=n+1|0}f[o>>2]=n}h[e+793|0]&&(n=n+1|0,f[t>>2]=n),h[e+799|0]&&(n=n+1|0,f[t>>2]=n),o=t;e:{t:{n:if(!((i=f[e+964>>2])>>>0>4)){i:switch(i-1|0){case 0:case 1:case 2:break n;case 3:break i;default:break e}n=n+2|0;break t}n=n+1|0}f[o>>2]=n}h[e+794|0]&&(n=n+1|0,f[t>>2]=n),h[e+800|0]&&(f[t>>2]=n+1),Rt(e,0);e:{t:{n:if(!((i=f[e+1052>>2])>>>0>4))switch(n=2,i-1|0){case 3:break t;case 0:case 1:case 2:break n;default:break e}n=1}f[t>>2]=f[t>>2]+n}h[e+996|0]&&(f[t>>2]=f[t>>2]+1),h[e+1016|0]&&(f[t>>2]=f[t>>2]+1),Rt(e,1);e:{t:{n:if(!((i=f[e+1140>>2])>>>0>4))switch(n=2,i-1|0){case 3:break t;case 0:case 1:case 2:break n;default:break e}n=1}f[t>>2]=f[t>>2]+n}h[e+1084|0]&&(f[t>>2]=f[t>>2]+1),h[e+1104|0]&&(f[t>>2]=f[t>>2]+1),n=2,Rt(e,2);e:{t:{n:if(!((i=f[e+1228>>2])>>>0>4))switch(i-1|0){case 3:break t;case 0:case 1:case 2:break n;default:break e}n=1}f[t>>2]=f[t>>2]+n}h[e+1172|0]&&(f[t>>2]=f[t>>2]+1),h[e+1192|0]&&(f[t>>2]=f[t>>2]+1)},o[111]=function(e,t){var n,i,o,r,s,c;!function(e,t,n,i,o,r,s,c,l){var _,u,p,m=0,v=0,y=0,A=0,x=0,b=0,C=0,S=0;for(R=_=R-112|0,f[_+100>>2]=0,f[_+104>>2]=0,f[_+108>>2]=0,f[_+92>>2]=0,f[_+96>>2]=0,a[_+88|0]=0,f[_+84>>2]=0,a[_+80|0]=0,f[_+76>>2]=0,a[_+72|0]=0,f[_+68>>2]=0,a[_+64|0]=0,f[_+56>>2]=0,f[_+60>>2]=1036831949,a[_+52|0]=0,f[_+48>>2]=0,f[_+40>>2]=0,f[_+44>>2]=1063675494,f[_+32>>2]=0,f[_+36>>2]=1045220557,f[_+24>>2]=1065353216,f[_+28>>2]=-1082130432,u=t+4|0,p=e+680|0;;){if(A=h[112+(y=x+p|0)|0],(S=f[276+(m=(C=x<<2)+p|0)>>2])||(v=A,A=1,v||(A=0,h[798+(e+x|0)|0]))){v=f[m+32>>2],f[_+108>>2]=S,f[_+32>>2]=v,f[_+104>>2]=f[m+260>>2],f[_+96>>2]=f[m+228>>2],v=f[m+244>>2],a[_+52|0]=A,f[_+100>>2]=v,a[_+64|0]=h[y+115|0],f[_+68>>2]=f[m+124>>2],a[_+72|0]=h[y+118|0],f[_+76>>2]=f[m+140>>2],a[_+80|0]=h[y+156|0],f[_+84>>2]=f[m+160>>2],a[_+88|0]=h[y+176|0],f[_+92>>2]=f[m+180>>2],f[_+28>>2]=f[m+16>>2],f[_+24>>2]=f[m>>2],f[_+60>>2]=f[m+212>>2],f[_+56>>2]=f[m+196>>2],v=e+C|0,f[_+8>>2]=f[v+1236>>2],f[_+12>>2]=f[v+1252>>2],A=f[v+1268>>2],f[_+20>>2]=0,f[_+16>>2]=A,A=_,y=v+744|0,1&(m=f[e+1456>>2]>>C)||(y=f[t+32>>2]),f[A+40>>2]=f[y>>2],f[_+36>>2]=f[(2&m?v+728|0:u)>>2],f[_+48>>2]=f[(4&m?v+776|0:f[t+32>>2])>>2],f[_+44>>2]=f[(8&m?v+760|0:u)>>2],A=1,y=((x+2&255)>>>0)%3|0,v=g(((x+1&255)>>>0)%3|0,88)+e|0;e:if((m=f[v+1052>>2]+-1|0)>>>0<=3){t:switch(m-2|0){case 0:A=(b=+d[v+1040>>2])<-.001|b>.001;break e;case 1:break t;default:break e}if(+d[v+1040>>2]<-.001)break e;A=+d[v+1044>>2]>.001}else A=0;m=1,v=g(y,88)+e|0;e:if(!((y=f[v+1052>>2]+-1|0)>>>0>3)){t:{n:switch(y-2|0){case 0:if((b=+d[v+1040>>2])<-.001|b>.001)break t;break e;case 1:break n;default:break t}if(!(+d[v+1040>>2]<-.001||+d[v+1044>>2]>.001))break e}m=0}n=te(e,_+24|0,i,o,r,s,c,l,t,n,_+8|0,0,A?m:1)+n|0}if(3==(0|(x=x+1|0)))break}R=_+112|0}(n=e|=0,i=t|=0,function(e,t,n,i,o,a,r,s){var c,l=0,_=0,u=0,p=0,m=0,d=0,v=0;if(R=c=R-32|0,f[c+24>>2]=f[825],l=f[824],f[c+16>>2]=f[823],f[c+20>>2]=l,(l=f[e+1232>>2])>>>0<=5){e:{t:{switch(l-1|0){default:f[c+16>>2]=0,u=2,_=0;break t;case 0:f[c+16>>2]=0,u=1,l=2;break e;case 1:_=1,f[c+16>>2]=1,u=2,l=0;break e;case 2:_=1,f[c+16>>2]=1,l=2;break e;case 3:_=2,f[c+16>>2]=2,u=1,l=0;break e;case 4:}f[c+16>>2]=2,_=2}l=1}f[c+24>>2]=u,f[c+20>>2]=l}for(u=0;l=g(_,88)+e|0,(h[l+1016|0]||f[l+1052>>2]|h[l+996|0])&&(v=f[4+(m=1388+(p=(_<<4)+e|0)|0)>>2],f[c+8>>2]=f[m>>2],f[c+12>>2]=v,m=f[4+(p=p+1380|0)>>2],f[c>>2]=f[p>>2],f[c+4>>2]=m,1&(_=f[e+1456>>2]>>12+(_<<2))||(f[l+984>>2]=f[f[t+32>>2]>>2]),2&_||(f[l+980>>2]=f[t+4>>2]),4&_||(f[l+992>>2]=f[f[t+32>>2]>>2]),8&_||(f[l+988>>2]=f[t+4>>2]),d=te(e,l+968|0,n,i,o,a,r,s,t,d,c,1,0)+d|0),3!=(0|(u=u+1|0));)_=f[(c+16|0)+(u<<2)>>2];return R=c+32|0,d}(n,i,o=(t=f[e+28>>2])+4|0,r=(e=f[e+32>>2])+4|0,s=t+372|0,c=e+372|0,t=t+388|0,e=e+388|0),o,r,s,c,t,e)},o[112]=Fs,o[113]=function(e,t,n,i){e|=0,t|=0,n=y(n);var o=0;e:{if((i|=0)>>>0<=2){if((t=t+-1|0)>>>0>3)break e;switch(t-1|0){case 0:return d[728+((t=i<<2)+e|0)>>2]=n,void(f[e+1456>>2]=f[e+1456>>2]|2<<t);case 2:return d[744+((t=i<<2)+e|0)>>2]=n,void(f[e+1456>>2]=f[e+1456>>2]|1<<t);default:return d[760+((t=i<<2)+e|0)>>2]=n,void(f[e+1456>>2]=f[e+1456>>2]|8<<t);case 1:}return d[776+((t=i<<2)+e|0)>>2]=n,void(f[e+1456>>2]=f[e+1456>>2]|4<<t)}if(!((o=i+-3|0)>>>0>2||(t=t+-1|0)>>>0>3)){switch(t-1|0){case 0:return d[980+(g(o,88)+e|0)>>2]=n,void(f[e+1456>>2]=f[e+1456>>2]|2<<(i<<2));case 2:return d[984+(g(o,88)+e|0)>>2]=n,void(f[e+1456>>2]=f[e+1456>>2]|1<<(i<<2));default:return d[988+(g(o,88)+e|0)>>2]=n,void(f[e+1456>>2]=f[e+1456>>2]|8<<(i<<2));case 1:}d[992+(g(o,88)+e|0)>>2]=n,f[e+1456>>2]=f[e+1456>>2]|4<<(i<<2)}}},o[114]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0);if(n>>>0<=2){if((t=t+-1|0)>>>0>3)return y(y(0));switch(t-1|0){case 0:return y(d[728+((n<<2)+e|0)>>2]);case 2:return y(d[744+((n<<2)+e|0)>>2]);default:return y(d[760+((n<<2)+e|0)>>2]);case 1:}return y(d[776+((n<<2)+e|0)>>2])}if(!((n=n+-3|0)>>>0>2||(t=t+-1|0)>>>0>3)){switch(t-1|0){case 0:return y(d[980+(g(n,88)+e|0)>>2]);case 2:return y(d[984+(g(n,88)+e|0)>>2]);default:return y(d[988+(g(n,88)+e|0)>>2]);case 1:}i=d[992+(g(n,88)+e|0)>>2]}return y(i)},o[115]=function(){return 644},o[116]=function(e,t,n){return un(e|=0,t|=0,n|=0),f[t+52>>2]=f[e+48>>2],f[t+56>>2]=f[e+52>>2],f[t+60>>2]=f[e+56>>2],f[t+64>>2]=f[e+60>>2],f[t+68>>2]=f[e- -64>>2],f[t+72>>2]=f[e+68>>2],f[t+76>>2]=f[e+72>>2],f[t+80>>2]=f[e+76>>2],f[t+84>>2]=f[e+80>>2],f[t+88>>2]=f[e+84>>2],f[t+92>>2]=f[e+88>>2],f[t+96>>2]=f[e+92>>2],f[t+100>>2]=f[e+96>>2],f[t+104>>2]=f[e+100>>2],f[t+108>>2]=f[e+104>>2],f[t+112>>2]=f[e+108>>2],f[t+116>>2]=f[e+112>>2],f[t+120>>2]=f[e+116>>2],f[t+124>>2]=f[e+120>>2],f[t+128>>2]=f[e+124>>2],f[t+132>>2]=f[e+128>>2],f[t+136>>2]=f[e+132>>2],f[t+140>>2]=f[e+136>>2],f[t+144>>2]=f[e+140>>2],f[t+148>>2]=f[e+144>>2],f[t+152>>2]=f[e+148>>2],f[t+156>>2]=f[e+152>>2],f[t+160>>2]=f[e+156>>2],f[t+164>>2]=f[e+160>>2],f[t+168>>2]=f[e+164>>2],f[t+172>>2]=f[e+168>>2],f[t+176>>2]=f[e+172>>2],f[t+428>>2]=f[e+968>>2],f[t+412>>2]=f[e+972>>2],f[t+444>>2]=f[e+976>>2],f[t+460>>2]=f[e+980>>2],f[t+476>>2]=f[e+984>>2],f[t+492>>2]=f[e+988>>2],f[t+508>>2]=f[e+992>>2],f[t+524>>2]=f[e+1e3>>2],f[t+540>>2]=f[e+1004>>2],f[t+556>>2]=f[e+1012>>2],f[t+572>>2]=f[e+1020>>2],f[t+588>>2]=f[e+1028>>2],f[t+604>>2]=f[e+1036>>2],f[t+432>>2]=f[e+1056>>2],f[t+416>>2]=f[e+1060>>2],f[t+448>>2]=f[e+1064>>2],f[t+464>>2]=f[e+1068>>2],f[t+480>>2]=f[e+1072>>2],f[t+496>>2]=f[e+1076>>2],f[t+512>>2]=f[e+1080>>2],f[t+528>>2]=f[e+1088>>2],f[t+544>>2]=f[e+1092>>2],f[t+560>>2]=f[e+1100>>2],f[t+576>>2]=f[e+1108>>2],f[t+592>>2]=f[e+1116>>2],f[t+608>>2]=f[e+1124>>2],f[t+436>>2]=f[e+1144>>2],f[t+420>>2]=f[e+1148>>2],f[t+452>>2]=f[e+1152>>2],f[t+468>>2]=f[e+1156>>2],f[t+484>>2]=f[e+1160>>2],f[t+500>>2]=f[e+1164>>2],f[t+516>>2]=f[e+1168>>2],f[t+532>>2]=f[e+1176>>2],f[t+548>>2]=f[e+1180>>2],f[t+564>>2]=f[e+1188>>2],f[t+580>>2]=f[e+1196>>2],f[t+596>>2]=f[e+1204>>2],n=f[e+1212>>2],f[t+440>>2]=0,f[t+612>>2]=n,f[t+616>>2]=0,f[t+600>>2]=0,f[t+584>>2]=0,f[t+568>>2]=0,f[t+552>>2]=0,f[t+536>>2]=0,f[t+520>>2]=0,f[t+504>>2]=0,f[t+488>>2]=0,f[t+472>>2]=0,f[t+456>>2]=0,f[t+424>>2]=0,a[t+620|0]=h[e+996|0],a[t+624|0]=h[e+1008|0],a[t+628|0]=h[e+1016|0],a[t+632|0]=h[e+1024|0],a[t+636|0]=h[e+1032|0],a[t+621|0]=h[e+1084|0],a[t+625|0]=h[e+1096|0],a[t+629|0]=h[e+1104|0],a[t+633|0]=h[e+1112|0],a[t+637|0]=h[e+1120|0],a[t+622|0]=h[e+1172|0],a[t+626|0]=h[e+1184|0],a[t+630|0]=h[e+1192|0],a[t+634|0]=h[e+1200|0],n=h[e+1208|0],a[t+639|0]=0,a[t+635|0]=0,a[t+631|0]=0,a[t+627|0]=0,a[t+623|0]=0,a[t+638|0]=n,f[t+196>>2]=f[e+680>>2],f[t+200>>2]=f[e+684>>2],f[t+204>>2]=f[e+688>>2],f[t+208>>2]=f[e+692>>2],f[t+180>>2]=f[e+696>>2],f[t+184>>2]=f[e+700>>2],f[t+188>>2]=f[e+704>>2],f[t+192>>2]=f[e+708>>2],f[t+212>>2]=f[e+712>>2],f[t+216>>2]=f[e+716>>2],f[t+220>>2]=f[e+720>>2],f[t+224>>2]=f[e+724>>2],f[t+228>>2]=f[e+728>>2],f[t+232>>2]=f[e+732>>2],f[t+236>>2]=f[e+736>>2],f[t+240>>2]=f[e+740>>2],f[t+244>>2]=f[e+744>>2],f[t+248>>2]=f[e+748>>2],f[t+252>>2]=f[e+752>>2],f[t+256>>2]=f[e+756>>2],f[t+260>>2]=f[e+760>>2],f[t+264>>2]=f[e+764>>2],f[t+268>>2]=f[e+768>>2],f[t+272>>2]=f[e+772>>2],f[t+276>>2]=f[e+776>>2],f[t+280>>2]=f[e+780>>2],f[t+284>>2]=f[e+784>>2],f[t+288>>2]=f[e+788>>2],f[t+292>>2]=f[e+876>>2],f[t+296>>2]=f[e+880>>2],f[t+300>>2]=f[e+884>>2],f[t+304>>2]=f[e+888>>2],f[t+308>>2]=f[e+892>>2],f[t+312>>2]=f[e+896>>2],f[t+316>>2]=f[e+900>>2],f[t+320>>2]=f[e+904>>2],f[t+324>>2]=f[e+804>>2],f[t+328>>2]=f[e+808>>2],f[t+332>>2]=f[e+812>>2],f[t+336>>2]=f[e+816>>2],f[t+340>>2]=f[e+820>>2],f[t+344>>2]=f[e+824>>2],f[t+348>>2]=f[e+828>>2],f[t+352>>2]=f[e+832>>2],f[t+356>>2]=f[e+840>>2],f[t+360>>2]=f[e+844>>2],f[t+364>>2]=f[e+848>>2],f[t+368>>2]=f[e+852>>2],f[t+372>>2]=f[e+860>>2],f[t+376>>2]=f[e+864>>2],f[t+380>>2]=f[e+868>>2],f[t+384>>2]=f[e+872>>2],a[t+388|0]=h[e+792|0],a[t+392|0]=h[e+795|0],a[t+396|0]=h[e+798|0],a[t+400|0]=h[e+836|0],a[t+404|0]=h[e+856|0],a[t+389|0]=h[e+793|0],a[t+393|0]=h[e+796|0],a[t+397|0]=h[e+799|0],a[t+401|0]=h[e+837|0],a[t+405|0]=h[e+857|0],a[t+390|0]=h[e+794|0],a[t+394|0]=h[e+797|0],a[t+398|0]=h[e+800|0],a[t+402|0]=h[e+838|0],n=h[e+858|0],a[t+407|0]=0,a[t+403|0]=0,a[t+399|0]=0,a[t+395|0]=0,a[t+391|0]=0,a[t+406|0]=n,e=f[e+1232>>2],f[t+408>>2]=0,f[t+640>>2]=e,3204},o[117]=Us,o[118]=Es,o[119]=Es,o[120]=function(e){e|=0;var t,n=0,i=0,o=y(0),a=y(0),r=y(0),s=0,c=y(0),l=y(0),_=y(0),u=0,h=y(0),p=y(0),m=y(0),v=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=0;for(R=t=R-144|0,f[e+36>>2]=0,f[t+136>>2]=0,f[t+140>>2]=0,f[t+128>>2]=0,f[t+132>>2]=0;f[(E=(t+128|0)+(u<<2)|0)>>2]=1065353216,i=f[e+28>>2],f[t+80>>2]=f[i+4>>2],f[t+84>>2]=f[i+20>>2],n=f[i+36>>2],f[t+92>>2]=0,f[t+88>>2]=n,f[t+96>>2]=f[i+8>>2],f[t+100>>2]=f[i+24>>2],n=f[i+40>>2],f[t+108>>2]=0,f[t+104>>2]=n,f[t+112>>2]=f[i+12>>2],f[t+116>>2]=f[i+28>>2],n=f[i+44>>2],f[t+124>>2]=0,f[t+120>>2]=n,n=f[e+32>>2],f[t+32>>2]=f[n+4>>2],f[t+36>>2]=f[n+20>>2],s=f[n+36>>2],f[t+44>>2]=0,f[t+40>>2]=s,f[t+48>>2]=f[n+8>>2],f[t+52>>2]=f[n+24>>2],s=f[n+40>>2],f[t+60>>2]=0,f[t+56>>2]=s,f[t+64>>2]=f[n+12>>2],f[t+68>>2]=f[n+28>>2],s=f[n+44>>2],f[t+76>>2]=0,f[t+72>>2]=s,c=d[i+52>>2],h=d[i+12>>2],p=d[i+8>>2],l=d[i+56>>2],m=d[i+28>>2],v=d[i+20>>2],A=d[i+24>>2],_=d[i+60>>2],x=d[i+44>>2],b=d[i+36>>2],C=d[i+40>>2],S=d[i+4>>2],o=d[e+308>>2],a=d[e+300>>2],r=d[e+304>>2],f[t+28>>2]=0,d[t+24>>2]=y(_+y(y(y(a*b)+y(r*C))+y(o*x)))-_,d[t+20>>2]=y(l+y(y(y(a*v)+y(r*A))+y(o*m)))-l,d[t+16>>2]=y(c+y(y(y(a*S)+y(r*p))+y(o*h)))-c,c=d[n+52>>2],h=d[n+12>>2],p=d[n+8>>2],l=d[n+56>>2],m=d[n+28>>2],v=d[n+20>>2],A=d[n+24>>2],_=d[n+60>>2],x=d[n+44>>2],b=d[n+36>>2],C=d[n+40>>2],S=d[n+4>>2],o=d[e+324>>2],a=d[e+316>>2],r=d[e+320>>2],f[t+12>>2]=0,d[t+8>>2]=y(_+y(y(y(a*b)+y(r*C))+y(o*x)))-_,d[t+4>>2]=y(l+y(y(y(a*v)+y(r*A))+y(o*m)))-l,d[t>>2]=y(c+y(y(y(a*S)+y(r*p))+y(o*h)))-c,mt(48+(g(u,84)+e|0)|0,t+80|0,t+32|0,t+16|0,t,t+128|0,i+456|0,d[i+404>>2],n+456|0,d[n+404>>2]),f[E>>2]=0,3!=(0|(u=u+1|0)););R=t+144|0},o[121]=function(e,t){t|=0,e=h[344+(e|=0)|0]?0:3,f[t+4>>2]=e,f[t>>2]=e},o[122]=function(e,t){!function(e,t,n,i){var o,a,r,s,c,l=0,_=y(0),u=y(0),h=0,p=0,m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0);p=f[t+8>>2],f[p>>2]=1065353216,a=f[t+24>>2],f[p+(s=4+(o=a<<2)|0)>>2]=1065353216,f[p+(c=8+(r=a<<3)|0)>>2]=1065353216,m=d[n+20>>2],A=d[n+24>>2],v=d[n+36>>2],_=d[e+304>>2],x=d[n+40>>2],u=d[e+308>>2],b=d[n+8>>2],C=d[n>>2],S=d[n+4>>2],E=d[n+16>>2],w=d[n+32>>2],g=d[e+300>>2],f[12+(p=R-16|0)>>2]=0,v=y(y(y(g*w)+y(_*v))+y(u*x)),d[p+8>>2]=v,m=y(y(y(g*E)+y(_*m))+y(u*A)),d[p+4>>2]=m,_=y(y(y(C*g)+y(S*_))+y(b*u)),d[p>>2]=_,l=f[t+12>>2],f[l+12>>2]=0,d[l+8>>2]=-m,d[l+4>>2]=v,f[l>>2]=0,f[12+(h=l+o|0)>>2]=0,d[h+8>>2]=_,f[h+4>>2]=0,d[h>>2]=-v,f[8+(l=l+r|0)>>2]=0,f[l+12>>2]=0,d[l+4>>2]=-_,d[l>>2]=m,l=f[t+16>>2],f[l>>2]=-1082130432,f[l+s>>2]=-1082130432,f[l+c>>2]=-1082130432,m=d[i+36>>2],A=d[i+40>>2],v=d[i+20>>2],_=d[e+320>>2],x=d[i+24>>2],u=d[e+324>>2],b=d[i+8>>2],C=d[i>>2],S=d[i+4>>2],E=d[i+32>>2],w=d[i+16>>2],g=d[e+316>>2],l=f[t+20>>2],f[l+12>>2]=0,f[l>>2]=0,v=y(y(y(g*w)+y(_*v))+y(u*x)),d[l+8>>2]=v,m=y(y(y(g*E)+y(_*m))+y(u*A)),d[l+4>>2]=-m,f[12+(h=l+o|0)>>2]=0,_=y(y(y(C*g)+y(S*_))+y(b*u)),d[h+8>>2]=-_,f[h+4>>2]=0,d[h>>2]=m,f[8+(l=l+r|0)>>2]=0,f[l+12>>2]=0,d[l+4>>2]=_,d[l>>2]=-v,l=f[t+28>>2],h=f[e+332>>2],u=y(d[(1&h?e+336|0:t+4|0)>>2]*d[t>>2]),d[l>>2]=u*y(y(y(_+d[i+48>>2])-d[p>>2])-d[n+48>>2]),d[l+o>>2]=u*y(y(y(v+d[i+52>>2])-d[p+4>>2])-d[n+52>>2]),d[l+r>>2]=u*y(y(y(m+d[i+56>>2])-d[p+8>>2])-d[n+56>>2]),n=a<<1,2&h&&(i=f[t+32>>2],f[i>>2]=f[e+340>>2],f[i+o>>2]=f[e+340>>2],f[i+(n<<2)>>2]=f[e+340>>2]),u=d[e+356>>2],g=y(-u),_=u,u>y(0)&&(d[f[t+36>>2]>>2]=g,d[f[t+40>>2]>>2]=u,_=d[e+356>>2]),_>y(0)&&(d[(i=a<<2)+f[t+36>>2]>>2]=g,d[i+f[t+40>>2]>>2]=u,_=d[e+356>>2]),_>y(0)&&(d[(n<<=2)+f[t+36>>2]>>2]=g,d[n+f[t+40>>2]>>2]=u),f[t+48>>2]=f[e+352>>2]}(e|=0,t|=0,f[e+28>>2]+4|0,f[e+32>>2]+4|0)},o[123]=function(e,t,n,i){if(e|=0,t|=0,n=y(n),-1==(0|(i|=0))&&!((t=t+-1|0)>>>0>3)){switch(t-2|0){default:return d[e+336>>2]=n,void(f[e+332>>2]=1|f[e+332>>2]);case 0:case 1:}d[e+340>>2]=n,f[e+332>>2]=2|f[e+332>>2]}},o[124]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0);if(i=y(34028234663852886e22),-1==(0|n)&&!((t=t+-1|0)>>>0>3)){switch(t-2|0){default:return y(d[e+336>>2]);case 0:case 1:}i=d[e+340>>2]}return y(i)},o[125]=Ks,o[126]=function(e,t,n){return un(e|=0,t|=0,n|=0),f[t+52>>2]=f[e+300>>2],f[t+56>>2]=f[e+304>>2],f[t+60>>2]=f[e+308>>2],f[t+64>>2]=f[e+312>>2],f[t+68>>2]=f[e+316>>2],f[t+72>>2]=f[e+320>>2],f[t+76>>2]=f[e+324>>2],f[t+80>>2]=f[e+328>>2],3448},o[127]=function(e){return f[332+(e|=0)>>2]},o[128]=function(e){e|=0,f[5208]=2244,(e=f[5347])&&(h[21392]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[5347]=0),a[21392]=1,f[5345]=0,f[5346]=0,f[5347]=0,Ao(20832)},o[129]=sc,o[130]=fc,o[131]=Zs,o[132]=un,o[133]=Es,o[134]=function(e){e|=0;var t,n=0,i=y(0),o=y(0),a=y(0),r=y(0),s=0,c=y(0),l=y(0),_=y(0),u=y(0),p=0,m=y(0),v=y(0),x=y(0),b=y(0),C=y(0),E=y(0),w=y(0),T=0,P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0);if(R=t=R-176|0,h[e+738|0]){f[e+744>>2]=0,f[e+36>>2]=0;e:if(!h[e+736|0])for(P=d[e+664>>2],p=f[e+32>>2],l=d[e+668>>2],c=d[e+672>>2],v=y(y(y(y(P*d[p+4>>2])+y(l*d[p+8>>2]))+y(c*d[p+12>>2]))+d[p+52>>2]),a=d[e+600>>2],n=f[e+28>>2],r=d[e+604>>2],i=d[e+608>>2],x=y(y(y(y(a*d[n+4>>2])+y(r*d[n+8>>2]))+y(i*d[n+12>>2]))+d[n+52>>2]),u=y(v-x),m=y(y(y(y(P*d[p+20>>2])+y(l*d[p+24>>2]))+y(c*d[p+28>>2]))+d[p+56>>2]),_=y(y(y(y(a*d[n+20>>2])+y(r*d[n+24>>2]))+y(i*d[n+28>>2]))+d[n+56>>2]),o=y(m-_),c=y(y(y(y(P*d[p+36>>2])+y(l*d[p+40>>2]))+y(c*d[p+44>>2]))+d[p+60>>2]),a=y(y(y(y(a*d[n+36>>2])+y(r*d[n+40>>2]))+y(i*d[n+44>>2]))+d[n+60>>2]),r=y(c-a),(i=y(y(y(u*u)+y(o*o))+y(r*r)))>y(1.1920928955078125e-7)?(f[t+140>>2]=0,i=y(y(1)/y(S(i))),l=y(r*i),d[t+136>>2]=l,r=y(o*i),d[t+132>>2]=r,i=y(u*i),d[t+128>>2]=i):(f[t+136>>2]=0,f[t+140>>2]=0,f[t+128>>2]=1065353216,f[t+132>>2]=0,i=y(1),r=y(0),l=y(0)),y(A(l))>y(.7071067690849304)?(o=y(y(l*l)+y(r*r)),u=y(y(1)/y(S(o))),C=y(o*u),b=y(u*y(-l)),w=y(i*b),l=y(r*u),r=y(l*y(-i)),o=y(0)):(o=y(y(i*i)+y(r*r)),u=y(y(1)/y(S(o))),w=y(o*u),o=y(u*y(-r)),r=y(l*o),b=y(i*u),C=y(b*y(-l)),l=y(0)),d[t+168>>2]=w,d[t+164>>2]=r,d[t+152>>2]=l,d[t+148>>2]=b,d[t+160>>2]=C,d[t+144>>2]=o;;){if(T=f[e+28>>2],f[t+80>>2]=f[T+4>>2],f[t+84>>2]=f[T+20>>2],n=f[T+36>>2],f[t+92>>2]=0,f[t+88>>2]=n,f[t+96>>2]=f[T+8>>2],f[t+100>>2]=f[T+24>>2],n=f[T+40>>2],f[t+108>>2]=0,f[t+104>>2]=n,f[t+112>>2]=f[T+12>>2],f[t+116>>2]=f[T+28>>2],n=f[T+44>>2],f[t+124>>2]=0,f[t+120>>2]=n,f[t+32>>2]=f[p+4>>2],f[t+36>>2]=f[p+20>>2],n=f[p+36>>2],f[t+44>>2]=0,f[t+40>>2]=n,f[t+48>>2]=f[p+8>>2],f[t+52>>2]=f[p+24>>2],n=f[p+40>>2],f[t+60>>2]=0,f[t+56>>2]=n,f[t+64>>2]=f[p+12>>2],f[t+68>>2]=f[p+28>>2],n=f[p+44>>2],f[t+76>>2]=0,f[t+72>>2]=n,o=d[T+52>>2],r=d[T+56>>2],i=d[T+60>>2],f[t+28>>2]=0,d[t+24>>2]=a-i,d[t+20>>2]=_-r,d[t+16>>2]=x-o,o=d[p+52>>2],r=d[p+56>>2],i=d[p+60>>2],f[t+12>>2]=0,d[t+8>>2]=c-i,d[t+4>>2]=m-r,d[t>>2]=v-o,mt(48+(g(s,84)+e|0)|0,t+80|0,t+32|0,t+16|0,t,(t+128|0)+(s<<4)|0,T+456|0,d[T+404>>2],p+456|0,d[p+404>>2]),3==(0|(s=s+1|0)))break e;p=f[e+32>>2]}r=d[e+576>>2],i=d[e+560>>2],O=d[e+592>>2],y(A(O))>y(.7071067690849304)?(o=y(y(O*O)+y(r*r)),a=y(y(1)/y(S(o))),b=y(o*a),C=y(a*y(-O)),w=y(C*i),I=y(a*r),o=y(I*y(-i))):(o=y(y(i*i)+y(r*r)),a=y(y(1)/y(S(o))),w=y(o*a),C=y(a*i),b=y(C*y(-O)),N=y(a*y(-r)),o=y(O*N)),s=f[e+32>>2],P=d[s+36>>2],l=d[s+20>>2],u=d[s+40>>2],v=d[s+24>>2],x=d[s+8>>2],m=d[s+44>>2],_=d[s+28>>2],c=d[s+12>>2],n=f[e+28>>2],U=d[n+44>>2],B=d[n+36>>2],k=d[n+40>>2],j=d[n+12>>2],G=d[n+8>>2],V=d[n+28>>2],H=d[n+20>>2],W=d[n+24>>2],a=d[s+4>>2],q=d[n+4>>2],f[e+344>>2]=0,f[e+328>>2]=0,f[e+308>>2]=0,f[e+312>>2]=0,f[e+300>>2]=0,f[e+304>>2]=0,D=y(y(y(N*q)+y(C*G))+y(I*j)),E=y(y(y(N*H)+y(C*W))+y(I*V)),M=y(y(y(N*B)+y(C*k))+y(I*U)),z=y(y(y(j*D)+y(V*E))+y(U*M)),d[e+324>>2]=z,C=y(y(y(D*G)+y(E*W))+y(M*k)),d[e+320>>2]=C,N=y(y(y(D*q)+y(E*H))+y(M*B)),d[e+316>>2]=N,L=_,_=y(-E),I=y(y(y(L*_)-y(D*c))-y(M*m)),d[e+340>>2]=I,E=y(y(y(v*_)-y(D*x))-y(M*u)),d[e+336>>2]=E,l=y(y(y(l*_)-y(D*a))-y(M*P)),d[e+332>>2]=l,_=d[n+460>>2],c=d[n+464>>2],a=d[n+456>>2],f[e+360>>2]=0,u=y(z*c),d[e+356>>2]=u,v=y(C*_),d[e+352>>2]=v,x=y(N*a),d[e+348>>2]=x,m=d[s+460>>2],c=d[s+464>>2],a=d[s+456>>2],f[e+376>>2]=0,_=y(I*c),d[e+372>>2]=_,c=y(E*m),d[e+368>>2]=c,a=y(l*a),d[e+364>>2]=a,d[e+380>>2]=y(y(y(N*x)+y(C*v))+y(z*u))+y(y(y(l*a)+y(E*c))+y(I*_)),F=d[n+36>>2],X=d[n+20>>2],D=d[n+40>>2],M=d[n+8>>2],z=d[n+24>>2],C=d[n+44>>2],N=d[n+12>>2],I=d[n+28>>2],E=d[s+36>>2],P=d[s+20>>2],l=d[s+40>>2],u=d[s+24>>2],v=d[s+8>>2],x=d[s+44>>2],m=d[s+28>>2],_=d[s+12>>2],c=d[n+4>>2],a=d[s+4>>2],f[e+428>>2]=0,f[e+412>>2]=0,f[e+392>>2]=0,f[e+396>>2]=0,f[e+384>>2]=0,f[e+388>>2]=0,L=m,Y=y(y(y(b*H)+y(o*W))+y(w*V)),m=y(-Y),Q=_,_=y(y(y(b*q)+y(o*G))+y(w*j)),o=y(y(y(b*B)+y(o*k))+y(w*U)),b=y(y(y(L*m)-y(Q*_))-y(x*o)),d[e+424>>2]=b,w=y(y(y(u*m)-y(_*v))-y(o*l)),d[e+420>>2]=w,E=y(y(y(P*m)-y(_*a))-y(o*E)),d[e+416>>2]=E,P=y(y(y(_*N)+y(Y*I))+y(o*C)),d[e+408>>2]=P,l=y(y(y(_*M)+y(Y*z))+y(o*D)),d[e+404>>2]=l,u=y(y(y(_*c)+y(Y*X))+y(o*F)),d[e+400>>2]=u,c=d[n+460>>2],a=d[n+464>>2],o=d[n+456>>2],f[e+444>>2]=0,v=y(P*a),d[e+440>>2]=v,x=y(l*c),d[e+436>>2]=x,m=y(u*o),d[e+432>>2]=m,_=d[s+460>>2],a=d[s+464>>2],o=d[s+456>>2],f[e+460>>2]=0,c=y(b*a),d[e+456>>2]=c,a=y(w*_),d[e+452>>2]=a,o=y(E*o),d[e+448>>2]=o,d[e+464>>2]=y(y(y(u*m)+y(l*x))+y(P*v))+y(y(y(E*o)+y(w*a))+y(b*c)),X=d[n+36>>2],D=d[n+20>>2],M=d[n+40>>2],z=d[n+8>>2],C=d[n+24>>2],N=d[n+44>>2],I=d[n+12>>2],E=d[n+28>>2],P=d[s+36>>2],l=d[s+20>>2],u=d[s+40>>2],v=d[s+24>>2],x=d[s+8>>2],m=d[s+44>>2],_=d[s+28>>2],c=d[s+12>>2],a=d[n+4>>2],o=d[s+4>>2],f[e+512>>2]=0,f[e+496>>2]=0,f[e+476>>2]=0,f[e+480>>2]=0,f[e+468>>2]=0,f[e+472>>2]=0,L=_,b=y(y(y(H*i)+y(W*r))+y(O*V)),_=y(-b),Q=c,c=y(y(y(q*i)+y(G*r))+y(O*j)),i=y(y(y(B*i)+y(k*r))+y(O*U)),w=y(y(y(L*_)-y(Q*c))-y(m*i)),d[e+508>>2]=w,F=y(y(y(v*_)-y(c*x))-y(i*u)),d[e+504>>2]=F,l=y(y(y(l*_)-y(c*o))-y(i*P)),d[e+500>>2]=l,u=y(y(y(c*I)+y(b*E))+y(i*N)),d[e+492>>2]=u,v=y(y(y(c*z)+y(b*C))+y(i*M)),d[e+488>>2]=v,x=y(y(y(c*a)+y(b*D))+y(i*X)),d[e+484>>2]=x,o=d[n+460>>2],r=d[n+464>>2],i=d[n+456>>2],f[e+528>>2]=0,m=y(u*r),d[e+524>>2]=m,_=y(v*o),d[e+520>>2]=_,c=y(x*i),d[e+516>>2]=c,a=d[s+460>>2],r=d[s+464>>2],i=d[s+456>>2],f[e+724>>2]=0,f[e+544>>2]=0,o=y(w*r),d[e+540>>2]=o,r=y(F*a),d[e+536>>2]=r,i=y(l*i),d[e+532>>2]=i,d[e+548>>2]=y(y(y(x*c)+y(v*_))+y(u*m))+y(y(y(l*i)+y(F*r))+y(w*o)),i=tn(e,n+4|0,s+4|0),d[e+728>>2]=i,li(e+688|0,i),s=e,o=d[e+560>>2],n=f[e+28>>2],r=d[e+576>>2],i=d[e+592>>2],c=y(y(y(o*d[n+4>>2])+y(r*d[n+8>>2]))+y(i*d[n+12>>2])),a=y(y(y(o*d[n+20>>2])+y(r*d[n+24>>2]))+y(i*d[n+28>>2])),i=y(y(y(o*d[n+36>>2])+y(r*d[n+40>>2]))+y(i*d[n+44>>2])),e=f[e+32>>2],d[s+720>>2]=y(1)/y(y(y(y(c*y(y(y(c*d[n+324>>2])+y(a*d[n+340>>2]))+y(i*d[n+356>>2])))+y(a*y(y(y(c*d[n+328>>2])+y(a*d[n+344>>2]))+y(i*d[n+360>>2]))))+y(i*y(y(y(c*d[n+332>>2])+y(a*d[n+348>>2]))+y(i*d[n+364>>2]))))+y(y(y(c*y(y(y(c*d[e+324>>2])+y(a*d[e+340>>2]))+y(i*d[e+356>>2])))+y(a*y(y(y(c*d[e+328>>2])+y(a*d[e+344>>2]))+y(i*d[e+360>>2]))))+y(i*y(y(y(c*d[e+332>>2])+y(a*d[e+348>>2]))+y(i*d[e+364>>2])))))}R=t+176|0},o[135]=function(e,t){e|=0,t|=0;var n=y(0);if(h[e+738|0])return f[t>>2]=0,void(f[t+4>>2]=0);f[t>>2]=5,f[t+4>>2]=1,n=tn(e,f[e+28>>2]+4|0,f[e+32>>2]+4|0),d[e+728>>2]=n,li(e+688|0,n),(h[e+737|0]||h[e+716|0])&&(f[t>>2]=f[t>>2]+1,f[t+4>>2]=f[t+4>>2]+-1)},o[136]=function(e,t){t|=0;var n,i,o=0,r=0;n=(o=f[32+(e|=0)>>2])+388|0,i=(r=f[e+28>>2])+388|0,o=o+4|0,r=r+4|0,h[e+739|0]?function(e,t,n,i,o,r){var s,c=y(0),l=y(0),_=y(0),u=y(0),p=y(0),m=y(0),v=y(0),A=y(0),x=0,b=y(0),C=y(0),E=y(0),w=y(0),T=y(0),P=0,I=y(0),N=y(0),D=0,M=0,O=y(0),z=y(0),L=y(0),F=y(0),U=0,B=0,k=y(0),j=0,G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=y(0),J=y(0),$=y(0),ee=y(0),te=y(0),ne=y(0),ie=y(0),oe=y(0),ae=y(0),re=y(0),se=y(0),ce=y(0),le=y(0),_e=y(0),ue=y(0),fe=y(0),he=y(0),pe=y(0),me=y(0),de=y(0),ve=y(0),ge=y(0);R=s=R+-64|0,c=d[e+588>>2],O=d[e+572>>2],z=d[e+556>>2],X=d[i+56>>2],Q=d[i+52>>2],b=d[e+664>>2],C=d[e+668>>2],w=d[e+672>>2],K=d[n+56>>2],Z=d[n+52>>2],T=d[e+600>>2],N=d[e+604>>2],E=d[e+608>>2],J=d[i+36>>2],$=d[i+40>>2],L=d[n+36>>2],G=d[n+40>>2],l=d[e+624>>2],k=d[i+20>>2],v=d[e+640>>2],ee=d[i+24>>2],I=d[e+656>>2],m=d[e+560>>2],V=d[n+20>>2],A=d[e+576>>2],H=d[n+24>>2],u=d[e+592>>2],D=f[t+24>>2],te=d[i+48>>2],ne=d[n+48>>2],ie=d[i+32>>2],W=d[n+32>>2],oe=d[i+8>>2],F=d[i>>2],de=d[i+4>>2],q=d[n+8>>2],ae=d[n>>2],re=d[n+4>>2],ve=d[i+16>>2],Y=d[f[e+32>>2]+404>>2],ge=d[f[e+28>>2]+404>>2],se=d[n+16>>2],f[s+60>>2]=0,p=(p=y(ge+Y))>y(0)?y(Y/p):y(.5),_=y(y(1)-p),ce=y(y(y(m*W)+y(A*L))+y(u*G)),le=y(y(y(l*ie)+y(v*J))+y(I*$)),_e=y(y(ce*p)+y(le*_)),ue=y(y(y(ae*m)+y(re*A))+y(q*u)),fe=y(y(y(F*l)+y(de*v))+y(oe*I)),he=y(y(ue*p)+y(fe*_)),pe=y(y(y(m*se)+y(A*V))+y(u*H)),me=y(y(y(l*ve)+y(v*k))+y(I*ee)),v=y(y(pe*p)+y(me*_)),I=y(y(1)/y(S(y(y(_e*_e)+y(y(he*he)+y(v*v)))))),l=y(_e*I),d[s+56>>2]=l,v=y(v*I),d[s+52>>2]=v,I=y(he*I),d[s+48>>2]=I,f[s+28>>2]=0,J=y(X+y(y(y(ie*b)+y(J*C))+y($*w))),A=y(J-X),X=y(te+y(y(y(F*b)+y(de*C))+y(oe*w))),u=y(X-te),$=y(Q+y(y(y(ve*b)+y(k*C))+y(ee*w))),C=y($-Q),w=y(y(A*l)+y(y(u*I)+y(C*v))),m=y(l*w),Q=y(K+y(y(y(W*T)+y(L*N))+y(G*E))),b=y(Q-K),K=y(ne+y(y(y(ae*T)+y(re*N))+y(q*E))),k=y(K-ne),ee=y(Z+y(y(y(se*T)+y(V*N))+y(H*E))),E=y(ee-Z),T=y(y(b*l)+y(y(k*I)+y(E*v))),N=y(l*T),A=y(A-m),Z=y(b-N),b=y(y(p*A)+y(_*Z)),d[s+24>>2]=b,te=y(v*w),ne=y(C-te),F=E,E=y(v*T),ie=y(F-E),C=y(y(p*ne)+y(_*ie)),d[s+20>>2]=C,F=u,u=y(I*w),oe=y(F-u),F=k,k=y(I*T),F=y(F-k),w=y(y(p*oe)+y(_*F)),d[s+16>>2]=w,m=y(N-m),T=y(A-y(_*m)),A=y(E-te),N=y(ne-y(_*A)),u=y(k-u),E=y(oe-y(_*u)),m=y(Z+y(p*m)),A=y(ie+y(p*A)),u=y(F+y(p*u)),i=ge<y(1.1920928955078125e-7)|Y<y(1.1920928955078125e-7),n=s,(Y=y(y(b*b)+y(y(w*w)+y(C*C))))>y(1.1920928955078125e-7)?(c=y(y(1)/y(S(Y))),b=y(b*c),d[s+24>>2]=b,C=y(C*c),d[s+20>>2]=C,c=y(w*c)):(f[s+28>>2]=0,b=y(y(y(z*W)+y(O*L))+y(c*G)),d[s+24>>2]=b,C=y(y(y(z*se)+y(O*V))+y(c*H)),d[s+20>>2]=C,c=y(y(y(ae*z)+y(re*O))+y(q*c))),d[n+16>>2]=c,f[s+12>>2]=0,O=y(y(I*C)-y(v*c)),d[s+8>>2]=O,z=y(y(l*c)-y(I*b)),d[s+4>>2]=z,w=y(y(v*b)-y(l*C)),d[s>>2]=w,d[s+40>>2]=y(u*C)-y(A*c),d[s+36>>2]=y(m*c)-y(u*b),d[s+32>>2]=y(A*b)-y(m*C),P=f[s+36>>2],n=f[t+12>>2],f[n>>2]=f[s+32>>2],f[n+4>>2]=P,f[n+8>>2]=f[s+40>>2],n=f[t+20>>2],d[n+8>>2]=-y(y(E*C)-y(N*c)),d[n+4>>2]=-y(y(T*c)-y(E*b)),d[n>>2]=-y(y(N*b)-y(T*C)),f[s+44>>2]=0,H=y(y(u*z)-y(A*w)),d[s+40>>2]=H,W=y(y(m*w)-y(u*O)),d[s+36>>2]=W,q=y(y(A*O)-y(m*z)),d[s+32>>2]=q,L=y(y(E*z)-y(N*w)),G=y(y(T*w)-y(E*O)),V=y(y(N*O)-y(T*z)),!i|!h[e+716|0]||(d[s+40>>2]=p*H,d[s+36>>2]=p*W,d[s+32>>2]=p*q,G=y(_*G),V=y(_*V),L=y(_*L)),x=f[s+36>>2],n=(P=D<<2)+f[t+12>>2]|0,f[n>>2]=f[s+32>>2],f[n+4>>2]=x,f[n+8>>2]=f[s+40>>2],n=f[t+20>>2],d[n+P>>2]=-V,d[n+((P=D+1|0)<<2)>>2]=-G,d[n+((U=D+2|0)<<2)>>2]=-L,L=y(y(u*v)-y(A*I)),d[s+40>>2]=L,f[s+44>>2]=0,u=y(y(m*I)-y(u*l)),d[s+36>>2]=u,A=y(y(A*l)-y(m*v)),d[s+32>>2]=A,m=y(y(E*v)-y(N*I)),E=y(y(T*I)-y(E*l)),T=y(y(N*l)-y(T*v)),i&&(d[s+40>>2]=p*L,d[s+36>>2]=p*u,d[s+32>>2]=p*A,m=y(_*m),E=y(_*E),T=y(_*T)),M=f[s+36>>2],n=(x=(i=D<<1)<<2)+f[t+12>>2]|0,f[n>>2]=f[s+32>>2],f[n+4>>2]=M,f[n+8>>2]=f[s+40>>2],n=f[t+20>>2],d[x+n>>2]=-T,d[((M=1|i)<<2)+n>>2]=-E,d[((j=i+2|0)<<2)+n>>2]=-m,N=d[(8&h[e+748|0]?e+756|0:t+4|0)>>2],h[e+736|0]?(m=y(-O),T=y(-z),p=y(-w),E=y(-c),P=f[t+28>>2]):(_=d[t>>2],x=f[s+20>>2],n=f[t+8>>2],f[n>>2]=f[s+16>>2],f[n+4>>2]=x,f[n+8>>2]=f[s+24>>2],B=f[s+4>>2],n=(x=D<<2)+f[t+8>>2]|0,f[n>>2]=f[s>>2],f[n+4>>2]=B,f[n+8>>2]=f[s+8>>2],B=f[s+52>>2],n=(i<<=2)+f[t+8>>2]|0,f[n>>2]=f[s+48>>2],f[n+4>>2]=B,f[n+8>>2]=f[s+56>>2],n=f[t+16>>2],E=y(-c),d[n>>2]=E,d[n+4>>2]=-C,d[n+8>>2]=-b,p=y(-w),d[n+x>>2]=p,T=y(-z),d[n+(P<<2)>>2]=T,m=y(-O),d[n+(U<<2)>>2]=m,d[n+i>>2]=-I,d[n+(M<<2)>>2]=-v,d[n+(j<<2)>>2]=-l,P=f[t+28>>2],_=y(N*_),A=y(X-K),u=y($-ee),L=y(J-Q),d[P>>2]=_*y(y(y(A*c)+y(u*C))+y(L*b)),d[x+P>>2]=_*y(y(y(A*w)+y(u*z))+y(L*O)),d[i+P>>2]=_*y(y(y(A*I)+y(u*v))+y(L*l)),n=f[t+20>>2]),i=f[t+12>>2],x=g(D,12),d[i+x>>2]=c,d[(U=x+8|0)+i>>2]=b,d[(M=x+4|0)+i>>2]=C,d[(D<<=4)+i>>2]=w,d[(j=4|D)+i>>2]=z,d[(B=8|D)+i>>2]=O,d[n+x>>2]=E,_=d[s+20>>2],d[n+M>>2]=-_,l=d[s+24>>2],d[n+U>>2]=-l,d[n+D>>2]=p,d[n+j>>2]=T,d[n+B>>2]=m,p=y(N*d[t>>2]),v=y(y(pe*le)-y(ce*me)),u=y(v*c),c=y(y(ce*fe)-y(ue*le)),u=y(u+y(_*c)),_=y(y(ue*me)-y(pe*fe)),d[x+P>>2]=p*y(u+y(l*_)),d[P+D>>2]=p*y(y(y(v*w)+y(c*z))+y(_*O));e:{if(h[e+716|0])U=(m=y(d[e+708>>2]*d[e+732>>2]))>y(0)?1:2,M=0!=h[e+737|0],D=1;else{if(!h[e+737|0])break e;m=y(0),M=1,U=0,D=0}if(p=d[s+48>>2],P=g(f[t+24>>2],5),f[(x=P<<2)+i>>2]=f[s+48>>2],c=d[s+52>>2],f[(j=x+4|0)+i>>2]=f[s+52>>2],_=d[s+56>>2],f[i+(B=x+8|0)>>2]=f[s+56>>2],d[n+j>>2]=-c,d[n+x>>2]=-p,d[n+B>>2]=-_,l=Bo(n=e+688|0),v=Uo(n),i=f[t+28>>2],f[x+i>>2]=0,n=((x=l!=v)|1^D)&M,2&(M=f[e+748>>2])&&(N=d[e+764>>2]),n&&(4&M&&(f[f[t+32>>2]+(P<<2)>>2]=f[e+752>>2]),l=ji(d[e+728>>2],l,v,d[e+680>>2],y(N*d[t>>2])),i=f[t+28>>2],d[(M=i+(n=P<<2)|0)>>2]=y(y(l*d[e+680>>2])*d[e+732>>2])+d[M>>2],d[n+f[t+36>>2]>>2]=-d[e+684>>2],f[n+f[t+40>>2]>>2]=f[e+684>>2]),D){d[(n=(n=i)+(i=P<<2)|0)>>2]=d[n>>2]+y(m*y(N*d[t>>2])),1&a[e+748|0]&&(f[i+f[t+32>>2]>>2]=f[e+760>>2]),x?(i=f[t+36>>2]+(P<<2)|0,1!=(0|U)?(f[i>>2]=-8388609,l=y(0)):(f[i>>2]=0,l=y(34028234663852886e22))):(f[f[t+36>>2]+(P<<2)>>2]=-8388609,l=y(34028234663852886e22)),d[f[t+40>>2]+(P<<2)>>2]=l;t:if((l=d[e+704>>2])>y(0))if(c=y(y(y(y(d[o>>2]*p)+y(d[o+4>>2]*c))+y(d[o+8>>2]*_))-y(y(y(d[r>>2]*p)+y(d[r+4>>2]*c))+y(d[r+8>>2]*_))),1!=(0|U))c>y(0)&&(c=y(c*y(-l)))<d[n>>2]&&(d[n>>2]=c);else{if(!(c<y(0)))break t;if(!((c=y(c*y(-l)))>d[n>>2]))break t;d[n>>2]=c}d[n>>2]=d[e+700>>2]*d[n>>2]}}R=s- -64|0}(e,t,r,o,i,n):function(e,t,n,i,o,r){var s,c,l=y(0),_=0,u=y(0),p=0,m=y(0),v=0,A=0,x=y(0),b=y(0),C=0,S=0,E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=y(0),J=y(0),$=y(0),ee=y(0),te=y(0),ne=y(0),ie=y(0),oe=y(0),ae=y(0),re=y(0),se=y(0),ce=y(0),le=y(0);P=d[e+656>>2],b=d[i+40>>2],te=y(P*b),L=d[e+624>>2],E=d[i+32>>2],F=d[e+640>>2],w=d[i+36>>2],ne=y(y(L*E)+y(F*w)),m=d[i+24>>2],ie=y(P*m),u=d[i+16>>2],l=d[i+20>>2],oe=y(y(L*u)+y(F*l)),V=d[e+592>>2],z=d[n+40>>2],ae=y(V*z),N=d[e+560>>2],T=d[n+32>>2],D=d[e+576>>2],x=d[n+36>>2],re=y(y(N*T)+y(D*x)),H=d[e+588>>2],se=y(H*z),W=d[e+556>>2],q=d[e+572>>2],M=y(y(W*T)+y(q*x)),Y=d[e+584>>2],U=y(Y*z),X=d[e+552>>2],Q=d[e+568>>2],B=y(y(X*T)+y(Q*x)),k=d[n+24>>2],ce=y(V*k),j=d[n+16>>2],G=d[n+20>>2],le=y(y(N*j)+y(D*G)),K=d[e+664>>2],Z=d[e+668>>2],I=d[e+672>>2],$=y(y(y(y(E*K)+y(w*Z))+y(b*I))+d[i+56>>2]),ee=y(y(y(y(u*K)+y(l*Z))+y(m*I))+d[i+52>>2]),J=d[e+600>>2],R=d[e+604>>2],l=y(y(T*J)+y(x*R)),x=d[e+608>>2],O=d[n+56>>2],z=y(y(l+y(z*x))+O),w=d[n+52>>2],T=y(y(y(y(j*J)+y(G*R))+y(k*x))+w),m=d[i>>2],u=d[i+4>>2],L=y(y(m*L)+y(u*F)),l=d[i+8>>2],F=y(l*P),P=d[n>>2],b=y(P*N),N=d[n+4>>2],b=y(b+y(N*D)),D=d[n+8>>2],E=y(D*V),I=y(d[i+48>>2]+y(y(y(m*K)+y(u*Z))+y(l*I))),x=y(d[n+48>>2]+y(y(y(P*J)+y(N*R))+y(D*x))),p=(c=f[t+24>>2])<<1,(v=h[e+736|0])||(_=f[t+8>>2],f[_>>2]=1065353216,f[(p=4+(c<<2)|0)+_>>2]=1065353216,f[(A=_)+(_=8+(c<<3)|0)>>2]=1065353216,C=f[t+16>>2],f[C>>2]=-1082130432,f[p+C>>2]=-1082130432,f[_+C>>2]=-1082130432,O=d[n+56>>2],w=d[n+52>>2],p=c<<1),l=d[n+48>>2],A=f[t+12>>2],f[A+12>>2]=0,m=y(z-O),d[A+4>>2]=m,f[A>>2]=0,u=y(T-w),d[A+8>>2]=-u,f[12+(n=(_=c<<2)+A|0)>>2]=0,l=y(x-l),d[n+8>>2]=l,f[n+4>>2]=0,d[n>>2]=-m,f[8+(p=(n=p<<2)+A|0)>>2]=0,f[p+12>>2]=0,d[p+4>>2]=-l,d[p>>2]=u,w=d[i+48>>2],u=d[i+56>>2],l=d[i+52>>2],s=f[t+20>>2],f[s+12>>2]=0,f[s>>2]=0,m=y(ee-l),d[s+8>>2]=m,u=y($-u),d[s+4>>2]=-u,f[12+(i=_+s|0)>>2]=0,l=y(I-w),d[i+8>>2]=-l,f[i+4>>2]=0,d[i>>2]=u,f[8+(n=n+s|0)>>2]=0,f[n+12>>2]=0,d[n+4>>2]=l,d[n>>2]=-m,O=d[(8&h[e+748|0]?e+756|0:t+4|0)>>2],R=y(O*d[t>>2]),S=f[t+28>>2],v||(d[S>>2]=R*y(I-x),d[_+S>>2]=R*y(ee-T),d[S+(c<<3)>>2]=R*y($-z)),C=g(c,12),T=y(y(y(X*P)+y(Q*N))+y(Y*D)),d[C+A>>2]=T,p=C+8|0,l=y(B+U),d[p+A>>2]=l,_=C+4|0,I=y(y(y(X*j)+y(Q*G))+y(Y*k)),d[_+A>>2]=I,v=c<<4,x=y(y(y(P*W)+y(N*q))+y(D*H)),d[v+A>>2]=x,i=4|v,U=y(y(y(W*j)+y(q*G))+y(H*k)),d[i+A>>2]=U,n=8|v,B=y(M+se),d[n+A>>2]=B,d[s+C>>2]=-T,d[p+s>>2]=-l,d[_+s>>2]=-I,d[s+v>>2]=-x,d[i+s>>2]=-U,d[n+s>>2]=-B,M=y(b+E),u=y(oe+ie),b=y(le+ce),w=y(L+F),m=y(y(M*u)-y(b*w)),P=y(l*m),l=y(ne+te),E=y(re+ae),u=y(y(b*l)-y(E*u)),l=y(y(E*w)-y(M*l)),d[S+C>>2]=y(P+y(y(T*u)+y(I*l)))*R,d[v+S>>2]=y(y(B*m)+y(y(x*u)+y(U*l)))*R;e:{if(h[e+716|0])C=1,p=0!=h[e+737|0],i=(m=y(d[e+708>>2]*d[e+732>>2]))>y(0)?1:2;else{if(!h[e+737|0])break e;C=0,m=y(0),p=1,i=0}if(S=g(c,5),d[(v=S<<2)+A>>2]=M,d[(_=v+8|0)+A>>2]=E,d[(n=v+4|0)+A>>2]=b,d[_+s>>2]=-E,d[n+s>>2]=-b,d[s+v>>2]=-M,u=Bo(n=e+688|0),l=Uo(n),n=f[t+28>>2],f[v+n>>2]=0,p&=(v=u!=l)|1^C,2&(_=f[e+748>>2])&&(O=d[e+764>>2]),p&&(4&_&&(f[f[t+32>>2]+(S<<2)>>2]=f[e+752>>2]),l=ji(d[e+728>>2],u,l,d[e+680>>2],y(O*d[t>>2])),n=f[t+28>>2],d[(_=n+(p=S<<2)|0)>>2]=y(y(l*d[e+680>>2])*d[e+732>>2])+d[_>>2],d[p+f[t+36>>2]>>2]=-d[e+684>>2],f[p+f[t+40>>2]>>2]=f[e+684>>2]),C){d[(_=(_=n)+(n=S<<2)|0)>>2]=d[_>>2]+y(m*y(O*d[t>>2])),1&a[e+748|0]&&(f[n+f[t+32>>2]>>2]=f[e+760>>2]),v?(n=f[t+36>>2]+(S<<2)|0,1!=(0|i)?(f[n>>2]=-8388609,l=y(0)):(f[n>>2]=0,l=y(34028234663852886e22))):(f[f[t+36>>2]+(S<<2)>>2]=-8388609,l=y(34028234663852886e22)),d[f[t+40>>2]+(S<<2)>>2]=l;t:if((l=d[e+704>>2])>y(0))if(u=y(y(y(y(M*d[o>>2])+y(b*d[o+4>>2]))+y(E*d[o+8>>2]))-y(y(y(M*d[r>>2])+y(b*d[r+4>>2]))+y(E*d[r+8>>2]))),1!=(0|i))u>y(0)&&(l=y(u*y(-l)))<d[_>>2]&&(d[_>>2]=l);else{if(!(u<y(0)))break t;if(!((l=y(u*y(-l)))>d[_>>2]))break t;d[_>>2]=l}d[_>>2]=d[e+700>>2]*d[_>>2]}}}(e,t,r,o,i,n)},o[137]=function(e,t,n,i){e|=0,t|=0,n=y(n);e:if(!((i=1+(i|=0)|0)>>>0>6)){switch(i-1|0){case 0:case 1:case 2:case 3:case 4:break e}if(!((t=t+-1|0)>>>0>3)){switch(t-1|0){case 0:return d[e+764>>2]=n,void(f[e+748>>2]=2|f[e+748>>2]);case 2:return d[e+760>>2]=n,void(f[e+748>>2]=1|f[e+748>>2]);case 1:return d[e+752>>2]=n,void(f[e+748>>2]=4|f[e+748>>2])}d[e+756>>2]=n,f[e+748>>2]=8|f[e+748>>2]}}},o[138]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0);e:if(!((n=n+1|0)>>>0>6)){switch(n-1|0){case 0:case 1:case 2:case 3:case 4:break e}if(!((t=t+-1|0)>>>0>3)){switch(t-1|0){case 0:return y(d[e+764>>2]);case 2:return y(d[e+760>>2]);case 1:return y(d[e+752>>2])}i=d[e+756>>2]}}return y(i)},o[139]=function(){return 220},o[140]=function(e,t,n){return un(e|=0,t|=0,n|=0),f[t+52>>2]=f[e+552>>2],f[t+56>>2]=f[e+556>>2],f[t+60>>2]=f[e+560>>2],f[t+64>>2]=f[e+564>>2],f[t+68>>2]=f[e+568>>2],f[t+72>>2]=f[e+572>>2],f[t+76>>2]=f[e+576>>2],f[t+80>>2]=f[e+580>>2],f[t+84>>2]=f[e+584>>2],f[t+88>>2]=f[e+588>>2],f[t+92>>2]=f[e+592>>2],f[t+96>>2]=f[e+596>>2],f[t+100>>2]=f[e+600>>2],f[t+104>>2]=f[e+604>>2],f[t+108>>2]=f[e+608>>2],f[t+112>>2]=f[e+612>>2],f[t+116>>2]=f[e+616>>2],f[t+120>>2]=f[e+620>>2],f[t+124>>2]=f[e+624>>2],f[t+128>>2]=f[e+628>>2],f[t+132>>2]=f[e+632>>2],f[t+136>>2]=f[e+636>>2],f[t+140>>2]=f[e+640>>2],f[t+144>>2]=f[e+644>>2],f[t+148>>2]=f[e+648>>2],f[t+152>>2]=f[e+652>>2],f[t+156>>2]=f[e+656>>2],f[t+160>>2]=f[e+660>>2],f[t+164>>2]=f[e+664>>2],f[t+168>>2]=f[e+668>>2],f[t+172>>2]=f[e+672>>2],f[t+176>>2]=f[e+676>>2],f[t+184>>2]=h[e+736|0],f[t+188>>2]=h[e+737|0],f[t+196>>2]=f[e+684>>2],f[t+192>>2]=f[e+680>>2],f[t+180>>2]=h[e+740|0],n=e+688|0,d[t+200>>2]=Bo(n),d[t+204>>2]=Uo(n),f[t+208>>2]=f[e+696>>2],f[t+212>>2]=f[e+700>>2],f[t+216>>2]=f[e+704>>2],3720},o[141]=function(e){return f[748+(e|=0)>>2]},o[142]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0);return r=d[n+100>>2],s=d[n+16>>2],c=d[n+20>>2],l=d[n+24>>2],o=d[n+108>>2],i=y(y(y(d[n+112>>2]-y(r*d[n+116>>2]))-y(y(y(y(y(s*d[e+64>>2])+y(c*d[e+68>>2]))+y(l*d[e+72>>2]))+y(y(y(d[n>>2]*d[e+80>>2])+y(d[n+4>>2]*d[e+84>>2]))+y(d[n+8>>2]*d[e+88>>2])))*o))-y(o*y(y(y(y(d[n+48>>2]*d[t+64>>2])+y(d[n+52>>2]*d[t+68>>2]))+y(d[n+56>>2]*d[t+72>>2]))+y(y(y(d[n+32>>2]*d[t+80>>2])+y(d[n+36>>2]*d[t+84>>2]))+y(d[n+40>>2]*d[t+88>>2]))))),((o=y(r+i))<(a=d[n+120>>2])||o>(a=d[n+124>>2]))&&(i=y(a-r),o=a),d[n+100>>2]=o,f[e+240>>2]&&(d[e+64>>2]=y(d[e+112>>2]*y(i*y(s*d[e+128>>2])))+d[e+64>>2],d[e+68>>2]=y(y(i*y(c*d[e+132>>2]))*d[e+116>>2])+d[e+68>>2],d[e+72>>2]=y(y(i*y(l*d[e+136>>2]))*d[e+120>>2])+d[e+72>>2],o=d[n+72>>2],a=d[n+68>>2],d[e+80>>2]=y(y(i*d[e+96>>2])*d[n+64>>2])+d[e+80>>2],r=d[e+104>>2],d[e+84>>2]=y(a*y(i*d[e+100>>2]))+d[e+84>>2],d[e+88>>2]=y(o*y(i*r))+d[e+88>>2]),f[t+240>>2]&&(o=d[n+56>>2],a=d[n+52>>2],d[t+64>>2]=y(d[t+112>>2]*y(i*y(d[n+48>>2]*d[t+128>>2])))+d[t+64>>2],d[t+68>>2]=y(y(i*y(a*d[t+132>>2]))*d[t+116>>2])+d[t+68>>2],d[t+72>>2]=y(y(i*y(o*d[t+136>>2]))*d[t+120>>2])+d[t+72>>2],o=d[n+88>>2],a=d[n+84>>2],d[t+80>>2]=y(y(i*d[t+96>>2])*d[n+80>>2])+d[t+80>>2],r=d[t+104>>2],d[t+84>>2]=y(a*y(i*d[t+100>>2]))+d[t+84>>2],d[t+88>>2]=y(o*y(i*r))+d[t+88>>2]),y(i)},o[143]=function(e,t,n){e|=0,t|=0,n|=0;var i,o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0);return o=d[n+100>>2],s=d[n+16>>2],c=d[n+20>>2],l=d[n+24>>2],a=d[n+108>>2],a=y(y(y(d[n+112>>2]-y(o*d[n+116>>2]))-y(y(y(y(y(s*d[e+64>>2])+y(c*d[e+68>>2]))+y(l*d[e+72>>2]))+y(y(y(d[n>>2]*d[e+80>>2])+y(d[n+4>>2]*d[e+84>>2]))+y(d[n+8>>2]*d[e+88>>2])))*a))-y(a*y(y(y(y(d[n+48>>2]*d[t+64>>2])+y(d[n+52>>2]*d[t+68>>2]))+y(d[n+56>>2]*d[t+72>>2]))+y(y(y(d[n+32>>2]*d[t+80>>2])+y(d[n+36>>2]*d[t+84>>2]))+y(d[n+40>>2]*d[t+88>>2]))))),i=(_=y(o+a))<(r=d[n+120>>2]),d[n+100>>2]=i?r:_,o=i?y(r-o):a,f[e+240>>2]&&(d[e+64>>2]=y(d[e+112>>2]*y(o*y(s*d[e+128>>2])))+d[e+64>>2],d[e+68>>2]=y(y(o*y(c*d[e+132>>2]))*d[e+116>>2])+d[e+68>>2],d[e+72>>2]=y(y(o*y(l*d[e+136>>2]))*d[e+120>>2])+d[e+72>>2],a=d[n+72>>2],r=d[n+68>>2],d[e+80>>2]=y(y(o*d[e+96>>2])*d[n+64>>2])+d[e+80>>2],s=d[e+104>>2],d[e+84>>2]=y(r*y(o*d[e+100>>2]))+d[e+84>>2],d[e+88>>2]=y(a*y(o*s))+d[e+88>>2]),f[t+240>>2]&&(a=d[n+56>>2],r=d[n+52>>2],d[t+64>>2]=y(d[t+112>>2]*y(o*y(d[n+48>>2]*d[t+128>>2])))+d[t+64>>2],d[t+68>>2]=y(y(o*y(r*d[t+132>>2]))*d[t+116>>2])+d[t+68>>2],d[t+72>>2]=y(y(o*y(a*d[t+136>>2]))*d[t+120>>2])+d[t+72>>2],a=d[n+88>>2],r=d[n+84>>2],d[t+80>>2]=y(y(o*d[t+96>>2])*d[n+80>>2])+d[t+80>>2],s=d[t+104>>2],d[t+84>>2]=y(r*y(o*d[t+100>>2]))+d[t+84>>2],d[t+88>>2]=y(a*y(o*s))+d[t+88>>2]),y(o)},o[144]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=0;return(o=d[n+128>>2])!=y(0)&&(f[5378]=f[5378]+1,i=d[n+96>>2],a=y(o-y(i*d[n+116>>2])),r=d[n+16>>2],s=d[n+20>>2],c=d[n+24>>2],o=d[n+108>>2],o=y(y(a-y(y(y(y(y(r*d[e+144>>2])+y(s*d[e+148>>2]))+y(c*d[e+152>>2]))+y(y(y(d[n>>2]*d[e+160>>2])+y(d[n+4>>2]*d[e+164>>2]))+y(d[n+8>>2]*d[e+168>>2])))*o))-y(o*y(y(y(y(d[n+48>>2]*d[t+144>>2])+y(d[n+52>>2]*d[t+148>>2]))+y(d[n+56>>2]*d[t+152>>2]))+y(y(y(d[n+32>>2]*d[t+160>>2])+y(d[n+36>>2]*d[t+164>>2]))+y(d[n+40>>2]*d[t+168>>2]))))),_=(l=y(i+o))<(a=d[n+120>>2]),d[n+96>>2]=_?a:l,i=_?y(a-i):o,f[e+240>>2]&&(d[e+144>>2]=y(d[e+112>>2]*y(i*y(r*d[e+128>>2])))+d[e+144>>2],d[e+148>>2]=y(y(i*y(s*d[e+132>>2]))*d[e+116>>2])+d[e+148>>2],d[e+152>>2]=y(y(i*y(c*d[e+136>>2]))*d[e+120>>2])+d[e+152>>2],o=d[n+72>>2],a=d[n+68>>2],d[e+160>>2]=y(y(i*d[e+96>>2])*d[n+64>>2])+d[e+160>>2],r=d[e+104>>2],d[e+164>>2]=y(a*y(i*d[e+100>>2]))+d[e+164>>2],d[e+168>>2]=y(o*y(i*r))+d[e+168>>2]),f[t+240>>2]&&(o=d[n+56>>2],a=d[n+52>>2],d[t+144>>2]=y(d[t+112>>2]*y(i*y(d[n+48>>2]*d[t+128>>2])))+d[t+144>>2],d[t+148>>2]=y(y(i*y(a*d[t+132>>2]))*d[t+116>>2])+d[t+148>>2],d[t+152>>2]=y(y(i*y(o*d[t+136>>2]))*d[t+120>>2])+d[t+152>>2],o=d[n+88>>2],a=d[n+84>>2],d[t+160>>2]=y(y(i*d[t+96>>2])*d[n+80>>2])+d[t+160>>2],r=d[t+104>>2],d[t+164>>2]=y(a*y(i*d[t+100>>2]))+d[t+164>>2],d[t+168>>2]=y(o*y(i*r))+d[t+168>>2])),y(i)},o[145]=nt,o[146]=function(e){(e=nt(e|=0))&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[147]=Xs,o[148]=function(e,t,n,i,a,r,s,c,l,_){return e|=0,t|=0,n|=0,i|=0,a|=0,r|=0,s|=0,c|=0,l|=0,_|=0,R=_=R-16|0,o[f[4966]](3871),y(o[f[f[e>>2]+44>>2]](e,t,n,i,a,r,s,c,l)),y(o[f[f[e>>2]+48>>2]](e,t,n,i,a,r,s,c,l)),y(o[f[f[e>>2]+36>>2]](e,t,n,c)),o[f[4967]](),R=_+16|0,y(y(0))},o[149]=Xs,o[150]=function(e){f[232+(e|=0)>>2]=0},o[151]=nc,o[152]=function(e,t,n,i){e|=0,t|=0,i|=0;var o=0;if((0|(n|=0))>=1)for(;z(e,f[(o<<2)+t>>2],i),(0|(o=o+1|0))!=(0|n););},o[153]=function(e,t,n,i,a,r,s,c){e|=0,t|=0,n|=0,i|=0,a|=0,r|=0,c|=0;var l=y(0),_=y(0);e:if(!(!f[c+52>>2]|f[c+20>>2]<1))for(t=0;;){if(l=y(0),n=0,(0|(a=f[e+28>>2]))>=1)for(;_=l,r=f[e+16>>2],i=f[e+36>>2]+g(f[f[e+116>>2]+(n<<2)>>2],152)|0,l=y(o[f[e+220>>2]](r+g(f[i+144>>2],244)|0,g(f[i+148>>2],244)+r|0,i)),l=y(_+y(l*l)),(0|a)!=(0|(n=n+1|0)););if(l<=d[c+92>>2])break e;if((0|t)>=((n=f[c+20>>2])+-1|0))break e;if(!((0|(t=t+1|0))<(0|n)))break}},o[154]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var r=0,s=y(0),c=y(0),l=0,_=0,u=0,p=y(0),m=y(0),v=y(0),x=y(0),b=0,C=0;if(4&(t=f[i+72>>2])&&!((0|(l=f[e+28>>2]))<1))for(_=16&t,u=f[e+76>>2],b=f[e+36>>2],n=0;t=b+g(n,152)|0,r=f[t+132>>2],f[r+132>>2]=f[t+100>>2],t=u+g(f[t+140>>2],152)|0,f[r+136>>2]=f[t+100>>2],_&&(f[r+140>>2]=f[t+252>>2]),(0|l)!=(0|(n=n+1|0)););if((0|(b=f[e+48>>2]))>=1)for(C=f[e+56>>2],r=0;n=g(r,152)+C|0,l=f[n+132>>2],(t=f[l+44>>2])&&(_=f[l+28>>2],p=d[_+416>>2],m=d[n+24>>2],v=d[_+412>>2],x=d[n+20>>2],s=d[n+100>>2],c=y(y(1)/d[i+12>>2]),d[t>>2]=d[t>>2]+y(y(y(d[n+16>>2]*s)*d[_+408>>2])*c),d[t+4>>2]=y(y(v*y(s*x))*c)+d[t+4>>2],d[t+8>>2]=y(y(p*y(s*m))*c)+d[t+8>>2],u=f[l+32>>2],p=d[u+416>>2],m=d[n+56>>2],v=d[u+412>>2],x=d[n+52>>2],s=d[n+100>>2],c=y(y(1)/d[i+12>>2]),d[t+32>>2]=d[t+32>>2]+y(y(y(d[n+48>>2]*s)*d[u+408>>2])*c),d[t+36>>2]=y(y(v*y(s*x))*c)+d[t+36>>2],d[t+40>>2]=y(y(p*y(s*m))*c)+d[t+40>>2],p=d[_+612>>2],m=d[n+8>>2],v=d[_+608>>2],x=d[n+4>>2],s=d[n+100>>2],c=y(y(1)/d[i+12>>2]),d[t+16>>2]=d[t+16>>2]+y(y(y(d[n>>2]*d[_+604>>2])*s)*c),d[t+20>>2]=y(y(s*y(x*v))*c)+d[t+20>>2],d[t+24>>2]=y(y(s*y(m*p))*c)+d[t+24>>2],p=d[u+612>>2],m=d[n+40>>2],v=d[u+608>>2],x=d[n+36>>2],s=d[n+100>>2],c=y(y(1)/d[i+12>>2]),d[t+48>>2]=d[t+48>>2]+y(y(y(d[n+32>>2]*d[u+604>>2])*s)*c),d[t+52>>2]=y(y(s*y(x*v))*c)+d[t+52>>2],d[t+56>>2]=y(y(s*y(m*p))*c)+d[t+56>>2]),s=d[n+100>>2],d[l+36>>2]=s,y(A(s))>=d[l+16>>2]&&(a[l+20|0]=0),(0|b)!=(0|(r=r+1|0)););if((0|(r=f[e+8>>2]))>=1)for(_=f[e+16>>2],u=0;l=g(u,244),(n=f[240+(t=l+_|0)>>2])&&(f[i+52>>2]?(Ht(t,d[i+12>>2],d[i+60>>2]),_=f[e+16>>2],s=d[176+(t=l+_|0)>>2],n=f[t+240>>2],c=d[t+184>>2],p=d[t+180>>2]):(s=y(d[t+64>>2]+d[t+176>>2]),d[t+176>>2]=s,d[t+192>>2]=d[t+80>>2]+d[t+192>>2],p=y(d[t+68>>2]+d[t+180>>2]),d[t+180>>2]=p,c=y(d[t+72>>2]+d[t+184>>2]),d[t+184>>2]=c,d[t+196>>2]=d[t+84>>2]+d[t+196>>2],d[t+200>>2]=d[t+88>>2]+d[t+200>>2]),m=d[212+(t=l+_|0)>>2],v=d[t+216>>2],x=d[t+208>>2],f[n+384>>2]=0,d[n+372>>2]=s+x,f[n+304>>2]=f[n+304>>2]+1,d[n+380>>2]=c+v,d[n+376>>2]=p+m,t=l+f[e+16>>2]|0,s=d[t+228>>2],c=d[t+196>>2],p=d[t+232>>2],m=d[t+200>>2],v=d[t+224>>2],x=d[t+192>>2],t=f[t+240>>2],f[t+400>>2]=0,d[t+388>>2]=x+v,d[t+396>>2]=m+p,d[t+392>>2]=c+s,f[t+304>>2]=f[t+304>>2]+1,f[i+52>>2]&&(n=l+f[e+16>>2]|0,t=f[n+240>>2],f[t+304>>2]=f[t+304>>2]+1,r=f[n+12>>2],f[t+12>>2]=f[n+8>>2],f[t+16>>2]=r,r=f[n+4>>2],f[t+4>>2]=f[n>>2],f[t+8>>2]=r,r=f[n+28>>2],f[t+28>>2]=f[n+24>>2],f[t+32>>2]=r,r=f[n+20>>2],f[t+20>>2]=f[n+16>>2],f[t+24>>2]=r,r=f[n+36>>2],f[t+36>>2]=f[n+32>>2],f[t+40>>2]=r,r=f[n+44>>2],f[t+44>>2]=f[n+40>>2],f[t+48>>2]=r,r=f[n+60>>2],f[t+60>>2]=f[n+56>>2],f[t+64>>2]=r,r=f[n+52>>2],f[t+52>>2]=f[n+48>>2],f[t+56>>2]=r),_=f[e+16>>2],f[f[240+(l+_|0)>>2]+212>>2]=-1,r=f[e+8>>2]),(0|(u=u+1|0))<(0|r););return f[e+28>>2]>-1|f[e+32>>2]>-1||((t=f[e+36>>2])&&(h[e+40|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+36>>2]=0),f[e+32>>2]=0,f[e+36>>2]=0,a[e+40|0]=1),f[e+28>>2]=0,f[e+48>>2]>-1|f[e+52>>2]>-1||((t=f[e+56>>2])&&(h[e+60|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+56>>2]=0),f[e+52>>2]=0,f[e+56>>2]=0,a[e+60|0]=1),f[e+48>>2]=0,f[e+68>>2]>-1|f[e+72>>2]>-1||((t=f[e+76>>2])&&(h[e+80|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+76>>2]=0),f[e+72>>2]=0,f[e+76>>2]=0,a[e+80|0]=1),f[e+68>>2]=0,f[e+88>>2]>-1|f[e+92>>2]>-1||((t=f[e+96>>2])&&(h[e+100|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+96>>2]=0),f[e+92>>2]=0,f[e+96>>2]=0,a[e+100|0]=1),f[e+88>>2]=0,f[e+8>>2]>-1|f[e+12>>2]>-1||((t=f[e+16>>2])&&(h[e+20|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+16>>2]=0),f[e+12>>2]=0,f[e+16>>2]=0,a[e+20|0]=1),f[e+8>>2]=0,y(y(0))},o[155]=function(e,t,n,i,r,s,c,l,_,u){e|=0,t|=0,n|=0,i|=0,r|=0,s|=0,c|=0,l|=0,_|=0,u|=0;var p=0,m=y(0),v=y(0),A=0,x=0,b=0,C=y(0),S=0,E=0;if(1&a[_+72|0]){if(u=f[e+68>>2],x=f[e+28>>2],(0|(A=f[e+48>>2]))>=1){if(s=g(f[e+232>>2],1664525)+1013904223|0,1!=(0|A)&&(n=2,r=f[e+136>>2],i=f[r+4>>2],p=(s=g(s,1664525)+1013904223|0)^s>>>16,p^=p>>>8,p^=p>>>4,p=r+((1&((p^=p>>>2)>>>1^p))<<2)|0,f[r+4>>2]=f[p>>2],f[p>>2]=i,2!=(0|A)))for(;n=(i=n)+1|0,E=f[(p=r+(i<<2)|0)>>2],S=p,p=s=g(s,1664525)+1013904223|0,i>>>0>65535||(p=b=s>>>16^s,i>>>0>255||(p=b^=b>>>8,i>>>0>15||(p=b^=b>>>4,i>>>0>3||(p=b^b>>>2)))),i=((p>>>0)%(n>>>0)<<2)+r|0,f[S>>2]=f[i>>2],f[i>>2]=E,(0|n)!=(0|A););f[e+232>>2]=s}if(!(f[_+20>>2]<=(0|t))){if((0|x)>=1){if(s=g(f[e+232>>2],1664525)+1013904223|0,1!=(0|x)&&(n=2,r=f[e+116>>2],i=f[r+4>>2],p=(s=g(s,1664525)+1013904223|0)^s>>>16,p^=p>>>8,p^=p>>>4,p=r+((1&((p^=p>>>2)>>>1^p))<<2)|0,f[r+4>>2]=f[p>>2],f[p>>2]=i,2!=(0|x)))for(;n=(i=n)+1|0,b=f[(p=r+(i<<2)|0)>>2],S=p,p=s=g(s,1664525)+1013904223|0,i>>>0>65535||(p=A=s>>>16^s,i>>>0>255||(p=A^=A>>>8,i>>>0>15||(p=A^=A>>>4,i>>>0>3||(p=A^A>>>2)))),i=((p>>>0)%(n>>>0)<<2)+r|0,f[S>>2]=f[i>>2],f[i>>2]=b,(0|n)!=(0|x););f[e+232>>2]=s}if(!((0|u)<1)){if(s=g(f[e+232>>2],1664525)+1013904223|0,1!=(0|u)&&(n=2,r=f[e+156>>2],i=f[r+4>>2],p=(s=g(s,1664525)+1013904223|0)^s>>>16,p^=p>>>8,p^=p>>>4,p=r+((1&((p^=p>>>2)>>>1^p))<<2)|0,f[r+4>>2]=f[p>>2],f[p>>2]=i,2!=(0|u)))for(;n=(i=n)+1|0,A=f[(p=r+(i<<2)|0)>>2],b=p,p=s=g(s,1664525)+1013904223|0,i>>>0>65535||(p=x=s>>>16^s,i>>>0>255||(p=x^=x>>>8,i>>>0>15||(p=x^=x>>>4,i>>>0>3||(p=x^x>>>2)))),i=((p>>>0)%(n>>>0)<<2)+r|0,f[b>>2]=f[i>>2],f[i>>2]=A,(0|n)!=(0|u););f[e+232>>2]=s}}}if((0|(r=f[e+48>>2]))>=1)for(n=0;i=f[e+56>>2]+g(f[f[e+136>>2]+(n<<2)>>2],152)|0,f[i+136>>2]>(0|t)&&(v=m,r=f[e+16>>2],m=y(o[f[e+212>>2]](r+g(f[i+144>>2],244)|0,r+g(f[i+148>>2],244)|0,i)),m=y(v+y(m*m)),r=f[e+48>>2]),(0|(n=n+1|0))<(0|r););if(!(f[_+20>>2]<=(0|t))){if((0|l)>=1)for(n=0;i=f[(t=(n<<2)+c|0)>>2],h[i+20|0]&&(i=dt(e,f[i+28>>2],d[_+12>>2]),r=dt(e,f[f[t>>2]+32>>2],d[_+12>>2]),t=f[t>>2],s=g(i,244),i=f[e+16>>2],o[f[f[t>>2]+24>>2]](t,s+i|0,i+g(r,244)|0,d[_+12>>2])),(0|l)!=(0|(n=n+1|0)););i=f[e+28>>2];e:if(512&(t=f[_+72>>2])){if(!((0|i)<1))for(s=16&t?2:1,n=0;v=m,r=f[e+16>>2],t=f[e+36>>2]+g(f[f[e+116>>2]+(n<<2)>>2],152)|0,m=y(o[f[e+216>>2]](r+g(f[t+144>>2],244)|0,r+g(f[t+148>>2],244)|0,t)),m=y(v+y(m*m)),r=g(n,s)<<2,(c=(v=d[t+100>>2])>y(0)^1)||(t=f[e+76>>2]+g(f[r+f[e+156>>2]>>2],152)|0,C=d[t+104>>2],d[t+124>>2]=v*C,d[t+120>>2]=v*y(-C),C=m,l=f[e+16>>2],m=y(o[f[e+212>>2]](l+g(f[t+144>>2],244)|0,l+g(f[t+148>>2],244)|0,t)),m=y(C+y(m*m))),c|!(16&h[_+72|0])||(t=f[e+76>>2]+g(f[4+(r+f[e+156>>2]|0)>>2],152)|0,C=d[t+104>>2],d[t+124>>2]=v*C,d[t+120>>2]=v*y(-C),v=m,r=f[e+16>>2],m=y(o[f[e+212>>2]](r+g(f[t+144>>2],244)|0,r+g(f[t+148>>2],244)|0,t)),m=y(v+y(m*m))),(0|i)!=(0|(n=n+1|0)););}else{if((0|i)>=1)for(n=0;v=m,r=f[e+16>>2],t=f[e+36>>2]+g(f[f[e+116>>2]+(n<<2)>>2],152)|0,m=y(o[f[e+216>>2]](r+g(f[t+144>>2],244)|0,r+g(f[t+148>>2],244)|0,t)),m=y(v+y(m*m)),(0|i)!=(0|(n=n+1|0)););if((0|(i=f[e+68>>2]))<1)break e;for(t=0;n=f[e+76>>2]+g(f[f[e+156>>2]+(t<<2)>>2],152)|0,(v=d[100+(f[e+36>>2]+g(f[n+140>>2],152)|0)>>2])>y(0)&&(C=d[n+104>>2],d[n+124>>2]=v*C,d[n+120>>2]=v*y(-C),v=m,r=f[e+16>>2],m=y(o[f[e+212>>2]](r+g(f[n+144>>2],244)|0,r+g(f[n+148>>2],244)|0,n)),m=y(v+y(m*m))),(0|i)!=(0|(t=t+1|0)););}if(!((0|(i=f[e+88>>2]))<1))for(t=0;n=f[e+96>>2]+g(t,152)|0,(v=d[100+(f[e+36>>2]+g(f[n+140>>2],152)|0)>>2])>y(0)&&(C=v,v=d[n+104>>2],v=(C=y(C*v))>v?v:C,d[n+124>>2]=v,d[n+120>>2]=-v,v=m,r=f[e+16>>2],m=y(o[f[e+212>>2]](r+g(f[n+144>>2],244)|0,r+g(f[n+148>>2],244)|0,n)),m=y(v+y(m*m))),(0|i)!=(0|(t=t+1|0)););}return y(m)},o[156]=function(e,t,n,i,r,s,c,l,_){e|=0,t|=0,n|=0,i|=0,r|=0,s|=0,c|=0,l|=0,_|=0;var u=0,p=0,m=0,v=0,x=y(0),b=0,C=0,S=y(0),E=y(0),w=0,T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=0,U=y(0),B=y(0),k=y(0),j=y(0),G=0,V=y(0),H=y(0),W=0,q=0,Y=0,X=0,Q=y(0),K=y(0),Z=y(0),J=y(0),$=y(0),ee=y(0),te=y(0),ne=y(0),ie=y(0),oe=y(0),ae=y(0),re=y(0),se=y(0),ce=y(0),le=y(0),_e=y(0),ue=y(0),fe=y(0),he=y(0),pe=y(0);if(R=C=R-256|0,f[e+188>>2]=-1,o[f[4966]](3808),(0|(_=f[l+72>>2]))!=f[e+224>>2]&&(f[e+224>>2]=_,f[e+220>>2]=144,f[e+216>>2]=143,f[e+212>>2]=142),_=0,f[e+184>>2]=0,(0|n)>0)for(;f[f[(_<<2)+t>>2]+212>>2]=-1,(0|(_=_+1|0))!=(0|n););if((0|(m=f[e+12>>2]))<=(0|n)){if(_=0,(m=n+1|0)&&(f[6257]=f[6257]+1,_=0|o[f[4968]](g(m,244),16)),(0|(w=f[e+8>>2]))>=1)for(;p=(u=g(v,244))+_|0,u=u+f[e+16>>2]|0,F=f[u+4>>2],f[p>>2]=f[u>>2],f[p+4>>2]=F,b=f[u+12>>2],f[p+8>>2]=f[u+8>>2],f[p+12>>2]=b,b=f[u+28>>2],f[p+24>>2]=f[u+24>>2],f[p+28>>2]=b,b=f[u+20>>2],f[p+16>>2]=f[u+16>>2],f[p+20>>2]=b,b=f[u+44>>2],f[p+40>>2]=f[u+40>>2],f[p+44>>2]=b,b=f[u+36>>2],f[p+32>>2]=f[u+32>>2],f[p+36>>2]=b,b=f[u+52>>2],f[p+48>>2]=f[u+48>>2],f[p+52>>2]=b,b=f[u+60>>2],f[p+56>>2]=f[u+56>>2],f[p+60>>2]=b,It(p- -64|0,u- -64|0,180),(0|w)!=(0|(v=v+1|0)););(u=f[e+16>>2])&&(h[e+20|0]&&u&&(f[6258]=f[6258]+1,o[f[4969]](u)),f[e+16>>2]=0),f[e+16>>2]=_,f[e+12>>2]=m,a[e+20|0]=1}if(p=dn(C,0,244),(0|(_=f[e+8>>2]))<=-1)for((0|m)<=-1&&((u=f[e+16>>2])&&(h[e+20|0]&&u&&(f[6258]=f[6258]+1,o[f[4969]](u)),f[e+16>>2]=0),f[e+12>>2]=0,f[e+16>>2]=0,a[e+20|0]=1),v=p- -64|0;m=f[p+4>>2],u=f[e+16>>2]+g(_,244)|0,f[u>>2]=f[p>>2],f[u+4>>2]=m,m=f[p+12>>2],f[u+8>>2]=f[p+8>>2],f[u+12>>2]=m,m=f[p+28>>2],f[u+24>>2]=f[p+24>>2],f[u+28>>2]=m,m=f[p+20>>2],f[u+16>>2]=f[p+16>>2],f[u+20>>2]=m,m=f[p+44>>2],f[u+40>>2]=f[p+40>>2],f[u+44>>2]=m,m=f[p+36>>2],f[u+32>>2]=f[p+32>>2],f[u+36>>2]=m,m=f[p+52>>2],f[u+48>>2]=f[p+48>>2],f[u+52>>2]=m,m=f[p+60>>2],f[u+56>>2]=f[p+56>>2],f[u+60>>2]=m,It(u- -64|0,v,180),m=(u=_+1|0)>>>0>=_>>>0,_=u,m;);if(f[e+8>>2]=0,(0|n)>=1)for(_=0;m=dt(e,f[(u=(_<<2)+t|0)>>2],d[l+12>>2]),!(v=f[u>>2])|!(2&f[v+252>>2])|d[v+404>>2]==y(0)||(C=f[e+16>>2],2&(u=f[v+564>>2])&&(Lt(p,v,d[l+84>>2]),T=d[v+364>>2],P=d[v+332>>2],z=d[v+348>>2],M=d[v+360>>2],D=d[v+328>>2],O=d[v+344>>2],u=C+g(m,244)|0,x=d[p>>2],S=d[p+4>>2],I=d[p+8>>2],E=d[l+12>>2],d[u+224>>2]=d[u+224>>2]-y(y(y(y(x*d[v+324>>2])+y(S*d[v+340>>2]))+y(I*d[v+356>>2]))*E),d[u+228>>2]=d[u+228>>2]-y(E*y(y(y(x*D)+y(S*O))+y(I*M))),d[u+232>>2]=d[u+232>>2]-y(E*y(y(y(x*P)+y(S*z))+y(I*T))),u=f[v+564>>2]),4&u&&(ke(p,v,d[l+12>>2]),x=d[p+8>>2],S=d[p+4>>2],u=C+g(m,244)|0,d[u+224>>2]=d[p>>2]+d[u+224>>2],d[u+228>>2]=S+d[u+228>>2],d[u+232>>2]=x+d[u+232>>2],u=f[v+564>>2]),8&u&&(Be(p,v,d[l+12>>2]),x=d[p+8>>2],S=d[p+4>>2],u=C+g(m,244)|0,d[u+224>>2]=d[p>>2]+d[u+224>>2],d[u+228>>2]=S+d[u+228>>2],d[u+232>>2]=x+d[u+232>>2])),(0|(_=_+1|0))!=(0|n););if(_=0,(0|c)>0)for(;t=f[(_<<2)+s>>2],o[f[f[t>>2]+8>>2]](t),f[t+36>>2]=0,(0|(_=_+1|0))!=(0|c););if(!((0|(n=f[e+168>>2]))>=(0|c)|f[e+172>>2]>=(0|c))){if(c?(f[6257]=f[6257]+1,t=0|o[f[4968]](c<<3,16),n=f[e+168>>2]):t=0,(0|n)>=1)for(_=0;v=(u=_<<3)+t|0,u=u+f[e+176>>2]|0,m=f[u+4>>2],f[v>>2]=f[u>>2],f[v+4>>2]=m,(0|(_=_+1|0))!=(0|n););(n=f[e+176>>2])&&(h[e+180|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+176>>2]=0),f[e+176>>2]=t,f[e+172>>2]=c,a[e+180|0]=1}if(f[e+168>>2]=c,t=0,(0|c)>=1)for(_=0;v=f[e+176>>2],n=f[(m=(_<<2)+s|0)>>2],(u=f[n+44>>2])&&(f[u>>2]=0,f[u+4>>2]=0,f[u+56>>2]=0,f[u+60>>2]=0,f[u+48>>2]=0,f[u+52>>2]=0,f[u+40>>2]=0,f[u+44>>2]=0,f[u+32>>2]=0,f[u+36>>2]=0,f[u+24>>2]=0,f[u+28>>2]=0,f[u+16>>2]=0,f[u+20>>2]=0,f[u+8>>2]=0,f[u+12>>2]=0,n=f[m>>2]),u=v+(_<<3)|0,h[n+20|0]?(o[f[f[n>>2]+16>>2]](n,u),n=f[u>>2]):(f[u>>2]=0,f[u+4>>2]=0,n=0),t=n+t|0,(0|(_=_+1|0))!=(0|c););if(!((0|(n=f[e+48>>2]))>=(0|t)|f[e+52>>2]>=(0|t))){if(t?(f[6257]=f[6257]+1,v=0|o[f[4968]](g(t,152),16),n=f[e+48>>2]):v=0,(0|n)>=1)for(_=0;It((u=g(_,152))+v|0,u+f[e+56>>2]|0,152),(0|(_=_+1|0))!=(0|n););(n=f[e+56>>2])&&(h[e+60|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+56>>2]=0),f[e+56>>2]=v,f[e+52>>2]=t,a[e+60|0]=1}if(f[e+48>>2]=t,(0|c)>=1)for(_=f[e+176>>2];;){if(f[(F=(q=G<<3)+_|0)>>2]){if(b=f[(W=(G<<2)+s|0)>>2],n=f[b+32>>2],t=f[e+56>>2],m=dt(e,_=f[b+28>>2],d[l+12>>2]),w=dt(e,n,d[l+12>>2]),Y=f[e+16>>2],(0|(C=(0|(u=f[b+24>>2]))>0?u:f[l+20>>2]))>f[e+184>>2]&&(f[e+184>>2]=C),v=t+g(X,152)|0,t=0,f[F>>2]>=1)for(;u=dn(v+g(t,152)|0,0,152),f[u+120>>2]=-8388609,f[u+124>>2]=2139095039,f[u+148>>2]=w,f[u+144>>2]=m,f[u+96>>2]=0,f[u+100>>2]=0,f[u+136>>2]=C,(0|(t=t+1|0))<f[F>>2];);if(C=Y+g(m,244)|0,f[(t=C)+64>>2]=0,f[t+68>>2]=0,f[t+144>>2]=0,f[t+148>>2]=0,f[t+88>>2]=0,f[t+92>>2]=0,f[t+80>>2]=0,f[t+84>>2]=0,f[t+72>>2]=0,f[t+76>>2]=0,f[t+152>>2]=0,f[t+156>>2]=0,f[t+160>>2]=0,f[t+164>>2]=0,f[t+168>>2]=0,f[t+172>>2]=0,w=Y+g(w,244)|0,f[(t=w)+88>>2]=0,f[t+92>>2]=0,f[t+80>>2]=0,f[t+84>>2]=0,f[t+72>>2]=0,f[t+76>>2]=0,f[t+64>>2]=0,f[t+68>>2]=0,f[t+144>>2]=0,f[t+148>>2]=0,f[t+152>>2]=0,f[t+156>>2]=0,f[t+160>>2]=0,f[t+164>>2]=0,f[t+168>>2]=0,f[t+172>>2]=0,d[p>>2]=y(1)/d[l+12>>2],t=f[l+32>>2],f[p+28>>2]=v+112,f[p+24>>2]=38,f[p+20>>2]=v+32,f[p+16>>2]=v+48,f[p+12>>2]=v,f[p+8>>2]=v+16,f[p+4>>2]=t,f[v+116>>2]=f[l+40>>2],t=f[l+4>>2],f[p+40>>2]=v+124,f[p+36>>2]=v+120,f[p+32>>2]=v+116,f[p+48>>2]=t,f[p+44>>2]=f[l+20>>2],t=f[W>>2],o[f[f[t>>2]+20>>2]](t,p),f[F>>2]>=1)for(u=0;t=v+g(u,152)|0,x=d[f[W>>2]+16>>2],d[t+124>>2]>=x&&(d[t+124>>2]=x),x=y(-x),d[t+120>>2]<=x&&(d[t+120>>2]=x),f[t+132>>2]=b,m=f[b+28>>2],E=d[m+328>>2],T=d[m+332>>2],P=d[m+608>>2],z=d[m+348>>2],M=d[m+340>>2],D=d[m+344>>2],x=d[m+612>>2],I=d[m+364>>2],S=d[m+356>>2],O=d[m+360>>2],U=d[m+604>>2],N=d[m+324>>2],f[t+76>>2]=0,L=x,x=d[t>>2],B=y(S*x),S=d[t+4>>2],k=I,I=d[t+8>>2],d[t+72>>2]=L*y(y(B+y(O*S))+y(k*I)),d[t+68>>2]=P*y(y(y(x*M)+y(S*D))+y(I*z)),d[t+64>>2]=U*y(y(y(N*x)+y(E*S))+y(T*I)),m=f[b+32>>2],z=d[m+328>>2],M=d[m+332>>2],D=d[m+608>>2],O=d[m+348>>2],U=d[m+340>>2],N=d[m+344>>2],E=d[m+612>>2],P=d[m+364>>2],T=d[m+356>>2],B=d[m+360>>2],j=d[m+604>>2],V=d[m+324>>2],f[t+92>>2]=0,L=E,E=d[t+32>>2],H=y(T*E),T=d[t+36>>2],k=P,P=d[t+40>>2],d[t+88>>2]=L*y(y(H+y(B*T))+y(k*P)),d[t+84>>2]=D*y(y(y(E*U)+y(T*N))+y(P*O)),d[t+80>>2]=j*y(y(y(V*E)+y(z*T))+y(M*P)),z=y(0),M=d[t+16>>2],D=d[_+404>>2],O=d[t+20>>2],U=d[t+24>>2],L=y(y(y(y(M*y(M*D))+y(O*y(D*O)))+y(U*y(D*U)))+y(y(y(x*y(y(y(x*d[_+324>>2])+y(S*d[_+328>>2]))+y(I*d[_+332>>2])))+y(S*y(y(y(x*d[_+340>>2])+y(S*d[_+344>>2]))+y(I*d[_+348>>2]))))+y(I*y(y(y(x*d[_+356>>2])+y(S*d[_+360>>2]))+y(I*d[_+364>>2]))))),D=d[t+48>>2],N=d[n+404>>2],B=d[t+52>>2],j=d[t+56>>2],N=y(y(L+y(y(y(D*y(D*N))+y(B*y(N*B)))+y(j*y(N*j))))+y(y(y(E*y(y(y(E*d[n+324>>2])+y(T*d[n+328>>2]))+y(P*d[n+332>>2])))+y(T*y(y(y(E*d[n+340>>2])+y(T*d[n+344>>2]))+y(P*d[n+348>>2]))))+y(P*y(y(y(E*d[n+356>>2])+y(T*d[n+360>>2]))+y(P*d[n+364>>2]))))),N=y(A(N))>y(1.1920928955078125e-7)?y(y(1)/N):y(0),d[t+108>>2]=N,V=y(0),L=y(0),k=y(0),H=y(0),Q=y(0),K=y(0),f[C+240>>2]&&(K=d[C+232>>2],Q=d[C+228>>2],H=d[C+224>>2],L=d[C+212>>2],k=d[C+208>>2],V=d[C+216>>2]),Z=y(0),J=y(0),$=y(0),ee=y(0),te=y(0),f[w+240>>2]&&(te=d[w+232>>2],ee=d[w+228>>2],$=d[w+224>>2],Z=d[w+212>>2],J=d[w+208>>2],z=d[w+216>>2]),ne=d[_+380>>2],ie=d[_+372>>2],oe=d[_+376>>2],ae=d[_+396>>2],re=d[_+388>>2],se=d[_+392>>2],ce=d[n+380>>2],le=d[n+372>>2],_e=d[n+376>>2],ue=d[n+396>>2],fe=d[n+388>>2],he=d[n+392>>2],pe=d[p+48>>2],f[t+100>>2]=0,d[t+112>>2]=y(N*d[t+112>>2])+y(N*y(y(0)-y(pe*y(y(y(y(y(M*y(k+ie))+y(O*y(L+oe)))+y(U*y(V+ne)))+y(y(y(x*y(H+re))+y(S*y(Q+se)))+y(I*y(K+ae))))+y(y(y(y(D*y(J+le))+y(B*y(Z+_e)))+y(j*y(z+ce)))+y(y(y(E*y($+fe))+y(T*y(ee+he)))+y(P*y(te+ue)))))))),(0|(u=u+1|0))<f[F>>2];);_=f[e+176>>2]}if(X=f[_+q>>2]+X|0,(0|(G=G+1|0))==(0|c))break}if(o[f[f[e>>2]+28>>2]](e,i,r,l),i=f[e+68>>2],n=f[e+28>>2],!((0|(u=f[e+128>>2]))>=(0|(r=f[e+48>>2]))|f[e+132>>2]>=(0|r))){_=0,t=0,r&&(f[6257]=f[6257]+1,t=0|o[f[4968]](r<<2,16),u=f[e+128>>2]),s=f[e+136>>2];e:{t:{if((0|u)>=1)for(;;)if(f[(c=_<<2)+t>>2]=f[s+c>>2],(0|u)==(0|(_=_+1|0)))break t;if(!s)break e}h[e+140|0]&&s&&(f[6258]=f[6258]+1,o[f[4969]](s)),f[e+136>>2]=0}f[e+136>>2]=t,f[e+132>>2]=r,a[e+140|0]=1}if(f[e+128>>2]=r,16&h[l+72|0]){if(!((0|(u=f[e+108>>2]))>=(0|(c=n<<1))|f[e+112>>2]>=(0|c))){_=0,t=0,n&&(f[6257]=f[6257]+1,t=0|o[f[4968]](n<<3,16),u=f[e+108>>2]),s=f[e+116>>2];e:{t:{if((0|u)>=1)for(;;)if(f[(l=_<<2)+t>>2]=f[s+l>>2],(0|u)==(0|(_=_+1|0)))break t;if(!s)break e}h[e+120|0]&&s&&(f[6258]=f[6258]+1,o[f[4969]](s)),f[e+116>>2]=0}f[e+116>>2]=t,f[e+112>>2]=c,a[e+120|0]=1}f[e+108>>2]=c}else{if(!((0|(u=f[e+108>>2]))>=(0|n)|f[e+112>>2]>=(0|n))){_=0,t=0,n&&(f[6257]=f[6257]+1,t=0|o[f[4968]](n<<2,16),u=f[e+108>>2]),s=f[e+116>>2];e:{t:{if((0|u)>=1)for(;;)if(f[(c=_<<2)+t>>2]=f[s+c>>2],(0|u)==(0|(_=_+1|0)))break t;if(!s)break e}h[e+120|0]&&s&&(f[6258]=f[6258]+1,o[f[4969]](s)),f[e+116>>2]=0}f[e+116>>2]=t,f[e+112>>2]=n,a[e+120|0]=1}f[e+108>>2]=n}if(!((0|(u=f[e+148>>2]))>=(0|i)|f[e+152>>2]>=(0|i))){_=0,t=0,i&&(f[6257]=f[6257]+1,t=0|o[f[4968]](i<<2,16),u=f[e+148>>2]),s=f[e+156>>2];e:{t:{if((0|u)>=1)for(;;)if(f[(c=_<<2)+t>>2]=f[s+c>>2],(0|u)==(0|(_=_+1|0)))break t;if(!s)break e}h[e+160|0]&&s&&(f[6258]=f[6258]+1,o[f[4969]](s)),f[e+156>>2]=0}f[e+156>>2]=t,f[e+152>>2]=i,a[e+160|0]=1}if(f[e+148>>2]=i,(0|r)>=1)for(t=f[e+136>>2],_=0;f[t+(_<<2)>>2]=_,(0|r)!=(0|(_=_+1|0)););if((0|n)>=1)for(t=f[e+116>>2],_=0;f[t+(_<<2)>>2]=_,(0|n)!=(0|(_=_+1|0)););if((0|i)>=1)for(e=f[e+156>>2],_=0;f[e+(_<<2)>>2]=_,(0|i)!=(0|(_=_+1|0)););return o[f[4967]](),R=p+256|0,y(y(0))},o[157]=function(e,t,n,i,a,r,s,c,l){e|=0,t|=0,n|=0,i|=0,a|=0,r|=0,s|=0,c|=0,l|=0;var _,u=0,h=0,p=y(0),m=0;R=_=R-16|0,o[f[4966]](3837),o[f[f[e>>2]+32>>2]](e,t,n,i,a,r,s,c,l);e:if(!((0|(h=(0|(u=f[e+184>>2]))>(0|(h=f[c+20>>2]))?u:h))<1))for(m=h+-1|0,u=0;;){if(p=y(o[f[f[e>>2]+40>>2]](e,u,t,n,i,a,r,s,c,l)),d[e+228>>2]=p,(0|u)>=(0|m)|p<=d[c+92>>2])break e;if(!((0|(u=u+1|0))<(0|h)))break}return o[f[4967]](),R=_+16|0,y(y(0))},o[158]=Ao,o[159]=function(e){var t;f[(e|=0)>>2]=3972,(t=f[e+296>>2])&&(h[e+300|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+296>>2]=0),f[e+296>>2]=0,f[e+288>>2]=0,f[e+292>>2]=0,a[e+300|0]=1,e&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[160]=function(){return 264},o[161]=Ve,o[162]=function(e,t){var n,i,a=0,r=0,s=0,c=0;r=t|=0,s=0|o[f[f[(e|=0)>>2]+16>>2]](e),c=1,a=f[f[t>>2]+16>>2],i=0|o[a](0|r,0|s,0|c),c=t,s=i,r=0|o[f[f[e>>2]+20>>2]](e,f[i+8>>2],t),n=e,a=f[f[t>>2]+20>>2],o[a](0|c,0|s,0|r,1245859651,0|n)},o[163]=function(e,t,n){e|=0,t|=0,n|=0;var i,a,r,s=0,c=y(0);R=i=R-96|0,a=f[f[e>>2]>>2],r=f[f[e+4>>2]>>2],o[f[f[t>>2]+24>>2]](t,a,r)&&(s=f[a+192>>2],f[i+88>>2]=-1,f[i+92>>2]=-1,f[i+84>>2]=a+4,f[i+80>>2]=a,f[i+76>>2]=s,f[i+72>>2]=0,s=f[r+192>>2],f[i+64>>2]=-1,f[i+68>>2]=-1,f[i+60>>2]=r+4,f[i+56>>2]=r,f[i+52>>2]=s,f[i+48>>2]=0,(f[e+8>>2]||(t=0|o[f[f[t>>2]+8>>2]](t,i+72|0,i+48|0,0,1),f[e+8>>2]=t,t))&&(f[32+(t=i+8|0)>>2]=0,f[t+12>>2]=i+48,f[t+8>>2]=i+72,f[t+4>>2]=0,f[t>>2]=7172,e=f[e+8>>2],1!=f[n+8>>2]?(c=y(o[f[f[e>>2]+12>>2]](e,a,r,n,t)),d[n+12>>2]>c&&(d[n+12>>2]=c)):o[f[f[e>>2]+8>>2]](e,i+72|0,i+48|0,n,t))),R=i+96|0},o[164]=function(e){var t;return f[(e|=0)>>2]=4064,(t=f[e+20>>2])&&(h[e+24|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+20>>2]=0),f[e+20>>2]=0,f[e+12>>2]=0,f[e+16>>2]=0,a[e+24|0]=1,0|e},o[165]=function(e){var t;f[(e|=0)>>2]=4064,(t=f[e+20>>2])&&(h[e+24|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+20>>2]=0),f[e+20>>2]=0,f[e+12>>2]=0,f[e+16>>2]=0,a[e+24|0]=1,ce(e)},o[166]=function(e,t,n,i,a){var r,s;return e|=0,t|=0,n|=0,i|=0,a|=0,R=r=R-16|0,f[r+12>>2]=i,f[r+8>>2]=e,i=f[f[n+4>>2]+4>>2],s=f[f[t+4>>2]+4>>2],1!=(0|a)?(e=f[5260+((g(s,144)+e|0)+(i<<2)|0)>>2],e=0|o[f[f[e>>2]+8>>2]](e,r+8|0,t,n)):(e=f[76+((g(s,144)+e|0)+(i<<2)|0)>>2],e=0|o[f[f[e>>2]+8>>2]](e,r+8|0,t,n)),R=r+16|0,0|e},o[167]=function(e,t,n){e|=0,t|=0,n|=0;var i,r=0,s=0,c=y(0),l=y(0),_=0,u=0;R=i=R-16|0,f[5383]=f[5383]+1,2&f[e+4>>2]?(s=f[t+192>>2],c=y(o[f[f[s>>2]+20>>2]](s,d[4962])),d[i+12>>2]=c,s=f[n+192>>2],l=y(o[f[f[s>>2]+20>>2]](s,d[4962])),d[i+8>>2]=l,s=c<l?i+12|0:i+8|0):s=19848,_=f[s>>2],c=d[n+184>>2],l=d[t+184>>2],r=f[e+72>>2];e:{if(s=f[r+12>>2])f[r+12>>2]=f[s>>2],f[r+8>>2]=f[r+8>>2]+-1;else{if(s=0,4&h[e+4|0])break e;f[6257]=f[6257]+1,s=0|o[f[4968]](868,16)}if(f[s>>2]=1025,f[s+168>>2]=0,f[(r=s)+160>>2]=0,f[r+164>>2]=0,f[r+152>>2]=0,f[r+156>>2]=0,f[r+144>>2]=0,f[r+148>>2]=0,f[r+136>>2]=0,f[r+140>>2]=0,f[r+128>>2]=0,f[r+132>>2]=0,f[r+120>>2]=0,f[r+124>>2]=0,f[r+328>>2]=0,f[r+332>>2]=0,f[r+336>>2]=0,f[r+340>>2]=0,f[r+344>>2]=0,f[r+348>>2]=0,f[r+352>>2]=0,f[r+356>>2]=0,f[r+360>>2]=0,f[r+364>>2]=0,f[r+368>>2]=0,f[r+372>>2]=0,f[r+376>>2]=0,f[r+536>>2]=0,f[r+540>>2]=0,f[r+544>>2]=0,f[r+548>>2]=0,f[r+552>>2]=0,f[r+556>>2]=0,f[r+560>>2]=0,f[r+564>>2]=0,f[r+568>>2]=0,f[r+572>>2]=0,f[r+576>>2]=0,f[r+580>>2]=0,f[r+584>>2]=0,f[r+792>>2]=0,f[r+784>>2]=0,f[r+788>>2]=0,f[r+776>>2]=0,f[r+780>>2]=0,f[r+768>>2]=0,f[r+772>>2]=0,f[r+760>>2]=0,f[r+764>>2]=0,f[r+752>>2]=0,f[r+756>>2]=0,f[r+744>>2]=0,f[r+748>>2]=0,f[r+836>>2]=t,f[r+840>>2]=n,f[r+844>>2]=0,f[r+848>>2]=_,d[r+852>>2]=l<c?l:c,n=f[e+12>>2],f[r+864>>2]=n,f[e+16>>2]==(0|n)&&!((0|n)>=(0|(u=n?n<<1:1)))){if(u?(f[6257]=f[6257]+1,_=0|o[f[4968]](u<<2,16),n=f[e+12>>2]):_=0,(0|n)>=1)for(t=0;f[(r=t<<2)+_>>2]=f[f[e+20>>2]+r>>2],(0|n)!=(0|(t=t+1|0)););(t=f[e+20>>2])&&(h[e+24|0]&&(t&&(f[6258]=f[6258]+1,o[f[4969]](t)),n=f[e+12>>2]),f[e+20>>2]=0),f[e+20>>2]=_,f[e+16>>2]=u,a[e+24|0]=1}f[f[e+20>>2]+(n<<2)>>2]=s,f[e+12>>2]=n+1}return R=i+16|0,0|s},o[168]=function(e,t){e|=0,t|=0;var n,i,a,r,s,c=0,l=0;if(f[5383]=f[5383]+-1,o[f[f[e>>2]+20>>2]](e,t),n=(c=f[t+864>>2])<<2,i=f[e+20>>2],r=f[(l=n+i|0)>>2],s=l,a=(l=f[e+12>>2]+-1|0)<<2,f[s>>2]=f[i+a>>2],f[f[e+20>>2]+a>>2]=r,f[f[f[e+20>>2]+n>>2]+864>>2]=c,f[e+12>>2]=l,t&&(e=f[e+72>>2],!((c=f[e+16>>2])>>>0>t>>>0|c+g(f[e>>2],f[e+4>>2])>>>0<=t>>>0)))return f[t>>2]=f[e+12>>2],f[e+12>>2]=t,void(f[e+8>>2]=f[e+8>>2]+1);t&&(f[6258]=f[6258]+1,o[f[4969]](t))},o[169]=function(e,t){e|=0;var n=0,i=0,a=0,r=0;if(R=e=R-16|0,(0|(n=f[844+(t|=0)>>2]))>=1)for(;n=g(i,208)+t|0,(a=f[n+120>>2])&&(r=f[5379])&&(o[r](a),f[n+120>>2]=0),(0|(i=i+1|0))<(0|(n=f[t+844>>2])););n&&(n=f[5382])&&(f[e+12>>2]=t,o[n](e+12|0)),f[t+844>>2]=0,R=e+16|0},o[170]=function(e,t,n){e|=0,n|=0;var i=0;e:{t:if(!((e=f[220+(t|=0)>>2]+-2|0)>>>0>3)){switch(e-1|0){case 0:case 1:break t}if(!((i=f[n+220>>2]+-2|0)>>>0>3))switch(e=0,i-1|0){case 0:case 1:break t;default:break e}}if(!f[t+280>>2]||o[f[f[t>>2]+12>>2]](t,n)){if(e=1,!f[n+280>>2])break e;if(o[f[f[n>>2]+12>>2]](n,t))break e}e=0}return 0|e},o[171]=function(e,t,n){if(e|=0,n|=0,e=0,!(4&(t=f[204+(t|=0)>>2])||4&(n=f[n+204>>2]))){if(!(3&t))return 1;e=!(3&n)}return 0|e},o[172]=function(e,t,n,i){var a;e|=0,t|=0,n|=0,i|=0,R=a=R-16|0,f[a+8>>2]=e,f[a+4>>2]=n,f[a>>2]=4172,o[f[f[t>>2]+48>>2]](t,a,i),R=a+16|0},o[173]=function(e){return f[12+(e|=0)>>2]},o[174]=function(e,t){return t|=0,f[f[20+(e|=0)>>2]+(t<<2)>>2]},o[175]=function(e){return f[12+(e|=0)>>2]?f[e+20>>2]:0},o[176]=Vs,o[177]=Vs,o[178]=function(e,t){var n;return t|=0,e=f[68+(e|=0)>>2],(n=f[e+12>>2])?(f[e+12>>2]=f[n>>2],f[e+8>>2]=f[e+8>>2]+-1,0|n):(f[6257]=f[6257]+1,0|o[f[4968]](t,16))},o[179]=function(e,t){e|=0;var n=0;if((t|=0)&&(e=f[e+68>>2],!((n=f[e+16>>2])>>>0>t>>>0|g(f[e>>2],f[e+4>>2])+n>>>0<=t>>>0)))return f[t>>2]=f[e+12>>2],f[e+12>>2]=t,void(f[e+8>>2]=f[e+8>>2]+1);t&&(f[6258]=f[6258]+1,o[f[4969]](t))},o[180]=Qs,o[181]=rc,o[182]=function(e,t){var n;return n=t|=0,t=f[8+(e|=0)>>2],o[f[t+64>>2]](n,t,f[e+4>>2]),0},o[183]=ae,o[184]=function(e,t,n){e|=0,t|=0,n|=0;var i,a=y(0),r=y(0),s=y(0),c=0,l=y(0),_=y(0),u=y(0),h=y(0);R=i=R-32|0,c=f[n+12>>2],f[i+24>>2]=f[n+8>>2],f[i+28>>2]=c,c=f[n+4>>2],f[i+16>>2]=f[n>>2],f[i+20>>2]=c,a=d[i+16>>2],s=d[i+20>>2],r=d[i+24>>2],y(y(y(a*a)+y(s*s))+y(r*r))<y(14210854715202004e-30)&&(f[i+24>>2]=-1082130432,f[i+28>>2]=0,f[i+16>>2]=-1082130432,f[i+20>>2]=-1082130432,r=y(-1),s=y(-1),a=y(-1)),l=r,r=y(y(1)/y(S(y(y(y(a*a)+y(s*s))+y(r*r))))),d[i+24>>2]=l*r,d[i+20>>2]=s*r,d[i+16>>2]=a*r,ae(i,t,i+16|0);e:{t:if(!((n=f[t+4>>2])>>>0>13)){switch(n-2|0){case 6:a=y(d[t+32>>2]*d[t+16>>2]);break e;case 0:case 1:case 4:case 5:case 7:case 10:break t}a=d[t+48>>2];break e}a=y(o[f[f[t>>2]+48>>2]](t))}s=d[i>>2],r=d[i+16>>2],l=d[i+4>>2],_=d[i+20>>2],u=d[i+8>>2],h=d[i+24>>2],f[e+12>>2]=0,d[e+8>>2]=u+y(a*h),d[e+4>>2]=l+y(a*_),d[e>>2]=s+y(a*r),R=i+32|0},o[185]=Qs,o[186]=rc,o[187]=function(e,t,n,i,o,a,r,s,c,l){e|=0,t|=0,n|=0,i|=0,o|=0,a|=0,r|=0,s|=0,c|=0,l|=0;var _=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0);return R=l=R-80|0,_=d[o+52>>2],u=d[a+52>>2],h=d[o+56>>2],p=d[a+56>>2],m=d[o+48>>2],v=d[a+48>>2],e=0,f[l+76>>2]=0,d[l+64>>2]=v-m,d[l+72>>2]=p-h,d[l+68>>2]=u-_,t=1,(J(n,o,i,a,l- -64|0,l+8|0)||(t=0,Z(n,o,i,a,l- -64|0,l+8|0)))&&(e=f[l+16>>2],f[s>>2]=f[l+12>>2],f[s+4>>2]=e,e=f[l+24>>2],f[s+8>>2]=f[l+20>>2],f[s+12>>2]=e,e=f[l+40>>2],f[c+8>>2]=f[l+36>>2],f[c+12>>2]=e,e=f[l+32>>2],f[c>>2]=f[l+28>>2],f[c+4>>2]=e,e=f[l+56>>2],f[r+8>>2]=f[l+52>>2],f[r+12>>2]=e,e=f[l+48>>2],f[r>>2]=f[l+44>>2],f[r+4>>2]=e,e=t),R=l+80|0,0|e},o[188]=Qs,o[189]=rc,o[190]=Is,o[191]=rc,o[192]=function(e,t,n,i,r,s,c,l,_,u){e|=0,t|=0,n|=0,i|=0,r|=0,s|=0,c|=0,l|=0,_|=0,u|=0;var p=y(0),m=y(0),v=y(0),g=y(0),A=0,x=0,b=y(0),C=y(0),S=y(0),E=y(0),w=0,T=y(0),P=0,I=y(0),N=y(0),D=y(0),M=y(0),O=0,z=0,L=0,F=y(0);for(R=e=R-4240|0,L=f[n+4>>2]+-17>>>0<=1?f[i+4>>2]+-17>>>0<2:L;me(),C=d[r+32>>2],S=d[r+16>>2],E=d[r>>2],b=d[r+36>>2],I=d[r+20>>2],T=d[r+4>>2],p=d[r+40>>2],m=d[r+24>>2],N=d[r+8>>2],f[12+(A=(w=P<<4)+(e+1264|0)|0)>>2]=0,g=d[w+21556>>2],v=y(-g),M=y(m*v),m=d[w+21552>>2],D=p,p=d[w+21560>>2],d[A+8>>2]=y(M-y(N*m))-y(D*p),d[A+4>>2]=y(y(I*v)-y(m*T))-y(p*b),d[A>>2]=y(y(S*v)-y(m*E))-y(p*C),v=d[s+40>>2],C=d[s+8>>2],S=d[s+24>>2],E=d[s+36>>2],b=d[s+4>>2],I=d[s+20>>2],T=d[s+32>>2],N=d[s>>2],D=d[s+16>>2],f[12+(w=w+(e+272|0)|0)>>2]=0,d[w>>2]=y(y(m*N)+y(g*D))+y(p*T),d[w+4>>2]=y(y(m*b)+y(g*I))+y(p*E),d[w+8>>2]=y(y(m*C)+y(g*S))+y(p*v),42!=(0|(P=P+1|0)););if(w=42,(0|(z=0|o[f[f[n>>2]+84>>2]](n)))>=1)for(P=0;o[f[f[n>>2]+88>>2]](n,P,e+3248|0),v=d[r+8>>2],C=d[r>>2],S=d[r+4>>2],E=d[r+24>>2],b=d[r+16>>2],I=d[r+20>>2],g=d[r+40>>2],m=d[r+32>>2],p=d[r+36>>2],f[e+3260>>2]=0,D=m,m=d[e+3248>>2],T=p,p=d[e+3252>>2],N=g,g=d[e+3256>>2],d[e+3256>>2]=y(y(D*m)+y(T*p))+y(N*g),d[e+3252>>2]=y(y(m*b)+y(p*I))+y(g*E),d[e+3248>>2]=y(y(C*m)+y(S*p))+y(v*g),me(),O=f[e+3260>>2],f[(x=21560+(A=w<<4)|0)>>2]=f[e+3256>>2],f[x+4>>2]=O,O=f[e+3252>>2],f[(x=A+21552|0)>>2]=f[e+3248>>2],f[x+4>>2]=O,C=d[r+40>>2],S=d[r+24>>2],E=d[r+8>>2],b=d[r+36>>2],I=d[r+20>>2],T=d[r+4>>2],p=d[r+32>>2],m=d[r+16>>2],N=d[r>>2],f[12+(x=A+(e+1264|0)|0)>>2]=0,g=d[e+3252>>2],v=y(-g),M=y(m*v),m=d[e+3248>>2],D=p,p=d[e+3256>>2],d[x>>2]=y(M-y(N*m))-y(D*p),d[x+4>>2]=y(y(I*v)-y(m*T))-y(p*b),d[x+8>>2]=y(y(S*v)-y(m*E))-y(p*C),v=d[s+32>>2],C=d[s>>2],S=d[s+16>>2],E=d[s+36>>2],b=d[s+4>>2],I=d[s+20>>2],T=d[s+40>>2],N=d[s+8>>2],D=d[s+24>>2],f[12+(A=A+(e+272|0)|0)>>2]=0,d[A+8>>2]=y(y(m*N)+y(g*D))+y(p*T),d[A+4>>2]=y(y(m*b)+y(g*I))+y(p*E),d[A>>2]=y(y(m*C)+y(g*S))+y(p*v),w=w+1|0,(0|z)!=(0|(P=P+1|0)););if((0|(z=0|o[f[f[i>>2]+84>>2]](i)))>=1)for(P=0;o[f[f[i>>2]+88>>2]](i,P,e+3248|0),v=d[s+8>>2],C=d[s>>2],S=d[s+4>>2],E=d[s+24>>2],b=d[s+16>>2],I=d[s+20>>2],g=d[s+40>>2],m=d[s+32>>2],p=d[s+36>>2],f[e+3260>>2]=0,D=m,m=d[e+3248>>2],T=p,p=d[e+3252>>2],N=g,g=d[e+3256>>2],d[e+3256>>2]=y(y(D*m)+y(T*p))+y(N*g),d[e+3252>>2]=y(y(m*b)+y(p*I))+y(g*E),d[e+3248>>2]=y(y(C*m)+y(S*p))+y(v*g),me(),O=f[e+3260>>2],f[(x=21560+(A=w<<4)|0)>>2]=f[e+3256>>2],f[x+4>>2]=O,O=f[e+3252>>2],f[(x=A+21552|0)>>2]=f[e+3248>>2],f[x+4>>2]=O,C=d[r+40>>2],S=d[r+24>>2],E=d[r+8>>2],b=d[r+36>>2],I=d[r+20>>2],T=d[r+4>>2],p=d[r+32>>2],m=d[r+16>>2],N=d[r>>2],f[12+(x=A+(e+1264|0)|0)>>2]=0,g=d[e+3252>>2],v=y(-g),M=y(m*v),m=d[e+3248>>2],D=p,p=d[e+3256>>2],d[x>>2]=y(M-y(N*m))-y(D*p),d[x+4>>2]=y(y(I*v)-y(m*T))-y(p*b),d[x+8>>2]=y(y(S*v)-y(m*E))-y(p*C),v=d[s+32>>2],C=d[s>>2],S=d[s+16>>2],E=d[s+36>>2],b=d[s+4>>2],I=d[s+20>>2],T=d[s+40>>2],N=d[s+8>>2],D=d[s+24>>2],f[12+(A=A+(e+272|0)|0)>>2]=0,d[A+8>>2]=y(y(m*N)+y(g*D))+y(p*T),d[A+4>>2]=y(y(m*b)+y(g*I))+y(p*E),d[A>>2]=y(y(m*C)+y(g*S))+y(p*v),w=w+1|0,(0|z)!=(0|(P=P+1|0)););if(o[f[f[n>>2]+76>>2]](n,e+1264|0,e+3248|0,w),o[f[f[i>>2]+76>>2]](i,e+272|0,e+2256|0,w),(0|w)<1)v=y(0xde0b6b000000000),m=y(0),p=y(0),g=y(0),I=y(0);else for(P=0,v=y(0xde0b6b000000000),I=y(0),g=y(0),p=y(0),m=y(0);me(),C=d[21552+(A=P<<4)>>2],S=d[A+21556>>2],E=L?y(0):d[A+21560>>2],+y(y(y(C*C)+y(S*S))+y(E*E))>.01&&(b=d[(x=A+(e+2256|0)|0)>>2],T=d[x+4>>2],N=d[x+8>>2],D=d[(x=A+(e+3248|0)|0)>>2],M=d[x+4>>2],F=d[x+8>>2],(b=y(y(y(C*y(y(y(y(y(b*d[s>>2])+y(T*d[s+4>>2]))+y(N*d[s+8>>2]))+d[s+48>>2])-y(y(y(y(D*d[r>>2])+y(M*d[r+4>>2]))+y(F*d[r+8>>2]))+d[r+48>>2])))+y(S*y(y(y(y(y(b*d[s+16>>2])+y(T*d[s+20>>2]))+y(N*d[s+24>>2]))+d[s+52>>2])-y(y(y(y(D*d[r+16>>2])+y(M*d[r+20>>2]))+y(F*d[r+24>>2]))+d[r+52>>2]))))+y(E*y(L?0:y(y(y(y(b*d[s+32>>2])+y(T*d[s+36>>2]))+y(N*d[s+40>>2]))+d[s+56>>2])-y(y(y(y(D*d[r+32>>2])+y(M*d[r+36>>2]))+y(F*d[r+40>>2]))+d[r+56>>2])))))<v&&(I=d[A+21564>>2],m=C,p=S,g=E,v=b)),(0|(P=P+1|0))!=(0|w););return $i(n),$i(i),w=0,v<y(0)||(C=$i(n),S=$i(i),t=Pi(e+192|0,n,i,t,0),E=d[r+52>>2],b=d[r+56>>2],T=d[r+48>>2],i=f[r+12>>2],f[(n=e- -64|0)>>2]=f[r+8>>2],f[n+4>>2]=i,n=f[r+4>>2],f[e+56>>2]=f[r>>2],f[e+60>>2]=n,n=f[r+28>>2],f[e+80>>2]=f[r+24>>2],f[e+84>>2]=n,n=f[r+20>>2],f[e+72>>2]=f[r+16>>2],f[e+76>>2]=n,n=f[r+40>>2],i=f[r+44>>2],P=f[r+32>>2],r=f[r+36>>2],f[e+116>>2]=0,v=y(v+y(y(C+S)+y(.5))),d[e+112>>2]=b+y(g*v),d[e+108>>2]=E+y(p*v),f[e+96>>2]=n,f[e+100>>2]=i,d[e+104>>2]=T+y(m*v),f[e+88>>2]=P,f[e+92>>2]=r,n=f[s+12>>2],f[e+128>>2]=f[s+8>>2],f[e+132>>2]=n,n=f[s+4>>2],f[e+120>>2]=f[s>>2],f[e+124>>2]=n,n=f[s+28>>2],f[e+144>>2]=f[s+24>>2],f[e+148>>2]=n,n=f[s+20>>2],f[e+136>>2]=f[s+16>>2],f[e+140>>2]=n,n=f[s+44>>2],f[e+160>>2]=f[s+40>>2],f[e+164>>2]=n,n=f[s+36>>2],f[e+152>>2]=f[s+32>>2],f[e+156>>2]=n,n=f[s+60>>2],f[e+176>>2]=f[s+56>>2],f[e+180>>2]=n,n=f[s+52>>2],f[e+168>>2]=f[s+48>>2],f[e+172>>2]=n,f[e+184>>2]=1566444395,a[e+48|0]=0,f[e+8>>2]=4584,f[t+16>>2]=0,d[t+12>>2]=-g,d[t+8>>2]=-p,d[t+4>>2]=-m,Is(t,e+56|0,e+8|0,u),(t=h[e+48|0])&&(C=d[e+44>>2],S=d[e+32>>2],E=d[e+36>>2],b=d[e+28>>2],f[l+12>>2]=0,v=y(v-C),d[l>>2]=b-y(m*v),d[l+8>>2]=E-y(g*v),d[l+4>>2]=S-y(p*v),n=f[e+40>>2],f[_+8>>2]=f[e+36>>2],f[_+12>>2]=n,n=f[e+32>>2],f[_>>2]=f[e+28>>2],f[_+4>>2]=n,d[c+12>>2]=I,d[c+8>>2]=g,d[c+4>>2]=p,d[c>>2]=m),w=0!=(0|t)),R=e+4240|0,0|w},o[193]=Qs,o[194]=rc,o[195]=Xs,o[196]=Xs,o[197]=function(e,t,n,i){e|=0,t|=0,n|=0,i=y(i);var o=0;o=f[t+4>>2],f[e+4>>2]=f[t>>2],f[e+8>>2]=o,o=f[t+12>>2],f[e+12>>2]=f[t+8>>2],f[e+16>>2]=o,t=f[n+4>>2],f[e+20>>2]=f[n>>2],f[e+24>>2]=t,t=f[n+12>>2],f[e+28>>2]=f[n+8>>2],f[e+32>>2]=t,a[e+40|0]=1,d[e+36>>2]=i},o[198]=Qs,o[199]=rc,o[200]=function(){},o[201]=Ts,o[202]=ac,o[203]=Qs,o[204]=sc,o[205]=function(e){var t=0,n=0;return f[(e|=0)>>2]=5020,h[e+8|0]&&(t=f[e+12>>2])&&(n=f[e+4>>2],o[f[f[n>>2]+16>>2]](n,t)),0|e},o[206]=function(e){var t=0,n=0;f[(e|=0)>>2]=5020,h[e+8|0]&&(t=f[e+12>>2])&&(n=f[e+4>>2],o[f[f[n>>2]+16>>2]](n,t)),ce(e)},o[207]=function(e,t,n,i,a){e|=0,t|=0,n|=0,i|=0,a|=0;var r=0,s=y(0),c=y(0),l=y(0),_=y(0),u=0,h=y(0),p=y(0),m=y(0),v=y(0),A=0;if(R=i=R-32|0,e=f[e+12>>2]){if(f[a+4>>2]=e,r=f[t+12>>2],u=f[n+12>>2],p=y(d[r+48>>2]-d[u+48>>2]),l=y(d[r+52>>2]-d[u+52>>2]),_=y(d[r+56>>2]-d[u+56>>2]),s=y(y(y(p*p)+y(l*l))+y(_*_)),r=f[n+4>>2],h=d[r+16>>2],c=d[r+32>>2],t=f[t+4>>2],m=d[t+16>>2],v=d[t+32>>2],(0|(r=f[e+844>>2]))>=1)for(t=0;r=e+g(t,208)|0,(u=f[r+120>>2])&&(A=f[5379])&&(o[A](u),f[r+120>>2]=0),(0|(t=t+1|0))<(0|(r=f[e+844>>2])););s=y(S(s)),h=y(c*h),c=y(v*m),r&&(t=f[5382])&&(f[i+16>>2]=e,o[t](i+16|0)),f[e+844>>2]=0,c=y(c+h),s>y(c+d[a+32>>2])||(f[i+24>>2]=0,f[i+28>>2]=0,f[i+16>>2]=1065353216,f[i+20>>2]=0,c=y(s-c),s>y(1.1920928955078125e-7)?(f[i+28>>2]=0,s=y(y(1)/s),_=y(_*s),d[i+24>>2]=_,l=y(l*s),d[i+20>>2]=l,s=y(p*s),d[i+16>>2]=s):(s=y(1),_=y(0),l=y(0)),e=f[n+12>>2],p=d[e+52>>2],m=d[e+56>>2],v=d[e+48>>2],f[i+12>>2]=0,d[i>>2]=v+y(h*s),d[i+8>>2]=m+y(h*_),d[i+4>>2]=p+y(h*l),o[f[f[a>>2]+16>>2]](a,i+16|0,i,c))}R=i+32|0},o[208]=Ts,o[209]=Wn,o[210]=$e,o[211]=function(e){ce($e(e|=0))},o[212]=qs,o[213]=Hs,o[214]=function(e,t,n){var i;if(e|=0,!((i=8!=(0|(t|=0)))|8!=(0|(n|=0))))return f[e+56>>2];if(!(1!=(0|n)|i))return f[e+72>>2];if(!(1!=(0|t)|8!=(0|n)))return f[e+76>>2];if(!(t|n))return f[e+68>>2];if(!(28!=(0|n)|(0|t)>19))return f[e+84>>2];if(!(28!=(0|t)|(0|n)>19))return f[e+80>>2];e:{if((0|t)<=19){if((0|n)<=19)return f[e+28>>2];if(n+-21>>>0>8)break e;return f[e+32>>2]}if(!((0|n)>19|t+-21>>>0>8))return f[e+36>>2];if(31==(0|t))return 31==(0|n)?f[e+44>>2]:f[e+40>>2]}return 31==(0|n)?f[e+48>>2]:f[e+52>>2]},o[215]=function(e,t,n){var i;if(e|=0,!((i=8!=(0|(t|=0)))|8!=(0|(n|=0))))return f[e+56>>2];if(!(1!=(0|n)|i))return f[e+72>>2];if(!(1!=(0|t)|8!=(0|n)))return f[e+76>>2];if(!(28!=(0|n)|(0|t)>19))return f[e+84>>2];if(!(28!=(0|t)|(0|n)>19))return f[e+80>>2];e:{if((0|t)<=19){if((0|n)<=19)return f[e+28>>2];if(n+-21>>>0>8)break e;return f[e+32>>2]}if(!((0|n)>19|t+-21>>>0>8))return f[e+36>>2];if(31==(0|t))return 31==(0|n)?f[e+44>>2]:f[e+40>>2]}return 31==(0|n)?f[e+48>>2]:f[e+52>>2]},o[216]=Qs,o[217]=rc,o[218]=function(e,t,n,i){return e|=0,n|=0,i|=0,e=f[(t|=0)>>2],Li(e=0|o[f[f[e>>2]+56>>2]](e,80),t,n,i,0),0|e},o[219]=rc,o[220]=function(e,t,n,i){return e|=0,n|=0,i|=0,e=f[(t|=0)>>2],Li(e=0|o[f[f[e>>2]+56>>2]](e,80),t,n,i,1),0|e},o[221]=rc,o[222]=function(e,t,n,i){return e|=0,n|=0,i|=0,e=f[(t|=0)>>2],Ri(e=0|o[f[f[e>>2]+56>>2]](e,84),t,n,i,0),0|e},o[223]=rc,o[224]=function(e,t,n,i){return e|=0,n|=0,i|=0,e=f[(t|=0)>>2],function(e,t,n,i){Ri(e,t,n,i,0),a[e+104|0]=1,f[e>>2]=10616,f[e+100>>2]=0,f[e+92>>2]=0,f[e+96>>2]=0,f[6257]=f[6257]+1,function(e){var t,n,i=0,r=0,s=0,c=0;if(f[e>>2]=10552,a[e+20|0]=1,f[e+16>>2]=0,a[e+40|0]=1,f[e+8>>2]=0,f[e+12>>2]=0,f[e+36>>2]=0,a[e+60|0]=1,f[e+28>>2]=0,f[e+32>>2]=0,f[e+56>>2]=0,f[e+48>>2]=0,f[e+52>>2]=0,f[6257]=f[6257]+1,t=0|o[f[4968]](24,16),(0|(n=f[e+8>>2]))>=1)for(;i=(r=g(s,12))+f[e+16>>2]|0,c=f[i+4>>2],f[(r=r+t|0)>>2]=f[i>>2],f[r+4>>2]=c,f[r+8>>2]=f[i+8>>2],(0|n)!=(0|(s=s+1|0)););(i=f[e+16>>2])&&(h[e+20|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[e+16>>2]=0),f[e+16>>2]=t,a[e+20|0]=1,f[e+12>>2]=2,pt(e)}(t=0|o[f[4968]](64,16)),f[e+84>>2]=t,f[e+108>>2]=f[f[n+4>>2]+72>>2],f[e+112>>2]=f[f[i+4>>2]+72>>2]}(e=0|o[f[f[e>>2]+56>>2]](e,116),t,n,i),0|e},o[225]=rc,o[226]=function(e,t,n,i){return e|=0,n|=0,i|=0,e=f[(t|=0)>>2],Ri(e=0|o[f[f[e>>2]+56>>2]](e,84),t,n,i,1),0|e},o[227]=rc,o[228]=function(e,t){return e|=0,e=f[(t|=0)>>2],e=0|o[f[f[e>>2]+56>>2]](e,8),f[e>>2]=16448,f[e+4>>2]=f[t>>2],f[e>>2]=4852,0|e},o[229]=rc,o[230]=function(e,t,n,i){return e|=0,n|=0,i|=0,e=f[(t|=0)>>2],function(e,t,n,i){f[e>>2]=16448,f[e+4>>2]=f[t>>2],f[e>>2]=4944,f[e+12>>2]=0,a[e+8|0]=0,f[e>>2]=5020,t=f[e+4>>2],t=0|o[f[f[t>>2]+12>>2]](t,f[n+8>>2],f[i+8>>2]),a[e+8|0]=1,f[e+12>>2]=t}(e=0|o[f[f[e>>2]+56>>2]](e,16),t,n,i),0|e},o[231]=rc,o[232]=function(e,t,n,i){e|=0,n|=0,i|=0;var r=0;return r=f[(t|=0)>>2],function(e,t,n,i,r,s){f[e>>2]=16448,f[e+4>>2]=f[n>>2],f[e>>2]=4944,a[e+16|0]=s,f[e+12>>2]=t,a[e+8|0]=0,f[e>>2]=9756,t||(t=f[e+4>>2],t=0|o[f[f[t>>2]+12>>2]](t,f[i+8>>2],f[r+8>>2]),a[e+8|0]=1,f[e+12>>2]=t)}(r=0|o[f[f[r>>2]+56>>2]](r,20),f[t+4>>2],t,n,i,h[e+4|0]),0|r},o[233]=rc,o[234]=function(e,t,n,i){return e|=0,n|=0,i|=0,e=f[(t|=0)>>2],function(e,t,n,i){f[e>>2]=16448,f[e+4>>2]=f[t>>2],f[e>>2]=4944,f[e+12>>2]=0,a[e+8|0]=0,f[e>>2]=7100,t=f[e+4>>2],o[f[f[t>>2]+24>>2]](t,f[n+8>>2],f[i+8>>2])&&(t=f[e+4>>2],t=0|o[f[f[t>>2]+12>>2]](t,f[n+8>>2],f[i+8>>2]),a[e+8|0]=1,f[e+12>>2]=t)}(e=0|o[f[f[e>>2]+56>>2]](e,16),t,n,i),0|e},o[235]=rc,o[236]=function(e,t,n,i){e|=0,n|=0,i|=0;var r=0;return r=f[(t|=0)>>2],function(e,t,n,i,r,s,c){f[e>>2]=16448,f[e+4>>2]=f[t>>2],f[e+24>>2]=c,f[e+20>>2]=s,a[e+16|0]=r,f[e+12>>2]=0,a[e+8|0]=0,f[e>>2]=6176,t=f[e+4>>2],s=r?i:n,n=r?n:i,o[f[f[t>>2]+24>>2]](t,f[s+8>>2],f[n+8>>2])&&(t=f[e+4>>2],t=0|o[f[f[t>>2]+12>>2]](t,f[s+8>>2],f[n+8>>2]),a[e+8|0]=1,f[e+12>>2]=t)}(r=0|o[f[f[r>>2]+56>>2]](r,28),t,n,i,h[e+4|0],f[e+8>>2],f[e+12>>2]),0|r},o[237]=function(e){var t=0;return f[(e|=0)>>2]=6072,(t=f[e+56>>2])&&(h[e+60|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+56>>2]=0),f[e+56>>2]=0,f[e+48>>2]=0,f[e+52>>2]=0,a[e+60|0]=1,(t=f[e+36>>2])&&(h[e+40|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+36>>2]=0),f[e+36>>2]=0,f[e+28>>2]=0,f[e+32>>2]=0,a[e+40|0]=1,va(e+4|0),0|e},o[238]=function(e){var t=0;f[(e|=0)>>2]=6072,(t=f[e+56>>2])&&(h[e+60|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+56>>2]=0),f[e+56>>2]=0,f[e+48>>2]=0,f[e+52>>2]=0,a[e+60|0]=1,(t=f[e+36>>2])&&(h[e+40|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+36>>2]=0),f[e+36>>2]=0,f[e+28>>2]=0,f[e+32>>2]=0,a[e+40|0]=1,va(e+4|0),ce(e)},o[239]=function(e,t,n){e|=0,n|=0;var i,r=0,s=0,c=0;if((0|(i=f[8+(t|=0)>>2]))<1)n=0;else for(c=f[t+16>>2],n=0;r=f[(s<<2)+c>>2],3&h[r+204|0]||(f[r+208>>2]=n,n=n+1|0),f[r+268>>2]=1065353216,f[r+212>>2]=-1,(0|i)!=(0|(s=s+1|0)););!function(e,t){var n=0,i=0,r=0,s=0,c=0,l=0,_=0;if((0|(i=f[e+4>>2]))<(0|t)){if(f[e+8>>2]<(0|t)){if(t?(f[6257]=f[6257]+1,c=0|o[f[4968]](t<<3,16),n=f[e+4>>2]):n=i,(0|n)>=1)for(;l=(r=s<<3)+c|0,r=f[e+12>>2]+r|0,_=f[r+4>>2],f[l>>2]=f[r>>2],f[l+4>>2]=_,(0|n)!=(0|(s=s+1|0)););(n=f[e+12>>2])&&(h[e+16|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+12>>2]=0),f[e+12>>2]=c,a[e+16|0]=1,f[e+8>>2]=t}for(;n=f[e+12>>2]+(i<<3)|0,f[n>>2]=0,f[n+4>>2]=0,(0|(i=i+1|0))!=(0|t););}if(f[e+4>>2]=t,(0|t)>=1)for(e=f[e+12>>2],i=0;f[4+(n=e+(i<<3)|0)>>2]=1,f[n>>2]=i,(0|(i=i+1|0))!=(0|t););}(e+4|0,n),function(e,t){var n,i=0,a=0,r=0,s=0,c=0,l=0;if(t=f[t+68>>2],t=0|o[f[f[t>>2]+36>>2]](t),(n=0|o[f[f[t>>2]+36>>2]](t))&&(l=0|o[f[f[t>>2]+20>>2]](t),!((0|n)<1)))for(;;){if((i=f[f[(t=(c<<4)+l|0)>>2]>>2])&&!(!(t=f[f[t+4>>2]>>2])|7&f[i+204>>2]|7&h[t+204|0])){if(t=f[t+208>>2],r=f[e+16>>2],s=f[i+208>>2],(0|(i=f[(a=r+(s<<3)|0)>>2]))!=(0|s))for(;i=(i<<3)+r|0,f[a>>2]=f[i>>2],s=f[i>>2],(0|(i=f[(a=(s<<3)+r|0)>>2]))!=(0|s););if((0|(i=f[(a=(t<<3)+r|0)>>2]))!=(0|t))for(;t=(i<<3)+r|0,f[a>>2]=f[t>>2],(0|(t=f[t>>2]))!=(0|(i=f[(a=(t<<3)+r|0)>>2])););(0|t)!=(0|s)&&(f[(i=(s<<3)+r|0)>>2]=t,f[4+(t=(t<<3)+r|0)>>2]=f[t+4>>2]+f[i+4>>2])}if((0|(c=c+1|0))==(0|n))break}}(e,t)},o[240]=function(e,t){e|=0;var n,i=0,o=0,a=0,r=0,s=0,c=0,l=0,_=0;if((0|(n=f[8+(t|=0)>>2]))>=1)for(_=f[t+16>>2],t=0;;){if(o=f[(a<<2)+_>>2],3&h[o+204|0])f[o+208>>2]=-1,f[o+212>>2]=-2;else{if(i=t,r=f[e+16>>2],(0|(c=f[(s=r+(l=t<<3)|0)>>2]))!=(0|t))for(;i=(c<<3)+r|0,f[s>>2]=f[i>>2],(0|(i=f[i>>2]))!=(0|(c=f[(s=(i<<3)+r|0)>>2])););f[o+208>>2]=i,f[4+(r+l|0)>>2]=a,f[o+212>>2]=-1,t=t+1|0}if((0|n)==(0|(a=a+1|0)))break}},o[241]=function(e){var t=0,n=0;return f[(e|=0)>>2]=6176,h[e+8|0]&&(t=f[e+12>>2])&&(n=f[e+4>>2],o[f[f[n>>2]+16>>2]](n,t)),0|e},o[242]=function(e){var t=0,n=0;f[(e|=0)>>2]=6176,h[e+8|0]&&(t=f[e+12>>2])&&(n=f[e+4>>2],o[f[f[n>>2]+16>>2]](n,t)),ce(e)},o[243]=function(e,t,n,i,a){e|=0,t|=0,n|=0,i|=0,a|=0;var r=0,s=y(0),c=y(0),l=y(0),_=y(0),u=0,p=y(0),m=y(0),v=0,g=y(0),b=y(0),C=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=0,H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=y(0),J=y(0),$=y(0),ee=y(0),te=y(0),ne=y(0),ie=y(0),oe=y(0),ae=y(0),se=y(0),ce=y(0),le=y(0),_e=y(0);if(R=i=R-48|0,f[e+12>>2]){if(r=h[e+16|0],u=f[(V=r?t:n)+12>>2],E=d[u+56>>2],Q=d[u+52>>2],w=d[u+48>>2],r=f[(v=r?n:t)+12>>2],T=d[r+56>>2],j=d[r+52>>2],G=d[r+48>>2],v=f[v+4>>2],P=d[r+32>>2],M=d[r>>2],O=d[r+16>>2],N=d[r+36>>2],L=d[r+20>>2],F=d[r+4>>2],s=d[u+40>>2],c=d[u+24>>2],l=d[u+8>>2],_=d[u+36>>2],g=d[u+20>>2],m=d[u+4>>2],b=d[u+32>>2],I=d[r+40>>2],C=d[u+16>>2],U=d[r+24>>2],p=d[u>>2],B=d[r+8>>2],u=f[V+4>>2],D=d[u+60>>2],z=d[u+56>>2],k=d[u+52>>2],f[i+28>>2]=0,W=y(y(y(B*m)+y(U*g))+y(I*_)),z=y(-z),q=y(y(y(B*p)+y(U*C))+y(I*b)),I=y(y(y(B*l)+y(U*c))+y(I*s)),d[i+24>>2]=y(y(W*z)-y(k*q))-y(D*I),U=y(y(y(F*m)+y(L*g))+y(N*_)),B=y(y(y(F*p)+y(L*C))+y(N*b)),Y=y(y(y(F*l)+y(L*c))+y(N*s)),d[i+20>>2]=y(y(U*z)-y(k*B))-y(D*Y),X=y(y(y(M*m)+y(O*g))+y(P*_)),H=k,k=y(y(y(M*p)+y(O*C))+y(P*b)),N=D,D=y(y(y(M*l)+y(O*c))+y(P*s)),d[i+16>>2]=y(y(X*z)-y(H*k))-y(N*D),o[f[f[v>>2]+64>>2]](i+32|0,v,i+16|0),r=f[V+12>>2],z=d[r+48>>2],K=d[r+32>>2],Z=d[r+16>>2],J=d[r+8>>2],$=d[r+4>>2],ee=d[r>>2],te=d[r+56>>2],ne=d[r+52>>2],ie=d[r+40>>2],oe=d[r+36>>2],ae=d[r+24>>2],se=d[r+20>>2],ce=d[u+68>>2],N=d[u+60>>2],L=d[u+52>>2],F=d[u+56>>2],P=d[i+40>>2],M=d[i+32>>2],O=d[i+36>>2],le=d[f[e+12>>2]+848>>2],f[a+4>>2]=f[e+12>>2],_e=y(y(y(G*l)+y(j*c))+y(T*s)),H=c,c=y(-Q),I=y(y(_e+y(y(y(H*c)-y(w*l))-y(E*s)))+y(y(y(D*M)+y(Y*O))+y(I*P))),b=y(y(y(y(y(G*p)+y(j*C))+y(T*b))+y(y(y(C*c)-y(w*p))-y(E*b)))+y(y(y(k*M)+y(B*O))+y(q*P))),g=y(y(y(y(y(G*m)+y(j*g))+y(T*_))+y(y(y(g*c)-y(w*m))-y(E*_)))+y(y(y(X*M)+y(U*O))+y(W*P))),(s=y(y(y(N*I)+y(y(L*b)+y(F*g)))-ce))<le&&(r=f[V+12>>2],m=d[r+24>>2],C=d[r+20>>2],p=d[r+40>>2],E=d[r+36>>2],w=d[r+16>>2],T=d[r+32>>2],c=d[u+60>>2],j=d[r+8>>2],l=d[u+52>>2],G=d[r>>2],_=d[u+56>>2],P=d[r+4>>2],f[i+28>>2]=0,d[i+16>>2]=y(y(G*l)+y(P*_))+y(j*c),d[i+24>>2]=y(y(l*T)+y(_*E))+y(c*p),d[i+20>>2]=y(y(l*w)+y(_*C))+y(c*m),f[i+12>>2]=0,c=y(b-y(L*s)),l=y(g-y(F*s)),_=y(I-y(N*s)),d[i+8>>2]=y(y(y(c*K)+y(l*oe))+y(_*ie))+te,d[i+4>>2]=y(y(y(c*Z)+y(l*se))+y(_*ae))+ne,d[i>>2]=y(y(J*_)+y(y(ee*c)+y($*l)))+z,o[f[f[a>>2]+16>>2]](a,i+16|0,i,s)),!(f[v+4>>2]>6|f[f[a+4>>2]+844>>2]>=f[e+24>>2]||(c=d[u+60>>2],y(A(c))>y(.7071067690849304)?(s=d[u+56>>2],l=y(y(1)/y(S(y(y(c*c)+y(s*s))))),s=y(s*l),c=y(l*y(-c)),l=y(0)):(s=d[u+52>>2],l=d[u+56>>2],_=y(y(1)/y(S(y(y(s*s)+y(l*l))))),c=y(s*_),s=y(0),l=y(_*y(-l))),r=0,_=y(o[f[f[v>>2]+16>>2]](v)),m=cn(_=y(y(x(y(d[4962]/_),y(.39269909262657166)))*y(.5))),v=f[e+20>>2],g=sn(_),(0|v)<1)))for(D=s,s=y(m/y(S(y(y(y(l*l)+y(c*c))+y(s*s))))),m=y(D*s),b=y(c*s),C=y(l*s);c=d[u+56>>2],_=d[u+52>>2],s=d[u+60>>2],l=y(y(y(y(6.2831854820251465)/y(0|v))*y(0|r))*y(.5)),p=y(cn(l)/y(S(y(y(y(_*_)+y(c*c))+y(s*s))))),s=y(s*p),c=y(c*p),l=sn(l),_=y(_*p),p=y(y(m*s)+y(y(b*c)+y(y(g*l)+y(C*_)))),E=y(y(b*s)+y(y(y(C*l)-y(g*_))-y(m*c))),w=y(y(m*_)+y(y(y(b*l)-y(g*c))-y(C*s))),T=y(y(C*c)+y(y(y(m*l)-y(g*s))-y(b*_))),d[i+28>>2]=y(y(y(l*p)-y(_*E))-y(c*w))-y(s*T),d[i+24>>2]=y(y(c*E)+y(y(s*p)+y(l*T)))-y(_*w),d[i+20>>2]=y(y(_*T)+y(y(l*w)+y(c*p)))-y(s*E),d[i+16>>2]=y(y(s*w)+y(y(_*p)+y(l*E)))-y(c*T),re(e,i+16|0,t,n,a),(0|(r=r+1|0))<(0|(v=f[e+20>>2])););!h[e+8|0]|!f[f[e+12>>2]+844>>2]||(e=f[a+4>>2],f[e+844>>2]&&((0|(t=f[e+836>>2]))==(0|(n=f[f[a+8>>2]+8>>2]))?Se(e,t+4|0,f[f[a+12>>2]+8>>2]+4|0):Se(e,f[f[a+12>>2]+8>>2]+4|0,n+4|0)))}R=i+48|0},o[244]=Ts,o[245]=Wn,o[246]=Qs,o[247]=rc,o[248]=q,o[249]=function(e){var t=0;return f[8+(e|=0)>>2]=6364,f[e>>2]=6336,t=f[e+56>>2],o[f[f[t>>2]+20>>2]](t,f[e+72>>2]),t=f[e+56>>2],o[f[f[t>>2]+16>>2]](t,f[e+72>>2]),0|e},o[250]=function(e){var t=0;f[8+(e|=0)>>2]=6364,f[e>>2]=6336,t=f[e+56>>2],o[f[f[t>>2]+20>>2]](t,f[e+72>>2]),t=f[e+56>>2],o[f[f[t>>2]+16>>2]](t,f[e+72>>2]),e&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[251]=function(e,t,n,i,a){e|=0,t|=0,n|=0,i|=0,a|=0;var r,s,c=0,l=0,_=y(0);R=r=R-16|0,o[f[4966]](6418),s=h[e+76|0],c=f[(l=s?t:n)+4>>2],f[c+4>>2]+-21>>>0>8||f[f[(t=s?n:t)+4>>2]+4>>2]>19||(_=y(o[f[f[c>>2]+48>>2]](c)),f[a+4>>2]=f[e+72>>2],function(e,t,n,i,a,r){var s,c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0);R=s=R+-64|0,d[e+56>>2]=t,f[e+52>>2]=n,f[e+40>>2]=a,f[e+36>>2]=i,f[e+44>>2]=r,n=f[a+12>>2],c=d[n+52>>2],x=d[n+56>>2],a=f[i+12>>2],b=d[a+52>>2],C=d[a+56>>2],l=d[n+20>>2],_=d[n+36>>2],S=d[a+20>>2],E=d[a+36>>2],w=d[a+24>>2],u=d[n+24>>2],T=d[a+40>>2],h=d[n+40>>2],P=d[a+32>>2],p=d[n+32>>2],I=d[a>>2],m=d[n>>2],N=d[a+16>>2],v=d[n+16>>2],D=d[n+48>>2],M=d[a+48>>2],g=d[n+4>>2],O=d[a+4>>2],z=d[a+8>>2],A=d[n+8>>2],f[s+60>>2]=0,f[s+44>>2]=0,f[s+28>>2]=0,d[s+40>>2]=y(y(A*z)+y(u*w))+y(h*T),d[s+36>>2]=y(y(A*O)+y(u*S))+y(h*E),d[s+24>>2]=y(y(g*z)+y(l*w))+y(_*T),d[s+20>>2]=y(y(g*O)+y(l*S))+y(_*E),c=y(-c),d[s+56>>2]=y(y(y(u*c)-y(A*D))-y(h*x))+y(y(y(A*M)+y(u*b))+y(h*C)),d[s+52>>2]=y(y(y(l*c)-y(g*D))-y(_*x))+y(y(y(g*M)+y(l*b))+y(_*C)),f[s+12>>2]=0,d[s>>2]=y(y(m*I)+y(v*N))+y(p*P),d[s+32>>2]=y(y(A*I)+y(u*N))+y(h*P),d[s+16>>2]=y(y(g*I)+y(l*N))+y(_*P),d[s+8>>2]=y(y(m*z)+y(v*w))+y(p*T),d[s+4>>2]=y(y(m*O)+y(v*S))+y(p*E),d[s+48>>2]=y(y(y(v*c)-y(m*D))-y(p*x))+y(y(y(m*M)+y(v*b))+y(p*C)),n=f[i+4>>2],o[f[f[n>>2]+8>>2]](n,s,e+4|0,e+20|0),t=y(d[r+32>>2]+t),d[e+20>>2]=t+d[e+20>>2],d[e+24>>2]=t+d[e+24>>2],d[e+28>>2]=t+d[e+28>>2],d[e+4>>2]=d[e+4>>2]-t,d[e+8>>2]=d[e+8>>2]-t,d[e+12>>2]=d[e+12>>2]-t,R=s- -64|0}(n=e+8|0,_,i,t,l,a),t=f[t+8>>2],i=f[e+72>>2],f[i+840>>2]=f[l+8>>2],f[i+836>>2]=t,o[f[f[c>>2]+64>>2]](c,n,e+12|0,e+28|0),t=f[a+4>>2],f[t+844>>2]&&(n=(0|(i=f[t+836>>2]))==(0|(c=f[f[a+8>>2]+8>>2])),l=t,t=f[f[a+12>>2]+8>>2],Se(l,(n?i:t)+4|0,(n?t:c)+4|0)),f[e+44>>2]=0,f[e+48>>2]=0),o[f[4967]](),R=r+16|0},o[252]=function(e,t,n,i,a){e|=0,t|=0,n|=0,i|=0,a|=0;var r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=y(0),J=y(0);return R=i=R-240|0,Z=y(1),a=h[e+76|0],c=d[(e=a?n:t)+116>>2],l=d[e+52>>2],r=y(c-l),s=y(r*r),_=d[e+120>>2],T=d[e+56>>2],r=y(_-T),u=y(s+y(r*r)),P=d[e+124>>2],s=d[e+60>>2],r=y(P-s),u=y(u+y(r*r)),r=d[e+276>>2],u<y(r*r)||(n=f[(t=a?t:n)+192>>2],f[n+4>>2]+-21>>>0>8||(D=d[e+92>>2],M=d[e+76>>2],O=d[e+108>>2],z=d[e+88>>2],L=d[e+72>>2],F=d[e+104>>2],U=d[e+100>>2],B=d[e+84>>2],k=d[e+68>>2],m=d[t+36>>2],v=d[t+20>>2],g=d[t+4>>2],j=d[e+28>>2],G=d[e+12>>2],V=d[e+44>>2],H=d[e+24>>2],W=d[e+8>>2],q=d[e+40>>2],Y=d[e+36>>2],X=d[e+20>>2],Q=d[e+4>>2],A=d[t+12>>2],x=d[t+28>>2],b=d[t+44>>2],K=y(y(y(A*c)+y(x*_))+y(b*P)),C=d[t+24>>2],S=y(-d[t+56>>2]),E=d[t+8>>2],I=d[t+52>>2],w=d[t+40>>2],N=d[t+60>>2],p=y(y(y(C*S)-y(E*I))-y(w*N)),r=y(p+y(y(y(E*c)+y(C*_))+y(w*P))),f[i+236>>2]=0,J=y(y(y(x*S)-y(A*I))-y(b*N)),u=y(J+y(y(y(A*l)+y(x*T))+y(b*s))),d[i+232>>2]=u,p=y(p+y(y(y(E*l)+y(C*T))+y(w*s))),d[i+228>>2]=p,S=y(y(y(v*S)-y(g*I))-y(m*N)),l=y(S+y(y(y(g*l)+y(v*T))+y(m*s))),d[i+224>>2]=l,T=l,(c=y(S+y(y(y(g*c)+y(v*_))+y(m*P))))<l&&(d[i+224>>2]=c,T=c),P=p,r<p&&(d[i+228>>2]=r,P=r),(_=y(J+K))<(s=u)&&(d[i+232>>2]=_,s=_),f[i+220>>2]=0,d[i+216>>2]=u,d[i+212>>2]=p,d[i+208>>2]=l,S=l,l<c&&(d[i+208>>2]=c,S=c),I=p,p<r&&(d[i+212>>2]=r,I=r),N=u,u<_&&(d[i+216>>2]=_,N=_),K=s,s=d[e+272>>2],d[i+232>>2]=K-s,d[i+228>>2]=P-s,d[i+224>>2]=T-s,d[i+216>>2]=s+N,d[i+212>>2]=s+I,d[i+208>>2]=s+S,f[i+128>>2]=0,d[i+124>>2]=_,d[i+120>>2]=r,d[i+116>>2]=c,f[i+112>>2]=0,d[i+108>>2]=y(y(A*M)+y(x*D))+y(b*O),d[i+104>>2]=y(y(A*L)+y(x*z))+y(b*F),d[i+100>>2]=y(y(A*k)+y(x*B))+y(b*U),f[i+96>>2]=0,d[i+92>>2]=y(y(E*M)+y(C*D))+y(w*O),d[i+88>>2]=y(y(E*L)+y(C*z))+y(w*F),d[i+84>>2]=y(y(E*k)+y(C*B))+y(w*U),f[i+80>>2]=0,d[i+76>>2]=y(y(g*M)+y(v*D))+y(m*O),d[i+72>>2]=y(y(g*L)+y(v*z))+y(m*F),f[i- -64>>2]=0,d[i+60>>2]=u,d[i+56>>2]=p,d[i+52>>2]=l,f[i+48>>2]=0,d[i+44>>2]=y(y(A*G)+y(x*j))+y(b*V),d[i+40>>2]=y(y(A*W)+y(x*H))+y(b*q),d[i+36>>2]=y(y(A*Q)+y(x*X))+y(b*Y),f[i+32>>2]=0,d[i+28>>2]=y(y(E*G)+y(C*j))+y(w*V),d[i+24>>2]=y(y(E*W)+y(C*H))+y(w*q),d[i+20>>2]=y(y(E*Q)+y(C*X))+y(w*Y),f[i+16>>2]=0,d[i+12>>2]=y(y(g*G)+y(v*j))+y(m*V),d[i+8>>2]=y(y(g*W)+y(v*H))+y(m*q),d[i+196>>2]=s,d[i+68>>2]=y(y(g*k)+y(v*B))+y(m*U),d[i+4>>2]=y(y(g*Q)+y(v*X))+y(m*Y),f[i>>2]=6772,f[i+200>>2]=f[e+268>>2],n&&(o[f[f[n>>2]+64>>2]](n,i,i+224|0,i+208|0),(r=d[i+200>>2])<d[e+268>>2]&&(d[e+268>>2]=r,Z=r)))),R=i+240|0,y(Z)},o[253]=function(e,t){t|=0;var n=0,i=0,r=0,s=0,c=0;if(n=f[72+(e|=0)>>2]){if((0|(i=f[t+4>>2]))==f[t+8>>2]&&!((0|i)>=(0|(r=i?i<<1:1)))){if(r&&(f[6257]=f[6257]+1,s=0|o[f[4968]](r<<2,16),i=f[t+4>>2]),(0|i)>=1)for(n=0;f[(c=n<<2)+s>>2]=f[f[t+12>>2]+c>>2],(0|(n=n+1|0))!=(0|i););(n=f[t+12>>2])&&(h[t+16|0]&&(n&&(f[6258]=f[6258]+1,o[f[4969]](n)),i=f[t+4>>2]),f[t+12>>2]=0),f[t+12>>2]=s,a[t+16|0]=1,f[t+8>>2]=r,n=f[e+72>>2]}f[f[t+12>>2]+(i<<2)>>2]=n,f[t+4>>2]=i+1}},o[254]=function(e){var t=0;return f[(e|=0)>>2]=6364,t=f[e+48>>2],o[f[f[t>>2]+20>>2]](t,f[e+64>>2]),t=f[e+48>>2],o[f[f[t>>2]+16>>2]](t,f[e+64>>2]),0|e},o[255]=function(e){var t=0;f[(e|=0)>>2]=6364,t=f[e+48>>2],o[f[f[t>>2]+20>>2]](t,f[e+64>>2]),t=f[e+48>>2],o[f[f[t>>2]+16>>2]](t,f[e+64>>2]),e&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[256]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a,r=0,s=0,c=y(0),l=y(0),_=y(0),u=y(0),h=0,p=0;R=a=R-144|0,o[f[4966]](6376),((u=(c=d[t>>2])<(l=d[t+16>>2])?c:l)<(_=d[t+32>>2])?u:_)>d[e+20>>2]||d[(d[t+(r=(c>l^1)<<4)>>2]>_?r:32)+t>>2]<d[e+4>>2]||((u=(c=d[t+8>>2])<(l=d[(r=t+24|0)>>2])?c:l)<(_=d[(s=t+40|0)>>2])?u:_)>d[e+28>>2]||d[(d[(r=c>l?t+8|0:r)>>2]>_?r:s)>>2]<d[e+12>>2]||((u=(c=d[t+4>>2])<(l=d[(r=t+20|0)>>2])?c:l)<(_=d[(s=t+36|0)>>2])?u:_)>d[e+24>>2]||(r=c>l?t+4|0:r,f[f[f[e+36>>2]+4>>2]+4>>2]>19|d[(d[r>>2]>_?r:s)>>2]<d[e+8>>2]||(s=f[e+48>>2],p=Ds(a+24|0),f[a+24>>2]=6568,f[a+28>>2]=1,r=f[t+12>>2],f[a+92>>2]=f[t+8>>2],f[a+96>>2]=r,r=f[t+4>>2],f[a+84>>2]=f[t>>2],f[a+88>>2]=r,r=f[t+28>>2],f[a+108>>2]=f[t+24>>2],f[a+112>>2]=r,r=f[t+20>>2],f[a+100>>2]=f[t+16>>2],f[a+104>>2]=r,r=f[t+44>>2],f[a+124>>2]=f[t+40>>2],f[a+128>>2]=r,r=f[t+36>>2],f[a+116>>2]=f[t+32>>2],f[a+120>>2]=r,f[a+72>>2]=f[e+56>>2],t=f[e+40>>2],r=f[t+12>>2],h=f[t+8>>2],f[a+20>>2]=i,f[a+16>>2]=n,f[a+8>>2]=h,f[a+12>>2]=r,f[a>>2]=t,f[a+4>>2]=a+24,t=f[e+36>>2],t=d[f[e+44>>2]+32>>2]>y(0)?0|o[f[f[s>>2]+8>>2]](s,t,a,0,2):0|o[f[f[s>>2]+8>>2]](s,t,a,f[e+64>>2],1),r=f[e+44>>2],h=f[r+8>>2],f[h+8>>2]!=f[f[e+40>>2]+8>>2]?(h=f[r+12>>2],f[r+12>>2]=a,o[f[f[r>>2]+12>>2]](r,n,i)):(f[r+8>>2]=a,o[f[f[r>>2]+8>>2]](r,n,i)),o[f[f[t>>2]+8>>2]](t,f[e+36>>2],a,f[e+52>>2],f[e+44>>2]),n=f[e+44>>2],f[(f[f[n+8>>2]+8>>2]==f[f[e+40>>2]+8>>2]?8:12)+n>>2]=h,o[f[f[t>>2]>>2]](t),o[f[f[s>>2]+60>>2]](s,t),Sa(p))),o[f[4967]](),R=a+144|0},o[257]=Sa,o[258]=Ps,o[259]=Ss,o[260]=function(e,t,n){e|=0,t|=0,n|=0;var i,a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0);R=i=R-96|0,f[i+44>>2]=0,f[i+48>>2]=0,f[i+56>>2]=0,f[i+60>>2]=0,f[i+52>>2]=1065353216,f[i+76>>2]=0,f[i+80>>2]=0,f[i+72>>2]=1065353216,f[i+84>>2]=0,f[i+88>>2]=0,f[i+92>>2]=0,f[i+36>>2]=0,f[i+40>>2]=0,f[i+32>>2]=1065353216,f[i+64>>2]=0,f[i+68>>2]=0,o[f[f[e>>2]+8>>2]](e,i+32|0,i+16|0,i),c=d[i>>2],l=d[i+16>>2],a=y(c-l),s=y(a*a),a=d[i+4>>2],_=d[i+20>>2],r=y(a-_),h=y(s+y(r*r)),r=d[i+8>>2],s=d[i+24>>2],u=y(r-s),d[n>>2]=y(S(y(h+y(u*u))))*y(.5),f[t+12>>2]=0,d[t+8>>2]=y(r+s)*y(.5),d[t+4>>2]=y(a+_)*y(.5),d[t>>2]=y(c+l)*y(.5),R=i+96|0},o[261]=function(e){e|=0;var t,n=y(0),i=y(0);return R=t=R-32|0,o[f[f[e>>2]+12>>2]](e,t+16|0,t+12|0),R=t+32|0,n=d[t+16>>2],i=y(n*n),n=d[t+20>>2],i=y(i+y(n*n)),n=d[t+24>>2],y(y(d[t+12>>2]+y(S(y(i+y(n*n))))))},o[262]=function(e,t){return e|=0,t=y(t),y(y(y(o[f[f[e>>2]+16>>2]](e))*t))},o[263]=xa,o[264]=function(e){return 16+(e|=0)|0},o[265]=fs,o[266]=function(){return 6728},o[267]=function(e){f[8+(e|=0)>>2]=1065353216,f[e+12>>2]=0,f[e>>2]=1065353216,f[e+4>>2]=1065353216},o[268]=function(e,t){var n;e|=0,t=y(t),f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,d[f[n+12>>2]+48>>2]=d[n+8>>2]},o[269]=function(e){return y(d[48+(e|=0)>>2])},o[270]=Zs,o[271]=function(e,t,n){return go(e|=0,t|=0,n|=0),f[t+28>>2]=f[e+32>>2],f[t+32>>2]=f[e+36>>2],f[t+36>>2]=f[e+40>>2],f[t+40>>2]=f[e+44>>2],f[t+12>>2]=f[e+16>>2],f[t+16>>2]=f[e+20>>2],f[t+20>>2]=f[e+24>>2],f[t+24>>2]=f[e+28>>2],e=f[e+48>>2],f[t+48>>2]=0,f[t+44>>2]=e,6737},o[272]=function(e,t){var n,i,a=0,r=0,s=0,c=0;r=t|=0,s=0|o[f[f[(e|=0)>>2]+52>>2]](e),c=1,a=f[f[t>>2]+16>>2],i=0|o[a](0|r,0|s,0|c),c=t,s=i,r=0|o[f[f[e>>2]+56>>2]](e,f[i+8>>2],t),n=e,a=f[f[t>>2]+20>>2],o[a](0|c,0|s,0|r,1346455635,0|n)},o[273]=oi,o[274]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0);i=d[n>>2],o=d[n+4>>2],a=d[n+8>>2],r=y(y(y(i*d[t+76>>2])+y(o*d[t+80>>2]))+y(a*d[t+84>>2])),s=y(y(y(i*d[t+92>>2])+y(o*d[t+96>>2]))+y(a*d[t+100>>2])),i=y(y(y(i*d[t+60>>2])+y(o*d[t- -64>>2]))+y(a*d[t+68>>2])),n=f[4+(t=(t+60|0)+((i<r?r<s?2:1:(i<s)<<1)<<4)|0)>>2],f[e>>2]=f[t>>2],f[e+4>>2]=n,n=f[t+12>>2],f[e+8>>2]=f[t+8>>2],f[e+12>>2]=n},o[275]=function(e,t,n,i,a,r,s){e|=0,t|=0,n|=0,i|=0,a|=0,r|=0,s|=0;var c,l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0);R=c=R-48|0,h=d[t+36>>2],p=d[t+20>>2],m=d[t+40>>2],v=d[t+24>>2],g=d[t+4>>2],A=d[t+8>>2],l=d[n+8>>2],x=d[t+32>>2],_=d[n>>2],b=d[t>>2],u=d[n+4>>2],C=d[t+16>>2],f[c+44>>2]=0,d[c+32>>2]=y(y(b*_)+y(C*u))+y(x*l),d[c+40>>2]=y(y(_*A)+y(u*v))+y(l*m),d[c+36>>2]=y(y(_*g)+y(u*p))+y(l*h),o[f[f[e>>2]+64>>2]](c+16|0,e,c+32|0),A=d[t+56>>2],x=d[t+40>>2],b=d[t+36>>2],g=d[t+52>>2],C=d[t+24>>2],S=d[t+20>>2],E=d[t+32>>2],v=d[t+48>>2],w=d[t+8>>2],T=d[t>>2],P=d[t+4>>2],I=d[t+16>>2],l=d[c+24>>2],_=d[c+16>>2],u=d[c+20>>2],f[c+12>>2]=0,d[c+8>>2]=-d[c+40>>2],d[c+4>>2]=-d[c+36>>2],d[c>>2]=-d[c+32>>2],o[f[f[e>>2]+64>>2]](c+16|0,e,c),N=d[t+56>>2],D=d[t+40>>2],M=d[t+36>>2],O=d[t+52>>2],z=d[t+24>>2],L=d[t+20>>2],F=d[t+32>>2],U=d[t+48>>2],B=d[t+8>>2],k=d[t>>2],j=d[t+4>>2],G=d[t+16>>2],h=d[c+24>>2],p=d[c+16>>2],m=d[c+20>>2],v=y(v+y(y(y(_*T)+y(u*P))+y(l*w))),g=y(g+y(y(y(_*I)+y(u*S))+y(l*C))),l=y(A+y(y(y(_*E)+y(u*b))+y(l*x))),d[i>>2]=y(y(v*d[n>>2])+y(g*d[n+4>>2]))+y(l*d[n+8>>2]),_=y(U+y(y(y(p*k)+y(m*j))+y(h*B))),u=y(O+y(y(y(p*G)+y(m*L))+y(h*z))),h=y(N+y(y(y(p*F)+y(m*M))+y(h*D))),d[a>>2]=y(y(_*d[n>>2])+y(u*d[n+4>>2]))+y(h*d[n+8>>2]),f[s+12>>2]=0,d[s+8>>2]=h,d[s+4>>2]=u,d[s>>2]=_,f[r+12>>2]=0,d[r+8>>2]=l,d[r+4>>2]=g,d[r>>2]=v,(p=d[i>>2])>(m=d[a>>2])&&(d[i>>2]=m,d[a>>2]=p,f[s+12>>2]=0,d[s+8>>2]=l,d[s+4>>2]=g,d[s>>2]=v,f[r+12>>2]=0,d[r+8>>2]=h,d[r+4>>2]=u,d[r>>2]=_),R=c+48|0},o[276]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var o=0,a=y(0),r=0,s=0,c=y(0),l=y(0),_=0,u=y(0),h=y(0),p=0;if((0|i)>=1)for(p=e+60|0;r=(o=s<<4)+n|0,a=d[(o=t+o|0)>>2],c=d[o+4>>2],l=d[o+8>>2],u=y(y(y(a*d[e+76>>2])+y(c*d[e+80>>2]))+y(l*d[e+84>>2])),h=y(y(y(a*d[e+92>>2])+y(c*d[e+96>>2]))+y(l*d[e+100>>2])),a=y(y(y(a*d[e+60>>2])+y(c*d[e+64>>2]))+y(l*d[e+68>>2])),_=f[4+(o=((a<u?u<h?2:1:(a<h)<<1)<<4)+p|0)>>2],f[r>>2]=f[o>>2],f[r+4>>2]=_,_=f[o+12>>2],f[r+8>>2]=f[o+8>>2],f[r+12>>2]=_,(0|(s=s+1|0))!=(0|i););},o[277]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=0,b=0,C=y(0),S=y(0),E=y(0),w=y(0),T=0,P=0;for(R=a=R-80|0,w=y(o[f[f[e>>2]+48>>2]](e));f[a+72>>2]=0,f[a+76>>2]=0,f[a+64>>2]=0,f[a+68>>2]=0,f[(T=(x=b<<2)+(a- -64|0)|0)>>2]=1065353216,l=d[t+32>>2],_=d[t>>2],u=d[t+16>>2],h=d[t+36>>2],p=d[t+4>>2],m=d[t+20>>2],r=d[t+40>>2],s=d[t+8>>2],c=d[t+24>>2],f[a+44>>2]=0,v=s,s=d[a+64>>2],g=c,c=d[a+68>>2],A=r,r=d[a+72>>2],d[a+40>>2]=y(y(v*s)+y(g*c))+y(A*r),d[a+36>>2]=y(y(s*p)+y(c*m))+y(r*h),d[a+32>>2]=y(y(_*s)+y(u*c))+y(l*r),o[f[f[e>>2]+64>>2]](a+48|0,e,a+32|0),l=d[t+48>>2],_=d[t+8>>2],u=d[t>>2],h=d[t+4>>2],p=d[t+52>>2],m=d[t+24>>2],A=d[t+16>>2],C=d[t+20>>2],s=d[t+56>>2],r=d[t+40>>2],c=d[t+32>>2],S=d[t+36>>2],f[a+44>>2]=0,v=s,s=d[a+48>>2],E=y(c*s),c=d[a+52>>2],g=r,r=d[a+56>>2],d[a+40>>2]=v+y(y(E+y(S*c))+y(g*r)),d[a+36>>2]=p+y(y(y(s*A)+y(c*C))+y(r*m)),d[a+32>>2]=l+y(y(y(s*u)+y(c*h))+y(r*_)),P=(a+32|0)+x|0,d[i+x>>2]=w+d[P>>2],f[T>>2]=-1082130432,l=d[t+32>>2],_=d[t>>2],u=d[t+16>>2],h=d[t+36>>2],p=d[t+4>>2],m=d[t+20>>2],r=d[t+40>>2],s=d[t+8>>2],c=d[t+24>>2],f[a+12>>2]=0,v=s,s=d[a+64>>2],g=c,c=d[a+68>>2],A=r,r=d[a+72>>2],d[a+8>>2]=y(y(v*s)+y(g*c))+y(A*r),d[a+4>>2]=y(y(s*p)+y(c*m))+y(r*h),d[a>>2]=y(y(_*s)+y(u*c))+y(l*r),o[f[f[e>>2]+64>>2]](a+16|0,e,a),l=d[t+48>>2],_=d[t+8>>2],u=d[t>>2],h=d[t+4>>2],p=d[t+52>>2],m=d[t+24>>2],A=d[t+16>>2],C=d[t+20>>2],s=d[t+56>>2],r=d[t+40>>2],c=d[t+32>>2],S=d[t+36>>2],f[a+44>>2]=0,v=s,s=d[a+16>>2],E=y(c*s),c=d[a+20>>2],g=r,r=d[a+24>>2],d[a+40>>2]=v+y(y(E+y(S*c))+y(g*r)),d[a+36>>2]=p+y(y(y(s*A)+y(c*C))+y(r*m)),d[a+32>>2]=l+y(y(y(s*u)+y(c*h))+y(r*_)),d[n+x>>2]=d[P>>2]-w,3!=(0|(b=b+1|0)););R=a+80|0},o[278]=function(){return 2},o[279]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0);r=d[e+92>>2],s=d[e+76>>2],c=d[e+80>>2],_=d[e+100>>2],o=d[e+68>>2],u=d[e+84>>2],l=d[e+96>>2],i=d[e- -64>>2],a=d[e+60>>2],f[n+12>>2]=0,s=y(s-a),l=y(l-i),c=y(c-i),a=y(r-a),h=i=y(y(s*l)-y(c*a)),p=y(i*i),i=y(_-o),r=y(u-o),o=y(y(c*i)-y(r*l)),i=y(y(r*a)-y(s*i)),a=y(y(1)/y(S(y(p+y(y(o*o)+y(i*i)))))),r=y(h*a),d[n+8>>2]=r,i=y(i*a),d[n+4>>2]=i,o=y(o*a),d[n>>2]=o,t&&(d[n+8>>2]=-r,d[n+4>>2]=-i,d[n>>2]=-o)},o[280]=function(e,t){e|=0,t|=0;var n,i=0,r=0,s=0,c=0,l=0,_=0,u=0,p=0,m=0,v=y(0),A=0,x=y(0),b=y(0),C=0,E=0,w=y(0),T=0,P=y(0),I=0,N=0,D=0,M=y(0),O=y(0);R=n=R-240|0,(i=f[e+56>>2])&&(o[f[f[i>>2]>>2]](i),(i=f[e+56>>2])&&(f[6258]=f[6258]+1,o[f[4969]](i))),f[6257]=f[6257]+1,function(e){f[e>>2]=11340,a[e+20|0]=1,f[e+16>>2]=0,a[e+40|0]=1,f[e+8>>2]=0,f[e+12>>2]=0,f[e+36>>2]=0,a[e+60|0]=1,f[e+28>>2]=0,f[e+32>>2]=0,f[e+56>>2]=0,f[e+48>>2]=0,f[e+52>>2]=0}(i=0|o[f[4968]](132,16)),f[e+56>>2]=i,f[n+228>>2]=0,f[n+220>>2]=0,f[n+224>>2]=0,a[n+232|0]=1;e:if(!((0|o[f[f[e>>2]+96>>2]](e))<1))for(;;){if((0|c)==(0|_))if((0|_)>=(0|(r=_?_<<1:1)))i=l;else{s=0,i=0,r&&(f[6257]=f[6257]+1,i=0|o[f[4968]](r<<4,16));t:{n:{if((0|_)>=1)for(;;)if(p=A=(u=s<<4)+i|0,C=f[4+(u=l+u|0)>>2],f[p>>2]=f[u>>2],f[p+4>>2]=C,p=f[u+12>>2],f[A+8>>2]=f[u+8>>2],f[A+12>>2]=p,(0|_)==(0|(s=s+1|0)))break n;if(!l)break t}h[n+232|0]&&l&&(f[6258]=f[6258]+1,o[f[4969]](l)),f[n+228>>2]=0}f[n+228>>2]=i,a[n+232|0]=1,f[n+224>>2]=r}else i=l;if(f[n+220>>2]=c+1,i=(r=c<<4)+i|0,c=f[n+156>>2],f[i>>2]=f[n+152>>2],f[i+4>>2]=c,c=f[n+164>>2],f[i+8>>2]=f[n+160>>2],f[i+12>>2]=c,l=f[n+228>>2],o[f[f[e>>2]+108>>2]](e,m,r+l|0),(0|(m=m+1|0))>=(0|o[f[f[e>>2]+96>>2]](e)))break e;_=f[n+224>>2],c=f[n+220>>2]}if(a[n+188|0]=1,f[n+184>>2]=0,a[n+208|0]=1,f[n+176>>2]=0,f[n+180>>2]=0,f[n+204>>2]=0,f[n+196>>2]=0,f[n+200>>2]=0,f[n+164>>2]=0,a[n+168|0]=1,f[n+156>>2]=0,f[n+160>>2]=0,t){if(f[n+60>>2]=0,a[n+64|0]=1,f[n+52>>2]=0,f[n+56>>2]=0,function(e,t){var n,i=0,r=0,s=y(0),c=y(0),l=y(0),_=y(0),u=0,p=0,m=0,v=y(0),g=0,A=0,x=0,b=0,C=0,E=y(0),w=0,T=y(0),P=0,I=0,R=0,N=y(0),D=0;if((0|(n=f[e+4>>2]))>=1)for(;;){e:if(!((0|(x=(i=x)+1|0))>=(0|n)))for(I=g=(r=f[e+12>>2])+(i<<4)|0,i=x;;){t:if(!((0|(b=i+1|0))>=(0|n)))for(R=w=(i<<4)+r|0,C=b;;){for(s=d[g>>2],l=y(d[w>>2]-s),i=(C<<4)+r|0,c=d[g+4>>2],_=y(d[i+4>>2]-c),c=y(d[w+4>>2]-c),s=y(d[i>>2]-s),N=y(y(l*_)-y(c*s)),v=d[I+8>>2],E=y(d[R+8>>2]-v),T=y(E*s),s=y(d[i+8>>2]-v),T=y(T-y(l*s)),E=y(y(c*s)-y(E*_)),s=y(1),r=0;;){D=r,l=y(N*s),c=y(E*s),_=y(T*s);n:if((s=y(y(l*l)+y(y(c*c)+y(_*_))))>y(9999999747378752e-20)){if(v=y(y(1)/y(S(s))),s=y(l*v),l=y(_*v),c=y(c*v),(0|(u=f[t+4>>2]))>=1)for(m=f[t+12>>2],i=0;;){if(y(y(y(c*d[(r=m+(i<<4)|0)>>2])+y(l*d[r+4>>2]))+y(s*d[r+8>>2]))>y(.9990000128746033))break n;if((0|u)==(0|(i=i+1|0)))break}if(_=y(y(y(c*d[g>>2])+y(l*d[g+4>>2]))+y(s*d[I+8>>2])),(0|(m=f[e+4>>2]))>=1)for(p=f[e+12>>2],i=0;;){if(y(y(y(y(y(c*d[(r=p+(i<<4)|0)>>2])+y(l*d[r+4>>2]))+y(s*d[r+8>>2]))-_)+y(-.009999999776482582))>y(0))break n;if((0|m)==(0|(i=i+1|0)))break}if(_=y(-_),f[t+8>>2]==(0|u)&&!((0|u)>=(0|(i=u?u<<1:1)))){if(r=0,m=0,i&&(f[6257]=f[6257]+1,m=0|o[f[4968]](i<<4,16),u=f[t+4>>2]),(0|u)>=1)for(;A=(p=r<<4)+m|0,p=p+f[t+12>>2]|0,P=f[p+4>>2],f[A>>2]=f[p>>2],f[A+4>>2]=P,P=f[p+12>>2],f[A+8>>2]=f[p+8>>2],f[A+12>>2]=P,(0|u)!=(0|(r=r+1|0)););(r=f[t+12>>2])&&(h[t+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[t+12>>2]=0),f[t+12>>2]=m,a[t+16|0]=1,f[t+8>>2]=i,u=f[t+4>>2]}i=f[t+12>>2]+(u<<4)|0,d[i+12>>2]=_,d[i+8>>2]=s,d[i+4>>2]=l,d[i>>2]=c,f[t+4>>2]=f[t+4>>2]+1}if(s=y(-1),r=1,D)break}if((0|(C=C+1|0))>=(0|n))break t;r=f[e+12>>2]}if((0|n)==(0|b))break e;r=f[e+12>>2],i=b}if((0|n)==(0|x))break}}(n+216|0,n+48|0),f[n+140>>2]=0,a[n+144|0]=1,f[n+132>>2]=0,f[n+136>>2]=0,f[n+52>>2]>=1)for(l=0;;){if(t=f[n+60>>2]+(l<<4)|0,f[n+112>>2]=f[t+8>>2],i=f[t+4>>2],f[n+104>>2]=f[t>>2],f[n+108>>2]=i,v=y(d[t+12>>2]-y(o[f[f[e>>2]+48>>2]](e))),(0|(_=f[n+132>>2]))==f[n+136>>2]&&!((0|_)>=(0|(t=_?_<<1:1)))){if(s=0,i=0,t&&(f[6257]=f[6257]+1,i=0|o[f[4968]](t<<4,16),_=f[n+132>>2]),(0|_)>=1)for(;c=(r=s<<4)+i|0,r=r+f[n+140>>2]|0,A=f[r+4>>2],f[c>>2]=f[r>>2],f[c+4>>2]=A,u=f[r+12>>2],f[c+8>>2]=f[r+8>>2],f[c+12>>2]=u,(0|_)!=(0|(s=s+1|0)););(r=f[n+140>>2])&&(h[n+144|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[n+140>>2]=0),f[n+140>>2]=i,a[n+144|0]=1,f[n+136>>2]=t,_=f[n+132>>2]}if(i=f[n+108>>2],t=f[n+140>>2]+(_<<4)|0,f[t>>2]=f[n+104>>2],f[t+4>>2]=i,i=f[n+112>>2],d[t+12>>2]=v,f[t+8>>2]=i,f[n+132>>2]=f[n+132>>2]+1,!((0|(l=l+1|0))<f[n+52>>2]))break}f[n+116>>2]=0,a[n+120|0]=1,f[n+108>>2]=0,f[n+112>>2]=0,ze(n+128|0,n+104|0),k(n+152|0,f[n+116>>2],f[n+108>>2]),(t=f[n+116>>2])&&(h[n+120|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[n+116>>2]=0),(t=f[n+140>>2])&&(h[n+144|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[n+140>>2]=0),(t=f[n+60>>2])&&(h[n+64|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[n+60>>2]=0)}else k(n+152|0,l,f[n+220>>2]);if(r=0,(0|(u=f[n+196>>2]))>=1)for(s=0,f[6257]=f[6257]+1,I=0|o[f[4968]](u<<4,16);c=f[n+52>>2],f[(i=t=(s<<4)+I|0)>>2]=f[n+48>>2],f[i+4>>2]=c,i=f[n+60>>2],f[t+8>>2]=f[n+56>>2],f[t+12>>2]=i,(0|u)!=(0|(s=s+1|0)););f[n+140>>2]=0,a[n+144|0]=1,f[n+132>>2]=0,f[n+136>>2]=0,a[n+63|0]=0,a[n+64|0]=0,a[n+65|0]=0,a[n+66|0]=0,f[n+56>>2]=0,f[n+60>>2]=0,f[n+48>>2]=0,f[n+52>>2]=0;e:{if((0|u)<=-1)for(i=u;;){if(t=g(i,36)+r|0,(c=f[(r=t)+12>>2])&&(h[t+16|0]&&c&&(f[6258]=f[6258]+1,o[f[4969]](c)),f[r+12>>2]=0),a[t+16|0]=1,f[r+12>>2]=0,f[t+4>>2]=0,f[t+8>>2]=0,(t=i+1|0)>>>0<i>>>0)break e;r=f[n+140>>2],i=t}if(u)for(yt(n+128|0,u),c=r=n+48|3,i=0;t=f[n+140>>2]+g(i,36)|0,f[t+4>>2]=0,f[t+8>>2]=0,a[t+16|0]=1,f[t+12>>2]=0,l=h[r+4|0]|h[r+5|0]<<8|h[r+6|0]<<16|h[r+7|0]<<24,s=h[0|r]|h[r+1|0]<<8|h[r+2|0]<<16|h[r+3|0]<<24,a[t+20|0]=s,a[t+21|0]=s>>>8,a[t+22|0]=s>>>16,a[t+23|0]=s>>>24,a[t+24|0]=l,a[t+25|0]=l>>>8,a[t+26|0]=l>>>16,a[t+27|0]=l>>>24,l=h[c+12|0]|h[c+13|0]<<8|h[c+14|0]<<16|h[c+15|0]<<24,s=h[c+8|0]|h[c+9|0]<<8|h[c+10|0]<<16|h[c+11|0]<<24,a[t+28|0]=s,a[t+29|0]=s>>>8,a[t+30|0]=s>>>16,a[t+31|0]=s>>>24,a[t+32|0]=l,a[t+33|0]=l>>>8,a[t+34|0]=l>>>16,a[t+35|0]=l>>>24,(0|u)!=(0|(i=i+1|0)););}if(f[n+132>>2]=u,i=f[e+56>>2],(0|(s=f[i+8>>2]))<(0|(l=f[n+156>>2]))){if(f[i+12>>2]<(0|l)){if(l?(f[6257]=f[6257]+1,c=0|o[f[4968]](l<<4,16),t=f[i+8>>2]):(c=0,t=s),(0|t)>=1)for(r=0;m=A=(_=r<<4)+c|0,_=_+f[i+16>>2]|0,p=f[_+4>>2],f[m>>2]=f[_>>2],f[m+4>>2]=p,m=f[_+12>>2],f[A+8>>2]=f[_+8>>2],f[A+12>>2]=m,(0|t)!=(0|(r=r+1|0)););(t=f[i+16>>2])&&(h[i+20|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[i+16>>2]=0),f[i+16>>2]=c,f[i+12>>2]=l,a[i+20|0]=1}for(;c=f[n+52>>2],t=f[i+16>>2]+(s<<4)|0,f[(r=t)>>2]=f[n+48>>2],f[r+4>>2]=c,r=f[n+60>>2],f[t+8>>2]=f[n+56>>2],f[t+12>>2]=r,(0|l)!=(0|(s=s+1|0)););}if(f[i+8>>2]=l,s=0,(0|l)>0)for(;t=(i=s<<4)+f[f[e+56>>2]+16>>2]|0,i=i+f[n+164>>2]|0,r=f[i+4>>2],f[t>>2]=f[i>>2],f[t+4>>2]=r,r=f[i+12>>2],f[t+8>>2]=f[i+8>>2],f[t+12>>2]=r,(0|l)!=(0|(s=s+1|0)););if((0|u)>=1)for(t=0;;){for(l=0,i=T=f[n+184>>2]+g(f[f[n+204>>2]+(t<<2)>>2],12)|0;;){if(A=c=(C=g(t,36))+f[n+140>>2]|0,E=f[8+(g(f[i+4>>2],12)+i|0)>>2],(0|(r=f[c+4>>2]))==f[c+8>>2]&&!((0|r)>=(0|(p=r?r<<1:1)))){s=0,_=0,p&&(f[6257]=f[6257]+1,_=0|o[f[4968]](p<<2,16),r=f[A+4>>2]),m=f[c+12>>2];e:{t:{if((0|r)>=1)for(;;)if(f[(N=s<<2)+_>>2]=f[m+N>>2],(0|(s=s+1|0))==(0|r))break t;if(!m)break e}h[c+16|0]&&m&&(f[6258]=f[6258]+1,o[f[4969]](m)),f[c+12>>2]=0,r=f[A+4>>2]}a[c+16|0]=1,f[c+12>>2]=_,f[c+8>>2]=p}if(f[f[c+12>>2]+(r<<2)>>2]=E,f[A+4>>2]=f[A+4>>2]+1,(0|l)<=1&&(c=f[n+164>>2],v=d[4+(r=c+(E<<4)|0)>>2],c=c+(f[i+8>>2]<<4)|0,x=d[c+4>>2],b=d[r>>2],w=d[c>>2],P=d[r+8>>2],M=d[c+8>>2],f[12+(r=(n+48|0)+(l<<4)|0)>>2]=0,b=y(w-b),x=y(x-v),w=y(M-P),v=y(y(1)/y(S(y(y(y(b*b)+y(x*x))+y(w*w))))),d[r+8>>2]=w*v,d[r+4>>2]=x*v,d[r>>2]=b*v,l=l+1|0),i=g(f[i+4>>2],12)+i|0,(0|T)==(0|(i=g(f[i>>2],12)+i|0)))break}if(2!=(0|l)?(f[(i=(t<<4)+I|0)>>2]=0,f[i+4>>2]=0,f[i+8>>2]=0,f[i+12>>2]=0,i=f[n+140>>2]):(v=d[n+52>>2],b=d[n+68>>2],x=d[n+64>>2],w=d[n+56>>2],P=d[n+48>>2],M=d[n+72>>2],f[12+(r=(t<<4)+I|0)>>2]=0,O=y(y(b*P)-y(v*x)),b=y(y(v*M)-y(w*b)),x=y(y(w*x)-y(M*P)),v=y(y(1)/y(S(y(y(O*O)+y(y(b*b)+y(x*x)))))),d[r+8>>2]=O*v,d[r+4>>2]=x*v,v=y(b*v),d[r>>2]=v,i=f[n+140>>2],d[20+(c=C+i|0)>>2]=v,f[c+24>>2]=f[r+4>>2],r=f[r+8>>2],f[c+32>>2]=1900671690,f[c+28>>2]=r),(0|(c=f[4+(i=i+C|0)>>2]))<1)v=y(1.0000000150474662e30);else for(l=f[i+12>>2],b=d[8+(r=(t<<4)+I|0)>>2],x=d[r+4>>2],w=d[r>>2],_=f[f[e+56>>2]+16>>2],v=y(1.0000000150474662e30),s=0;r=_+(f[l+(s<<2)>>2]<<4)|0,v=v>(P=y(y(y(d[r>>2]*w)+y(d[r+4>>2]*x))+y(d[r+8>>2]*b)))?P:v,(0|c)!=(0|(s=s+1|0)););if(d[i+32>>2]=-v,(0|u)==(0|(t=t+1|0)))break}u=0;e:if(f[n+132>>2]>0){for(A=0,_=0;;){if((0|_)==(0|u))if(u>>>0>=(_=u?u<<1:1)>>>0)_=u;else{s=0,f[6257]=f[6257]+1,t=0|o[f[4968]](_<<2,16);t:{n:{if(u)for(;;)if(f[(i=s<<2)+t>>2]=f[i+A>>2],(0|u)==(0|(s=s+1|0)))break n;if(!A){_=1;break t}}A&&(f[6258]=f[6258]+1,o[f[4969]](A))}A=t}if(f[(u<<2)+A>>2]=u,!((0|(u=u+1|0))<f[n+132>>2]))break}for(;;){t=f[((c=u+-1|0)<<2)+A>>2],f[6257]=f[6257]+1,i=0|o[f[4968]](4,16),f[i>>2]=t;t:{if((0|u)<2)_=1,t=i,u=c;else{for(t=(s=f[n+140>>2])+g(t,36)|0,v=d[t+20>>2],b=d[t+28>>2],x=d[t+24>>2],l=u+-2|0,r=1,u=c,_=1;;){m=f[(l<<2)+A>>2],t=g(m,36)+s|0;n:if(y(y(y(v*d[t+20>>2])+y(x*d[t+24>>2]))+y(b*d[t+28>>2]))>y(.9990000128746033)){i:if((0|r)!=(0|_)||(0|r)>=(0|(c=r?r<<1:1)))c=r,t=i;else{s=0,t=0,c&&(f[6257]=f[6257]+1,t=0|o[f[4968]](c<<2,16));o:{if((0|r)>=1)for(;;)if(f[(p=s<<2)+t>>2]=f[i+p>>2],(0|(s=s+1|0))==(0|r))break o;if(!i)break i}i&&(f[6258]=f[6258]+1,o[f[4969]](i))}if(f[(_<<2)+t>>2]=m,_=_+1|0,s=0,!((0|u)<1)){for(;;){if((0|m)!=f[(i=(s<<2)+A|0)>>2]){if((0|u)!=(0|(s=s+1|0)))continue;break n}break}(0|u)<=(0|s)||(r=i,i=((u=u+-1|0)<<2)+A|0,f[r>>2]=f[i>>2],f[i>>2]=m)}}else c=r,t=i;if(!((0|l)>=1))break;l=l+-1|0,s=f[n+140>>2],i=t,r=c}n:if(!((0|_)<=1)){for(i=0,f[n+116>>2]=0,a[n+120|0]=1,f[n+108>>2]=0,f[n+112>>2]=0,f[n+40>>2]=0,f[n+44>>2]=0,f[n+32>>2]=0,f[n+36>>2]=0,v=y(0),b=y(0),x=y(0),c=0;;){if(r=f[n+140>>2]+g(f[(c<<2)+t>>2],36)|0,w=d[r+24>>2],P=d[r+28>>2],d[n+32>>2]=d[r+20>>2]+x,d[n+40>>2]=P+v,d[n+36>>2]=w+b,(0|(l=f[r+4>>2]))>=1)for(m=0;;){N=f[f[r+12>>2]+(m<<2)>>2],s=f[f[e+56>>2]+16>>2]+(N<<4)|0,p=f[s+12>>2],f[n+16>>2]=f[s+8>>2],f[n+20>>2]=p,p=f[s+4>>2],f[n+8>>2]=f[s>>2],f[n+12>>2]=p;i:{if((0|i)>=1)for(p=(0|i)>1?i:1,s=0,C=f[n+116>>2];;){if((0|N)==f[20+(C+g(s,24)|0)>>2])break i;if((0|p)==(0|(s=s+1|0)))break}if(l=f[n+20>>2],f[n+56>>2]=f[n+16>>2],f[n+60>>2]=l,l=f[n+12>>2],f[n+48>>2]=f[n+8>>2],f[n+52>>2]=l,f[n+112>>2]==(0|i)&&!((0|i)>=(0|(T=i?i<<1:1)))){s=0,l=0,T&&(f[6257]=f[6257]+1,l=0|o[f[4968]](g(T,24),16),i=f[n+108>>2]),C=f[n+116>>2];o:{a:{if((0|i)>=1)for(;;)if(E=(p=g(s,24))+l|0,D=f[4+(p=p+C|0)>>2],f[E>>2]=f[p>>2],f[E+4>>2]=D,D=f[p+20>>2],f[E+16>>2]=f[p+16>>2],f[E+20>>2]=D,D=f[p+12>>2],f[E+8>>2]=f[p+8>>2],f[E+12>>2]=D,(0|(s=s+1|0))==(0|i))break a;if(!C)break o}h[n+120|0]&&(C&&(f[6258]=f[6258]+1,o[f[4969]](C)),i=f[n+108>>2]),f[n+116>>2]=0}f[n+116>>2]=l,a[n+120|0]=1,f[n+112>>2]=T}l=f[n+52>>2],i=f[n+116>>2]+g(i,24)|0,f[i>>2]=f[n+48>>2],f[i+4>>2]=l,l=f[n+60>>2],s=f[n+56>>2],p=f[n- -64>>2],f[i+20>>2]=N,f[i+16>>2]=p,f[i+8>>2]=s,f[i+12>>2]=l,i=f[n+108>>2]+1|0,f[n+108>>2]=i,l=f[r+4>>2]}if(!((0|(m=m+1|0))<(0|l)))break}if(v=d[n+40>>2],b=d[n+36>>2],x=d[n+32>>2],(0|_)==(0|(c=c+1|0)))break}if(f[n+60>>2]=0,a[n+64|0]=1,f[n+52>>2]=0,f[n+56>>2]=0,i=f[n+140>>2]+g(f[t>>2],36)|0,f[n+68>>2]=f[i+20>>2],f[n+72>>2]=f[i+24>>2],f[n+76>>2]=f[i+28>>2],f[n+80>>2]=f[i+32>>2],w=x,x=y(y(1)/y(S(y(y(y(x*x)+y(b*b))+y(v*v))))),d[n+32>>2]=w*x,d[n+36>>2]=b*x,d[n+40>>2]=v*x,f[n+20>>2]=0,a[n+24|0]=1,f[n+12>>2]=0,f[n+16>>2]=0,B(n+104|0,n+8|0,n+32|0),f[n+12>>2]<=0)i=f[n+108>>2];else for(c=0,l=f[n+52>>2];;){if(C=(p=g(c,24))+f[n+20>>2]|0,f[n+56>>2]==(0|l)&&!((0|l)>=(0|(m=l?l<<1:1)))){s=0,r=0,m&&(f[6257]=f[6257]+1,r=0|o[f[4968]](m<<2,16),l=f[n+52>>2]),i=f[n+60>>2];i:{o:{if((0|l)>=1)for(;;)if(f[(E=s<<2)+r>>2]=f[i+E>>2],(0|l)==(0|(s=s+1|0)))break o;if(!i)break i}h[n+64|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[n+60>>2]=0,l=f[n+52>>2]}f[n+60>>2]=r,a[n+64|0]=1,f[n+56>>2]=m}f[f[n+60>>2]+(l<<2)>>2]=f[C+20>>2],l=f[n+52>>2]+1|0,f[n+52>>2]=l;i:if(!((0|(i=f[n+108>>2]))<1)){for(r=f[20+(p+f[n+20>>2]|0)>>2],s=0,m=f[n+116>>2];;){if(p=m+g(s,24)|0,(0|r)!=f[p+20>>2]){if((0|(s=s+1|0))!=(0|i))continue;break i}break}f[p+20>>2]=-1}if(!((0|(c=c+1|0))<f[n+12>>2]))break}if((0|i)>=1)for(m=0,l=f[n+140>>2],c=f[n+132>>2],p=f[n+116>>2];;){if(-1!=(0|(C=f[20+(p+g(m,24)|0)>>2]))&&(r=0,!((0|c)<1)))for(;;){s=0;i:{if((0|_)>0)for(;;){if(f[(s<<2)+t>>2]==(0|r))break i;if((0|_)==(0|(s=s+1|0)))break}if(s=l+g(r,36)|0,!((0|(E=f[s+4>>2]))<1)){for(T=f[s+12>>2],s=0;;){if((0|C)!=f[T+(s<<2)>>2]){if((0|(s=s+1|0))<(0|E))continue;break i}break}if((i=f[n+20>>2])&&(h[n+24|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[n+20>>2]=0),(i=f[n+60>>2])&&(h[n+64|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[n+60>>2]=0),!(i=f[n+116>>2]))break n;h[n+120|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[n+116>>2]=0;break n}}if((0|c)==(0|(r=r+1|0)))break}if((0|(m=m+1|0))==(0|i))break}if(an(f[e+56>>2]+24|0,n+48|0),(i=f[n+20>>2])&&(h[n+24|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[n+20>>2]=0),(i=f[n+60>>2])&&(h[n+64|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[n+60>>2]=0),!(i=f[n+116>>2]))break t;h[n+120|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[n+116>>2]=0;break t}if((0|_)<1)break t}for(m=0;;){if(i=f[(m<<2)+t>>2],f[n+60>>2]=0,f[n+52>>2]=0,f[n+56>>2]=0,r=f[n+140>>2],a[n+64|0]=1,i=r+g(i,36)|0,(0|(r=f[i+4>>2]))>=1){f[6257]=f[6257]+1,p=r<<2,l=0|o[f[4968]](p,16),s=0,c=f[n+60>>2];n:{i:{if((0|(C=f[n+52>>2]))>=1)for(;;)if(f[(E=s<<2)+l>>2]=f[c+E>>2],(0|C)==(0|(s=s+1|0)))break i;if(!c)break n}h[n+64|0]&&c&&(f[6258]=f[6258]+1,o[f[4969]](c))}for(f[n+60>>2]=l,a[n+64|0]=1,f[n+56>>2]=r,s=0,dn(l,0,p),f[n+52>>2]=r,c=f[i+12>>2],l=f[n+60>>2];f[(p=s<<2)+l>>2]=f[c+p>>2],(0|r)!=(0|(s=s+1|0)););}else f[n+52>>2]=r;if(r=f[i+24>>2],f[n+68>>2]=f[i+20>>2],f[n+72>>2]=r,r=f[i+32>>2],f[n+76>>2]=f[i+28>>2],f[n+80>>2]=r,an(f[e+56>>2]+24|0,n+48|0),(i=f[n+60>>2])&&(h[n+64|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[n+60>>2]=0),(0|(m=m+1|0))==(0|_))break}}if(t&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),!u)break}if(G(f[e+56>>2]),!A)break e;A&&(f[6258]=f[6258]+1,o[f[4969]](A))}else G(f[e+56>>2]);if((0|(c=f[n+132>>2]))>=1)for(i=0;e=f[n+140>>2]+g(i,36)|0,(r=f[(t=e)+12>>2])&&(h[e+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[t+12>>2]=0),a[e+16|0]=1,f[t+12>>2]=0,f[e+4>>2]=0,f[e+8>>2]=0,(0|c)!=(0|(i=i+1|0)););return(e=f[n+140>>2])&&(h[n+144|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[n+140>>2]=0),I&&I&&(f[6258]=f[6258]+1,o[f[4969]](I)),(e=f[n+204>>2])&&(h[n+208|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[n+204>>2]=0),f[n+204>>2]=0,a[n+208|0]=1,f[n+196>>2]=0,f[n+200>>2]=0,(e=f[n+184>>2])&&(h[n+188|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[n+184>>2]=0),f[n+184>>2]=0,a[n+188|0]=1,f[n+176>>2]=0,f[n+180>>2]=0,(e=f[n+164>>2])&&(h[n+168|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[n+164>>2]=0),(e=f[n+228>>2])&&(h[n+232|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[n+228>>2]=0),R=n+240|0,1},o[281]=ic,o[282]=ic,o[283]=function(e,t,n,i){t|=0,n|=0,i|=0,o[f[f[(e|=0)>>2]+108>>2]](e,t,n),o[f[f[e>>2]+108>>2]](e,(t+1|0)%3|0,i)},o[284]=function(e,t,n){n|=0,t=f[72+(e=((t|=0)<<4)+(e|=0)|0)>>2],f[n+8>>2]=f[e+68>>2],f[n+12>>2]=t,t=f[e+64>>2],f[n>>2]=f[e+60>>2],f[n+4>>2]=t},o[285]=nc,o[286]=function(e,t,n,i){t|=0,n|=0,i|=0,o[f[f[(e|=0)>>2]+124>>2]](e,i,t,n)},o[287]=function(e,t,n){e|=0,t|=0,n=y(n);var i,a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=0,A=0;R=i=R-32|0,a=d[e+60>>2],s=y(d[e+76>>2]-a),r=d[e- -64>>2],c=y(d[e+96>>2]-r),_=y(d[e+80>>2]-r),u=y(d[e+92>>2]-a),h=l=y(y(s*c)-y(_*u)),v=y(l*l),m=_,_=d[e+68>>2],l=y(d[e+100>>2]-_),p=y(d[e+84>>2]-_),c=y(y(m*l)-y(p*c)),s=y(y(p*u)-y(s*l)),u=y(y(1)/y(S(y(v+y(y(c*c)+y(s*s)))))),l=y(h*u),c=y(c*u),s=y(s*u);e:if(!((a=y(y(y(d[t+8>>2]*l)+y(y(d[t>>2]*c)+y(d[t+4>>2]*s)))-y(y(_*l)+y(y(a*c)+y(r*s)))))>=(_=y(-n))^1|a<=n^1)){for(;;){if(o[f[f[e>>2]+104>>2]](e,g,i+16|0,i),u=d[i+16>>2],a=y(d[i>>2]-u),p=d[i+20>>2],r=y(d[i+4>>2]-p),h=n=y(y(s*a)-y(c*r)),v=y(n*n),n=y(l*r),m=d[i+24>>2],r=y(d[i+8>>2]-m),n=y(n-y(s*r)),a=y(y(c*r)-y(l*a)),r=y(y(1)/y(S(y(v+y(y(n*n)+y(a*a)))))),h=y(h*r),n=y(n*r),a=y(a*r),!(y(y(y(d[t+8>>2]*h)+y(y(d[t>>2]*n)+y(d[t+4>>2]*a)))-y(y(m*h)+y(y(u*n)+y(p*a))))<_)){if(A=1,3!=(0|(g=g+1|0)))continue;break e}break}A=0}return R=i+32|0,0|A},o[288]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0);s=d[e+92>>2],c=d[e+76>>2],l=d[e+80>>2],u=d[e+100>>2],r=d[e+68>>2],h=d[e+84>>2],_=d[e+96>>2],o=d[e- -64>>2],a=d[e+60>>2],f[n+12>>2]=0,c=y(c-a),_=y(_-o),l=y(l-o),a=y(s-a),p=o=y(y(c*_)-y(l*a)),m=y(o*o),o=y(u-r),s=y(h-r),r=y(y(l*o)-y(s*_)),o=y(y(s*a)-y(c*o)),a=y(y(1)/y(S(y(m+y(y(r*r)+y(o*o)))))),d[n+8>>2]=p*a,d[n+4>>2]=o*a,d[n>>2]=r*a,t=f[e+72>>2],f[i+8>>2]=f[e+68>>2],f[i+12>>2]=t,t=f[e+64>>2],f[i>>2]=f[e+60>>2],f[i+4>>2]=t},o[289]=Qs,o[290]=rc,o[291]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var r=0,s=y(0);R=n=R-800|0,o[f[4966]](6956),f[n+740>>2]=0,f[n+744>>2]=0,f[n+752>>2]=0,f[n+756>>2]=0,f[n+748>>2]=1065353216,f[n+772>>2]=0,f[n+776>>2]=0,f[n+768>>2]=1065353216,f[n+780>>2]=0,f[n+784>>2]=0,f[n+788>>2]=0,f[n+732>>2]=0,f[n+736>>2]=0,f[n+728>>2]=1065353216,f[n+760>>2]=0,f[n+764>>2]=0,f[n+720>>2]=0,f[n+724>>2]=0,f[n+552>>2]=6980,f[n+716>>2]=f[e+200>>2],i=f[e+196>>2],Fo(n+496|0),f[n+524>>2]=0,f[n+528>>2]=0,f[n+520>>2]=1065353216,f[n+532>>2]=0,f[n+536>>2]=0,f[n+540>>2]=0,f[n+512>>2]=1065353216,f[n+516>>2]=1065353216,f[n+496>>2]=11388,f[n+548>>2]=0,f[n+544>>2]=i,f[n+528>>2]=i,f[n+500>>2]=8,i=Ds(n+384|0),f[n+388>>2]=1,f[n+384>>2]=6568,r=f[t+12>>2],f[n+452>>2]=f[t+8>>2],f[n+456>>2]=r,r=f[t+4>>2],f[n+444>>2]=f[t>>2],f[n+448>>2]=r,r=f[t+20>>2],f[n+460>>2]=f[t+16>>2],f[n+464>>2]=r,r=f[t+28>>2],f[n+468>>2]=f[t+24>>2],f[n+472>>2]=r,r=f[t+36>>2],f[n+476>>2]=f[t+32>>2],f[n+480>>2]=r,r=f[t+44>>2],f[n+484>>2]=f[t+40>>2],f[n+488>>2]=r,a[n+356|0]=0,f[n+332>>2]=953267991,f[12+(t=n+8|0)>>2]=n+384,f[t+8>>2]=n+496,f[t+4>>2]=n+24,f[t>>2]=6276,q(t,e+4|0,e+68|0,n+728|0,n+728|0,n+552|0)&&(s=d[n+716>>2],d[e+200>>2]>s&&(d[e+200>>2]=s)),Sa(i),o[f[4967]](),R=n+800|0},o[292]=oc,o[293]=ac,o[294]=Xs,o[295]=Qs,o[296]=rc,o[297]=rc,o[298]=Ut,o[299]=function(e){var t=0,n=0;return f[(e|=0)>>2]=7100,h[e+8|0]&&(t=f[e+12>>2])&&(n=f[e+4>>2],o[f[f[n>>2]+16>>2]](n,t)),0|e},o[300]=function(e){var t=0,n=0;f[(e|=0)>>2]=7100,h[e+8|0]&&(t=f[e+12>>2])&&(n=f[e+4>>2],o[f[f[n>>2]+16>>2]](n,t)),ce(e)},o[301]=function(e,t,n,i,o){t|=0,n|=0,i|=0,o|=0;var a,r=0,s=0,c=0,l=0;R=a=R-160|0,(r=f[12+(e|=0)>>2])&&(s=f[n+4>>2],c=f[t+4>>2],f[o+4>>2]=r,f[a+152>>2]=1566444395,t=f[t+12>>2],r=f[t+12>>2],f[a+32>>2]=f[t+8>>2],f[a+36>>2]=r,r=f[t+4>>2],f[a+24>>2]=f[t>>2],f[a+28>>2]=r,r=f[t+28>>2],f[a+48>>2]=f[t+24>>2],f[a+52>>2]=r,r=f[t+20>>2],f[a+40>>2]=f[t+16>>2],f[a+44>>2]=r,l=f[t+44>>2],f[(r=a- -64|0)>>2]=f[t+40>>2],f[r+4>>2]=l,r=f[t+36>>2],f[a+56>>2]=f[t+32>>2],f[a+60>>2]=r,r=f[t+60>>2],f[a+80>>2]=f[t+56>>2],f[a+84>>2]=r,r=f[t+52>>2],f[a+72>>2]=f[t+48>>2],f[a+76>>2]=r,t=f[n+12>>2],n=f[t+12>>2],f[a+96>>2]=f[t+8>>2],f[a+100>>2]=n,n=f[t+4>>2],f[a+88>>2]=f[t>>2],f[a+92>>2]=n,n=f[t+20>>2],f[a+104>>2]=f[t+16>>2],f[a+108>>2]=n,n=f[t+28>>2],f[a+112>>2]=f[t+24>>2],f[a+116>>2]=n,n=f[t+36>>2],f[a+120>>2]=f[t+32>>2],f[a+124>>2]=n,n=f[t+44>>2],f[a+128>>2]=f[t+40>>2],f[a+132>>2]=n,n=f[t+52>>2],f[a+136>>2]=f[t+48>>2],f[a+140>>2]=n,n=f[t+60>>2],f[a+144>>2]=f[t+56>>2],f[a+148>>2]=n,f[8+(t=a+8|0)>>2]=s,f[t+4>>2]=c,f[t>>2]=7048,Ut(t,a+24|0,o,f[i+20>>2],0),h[e+8|0]&&(e=f[o+4>>2],f[e+844>>2]&&((0|(t=f[e+836>>2]))==(0|(n=f[f[o+8>>2]+8>>2]))?Se(e,t+4|0,f[f[o+12>>2]+8>>2]+4|0):Se(e,f[f[o+12>>2]+8>>2]+4|0,n+4|0)))),R=a+160|0},o[302]=Ts,o[303]=Wn,o[304]=rc,o[305]=function(e,t,n){t|=0,n|=0,f[24+(e|=0)>>2]=n,f[e+16>>2]=t},o[306]=function(e,t,n){t|=0,n|=0,f[28+(e|=0)>>2]=n,f[e+20>>2]=t},o[307]=function(e,t,n,i){e|=0,t|=0,n|=0,i=y(i);var a,r=0,s=y(0),c=0,l=y(0),_=y(0),u=y(0),p=y(0),m=0,v=y(0),C=0,E=y(0),w=0,T=0,P=y(0),I=0,N=0,D=0,M=y(0),O=y(0),z=y(0),L=0,F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0);if(R=a=R-208|0,!(d[f[e+4>>2]+848>>2]<i)){P=d[n+8>>2],_=y(y(d[t+8>>2]*i)+P),M=d[n+4>>2],v=y(y(d[t+4>>2]*i)+M),O=d[n>>2],E=y(y(d[t>>2]*i)+O),c=f[e+4>>2],L=f[c+844>>2],(m=(0|(w=f[c+836>>2]))==(0|(D=f[f[e+8>>2]+8>>2])))?(s=y(E-d[w+52>>2]),l=y(v-d[w+56>>2]),u=y(_-d[w+60>>2]),p=y(y(y(s*d[w+12>>2])+y(l*d[w+28>>2]))+y(u*d[w+44>>2])),z=y(y(y(s*d[w+8>>2])+y(l*d[w+24>>2]))+y(u*d[w+40>>2])),s=y(y(y(s*d[w+4>>2])+y(l*d[w+20>>2]))+y(u*d[w+36>>2])),r=f[f[e+12>>2]+8>>2]):(r=f[f[e+12>>2]+8>>2],s=y(E-d[r+52>>2]),l=y(v-d[r+56>>2]),u=y(_-d[r+60>>2]),p=y(y(y(s*d[r+12>>2])+y(l*d[r+28>>2]))+y(u*d[r+44>>2])),z=y(y(y(s*d[r+8>>2])+y(l*d[r+24>>2]))+y(u*d[r+40>>2])),s=y(y(y(s*d[r+4>>2])+y(l*d[r+20>>2]))+y(u*d[r+36>>2])),r=D),F=d[r+20>>2],U=d[r+36>>2],B=d[r+40>>2],k=d[r+8>>2],j=d[r+24>>2],G=d[r+44>>2],V=d[r+60>>2],l=d[r+12>>2],u=d[r+52>>2],H=d[r+28>>2],W=d[r+56>>2],q=d[r+4>>2],f[a+28>>2]=0,Y=l,l=y(O-u),u=y(M-W),P=y(P-V),d[a+24>>2]=y(y(Y*l)+y(H*u))+y(G*P),d[a+20>>2]=y(y(l*k)+y(u*j))+y(P*B),f[a+12>>2]=0,d[a+8>>2]=p,d[a+4>>2]=z,d[a>>2]=s,d[a+16>>2]=y(y(l*q)+y(u*F))+y(P*U),r=f[t+12>>2],f[a+72>>2]=f[t+8>>2],f[a+76>>2]=r,r=f[t>>2],t=f[t+4>>2],f[a+92>>2]=0,f[a+96>>2]=0,f[a+124>>2]=0,f[a+128>>2]=0,f[a+132>>2]=0,f[a+136>>2]=0,f[a+140>>2]=0,f[a+144>>2]=0,f[a+148>>2]=0,f[a+152>>2]=0,f[a+156>>2]=0,f[a+160>>2]=0,f[a+164>>2]=0,d[a+52>>2]=v,d[a+56>>2]=_,f[a+60>>2]=0,f[a+64>>2]=r,f[a+68>>2]=t,f[a+84>>2]=0,f[a+88>>2]=0,d[a+80>>2]=i,f[a+116>>2]=0,f[a+120>>2]=0,d[a+48>>2]=E,t=f[n+12>>2],f[a+40>>2]=f[n+8>>2],f[a+44>>2]=t,t=f[n+4>>2],f[a+32>>2]=f[n>>2],f[a+36>>2]=t,n=function(e,t){var n,i=y(0),o=y(0),a=0,r=0,s=y(0),c=y(0),l=y(0),_=y(0);if((0|(n=f[e+844>>2]))<1)r=-1;else for(c=d[t+8>>2],l=d[t+4>>2],_=d[t>>2],o=d[e+848>>2],o=y(o*o),t=0,r=-1;a=g(t,208)+e|0,i=y(d[a+4>>2]-_),s=y(i*i),i=y(d[a+8>>2]-l),s=y(s+y(i*i)),i=y(d[a+12>>2]-c),o=(a=(i=y(s+y(i*i)))<o)?i:o,r=a?t:r,(0|n)!=(0|(t=t+1|0)););return r}(c,a),t=f[e+12>>2],r=f[t+8>>2],C=f[e+8>>2],c=f[C+8>>2],m?(f[a+100>>2]=f[e+16>>2],f[a+104>>2]=f[e+20>>2],I=f[e+24>>2],f[a+108>>2]=I,N=f[e+28>>2],f[a+112>>2]=N,m=f[t>>2],T=f[(m||t)+4>>2],f[a+204>>2]=T,t=f[C>>2],m=C=f[(t||C)+4>>2],t=r,r=c,c=a+200|0):(f[a+100>>2]=f[e+20>>2],f[a+104>>2]=f[e+16>>2],I=f[e+28>>2],f[a+108>>2]=I,N=f[e+24>>2],f[a+112>>2]=N,m=f[t>>2],m=f[(m||t)+4>>2],f[a+200>>2]=m,t=f[C>>2],T=C=f[(t||C)+4>>2],t=c,c=a+204|0),f[c>>2]=C,C=f[r+260>>2],i=d[r+240>>2],_=d[r+236>>2],v=d[r+232>>2],E=d[r+228>>2];e:if(!((c=f[m+4>>2]+-21|0)>>>0>10)){switch(c-1|0){case 9:if(!h[m+180|0])break e;C=f[(r=I<<2)+f[m+172>>2]>>2],i=d[r+f[m+152>>2]>>2],v=d[r+f[m+132>>2]>>2],E=d[r+f[m+92>>2]>>2],_=d[r+f[m+112>>2]>>2];break e;case 0:case 1:case 3:case 5:case 6:case 7:case 8:break e}r=f[r+192>>2],31!=f[r+4>>2]|!h[r+180|0]||(c=f[m+12>>2]<<2,C=f[c+f[r+172>>2]>>2],i=d[c+f[r+152>>2]>>2],v=d[c+f[r+132>>2]>>2],E=d[c+f[r+92>>2]>>2],_=d[c+f[r+112>>2]>>2])}r=f[t+260>>2],s=d[t+240>>2],l=d[t+236>>2],u=d[t+232>>2],p=d[t+228>>2];e:if(!((c=f[T+4>>2]+-21|0)>>>0>10)){switch(c-1|0){case 9:if(!h[T+180|0])break e;r=f[(t=N<<2)+f[T+172>>2]>>2],s=d[t+f[T+152>>2]>>2],u=d[t+f[T+132>>2]>>2],p=d[t+f[T+92>>2]>>2],l=d[t+f[T+112>>2]>>2];break e;case 0:case 1:case 3:case 5:case 6:case 7:case 8:break e}t=f[t+192>>2],31!=f[t+4>>2]|!h[t+180|0]||(c=f[T+12>>2]<<2,r=f[c+f[t+172>>2]>>2],s=d[c+f[t+152>>2]>>2],u=d[c+f[t+132>>2]>>2],p=d[c+f[t+92>>2]>>2],l=d[c+f[t+112>>2]>>2])}c=e+4|0,t=a;e:if((r=(0|C)>(0|r)?C:r)>>>0<=2){switch(r-1|0){default:d[a+96>>2]=y(v+u)*y(.5),d[a+84>>2]=y(E+p)*y(.5),d[a+88>>2]=x(y(b(y(y(_+l)*y(.5)),y(-10))),y(10)),i=y(y(i+s)*y(.5));break e;case 0:d[a+96>>2]=v<u?v:u,d[a+84>>2]=E<p?E:p,d[a+88>>2]=x(y(b(_<l?_:l,y(-10))),y(10)),i=i<s?i:s;break e;case 1:}d[a+96>>2]=v*u,d[a+84>>2]=E*p,d[a+88>>2]=x(y(b(y(_*l),y(-10))),y(10)),i=y(i*s)}else d[a+96>>2]=v>u?v:u,d[a+84>>2]=E>p?E:p,d[a+88>>2]=x(y(b(_>l?_:l,y(-10))),y(10)),i=i>s?i:s;d[t+92>>2]=x(y(b(i,y(-10))),y(10)),i=d[a+72>>2],y(A(i))>y(.7071067690849304)?(p=d[a+68>>2],_=y(y(i*i)+y(p*p)),s=y(y(1)/y(S(_))),_=y(_*s),l=d[a+64>>2],v=y(s*y(-i)),E=y(l*v),i=y(p*s),s=y(i*y(-l)),l=y(0)):(_=d[a+64>>2],s=d[a+68>>2],v=y(y(_*_)+y(s*s)),p=y(y(1)/y(S(v))),E=y(v*p),l=y(p*y(-s)),s=y(i*l),v=y(_*p),_=y(v*y(-i)),i=y(0)),d[a+192>>2]=E,d[a+188>>2]=s,d[a+176>>2]=i,d[a+172>>2]=v,d[a+184>>2]=_,d[a+168>>2]=l,t=f[c>>2],(0|n)>=0?(r=t=t+g(n,208)|0,i=d[t+144>>2],s=d[t+140>>2],p=d[t+136>>2],m=f[t+168>>2],16&h[a+128|0]&&(_=y(y(p*d[t+88>>2])+y(0)),!(y(y(s*s)+y(i*i))>y(_*_)))||(T=f[t+120>>2],It(t+4|0,a,208),f[t+120>>2]=T,d[t+136>>2]=p,d[t+140>>2]=s,d[r+144>>2]=i),f[t+168>>2]=m):n=Wi(t,a),(r=f[5637])&&(t=e+12|0,e=e+8|0,(8&h[f[f[t>>2]+8>>2]+204|0]||8&h[f[f[e>>2]+8>>2]+204|0])&&(C=4+(f[c>>2]+g(n,208)|0)|0,n=(0|w)!=(0|D),o[r](C,f[(n?t:e)>>2],f[a+100>>2],f[a+108>>2],f[(n?e:t)>>2],f[a+104>>2],f[a+112>>2]))),L||(e=f[5381])&&o[e](c)}R=a+208|0},o[308]=rc,o[309]=pe,o[310]=rc,o[311]=Xs,o[312]=Xs,o[313]=function(e,t,n,i){e|=0,t|=0,n|=0,i=y(i);var o=0;d[e+36>>2]>i&&(a[e+40|0]=1,o=f[t+4>>2],f[e+4>>2]=f[t>>2],f[e+8>>2]=o,o=f[t+12>>2],f[e+12>>2]=f[t+8>>2],f[e+16>>2]=o,t=f[n+4>>2],f[e+20>>2]=f[n>>2],f[e+24>>2]=t,t=f[n+12>>2],f[e+28>>2]=f[n+8>>2],f[e+32>>2]=t,d[e+36>>2]=i)},o[314]=rc,o[315]=fe,o[316]=sc,o[317]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0);R=a=R-32|0,g=d[t+24>>2],N=d[t+40>>2],A=d[t+36>>2],u=d[t+20>>2],h=d[t+8>>2],x=d[t+16>>2],m=d[t+4>>2],b=d[t+32>>2],v=d[t>>2],f[a+28>>2]=0,s=y(x-v),l=y(A-m),c=y(u-m),p=y(b-v),r=y(y(s*l)-y(c*p)),d[a+24>>2]=r,_=y(g-h),C=y(_*p),p=y(N-h),s=y(C-y(s*p)),d[a+20>>2]=s,l=y(y(c*p)-y(_*l)),d[a+16>>2]=l,E=d[e+4>>2],_=d[e+8>>2],w=d[e+12>>2],c=y(y(h*r)+y(y(v*l)+y(m*s))),p=y(y(y(y(l*E)+y(s*_))+y(r*w))-c),P=d[e+20>>2],T=d[e+24>>2],I=d[e+28>>2],c=y(y(y(y(l*P)+y(s*T))+y(r*I))-c),y(p*c)>=y(0)||1&(t=f[e+36>>2])&&p<=y(0)||(c=y(p/y(p-c)))<d[e+40>>2]&&(C=_,_=y(y(1)-c),T=y(y(T*c)+y(C*_)),u=y(u-T),E=y(y(P*c)+y(E*_)),v=y(v-E),m=y(m-T),x=y(x-E),_=y(y(I*c)+y(w*_)),g=y(g-_),h=y(h-_),P=y(y(r*r)+y(y(l*l)+y(s*s))),w=y(P*y(-9999999747378752e-20)),y(y(r*y(y(u*v)-y(m*x)))+y(y(l*y(y(m*g)-y(h*u)))+y(s*y(y(h*x)-y(g*v)))))>=w&&(A=y(A-T),b=y(b-E),I=y(r*y(y(A*x)-y(u*b))),C=u,u=y(N-_),y(I+y(y(l*y(y(C*u)-y(g*A)))+y(s*y(y(g*b)-y(u*x)))))>=w^1|y(y(r*y(y(m*b)-y(A*v)))+y(y(l*y(y(A*h)-y(u*m)))+y(s*y(y(u*v)-y(h*b)))))>=w^1||(C=r,r=y(y(1)/y(S(P))),h=y(C*r),d[a+24>>2]=h,s=y(s*r),d[a+20>>2]=s,r=y(l*r),d[a+16>>2]=r,2&t|p<=y(0)^1?d[e+40>>2]=o[f[f[e>>2]+12>>2]](e,a+16|0,c,n,i):(f[a+12>>2]=0,d[a+8>>2]=-h,d[a+4>>2]=-s,d[a>>2]=-r,d[e+40>>2]=o[f[f[e>>2]+12>>2]](e,a,c,n,i))))),R=a+32|0},o[318]=sc,o[319]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var r,s,c=0,l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0);R=r=R-688|0,s=Ds(r+576|0),f[r+580>>2]=1,f[r+576>>2]=6568,c=f[t+12>>2],f[r+644>>2]=f[t+8>>2],f[r+648>>2]=c,c=f[t+4>>2],f[r+636>>2]=f[t>>2],f[r+640>>2]=c,c=f[t+28>>2],f[r+660>>2]=f[t+24>>2],f[r+664>>2]=c,c=f[t+20>>2],f[r+652>>2]=f[t+16>>2],f[r+656>>2]=c,c=f[t+44>>2],f[r+676>>2]=f[t+40>>2],f[r+680>>2]=c,c=f[t+36>>2],f[r+668>>2]=f[t+32>>2],f[r+672>>2]=c,f[r+624>>2]=f[e+204>>2],a[r+548|0]=0,f[r+524>>2]=953267991,f[r+208>>2]=4308,c=f[e+4>>2],f[20+(t=r+184|0)>>2]=0,f[t+16>>2]=r+576,f[t+12>>2]=c,f[t+8>>2]=r+208,f[t+4>>2]=r+216,f[t>>2]=7344,f[r+8>>2]=6980,f[r+172>>2]=1065353216,f[r+176>>2]=0,f[r+180>>2]=f[e+208>>2],fe(c=t,e+8|0,e+72|0,t=e+136|0,t,r+8|0)&&(_=d[r+140>>2],u=d[r+144>>2],l=d[r+148>>2],(h=y(y(y(_*_)+y(u*u))+y(l*l)))>y(9999999747378752e-20)&&(p=d[r+172>>2])<d[e+200>>2]&&(m=l,l=y(y(1)/y(S(h))),d[r+148>>2]=m*l,d[r+144>>2]=u*l,d[r+140>>2]=_*l,y(o[f[f[e>>2]+12>>2]](e,r+140|0,r+156|0,p,n,i)))),Sa(s),R=r+688|0},o[320]=Jn,o[321]=function(e){ce(Jn(e|=0))},o[322]=se,o[323]=zt,o[324]=bn,o[325]=function(e,t){e|=0,o[f[f[(t|=0)>>2]+32>>2]](t),et(e,t),o[f[f[t>>2]+36>>2]](t)},o[326]=rc,o[327]=function(e,t,n,i,a){e|=0,t|=0,n=y(n),i|=0,a|=0;var r,s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0);return R=r=R-48|0,f[r+44>>2]=a,f[r+40>>2]=i,_=d[e- -64>>2],u=d[e+60>>2],h=d[e+80>>2],p=d[e+72>>2],m=d[e+76>>2],v=d[e+96>>2],g=d[e+88>>2],A=d[e+92>>2],x=d[e+56>>2],s=d[t+8>>2],c=d[t>>2],l=d[t+4>>2],t=f[e+48>>2],f[r+28>>2]=0,d[r+24>>2]=y(y(c*g)+y(l*A))+y(s*v),d[r+20>>2]=y(y(c*p)+y(l*m))+y(s*h),d[r+32>>2]=n,f[r+8>>2]=t,d[r+16>>2]=y(y(x*c)+y(u*l))+y(_*s),f[r+12>>2]=r+40,e=f[e+44>>2],n=y(o[f[f[e>>2]+12>>2]](e,r+8|0,1)),R=r+48|0,y(n)},o[328]=Qs,o[329]=rc,o[330]=Xs,o[331]=function(e,t){e|=0,t|=0;var n,i,o,a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0);R=n=R-128|0,i=f[t+36>>2],t=f[f[e+8>>2]+28>>2]+g(i,80)|0,o=f[t+64>>2],m=d[t+32>>2],v=d[t>>2],A=d[t+16>>2],x=d[t+56>>2],b=d[t+52>>2],C=d[t+48>>2],S=d[t+36>>2],E=d[t+20>>2],w=d[t+4>>2],T=d[t+40>>2],P=d[t+24>>2],I=d[t+8>>2],t=f[e+12>>2],N=d[t+52>>2],D=d[t+56>>2],a=d[t+24>>2],r=d[t+20>>2],s=d[t+40>>2],c=d[t+36>>2],M=d[t+48>>2],l=d[t+8>>2],_=d[t>>2],u=d[t+4>>2],h=d[t+16>>2],p=d[t+32>>2],f[n+124>>2]=0,f[n+108>>2]=0,f[n+92>>2]=0,d[n+104>>2]=y(y(I*p)+y(P*c))+y(T*s),d[n+100>>2]=y(y(w*p)+y(E*c))+y(S*s),d[n+88>>2]=y(y(I*h)+y(P*r))+y(T*a),d[n+84>>2]=y(y(w*h)+y(E*r))+y(S*a),d[n+120>>2]=D+y(y(y(p*C)+y(c*b))+y(s*x)),d[n+116>>2]=N+y(y(y(h*C)+y(r*b))+y(a*x)),f[n+76>>2]=0,d[n+72>>2]=y(y(_*I)+y(u*P))+y(l*T),d[n+68>>2]=y(y(_*w)+y(u*E))+y(l*S),d[n+64>>2]=y(y(v*_)+y(A*u))+y(m*l),d[n+112>>2]=M+y(y(y(_*C)+y(u*b))+y(l*x)),d[n+96>>2]=y(y(v*p)+y(A*c))+y(m*s),d[n+80>>2]=y(y(v*h)+y(A*r))+y(m*a),t=f[e+4>>2],f[n+60>>2]=i,f[n+56>>2]=-1,f[n+48>>2]=t,f[n+44>>2]=o,f[n+40>>2]=0,f[n+52>>2]=n- -64,t=f[e+24>>2],f[n+20>>2]=-65535,f[n+24>>2]=0,f[n+12>>2]=1065353216,f[n+16>>2]=0,f[n+32>>2]=i,f[n+28>>2]=t,f[n+8>>2]=8340,f[n+12>>2]=f[t+4>>2],f[n+24>>2]=f[t+16>>2],U(f[e+16>>2],f[e+20>>2],n+40|0,n+8|0),R=n+128|0},o[332]=function(e,t,n){e|=0,t|=0,n=y(n),o[f[f[e>>2]+12>>2]](e,t)},o[333]=Ys,o[334]=Ys,o[335]=rc,o[336]=function(e,t){return t|=0,e=f[20+(e|=0)>>2],0|o[f[f[e>>2]+8>>2]](e,t)},o[337]=function(e,t,n){e|=0,t|=0,n|=0;var i,a,r=0,s=y(0);return R=i=R-16|0,r=f[e+24>>2],f[i+12>>2]=r,f[i+8>>2]=r,(a=f[t+4>>2])?(f[a+4>>2]=r,f[a>>2]=r):f[t+4>>2]=i+8,r=f[e+20>>2],s=y(o[f[f[r>>2]+12>>2]](r,t,n)),f[e+4>>2]=f[f[e+20>>2]+4>>2],R=i+16|0,y(s)},o[338]=rc,o[339]=ii,o[340]=rc,o[341]=ii,o[342]=rc,o[343]=function(e,t){e|=0,t|=0;var n,i,o,a,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),z=y(0);R=n=R-112|0,i=f[t+36>>2],t=f[f[e+24>>2]+28>>2]+g(i,80)|0,o=f[t+64>>2],v=d[t+32>>2],A=d[t>>2],x=d[t+16>>2],b=d[t+56>>2],C=d[t+52>>2],S=d[t+48>>2],E=d[t+36>>2],w=d[t+20>>2],T=d[t+4>>2],P=d[t+40>>2],I=d[t+24>>2],N=d[t+8>>2],t=f[e+28>>2],D=d[t+52>>2],M=d[t+56>>2],r=d[t+24>>2],s=d[t+20>>2],c=d[t+40>>2],l=d[t+36>>2],z=d[t+48>>2],_=d[t+8>>2],u=d[t>>2],h=d[t+4>>2],p=d[t+16>>2],m=d[t+32>>2],f[n+108>>2]=0,f[n+92>>2]=0,f[n+76>>2]=0,d[n+88>>2]=y(y(N*m)+y(I*l))+y(P*c),d[n+84>>2]=y(y(T*m)+y(w*l))+y(E*c),d[n+72>>2]=y(y(N*p)+y(I*s))+y(P*r),d[n+68>>2]=y(y(T*p)+y(w*s))+y(E*r),d[n+104>>2]=M+y(y(y(S*m)+y(C*l))+y(b*c)),d[n+100>>2]=D+y(y(y(S*p)+y(C*s))+y(b*r)),f[n+60>>2]=0,d[n+56>>2]=y(y(N*u)+y(I*h))+y(P*_),d[n+52>>2]=y(y(T*u)+y(w*h))+y(E*_),d[n+48>>2]=y(y(A*u)+y(x*h))+y(v*_),d[n+96>>2]=z+y(y(y(S*u)+y(C*h))+y(b*_)),d[n+80>>2]=y(y(A*m)+y(x*l))+y(v*c),d[n+64>>2]=y(y(A*p)+y(x*s))+y(v*r),t=f[e+32>>2],f[n+36>>2]=-1,f[n+28>>2]=1065353216,f[n+32>>2]=1,f[n+44>>2]=i,f[n+40>>2]=t,f[n+24>>2]=9156,f[n+28>>2]=f[t+4>>2],t=f[e+4>>2],a=f[t+8>>2],f[n+20>>2]=i,f[n+16>>2]=-1,f[n+8>>2]=a,f[n+4>>2]=o,f[n>>2]=t,f[n+12>>2]=n+48,O(f[e+8>>2],f[e+12>>2],f[e+16>>2],n,n+24|0,d[e+20>>2]),R=n+112|0},o[344]=rc,o[345]=function(e,t){return t|=0,e=f[16+(e|=0)>>2],0|o[f[f[e>>2]+8>>2]](e,t)},o[346]=function(e,t,n){e|=0,t|=0,n|=0;var i,a,r=y(0);return R=i=R-16|0,f[i+8>>2]=-1,f[i+12>>2]=f[e+20>>2],f[t+4>>2]||(f[t+4>>2]=i+8),a=f[e+16>>2],r=y(o[f[f[a>>2]+12>>2]](a,t,n)),f[e+4>>2]=f[f[e+16>>2]+4>>2],R=i+16|0,y(r)},o[347]=Qs,o[348]=rc,o[349]=function(e,t){t|=0;var n,i=0,a=0,r=0;return R=n=R-32|0,i=f[216+(e|=0)>>2],d[i+4>>2]!=y(0)&&(a=1,t=f[t>>2],o[f[f[i>>2]+8>>2]](i,f[t+188>>2])&&(i=f[e+216>>2],r=f[t+192>>2],f[n+24>>2]=-1,f[n+28>>2]=-1,f[n+20>>2]=t+4,f[n+16>>2]=t,f[n+12>>2]=r,f[n+8>>2]=0,U(e+68|0,e+132|0,n+8|0,i))),R=n+32|0,0|a},o[350]=rc,o[351]=function(e,t){e|=0,t|=0;var n,i=0,a=0,r=y(0),s=0,c=0;return R=n=R-32|0,i=f[e+184>>2],d[i+4>>2]!=y(0)&&(a=1,t=f[t>>2],o[f[f[i>>2]+8>>2]](i,f[t+188>>2])&&(r=d[e+188>>2],i=f[e+184>>2],s=f[e+192>>2],c=f[t+192>>2],f[n+24>>2]=-1,f[n+28>>2]=-1,f[n+20>>2]=t+4,f[n+16>>2]=t,f[n+12>>2]=c,f[n+8>>2]=0,O(s,e+36|0,e+100|0,n+8|0,i,r))),R=n+32|0,0|a},o[352]=Qs,o[353]=rc,o[354]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0);R=n=R-96|0,a=d[e+76>>2],r=d[e+36>>2],_=d[e+32>>2],u=d[e+80>>2],m=d[e+52>>2],v=d[e+44>>2],g=d[e+48>>2],h=d[e+84>>2],p=d[e+68>>2],E=d[e+60>>2],w=d[e- -64>>2],T=d[e+28>>2],s=d[t+8>>2],c=d[t>>2],l=d[t+4>>2],f[n+92>>2]=0,x=y(h+y(y(y(c*E)+y(l*w))+y(s*p))),d[n+88>>2]=x,b=y(u+y(y(y(c*v)+y(l*g))+y(s*m))),d[n+84>>2]=b,C=y(a+y(y(y(c*T)+y(l*_))+y(s*r))),d[n+80>>2]=C,s=d[t+20>>2],c=d[t+24>>2],l=d[t+16>>2],f[n+76>>2]=0,P=y(h+y(y(y(E*l)+y(w*s))+y(p*c))),d[n+72>>2]=P,I=y(u+y(y(y(v*l)+y(g*s))+y(m*c))),d[n+68>>2]=I,A=y(a+y(y(y(T*l)+y(_*s))+y(r*c))),d[n+64>>2]=A,s=d[t+36>>2],c=d[t+40>>2],l=d[t+32>>2],f[n+60>>2]=0,h=y(h+y(y(y(E*l)+y(w*s))+y(p*c))),d[n+56>>2]=h,u=y(u+y(y(y(v*l)+y(g*s))+y(m*c))),d[n+52>>2]=u,a=y(a+y(y(y(T*l)+y(_*s))+y(r*c))),d[n+48>>2]=a,f[n+44>>2]=0,m=y(y(y(x+P)+h)*y(.3333333432674408)),d[n+40>>2]=m,v=y(y(y(b+I)+u)*y(.3333333432674408)),d[n+36>>2]=v,g=y(y(y(C+A)+a)*y(.3333333432674408)),d[n+32>>2]=g,t=f[e+8>>2],16384&o[f[f[t>>2]+56>>2]](t)&&(r=d[n+80>>2],f[n+24>>2]=0,f[n+28>>2]=0,f[n+16>>2]=1065353216,f[n+20>>2]=1065353216,t=f[e+8>>2],f[n+12>>2]=0,_=y(A-r),u=y(u-b),p=y(I-b),r=y(a-r),C=a=y(y(_*u)-y(p*r)),A=y(a*a),h=y(h-x),a=y(p*h),p=y(P-x),a=y(a-y(p*u)),r=y(y(p*r)-y(_*h)),_=y(y(1)/y(S(y(A+y(y(a*a)+y(r*r)))))),d[n+8>>2]=y(C*_)+m,d[n+4>>2]=v+y(r*_),d[n>>2]=g+y(a*_),o[f[f[t>>2]+16>>2]](t,n+32|0,n,n+16|0)),i=f[e+8>>2],t=e+12|0,o[f[f[i>>2]+16>>2]](i,n+80|0,n- -64|0,t),i=f[e+8>>2],o[f[f[i>>2]+16>>2]](i,n- -64|0,n+48|0,t),e=f[e+8>>2],o[f[f[e>>2]+16>>2]](e,n+48|0,n+80|0,t),R=n+96|0},o[355]=function(e,t,n,i){t|=0,n|=0,i|=0,o[f[f[(e|=0)>>2]+8>>2]](e,t,n,i)},o[356]=function(e){return(e|=0)-4|0},o[357]=function(e){ce((e|=0)-4|0)},o[358]=function(e,t,n,i){t|=0,n|=0,i|=0,o[f[f[(e=(e|=0)-4|0)>>2]+8>>2]](e,t,n,i)},o[359]=rc,o[360]=Ae,o[361]=function(e){var t=0,n=0;return f[(e|=0)>>2]=9756,h[e+8|0]&&(t=f[e+12>>2])&&(n=f[e+4>>2],o[f[f[n>>2]+16>>2]](n,t)),0|e},o[362]=function(e){var t=0,n=0;f[(e|=0)>>2]=9756,h[e+8|0]&&(t=f[e+12>>2])&&(n=f[e+4>>2],o[f[f[n>>2]+16>>2]](n,t)),ce(e)},o[363]=function(e,t,n,i,o){t|=0,n|=0,i|=0,o|=0;var a,r=0,s=0,c=0,l=0;R=a=R-160|0,(r=f[12+(e|=0)>>2])&&(s=h[e+16|0],l=f[(c=s?t:n)+4>>2],s=f[(t=s?n:t)+4>>2],f[o+4>>2]=r,d[12+(n=a+144|0)>>2]=d[r+848>>2]+d[o+32>>2],f[n+8>>2]=l,f[n+4>>2]=s,f[n>>2]=9696,f[a+136>>2]=1566444395,t=f[t+12>>2],r=f[t+12>>2],f[a+16>>2]=f[t+8>>2],f[a+20>>2]=r,r=f[t+4>>2],f[a+8>>2]=f[t>>2],f[a+12>>2]=r,r=f[t+28>>2],f[a+32>>2]=f[t+24>>2],f[a+36>>2]=r,r=f[t+20>>2],f[a+24>>2]=f[t+16>>2],f[a+28>>2]=r,r=f[t+44>>2],f[a+48>>2]=f[t+40>>2],f[a+52>>2]=r,r=f[t+36>>2],f[a+40>>2]=f[t+32>>2],f[a+44>>2]=r,s=f[t+60>>2],f[(r=a- -64|0)>>2]=f[t+56>>2],f[r+4>>2]=s,r=f[t+52>>2],f[a+56>>2]=f[t+48>>2],f[a+60>>2]=r,t=f[c+12>>2],r=f[t+12>>2],f[a+80>>2]=f[t+8>>2],f[a+84>>2]=r,r=f[t+4>>2],f[a+72>>2]=f[t>>2],f[a+76>>2]=r,r=f[t+20>>2],f[a+88>>2]=f[t+16>>2],f[a+92>>2]=r,r=f[t+28>>2],f[a+96>>2]=f[t+24>>2],f[a+100>>2]=r,r=f[t+36>>2],f[a+104>>2]=f[t+32>>2],f[a+108>>2]=r,r=f[t+44>>2],f[a+112>>2]=f[t+40>>2],f[a+116>>2]=r,r=f[t+52>>2],f[a+120>>2]=f[t+48>>2],f[a+124>>2]=r,r=f[t+60>>2],f[a+128>>2]=f[t+56>>2],f[a+132>>2]=r,Ae(n,a+8|0,o,f[i+20>>2],h[e+16|0]),h[e+8|0]&&(e=f[o+4>>2],f[e+844>>2]&&((0|(t=f[e+836>>2]))==(0|(n=f[f[o+8>>2]+8>>2]))?Se(e,t+4|0,f[f[o+12>>2]+8>>2]+4|0):Se(e,f[f[o+12>>2]+8>>2]+4|0,n+4|0)))),R=a+160|0},o[364]=Ts,o[365]=Wn,o[366]=Qs,o[367]=rc,o[368]=function(e,t,n,i){var r,s;return e|=0,n|=0,i|=0,n=f[(t|=0)>>2],n=0|o[f[f[n>>2]+56>>2]](n,72),i=f[t+4>>2],r=f[e+12>>2],s=f[e+16>>2],e=f[e+8>>2],f[n>>2]=16448,f[n+4>>2]=f[t>>2],f[n>>2]=4944,a[n+28|0]=1,f[n+8>>2]=e,f[n>>2]=9856,f[n+24>>2]=0,a[n+48|0]=1,f[n+16>>2]=0,f[n+20>>2]=0,f[n+44>>2]=0,f[n+64>>2]=r,f[n+68>>2]=s,a[n+60|0]=0,f[n+56>>2]=i,a[n+52|0]=0,f[n+36>>2]=0,f[n+40>>2]=0,0|n},o[369]=ai,o[370]=function(e){ce(ai(e|=0))},o[371]=function(e,t,n,i,r){e|=0,t|=0,n|=0,i|=0,r|=0;var s,c=0,l=0,_=y(0),u=y(0),p=0,m=y(0),v=0,g=y(0),b=0,C=0,E=0,w=y(0),T=0,P=0,I=y(0),N=y(0),D=y(0),M=0,O=y(0),z=y(0),F=y(0),U=y(0),B=0,k=y(0),j=0,G=y(0),V=y(0),H=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=y(0),J=y(0),$=y(0),te=y(0),ne=y(0),ie=y(0),oe=y(0),ae=y(0),re=0,se=y(0),ce=y(0);R=s=R-928|0,(c=f[e+56>>2])||(c=f[e+4>>2],c=0|o[f[f[c>>2]+12>>2]](c,f[t+8>>2],f[n+8>>2]),a[e+52|0]=1,f[e+56>>2]=c),f[r+4>>2]=c,l=f[n+4>>2];e:{t:if(C=f[t+4>>2],!((v=f[C+4>>2]+-8|0)>>>0>2)){switch(v-1|0){case 1:if((v=f[l+4>>2]+-8|0)>>>0>2)break t;switch(v-1|0){case 1:if(i=C+32|0,e=f[C+56>>2],_=d[i+(e<<2)>>2],g=d[i+((e+2|0)%3<<2)>>2],i=f[l+56>>2],l=l+32|0,u=d[c+848>>2],(_=lt(s+432|0,s+8|0,_,g,d[(i<<2)+l>>2],d[l+((i+2|0)%3<<2)>>2],e,i,f[t+12>>2],f[n+12>>2],u))<u&&o[f[f[r>>2]+16>>2]](r,s+432|0,s+8|0,_),e=f[r+4>>2],!f[e+844>>2])break e;if((0|(t=f[e+836>>2]))!=(0|(n=f[f[r+8>>2]+8>>2]))){Se(e,f[f[r+12>>2]+8>>2]+4|0,n+4|0);break e}Se(e,t+4|0,f[f[r+12>>2]+8>>2]+4|0);break e;case 0:break t}if(i=C+32|0,e=f[C+56>>2],u=d[c+848>>2],(_=lt(s+432|0,s+8|0,d[i+(e<<2)>>2],d[i+((e+2|0)%3<<2)>>2],y(0),y(d[l+32>>2]*d[l+16>>2]),e,1,f[t+12>>2],f[n+12>>2],u))<u&&o[f[f[r>>2]+16>>2]](r,s+432|0,s+8|0,_),e=f[r+4>>2],!f[e+844>>2])break e;if((0|(t=f[e+836>>2]))!=(0|(n=f[f[r+8>>2]+8>>2]))){Se(e,f[f[r+12>>2]+8>>2]+4|0,n+4|0);break e}Se(e,t+4|0,f[f[r+12>>2]+8>>2]+4|0);break e;case 0:break t}if(10==f[l+4>>2]){if(i=l+32|0,e=f[l+56>>2],u=d[c+848>>2],(_=lt(s+432|0,s+8|0,y(0),y(d[C+32>>2]*d[C+16>>2]),d[i+(e<<2)>>2],d[i+((e+2|0)%3<<2)>>2],1,e,f[t+12>>2],f[n+12>>2],u))<u&&o[f[f[r>>2]+16>>2]](r,s+432|0,s+8|0,_),e=f[r+4>>2],!f[e+844>>2])break e;if((0|(t=f[e+836>>2]))!=(0|(n=f[f[r+8>>2]+8>>2]))){Se(e,f[f[r+12>>2]+8>>2]+4|0,n+4|0);break e}Se(e,t+4|0,f[f[r+12>>2]+8>>2]+4|0);break e}}if(f[s+920>>2]=1566444395,a[s+764|0]=0,f[s+740>>2]=953267991,M=Pi(s+352|0,C,l,s+432|0,f[e+8>>2]),f[M+32>>2]=l,f[M+28>>2]=C,u=y(y(y(y(o[f[f[C>>2]+48>>2]](C))+y(o[f[f[l>>2]+48>>2]](l)))+d[f[e+56>>2]+848>>2])+d[r+32>>2]),d[s+920>>2]=u*u,c=f[t+12>>2],v=f[c+12>>2],f[s+800>>2]=f[c+8>>2],f[s+804>>2]=v,v=f[c+4>>2],f[s+792>>2]=f[c>>2],f[s+796>>2]=v,v=f[c+28>>2],f[s+816>>2]=f[c+24>>2],f[s+820>>2]=v,v=f[c+20>>2],f[s+808>>2]=f[c+16>>2],f[s+812>>2]=v,v=f[c+44>>2],f[s+832>>2]=f[c+40>>2],f[s+836>>2]=v,v=f[c+36>>2],f[s+824>>2]=f[c+32>>2],f[s+828>>2]=v,v=f[c+60>>2],f[s+848>>2]=f[c+56>>2],f[s+852>>2]=v,v=f[c+52>>2],f[s+840>>2]=f[c+48>>2],f[s+844>>2]=v,c=f[n+12>>2],v=f[c+12>>2],f[s+864>>2]=f[c+8>>2],f[s+868>>2]=v,v=f[c+4>>2],f[s+856>>2]=f[c>>2],f[s+860>>2]=v,b=f[c+20>>2],f[(v=s+872|0)>>2]=f[c+16>>2],f[v+4>>2]=b,T=f[c+28>>2],f[s+880>>2]=f[c+24>>2],f[s+884>>2]=T,E=f[c+36>>2],f[(b=T=s+888|0)>>2]=f[c+32>>2],f[b+4>>2]=E,b=f[c+44>>2],f[s+896>>2]=f[c+40>>2],f[s+900>>2]=b,P=f[c+52>>2],f[(b=s+904|0)>>2]=f[c+48>>2],f[b+4>>2]=P,E=f[c+60>>2],f[s+912>>2]=f[c+56>>2],f[s+916>>2]=E,!((0|(E=f[C+4>>2]))>6)&&!((0|(c=f[l+4>>2]))>6)&&(f[s+344>>2]=9976,u=y(0),E&&(u=y(o[f[f[C>>2]+48>>2]](C)),c=f[l+4>>2]),c&&(_=y(o[f[f[l>>2]+48>>2]](l))),a[s+44|0]=0,d[s+36>>2]=_,d[s+32>>2]=u,f[s+12>>2]=r,f[s+8>>2]=10152,f[C+56>>2])){if(f[l+56>>2]){_=d[f[e+56>>2]+848>>2];t:{n:{if(h[i+24|0]){if(u=y(-1.0000000150474662e30),L(f[C+56>>2],f[l+56>>2],f[t+12>>2],f[n+12>>2],s+248|0,r))break n;break t}if(Is(M,s+792|0,s+8|0,f[i+20>>2]),i=f[s+28>>2],f[s+256>>2]=f[s+24>>2],f[s+260>>2]=i,i=f[s+20>>2],f[s+248>>2]=f[s+16>>2],f[s+252>>2]=i,u=d[s+40>>2],!h[s+44|0]|u<y(0)^1)break t}if((0|(c=f[e+16>>2]))<=-1)for(f[e+20>>2]<=-1&&((i=f[e+24>>2])&&(h[e+28|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[e+24>>2]=0),f[e+20>>2]=0,f[e+24>>2]=0,a[e+28|0]=1);M=f[s+332>>2],i=f[e+24>>2]+(c<<4)|0,f[(v=i)>>2]=f[s+328>>2],f[v+4>>2]=M,v=f[s+340>>2],f[i+8>>2]=f[s+336>>2],f[i+12>>2]=v,v=(i=c+1|0)>>>0>=c>>>0,c=i,v;);f[e+16>>2]=0,Te(s+248|0,f[C+56>>2],f[l+56>>2],f[t+12>>2],f[n+12>>2],y(u-_),_,e+12|0,e+32|0,r)}if(!h[e+52|0])break e;if(e=f[r+4>>2],!f[e+844>>2])break e;if((0|(t=f[e+836>>2]))!=(0|(n=f[f[r+8>>2]+8>>2]))){Se(e,f[f[r+12>>2]+8>>2]+4|0,n+4|0);break e}Se(e,t+4|0,f[f[r+12>>2]+8>>2]+4|0);break e}if(1==f[l+4>>2]){if(f[s+252>>2]=0,c=f[n+12>>2],g=d[c+52>>2],N=d[c+20>>2],U=d[c+24>>2],k=d[c+56>>2],V=d[c+36>>2],H=d[c+40>>2],u=d[l+68>>2],_=d[l+60>>2],m=d[l- -64>>2],Q=d[c+16>>2],W=d[c+32>>2],w=d[c+48>>2],I=d[c+8>>2],q=d[c>>2],Y=d[c+4>>2],f[6257]=f[6257]+1,c=0|o[f[4968]](16,16),f[s+260>>2]=c,a[s+264|0]=1,f[s+256>>2]=1,f[c+12>>2]=0,d[c>>2]=w+y(y(y(_*q)+y(m*Y))+y(u*I)),d[c+8>>2]=k+y(y(y(_*W)+y(m*V))+y(u*H)),d[c+4>>2]=g+y(y(y(_*Q)+y(m*N))+y(u*U)),v=f[s+252>>2]+1|0,f[s+252>>2]=v,u=d[l+76>>2],c=f[n+12>>2],_=d[l+80>>2],m=d[l+84>>2],g=y(y(y(y(u*d[c+32>>2])+y(_*d[c+36>>2]))+y(m*d[c+40>>2]))+d[c+56>>2]),N=y(y(y(y(u*d[c+16>>2])+y(_*d[c+20>>2]))+y(m*d[c+24>>2]))+d[c+52>>2]),u=y(y(y(y(u*d[c>>2])+y(_*d[c+4>>2]))+y(m*d[c+8>>2]))+d[c+48>>2]),f[s+256>>2]==(0|v)&&!((0|v)>=(0|(b=v?v<<1:1)))){if(c=0,T=0,b&&(f[6257]=f[6257]+1,T=0|o[f[4968]](b<<4,16),v=f[s+252>>2]),(0|v)>=1)for(;P=(E=c<<4)+T|0,E=E+f[s+260>>2]|0,j=f[E+4>>2],f[P>>2]=f[E>>2],f[P+4>>2]=j,B=f[E+12>>2],f[P+8>>2]=f[E+8>>2],f[P+12>>2]=B,(0|v)!=(0|(c=c+1|0)););(c=f[s+260>>2])&&(h[s+264|0]&&c&&(f[6258]=f[6258]+1,o[f[4969]](c)),f[s+260>>2]=0),f[s+260>>2]=T,a[s+264|0]=1,f[s+256>>2]=b,v=f[s+252>>2]}if(c=f[s+260>>2]+(v<<4)|0,f[c+12>>2]=0,d[c+8>>2]=g,d[c+4>>2]=N,d[c>>2]=u,v=f[s+252>>2]+1|0,f[s+252>>2]=v,u=d[l+92>>2],n=f[n+12>>2],_=d[l+96>>2],m=d[l+100>>2],g=y(y(y(y(u*d[n>>2])+y(_*d[n+4>>2]))+y(m*d[n+8>>2]))+d[n+48>>2]),N=y(y(y(y(u*d[n+32>>2])+y(_*d[n+36>>2]))+y(m*d[n+40>>2]))+d[n+56>>2]),u=y(y(y(y(u*d[n+16>>2])+y(_*d[n+20>>2]))+y(m*d[n+24>>2]))+d[n+52>>2]),f[s+256>>2]==(0|v)&&!((0|v)>=(0|(n=v?v<<1:1)))){if(c=0,T=0,n&&(f[6257]=f[6257]+1,T=0|o[f[4968]](n<<4,16),v=f[s+252>>2]),(0|v)>=1)for(;E=(b=c<<4)+T|0,b=b+f[s+260>>2]|0,B=f[b+4>>2],f[E>>2]=f[b>>2],f[E+4>>2]=B,P=f[b+12>>2],f[E+8>>2]=f[b+8>>2],f[E+12>>2]=P,(0|v)!=(0|(c=c+1|0)););(c=f[s+260>>2])&&(h[s+264|0]&&c&&(f[6258]=f[6258]+1,o[f[4969]](c)),f[s+260>>2]=0),f[s+260>>2]=T,a[s+264|0]=1,f[s+256>>2]=n,v=f[s+252>>2]}if(n=f[s+260>>2]+(v<<4)|0,f[n+12>>2]=0,d[n+8>>2]=N,d[n+4>>2]=u,d[n>>2]=g,f[s+252>>2]=f[s+252>>2]+1,u=d[f[e+56>>2]+848>>2],Is(M,s+792|0,s+344|0,f[i+20>>2]),_=d[M+4>>2],m=d[M+8>>2],g=d[M+12>>2],(N=y(y(y(_*_)+y(m*m))+y(g*g)))>y(1.1920928955078125e-7)){if(f[s+340>>2]=0,w=g,g=y(y(1)/N),d[s+336>>2]=w*g,d[s+332>>2]=m*g,d[s+328>>2]=_*g,_=y(y(d[M+56>>2]-y(o[f[f[C>>2]+48>>2]](C)))-y(o[f[f[l>>2]+48>>2]](l))),(0|(c=f[e+36>>2]))<=-1)for(f[e+40>>2]<=-1&&((n=f[e+44>>2])&&(h[e+48|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+44>>2]=0),f[e+40>>2]=0,f[e+44>>2]=0,a[e+48|0]=1);l=f[s+316>>2],n=f[e+44>>2]+(c<<4)|0,f[n>>2]=f[s+312>>2],f[n+4>>2]=l,i=f[s+324>>2],f[n+8>>2]=f[s+320>>2],f[n+12>>2]=i,i=(n=c+1|0)>>>0>=c>>>0,c=n,i;);f[e+36>>2]=0,ee(s+328|0,f[C+56>>2],f[t+12>>2],s+248|0,e+32|0,y(_-u),u,r)}if(h[e+52|0]&&(e=f[r+4>>2],f[e+844>>2]&&((0|(t=f[e+836>>2]))==(0|(n=f[f[r+8>>2]+8>>2]))?Se(e,t+4|0,f[f[r+12>>2]+8>>2]+4|0):Se(e,f[f[r+12>>2]+8>>2]+4|0,n+4|0))),!(e=f[s+260>>2]))break e;h[s+264|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[s+260>>2]=0;break e}}if(Is(M,s+792|0,r,f[i+20>>2]),!(!f[e+64>>2]|f[f[r+4>>2]+844>>2]>=f[e+68>>2])&&(u=d[M+4>>2],_=d[M+8>>2],m=d[M+12>>2],(g=y(y(y(u*u)+y(_*_))+y(m*m)))>y(1.1920928955078125e-7)&&(E=s+856|0,P=s+840|0,B=s+824|0,j=s+808|0,w=_,_=y(y(1)/g),N=y(w*_),Q=y(u*_),W=y(m*_),y(A(W))>y(.7071067690849304)?(u=y(y(1)/y(S(y(y(W*W)+y(N*N))))),_=y(N*u),u=y(u*y(-W)),m=y(0)):(_=y(y(1)/y(S(y(y(Q*Q)+y(N*N))))),u=y(Q*_),m=y(_*y(-N)),_=y(0)),g=y(o[f[f[C>>2]+16>>2]](C)),U=y(o[f[f[l>>2]+16>>2]](l)),k=d[4962],l=f[(c=(C=g<U)?s+792|0:E)+12>>2],f[s+256>>2]=f[c+8>>2],f[s+260>>2]=l,l=f[c+4>>2],f[s+248>>2]=f[c>>2],f[s+252>>2]=l,l=f[(c=C?j:v)+12>>2],f[s+272>>2]=f[c+8>>2],f[s+276>>2]=l,l=f[c+4>>2],f[s+264>>2]=f[c>>2],f[s+268>>2]=l,l=f[(c=C?B:T)+12>>2],f[s+288>>2]=f[c+8>>2],f[s+292>>2]=l,l=f[c+4>>2],f[s+280>>2]=f[c>>2],f[s+284>>2]=l,l=f[(c=C?P:b)+12>>2],f[s+304>>2]=f[c+8>>2],f[s+308>>2]=l,l=f[c+4>>2],f[s+296>>2]=f[c>>2],f[s+300>>2]=l,!((0|(l=f[e+64>>2]))<1))))for(w=_,g=y(y(x(y(k/(C?g:U)),y(.39269909262657166)))*y(.5)),se=y(y(y(m*m)+y(u*u))+y(_*_)),_=y(cn(g)/y(S(se))),U=y(w*_),k=y(u*_),V=y(m*_),ce=y(S(y(y(W*W)+y(y(Q*Q)+y(N*N))))),re=s- -64|0,H=sn(g),c=0;se>y(1.1920928955078125e-7)&&(g=y(y(y(y(6.2831854820251465)/y(0|l))*y(0|c))*y(.5)),m=y(cn(g)/ce),u=y(W*m),_=y(N*m),m=y(Q*m),g=sn(g),C?(l=f[t+12>>2],q=d[l+36>>2],Y=d[l+20>>2],K=d[l+40>>2],Z=d[l+24>>2],J=d[l+32>>2],$=d[l>>2],te=d[l+16>>2],ne=d[l+4>>2],ie=d[l+8>>2],f[s+836>>2]=0,f[s+820>>2]=0,f[s+804>>2]=0,D=y(y(U*m)+y(y(y(k*g)-y(H*_))-y(V*u))),O=y(y(U*u)+y(y(k*_)+y(y(H*g)+y(V*m)))),z=y(y(k*u)+y(y(y(V*g)-y(H*m))-y(U*_))),F=y(y(V*_)+y(y(y(U*g)-y(H*u))-y(k*m))),w=y(y(y(u*D)+y(y(m*O)+y(g*z)))-y(_*F)),I=y(y(y(y(g*O)-y(m*z))-y(_*D))-y(u*F)),X=y(y(y(_*z)+y(y(u*O)+y(g*F)))-y(m*D)),u=y(y(y(m*F)+y(y(g*D)+y(_*O)))-y(u*z)),_=y(y(2)/y(y(I*I)+y(y(X*X)+y(y(w*w)+y(u*u))))),m=y(X*_),O=y(w*m),g=y(u*_),z=y(I*g),D=y(O-z),F=y(u*m),G=y(w*_),oe=y(I*G),_=y(F+oe),G=y(w*G),ae=y(u*g),u=y(y(1)-y(G+ae)),d[s+832>>2]=y(y(ie*D)+y(Z*_))+y(K*u),d[s+828>>2]=y(y(D*ne)+y(_*Y))+y(u*q),d[s+824>>2]=y(y(D*$)+y(_*te))+y(u*J),g=y(w*g),w=y(I*m),u=y(g+w),I=y(X*m),_=y(y(1)-y(G+I)),m=y(F-oe),d[s+816>>2]=y(y(ie*u)+y(Z*_))+y(K*m),d[s+812>>2]=y(y(u*ne)+y(_*Y))+y(m*q),d[s+808>>2]=y(y(u*$)+y(_*te))+y(m*J),u=y(y(1)-y(ae+I)),_=y(g-w),m=y(O+z),d[s+800>>2]=y(y(ie*u)+y(Z*_))+y(K*m),d[s+796>>2]=y(y(u*ne)+y(_*Y))+y(m*q),d[s+792>>2]=y(y(u*$)+y(_*te))+y(m*J),l=f[n+12>>2],p=f[l+4>>2],f[E>>2]=f[l>>2],f[E+4>>2]=p,p=f[l+12>>2],f[E+8>>2]=f[l+8>>2],f[E+12>>2]=p,p=f[l+28>>2],f[v+8>>2]=f[l+24>>2],f[v+12>>2]=p,p=f[l+20>>2],f[v>>2]=f[l+16>>2],f[v+4>>2]=p,p=f[l+44>>2],f[T+8>>2]=f[l+40>>2],f[T+12>>2]=p,p=f[l+36>>2],f[T>>2]=f[l+32>>2],f[T+4>>2]=p,p=f[l+60>>2],f[b+8>>2]=f[l+56>>2],f[b+12>>2]=p,p=f[l+52>>2],f[b>>2]=f[l+48>>2],f[b+4>>2]=p):(l=f[t+12>>2],p=f[l+12>>2],f[s+800>>2]=f[l+8>>2],f[s+804>>2]=p,p=f[l+4>>2],f[s+792>>2]=f[l>>2],f[s+796>>2]=p,p=f[l+28>>2],f[j+8>>2]=f[l+24>>2],f[j+12>>2]=p,p=f[l+20>>2],f[j>>2]=f[l+16>>2],f[j+4>>2]=p,p=f[l+44>>2],f[B+8>>2]=f[l+40>>2],f[B+12>>2]=p,p=f[l+36>>2],f[B>>2]=f[l+32>>2],f[B+4>>2]=p,p=f[l+60>>2],f[P+8>>2]=f[l+56>>2],f[P+12>>2]=p,p=f[l+52>>2],f[P>>2]=f[l+48>>2],f[P+4>>2]=p,l=f[n+12>>2],q=d[l+36>>2],Y=d[l+20>>2],K=d[l+40>>2],Z=d[l+24>>2],J=d[l+32>>2],$=d[l>>2],te=d[l+16>>2],ne=d[l+4>>2],ie=d[l+8>>2],f[s+900>>2]=0,f[s+884>>2]=0,f[s+868>>2]=0,D=y(y(U*m)+y(y(y(k*g)-y(H*_))-y(V*u))),O=y(y(U*u)+y(y(k*_)+y(y(H*g)+y(V*m)))),z=y(y(k*u)+y(y(y(V*g)-y(H*m))-y(U*_))),F=y(y(V*_)+y(y(y(U*g)-y(H*u))-y(k*m))),w=y(y(y(u*D)+y(y(m*O)+y(g*z)))-y(_*F)),I=y(y(y(y(g*O)-y(m*z))-y(_*D))-y(u*F)),X=y(y(y(_*z)+y(y(u*O)+y(g*F)))-y(m*D)),u=y(y(y(m*F)+y(y(g*D)+y(_*O)))-y(u*z)),_=y(y(2)/y(y(I*I)+y(y(X*X)+y(y(w*w)+y(u*u))))),m=y(X*_),O=y(w*m),g=y(u*_),z=y(I*g),D=y(O-z),F=y(u*m),G=y(w*_),oe=y(I*G),_=y(F+oe),G=y(w*G),ae=y(u*g),u=y(y(1)-y(G+ae)),d[s+896>>2]=y(y(ie*D)+y(Z*_))+y(K*u),d[s+892>>2]=y(y(D*ne)+y(_*Y))+y(u*q),d[s+888>>2]=y(y(D*$)+y(_*te))+y(u*J),g=y(w*g),w=y(I*m),u=y(g+w),I=y(X*m),_=y(y(1)-y(G+I)),m=y(F-oe),d[s+880>>2]=y(y(ie*u)+y(Z*_))+y(K*m),d[s+876>>2]=y(y(u*ne)+y(_*Y))+y(m*q),d[s+872>>2]=y(y(u*$)+y(_*te))+y(m*J),u=y(y(1)-y(ae+I)),_=y(g-w),m=y(O+z),d[s+864>>2]=y(y(ie*u)+y(Z*_))+y(K*m),d[s+860>>2]=y(y(u*ne)+y(_*Y))+y(m*q),d[s+856>>2]=y(y(u*$)+y(_*te))+y(m*J)),l=f[i+20>>2],f[s+44>>2]=r,f[s+8>>2]=10336,f[s+40>>2]=0,p=f[s+804>>2],f[s+56>>2]=f[s+800>>2],f[s+60>>2]=p,p=f[s+796>>2],f[s+48>>2]=f[s+792>>2],f[s+52>>2]=p,p=f[j+12>>2],f[re+8>>2]=f[j+8>>2],f[re+12>>2]=p,p=f[j+4>>2],f[re>>2]=f[j>>2],f[re+4>>2]=p,p=f[B+12>>2],f[s+88>>2]=f[B+8>>2],f[s+92>>2]=p,p=f[B+4>>2],f[s+80>>2]=f[B>>2],f[s+84>>2]=p,p=f[P+12>>2],f[s+104>>2]=f[P+8>>2],f[s+108>>2]=p,p=f[P+4>>2],f[s+96>>2]=f[P>>2],f[s+100>>2]=p,p=f[E+12>>2],f[s+120>>2]=f[E+8>>2],f[s+124>>2]=p,p=f[E+4>>2],f[s+112>>2]=f[E>>2],f[s+116>>2]=p,p=f[v+12>>2],f[s+136>>2]=f[v+8>>2],f[s+140>>2]=p,p=f[v+4>>2],f[s+128>>2]=f[v>>2],f[s+132>>2]=p,p=f[T+12>>2],f[s+152>>2]=f[T+8>>2],f[s+156>>2]=p,p=f[T+4>>2],f[s+144>>2]=f[T>>2],f[s+148>>2]=p,p=f[b+12>>2],f[s+168>>2]=f[b+8>>2],f[s+172>>2]=p,p=f[b+4>>2],f[s+160>>2]=f[b>>2],f[s+164>>2]=p,p=f[s+260>>2],f[s+184>>2]=f[s+256>>2],f[s+188>>2]=p,p=f[s+252>>2],f[s+176>>2]=f[s+248>>2],f[s+180>>2]=p,p=f[s+276>>2],f[s+200>>2]=f[s+272>>2],f[s+204>>2]=p,p=f[s+268>>2],f[s+192>>2]=f[s+264>>2],f[s+196>>2]=p,p=f[s+292>>2],f[s+216>>2]=f[s+288>>2],f[s+220>>2]=p,p=f[s+284>>2],f[s+208>>2]=f[s+280>>2],f[s+212>>2]=p,p=f[s+300>>2],f[s+224>>2]=f[s+296>>2],f[s+228>>2]=p,p=f[s+308>>2],f[s+232>>2]=f[s+304>>2],f[s+236>>2]=p,f[s+244>>2]=l,a[s+240|0]=C,Is(M,s+792|0,s+8|0,l),l=f[e+64>>2]),(0|(c=c+1|0))<(0|l););h[e+52|0]&&(e=f[r+4>>2],f[e+844>>2]&&((0|(t=f[e+836>>2]))==(0|(n=f[f[r+8>>2]+8>>2]))?Se(e,t+4|0,f[f[r+12>>2]+8>>2]+4|0):Se(e,f[f[r+12>>2]+8>>2]+4|0,n+4|0)))}R=s+928|0},o[372]=function(e,t,n,i,o){e|=0,t|=0,n|=0,i|=0,o|=0;var r=y(0),s=y(0),c=y(0),l=0,_=0,u=0,p=0;return R=e=R-608|0,s=y(d[t+116>>2]-d[t+52>>2]),r=y(s*s),s=y(d[t+120>>2]-d[t+56>>2]),r=y(r+y(s*s)),s=y(d[t+124>>2]-d[t+60>>2]),r=y(r+y(s*s)),s=d[t+276>>2],r<y(s*s)&&(s=y(1),r=y(d[n+116>>2]-d[n+52>>2]),c=y(r*r),r=y(d[n+120>>2]-d[n+56>>2]),c=y(c+y(r*r)),r=y(d[n+124>>2]-d[n+60>>2]),c=y(c+y(r*r)),r=d[n+276>>2],c<y(r*r))||(s=y(1),h[22568]||(i=f[t+192>>2],o=f[n+272>>2],Fo(e+552|0),f[e+580>>2]=0,f[e+584>>2]=0,f[e+576>>2]=1065353216,f[e+588>>2]=0,f[e+592>>2]=0,f[e+596>>2]=0,f[e+568>>2]=1065353216,f[e+572>>2]=1065353216,f[e+556>>2]=8,f[e+552>>2]=11388,f[e+604>>2]=0,f[e+600>>2]=o,f[e+584>>2]=o,f[e+548>>2]=0,f[e+540>>2]=1566444395,f[e+544>>2]=0,f[e+376>>2]=6980,a[e+348|0]=0,f[e+324>>2]=953267991,f[e+12>>2]=e+552,f[e+8>>2]=i,f[e+4>>2]=e+16,f[e>>2]=7232,l=t+4|0,_=t+68|0,u=n+4|0,o=n+68|0,s=y(1),pe(e,l,_,u,o,e+376|0)&&(r=d[e+540>>2],d[t+268>>2]>r&&(d[t+268>>2]=r),d[n+268>>2]>r&&(d[n+268>>2]=r),s=y(1),r<y(1)&&(s=r)),i=f[n+192>>2],p=f[t+272>>2],Fo(e+552|0),f[e+580>>2]=0,f[e+584>>2]=0,f[e+576>>2]=1065353216,f[e+588>>2]=0,f[e+592>>2]=0,f[e+596>>2]=0,f[e+568>>2]=1065353216,f[e+572>>2]=1065353216,f[e+556>>2]=8,f[e+552>>2]=11388,f[e+604>>2]=0,f[e+600>>2]=p,f[e+584>>2]=p,f[e+548>>2]=0,f[e+540>>2]=1566444395,f[e+544>>2]=0,f[e+376>>2]=6980,a[e+348|0]=0,f[e+324>>2]=953267991,f[e+12>>2]=i,f[e+8>>2]=e+552,f[e+4>>2]=e+16,f[e>>2]=7232,pe(e,l,_,u,o,e+376|0)&&(r=d[e+540>>2],d[t+268>>2]>r&&(d[t+268>>2]=r),d[n+268>>2]>r&&(d[n+268>>2]=r),s>r&&(s=r)))),R=e+608|0,y(s)},o[373]=function(e,t){t|=0;var n=0,i=0,r=0,s=0,c=0;if(!(!(n=f[56+(e|=0)>>2])|!h[e+52|0])){if((0|(i=f[t+4>>2]))==f[t+8>>2]&&!((0|i)>=(0|(r=i?i<<1:1)))){if(r&&(f[6257]=f[6257]+1,s=0|o[f[4968]](r<<2,16),i=f[t+4>>2]),(0|i)>=1)for(n=0;f[(c=n<<2)+s>>2]=f[f[t+12>>2]+c>>2],(0|(n=n+1|0))!=(0|i););(n=f[t+12>>2])&&(h[t+16|0]&&(n&&(f[6258]=f[6258]+1,o[f[4969]](n)),i=f[t+4>>2]),f[t+12>>2]=0),f[t+12>>2]=s,a[t+16|0]=1,f[t+8>>2]=r,n=f[e+56>>2]}f[f[t+12>>2]+(i<<2)>>2]=n,f[t+4>>2]=i+1}},o[374]=rc,o[375]=Xs,o[376]=Xs,o[377]=Fs,o[378]=rc,o[379]=Xs,o[380]=Xs,o[381]=function(e,t,n,i){e|=0,t|=0,n|=0,i=y(i);var r,s=y(0),c=0,l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0);R=r=R-16|0,d[e+32>>2]=i,c=f[t+4>>2],f[e+8>>2]=f[t>>2],f[e+12>>2]=c,c=f[t+12>>2],f[e+16>>2]=f[t+8>>2],f[e+20>>2]=c,l=d[t+8>>2],_=d[n>>2],u=d[t>>2],h=d[n+4>>2],p=d[t+4>>2],m=d[n+8>>2],s=d[e+28>>2],f[r+12>>2]=0,d[r+8>>2]=m-y(s*l),d[r+4>>2]=h-y(s*p),d[r>>2]=_-y(u*s),i=y(y(s+d[e+24>>2])+i),d[e+32>>2]=i,i<y(0)&&(a[e+36|0]=1),e=f[e+4>>2],o[f[f[e>>2]+16>>2]](e,t,r,i),R=r+16|0},o[382]=rc,o[383]=function(e,t,n,i){e|=0,t|=0,n|=0,i=y(i);var a,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0);R=a=R-16|0,M=d[t+8>>2],N=d[n+8>>2],p=y(y(M*i)+N),O=d[t+4>>2],D=d[n+4>>2],z=y(y(O*i)+D),L=d[t>>2],r=y(L*i),i=d[n>>2],F=y(r+i),h[e+232|0]?(A=d[e+56>>2],m=y(-d[e+92>>2]),x=d[e+40>>2],u=d[e+88>>2],_=d[e+72>>2],r=d[e+96>>2],E=y(y(y(A*m)-y(x*u))-y(_*r)),s=d[e+200>>2],b=d[e+60>>2],C=d[e+44>>2],v=d[e+76>>2],P=y(y(y(b*m)-y(C*u))-y(v*r)),c=d[e+204>>2],S=d[e- -64>>2],l=y(S*m),m=d[e+48>>2],l=y(l-y(m*u)),u=d[e+80>>2],w=y(l-y(u*r)),r=d[e+208>>2],l=y(y(y(y(y(E*s)+y(P*c))+y(w*r))+d[e+224>>2])+y(y(p*y(y(y(_*s)+y(v*c))+y(u*r)))+y(y(F*y(y(y(x*s)+y(C*c))+y(m*r)))+y(z*y(y(y(A*s)+y(b*c))+y(S*r)))))),s=d[e+168>>2],c=d[e+172>>2],r=d[e+176>>2],s=y(y(y(p*y(y(y(_*s)+y(v*c))+y(u*r)))+y(y(F*y(y(y(x*s)+y(C*c))+y(m*r)))+y(z*y(y(y(A*s)+y(b*c))+y(S*r)))))+y(y(y(y(s*E)+y(P*c))+y(w*r))+d[e+216>>2])),c=y(L*y(s-i)),r=p,i=d[e+184>>2],p=d[e+188>>2],v=y(y(_*i)+y(v*p)),_=d[e+192>>2],p=y(y(y(r*y(v+y(u*_)))+y(y(F*y(y(y(x*i)+y(C*p))+y(m*_)))+y(z*y(y(y(A*i)+y(b*p))+y(S*_)))))+y(y(y(y(E*i)+y(P*p))+y(w*_))+d[e+220>>2])),i=y(y(c+y(O*y(p-D)))+y(M*y(l-N))),d[a+8>>2]=l+y(M*i),d[a+4>>2]=p+y(O*i),d[a>>2]=s+y(L*i)):(k=d[e+224>>2],A=d[e+208>>2],x=d[e+200>>2],_=d[e+204>>2],j=d[e+216>>2],s=d[e+172>>2],b=d[e+176>>2],C=d[e+168>>2],v=d[e+120>>2],l=y(-d[e+156>>2]),c=d[e+104>>2],T=d[e+152>>2],S=d[e+136>>2],I=d[e+160>>2],m=y(y(y(v*l)-y(c*T))-y(S*I)),u=d[e+124>>2],r=d[e+108>>2],E=d[e+140>>2],P=y(y(y(u*l)-y(r*T))-y(E*I)),w=d[e+128>>2],g=y(w*l),l=d[e+112>>2],g=y(g-y(l*T)),T=d[e+144>>2],I=y(g-y(T*I)),g=d[e+184>>2],U=d[e+188>>2],B=d[e+192>>2],g=y(y(y(N*y(y(y(S*g)+y(E*U))+y(T*B)))+y(y(i*y(y(y(c*g)+y(r*U))+y(l*B)))+y(D*y(y(y(v*g)+y(u*U))+y(w*B)))))+y(y(y(y(m*g)+y(P*U))+y(I*B))+d[e+220>>2])),d[a+4>>2]=g,s=y(y(y(N*y(y(y(S*C)+y(E*s))+y(T*b)))+y(y(i*y(y(y(c*C)+y(r*s))+y(l*b)))+y(D*y(y(y(v*C)+y(u*s))+y(w*b)))))+y(j+y(y(y(C*m)+y(P*s))+y(I*b)))),d[a>>2]=s,i=y(y(k+y(y(y(m*x)+y(P*_))+y(I*A)))+y(y(N*y(y(y(S*x)+y(E*_))+y(T*A)))+y(y(i*y(y(y(c*x)+y(r*_))+y(l*A)))+y(D*y(y(y(v*x)+y(u*_))+y(w*A)))))),d[a+8>>2]=i,i=y(y(y(L*y(F-s))+y(O*y(z-g)))+y(M*y(p-i)))),f[a+12>>2]=0,e=f[e+36>>2],o[f[f[e>>2]+16>>2]](e,t,a,i),R=a+16|0},o[384]=En,o[385]=function(e){ce(En(e|=0))},o[386]=H,o[387]=function(e,t,n,i,a){e|=0,t|=0,n|=0,i|=0,a|=0;var r,s,c,l,_,u,p,m=0,v=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=0,N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0),U=y(0),B=y(0),k=y(0),j=y(0),G=y(0),V=y(0),H=y(0);if((0|(r=f[e+52>>2]))<1)return y(y(1));for(s=(m=h[e+68|0])?t:n,c=f[(t=m?n:t)- -64>>2],G=d[t+60>>2],V=d[t+56>>2],H=d[t+52>>2],l=f[t+48>>2],A=d[t+44>>2],x=d[t+40>>2],b=d[t+36>>2],_=f[t+32>>2],C=d[t+28>>2],S=d[t+24>>2],E=d[t+20>>2],u=f[t+16>>2],w=d[t+12>>2],T=d[t+8>>2],R=f[t+304>>2],P=d[t+4>>2],p=f[t+192>>2],I=y(1),m=0;n=f[p+28>>2]+g(m,80)|0,v=d[n+56>>2],N=d[n+52>>2],D=d[n+48>>2],M=d[n+36>>2],O=d[n+20>>2],z=d[n+4>>2],L=d[n+40>>2],F=d[n+24>>2],U=d[n+8>>2],B=d[n+32>>2],k=d[n>>2],j=d[n+16>>2],f[t+64>>2]=0,f[t+48>>2]=0,f[t+32>>2]=0,f[t+16>>2]=0,f[t+304>>2]=R+1,d[t+36>>2]=y(y(b*k)+y(x*j))+y(A*B),d[t+20>>2]=y(y(E*k)+y(S*j))+y(C*B),d[t+4>>2]=y(y(P*k)+y(T*j))+y(w*B),d[t+44>>2]=y(y(b*U)+y(x*F))+y(A*L),d[t+40>>2]=y(y(b*z)+y(x*O))+y(A*M),d[t+28>>2]=y(y(E*U)+y(S*F))+y(C*L),d[t+24>>2]=y(y(E*z)+y(S*O))+y(C*M),d[t+12>>2]=y(y(P*U)+y(T*F))+y(w*L),d[t+8>>2]=y(y(P*z)+y(T*O))+y(w*M),d[t+60>>2]=G+y(y(y(b*D)+y(x*N))+y(A*v)),d[t+56>>2]=V+y(y(y(E*D)+y(S*N))+y(C*v)),d[t+52>>2]=H+y(y(y(P*D)+y(T*N))+y(w*v)),n=f[f[e+60>>2]+(m<<2)>>2],v=y(o[f[f[n>>2]+12>>2]](n,t,s,i,a)),f[t+64>>2]=c,d[t+60>>2]=G,d[t+56>>2]=V,d[t+52>>2]=H,f[t+48>>2]=l,d[t+44>>2]=A,d[t+40>>2]=x,d[t+36>>2]=b,f[t+32>>2]=_,d[t+28>>2]=C,d[t+24>>2]=S,d[t+20>>2]=E,f[t+16>>2]=u,d[t+12>>2]=w,d[t+8>>2]=T,d[t+4>>2]=P,R=f[t+304>>2]+1|0,f[t+304>>2]=R,I=v<I?v:I,(0|r)!=(0|(m=m+1|0)););return y(I)},o[388]=function(e,t){t|=0;var n=0,i=0,a=0;if((0|(n=f[52+(e|=0)>>2]))>=1)for(;(a=f[f[e+60>>2]+(i<<2)>>2])&&(o[f[f[a>>2]+16>>2]](a,t),n=f[e+52>>2]),(0|(i=i+1|0))<(0|n););},o[389]=rc,o[390]=function(e,t){var n,i;t|=0,n=e|=0,i=f[f[f[e+4>>2]+4>>2]+28>>2],e=f[t+36>>2],be(n,f[64+(i+g(e,80)|0)>>2],e)},o[391]=ei,o[392]=function(e){ce(ei(e|=0))},o[393]=function(e,t,n){e|=0,t|=0,n|=0;var i=0,o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0;f[5644]=f[5644]+1,c=f[e+36>>2],i=g((i=((i=n<<16|t)<<15^-1)+i|0)>>>10^i,9),i=((i^=i>>>6)<<11^-1)+i|0,a=c+((f[e+12>>2]+-1&(i>>>16^i))<<2)|0;e:if(-1!=(0|(i=f[a>>2]))){for(r=f[e+16>>2],o=i;;){if(l=r+g(o,12)|0,f[l+4>>2]!=(0|n)||f[l>>2]!=(0|t)){if(-1!=(0|(o=f[f[e+56>>2]+(o<<2)>>2])))continue;break e}break}u=f[8+(r+g(o,12)|0)>>2],s=f[e+56>>2];t:{n:{if((0|i)!=(0|o)){for(;t=i,(0|o)!=(0|(i=f[(_=(i<<2)+s|0)>>2])););if(n=i=f[(o<<2)+s>>2],-1==(0|t))break n;f[_>>2]=i;break t}n=f[(o<<2)+s>>2]}f[a>>2]=n}if((0|(t=f[e+8>>2]+-1|0))==(0|o))return f[e+8>>2]=o,0|u;t:{if(a=r+g(t,12)|0,n=f[a+4>>2]<<16|f[a>>2],n=g((n=(n<<15^-1)+n|0)>>>10^n,9),n=((n^=n>>>6)<<11^-1)+n|0,r=f[e+12>>2]+-1&(n>>>16^n),(0|t)!=(0|(i=f[(c=c+(r<<2)|0)>>2]))){for(;n=i,(0|t)!=(0|(i=f[(_=(i<<2)+s|0)>>2])););if(t=f[(t<<2)+s>>2],-1!=(0|n)){f[_>>2]=t;break t}}else t=f[(t<<2)+s>>2];f[c>>2]=t}t=f[a+4>>2],f[l>>2]=f[a>>2],f[l+4>>2]=t,f[l+8>>2]=f[a+8>>2],t=f[e+36>>2]+(r<<2)|0,f[f[e+56>>2]+(o<<2)>>2]=f[t>>2],f[t>>2]=o,f[e+8>>2]=f[e+8>>2]+-1}return 0|u},o[394]=function(e,t,n){return e|=0,t|=0,n|=0,f[5645]=f[5645]+1,0|function(e,t,n){var i,r=0,s=0,c=0,l=0,_=0,u=0,p=0,m=0;r=g((r=((r=n<<16|t)<<15^-1)+r|0)>>>10^r,9),l=(i=(r=((r^=r>>>6)<<11^-1)+r|0)>>>16^r)&(r=f[e+12>>2])+-1;e:{if(-1!=(0|(c=f[f[e+36>>2]+(l<<2)>>2])))for(_=f[e+16>>2];;){if(s=_+g(c,12)|0,f[s+4>>2]==(0|n)&&f[s>>2]==(0|t))break e;if(-1==(0|(c=f[f[e+56>>2]+(c<<2)>>2])))break}c=e;t:{n:{if((0|(s=_=f[e+8>>2]))==(0|r)){if((0|r)<(0|(s=r?r<<1:1)))break n}else r=s;f[c+8>>2]=r+1,p=f[e+16>>2];break t}if(s&&(f[6257]=f[6257]+1,p=0|o[f[4968]](g(s,12),16),r=f[e+8>>2]),(0|r)>=1)for(c=0;l=(u=g(c,12))+f[e+16>>2]|0,m=f[l+4>>2],f[(u=p+u|0)>>2]=f[l>>2],f[u+4>>2]=m,f[u+8>>2]=f[l+8>>2],(0|(c=c+1|0))!=(0|r););(r=f[e+16>>2])&&(h[e+20|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+16>>2]=0),f[e+16>>2]=p,f[e+12>>2]=s,a[e+20|0]=1,f[e+8>>2]=f[e+8>>2]+1,pt(e),l=f[e+12>>2]+-1&i}s=g(_,12)+p|0,f[s+8>>2]=0,f[s+4>>2]=n,f[s>>2]=t,t=f[e+56>>2]+(_<<2)|0,e=f[e+36>>2]+(l<<2)|0,f[t>>2]=f[e>>2],f[e>>2]=_}return s}(e,t,n)},o[395]=Hs,o[396]=qn,o[397]=function(e){ce(qn(e|=0))},o[398]=function(e,t,n,i,r){e|=0,t|=0,n|=0,i|=0,r|=0;var s,c,l=0,_=0,u=0,p=0,m=0,v=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=0,T=y(0),P=0,I=y(0),N=y(0),D=y(0),M=0,O=y(0),z=y(0),L=y(0),F=0,U=0,B=0,k=y(0),j=y(0),G=y(0),V=y(0),W=y(0),q=y(0),Y=y(0),X=y(0),Q=y(0),K=y(0),Z=y(0),J=y(0),$=0,ee=y(0),te=y(0),ne=0,ie=0,oe=y(0),ae=y(0),re=y(0),se=y(0),ce=y(0);if(R=s=R-3584|0,c=f[t+4>>2],(U=f[c+68>>2])&&(ne=f[n+4>>2],w=f[ne+68>>2])){if(f[ne+72>>2]!=f[e+112>>2]||f[c+72>>2]!=f[e+108>>2]){if(p=f[e+84>>2],(0|(u=f[p+8>>2]))>=1){for(;(m=f[8+(f[p+16>>2]+g(_,12)|0)>>2])&&(o[f[f[m>>2]>>2]](m),l=f[e+4>>2],o[f[f[l>>2]+60>>2]](l,m)),(0|u)!=(0|(_=_+1|0)););p=f[e+84>>2]}on(p),f[e+108>>2]=f[c+72>>2],f[e+112>>2]=f[ne+72>>2]}f[s+84>>2]=0,a[s+88|0]=1,f[s+76>>2]=0,f[s+80>>2]=0,nn(s+112|0),nn(s+980|0),nn(s+1848|0),nn(s+2716|0),(p=f[s+84>>2])&&(h[s+88|0]&&p&&(f[6258]=f[6258]+1,o[f[4969]](p)),f[s+84>>2]=0),f[s+76>>2]=0,f[s+80>>2]=4,f[s+84>>2]=s+112,a[s+88|0]=0,u=f[e+84>>2];e:{if((0|(m=f[u+8>>2]))<=0)_=s+112|0;else{for(;;){if(p=f[8+(f[u+16>>2]+g(M,12)|0)>>2]){if(o[f[f[p>>2]+16>>2]](p,s+72|0),m=0,(0|(_=f[s+76>>2]))>0)for(;B=f[f[s+84>>2]+(m<<2)>>2],f[B+844>>2]&&(f[r+4>>2]=B,l=(0|(p=f[B+836>>2]))==(0|(_=f[f[r+8>>2]+8>>2])),P=p,p=f[f[r+12>>2]+8>>2],Se(B,(l?P:p)+4|0,(l?p:_)+4|0),f[r+4>>2]=0,_=f[s+76>>2]),(0|(m=m+1|0))<(0|_););if((0|_)<=-1)for(f[s+80>>2]<=-1&&((p=f[s+84>>2])&&(h[s+88|0]&&p&&(f[6258]=f[6258]+1,o[f[4969]](p)),f[s+84>>2]=0),a[s+88|0]=1,f[s+80>>2]=0,f[s+84>>2]=0);f[f[s+84>>2]+(_<<2)>>2]=0,l=(p=_+1|0)>>>0>=_>>>0,_=p,l;);f[s+76>>2]=0,m=f[u+8>>2]}if(!((0|(M=M+1|0))<(0|m)))break}if(!(_=f[s+84>>2]))break e}h[s+88|0]&&_&&(f[6258]=f[6258]+1,o[f[4969]](_)),f[s+84>>2]=0}if(_=f[e+4>>2],p=f[e+84>>2],f[s+104>>2]=f[e+72>>2],f[s+100>>2]=p,f[s+92>>2]=i,f[s+88>>2]=_,f[s+76>>2]=0,f[s+72>>2]=10696,f[s+96>>2]=r,f[s+80>>2]=t,f[s+84>>2]=n,(p=f[U>>2])&&(i=f[w>>2])){for(l=f[t+12>>2],N=d[l+24>>2],v=y(-d[l+52>>2]),I=d[l+8>>2],b=d[l+48>>2],D=d[l+40>>2],S=d[l+56>>2],_=f[n+12>>2],E=d[_+48>>2],C=d[_+52>>2],x=d[_+56>>2],re=y(y(y(y(N*v)-y(I*b))-y(D*S))+y(y(y(I*E)+y(N*C))+y(D*x))),O=d[l+20>>2],L=d[l+4>>2],z=d[l+36>>2],se=y(y(y(y(O*v)-y(L*b))-y(z*S))+y(y(y(L*E)+y(O*C))+y(z*x))),V=d[_+40>>2],k=d[_+24>>2],W=d[_+8>>2],j=d[_+36>>2],q=d[_+20>>2],G=d[_+4>>2],ee=d[l+16>>2],T=y(ee*v),v=d[l>>2],T=y(T-y(v*b)),b=d[l+32>>2],ce=y(y(T-y(b*S))+y(y(y(v*E)+y(ee*C))+y(b*x))),E=d[_+16>>2],C=d[_>>2],x=d[_+32>>2],te=d[r+32>>2],f[s+116>>2]=i,f[s+112>>2]=p,T=y(y(y(I*W)+y(N*k))+y(D*V)),K=y(A(T)),Y=y(y(y(I*G)+y(N*q))+y(D*j)),Z=y(A(Y)),X=y(y(y(I*C)+y(N*E))+y(D*x)),J=y(A(X)),Q=y(y(y(L*W)+y(O*k))+y(z*V)),N=y(A(Q)),I=y(y(y(L*G)+y(O*q))+y(z*j)),D=y(A(I)),O=y(y(y(L*C)+y(O*E))+y(z*x)),L=y(A(O)),z=y(y(y(v*W)+y(ee*k))+y(b*V)),V=y(A(z)),k=y(y(y(v*G)+y(ee*q))+y(b*j)),W=y(A(k)),j=y(y(y(v*C)+y(ee*E))+y(b*x)),q=y(A(j)),$=124,l=0,i=128,w=s+112|0,U=128,m=1;;){e:{t:{n:{if(F=f[(p=(ie=(B=m+-1|0)<<3)+w|0)>>2],P=f[p+4>>2],G=d[P+16>>2],v=d[P>>2],oe=y(y(y(G-v)*y(.5))+y(0)),b=d[P+20>>2],S=d[P+4>>2],ae=y(y(y(b-S)*y(.5))+y(0)),E=d[P+24>>2],x=d[P+8>>2],ee=y(y(y(E-x)*y(.5))+y(0)),C=y(y(y(q*oe)+y(W*ae))+y(V*ee)),v=y(y(G+v)*y(.5)),S=y(y(b+S)*y(.5)),E=y(y(E+x)*y(.5)),x=y(ce+y(y(y(j*v)+y(k*S))+y(z*E))),!(d[F>>2]<=y(te+y(C+x))^1|d[F+16>>2]>=y(y(x-C)-te)^1||(C=y(y(y(L*oe)+y(D*ae))+y(N*ee)),x=y(se+y(y(y(O*v)+y(I*S))+y(Q*E))),d[F+4>>2]<=y(te+y(C+x))^1|d[F+20>>2]>=y(y(x-C)-te)^1||(C=y(y(y(J*oe)+y(Z*ae))+y(K*ee)),x=y(re+y(y(y(X*v)+y(Y*S))+y(T*E))),d[F+8>>2]<=y(te+y(C+x))^1|d[F+24>>2]>=y(y(x-C)-te)^1)))){if((0|B)<=(0|$))p=i,u=w,_=l;else{i:if((0|i)>=(0|(p=i<<1))|(0|U)>=(0|p))u=w,_=l;else{o:{a:{if(i){if($=0,f[6257]=f[6257]+1,u=0|o[f[4968]](i<<4,16),!((0|i)<1)){for(;M=(_=$<<3)+u|0,_=f[4+(U=_+w|0)>>2],f[M>>2]=f[U>>2],f[M+4>>2]=_,(0|($=$+1|0))!=(0|i););if(!(255&l))break o;break a}}else u=0;if(_=1,!w)break o;if(U=p,!(255&l))break i}w&&(f[6258]=f[6258]+1,o[f[4969]](w))}_=1,U=p}$=p+-4|0}if(i=f[P+40>>2],f[F+40>>2]){if(l=f[F+36>>2],i){f[4+(i=u+ie|0)>>2]=f[P+36>>2],f[i>>2]=l,i=f[F+40>>2],f[4+(l=(m<<3)+u|0)>>2]=f[P+36>>2],f[l>>2]=i,i=f[F+36>>2],f[l+12>>2]=f[P+40>>2],f[l+8>>2]=i,i=f[F+40>>2],f[l+20>>2]=f[P+40>>2],f[l+16>>2]=i,m=m+3|0;break t}f[4+(i=u+ie|0)>>2]=P,f[i>>2]=l,l=f[F+40>>2],f[4+(i=(m<<3)+u|0)>>2]=P,f[i>>2]=l;break n}if(i){f[4+(i=u+ie|0)>>2]=f[P+36>>2],f[i>>2]=F,f[4+(i=(m<<3)+u|0)>>2]=f[P+40>>2],f[i>>2]=F;break n}o[f[f[s+72>>2]+8>>2]](s+72|0,F,P),i=p,w=u,l=_}m=B;break e}m=m+1|0}i=p,w=u,l=_}if(!m)break}!w|!(255&l)||w&&(f[6258]=f[6258]+1,o[f[4969]](w))}if(B=f[e+84>>2],f[B+8>>2]>=1)for(U=0;;){if(i=(p=g(U,12))+f[B+16>>2]|0,(_=f[i+8>>2])&&(u=f[c+28>>2]+g(f[i>>2],80)|0,i=f[u+64>>2],l=f[t+12>>2],E=d[l+52>>2],C=d[l+56>>2],O=d[u+48>>2],L=d[u+52>>2],z=d[u+56>>2],V=d[u+4>>2],k=d[u+20>>2],W=d[u+36>>2],j=d[u+8>>2],q=d[u+24>>2],G=d[u+40>>2],K=d[l+20>>2],Y=d[l+24>>2],v=d[u>>2],Z=d[l+36>>2],b=d[u+16>>2],X=d[l+40>>2],S=d[u+32>>2],x=d[l+48>>2],J=d[l+8>>2],Q=d[l>>2],N=d[l+4>>2],I=d[l+16>>2],D=d[l+32>>2],f[s+172>>2]=0,f[s+156>>2]=0,f[s+140>>2]=0,f[s+124>>2]=0,d[s+144>>2]=y(y(D*v)+y(Z*b))+y(X*S),d[s+128>>2]=y(y(I*v)+y(K*b))+y(Y*S),d[s+112>>2]=y(y(Q*v)+y(N*b))+y(J*S),d[s+152>>2]=y(y(D*j)+y(Z*q))+y(X*G),d[s+148>>2]=y(y(D*V)+y(Z*k))+y(X*W),d[s+136>>2]=y(y(I*j)+y(K*q))+y(Y*G),d[s+132>>2]=y(y(I*V)+y(K*k))+y(Y*W),d[s+120>>2]=y(y(Q*j)+y(N*q))+y(J*G),d[s+116>>2]=y(y(Q*V)+y(N*k))+y(J*W),d[s+168>>2]=C+y(y(y(D*O)+y(Z*L))+y(X*z)),d[s+164>>2]=E+y(y(y(I*O)+y(K*L))+y(Y*z)),d[s+160>>2]=x+y(y(y(Q*O)+y(N*L))+y(J*z)),o[f[f[i>>2]+8>>2]](i,s+112|0,s+56|0,s+40|0),T=d[r+32>>2],d[s+56>>2]=d[s+56>>2]-T,d[s+60>>2]=d[s+60>>2]-T,d[s+64>>2]=d[s+64>>2]-T,d[s+40>>2]=T+d[s+40>>2],d[s+44>>2]=T+d[s+44>>2],d[s+48>>2]=T+d[s+48>>2],u=f[ne+28>>2]+g(f[4+(p+f[B+16>>2]|0)>>2],80)|0,i=f[u+64>>2],l=f[n+12>>2],E=d[l+52>>2],C=d[l+56>>2],O=d[u+48>>2],L=d[u+52>>2],z=d[u+56>>2],V=d[u+4>>2],k=d[u+20>>2],W=d[u+36>>2],j=d[u+8>>2],q=d[u+24>>2],G=d[u+40>>2],K=d[l+20>>2],Y=d[l+24>>2],v=d[u>>2],Z=d[l+36>>2],b=d[u+16>>2],X=d[l+40>>2],S=d[u+32>>2],x=d[l+48>>2],J=d[l+8>>2],Q=d[l>>2],N=d[l+4>>2],I=d[l+16>>2],D=d[l+32>>2],f[s+172>>2]=0,f[s+156>>2]=0,f[s+140>>2]=0,f[s+124>>2]=0,d[s+144>>2]=y(y(D*v)+y(Z*b))+y(X*S),d[s+128>>2]=y(y(I*v)+y(K*b))+y(Y*S),d[s+112>>2]=y(y(Q*v)+y(N*b))+y(J*S),d[s+152>>2]=y(y(D*j)+y(Z*q))+y(X*G),d[s+148>>2]=y(y(D*V)+y(Z*k))+y(X*W),d[s+136>>2]=y(y(I*j)+y(K*q))+y(Y*G),d[s+132>>2]=y(y(I*V)+y(K*k))+y(Y*W),d[s+120>>2]=y(y(Q*j)+y(N*q))+y(J*G),d[s+116>>2]=y(y(Q*V)+y(N*k))+y(J*W),d[s+168>>2]=C+y(y(y(D*O)+y(Z*L))+y(X*z)),d[s+164>>2]=E+y(y(y(I*O)+y(K*L))+y(Y*z)),d[s+160>>2]=x+y(y(y(Q*O)+y(N*L))+y(J*z)),o[f[f[i>>2]+8>>2]](i,s+112|0,s+24|0,s+8|0),v=y(d[s+24>>2]-T),d[s+24>>2]=v,b=y(d[s+28>>2]-T),d[s+28>>2]=b,S=y(d[s+32>>2]-T),d[s+32>>2]=S,E=y(T+d[s+8>>2]),d[s+8>>2]=E,C=y(T+d[s+16>>2]),d[s+16>>2]=C,x=y(T+d[s+12>>2]),d[s+12>>2]=x,d[s+44>>2]<b|d[s+60>>2]>x|d[s+40>>2]<v|d[s+56>>2]>E||d[s+64>>2]>C||d[s+48>>2]<S)){if(o[f[f[_>>2]>>2]](_),i=f[e+4>>2],o[f[f[i>>2]+60>>2]](i,_),i=p+f[B+16>>2]|0,l=f[i+4>>2],p=f[i>>2],(0|(M=f[e+92>>2]))==f[e+96>>2]&&!((0|M)>=(0|(m=M?M<<1:1)))){if(_=0,$=0,m&&(f[6257]=f[6257]+1,$=0|o[f[4968]](g(m,12),16),M=f[e+92>>2]),(0|M)>=1)for(;w=(i=g(_,12))+$|0,u=i+f[e+100>>2]|0,i=f[u+4>>2],f[w>>2]=f[u>>2],f[w+4>>2]=i,f[w+8>>2]=f[u+8>>2],(0|M)!=(0|(_=_+1|0)););(i=f[e+100>>2])&&(h[e+104|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[e+100>>2]=0),f[e+100>>2]=$,a[e+104|0]=1,f[e+96>>2]=m,M=f[e+92>>2]}i=f[e+100>>2]+g(M,12)|0,f[i+8>>2]=0,f[i+4>>2]=l,f[i>>2]=p,f[e+92>>2]=f[e+92>>2]+1}if(!((0|(U=U+1|0))<f[B+8>>2]))break}if(f[e+92>>2]>=1)for(_=0;n=f[e+84>>2],t=f[e+100>>2]+g(_,12)|0,o[f[f[n>>2]+8>>2]](n,f[t>>2],f[t+4>>2]),(0|(_=_+1|0))<f[e+92>>2];);(t=f[e+100>>2])&&(h[e+104|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+100>>2]=0),f[e+100>>2]=0,f[e+92>>2]=0,f[e+96>>2]=0,a[e+104|0]=1}else H(e,t,n,i,r);R=s+3584|0},o[399]=function(){return y(y(0))},o[400]=function(e,t){t|=0;var n,i=0,a=0;if(n=f[84+(e|=0)>>2],(0|(i=f[n+8>>2]))>=1)for(e=0;(a=f[8+(f[n+16>>2]+g(e,12)|0)>>2])&&(o[f[f[a>>2]+16>>2]](a,t),i=f[n+8>>2]),(0|(e=e+1|0))<(0|i););},o[401]=rc,o[402]=function(e,t,n){e|=0,t|=0,n|=0;var i,a,r,s,c,l,_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),A=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=0,F=0,U=y(0),B=y(0),k=y(0);R=i=R-256|0,o[f[4966]](10772),f[e+4>>2]=f[e+4>>2]+1,a=f[n+36>>2],s=g(a,80),c=f[e+12>>2],l=f[c+4>>2],L=f[64+(s+f[l+28>>2]|0)>>2],n=f[e+8>>2],r=f[t+36>>2],t=f[f[n+4>>2]+28>>2]+g(r,80)|0,F=f[t+64>>2],n=f[n+12>>2],U=d[n+52>>2],B=d[n+56>>2],u=d[n+24>>2],_=d[n+20>>2],h=d[n+40>>2],p=d[n+36>>2],k=d[n+48>>2],m=d[n+8>>2],v=d[n>>2],A=d[n+4>>2],x=d[n+16>>2],b=d[n+32>>2],C=d[t+32>>2],S=d[t>>2],E=d[t+16>>2],w=d[t+56>>2],T=d[t+48>>2],P=d[t+52>>2],I=d[t+36>>2],N=d[t+4>>2],D=d[t+20>>2],M=d[t+40>>2],O=d[t+8>>2],z=d[t+24>>2],n=0,f[i+244>>2]=0,f[i+228>>2]=0,f[i+212>>2]=0,d[i+224>>2]=y(y(b*O)+y(p*z))+y(h*M),d[i+220>>2]=y(y(b*N)+y(p*D))+y(h*I),d[i+208>>2]=y(y(x*O)+y(_*z))+y(u*M),d[i+204>>2]=y(y(x*N)+y(_*D))+y(u*I),d[i+240>>2]=B+y(y(y(b*T)+y(p*P))+y(h*w)),d[i+236>>2]=U+y(y(y(x*T)+y(_*P))+y(u*w)),f[i+196>>2]=0,d[i+216>>2]=y(y(b*S)+y(p*E))+y(h*C),d[i+200>>2]=y(y(x*S)+y(_*E))+y(u*C),d[i+192>>2]=y(y(v*O)+y(A*z))+y(m*M),d[i+188>>2]=y(y(v*N)+y(A*D))+y(m*I),d[i+184>>2]=y(y(v*S)+y(A*E))+y(m*C),d[i+232>>2]=k+y(y(y(v*T)+y(A*P))+y(m*w)),t=f[c+12>>2],U=d[t+52>>2],B=d[t+56>>2],u=d[t+24>>2],_=d[t+20>>2],h=d[t+40>>2],p=d[t+36>>2],k=d[t+48>>2],m=d[t+8>>2],v=d[t>>2],A=d[t+4>>2],x=d[t+16>>2],b=d[t+32>>2],t=f[l+28>>2]+s|0,C=d[t+32>>2],S=d[t>>2],E=d[t+16>>2],w=d[t+56>>2],T=d[t+48>>2],P=d[t+52>>2],I=d[t+36>>2],N=d[t+4>>2],D=d[t+20>>2],M=d[t+40>>2],O=d[t+8>>2],z=d[t+24>>2],f[i+180>>2]=0,f[i+164>>2]=0,f[i+148>>2]=0,d[i+160>>2]=y(y(b*O)+y(p*z))+y(h*M),d[i+156>>2]=y(y(b*N)+y(p*D))+y(h*I),d[i+144>>2]=y(y(x*O)+y(_*z))+y(u*M),d[i+140>>2]=y(y(x*N)+y(_*D))+y(u*I),d[i+176>>2]=B+y(y(y(b*T)+y(p*P))+y(h*w)),d[i+172>>2]=U+y(y(y(x*T)+y(_*P))+y(u*w)),f[i+132>>2]=0,d[i+152>>2]=y(y(b*S)+y(p*E))+y(h*C),d[i+136>>2]=y(y(x*S)+y(_*E))+y(u*C),d[i+128>>2]=y(y(v*O)+y(A*z))+y(m*M),d[i+124>>2]=y(y(v*N)+y(A*D))+y(m*I),d[i+120>>2]=y(y(v*S)+y(A*E))+y(m*C),d[i+168>>2]=k+y(y(y(v*T)+y(A*P))+y(m*w)),o[f[f[F>>2]+8>>2]](F,i+184|0,i+104|0,i+88|0),o[f[f[L>>2]+8>>2]](L,i+120|0,i+72|0,i+56|0),_=d[f[e+24>>2]+32>>2],u=y(d[i+104>>2]-_),d[i+104>>2]=u,d[i+108>>2]=d[i+108>>2]-_,d[i+112>>2]=d[i+112>>2]-_,d[i+88>>2]=_+d[i+88>>2],d[i+92>>2]=_+d[i+92>>2],d[i+96>>2]=_+d[i+96>>2];e:{if(t=f[5647]){if(!o[t](F,L))break e;u=d[i+104>>2]}d[i+88>>2]<d[i+72>>2]|u>d[i+56>>2]||(n=1),t=0,t=d[i+96>>2]<d[i+80>>2]|d[i+112>>2]>d[i+64>>2]?t:n,d[i+92>>2]<d[i+76>>2]|d[i+108>>2]>d[i+60>>2]|1^t||(t=f[e+8>>2],n=f[t+8>>2],f[i+52>>2]=r,f[i+48>>2]=-1,f[i+40>>2]=n,f[i+36>>2]=F,f[i+32>>2]=t,f[i+44>>2]=i+184,t=f[e+12>>2],n=f[t+8>>2],f[i+28>>2]=a,f[i+24>>2]=-1,f[i+16>>2]=n,f[i+12>>2]=L,f[i+8>>2]=t,f[i+20>>2]=i+120,t=function(e,t,n){var i=0,o=0,a=0;f[5646]=f[5646]+1,i=((i=(i=g((i=((i=n<<16|t)<<15^-1)+i|0)>>>10^i,9))>>>6^i)<<11^-1)+i|0;t:{if(!((0|(i=f[e+12>>2]+-1&(i>>>16^i)))>=f[e+28>>2])&&-1!=(0|(i=f[f[e+36>>2]+(i<<2)>>2])))for(a=f[e+16>>2];;){if(o=g(i,12)+a|0,f[o+4>>2]==(0|n)&&f[o>>2]==(0|t))break t;if(-1==(0|(i=f[f[e+56>>2]+(i<<2)>>2])))break}o=0}return o}(f[e+28>>2],r,a),d[f[e+24>>2]+32>>2]>y(0)?(t=f[e+16>>2],n=0|o[f[f[t>>2]+8>>2]](t,i+32|0,i+8|0,0,2)):t?n=f[t+8>>2]:(t=f[e+16>>2],n=0|o[f[f[t>>2]+8>>2]](t,i+32|0,i+8|0,f[e+32>>2],1),t=f[e+28>>2],f[8+(0|o[f[f[t>>2]+12>>2]](t,r,a))>>2]=n),t=f[e+24>>2],L=f[t+12>>2],F=f[t+8>>2],f[t+12>>2]=i+8,f[t+8>>2]=i+32,o[f[f[t>>2]+8>>2]](t,-1,r),t=f[e+24>>2],o[f[f[t>>2]+12>>2]](t,-1,a),o[f[f[n>>2]+8>>2]](n,i+32|0,i+8|0,f[e+20>>2],f[e+24>>2]),e=f[e+24>>2],f[e+8>>2]=F,f[e+12>>2]=L)}o[f[4967]](),R=i+256|0},o[403]=ac,o[404]=Ps,o[405]=function(e,t,n,i){Xt(e|=0,t|=0,n|=0,i|=0)},o[406]=function(e,t){xa(e|=0,t|=0),Mn(e)},o[407]=function(e,t,n){e|=0,t=y(t),n|=0;var i,a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0);R=i=R-96|0,a=y(o[f[f[e>>2]+48>>2]](e)),f[i+44>>2]=0,f[i+48>>2]=0,f[i+56>>2]=0,f[i+60>>2]=0,f[i+52>>2]=1065353216,f[i+76>>2]=0,f[i+80>>2]=0,f[i+72>>2]=1065353216,f[i+84>>2]=0,f[i+88>>2]=0,f[i+92>>2]=0,f[i+36>>2]=0,f[i+40>>2]=0,f[i+32>>2]=1065353216,f[i+64>>2]=0,f[i+68>>2]=0,o[f[f[e>>2]+8>>2]](e,i+32|0,i+16|0,i),c=d[i+24>>2],l=d[i+8>>2],r=d[i+16>>2],s=d[i>>2],_=d[i+20>>2],u=d[i+4>>2],f[n+12>>2]=0,t=y(t*y(.0833333283662796)),r=y(a+y(y(s-r)*y(.5))),r=y(r+r),r=y(r*r),s=y(a+y(y(u-_)*y(.5))),s=y(s+s),s=y(s*s),d[n+8>>2]=t*y(r+s),a=y(a+y(y(l-c)*y(.5))),a=y(a+a),a=y(a*a),d[n+4>>2]=t*y(r+a),d[n>>2]=t*y(s+a),R=i+96|0},o[408]=function(){return 10980},o[409]=function(e,t,n){e|=0,t|=0,n|=0;var i,a=0,r=y(0),s=y(0),c=y(0),l=y(0),_=0,u=0,h=0,p=y(0),m=y(0),v=y(0);if(R=i=R-2048|0,f[e>>2]=0,f[e+4>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0,c=d[n>>2],r=d[n+4>>2],l=d[n+8>>2],s=y(y(y(c*c)+y(r*r))+y(l*l)),p=y(1),s<y(9999999747378752e-20)||(s=y(y(1)/y(S(s))),m=y(l*s),v=y(r*s),p=y(c*s)),s=p,(0|o[f[f[t>>2]+96>>2]](t))>=1)for(l=y(-0xde0b6b000000000);;){if(_=128,((0|o[f[f[t>>2]+96>>2]](t))-u|0)>127||(0|(_=(0|o[f[f[t>>2]+96>>2]](t))-u|0))>=1){for(n=0,a=0;o[f[f[t>>2]+108>>2]](t,a,(a<<4)+i|0),(0|_)!=(0|(a=a+1|0)););for(h=-1,r=y(-34028234663852886e22);r=(a=(c=y(y(y(s*d[(a=(n<<4)+i|0)>>2])+y(v*d[a+4>>2]))+y(m*d[a+8>>2])))>r)?c:r,h=a?n:h,(0|_)!=(0|(n=n+1|0)););}else r=y(-34028234663852886e22),h=-1;if(r>l&&(n=f[12+(a=(h<<4)+i|0)>>2],f[e+8>>2]=f[a+8>>2],f[e+12>>2]=n,n=f[a+4>>2],f[e>>2]=f[a>>2],f[e+4>>2]=n,l=r),!((0|(u=u+128|0))<(0|o[f[f[t>>2]+96>>2]](t))))break}R=i+2048|0},o[410]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a,r=0,s=0,c=y(0),l=0,_=0,u=0,h=0,p=0,m=0,v=0,g=y(0),A=0,x=y(0),b=y(0),C=y(0);if(R=a=R-2048|0,(0|i)>0){for(;f[12+((r<<4)+n|0)>>2]=-581039253,(0|(r=r+1|0))!=(0|i););for(;;){if((0|o[f[f[e>>2]+96>>2]](e))>=1)for(v=_=(r=p<<4)+n|0,A=m=t+r|0,u=0;;){if(h=128,((0|o[f[f[e>>2]+96>>2]](e))-u|0)>127||(0|(h=(0|o[f[f[e>>2]+96>>2]](e))-u|0))>=1){for(r=0;o[f[f[e>>2]+108>>2]](e,r,(r<<4)+a|0),(0|h)!=(0|(r=r+1|0)););for(x=d[A+8>>2],b=d[m+4>>2],C=d[m>>2],r=0,s=-1,c=y(-34028234663852886e22);c=(l=(g=y(y(y(C*d[(l=(r<<4)+a|0)>>2])+y(b*d[l+4>>2]))+y(x*d[l+8>>2])))>c)?g:c,s=l?r:s,(0|h)!=(0|(r=r+1|0)););}else c=y(-34028234663852886e22),s=-1;if(c>d[v+12>>2]&&(s=f[12+(r=(s<<4)+a|0)>>2],f[_+8>>2]=f[r+8>>2],f[_+12>>2]=s,s=f[r+4>>2],f[_>>2]=f[r>>2],f[_+4>>2]=s,d[v+12>>2]=c),!((0|(u=u+128|0))<(0|o[f[f[e>>2]+96>>2]](e))))break}if((0|(p=p+1|0))==(0|i))break}}R=a+2048|0},o[411]=tc,o[412]=Xs,o[413]=Ws,o[414]=function(e){return(e=f[96+(e|=0)>>2]+-2|0)>>>0<=2?f[11e3+(e<<2)>>2]:0},o[415]=function(e,t,n,i){t|=0,n|=0,i|=0;var o=0;e:{t:{n:{i:{o:if(!((o=f[96+(e|=0)>>2]+-2|0)>>>0>2)){a:switch(o-1|0){case 0:if(t>>>0>2)break o;r:switch(t-1|0){case 0:break n;case 1:break r;default:break i}break t;case 1:break a;default:break i}if(!(t>>>0>5)){a:switch(t-1|0){case 2:t=f[e+104>>2],f[n>>2]=f[e+100>>2],f[n+4>>2]=t,t=f[e+112>>2],f[n+8>>2]=f[e+108>>2],f[n+12>>2]=t;break e;case 3:t=f[e+128>>2],f[n+8>>2]=f[e+124>>2],f[n+12>>2]=t,t=f[e+120>>2],f[n>>2]=f[e+116>>2],f[n+4>>2]=t;break e;case 1:break t;case 0:break n;case 4:break a;default:break i}t=f[e+144>>2],f[n+8>>2]=f[e+140>>2],f[n+12>>2]=t,t=f[e+136>>2],f[n>>2]=f[e+132>>2],f[n+4>>2]=t,t=f[e+160>>2],f[i+8>>2]=f[e+156>>2],f[i+12>>2]=t,t=f[e+152>>2],f[i>>2]=f[e+148>>2],f[i+4>>2]=t}}return}return t=f[e+104>>2],f[n>>2]=f[e+100>>2],f[n+4>>2]=t,t=f[e+112>>2],f[n+8>>2]=f[e+108>>2],f[n+12>>2]=t,t=f[e+128>>2],f[i+8>>2]=f[e+124>>2],f[i+12>>2]=t,t=f[e+120>>2],f[i>>2]=f[e+116>>2],void(f[i+4>>2]=t)}return t=f[e+128>>2],f[n+8>>2]=f[e+124>>2],f[n+12>>2]=t,t=f[e+120>>2],f[n>>2]=f[e+116>>2],f[n+4>>2]=t,t=f[e+144>>2],f[i+8>>2]=f[e+140>>2],f[i+12>>2]=t,t=f[e+136>>2],f[i>>2]=f[e+132>>2],void(f[i+4>>2]=t)}return t=f[e+144>>2],f[n+8>>2]=f[e+140>>2],f[n+12>>2]=t,t=f[e+136>>2],f[n>>2]=f[e+132>>2],f[n+4>>2]=t,t=f[e+112>>2],f[i+8>>2]=f[e+108>>2],f[i+12>>2]=t,t=f[e+104>>2],f[i>>2]=f[e+100>>2],void(f[i+4>>2]=t)}t=f[e+160>>2],f[i+8>>2]=f[e+156>>2],f[i+12>>2]=t,t=f[e+152>>2],f[i>>2]=f[e+148>>2],f[i+4>>2]=t},o[416]=function(e,t,n){n|=0,t=f[112+(e=((t|=0)<<4)+(e|=0)|0)>>2],f[n+8>>2]=f[e+108>>2],f[n+12>>2]=t,t=f[e+104>>2],f[n>>2]=f[e+100>>2],f[n+4>>2]=t},o[417]=function(e){return 0|(4==(0|(e=f[96+(e|=0)>>2]))?4:(3==(0|e))<<1)},o[418]=ks,o[419]=Ls,o[420]=function(){return 0},o[421]=Gt,o[422]=function(e){(e=Gt(e|=0))&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[423]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=y(0),N=y(0),D=y(0),M=y(0);r=d[e+44>>2],l=d[e+60>>2],a=f[e+20>>2],s=d[e+40>>2],_=d[e+56>>2],c=d[e+36>>2],u=d[e+52>>2],I=y(o[f[f[e>>2]+48>>2]](e)),R=y(o[f[f[e>>2]+48>>2]](e)),N=y(o[f[f[e>>2]+48>>2]](e)),D=d[t+52>>2],h=d[t+24>>2],x=d[t+20>>2],p=d[t+56>>2],b=d[t+40>>2],C=d[t+36>>2],M=d[t+48>>2],S=d[t+8>>2],E=d[t>>2],w=d[t+4>>2],T=d[t+16>>2],P=d[t+32>>2],f[n+12>>2]=0,m=p,p=y(a?y(u+c)*y(.5):0),v=y(a?y(_+s)*y(.5):0),g=y(a?y(l+r)*y(.5):0),m=y(m+y(y(y(P*p)+y(C*v))+y(b*g))),c=y(I+y(a?y(u-c)*y(.5):0)),s=y(R+y(a?y(_-s)*y(.5):0)),r=y(N+y(a?y(l-r)*y(.5):0)),l=y(y(y(c*y(A(P)))+y(s*y(A(C))))+y(r*y(A(b)))),d[n+8>>2]=m-l,_=y(D+y(y(y(p*T)+y(v*x))+y(g*h))),u=y(y(y(c*y(A(T)))+y(s*y(A(x))))+y(r*y(A(h)))),d[n+4>>2]=_-u,h=y(M+y(y(y(p*E)+y(v*w))+y(g*S))),r=y(y(y(c*y(A(E)))+y(s*y(A(w))))+y(r*y(A(S)))),d[n>>2]=h-r,f[i+12>>2]=0,d[i+8>>2]=l+m,d[i+4>>2]=u+_,d[i>>2]=r+h},o[424]=function(e,t){e|=0,t|=0;var n,i=0,a=0,r=0,s=0,c=0,l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0);if(R=n=R-144|0,f[e+20>>2]>=1)for(r=n- -64|0;i=(s=g(c,80))+f[e+28>>2]|0,a=f[i+12>>2],f[n+24>>2]=f[i+8>>2],f[n+28>>2]=a,a=f[i+4>>2],f[n+16>>2]=f[i>>2],f[n+20>>2]=a,a=f[i+28>>2],f[n+40>>2]=f[i+24>>2],f[n+44>>2]=a,a=f[i+20>>2],f[n+32>>2]=f[i+16>>2],f[n+36>>2]=a,a=f[i+44>>2],f[n+56>>2]=f[i+40>>2],f[n+60>>2]=a,a=f[i+36>>2],f[n+48>>2]=f[i+32>>2],f[n+52>>2]=a,a=f[i+60>>2],f[r+8>>2]=f[i+56>>2],f[r+12>>2]=a,a=f[i+52>>2],f[r>>2]=f[i+48>>2],f[r+4>>2]=a,i=f[i+64>>2],i=0|o[f[f[i>>2]+28>>2]](i),f[n+8>>2]=f[i+8>>2],a=f[i+4>>2],f[n>>2]=f[i>>2],f[n+4>>2]=a,l=d[e+188>>2],_=d[t+4>>2],u=d[e+184>>2],h=d[t>>2],d[n+8>>2]=y(d[n+8>>2]*d[t+8>>2])/d[e+192>>2],f[n+12>>2]=0,d[n>>2]=y(h*d[n>>2])/u,d[n+4>>2]=y(_*d[n+4>>2])/l,i=f[64+(f[e+28>>2]+s|0)>>2],o[f[f[i>>2]+24>>2]](i,n),l=d[e+184>>2],_=d[t>>2],u=d[e+188>>2],h=d[t+4>>2],p=d[e+192>>2],m=d[t+8>>2],f[n+76>>2]=0,d[n+72>>2]=y(m*d[n+72>>2])/p,d[n+68>>2]=y(h*d[n+68>>2])/u,d[n+64>>2]=y(_*d[n+64>>2])/l,a=f[n+20>>2],i=f[e+28>>2]+s|0,f[i>>2]=f[n+16>>2],f[i+4>>2]=a,a=f[n+28>>2],f[i+8>>2]=f[n+24>>2],f[i+12>>2]=a,a=f[n+44>>2],f[i+24>>2]=f[n+40>>2],f[i+28>>2]=a,a=f[n+36>>2],f[i+16>>2]=f[n+32>>2],f[i+20>>2]=a,a=f[n+60>>2],f[i+40>>2]=f[n+56>>2],f[i+44>>2]=a,a=f[n+52>>2],f[i+32>>2]=f[n+48>>2],f[i+36>>2]=a,a=f[r+12>>2],f[i+56>>2]=f[r+8>>2],f[i+60>>2]=a,a=f[r+4>>2],f[i+48>>2]=f[r>>2],f[i+52>>2]=a,f[e+68>>2]&&(i=f[64+(f[e+28>>2]+s|0)>>2],o[f[f[i>>2]+8>>2]](i,n+16|0,n+128|0,n+112|0),i=f[n+140>>2],f[n+88>>2]=f[n+136>>2],f[n+92>>2]=i,i=f[n+132>>2],f[n+80>>2]=f[n+128>>2],f[n+84>>2]=i,i=f[n+124>>2],f[n+104>>2]=f[n+120>>2],f[n+108>>2]=i,i=f[n+116>>2],f[n+96>>2]=f[n+112>>2],f[n+100>>2]=i,fi(f[e+68>>2],f[76+(f[e+28>>2]+s|0)>>2],n+80|0)),(0|(c=c+1|0))<f[e+20>>2];);i=f[t+4>>2],f[e+184>>2]=f[t>>2],f[e+188>>2]=i,i=f[t+12>>2],f[e+192>>2]=f[t+8>>2],f[e+196>>2]=i,o[f[f[e>>2]+68>>2]](e),R=n+144|0},o[425]=function(e){return 184+(e|=0)|0},o[426]=function(e,t,n){e|=0,t=y(t),n|=0;var i,a=y(0),r=y(0),s=y(0),c=y(0);R=i=R-96|0,f[i+44>>2]=0,f[i+48>>2]=0,f[i+56>>2]=0,f[i+60>>2]=0,f[i+52>>2]=1065353216,f[i+76>>2]=0,f[i+80>>2]=0,f[i+72>>2]=1065353216,f[i+84>>2]=0,f[i+88>>2]=0,f[i+92>>2]=0,f[i+36>>2]=0,f[i+40>>2]=0,f[i+32>>2]=1065353216,f[i+64>>2]=0,f[i+68>>2]=0,o[f[f[e>>2]+8>>2]](e,i+32|0,i+16|0,i),a=d[i+24>>2],c=d[i+8>>2],t=y(t/y(12)),r=y(y(d[i>>2]-d[i+16>>2])*y(.5)),r=y(r+r),r=y(r*r),s=y(y(d[i+4>>2]-d[i+20>>2])*y(.5)),s=y(s+s),s=y(s*s),d[n+8>>2]=t*y(r+s),a=y(y(c-a)*y(.5)),a=y(a+a),a=y(a*a),d[n+4>>2]=t*y(r+a),d[n>>2]=t*y(s+a),R=i+96|0},o[427]=function(){return 11168},o[428]=function(e,t){e|=0,t=y(t),d[e+76>>2]=t},o[429]=function(e){return y(d[76+(e|=0)>>2])},o[430]=function(){return 24},o[431]=function(e,t,n){var i=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0,p=0,m=0,d=0;if(go(e|=0,t|=0,n|=0),f[t+20>>2]=f[e+76>>2],i=f[e+20>>2],f[t+12>>2]=0,f[t+16>>2]=i,i){if(s=0|o[f[f[n>>2]+16>>2]](n,76,i),i=f[s+8>>2],f[t+12>>2]=o[f[f[n>>2]+28>>2]](n,i),f[t+16>>2]>0)for(;r=(a=g(c,80))+f[e+28>>2]|0,f[i+72>>2]=f[r+72>>2],f[i+64>>2]=o[f[f[n>>2]+28>>2]](n,f[r+64>>2]),o[f[f[n>>2]+24>>2]](n,f[64+(a+f[e+28>>2]|0)>>2])||(r=f[64+(a+f[e+28>>2]|0)>>2],u=n,h=0|o[f[f[r>>2]+52>>2]](r),p=1,_=f[f[n>>2]+16>>2],r=0|o[_](0|u,0|h,0|p),l=f[64+(a+f[e+28>>2]|0)>>2],p=n,h=r,u=0|o[f[f[l>>2]+56>>2]](l,f[r+8>>2],n),m=1346455635,d=f[64+(a+f[e+28>>2]|0)>>2],_=f[f[n>>2]+20>>2],o[_](0|p,0|h,0|u,0|m,0|d)),a=a+f[e+28>>2]|0,f[i+68>>2]=f[a+68>>2],f[i>>2]=f[a>>2],f[i+4>>2]=f[a+4>>2],f[i+8>>2]=f[a+8>>2],f[i+12>>2]=f[a+12>>2],f[i+16>>2]=f[a+16>>2],f[i+20>>2]=f[a+20>>2],f[i+24>>2]=f[a+24>>2],f[i+28>>2]=f[a+28>>2],f[i+32>>2]=f[a+32>>2],f[i+36>>2]=f[a+36>>2],f[i+40>>2]=f[a+40>>2],f[i+44>>2]=f[a+44>>2],f[i+48>>2]=f[a+48>>2],f[i+52>>2]=f[a+52>>2],f[i+56>>2]=f[a+56>>2],f[i+60>>2]=f[a+60>>2],i=i+76|0,(0|(c=c+1|0))<f[t+16>>2];);o[f[f[n>>2]+20>>2]](n,s,11092,1497453121,f[s+8>>2])}return 11117},o[432]=function(e,t){t|=0;var n=0,i=0,a=0;if(f[72+(e|=0)>>2]=f[e+72>>2]+1,(0|(n=f[e+20>>2]))>=1)for(;i=n+-1|0,f[64+(f[e+28>>2]+g(i,80)|0)>>2]==(0|t)&&ue(e,i),a=(0|n)>1,n=i,a;);o[f[f[e>>2]+68>>2]](e)},o[433]=function(e){e|=0;var t,n=y(0),i=0,a=0,r=0;if(R=t=R-32|0,f[e+52>>2]=-581039253,f[e+56>>2]=-581039253,f[e+36>>2]=1566444395,f[e+40>>2]=1566444395,f[e+60>>2]=-581039253,f[e+64>>2]=0,f[e+44>>2]=1566444395,f[e+48>>2]=0,f[e+20>>2]>=1)for(;a=f[e+28>>2]+g(i,80)|0,r=f[a+64>>2],o[f[f[r>>2]+8>>2]](r,a,t+16|0,t),n=d[t+16>>2],d[e+36>>2]>n&&(d[e+36>>2]=n),n=d[t>>2],d[e+52>>2]<n&&(d[e+52>>2]=n),n=d[t+20>>2],d[e+40>>2]>n&&(d[e+40>>2]=n),n=d[t+4>>2],d[e+56>>2]<n&&(d[e+56>>2]=n),n=d[t+24>>2],d[e+44>>2]>n&&(d[e+44>>2]=n),n=d[t+8>>2],d[e+60>>2]<n&&(d[e+60>>2]=n),(0|(i=i+1|0))<f[e+20>>2];);R=t+32|0},o[434]=Qs,o[435]=Ns,o[436]=Ss,o[437]=function(e,t){e|=0,t|=0;var n=y(0),i=0,o=0,a=y(0);o=f[e+72>>2]<<2,n=d[o+t>>2],i=o,o=e+16|0,a=y(d[e+64>>2]*y(n/d[i+o>>2])),d[e+64>>2]=a,i=f[e+68>>2]<<2,n=y(d[i+t>>2]/d[o+i>>2]),i=f[e+76>>2]<<2,n=y(d[e+60>>2]*y(y(n+y(d[i+t>>2]/d[o+i>>2]))*y(.5))),d[e+60>>2]=n,d[e+56>>2]=n/y(S(y(y(a*a)+y(n*n)))),xa(e,t)},o[438]=function(e,t,n){e|=0,t=y(t),n|=0;var i,a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0);R=i=R-96|0,f[i+44>>2]=0,f[i+48>>2]=0,f[i+56>>2]=0,f[i+60>>2]=0,f[i+52>>2]=1065353216,f[i+76>>2]=0,f[i+80>>2]=0,f[i+72>>2]=1065353216,f[i+84>>2]=0,f[i+88>>2]=0,f[i+92>>2]=0,f[i+36>>2]=0,f[i+40>>2]=0,f[i+32>>2]=1065353216,f[i+64>>2]=0,f[i+68>>2]=0,o[f[f[e>>2]+8>>2]](e,i+32|0,i+16|0,i),c=d[i+24>>2],l=d[i+8>>2],r=d[i+16>>2],s=d[i>>2],_=d[i+20>>2],u=d[i+4>>2],a=y(o[f[f[e>>2]+48>>2]](e)),f[n+12>>2]=0,t=y(t*y(.0833333283662796)),r=y(a+y(y(s-r)*y(.5))),r=y(r+r),r=y(r*r),s=y(a+y(y(u-_)*y(.5))),s=y(s+s),s=y(s*s),d[n+8>>2]=t*y(r+s),a=y(a+y(y(l-c)*y(.5))),a=y(a+a),a=y(a*a),d[n+4>>2]=t*y(r+a),d[n>>2]=t*y(s+a),R=i+96|0},o[439]=function(){return 11308},o[440]=function(e){f[8+(e|=0)>>2]=0,f[e+12>>2]=0,f[e>>2]=0,f[e+4>>2]=1065353216},o[441]=$s,o[442]=function(e,t,n){return go(e|=0,t|=0,n|=0),f[t+28>>2]=f[e+32>>2],f[t+32>>2]=f[e+36>>2],f[t+36>>2]=f[e+40>>2],f[t+40>>2]=f[e+44>>2],f[t+12>>2]=f[e+16>>2],f[t+16>>2]=f[e+20>>2],f[t+20>>2]=f[e+24>>2],f[t+24>>2]=f[e+28>>2],n=f[e+48>>2],f[t+48>>2]=0,f[t+44>>2]=n,e=f[e+72>>2],f[t+56>>2]=0,f[t+52>>2]=e,11313},o[443]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0),a=y(0),r=y(0),s=y(0),c=y(0);Gn(e,t,n),y(o[f[f[t>>2]+48>>2]](t))!=y(0)&&(a=d[n+4>>2],i=d[n>>2],r=d[n+8>>2],s=y(o[f[f[t>>2]+48>>2]](t)),c=i=(t=y(y(y(i*i)+y(a*a))+y(r*r))<y(14210854715202004e-30))?y(-1):i,r=t?y(-1):r,a=t?y(-1):a,i=y(y(1)/y(S(y(y(r*r)+y(y(i*i)+y(a*a)))))),d[e>>2]=d[e>>2]+y(s*y(c*i)),d[e+4>>2]=d[e+4>>2]+y(s*y(a*i)),d[e+8>>2]=d[e+8>>2]+y(s*y(r*i)))},o[444]=function(e,t,n){Gn(e|=0,t|=0,n|=0)},o[445]=function(e,t,n,i){e|=0,t|=0,n|=0;var o,a=0,r=0,s=0;if(R=o=R-16|0,(0|(i|=0))>=1)for(;Gn(o,e,(a=r<<4)+t|0),s=f[o+12>>2],f[8+(a=n+a|0)>>2]=f[o+8>>2],f[a+12>>2]=s,s=f[o+4>>2],f[a>>2]=f[o>>2],f[a+4>>2]=s,(0|(r=r+1|0))!=(0|i););R=o+16|0},o[446]=vn,o[447]=function(e){(e=vn(e|=0))&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[448]=Ns,o[449]=yi,o[450]=function(e,t,n){e|=0,t=y(t),n|=0;var i=y(0),a=y(0);i=y(o[f[f[e>>2]+48>>2]](e)),a=y(o[f[f[e>>2]+48>>2]](e)),f[n+12>>2]=0,t=y(a*y(i*y(t*y(.4000000059604645)))),d[n+8>>2]=t,d[n+4>>2]=t,d[n>>2]=t},o[451]=function(){return 11508},o[452]=function(e,t){e|=0,t=y(t),d[e+48>>2]=t},o[453]=function(e){return y(y(d[32+(e|=0)>>2]*d[e+16>>2]))},o[454]=function(e,t,n){e|=0,t|=0,n|=0;var i,a=y(0),r=y(0),s=y(0),c=0,l=y(0),_=y(0);R=i=R-16|0,o[f[f[t>>2]+68>>2]](i,t,n),c=f[i+12>>2],f[e+8>>2]=f[i+8>>2],f[e+12>>2]=c,c=f[i+4>>2],f[e>>2]=f[i>>2],f[e+4>>2]=c,r=d[n+4>>2],a=d[n>>2],s=d[n+8>>2],l=y(o[f[f[t>>2]+48>>2]](t)),_=a=(t=y(y(y(a*a)+y(r*r))+y(s*s))<y(14210854715202004e-30))?y(-1):a,s=t?y(-1):s,r=t?y(-1):r,a=y(y(1)/y(S(y(y(s*s)+y(y(a*a)+y(r*r)))))),d[e>>2]=d[e>>2]+y(l*y(_*a)),d[e+4>>2]=d[e+4>>2]+y(l*y(r*a)),d[e+8>>2]=d[e+8>>2]+y(l*y(s*a)),R=i+16|0},o[455]=function(e){f[(e|=0)>>2]=0,f[e+4>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0},o[456]=function(e,t,n,i){(0|(i|=0))>=1&&dn(n|=0,0,i<<4)},o[457]=function(e){var t=0;return f[(e|=0)>>2]=11524,h[e+65|0]&&(t=f[e+56>>2],o[f[f[t>>2]>>2]](t),(t=f[e+56>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t))),0|e},o[458]=function(e){var t=0;f[(e|=0)>>2]=11524,h[e+65|0]&&(t=f[e+56>>2],o[f[f[t>>2]>>2]](t),(t=f[e+56>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t))),e&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[459]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=y(0),N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0);v=d[e+28>>2],E=d[e+44>>2],w=d[e+24>>2],T=d[e+40>>2],s=d[e+20>>2],P=d[e+36>>2],I=y(o[f[f[e>>2]+48>>2]](e)),R=y(o[f[f[e>>2]+48>>2]](e)),N=y(o[f[f[e>>2]+48>>2]](e)),D=d[t+52>>2],c=d[t+24>>2],l=d[t+20>>2],_=d[t+56>>2],u=d[e+24>>2],h=d[e+40>>2],g=d[e+28>>2],M=d[e+44>>2],p=d[t+40>>2],a=d[t+36>>2],O=d[t+48>>2],x=d[t+8>>2],b=d[t>>2],C=d[t+4>>2],S=d[t+16>>2],z=d[e+20>>2],L=d[e+36>>2],r=d[t+32>>2],f[n+12>>2]=0,m=_,_=y(y(L+z)*y(.5)),u=y(y(h+u)*y(.5)),h=y(y(M+g)*y(.5)),g=y(m+y(y(y(r*_)+y(a*u))+y(p*h))),s=y(I+y(y(P-s)*y(.5))),m=y(s*y(A(r))),r=y(R+y(y(T-w)*y(.5))),m=y(m+y(r*y(A(a)))),a=y(N+y(y(E-v)*y(.5))),p=y(m+y(a*y(A(p)))),d[n+8>>2]=g-p,v=y(D+y(y(y(_*S)+y(u*l))+y(h*c))),c=y(y(y(s*y(A(S)))+y(r*y(A(l))))+y(a*y(A(c)))),d[n+4>>2]=v-c,l=y(O+y(y(y(_*b)+y(u*C))+y(h*x))),a=y(y(y(s*y(A(b)))+y(r*y(A(C))))+y(a*y(A(x)))),d[n>>2]=l-a,f[i+12>>2]=0,d[i+8>>2]=p+g,d[i+4>>2]=c+v,d[i>>2]=a+l},o[460]=function(e,t){e|=0,t|=0;var n=y(0),i=0,r=y(0);i=0|o[f[f[e>>2]+28>>2]](e),n=y(d[i>>2]-d[t>>2]),r=y(n*n),n=y(d[i+4>>2]-d[t+4>>2]),r=y(r+y(n*n)),n=y(d[i+8>>2]-d[t+8>>2]),y(r+y(n*n))>y(1.1920928955078125e-7)&&(ba(e,t),h[e+65|0]&&(t=f[e+56>>2],o[f[f[t>>2]>>2]](t),(t=f[e+56>>2])&&(f[6258]=f[6258]+1,o[f[4969]](t))),f[6257]=f[6257]+1,i=js(t=0|o[f[4968]](172,16)),f[e+56>>2]=t,Q(i,f[e+52>>2],h[e+64|0],e+20|0,e+36|0),a[e+65|0]=1)},o[461]=function(e){return f[52+(e|=0)>>2]+4|0},o[462]=fs,o[463]=function(){return 12132},o[464]=function(e,t){e|=0,t=y(t),d[e+16>>2]=t},o[465]=function(e){return y(d[16+(e|=0)>>2])},o[466]=$s,o[467]=function(e,t,n){var i=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0;go(e|=0,t|=0,n|=0),i=f[e+52>>2],o[f[f[i>>2]+56>>2]](i,t+12|0,n),f[t+52>>2]=f[e+16>>2];e:if(!f[e+56>>2]||1&o[f[f[n>>2]+52>>2]](n))f[t+40>>2]=0,f[t+44>>2]=0;else{if(i=0|o[f[f[n>>2]+24>>2]](n,f[e+56>>2])){f[t+44>>2]=0,f[t+40>>2]=i;break e}i=0|o[f[f[n>>2]+28>>2]](n,f[e+56>>2]),f[t+44>>2]=0,f[t+40>>2]=i,i=f[e+56>>2],s=n,c=0|o[f[f[i>>2]+12>>2]](i),l=1,r=f[f[n>>2]+16>>2],i=0|o[r](0|s,0|c,0|l),a=f[e+56>>2],l=n,c=i,s=0|o[f[f[a>>2]+16>>2]](a,f[i+8>>2],n),_=1213612625,u=f[e+56>>2],r=f[f[n>>2]+20>>2],o[r](0|l,0|c,0|s,0|_,0|u)}e:if(!f[e+60>>2]||2&o[f[f[n>>2]+52>>2]](n))f[t+48>>2]=0;else{if(i=0|o[f[f[n>>2]+24>>2]](n,f[e+60>>2])){f[t+48>>2]=i;break e}f[t+48>>2]=o[f[f[n>>2]+28>>2]](n,f[e+60>>2]),i=f[e+60>>2],u=n,_=0|o[f[f[i>>2]+8>>2]](i),s=1,r=f[f[n>>2]+16>>2],i=0|o[r](0|u,0|_,0|s),a=f[e+60>>2],s=n,_=i,u=0|o[f[f[a>>2]+12>>2]](a,f[i+8>>2],n),c=1346456916,l=f[e+60>>2],r=f[f[n>>2]+20>>2],o[r](0|s,0|_,0|u,0|c,0|l)}return f[t+56>>2]=0,11608},o[468]=function(e,t,n,i){var o,a;t|=0,n|=0,i|=0,R=o=R+-64|0,a=f[52+(e|=0)>>2],f[o+60>>2]=0,f[o+8>>2]=t,f[o+4>>2]=a,f[o>>2]=11996,Qe(f[e+56>>2],o,n,i),R=o- -64|0},o[469]=function(e,t,n){e|=0,t|=0,n|=0;var i,a=0,r=y(0),s=y(0),c=y(0),l=y(0);R=i=R-160|0,f[i+152>>2]=0,f[i+144>>2]=0,f[i+148>>2]=0,f[i+136>>2]=0,f[i+140>>2]=0,f[i+44>>2]=0,f[i+48>>2]=0,f[i+56>>2]=0,f[i+60>>2]=0,f[(a=i- -64|0)>>2]=0,f[a+4>>2]=0,f[i+76>>2]=0,f[i+80>>2]=0,f[i+72>>2]=1065353216,f[i+84>>2]=0,f[i+88>>2]=0,f[i+92>>2]=1065353216,f[i+96>>2]=0,a=f[i+144>>2],f[i+100>>2]=f[i+140>>2],f[i+104>>2]=a,a=f[i+152>>2],f[i+108>>2]=f[i+148>>2],f[i+112>>2]=a,f[i+36>>2]=0,f[i+40>>2]=0,f[i+32>>2]=12412,f[i+52>>2]=1065353216,f[i+116>>2]=-581039253,r=d[n+4>>2],s=d[n>>2],c=d[n+8>>2],f[i+132>>2]=0,l=y(c*y(0)),d[i+124>>2]=y(r+y(s*d[i+56>>2]))+l,r=y(r*y(0)),d[i+128>>2]=c+y(y(s*d[i+60>>2])+r),d[i+120>>2]=y(s+r)+l,f[i+24>>2]=1566444395,f[i+28>>2]=0,f[i+16>>2]=1566444395,f[i+20>>2]=1566444395,f[i+8>>2]=-581039253,f[i+12>>2]=0,f[i>>2]=-581039253,f[i+4>>2]=-581039253,o[f[f[t>>2]+64>>2]](t,i+32|0,i,i+16|0),t=f[i+48>>2],f[e+8>>2]=f[i+44>>2],f[e+12>>2]=t,t=f[i+40>>2],f[e>>2]=f[i+36>>2],f[e+4>>2]=t,R=i+160|0},o[470]=function(e,t,n){e|=0,n|=0,o[f[f[(t|=0)>>2]+68>>2]](e,t,n)},o[471]=function(e,t){t|=0;var n=0,i=0,a=0,r=0,s=0,c=0,l=0,_=0;(n=f[56+(e|=0)>>2])&&(r=t,s=0|o[f[f[n>>2]+12>>2]](n),c=1,a=f[f[t>>2]+16>>2],n=0|o[a](0|r,0|s,0|c),i=f[e+56>>2],c=t,s=n,r=0|o[f[f[i>>2]+16>>2]](i,f[n+8>>2],t),l=1213612625,_=f[e+56>>2],a=f[f[t>>2]+20>>2],o[a](0|c,0|s,0|r,0|l,0|_))},o[472]=function(e,t){t|=0;var n=0,i=0,a=0,r=0,s=0,c=0,l=0,_=0;(n=f[60+(e|=0)>>2])&&(r=t,s=0|o[f[f[n>>2]+8>>2]](n),c=1,a=f[f[t>>2]+16>>2],n=0|o[a](0|r,0|s,0|c),i=f[e+60>>2],c=t,s=n,r=0|o[f[f[i>>2]+12>>2]](i,f[n+8>>2],t),l=1346456916,_=f[e+60>>2],a=f[f[t>>2]+20>>2],o[a](0|c,0|s,0|r,0|l,0|_))},o[473]=Qs,o[474]=rc,o[475]=At,o[476]=rc,o[477]=At,o[478]=rc,o[479]=function(e,t,n){e|=0,t|=0,n|=0;var i,a,r,s,c,l,_=0,u=0,m=0,A=0,x=y(0),b=y(0),C=y(0),S=y(0),E=0;R=i=R-32|0,f[e+60>>2]=f[e+60>>2]+1,m=f[e+4>>2],o[f[f[m>>2]+16>>2]](m,i+28|0,i+24|0,i+20|0,i+16|0,i+12|0,i+8|0,i+4|0,i,t),r=f[i+12>>2]+g(f[i+8>>2],n)|0,s=f[i+20>>2],m=(a=f[e+4>>2])+12|0,u=A=f[i+28>>2];e:if((_=(c=f[i>>2])+-2|0)>>>0<=1){if(E=p[r+4>>1],!(_-1))break e;E=f[r+8>>2]}else E=h[r+2|0];l=f[i+16>>2],_=u+g(E,l)|0,s?(x=y(d[a+8>>2]*y(v[_+8>>3])),b=y(d[a+4>>2]*y(v[_>>3])),C=y(v[_+16>>3]),u=m):(x=y(d[_+4>>2]*d[a+8>>2]),b=y(d[_>>2]*d[a+4>>2]),C=d[a+12>>2],u=_+8|0),S=d[u>>2],f[e+56>>2]=0,d[e+48>>2]=x,d[e+44>>2]=b,d[e+52>>2]=S*C;e:if((_=c+-2|0)>>>0<=1){if(u=f[r+4>>2],_-1)break e;u=p[r+2>>1]}else u=h[r+1|0];_=g(u,l)+A|0,s?(x=y(d[a+8>>2]*y(v[_+8>>3])),b=y(d[a+4>>2]*y(v[_>>3])),C=y(v[_+16>>3]),u=m):(x=y(d[_+4>>2]*d[a+8>>2]),b=y(d[_>>2]*d[a+4>>2]),C=d[a+12>>2],u=_+8|0),S=d[u>>2],f[e+40>>2]=0,d[e+32>>2]=x,d[e+28>>2]=b,d[e+36>>2]=S*C;e:if((_=c+-2|0)>>>0<=1){if(u=f[r>>2],_-1)break e;u=p[r>>1]}else u=h[0|r];A=g(u,l)+A|0,s?(C=y(v[A+16>>3]),x=y(d[a+8>>2]*y(v[A+8>>3])),b=y(d[a+4>>2]*y(v[A>>3]))):(m=A+8|0,C=d[a+12>>2],x=y(d[A+4>>2]*d[a+8>>2]),b=y(d[A>>2]*d[a+4>>2])),S=d[m>>2],f[e+24>>2]=0,d[e+16>>2]=x,d[e+12>>2]=b,d[e+20>>2]=S*C,m=f[e+8>>2],o[f[f[m>>2]+8>>2]](m,e+12|0,t,n),e=f[e+4>>2],o[f[f[e>>2]+24>>2]](e,t),R=i+32|0},o[480]=Qs,o[481]=Ns,o[482]=ba,o[483]=function(){return 12460},o[484]=Js,o[485]=go,o[486]=function(e,t,n,i){var a;e|=0,t|=0,n|=0,i|=0,R=a=R-48|0,f[a+12>>2]=t,f[a+8>>2]=12276,t=f[n+12>>2],f[a+24>>2]=f[n+8>>2],f[a+28>>2]=t,t=f[n+4>>2],f[a+16>>2]=f[n>>2],f[a+20>>2]=t,t=f[i+12>>2],f[a+40>>2]=f[i+8>>2],f[a+44>>2]=t,t=f[i+4>>2],f[a+32>>2]=f[i>>2],f[a+36>>2]=t,e=f[e+52>>2],o[f[f[e>>2]+8>>2]](e,a+8|0,n,i),R=a+48|0},o[487]=Qs,o[488]=rc,o[489]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a=0,r=y(0),s=y(0),c=y(0),l=y(0),_=0;((l=(r=d[t>>2])<(s=d[t+16>>2])?r:s)<(c=d[t+32>>2])?l:c)>d[e+24>>2]||d[(d[t+(a=(r>s^1)<<4)>>2]>c?a:32)+t>>2]<d[e+8>>2]||((l=(r=d[t+8>>2])<(s=d[(a=t+24|0)>>2])?r:s)<(c=d[(_=t+40|0)>>2])?l:c)>d[e+32>>2]||d[(d[(a=r>s?t+8|0:a)>>2]>c?a:_)>>2]<d[e+16>>2]||((l=(r=d[t+4>>2])<(s=d[(a=t+20|0)>>2])?r:s)<(c=d[(_=t+36|0)>>2])?l:c)>d[e+28>>2]||d[(d[(a=r>s?t+4|0:a)>>2]>c?a:_)>>2]<d[e+12>>2]||(e=f[e+4>>2],o[f[f[e>>2]+8>>2]](e,t,n,i))},o[490]=rc,o[491]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0);a=d[e+88>>2],r=d[e+92>>2],s=d[e+96>>2],(i=y(y(y(a*d[t>>2])+y(r*d[t+4>>2]))+y(s*d[t+8>>2])))>(o=d[e+84>>2])&&(d[e+84>>2]=i,n=f[t+12>>2],f[e+12>>2]=f[t+8>>2],f[e+16>>2]=n,n=f[t+4>>2],f[e+4>>2]=f[t>>2],f[e+8>>2]=n,o=i),(i=y(y(y(a*d[t+16>>2])+y(r*d[t+20>>2]))+y(s*d[t+24>>2])))>o&&(d[e+84>>2]=i,n=f[t+28>>2],f[e+12>>2]=f[t+24>>2],f[e+16>>2]=n,n=f[t+20>>2],f[e+4>>2]=f[t+16>>2],f[e+8>>2]=n,o=i),(i=y(y(y(a*d[t+32>>2])+y(r*d[t+36>>2]))+y(s*d[t+40>>2])))>o&&(d[e+84>>2]=i,n=f[t+44>>2],f[e+12>>2]=f[t+40>>2],f[e+16>>2]=n,n=f[t+36>>2],f[e+4>>2]=f[t+32>>2],f[e+8>>2]=n)},o[492]=Qs,o[493]=Ns,o[494]=function(e,t,n,i){i|=0,f[8+(n|=0)>>2]=-581039253,f[n+12>>2]=0,f[n>>2]=-581039253,f[n+4>>2]=-581039253,f[i+8>>2]=1566444395,f[i+12>>2]=0,f[i>>2]=1566444395,f[i+4>>2]=1566444395},o[495]=function(e,t){e|=0;var n=0;n=f[4+(t|=0)>>2],f[e+72>>2]=f[t>>2],f[e+76>>2]=n,n=f[t+12>>2],f[e+80>>2]=f[t+8>>2],f[e+84>>2]=n},o[496]=function(e){return 72+(e|=0)|0},o[497]=fs,o[498]=function(){return 12588},o[499]=Zs,o[500]=function(e,t,n){return go(e|=0,t|=0,n|=0),f[t+12>>2]=f[e+72>>2],f[t+16>>2]=f[e+76>>2],f[t+20>>2]=f[e+80>>2],f[t+24>>2]=f[e+84>>2],f[t+28>>2]=f[e+52>>2],f[t+32>>2]=f[e+56>>2],f[t+36>>2]=f[e+60>>2],f[t+40>>2]=f[e- -64>>2],e=f[e+68>>2],f[t+48>>2]=0,f[t+44>>2]=e,12600},o[501]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),x=y(0),b=y(0),C=y(0),E=y(0),w=y(0);R=a=R-48|0,u=d[i>>2],l=d[n>>2],c=y(y(u-l)*y(.5)),_=y(c*c),s=d[i+4>>2],r=d[n+4>>2],c=y(y(s-r)*y(.5)),m=y(_+y(c*c)),_=d[i+8>>2],h=d[n+8>>2],c=y(y(_-h)*y(.5)),c=y(S(y(m+y(c*c)))),_=y(y(_+h)*y(.5)),h=y(y(s+r)*y(.5)),v=y(y(u+l)*y(.5)),u=d[e+60>>2],y(A(u))>y(.7071067690849304)?(l=d[e+56>>2],s=y(y(u*u)+y(l*l)),r=y(y(1)/y(S(s))),g=y(s*r),p=y(l*r),s=d[e+52>>2],x=y(p*y(-s)),r=y(r*y(-u)),b=y(s*r)):(s=d[e+52>>2],l=d[e+56>>2],g=y(y(s*s)+y(l*l)),r=y(y(1)/y(S(g))),b=y(g*r),E=y(r*y(-l)),x=y(u*E),r=y(s*r),g=y(r*y(-u))),C=d[e+68>>2],f[a+44>>2]=0,f[a+28>>2]=0,m=_,_=y(y(y(u*_)+y(y(v*s)+y(h*l)))-C),C=y(m-y(u*_)),p=y(c*p),m=y(C-p),u=y(c*b),b=y(m-u),d[a+40>>2]=b,h=y(h-y(l*_)),r=y(c*r),w=y(h-r),l=y(c*x),x=y(w-l),d[a+36>>2]=x,p=y(p+C),d[a+24>>2]=p-u,r=y(r+h),d[a+20>>2]=r-l,f[a+12>>2]=0,s=y(v-y(s*_)),_=y(c*E),h=y(s-_),c=y(c*g),v=y(h-c),d[a+32>>2]=v,s=y(_+s),d[a+16>>2]=s-c,_=y(u+p),d[a+8>>2]=_,r=y(l+r),d[a+4>>2]=r,s=y(c+s),d[a>>2]=s,o[f[f[t>>2]+8>>2]](t,a,0,0),f[a+44>>2]=0,d[a+40>>2]=_,d[a+36>>2]=r,f[a+28>>2]=0,d[a+24>>2]=u+m,d[a+20>>2]=l+w,d[a+32>>2]=s,d[a+16>>2]=c+h,f[a+12>>2]=0,d[a+8>>2]=b,d[a+4>>2]=x,d[a>>2]=v,o[f[f[t>>2]+8>>2]](t,a,0,1),R=a+48|0},o[502]=sc,o[503]=sc,o[504]=Xt,o[505]=Qs,o[506]=Ns,o[507]=yi,o[508]=function(e,t){e|=0;var n=0;n=f[4+(t|=0)>>2],f[e+20>>2]=f[t>>2],f[e+24>>2]=n,n=f[t+12>>2],f[e+28>>2]=f[t+8>>2],f[e+32>>2]=n},o[509]=function(e){return 20+(e|=0)|0},o[510]=function(e,t){t=y(t)},o[511]=function(){return 13084},o[512]=ks,o[513]=sc,o[514]=sc,o[515]=Ns,o[516]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var o,a=y(0),r=0,s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),x=y(0),b=y(0),C=y(0),S=y(0);o=e+32|0,r=f[e+56>>2],a=d[o+((r+2|0)%3<<2)>>2],f[12+(e=R-16|0)>>2]=0,d[e+8>>2]=a,d[e+4>>2]=a,d[e>>2]=a,d[(r<<=2)+e>>2]=a+d[r+o>>2],u=d[t+52>>2],s=d[t+24>>2],m=d[t+20>>2],h=d[t+56>>2],c=d[t+40>>2],v=d[t+36>>2],p=d[t+48>>2],g=d[t+8>>2],x=d[t>>2],b=d[t+4>>2],C=d[t+16>>2],S=d[t+32>>2],a=d[e+8>>2],l=d[e>>2],_=d[e+4>>2],f[n+12>>2]=0,c=y(y(y(l*y(A(S)))+y(_*y(A(v))))+y(a*y(A(c)))),d[n+8>>2]=h-c,s=y(y(y(l*y(A(C)))+y(_*y(A(m))))+y(a*y(A(s)))),d[n+4>>2]=u-s,a=y(y(y(l*y(A(x)))+y(_*y(A(b))))+y(a*y(A(g)))),d[n>>2]=p-a,f[i+12>>2]=0,d[i+8>>2]=h+c,d[i+4>>2]=u+s,d[i>>2]=p+a},o[517]=function(e,t){e|=0,t|=0;var n=y(0),i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0);n=d[e+20>>2],i=d[e+36>>2],o=d[e+24>>2],a=d[e+40>>2],r=d[e+16>>2],s=d[e+32>>2],xa(e,t),c=d[t>>2],l=d[t+4>>2],_=d[t+8>>2],f[e+44>>2]=0,d[e+40>>2]=_*y(a/o),d[e+36>>2]=l*y(i/n),d[e+32>>2]=c*y(s/r),f[e+48>>2]=f[(e+32|0)+((f[e+56>>2]+2|0)%3<<2)>>2]},o[518]=function(e,t,n){e|=0,t=y(t),n|=0;var i,o=y(0),a=y(0),r=y(0),s=0,c=0;i=e+32|0,c=f[e+56>>2],s=f[i+((c+2|0)%3<<2)>>2],f[12+(e=R-16|0)>>2]=0,f[e+8>>2]=s,f[e+4>>2]=s,f[e>>2]=s,d[(c=(s=c<<2)+e|0)>>2]=d[s+i>>2]+d[c>>2],o=d[e+8>>2],t=y(t*y(.0833333283662796)),a=d[e>>2],a=y(a+a),a=y(a*a),r=d[e+4>>2],r=y(r+r),r=y(r*r),d[n+8>>2]=t*y(a+r),o=y(o+o),o=y(o*o),d[n+4>>2]=t*y(a+o),d[n>>2]=t*y(r+o)},o[519]=function(){return 13612},o[520]=Ir,o[521]=oc,o[522]=$s,o[523]=function(e,t,n){return go(e|=0,t|=0,n|=0),f[t+28>>2]=f[e+32>>2],f[t+32>>2]=f[e+36>>2],f[t+36>>2]=f[e+40>>2],f[t+40>>2]=f[e+44>>2],f[t+12>>2]=f[e+16>>2],f[t+16>>2]=f[e+20>>2],f[t+20>>2]=f[e+24>>2],f[t+24>>2]=f[e+28>>2],n=f[e+48>>2],f[t+48>>2]=0,f[t+44>>2]=n,e=f[e+56>>2],f[t+56>>2]=0,f[t+52>>2]=e,13625},o[524]=function(e,t,n){e|=0,t|=0,n|=0;var i,o,a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0);i=R-16|0,f[e>>2]=0,f[e+4>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0,r=d[n>>2],l=d[n+4>>2],a=d[n+8>>2],(s=y(y(y(r*r)+y(l*l))+y(a*a)))<y(9999999747378752e-20)?(s=y(0),r=y(1)):(c=a,a=y(y(1)/y(S(s))),_=y(c*a),s=y(l*a),r=y(r*a)),f[i+8>>2]=0,f[i+12>>2]=0,f[i>>2]=0,f[i+4>>2]=0,o=(n=f[t+56>>2]<<2)+i|0,u=d[32+(t+n|0)>>2],d[o>>2]=u,l=y(-0xde0b6b000000000),h=d[i>>2],p=d[i+4>>2],c=d[i+8>>2],(a=y(y(y(r*h)+y(s*p))+y(_*c)))>y(-0xde0b6b000000000)&&(f[e+12>>2]=f[i+12>>2],d[e+8>>2]=c,d[e+4>>2]=p,d[e>>2]=h,l=a),f[i+8>>2]=0,f[i+12>>2]=0,f[i>>2]=0,f[i+4>>2]=0,d[o>>2]=-u,c=r,r=d[i>>2],a=d[i+4>>2],c=y(y(c*r)+y(s*a)),s=d[i+8>>2],y(c+y(_*s))>l&&(f[e+12>>2]=f[i+12>>2],d[e+8>>2]=s,d[e+4>>2]=a,d[e>>2]=r)},o[525]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var o,a=0,r=0,s=y(0),c=0,l=y(0),_=y(0),u=y(0),h=y(0),p=0,m=y(0),v=y(0),g=y(0),A=y(0);if(o=R-16|0,(0|i)>=1)for(;f[o+8>>2]=0,f[o+12>>2]=0,f[o>>2]=0,f[o+4>>2]=0,c=(a=(r=f[e+56>>2])<<2)+o|0,l=d[32+(a=e+a|0)>>2],f[c>>2]=f[a+32>>2],h=d[o>>2],s=d[(a=(c=p<<4)+t|0)>>2],g=d[o+4>>2],m=d[a+4>>2],A=d[o+8>>2],v=d[a+8>>2],_=y(y(y(h*s)+y(g*m))+y(A*v)),u=y(-0xde0b6b000000000),_>y(-0xde0b6b000000000)&&(f[12+(r=n+c|0)>>2]=f[o+12>>2],d[r+8>>2]=A,d[r+4>>2]=g,d[r>>2]=h,v=d[a+8>>2],m=d[a+4>>2],s=d[a>>2],r=f[e+56>>2],l=d[32+((r<<2)+e|0)>>2],u=_),h=u,f[o+8>>2]=0,f[o+12>>2]=0,f[o>>2]=0,f[o+4>>2]=0,d[(r<<2)+o>>2]=-l,l=d[o>>2],_=d[o+4>>2],u=y(y(l*s)+y(_*m)),s=d[o+8>>2],y(u+y(s*v))>h&&(f[12+(a=n+c|0)>>2]=f[o+12>>2],d[a+8>>2]=s,d[a+4>>2]=_,d[a>>2]=l),(0|(p=p+1|0))!=(0|i););},o[526]=Ps,o[527]=function(e,t){e|=0;var n,i=0;i=f[4+(t|=0)>>2],n=f[e+96>>2],f[n+4>>2]=f[t>>2],f[n+8>>2]=i,i=f[t+12>>2],f[n+12>>2]=f[t+8>>2],f[n+16>>2]=i,Mn(e)},o[528]=function(e){return f[96+(e|=0)>>2]+4|0},o[529]=function(){return 13880},o[530]=oi,o[531]=function(e,t,n){e|=0,t|=0,n|=0;var i,a=y(0),r=y(0),s=y(0),_=y(0),u=0,h=0,p=0;R=i=R-80|0,f[e>>2]=0,f[e+4>>2]=0,f[e+8>>2]=0,f[e+12>>2]=0,r=d[n>>2],s=d[n+4>>2],_=d[n+8>>2],(a=y(y(y(r*r)+y(s*s))+y(_*_)))<y(9999999747378752e-20)?(u=1065353216,a=y(0)):(a=y(y(1)/y(S(a))),c(y(_*a)),h=l(0),c(y(s*a)),p=l(0),c(y(r*a)),u=l(0),a=d[n+12>>2]),f[i+52>>2]=0,f[i+56>>2]=0,d[i+76>>2]=a,f[i+72>>2]=h,f[i+68>>2]=p,f[i+44>>2]=0,f[i+48>>2]=0,f[i+40>>2]=13824,f[i+64>>2]=u,f[i+60>>2]=-581039253,f[i+32>>2]=1566444395,f[i+36>>2]=0,f[i+24>>2]=1566444395,f[i+28>>2]=1566444395,t=f[t+96>>2],f[i+16>>2]=-581039253,f[i+20>>2]=0,f[i+8>>2]=-581039253,f[i+12>>2]=-581039253,o[f[f[t>>2]+8>>2]](t,i+40|0,i+8|0,i+24|0),t=f[i+56>>2],f[e+8>>2]=f[i+52>>2],f[e+12>>2]=t,t=f[i+48>>2],f[e>>2]=f[i+44>>2],f[e+4>>2]=t,R=i+80|0},o[532]=function(e,t,n,i){e|=0,t|=0,n|=0;var a,r=0,s=0,c=0,l=0,_=0,u=0,h=0;if(R=a=R-80|0,(0|(i|=0))>0){for(;f[12+((r<<4)+n|0)>>2]=-581039253,(0|(r=r+1|0))!=(0|i););for(l=a- -64|0,h=a+40|4;f[a+40>>2]=13824,f[(s=h)+8>>2]=0,f[s+12>>2]=0,f[s>>2]=0,f[s+4>>2]=0,f[a+60>>2]=-581039253,c=f[12+(r=(_=u<<4)+t|0)>>2],f[l+8>>2]=f[r+8>>2],f[l+12>>2]=c,c=f[r+4>>2],f[l>>2]=f[r>>2],f[l+4>>2]=c,f[(r=a)+32>>2]=1566444395,f[r+36>>2]=0,f[r+24>>2]=1566444395,f[r+28>>2]=1566444395,c=f[e+96>>2],f[r+16>>2]=-581039253,f[r+20>>2]=0,f[r+8>>2]=-581039253,f[r+12>>2]=-581039253,o[f[f[c>>2]+8>>2]](c,r+40|0,r+8|0,r+24|0),r=n+_|0,_=f[s+12>>2],f[r+8>>2]=f[s+8>>2],f[r+12>>2]=_,c=f[s+4>>2],f[r>>2]=f[s>>2],f[r+4>>2]=c,(0|(u=u+1|0))!=(0|i););}R=a+80|0},o[533]=tc,o[534]=tc,o[535]=ks,o[536]=Xs,o[537]=tc,o[538]=ks,o[539]=Ls,o[540]=rc,o[541]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0);a=d[e+24>>2],r=d[e+28>>2],s=d[e+32>>2],(i=y(y(y(a*d[t>>2])+y(r*d[t+4>>2]))+y(s*d[t+8>>2])))>(o=d[e+20>>2])&&(d[e+20>>2]=i,n=f[t+12>>2],f[e+12>>2]=f[t+8>>2],f[e+16>>2]=n,n=f[t+4>>2],f[e+4>>2]=f[t>>2],f[e+8>>2]=n,o=i),(i=y(y(y(a*d[t+16>>2])+y(r*d[t+20>>2]))+y(s*d[t+24>>2])))>o&&(d[e+20>>2]=i,n=f[t+28>>2],f[e+12>>2]=f[t+24>>2],f[e+16>>2]=n,n=f[t+20>>2],f[e+4>>2]=f[t+16>>2],f[e+8>>2]=n,o=i),(i=y(y(y(a*d[t+32>>2])+y(r*d[t+36>>2]))+y(s*d[t+40>>2])))>o&&(d[e+20>>2]=i,n=f[t+44>>2],f[e+12>>2]=f[t+40>>2],f[e+16>>2]=n,n=f[t+36>>2],f[e+4>>2]=f[t+32>>2],f[e+8>>2]=n)},o[542]=Qs,o[543]=sc,o[544]=Ps,o[545]=Tn,o[546]=pi,o[547]=function(e,t,n){e|=0,t=y(t),n|=0;var i=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0);i=d[e+40>>2],a=d[e+36>>2],r=d[e+32>>2],s=y(o[f[f[e>>2]+48>>2]](e)),c=y(o[f[f[e>>2]+48>>2]](e)),l=y(o[f[f[e>>2]+48>>2]](e)),f[n+12>>2]=0,t=y(t/y(12)),r=y(r+s),r=y(r+r),r=y(r*r),a=y(a+c),a=y(a+a),a=y(a*a),d[n+8>>2]=t*y(r+a),i=y(i+l),i=y(i+i),i=y(i*i),d[n+4>>2]=t*y(r+i),d[n>>2]=t*y(a+i)},o[548]=function(){return 14168},o[549]=gi,o[550]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0);i=d[t+36>>2],a=d[t+40>>2],r=d[t+32>>2],s=y(o[f[f[t>>2]+48>>2]](t)),c=y(o[f[f[t>>2]+48>>2]](t)),l=y(o[f[f[t>>2]+48>>2]](t)),_=d[n>>2],u=d[n+4>>2],h=d[n+8>>2],f[e+12>>2]=0,a=y(a+l),d[e+8>>2]=h>=y(0)?a:y(-a),i=y(i+c),d[e+4>>2]=u>=y(0)?i:y(-i),i=y(r+s),d[e>>2]=_>=y(0)?i:y(-i)},o[551]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0);i=d[t+36>>2],o=d[t+40>>2],r=d[n+4>>2],s=d[n+8>>2],a=d[t+32>>2],c=d[n>>2],f[e+12>>2]=0,d[e>>2]=c>=y(0)?a:y(-a),d[e+8>>2]=s>=y(0)?o:y(-o),d[e+4>>2]=r>=y(0)?i:y(-i)},o[552]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var o=0,a=0,r=0,s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0);if((0|i)>=1)for(;_=d[(o=(r=a<<4)+t|0)>>2],u=d[o+4>>2],h=d[o+8>>2],s=d[e+32>>2],c=d[e+36>>2],l=d[e+40>>2],f[12+(o=n+r|0)>>2]=0,d[o+8>>2]=h>=y(0)?l:y(-l),d[o+4>>2]=u>=y(0)?c:y(-c),d[o>>2]=_>=y(0)?s:y(-s),(0|(a=a+1|0))!=(0|i););},o[553]=ec,o[554]=function(e,t,n){e|=0,n|=0,(t|=0)>>>0<=5&&(f[n+12>>2]=0,e=t<<2,f[n+8>>2]=f[e+14220>>2],f[n+4>>2]=f[e+14196>>2],f[n>>2]=f[e+14172>>2])},o[555]=function(){return 8},o[556]=Js,o[557]=function(e,t,n,i){n|=0,i|=0;var a,r=0;a=e|=0,(t|=0)>>>0<=11?(r=f[14292+(t<<=2)>>2],t=f[t+14244>>2]):t=0,o[f[f[e>>2]+108>>2]](a,t,n),o[f[f[e>>2]+108>>2]](e,r,i)},o[558]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0);a=d[e+40>>2],i=d[e+36>>2],r=d[e+32>>2],s=y(o[f[f[e>>2]+48>>2]](e)),c=y(o[f[f[e>>2]+48>>2]](e)),l=y(o[f[f[e>>2]+48>>2]](e)),f[n+12>>2]=0,i=y(i+c),e=t>>>1&1,d[n+4>>2]=y(i*y(1^e))-y(i*y(0|e)),i=y(r+s),e=1&t,d[n>>2]=y(i*y(1^e))-y(i*y(0|e)),a=y(a+l),e=t>>>2&1,d[n+8>>2]=y(a*y(1^e))-y(a*y(0|e))},o[559]=ec,o[560]=function(e,t,n,i){var a,r,s;t|=0,n|=0,i|=0,R=a=R-48|0,o[f[f[(e|=0)>>2]+124>>2]](e,a+32|0,i),i=f[a+32>>2],r=f[a+36>>2],s=f[a+40>>2],f[t+12>>2]=0,f[t+8>>2]=s,f[t+4>>2]=r,f[t>>2]=i,f[a+12>>2]=0,f[a+8>>2]=-2147483648^s,f[a+4>>2]=-2147483648^r,f[a>>2]=-2147483648^i,o[f[f[e>>2]+64>>2]](a+16|0,e,a),e=f[a+28>>2],f[n+8>>2]=f[a+24>>2],f[n+12>>2]=e,e=f[a+20>>2],f[n>>2]=f[a+16>>2],f[n+4>>2]=e,R=a+48|0},o[561]=function(e,t,n){e|=0,t|=0,n=y(n);var i=y(0),o=y(0),a=0;return i=d[t>>2],o=d[e+32>>2],i<=y(o+n)^1|i>=y(y(-o)-n)^1||(i=d[t+4>>2],o=d[e+36>>2],i<=y(o+n)^1|i>=y(y(-o)-n)^1||(i=d[t+8>>2],o=d[e+40>>2],i<=y(o+n)&&(a=i>=y(y(-o)-n)))),0|a},o[562]=function(e,t,n){e|=0,t|=0,n|=0;var i=0,o=y(0),a=y(0),r=y(0);if(n>>>0<=5){a=d[e+40>>2],r=d[e+36>>2],o=d[e+32>>2],e=1065353216,i=n;e:{t:{n:{i:switch(n-1|0){case 0:n=0,e=-1082130432,i=0;break e;case 1:n=1065353216;break t;case 2:n=-1082130432;break t;case 3:i=1065353216;break n;case 4:break i;default:break e}i=-1082130432}e=0,o=a,n=0;break e}e=0,o=r,i=0}f[t+8>>2]=i,f[t+4>>2]=n,f[t>>2]=e,d[t+12>>2]=-o}},o[563]=function(e){return _n(e|=0),0|e},o[564]=function(e){_n(e|=0),e&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[565]=F,o[566]=Ks,o[567]=function(e,t,n){e|=0,n|=0;var i=0,a=0,r=0,s=0,c=0,l=0;if(f[16+(t|=0)>>2]=f[e+20>>2],f[t+20>>2]=f[e+24>>2],f[t+24>>2]=f[e+28>>2],f[t+28>>2]=f[e+32>>2],f[t>>2]=f[e+4>>2],f[t+4>>2]=f[e+8>>2],f[t+8>>2]=f[e+12>>2],f[t+12>>2]=f[e+16>>2],f[t+32>>2]=f[e+36>>2],f[t+36>>2]=f[e+40>>2],f[t+40>>2]=f[e+44>>2],f[t+44>>2]=f[e+48>>2],f[t+48>>2]=f[e+56>>2],f[t+52>>2]=h[e+60|0],i=f[e+88>>2],f[t+56>>2]=i,i){if(i=0|o[f[f[n>>2]+28>>2]](n,f[e+96>>2]),f[t+64>>2]=i,i){if(s=f[e+88>>2],c=0|o[f[f[n>>2]+16>>2]](n,48,s),a=f[e+96>>2],(0|s)>=1)for(i=f[c+8>>2];a=(r<<6)+a|0,f[i+16>>2]=f[a+16>>2],f[i+20>>2]=f[a+20>>2],f[i+24>>2]=f[a+24>>2],f[i+28>>2]=f[a+28>>2],f[i>>2]=f[a>>2],f[i+4>>2]=f[a+4>>2],f[i+8>>2]=f[a+8>>2],f[i+12>>2]=f[a+12>>2],f[i+32>>2]=f[a+32>>2],f[i+36>>2]=f[a+36>>2],a=f[a+40>>2],f[i+44>>2]=0,f[i+40>>2]=a,i=i+48|0,a=f[e+96>>2],(0|s)!=(0|(r=r+1|0)););o[f[f[n>>2]+20>>2]](n,c,16324,1497453121,a)}}else f[t+64>>2]=0;if(i=f[e+128>>2],f[t+60>>2]=i,i){if(i=0|o[f[f[n>>2]+28>>2]](n,f[e+136>>2]),f[t+68>>2]=i,i){if(s=f[e+128>>2],c=0|o[f[f[n>>2]+16>>2]](n,16,s),l=f[e+136>>2],(0|s)>=1)for(i=f[c+8>>2],r=0;a=(r<<4)+l|0,f[i+12>>2]=f[a+12>>2],u[i+6>>1]=p[a+6>>1],u[i+8>>1]=p[a+8>>1],u[i+10>>1]=p[a+10>>1],u[i>>1]=p[a>>1],u[i+2>>1]=p[a+2>>1],u[i+4>>1]=p[a+4>>1],i=i+16|0,(0|s)!=(0|(r=r+1|0)););o[f[f[n>>2]+20>>2]](n,c,16347,1497453121,l)}}else f[t+68>>2]=0;if(f[t+76>>2]=f[e+144>>2],i=f[e+152>>2],f[t+80>>2]=i,!i)return f[t+72>>2]=0,16391;if(i=t,t=0|o[f[f[n>>2]+28>>2]](n,f[e+160>>2]),f[i+72>>2]=t,t){if(a=f[e+152>>2],r=0|o[f[f[n>>2]+16>>2]](n,20,a),s=f[e+160>>2],(0|a)>=1)for(i=f[r+8>>2],e=0;t=s+(e<<5)|0,u[i+14>>1]=p[t+6>>1],u[i+16>>1]=p[t+8>>1],u[i+18>>1]=p[t+10>>1],u[i+8>>1]=p[t>>1],u[i+10>>1]=p[t+2>>1],u[i+12>>1]=p[t+4>>1],f[i>>2]=f[t+12>>2],f[i+4>>2]=f[t+16>>2],i=i+20|0,(0|a)!=(0|(e=e+1|0)););o[f[f[n>>2]+20>>2]](n,r,16370,1497453121,s)}return 16391},o[568]=function(e,t){t|=0;var n,i=0,r=0,s=0,c=0,l=0,_=0,m=0,d=0;if(R=n=R+-64|0,f[20+(e|=0)>>2]=f[t+16>>2],f[e+24>>2]=f[t+20>>2],f[e+28>>2]=f[t+24>>2],f[e+32>>2]=f[t+28>>2],f[e+4>>2]=f[t>>2],f[e+8>>2]=f[t+4>>2],f[e+12>>2]=f[t+8>>2],f[e+16>>2]=f[t+12>>2],f[e+36>>2]=f[t+32>>2],f[e+40>>2]=f[t+36>>2],f[e+44>>2]=f[t+40>>2],f[e+48>>2]=f[t+44>>2],f[e+56>>2]=f[t+48>>2],a[e+60|0]=0!=f[t+52>>2],m=f[t+56>>2],f[(r=n)+56>>2]=0,f[r+60>>2]=0,f[r+48>>2]=0,f[r+52>>2]=0,f[r+40>>2]=0,f[r+44>>2]=0,f[r+32>>2]=0,f[r+36>>2]=0,f[r+24>>2]=0,f[r+28>>2]=0,f[r+16>>2]=0,f[r+20>>2]=0,f[r+8>>2]=0,f[r+12>>2]=0,f[r>>2]=0,f[r+4>>2]=0,(0|(_=f[e+88>>2]))<(0|m)){if(f[e+92>>2]<(0|m)){if(m?(f[6257]=f[6257]+1,d=0|o[f[4968]](m<<6,16),r=f[e+88>>2]):r=_,(0|r)>=1)for(;l=(i=s<<6)+d|0,c=i+f[e+96>>2]|0,i=f[c+4>>2],f[l>>2]=f[c>>2],f[l+4>>2]=i,i=f[c+60>>2],f[l+56>>2]=f[c+56>>2],f[l+60>>2]=i,i=f[c+52>>2],f[l+48>>2]=f[c+48>>2],f[l+52>>2]=i,i=f[c+44>>2],f[l+40>>2]=f[c+40>>2],f[l+44>>2]=i,i=f[c+36>>2],f[l+32>>2]=f[c+32>>2],f[l+36>>2]=i,i=f[c+28>>2],f[l+24>>2]=f[c+24>>2],f[l+28>>2]=i,i=f[c+20>>2],f[l+16>>2]=f[c+16>>2],f[l+20>>2]=i,i=f[c+12>>2],f[l+8>>2]=f[c+8>>2],f[l+12>>2]=i,(0|r)!=(0|(s=s+1|0)););(r=f[e+96>>2])&&(h[e+100|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+96>>2]=0),f[e+96>>2]=d,f[e+92>>2]=m,a[e+100|0]=1}for(;s=f[(r=n)+4>>2],i=f[e+96>>2]+(_<<6)|0,f[i>>2]=f[r>>2],f[i+4>>2]=s,s=f[r+60>>2],f[i+56>>2]=f[r+56>>2],f[i+60>>2]=s,s=f[r+52>>2],f[i+48>>2]=f[r+48>>2],f[i+52>>2]=s,s=f[r+44>>2],f[i+40>>2]=f[r+40>>2],f[i+44>>2]=s,s=f[r+36>>2],f[i+32>>2]=f[r+32>>2],f[i+36>>2]=s,s=f[r+28>>2],f[i+24>>2]=f[r+24>>2],f[i+28>>2]=s,s=f[r+20>>2],f[i+16>>2]=f[r+16>>2],f[i+20>>2]=s,s=f[r+12>>2],f[i+8>>2]=f[r+8>>2],f[i+12>>2]=s,(0|m)!=(0|(_=_+1|0)););}if(f[e+88>>2]=m,(0|m)>=1)for(r=f[e+96>>2],s=f[t+64>>2],_=0;f[16+(i=r+(_<<6)|0)>>2]=f[s+16>>2],f[i+20>>2]=f[s+20>>2],f[i+24>>2]=f[s+24>>2],f[i+28>>2]=f[s+28>>2],f[i>>2]=f[s>>2],f[i+4>>2]=f[s+4>>2],f[i+8>>2]=f[s+8>>2],f[i+12>>2]=f[s+12>>2],f[i+32>>2]=f[s+32>>2],f[i+36>>2]=f[s+36>>2],f[i+40>>2]=f[s+40>>2],s=s+48|0,(0|m)!=(0|(_=_+1|0)););if(c=f[t+60>>2],f[n+8>>2]=0,f[n+12>>2]=0,f[n>>2]=0,f[n+4>>2]=0,(0|(s=f[e+128>>2]))<(0|c)){if(f[e+132>>2]<(0|c)){if(c?(f[6257]=f[6257]+1,d=0|o[f[4968]](c<<4,16),r=f[e+128>>2]):(d=0,r=s),(0|r)>=1)for(_=0;m=(i=_<<4)+d|0,l=i+f[e+136>>2]|0,i=f[l+4>>2],f[m>>2]=f[l>>2],f[m+4>>2]=i,i=f[l+12>>2],f[m+8>>2]=f[l+8>>2],f[m+12>>2]=i,(0|r)!=(0|(_=_+1|0)););(r=f[e+136>>2])&&(h[e+140|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+136>>2]=0),f[e+136>>2]=d,f[e+132>>2]=c,a[e+140|0]=1}for(;r=f[n+4>>2],i=f[e+136>>2]+(s<<4)|0,f[i>>2]=f[n>>2],f[i+4>>2]=r,r=f[n+12>>2],f[i+8>>2]=f[n+8>>2],f[i+12>>2]=r,(0|c)!=(0|(s=s+1|0)););}if(f[e+128>>2]=c,(0|c)>=1)for(r=f[e+136>>2],s=f[t+68>>2],_=0;f[12+(i=r+(_<<4)|0)>>2]=f[s+12>>2],u[i+6>>1]=p[s+6>>1],u[i+8>>1]=p[s+8>>1],u[i+10>>1]=p[s+10>>1],u[i>>1]=p[s>>1],u[i+2>>1]=p[s+2>>1],u[i+4>>1]=p[s+4>>1],s=s+16|0,(0|c)!=(0|(_=_+1|0)););if(f[e+144>>2]=f[t+76>>2],(0|(_=f[e+152>>2]))<(0|(c=f[t+80>>2]))){if(f[e+156>>2]<(0|c)){if(c?(f[6257]=f[6257]+1,d=0|o[f[4968]](c<<5,16),r=f[e+152>>2]):(d=0,r=_),(0|r)>=1)for(s=0;m=(i=s<<5)+d|0,l=i+f[e+160>>2]|0,i=f[l+4>>2],f[m>>2]=f[l>>2],f[m+4>>2]=i,i=f[l+28>>2],f[m+24>>2]=f[l+24>>2],f[m+28>>2]=i,i=f[l+20>>2],f[m+16>>2]=f[l+16>>2],f[m+20>>2]=i,i=f[l+12>>2],f[m+8>>2]=f[l+8>>2],f[m+12>>2]=i,(0|r)!=(0|(s=s+1|0)););(r=f[e+160>>2])&&(h[e+164|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+160>>2]=0),f[e+160>>2]=d,f[e+156>>2]=c,a[e+164|0]=1}for(;r=f[n+4>>2],i=f[e+160>>2]+(_<<5)|0,f[i>>2]=f[n>>2],f[i+4>>2]=r,r=f[n+28>>2],f[i+24>>2]=f[n+24>>2],f[i+28>>2]=r,r=f[n+20>>2],f[i+16>>2]=f[n+16>>2],f[i+20>>2]=r,r=f[n+12>>2],f[i+8>>2]=f[n+8>>2],f[i+12>>2]=r,(0|c)!=(0|(_=_+1|0)););}if(f[e+152>>2]=c,(0|c)>=1)for(r=f[e+160>>2],s=f[t+72>>2],e=0;u[6+(t=r+(e<<5)|0)>>1]=p[s+14>>1],u[t+8>>1]=p[s+16>>1],u[t+10>>1]=p[s+18>>1],u[t>>1]=p[s+8>>1],u[t+2>>1]=p[s+10>>1],u[t+4>>1]=p[s+12>>1],f[t+12>>2]=f[s>>2],f[t+16>>2]=f[s+4>>2],s=s+20|0,(0|c)!=(0|(e=e+1|0)););R=n- -64|0},o[569]=function(e,t){t|=0;var n,i=0,r=0,s=0,c=0,l=0,_=0,m=0,g=0;if(R=n=R+-64|0,d[20+(e|=0)>>2]=v[t+32>>3],d[e+24>>2]=v[t+40>>3],d[e+28>>2]=v[t+48>>3],d[e+32>>2]=v[t+56>>3],d[e+4>>2]=v[t>>3],d[e+8>>2]=v[t+8>>3],d[e+12>>2]=v[t+16>>3],d[e+16>>2]=v[t+24>>3],d[e+36>>2]=v[t+64>>3],d[e+40>>2]=v[t+72>>3],d[e+44>>2]=v[t+80>>3],d[e+48>>2]=v[t+88>>3],f[e+56>>2]=f[t+96>>2],a[e+60|0]=0!=f[t+100>>2],m=f[t+104>>2],f[(r=n)+56>>2]=0,f[r+60>>2]=0,f[r+48>>2]=0,f[r+52>>2]=0,f[r+40>>2]=0,f[r+44>>2]=0,f[r+32>>2]=0,f[r+36>>2]=0,f[r+24>>2]=0,f[r+28>>2]=0,f[r+16>>2]=0,f[r+20>>2]=0,f[r+8>>2]=0,f[r+12>>2]=0,f[r>>2]=0,f[r+4>>2]=0,(0|(_=f[e+88>>2]))<(0|m)){if(f[e+92>>2]<(0|m)){if(m?(f[6257]=f[6257]+1,g=0|o[f[4968]](m<<6,16),r=f[e+88>>2]):r=_,(0|r)>=1)for(;l=(i=s<<6)+g|0,c=i+f[e+96>>2]|0,i=f[c+4>>2],f[l>>2]=f[c>>2],f[l+4>>2]=i,i=f[c+60>>2],f[l+56>>2]=f[c+56>>2],f[l+60>>2]=i,i=f[c+52>>2],f[l+48>>2]=f[c+48>>2],f[l+52>>2]=i,i=f[c+44>>2],f[l+40>>2]=f[c+40>>2],f[l+44>>2]=i,i=f[c+36>>2],f[l+32>>2]=f[c+32>>2],f[l+36>>2]=i,i=f[c+28>>2],f[l+24>>2]=f[c+24>>2],f[l+28>>2]=i,i=f[c+20>>2],f[l+16>>2]=f[c+16>>2],f[l+20>>2]=i,i=f[c+12>>2],f[l+8>>2]=f[c+8>>2],f[l+12>>2]=i,(0|r)!=(0|(s=s+1|0)););(r=f[e+96>>2])&&(h[e+100|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+96>>2]=0),f[e+96>>2]=g,f[e+92>>2]=m,a[e+100|0]=1}for(;s=f[(r=n)+4>>2],i=f[e+96>>2]+(_<<6)|0,f[i>>2]=f[r>>2],f[i+4>>2]=s,s=f[r+60>>2],f[i+56>>2]=f[r+56>>2],f[i+60>>2]=s,s=f[r+52>>2],f[i+48>>2]=f[r+48>>2],f[i+52>>2]=s,s=f[r+44>>2],f[i+40>>2]=f[r+40>>2],f[i+44>>2]=s,s=f[r+36>>2],f[i+32>>2]=f[r+32>>2],f[i+36>>2]=s,s=f[r+28>>2],f[i+24>>2]=f[r+24>>2],f[i+28>>2]=s,s=f[r+20>>2],f[i+16>>2]=f[r+16>>2],f[i+20>>2]=s,s=f[r+12>>2],f[i+8>>2]=f[r+8>>2],f[i+12>>2]=s,(0|m)!=(0|(_=_+1|0)););}if(f[e+88>>2]=m,(0|m)>=1)for(r=f[e+96>>2],s=f[t+112>>2],_=0;d[16+(i=r+(_<<6)|0)>>2]=v[s+32>>3],d[i+20>>2]=v[s+40>>3],d[i+24>>2]=v[s+48>>3],d[i+28>>2]=v[s+56>>3],d[i>>2]=v[s>>3],d[i+4>>2]=v[s+8>>3],d[i+8>>2]=v[s+16>>3],d[i+12>>2]=v[s+24>>3],f[i+32>>2]=f[s+64>>2],f[i+36>>2]=f[s+68>>2],f[i+40>>2]=f[s+72>>2],s=s+80|0,(0|m)!=(0|(_=_+1|0)););if(c=f[t+108>>2],f[n+8>>2]=0,f[n+12>>2]=0,f[n>>2]=0,f[n+4>>2]=0,(0|(s=f[e+128>>2]))<(0|c)){if(f[e+132>>2]<(0|c)){if(c?(f[6257]=f[6257]+1,g=0|o[f[4968]](c<<4,16),r=f[e+128>>2]):(g=0,r=s),(0|r)>=1)for(_=0;m=(i=_<<4)+g|0,l=i+f[e+136>>2]|0,i=f[l+4>>2],f[m>>2]=f[l>>2],f[m+4>>2]=i,i=f[l+12>>2],f[m+8>>2]=f[l+8>>2],f[m+12>>2]=i,(0|r)!=(0|(_=_+1|0)););(r=f[e+136>>2])&&(h[e+140|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+136>>2]=0),f[e+136>>2]=g,f[e+132>>2]=c,a[e+140|0]=1}for(;r=f[n+4>>2],i=f[e+136>>2]+(s<<4)|0,f[i>>2]=f[n>>2],f[i+4>>2]=r,r=f[n+12>>2],f[i+8>>2]=f[n+8>>2],f[i+12>>2]=r,(0|c)!=(0|(s=s+1|0)););}if(f[e+128>>2]=c,(0|c)>=1)for(r=f[e+136>>2],s=f[t+116>>2],_=0;f[12+(i=r+(_<<4)|0)>>2]=f[s+12>>2],u[i+6>>1]=p[s+6>>1],u[i+8>>1]=p[s+8>>1],u[i+10>>1]=p[s+10>>1],u[i>>1]=p[s>>1],u[i+2>>1]=p[s+2>>1],u[i+4>>1]=p[s+4>>1],s=s+16|0,(0|c)!=(0|(_=_+1|0)););if(f[e+144>>2]=f[t+120>>2],(0|(_=f[e+152>>2]))<(0|(c=f[t+124>>2]))){if(f[e+156>>2]<(0|c)){if(c?(f[6257]=f[6257]+1,g=0|o[f[4968]](c<<5,16),r=f[e+152>>2]):(g=0,r=_),(0|r)>=1)for(s=0;m=(i=s<<5)+g|0,l=i+f[e+160>>2]|0,i=f[l+4>>2],f[m>>2]=f[l>>2],f[m+4>>2]=i,i=f[l+28>>2],f[m+24>>2]=f[l+24>>2],f[m+28>>2]=i,i=f[l+20>>2],f[m+16>>2]=f[l+16>>2],f[m+20>>2]=i,i=f[l+12>>2],f[m+8>>2]=f[l+8>>2],f[m+12>>2]=i,(0|r)!=(0|(s=s+1|0)););(r=f[e+160>>2])&&(h[e+164|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+160>>2]=0),f[e+160>>2]=g,f[e+156>>2]=c,a[e+164|0]=1}for(;r=f[n+4>>2],i=f[e+160>>2]+(_<<5)|0,f[i>>2]=f[n>>2],f[i+4>>2]=r,r=f[n+28>>2],f[i+24>>2]=f[n+24>>2],f[i+28>>2]=r,r=f[n+20>>2],f[i+16>>2]=f[n+16>>2],f[i+20>>2]=r,r=f[n+12>>2],f[i+8>>2]=f[n+8>>2],f[i+12>>2]=r,(0|c)!=(0|(_=_+1|0)););}if(f[e+152>>2]=c,(0|c)>=1)for(r=f[e+160>>2],s=f[t+128>>2],e=0;u[6+(t=r+(e<<5)|0)>>1]=p[s+14>>1],u[t+8>>1]=p[s+16>>1],u[t+10>>1]=p[s+18>>1],u[t>>1]=p[s+8>>1],u[t+2>>1]=p[s+10>>1],u[t+4>>1]=p[s+12>>1],f[t+12>>2]=f[s>>2],f[t+16>>2]=f[s+4>>2],s=s+20|0,(0|c)!=(0|(e=e+1|0)););R=n- -64|0},o[570]=function(e,t,n,i){return 0|F(e|=0,t|=0,n|=0,i|=0)},o[571]=rc,o[572]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var r,c=y(0),l=0,p=0,m=0,v=y(0),g=0,A=y(0),x=0,b=0,C=0,S=y(0),E=y(0),w=y(0),T=y(0),P=0,I=0,R=0,N=y(0),D=y(0),M=y(0);if(p=f[t+40>>2],l=f[t+24>>2],g=f[t+8>>2],x=(S=d[t+8>>2])<y(0xde0b6b000000000)?g:1566444395,x=(A=d[t+24>>2])<(s(0,x),_())?l:x,s(0,(v=d[t+40>>2])<(s(0,x),_())?p:x),c=_(),m=p,p=A>(s(0,p=S>y(-0xde0b6b000000000)?g:-581039253),_())?l:p,s(0,v>(s(0,p),_())?m:p),S=_(),g=y(S-c)<y(.0020000000949949026),p=f[e+8>>2],N=d[p+12>>2],D=d[p+44>>2],x=65534&(l=(c=y(y((g?y(c+y(-.0010000000474974513)):c)-N)*D))<y(4294967296)&c>=y(0)?~~c>>>0:0),l=f[t+36>>2],b=f[t+20>>2],P=f[t+4>>2],m=(A=d[t+4>>2])<y(0xde0b6b000000000)?P:1566444395,m=(v=d[t+20>>2])<(s(0,m),_())?b:m,s(0,(E=d[t+36>>2])<(s(0,m),_())?l:m),c=_(),m=l,l=v>(s(0,l=A>y(-0xde0b6b000000000)?P:-581039253),_())?b:l,s(0,E>(s(0,l),_())?m:l),A=_(),b=y(A-c)<y(.0020000000949949026),E=d[p+8>>2],M=d[p+40>>2],P=65534&(l=(c=y(y((b?y(c+y(-.0010000000474974513)):c)-E)*M))<y(4294967296)&c>=y(0)?~~c>>>0:0),l=f[t+32>>2],m=f[t+16>>2],I=f[t>>2],C=(v=d[t>>2])<y(0xde0b6b000000000)?I:1566444395,C=(w=d[t+16>>2])<(s(0,C),_())?m:C,s(0,(T=d[t+32>>2])<(s(0,C),_())?l:C),c=_(),t=w>(s(0,t=v>y(-0xde0b6b000000000)?I:-581039253),_())?m:t,s(0,T>(s(0,t),_())?l:t),v=_(),l=y(v-c)<y(.0020000000949949026),w=d[p+4>>2],T=d[p+36>>2],m=65534&(t=(c=y(y((l?y(c+y(-.0010000000474974513)):c)-w)*T))<y(4294967296)&c>=y(0)?~~c>>>0:0),I=1|(t=(c=y(y(y((g?y(S+y(.0010000000474974513)):S)-N)*D)+y(1)))<y(4294967296)&c>=y(0)?~~c>>>0:0),b=1|(t=(c=y(y(y((b?y(A+y(.0010000000474974513)):A)-E)*M)+y(1)))<y(4294967296)&c>=y(0)?~~c>>>0:0),C=1|(t=(c=y(y(y((l?y(v+y(.0010000000474974513)):v)-w)*T)+y(1)))<y(4294967296)&c>=y(0)?~~c>>>0:0),r=n<<21|i,e=f[e+4>>2],(0|(n=f[e+4>>2]))==f[e+8>>2]&&!((0|n)>=(0|(i=n?n<<1:1)))){if(i?(f[6257]=f[6257]+1,p=0|o[f[4968]](i<<4,16),n=f[e+4>>2]):p=0,(0|n)>=1)for(t=0;g=(l=t<<4)+p|0,l=l+f[e+12>>2]|0,R=f[l+4>>2],f[g>>2]=f[l>>2],f[g+4>>2]=R,R=f[l+12>>2],f[g+8>>2]=f[l+8>>2],f[g+12>>2]=R,(0|n)!=(0|(t=t+1|0)););(t=f[e+12>>2])&&(h[e+16|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+12>>2]=0),f[e+12>>2]=p,a[e+16|0]=1,f[e+8>>2]=i,n=f[e+4>>2]}t=f[e+12>>2]+(n<<4)|0,f[t+12>>2]=r,u[t+6>>1]=C,u[t+4>>1]=x,u[t+2>>1]=P,u[t>>1]=m,u[t+10>>1]=I,u[t+8>>1]=b,f[e+4>>2]=f[e+4>>2]+1},o[573]=rc,o[574]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var r,c,l,u,p,m=0,v=0,g=0,A=0,x=y(0),b=y(0),C=y(0),S=y(0),E=0,w=0,T=0,P=0,I=0,N=y(0),D=y(0),M=y(0),O=y(0),z=y(0),L=y(0),F=y(0);if(R=r=R-32|0,b=d[t+44>>2],C=d[t+28>>2],L=(x=(x=(S=d[t+12>>2])>y(0)?S:y(0))<C?C:x)<b?b:x,F=b<(x=C<(x=S<y(0)?S:y(0))?C:x)?b:x,c=f[t+40>>2],m=f[t+24>>2],P=f[t+8>>2],v=(N=d[t+8>>2])>y(-0xde0b6b000000000)?P:-581039253,v=(D=d[t+24>>2])>(s(0,v),_())?m:v,l=(M=d[t+40>>2])>(s(0,v),_())?c:v,g=f[t+36>>2],A=f[t+20>>2],I=f[t+4>>2],v=(O=d[t+4>>2])>y(-0xde0b6b000000000)?I:-581039253,v=(z=d[t+20>>2])>(s(0,v),_())?A:v,u=(b=d[t+36>>2])>(s(0,v),_())?g:v,E=f[t+32>>2],T=f[t+16>>2],w=f[t>>2],v=(C=d[t>>2])>y(-0xde0b6b000000000)?w:-581039253,v=(S=d[t+16>>2])>(s(0,v),_())?T:v,p=(x=d[t+32>>2])>(s(0,v),_())?E:v,t=D<(s(0,t=N<y(0xde0b6b000000000)?P:1566444395),_())?m:t,P=M<(s(0,t),_())?c:t,t=z<(s(0,t=O<y(0xde0b6b000000000)?I:1566444395),_())?A:t,I=b<(s(0,t),_())?g:t,t=S<(s(0,t=C<y(0xde0b6b000000000)?w:1566444395),_())?T:t,v=x<(s(0,t),_())?E:t,A=f[e+4>>2],(0|(t=f[A+4>>2]))==f[A+8>>2]&&!((0|t)>=(0|(E=t?t<<1:1)))){if(E?(f[6257]=f[6257]+1,T=0|o[f[4968]](E<<6,16),t=f[A+4>>2]):T=0,(0|t)>=1)for(w=0;m=(e=w<<6)+T|0,g=e+f[A+12>>2]|0,e=f[g+4>>2],f[m>>2]=f[g>>2],f[m+4>>2]=e,e=f[g+60>>2],f[m+56>>2]=f[g+56>>2],f[m+60>>2]=e,e=f[g+52>>2],f[m+48>>2]=f[g+48>>2],f[m+52>>2]=e,e=f[g+44>>2],f[m+40>>2]=f[g+40>>2],f[m+44>>2]=e,e=f[g+36>>2],f[m+32>>2]=f[g+32>>2],f[m+36>>2]=e,e=f[g+28>>2],f[m+24>>2]=f[g+24>>2],f[m+28>>2]=e,e=f[g+20>>2],f[m+16>>2]=f[g+16>>2],f[m+20>>2]=e,e=f[g+12>>2],f[m+8>>2]=f[g+8>>2],f[m+12>>2]=e,(0|(w=w+1|0))!=(0|t););(e=f[A+12>>2])&&(h[A+16|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[A+12>>2]=0),f[A+12>>2]=T,a[A+16|0]=1,f[A+8>>2]=E,t=f[A+4>>2]}t=f[A+12>>2]+(t<<6)|0,f[t+40>>2]=i,f[t+36>>2]=n,f[t+32>>2]=-1,f[t+16>>2]=p,d[t+12>>2]=F,f[t+8>>2]=P,f[t+4>>2]=I,f[t>>2]=v,d[t+28>>2]=L,f[t+24>>2]=l,f[t+20>>2]=u,e=f[r+16>>2],f[t+44>>2]=f[r+12>>2],f[t+48>>2]=e,e=f[r+24>>2],f[t+52>>2]=f[r+20>>2],f[t+56>>2]=e,f[t+60>>2]=f[r+28>>2],f[A+4>>2]=f[A+4>>2]+1,R=r+32|0},o[575]=function(e){return f[(e|=0)>>2]=14676,0|e},o[576]=function(e){f[(e|=0)>>2]=14676,e&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[577]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),x=y(0),b=y(0),C=y(0),S=y(0),E=y(0),w=y(0),T=y(0),P=y(0),I=y(0),R=y(0),N=y(0),D=y(0);_=d[t+56>>2],p=d[t+36>>2],m=d[t+40>>2],u=d[t+52>>2],s=d[t+20>>2],c=d[e+116>>2],r=d[e+24>>2],l=d[e+40>>2],v=d[t+24>>2],g=d[e+120>>2],x=d[e+28>>2],b=d[e+44>>2],C=d[t+32>>2],h=d[t+48>>2],S=d[t>>2],E=d[t+4>>2],w=d[t+8>>2],T=d[t+16>>2],a=d[e+112>>2],P=d[e+20>>2],I=d[e+36>>2],R=y(o[f[f[e>>2]+48>>2]](e)),N=y(o[f[f[e>>2]+48>>2]](e)),D=y(o[f[f[e>>2]+48>>2]](e)),f[n+12>>2]=0,a=y(y(a*y(I-P))*y(.5)),c=y(y(c*y(l-r))*y(.5)),r=y(y(a*y(A(T)))+y(c*y(A(s)))),s=y(y(g*y(b-x))*y(.5)),r=y(N+y(r+y(s*y(A(v))))),d[n+4>>2]=u-r,l=y(R+y(y(y(a*y(A(S)))+y(c*y(A(E))))+y(s*y(A(w))))),d[n>>2]=h-l,a=y(D+y(y(y(a*y(A(C)))+y(c*y(A(p))))+y(s*y(A(m))))),d[n+8>>2]=_-a,f[i+12>>2]=0,d[i+8>>2]=_+a,d[i+4>>2]=u+r,d[i>>2]=h+l},o[578]=function(e,t){e|=0;var n=0;n=f[4+(t|=0)>>2],f[e+112>>2]=f[t>>2],f[e+116>>2]=n,n=f[t+12>>2],f[e+120>>2]=f[t+8>>2],f[e+124>>2]=n},o[579]=function(e){return 112+(e|=0)|0},o[580]=fs,o[581]=function(){return 14788},o[582]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a,r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=0,p=y(0),m=0,v=0,g=y(0),x=0,b=0,C=0,S=0,E=0,w=0,T=0;R=a=R-48|0,p=d[e+44>>2],s=d[e+28>>2],l=y(y(1)/d[e+120>>2]),_=d[e+60>>2],v=((r=p<(r=(r=y(y(l*d[i+8>>2])+_))<s?s:r)?p:r)<y(0)?-.5:.5)+ +r,x=A(v)<2147483648?~~v:-2147483648,v=((r=p<(r=(r=y(y(l*d[n+8>>2])+_))<s?s:r)?p:r)<y(0)?-.5:.5)+ +r,w=A(v)<2147483648?~~v:-2147483648,p=d[e+40>>2],s=d[e+24>>2],l=y(y(1)/d[e+116>>2]),_=d[e+56>>2],v=((r=p<(r=(r=y(y(l*d[i+4>>2])+_))<s?s:r)?p:r)<y(0)?-.5:.5)+ +r,u=A(v)<2147483648?~~v:-2147483648,v=((r=p<(r=(r=y(y(l*d[n+4>>2])+_))<s?s:r)?p:r)<y(0)?-.5:.5)+ +r,m=A(v)<2147483648?~~v:-2147483648,p=d[e+36>>2],s=d[e+20>>2],l=y(y(1)/d[e+112>>2]),_=d[e+52>>2],v=((r=p<(r=(r=y(y(l*d[i>>2])+_))<s?s:r)?p:r)<y(0)?-.5:.5)+ +r,i=A(v)<2147483648?~~v:-2147483648,v=((r=p<(r=(r=y(y(l*d[n>>2])+_))<s?s:r)?p:r)<y(0)?-.5:.5)+ +r,n=A(v)<2147483648?~~v:-2147483648,b=f[e+72>>2]+-1|0,C=f[e+68>>2]+-1|0;e:if((E=f[e+108>>2])>>>0>2)x=0,m=0;else{switch(x=x+1|0,w=w+-1|0,u=u+1|0,m=m+-1|0,i=i+1|0,n=n+-1|0,E-1|0){default:b=(0|x)<(0|b)?x:b,C=(0|u)<(0|C)?u:C,x=(0|m)>0?m:0,m=(0|w)>0?w:0;break e;case 0:b=(0|x)<(0|b)?x:b,C=(0|i)<(0|C)?i:C,x=(0|n)>0?n:0,m=(0|w)>0?w:0;break e;case 1:}b=(0|u)<(0|b)?u:b,C=(0|i)<(0|C)?i:C,x=(0|n)>0?n:0,m=(0|m)>0?m:0}if((0|m)<(0|b))for(;;){if(w=b,(0|x)>=(0|C))m=m+1|0;else{for(T=1&m,g=y(0|(E=m+1|0)),p=y(0|m),n=x;;){if(!h[e+106|0]|T&&!(h[e+104|0]|(n+m&1?0:h[e+105|0]))){s=y(o[f[f[e>>2]+68>>2]](e,n,m)),i=a;e:{t:{n:{i:{o:{if((u=f[e+108>>2])>>>0<=2)switch(u-1|0){case 1:break n;case 0:break i;default:break o}c=d[a+8>>2],s=d[a+4>>2],r=d[a>>2];break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+52>>2],f[a+12>>2]=0,r=y(s-r),d[a>>2]=r,c=y(p-y(_*y(.5))),d[a+8>>2]=c,s=y(y(0|n)-y(l*y(.5))),d[a+4>>2]=s;break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+56>>2],f[a+12>>2]=0,s=y(s-r),d[a+4>>2]=s,c=y(p-y(_*y(.5))),d[a+8>>2]=c,r=y(y(0|n)-y(l*y(.5)));break t}l=d[e+84>>2],_=d[e+88>>2],r=d[e+60>>2],f[a+12>>2]=0,c=y(s-r),d[a+8>>2]=c,s=y(p-y(_*y(.5))),d[a+4>>2]=s,r=y(y(0|n)-y(l*y(.5)))}d[i>>2]=r}d[a>>2]=r*d[e+112>>2],d[a+4>>2]=s*d[e+116>>2],d[a+8>>2]=c*d[e+120>>2],s=y(o[f[f[e>>2]+68>>2]](e,n,E)),i=a;e:{t:{n:{i:{o:{if((u=f[e+108>>2])>>>0<=2)switch(u-1|0){case 1:break n;case 0:break i;default:break o}c=d[a+24>>2],s=d[a+20>>2],r=d[a+16>>2];break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+52>>2],f[a+28>>2]=0,r=y(s-r),d[a+16>>2]=r,c=y(g-y(_*y(.5))),d[a+24>>2]=c,s=y(y(0|n)-y(l*y(.5))),d[a+20>>2]=s;break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+56>>2],f[a+28>>2]=0,s=y(s-r),d[a+20>>2]=s,c=y(g-y(_*y(.5))),d[a+24>>2]=c,r=y(y(0|n)-y(l*y(.5)));break t}l=d[e+84>>2],_=d[e+88>>2],r=d[e+60>>2],f[a+28>>2]=0,c=y(s-r),d[a+24>>2]=c,s=y(g-y(_*y(.5))),d[a+20>>2]=s,r=y(y(0|n)-y(l*y(.5)))}d[i+16>>2]=r}d[a+16>>2]=r*d[e+112>>2],d[a+20>>2]=s*d[e+116>>2],d[a+24>>2]=c*d[e+120>>2],i=n+1|0,s=y(o[f[f[e>>2]+68>>2]](e,i,m)),S=a;e:{t:{n:{i:{o:{if((u=f[e+108>>2])>>>0<=2)switch(u-1|0){case 1:break n;case 0:break i;default:break o}c=d[a+40>>2],s=d[a+36>>2],r=d[a+32>>2];break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+52>>2],f[a+44>>2]=0,r=y(s-r),d[a+32>>2]=r,c=y(p-y(_*y(.5))),d[a+40>>2]=c,s=y(y(0|i)-y(l*y(.5))),d[a+36>>2]=s;break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+56>>2],f[a+44>>2]=0,s=y(s-r),d[a+36>>2]=s,c=y(p-y(_*y(.5))),d[a+40>>2]=c,r=y(y(0|i)-y(l*y(.5)));break t}l=d[e+84>>2],_=d[e+88>>2],r=d[e+60>>2],f[a+44>>2]=0,c=y(s-r),d[a+40>>2]=c,s=y(p-y(_*y(.5))),d[a+36>>2]=s,r=y(y(0|i)-y(l*y(.5)))}d[S+32>>2]=r}d[a+32>>2]=r*d[e+112>>2],d[a+36>>2]=s*d[e+116>>2],d[a+40>>2]=c*d[e+120>>2],o[f[f[t>>2]+8>>2]](t,a,n,m),s=y(o[f[f[e>>2]+68>>2]](e,i,m)),S=a;e:{t:{n:{i:{o:{if((u=f[e+108>>2])>>>0<=2)switch(u-1|0){case 1:break n;case 0:break i;default:break o}c=d[a+8>>2],s=d[a+4>>2],r=d[a>>2];break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+52>>2],f[a+12>>2]=0,r=y(s-r),d[a>>2]=r,c=y(p-y(_*y(.5))),d[a+8>>2]=c,s=y(y(0|i)-y(l*y(.5))),d[a+4>>2]=s;break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+56>>2],f[a+12>>2]=0,s=y(s-r),d[a+4>>2]=s,c=y(p-y(_*y(.5))),d[a+8>>2]=c,r=y(y(0|i)-y(l*y(.5)));break t}l=d[e+84>>2],_=d[e+88>>2],r=d[e+60>>2],f[a+12>>2]=0,c=y(s-r),d[a+8>>2]=c,s=y(p-y(_*y(.5))),d[a+4>>2]=s,r=y(y(0|i)-y(l*y(.5)))}d[S>>2]=r}d[a>>2]=r*d[e+112>>2],d[a+4>>2]=s*d[e+116>>2],d[a+8>>2]=c*d[e+120>>2],s=y(o[f[f[e>>2]+68>>2]](e,i,E)),S=a;e:{t:{n:{i:{o:{if((u=f[e+108>>2])>>>0<=2)switch(u-1|0){case 1:break n;case 0:break i;default:break o}c=d[a+40>>2],s=d[a+36>>2],r=d[a+32>>2];break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+52>>2],f[a+44>>2]=0,r=y(s-r),d[a+32>>2]=r,c=y(g-y(_*y(.5))),d[a+40>>2]=c,s=y(y(0|i)-y(l*y(.5))),d[a+36>>2]=s;break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+56>>2],f[a+44>>2]=0,s=y(s-r),d[a+36>>2]=s,c=y(g-y(_*y(.5))),d[a+40>>2]=c,r=y(y(0|i)-y(l*y(.5)));break t}l=d[e+84>>2],_=d[e+88>>2],r=d[e+60>>2],f[a+44>>2]=0,c=y(s-r),d[a+40>>2]=c,s=y(g-y(_*y(.5))),d[a+36>>2]=s,r=y(y(0|i)-y(l*y(.5)))}d[S+32>>2]=r}}else{s=y(o[f[f[e>>2]+68>>2]](e,n,m)),i=a;e:{t:{n:{i:{o:{if((u=f[e+108>>2])>>>0<=2)switch(u-1|0){case 1:break n;case 0:break i;default:break o}c=d[a+8>>2],s=d[a+4>>2],r=d[a>>2];break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+52>>2],f[a+12>>2]=0,r=y(s-r),d[a>>2]=r,c=y(p-y(_*y(.5))),d[a+8>>2]=c,s=y(y(0|n)-y(l*y(.5))),d[a+4>>2]=s;break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+56>>2],f[a+12>>2]=0,s=y(s-r),d[a+4>>2]=s,c=y(p-y(_*y(.5))),d[a+8>>2]=c,r=y(y(0|n)-y(l*y(.5)));break t}l=d[e+84>>2],_=d[e+88>>2],r=d[e+60>>2],f[a+12>>2]=0,c=y(s-r),d[a+8>>2]=c,s=y(p-y(_*y(.5))),d[a+4>>2]=s,r=y(y(0|n)-y(l*y(.5)))}d[i>>2]=r}d[a>>2]=r*d[e+112>>2],d[a+4>>2]=s*d[e+116>>2],d[a+8>>2]=c*d[e+120>>2],s=y(o[f[f[e>>2]+68>>2]](e,n,E)),i=a;e:{t:{n:{i:{o:{if((u=f[e+108>>2])>>>0<=2)switch(u-1|0){case 1:break n;case 0:break i;default:break o}c=d[a+24>>2],s=d[a+20>>2],r=d[a+16>>2];break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+52>>2],f[a+28>>2]=0,r=y(s-r),d[a+16>>2]=r,c=y(g-y(_*y(.5))),d[a+24>>2]=c,s=y(y(0|n)-y(l*y(.5))),d[a+20>>2]=s;break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+56>>2],f[a+28>>2]=0,s=y(s-r),d[a+20>>2]=s,c=y(g-y(_*y(.5))),d[a+24>>2]=c,r=y(y(0|n)-y(l*y(.5)));break t}l=d[e+84>>2],_=d[e+88>>2],r=d[e+60>>2],f[a+28>>2]=0,c=y(s-r),d[a+24>>2]=c,s=y(g-y(_*y(.5))),d[a+20>>2]=s,r=y(y(0|n)-y(l*y(.5)))}d[i+16>>2]=r}d[a+16>>2]=r*d[e+112>>2],d[a+20>>2]=s*d[e+116>>2],d[a+24>>2]=c*d[e+120>>2],i=n+1|0,s=y(o[f[f[e>>2]+68>>2]](e,i,E)),S=a;e:{t:{n:{i:{o:{if((u=f[e+108>>2])>>>0<=2)switch(u-1|0){case 1:break n;case 0:break i;default:break o}c=d[a+40>>2],s=d[a+36>>2],r=d[a+32>>2];break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+52>>2],f[a+44>>2]=0,r=y(s-r),d[a+32>>2]=r,c=y(g-y(_*y(.5))),d[a+40>>2]=c,s=y(y(0|i)-y(l*y(.5))),d[a+36>>2]=s;break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+56>>2],f[a+44>>2]=0,s=y(s-r),d[a+36>>2]=s,c=y(g-y(_*y(.5))),d[a+40>>2]=c,r=y(y(0|i)-y(l*y(.5)));break t}l=d[e+84>>2],_=d[e+88>>2],r=d[e+60>>2],f[a+44>>2]=0,c=y(s-r),d[a+40>>2]=c,s=y(g-y(_*y(.5))),d[a+36>>2]=s,r=y(y(0|i)-y(l*y(.5)))}d[S+32>>2]=r}d[a+32>>2]=r*d[e+112>>2],d[a+36>>2]=s*d[e+116>>2],d[a+40>>2]=c*d[e+120>>2],o[f[f[t>>2]+8>>2]](t,a,n,m),s=y(o[f[f[e>>2]+68>>2]](e,i,E)),S=a;e:{t:{n:{i:{o:{if((u=f[e+108>>2])>>>0<=2)switch(u-1|0){case 1:break n;case 0:break i;default:break o}c=d[a+24>>2],s=d[a+20>>2],r=d[a+16>>2];break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+52>>2],f[a+28>>2]=0,r=y(s-r),d[a+16>>2]=r,c=y(g-y(_*y(.5))),d[a+24>>2]=c,s=y(y(0|i)-y(l*y(.5))),d[a+20>>2]=s;break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+56>>2],f[a+28>>2]=0,s=y(s-r),d[a+20>>2]=s,c=y(g-y(_*y(.5))),d[a+24>>2]=c,r=y(y(0|i)-y(l*y(.5)));break t}l=d[e+84>>2],_=d[e+88>>2],r=d[e+60>>2],f[a+28>>2]=0,c=y(s-r),d[a+24>>2]=c,s=y(g-y(_*y(.5))),d[a+20>>2]=s,r=y(y(0|i)-y(l*y(.5)))}d[S+16>>2]=r}d[a+16>>2]=r*d[e+112>>2],d[a+20>>2]=s*d[e+116>>2],d[a+24>>2]=c*d[e+120>>2],s=y(o[f[f[e>>2]+68>>2]](e,i,m)),S=a;e:{t:{n:{i:{o:{if((u=f[e+108>>2])>>>0<=2)switch(u-1|0){case 1:break n;case 0:break i;default:break o}c=d[a+40>>2],s=d[a+36>>2],r=d[a+32>>2];break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+52>>2],f[a+44>>2]=0,r=y(s-r),d[a+32>>2]=r,c=y(p-y(_*y(.5))),d[a+40>>2]=c,s=y(y(0|i)-y(l*y(.5))),d[a+36>>2]=s;break e}l=d[e+84>>2],_=d[e+88>>2],r=d[e+56>>2],f[a+44>>2]=0,s=y(s-r),d[a+36>>2]=s,c=y(p-y(_*y(.5))),d[a+40>>2]=c,r=y(y(0|i)-y(l*y(.5)));break t}l=d[e+84>>2],_=d[e+88>>2],r=d[e+60>>2],f[a+44>>2]=0,c=y(s-r),d[a+40>>2]=c,s=y(p-y(_*y(.5))),d[a+36>>2]=s,r=y(y(0|i)-y(l*y(.5)))}d[S+32>>2]=r}}if(d[a+32>>2]=r*d[e+112>>2],d[a+36>>2]=s*d[e+116>>2],d[a+40>>2]=c*d[e+120>>2],o[f[f[t>>2]+8>>2]](t,a,n,m),n=i,(0|i)==(0|C))break}m=E}if((0|w)==(0|m))break}R=a+48|0},o[583]=function(e,t,n){e|=0,t|=0,n|=0;var i,o=y(0);e:if(!((i=f[e+100>>2])>>>0>5)){switch(i-1|0){default:return y(d[f[e+96>>2]+(g(f[e+68>>2],n)+t<<2)>>2]);case 4:return y(y(d[e+92>>2]*y(h[f[e+96>>2]+(g(f[e+68>>2],n)+t|0)|0])));case 0:case 1:case 3:break e;case 2:}o=y(d[e+92>>2]*y(u[f[e+96>>2]+(g(f[e+68>>2],n)+t<<1)>>1]))}return y(o)},o[584]=Ns,o[585]=Tn,o[586]=pi,o[587]=function(e,t,n){e|=0,t=y(t),n|=0;var i,a=y(0),r=y(0),s=y(0),c=y(0),l=0;R=i=R-16|0,l=f[e+44>>2],f[i+8>>2]=f[e+40>>2],f[i+12>>2]=l,l=f[e+36>>2],f[i>>2]=f[e+32>>2],f[i+4>>2]=l,a=y(o[f[f[e>>2]+48>>2]](e)),c=y(o[f[f[e>>2]+48>>2]](e)),r=y(y(o[f[f[e>>2]+48>>2]](e))+d[i+8>>2]),d[i+8>>2]=r,d[i>>2]=a+d[i>>2],d[i+4>>2]=c+d[i+4>>2],a=y(t*y(.5)),c=y(t*y(.25)),t=y(t/y(12));e:{t:if(!((e=f[e+56>>2])>>>0>2)){switch(e-1|0){default:s=a,a=d[i+4>>2],r=y(a*a),a=y(s*r),s=t,t=d[i>>2],s=r=y(y(c*r)+y(s*y(t*y(t*y(4)))));break e;case 0:break t;case 1:}s=a,a=d[i>>2],a=y(a*a),s=y(s*a),r=a=y(y(c*a)+y(t*y(r*y(r*y(4)))));break e}r=a,a=d[i>>2],a=y(a*a),r=y(r*a),s=t,t=d[i+4>>2],s=a=y(y(c*a)+y(s*y(t*y(t*y(4)))))}f[n+12>>2]=0,d[n+8>>2]=s,d[n+4>>2]=r,d[n>>2]=a,R=i+16|0},o[588]=function(){return 14936},o[589]=Ir,o[590]=gi,o[591]=$s,o[592]=function(e,t,n){return go(e|=0,t|=0,n|=0),f[t+28>>2]=f[e+32>>2],f[t+32>>2]=f[e+36>>2],f[t+36>>2]=f[e+40>>2],f[t+40>>2]=f[e+44>>2],f[t+12>>2]=f[e+16>>2],f[t+16>>2]=f[e+20>>2],f[t+20>>2]=f[e+24>>2],f[t+24>>2]=f[e+28>>2],n=f[e+48>>2],f[t+48>>2]=0,f[t+44>>2]=n,e=f[e+56>>2],f[t+56>>2]=0,f[t+52>>2]=e,14946},o[593]=function(e,t,n){e|=0,t|=0,n|=0;var i,a=y(0),r=y(0),s=y(0),c=0,l=y(0),_=y(0);R=i=R-16|0,o[f[f[t>>2]+68>>2]](i,t,n),c=f[i+12>>2],f[e+8>>2]=f[i+8>>2],f[e+12>>2]=c,c=f[i+4>>2],f[e>>2]=f[i>>2],f[e+4>>2]=c,y(o[f[f[t>>2]+48>>2]](t))!=y(0)&&(r=d[n+4>>2],a=d[n>>2],s=d[n+8>>2],l=y(o[f[f[t>>2]+48>>2]](t)),_=a=(t=y(y(y(a*a)+y(r*r))+y(s*s))<y(14210854715202004e-30))?y(-1):a,s=t?y(-1):s,r=t?y(-1):r,a=y(y(1)/y(S(y(y(s*s)+y(y(a*a)+y(r*r)))))),d[e>>2]=d[e>>2]+y(l*y(_*a)),d[e+4>>2]=d[e+4>>2]+y(l*y(r*a)),d[e+8>>2]=d[e+8>>2]+y(l*y(s*a))),R=i+16|0},o[594]=function(e,t,n){e|=0,t|=0,n|=0;var i=y(0),o=y(0),a=y(0),r=y(0),s=y(0),c=y(0);i=d[t+36>>2],o=d[t+32>>2],a=d[n>>2],r=d[n+8>>2],(s=y(S(y(y(a*a)+y(r*r)))))==y(0)||(o=y(o/s),c=y(r*o),o=y(a*o)),i=d[n+4>>2]<y(0)?y(-i):i,d[e+8>>2]=c,d[e+4>>2]=i,d[e>>2]=o},o[595]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var o=0,a=y(0),r=y(0),s=y(0),c=0,l=y(0),_=0,u=y(0);if((0|i)>=1)for(;a=d[e+36>>2],r=d[e+32>>2],l=d[(o=(_=c<<4)+t|0)>>2],s=d[o+8>>2],(u=y(S(y(y(l*l)+y(s*s)))))==y(0)?(s=y(0),a=d[o+4>>2]<y(0)?y(-a):a):(r=y(r/u),s=y(s*r),r=y(l*r),a=d[o+4>>2]<y(0)?y(-a):a),d[8+(o=n+_|0)>>2]=s,d[o+4>>2]=a,d[o>>2]=r,(0|(c=c+1|0))!=(0|i););},o[596]=function(e){e|=0;var t=y(0),n=y(0);return t=d[e+32>>2],n=y(o[f[f[e>>2]+48>>2]](e)),y(o[f[f[e>>2]+48>>2]](e)),y(o[f[f[e>>2]+48>>2]](e)),y(y(t+n))},o[597]=bo,o[598]=function(e){var t;f[(e|=0)>>2]=15156,(t=f[e+32>>2])&&(h[e+36|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+32>>2]=0),f[e+32>>2]=0,f[e+24>>2]=0,f[e+28>>2]=0,a[e+36|0]=1,e&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[599]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a,r=0,s=0,c=0,l=0,_=y(0),u=y(0),m=y(0),A=y(0),x=y(0),b=y(0),C=0,S=0,E=0,w=0;if(R=n=R-80|0,(0|(a=0|o[f[f[e>>2]+28>>2]](e)))>=1)for(_=d[e+12>>2],u=d[e+8>>2],m=d[e+4>>2];;){o[f[f[e>>2]+16>>2]](e,n+76|0,n+52|0,n- -64|0,n+56|0,n+72|0,n+68|0,n+48|0,n+60|0,w);e:if(!((i=f[n+64>>2])>>>0>1))if(i-1){if((i=f[n+60>>2]+-2|0)>>>0>3)break e;switch(i-1|0){default:if(i=0,f[n+48>>2]<1)break e;for(;c=f[n+76>>2],l=f[n+56>>2],r=f[n+72>>2]+g(f[n+68>>2],i)|0,s=c+g(l,f[r>>2])|0,A=d[s>>2],x=d[s+4>>2],b=d[s+8>>2],f[n+12>>2]=0,d[n+8>>2]=_*b,d[n+4>>2]=u*x,d[n>>2]=m*A,s=c+g(l,f[r+4>>2])|0,A=d[s>>2],x=d[s+4>>2],b=d[s+8>>2],f[n+28>>2]=0,d[n+24>>2]=_*b,d[n+20>>2]=u*x,d[n+16>>2]=m*A,r=c+g(l,f[r+8>>2])|0,A=d[r>>2],x=d[r+4>>2],b=d[r+8>>2],f[n+44>>2]=0,d[n+40>>2]=_*b,d[n+36>>2]=u*x,d[n+32>>2]=m*A,o[f[f[t>>2]+8>>2]](t,n,w,i),(0|(i=i+1|0))<f[n+48>>2];);break e;case 0:if(i=0,f[n+48>>2]<=0)break e;for(;c=f[n+76>>2],l=f[n+56>>2],r=f[n+72>>2]+g(f[n+68>>2],i)|0,s=c+g(l,p[r>>1])|0,A=d[s>>2],x=d[s+4>>2],b=d[s+8>>2],f[n+12>>2]=0,d[n+8>>2]=_*b,d[n+4>>2]=u*x,d[n>>2]=m*A,s=c+g(l,p[r+2>>1])|0,A=d[s>>2],x=d[s+4>>2],b=d[s+8>>2],f[n+28>>2]=0,d[n+24>>2]=_*b,d[n+20>>2]=u*x,d[n+16>>2]=m*A,r=c+g(l,p[r+4>>1])|0,A=d[r>>2],x=d[r+4>>2],b=d[r+8>>2],f[n+44>>2]=0,d[n+40>>2]=_*b,d[n+36>>2]=u*x,d[n+32>>2]=m*A,o[f[f[t>>2]+8>>2]](t,n,w,i),(0|(i=i+1|0))<f[n+48>>2];);break e;case 1:break e;case 2:}if(i=0,f[n+48>>2]<=0)break e;for(;c=f[n+76>>2],l=f[n+56>>2],r=f[n+72>>2]+g(f[n+68>>2],i)|0,s=c+g(l,h[0|r])|0,A=d[s>>2],x=d[s+4>>2],b=d[s+8>>2],f[n+12>>2]=0,d[n+8>>2]=_*b,d[n+4>>2]=u*x,d[n>>2]=m*A,s=c+g(l,h[r+1|0])|0,A=d[s>>2],x=d[s+4>>2],b=d[s+8>>2],f[n+28>>2]=0,d[n+24>>2]=_*b,d[n+20>>2]=u*x,d[n+16>>2]=m*A,r=c+g(l,h[r+2|0])|0,A=d[r>>2],x=d[r+4>>2],b=d[r+8>>2],f[n+44>>2]=0,d[n+40>>2]=_*b,d[n+36>>2]=u*x,d[n+32>>2]=m*A,o[f[f[t>>2]+8>>2]](t,n,w,i),(0|(i=i+1|0))<f[n+48>>2];);}else if(!((i=f[n+60>>2]+-2|0)>>>0>3)){t:switch(i-1|0){default:if(i=0,f[n+48>>2]<1)break e;for(;c=f[n+76>>2],l=f[n+56>>2],r=f[n+72>>2]+g(f[n+68>>2],i)|0,s=c+g(l,f[r>>2])|0,C=v[s>>3],S=v[s+8>>3],E=v[s+16>>3],f[n+12>>2]=0,d[n+8>>2]=_*y(E),d[n+4>>2]=u*y(S),d[n>>2]=m*y(C),s=c+g(l,f[r+4>>2])|0,C=v[s>>3],S=v[s+8>>3],E=v[s+16>>3],f[n+28>>2]=0,d[n+24>>2]=_*y(E),d[n+20>>2]=u*y(S),d[n+16>>2]=m*y(C),r=c+g(l,f[r+8>>2])|0,C=v[r>>3],S=v[r+8>>3],E=v[r+16>>3],f[n+44>>2]=0,d[n+40>>2]=_*y(E),d[n+36>>2]=u*y(S),d[n+32>>2]=m*y(C),o[f[f[t>>2]+8>>2]](t,n,w,i),(0|(i=i+1|0))<f[n+48>>2];);break e;case 0:if(i=0,f[n+48>>2]<=0)break e;for(;c=f[n+76>>2],l=f[n+56>>2],r=f[n+72>>2]+g(f[n+68>>2],i)|0,s=c+g(l,p[r>>1])|0,C=v[s>>3],S=v[s+8>>3],E=v[s+16>>3],f[n+12>>2]=0,d[n+8>>2]=_*y(E),d[n+4>>2]=u*y(S),d[n>>2]=m*y(C),s=c+g(l,p[r+2>>1])|0,C=v[s>>3],S=v[s+8>>3],E=v[s+16>>3],f[n+28>>2]=0,d[n+24>>2]=_*y(E),d[n+20>>2]=u*y(S),d[n+16>>2]=m*y(C),r=c+g(l,p[r+4>>1])|0,C=v[r>>3],S=v[r+8>>3],E=v[r+16>>3],f[n+44>>2]=0,d[n+40>>2]=_*y(E),d[n+36>>2]=u*y(S),d[n+32>>2]=m*y(C),o[f[f[t>>2]+8>>2]](t,n,w,i),(0|(i=i+1|0))<f[n+48>>2];);break e;case 2:break t;case 1:break e}if(i=0,!(f[n+48>>2]<=0))for(;c=f[n+76>>2],l=f[n+56>>2],r=f[n+72>>2]+g(f[n+68>>2],i)|0,s=c+g(l,h[0|r])|0,C=v[s>>3],S=v[s+8>>3],E=v[s+16>>3],f[n+12>>2]=0,d[n+8>>2]=_*y(E),d[n+4>>2]=u*y(S),d[n>>2]=m*y(C),s=c+g(l,h[r+1|0])|0,C=v[s>>3],S=v[s+8>>3],E=v[s+16>>3],f[n+28>>2]=0,d[n+24>>2]=_*y(E),d[n+20>>2]=u*y(S),d[n+16>>2]=m*y(C),r=c+g(l,h[r+2|0])|0,C=v[r>>3],S=v[r+8>>3],E=v[r+16>>3],f[n+44>>2]=0,d[n+40>>2]=_*y(E),d[n+36>>2]=u*y(S),d[n+32>>2]=m*y(C),o[f[f[t>>2]+8>>2]](t,n,w,i),(0|(i=i+1|0))<f[n+48>>2];);}if(o[f[f[e>>2]+24>>2]](e,w),(0|a)==(0|(w=w+1|0)))break}R=n+80|0},o[600]=Gi,o[601]=Gi,o[602]=ac,o[603]=ac,o[604]=function(e){return f[24+(e|=0)>>2]},o[605]=ac,o[606]=ac,o[607]=function(e){return 1==f[48+(e|=0)>>2]|0},o[608]=function(e,t,n){e|=0,n|=0;var i=0;i=f[4+(t|=0)>>2],f[e+52>>2]=f[t>>2],f[e+56>>2]=i,i=f[t+12>>2],f[e+60>>2]=f[t+8>>2],f[e+64>>2]=i,t=f[n+4>>2],f[e+68>>2]=f[n>>2],f[e+72>>2]=t,t=f[n+12>>2],f[e+76>>2]=f[n+8>>2],f[e+80>>2]=t,f[e+48>>2]=1},o[609]=function(e,t,n){t|=0,n|=0;var i=0;i=f[56+(e|=0)>>2],f[t>>2]=f[e+52>>2],f[t+4>>2]=i,i=f[e+64>>2],f[t+8>>2]=f[e+60>>2],f[t+12>>2]=i,t=f[e+80>>2],f[n+8>>2]=f[e+76>>2],f[n+12>>2]=t,t=f[e+72>>2],f[n>>2]=f[e+68>>2],f[n+4>>2]=t},o[610]=function(){return 28},o[611]=function(e,t,n){t|=0,n|=0;var i,r=0,s=0,c=0,l=0,_=0,m=0,d=0,v=0,y=0,A=0,x=0,b=0,C=0;if(R=i=R-32|0,r=0|o[f[f[(e|=0)>>2]+28>>2]](e),f[t>>2]=0,f[t+20>>2]=r,r){if(A=0|o[f[f[n>>2]+16>>2]](n,32,r),_=f[A+8>>2],f[t>>2]=o[f[f[n>>2]+28>>2]](n,_),(0|(C=0|o[f[f[e>>2]+28>>2]](e)))>0)for(;;){o[f[f[e>>2]+16>>2]](e,i+28|0,i+4|0,i+16|0,i+8|0,i+24|0,i+20|0,i,i+12|0,y),r=f[i>>2],f[_+24>>2]=r,s=f[i+4>>2],f[_>>2]=0,f[_+4>>2]=0,f[_+28>>2]=s,f[_+8>>2]=0,f[_+12>>2]=0,f[_+16>>2]=0,f[_+20>>2]=0;e:if(!((s=f[i+12>>2]+-2|0)>>>0>3)){switch(s-1|0){default:if(!r)break e;if(s=0|o[f[f[n>>2]+16>>2]](n,4,g(r,3)),m=f[s+8>>2],f[_+8>>2]=o[f[f[n>>2]+28>>2]](n,m),f[i>>2]>=1)for(r=0,d=f[i+24>>2];l=m+g(r,12)|0,c=d+g(f[i+20>>2],r)|0,f[l>>2]=f[c>>2],f[l+4>>2]=f[c+4>>2],f[l+8>>2]=f[c+8>>2],(0|(r=r+1|0))<f[i>>2];);o[f[f[n>>2]+20>>2]](n,s,14966,1497453121,f[s+8>>2]);break e;case 0:if(!r)break e;if(l=0|o[f[f[n>>2]+16>>2]](n,8,r),m=f[l+8>>2],f[_+12>>2]=o[f[f[n>>2]+28>>2]](n,m),r=0,f[i>>2]>=1)for(;s=m+(r<<3)|0,c=f[i+24>>2]+g(f[i+20>>2],r)|0,u[s>>1]=p[c>>1],u[s+2>>1]=p[c+2>>1],c=p[c+4>>1],u[s+6>>1]=0,u[s+4>>1]=c,(0|(r=r+1|0))<f[i>>2];);o[f[f[n>>2]+20>>2]](n,l,14981,1497453121,f[l+8>>2]);break e;case 1:break e;case 2:}if(r){if(l=0|o[f[f[n>>2]+16>>2]](n,4,r),m=f[l+8>>2],f[_+16>>2]=o[f[f[n>>2]+28>>2]](n,m),r=0,f[i>>2]>=1)for(;s=m+(r<<2)|0,c=f[i+24>>2]+g(f[i+20>>2],r)|0,a[0|s]=h[0|c],a[s+1|0]=h[c+1|0],c=h[c+2|0],a[s+3|0]=0,a[s+2|0]=c,(0|(r=r+1|0))<f[i>>2];);o[f[f[n>>2]+20>>2]](n,l,15008,1497453121,f[l+8>>2])}}e:if(!((r=f[i+16>>2])>>>0>1))if(r-1){if(!(r=f[i+4>>2]))break e;if(s=0|o[f[f[n>>2]+16>>2]](n,16,r),m=f[s+8>>2],f[_>>2]=o[f[f[n>>2]+28>>2]](n,m),(0|(d=f[i+4>>2]))>=1)for(r=0,x=f[i+8>>2],b=f[i+28>>2];l=m+(r<<4)|0,c=b+g(r,x)|0,f[l>>2]=f[c>>2],f[l+4>>2]=f[c+4>>2],f[l+8>>2]=f[c+8>>2],(0|d)!=(0|(r=r+1|0)););o[f[f[n>>2]+20>>2]](n,s,15031,1497453121,f[s+8>>2])}else if(r=f[i+4>>2]){if(c=0|o[f[f[n>>2]+16>>2]](n,32,r),m=f[c+8>>2],f[_+4>>2]=o[f[f[n>>2]+28>>2]](n,m),(0|(d=f[i+4>>2]))>=1)for(r=0,x=f[i+8>>2],b=f[i+28>>2];l=b+g(r,x)|0,v=f[l+4>>2],f[(s=m+(r<<5)|0)>>2]=f[l>>2],f[s+4>>2]=v,v=f[l+12>>2],f[s+8>>2]=f[l+8>>2],f[s+12>>2]=v,v=f[l+20>>2],f[s+16>>2]=f[l+16>>2],f[s+20>>2]=v,(0|d)!=(0|(r=r+1|0)););o[f[f[n>>2]+20>>2]](n,c,15050,1497453121,f[c+8>>2])}if(o[f[f[e>>2]+24>>2]](e,y),_=_+32|0,(0|C)==(0|(y=y+1|0)))break}o[f[f[n>>2]+20>>2]](n,A,15070,1497453121,f[A+8>>2])}return f[t+24>>2]=0,f[t+4>>2]=f[e+4>>2],f[t+8>>2]=f[e+8>>2],f[t+12>>2]=f[e+12>>2],f[t+16>>2]=f[e+16>>2],R=i+32|0,15085},o[612]=Dn,o[613]=function(e){(e=Dn(e|=0))&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[614]=function(e,t){t|=0;var n=0,i=0,r=0,s=0,c=0,l=0;e:{if(h[165+(e|=0)|0]){if(f[e+92>>2]>=(0|t))break e;if(t?(f[6257]=f[6257]+1,r=0|o[f[4968]](t<<4,16)):r=0,(0|(c=f[e+88>>2]))>=1)for(;s=(i=n<<4)+r|0,i=i+f[e+96>>2]|0,l=f[i+4>>2],f[s>>2]=f[i>>2],f[s+4>>2]=l,l=f[i+12>>2],f[s+8>>2]=f[i+8>>2],f[s+12>>2]=l,(0|c)!=(0|(n=n+1|0)););return(n=f[e+96>>2])&&(h[e+100|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+96>>2]=0),f[e+96>>2]=r,f[e+92>>2]=t,void(a[e+100|0]=1)}if(!(f[e+112>>2]>=(0|t))){t&&(f[6257]=f[6257]+1,i=0|o[f[4968]](t<<2,16)),r=f[e+116>>2];t:{n:{if((0|(s=f[e+108>>2]))>=1)for(;;)if(f[(c=n<<2)+i>>2]=f[r+c>>2],(0|s)==(0|(n=n+1|0)))break n;if(!r)break t}h[e+120|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+116>>2]=0}f[e+116>>2]=i,f[e+112>>2]=t,a[e+120|0]=1}}},o[615]=function(e,t){t|=0;var n=0,i=0,r=0,s=0,c=0;e:{if(h[164+(e|=0)|0]){if(f[e+132>>2]>=(0|t))break e;t&&(f[6257]=f[6257]+1,r=0|o[f[4968]](t<<2,16)),n=f[e+136>>2];t:{n:{if((0|(s=f[e+128>>2]))>=1)for(;;)if(f[(c=i<<2)+r>>2]=f[n+c>>2],(0|s)==(0|(i=i+1|0)))break n;if(!n)break t}h[e+140|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+136>>2]=0}return f[e+136>>2]=r,f[e+132>>2]=t,void(a[e+140|0]=1)}if(!(f[e+152>>2]>=(0|t))){t&&(f[6257]=f[6257]+1,r=0|o[f[4968]](t<<1,16)),n=f[e+156>>2];t:{n:{if((0|(s=f[e+148>>2]))>=1)for(;;)if(u[(c=i<<1)+r>>1]=p[n+c>>1],(0|s)==(0|(i=i+1|0)))break n;if(!n)break t}h[e+160|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+156>>2]=0}f[e+156>>2]=r,f[e+152>>2]=t,a[e+160|0]=1}}},o[616]=$n,o[617]=function(e){(e=$n(e|=0))&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[618]=function(e,t,n){e|=0,t|=0,n|=0;var i,r=0;f[5675]=f[5675]+1;e:{t:{if(i=f[e+24>>2]){if(o[f[f[i>>2]+8>>2]](i,t,n))break t;break e}if(!(f[n+8>>2]&f[t+4>>2])|!(f[t+8>>2]&f[n+4>>2]))break e}r=function(e,t,n){var i,r,s,c=0,l=0,_=0,u=0,p=0,m=0,d=0;c=f[t+12>>2]>f[n+12>>2],m=f[(i=c?t:n)+12>>2],_=f[(r=c?n:t)+12>>2],t=g((t=((t=m<<16|_)<<15^-1)+t|0)>>>10^t,9),d=(s=(t=((t^=t>>>6)<<11^-1)+t|0)>>>16^t)&(c=f[e+12>>2])+-1;t:{if(-1!=(0|(t=f[f[e+40>>2]+(d<<2)>>2])))for(l=f[e+16>>2];;){if(n=(u=t<<4)+l|0,(0|m)==f[f[4+(l+u|0)>>2]+12>>2]&&(0|_)==f[f[n>>2]+12>>2])break t;if(-1==(0|(t=f[f[e+60>>2]+(t<<2)>>2])))break}if((0|(t=c))==(0|(n=_=f[e+8>>2]))&&(n=c,!((0|t)>=(0|(l=t?t<<1:1))))){if(l?(f[6257]=f[6257]+1,n=0|o[f[4968]](l<<4,16),t=f[e+8>>2]):(n=0,t=c),(0|(m=t))>=1)for(t=0;u=(p=t<<4)+n|0,p=p+f[e+16>>2]|0,f[u>>2]=f[p>>2],f[u+4>>2]=f[p+4>>2],f[u+8>>2]=f[p+8>>2],f[u+12>>2]=f[p+12>>2],(0|m)!=(0|(t=t+1|0)););(t=f[e+16>>2])&&(h[e+20|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+16>>2]=0),f[e+16>>2]=n,f[e+12>>2]=l,a[e+20|0]=1,n=f[e+8>>2],t=l}f[e+8>>2]=n+1,l=f[e+16>>2],(n=f[e+68>>2])&&(o[f[f[n>>2]+8>>2]](n,r,i),t=f[e+12>>2]),n=l+(_<<4)|0,(0|c)<(0|t)&&(ft(e),d=f[e+12>>2]+-1&s),c=f[r+12>>2]<f[i+12>>2],f[n>>2]=c?r:i,f[8+(t=l+(_<<4)|0)>>2]=0,f[t+12>>2]=0,f[t+4>>2]=c?i:r,t=f[e+60>>2]+(_<<2)|0,e=f[e+40>>2]+(d<<2)|0,f[t>>2]=f[e>>2],f[e>>2]=_}return n}(e,t,n)}return 0|r},o[619]=function(e,t,n,i){e|=0,t|=0,n|=0,i|=0;var a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0;f[5674]=f[5674]+1,a=f[t+12>>2]>f[n+12>>2],r=f[(l=a?t:n)+12>>2],s=f[(_=a?n:t)+12>>2],t=g((t=((t=r<<16|s)<<15^-1)+t|0)>>>10^t,9),t=((t^=t>>>6)<<11^-1)+t|0,c=f[e+12>>2]+-1&(t>>>16^t);e:if(-1!=(0|(t=f[f[e+40>>2]+(c<<2)>>2]))){for(a=f[e+16>>2];;){if((0|r)!=f[f[4+(n=a+(t<<4)|0)>>2]+12>>2]||(0|s)!=f[f[n>>2]+12>>2]){if(-1!=(0|(t=f[f[e+60>>2]+(t<<2)>>2])))continue;break e}break}o[f[f[e>>2]+32>>2]](e,n,i),u=f[12+(a+(t<<4)|0)>>2],r=f[e+60>>2];t:{if(s=f[e+40>>2]+(c<<2)|0,(0|(t=f[s>>2]))!=(0|(a=n-f[e+16>>2]>>4))){for(;n=t,(0|a)!=(0|(t=f[(c=r+(t<<2)|0)>>2])););if(t=f[r+(a<<2)>>2],-1!=(0|n)){f[c>>2]=t;break t}}else t=f[r+(a<<2)>>2];f[s>>2]=t}if(r=f[e+8>>2]+-1|0,(t=f[e+68>>2])&&o[f[f[t>>2]+12>>2]](t,_,l,i),(0|a)==(0|r))return f[e+8>>2]=f[e+8>>2]+-1,0|u;l=f[e+60>>2];t:{if(_=f[e+16>>2],t=f[f[4+(i=_+(r<<4)|0)>>2]+12>>2]<<16|f[f[i>>2]+12>>2],t=g((t=(t<<15^-1)+t|0)>>>10^t,9),t=((t^=t>>>6)<<11^-1)+t|0,s=f[e+12>>2]+-1&(t>>>16^t),c=f[e+40>>2]+(s<<2)|0,(0|r)!=(0|(t=f[c>>2]))){for(;n=t,(0|r)!=(0|(t=f[(h=l+(t<<2)|0)>>2])););if(t=f[l+(r<<2)>>2],-1!=(0|n)){f[h>>2]=t;break t}}else t=f[l+(r<<2)>>2];f[c>>2]=t}n=f[i+4>>2],f[(t=_+(a<<4)|0)>>2]=f[i>>2],f[t+4>>2]=n,n=f[i+12>>2],f[t+8>>2]=f[i+8>>2],f[t+12>>2]=n,t=f[e+40>>2]+(s<<2)|0,f[f[e+60>>2]+(a<<2)>>2]=f[t>>2],f[t>>2]=a,f[e+8>>2]=f[e+8>>2]+-1}return 0|u},o[620]=function(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=t,f[i+8>>2]=15764,o[f[f[e>>2]+48>>2]](e,i+8|0,n),R=i+16|0},o[621]=Hs,o[622]=Hs,o[623]=function(e){return 4+(e|=0)|0},o[624]=function(e,t,n){e|=0,t|=0,(n|=0)&&(e=f[t+8>>2])&&(o[f[f[e>>2]>>2]](e),o[f[f[n>>2]+60>>2]](n,f[t+8>>2]),f[t+8>>2]=0)},o[625]=qs,o[626]=function(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=n,f[i+8>>2]=e,f[i+4>>2]=t,f[i>>2]=15620,o[f[f[e>>2]+48>>2]](e,i,n),R=i+16|0},o[627]=function(e,t){t|=0,f[24+(e|=0)>>2]=t},o[628]=function(e,t,n){e|=0,t|=0,n|=0;var i,a=0,r=0;if(R=i=R-16|0,o[f[4966]](15436),f[e+8>>2]>=1)for(;r=f[e+16>>2]+(a<<4)|0,o[f[f[t>>2]+8>>2]](t,r)?(o[f[f[e>>2]+12>>2]](e,f[r>>2],f[r+4>>2],n),f[5673]=f[5673]+-1):a=a+1|0,(0|a)<f[e+8>>2];);o[f[4967]](),R=i+16|0},o[629]=function(e,t,n){e|=0,t|=0,n|=0;var i,o,a=0,r=0;f[5676]=f[5676]+1,a=f[t+12>>2]>f[n+12>>2],i=f[(a?t:n)+12>>2],o=f[(a?n:t)+12>>2],t=g((t=((t=o|i<<16)<<15^-1)+t|0)>>>10^t,9),t=((t^=t>>>6)<<11^-1)+t|0;e:{if(!((0|(t=f[e+12>>2]+-1&(t>>>16^t)))>=f[e+32>>2])&&-1!=(0|(t=f[f[e+40>>2]+(t<<2)>>2])))for(n=f[e+16>>2];;){if(a=n+(r=t<<4)|0,f[f[4+(n+r|0)>>2]+12>>2]==(0|i)&&f[f[a>>2]+12>>2]==(0|o))break e;if(-1==(0|(t=f[f[e+60>>2]+(t<<2)>>2])))break}a=0}return 0|a},o[630]=tc,o[631]=function(e,t){t|=0,f[68+(e|=0)>>2]=t},o[632]=function(e,t){e|=0,t|=0;var n,i=0,r=0,s=0,c=0,l=0,_=0,u=0,p=0;if(R=n=R-32|0,f[n+20>>2]=0,f[n+12>>2]=0,f[n+16>>2]=0,a[n+24|0]=1,!(f[e+8>>2]<1)){for(;;){if(s=f[e+16>>2]+(p<<4)|0,(0|i)==(0|r))if((0|i)>=(0|(r=i?i<<1:1)))r=i;else{if(_=0,c=0,r&&(f[6257]=f[6257]+1,c=0|o[f[4968]](r<<4,16)),(0|i)>=1)for(;u=(l=_<<4)+c|0,l=l+f[n+20>>2]|0,f[u>>2]=f[l>>2],f[u+4>>2]=f[l+4>>2],f[u+8>>2]=f[l+8>>2],f[u+12>>2]=f[l+12>>2],(0|(_=_+1|0))!=(0|i););(i=f[n+20>>2])&&(h[n+24|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[n+20>>2]=0),f[n+20>>2]=c,a[n+24|0]=1,f[n+16>>2]=r,r=f[n+12>>2]}if(i=f[n+20>>2]+(r<<4)|0,f[i>>2]=f[s>>2],f[i+4>>2]=f[s+4>>2],f[i+8>>2]=f[s+8>>2],f[i+12>>2]=f[s+12>>2],r=(s=f[n+12>>2])+1|0,f[n+12>>2]=r,!((0|(p=p+1|0))<f[e+8>>2]))break;i=f[n+16>>2]}if(i=0,!((0|s)<0))for(_=f[n+20>>2];c=_+(i<<4)|0,o[f[f[e>>2]+12>>2]](e,f[c>>2],f[c+4>>2],t),c=(0|i)==(0|s),i=i+1|0,!c;);}if(f[e+52>>2]>=1){for(t=f[e+60>>2],r=0;f[t+(r<<2)>>2]=-1,(0|(r=r+1|0))<f[e+52>>2];);r=f[n+12>>2]}if((0|r)>=2&&(Tt(n+8|0,n,0,r+-1|0),r=f[n+12>>2]),i=f[n+20>>2],(0|r)>=1)for(r=0;t=(r<<4)+i|0,o[f[f[e>>2]+8>>2]](e,f[t>>2],f[t+4>>2]),i=f[n+20>>2],(0|(r=r+1|0))<f[n+12>>2];);i&&(h[n+24|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[n+20>>2]=0),R=n+32|0},o[633]=rc,o[634]=function(e,t){t|=0;var n=0;return(0|(n=f[4+(e|=0)>>2]))!=f[t+4>>2]&&(0|n)!=f[t>>2]||(n=f[e+8>>2],o[f[f[n>>2]+32>>2]](n,t,f[e+12>>2])),0},o[635]=rc,o[636]=function(e,t){return t|=0,(0|(e=f[4+(e|=0)>>2]))==f[t>>2]|(0|e)==f[t+4>>2]},o[637]=Un,o[638]=function(e){ce(Un(e|=0))},o[639]=function(e,t,n,i,a,r,s,c){return e|=0,t|=0,n|=0,i|=0,a|=0,r|=0,s|=0,c|=0,R=c=R-48|0,f[6257]=f[6257]+1,i=0|o[f[4968]](64,16),f[i+8>>2]=s,f[i+4>>2]=r,f[i>>2]=a,a=f[t+4>>2],f[i+16>>2]=f[t>>2],f[i+20>>2]=a,a=f[t+12>>2],f[i+24>>2]=f[t+8>>2],f[i+28>>2]=a,a=f[n+4>>2],f[i+32>>2]=f[n>>2],f[i+36>>2]=a,a=f[n+12>>2],f[i+40>>2]=f[n+8>>2],f[i+44>>2]=a,f[i+52>>2]=0,f[i+56>>2]=0,a=f[t+12>>2],f[c+24>>2]=f[t+8>>2],f[c+28>>2]=a,a=f[t+4>>2],f[c+16>>2]=f[t>>2],f[c+20>>2]=a,t=f[n+12>>2],f[c+40>>2]=f[n+8>>2],f[c+44>>2]=t,t=f[n+4>>2],f[c+32>>2]=f[n>>2],f[c+36>>2]=t,f[i+60>>2]=f[e+104>>2],t=f[e+148>>2]+1|0,f[e+148>>2]=t,f[i+12>>2]=t,f[i+48>>2]=Hn(e+4|0,c+16|0,i),t=f[e+104>>2],f[i+52>>2]=0,t=(t<<2)+e|0,f[i+56>>2]=f[t+84>>2],(n=f[t+84>>2])&&(f[n+52>>2]=i),f[t+84>>2]=i,h[e+153|0]||(f[c+8>>2]=i,f[c>>2]=16056,f[c+4>>2]=e,xt(f[e+4>>2],c+16|0,c),xt(f[e+44>>2],c+16|0,c)),R=c+48|0,0|i},o[640]=function(e,t,n){e|=0,n|=0;var i,r=0;dr(2==f[60+(t|=0)>>2]?e+44|0:e+4|0,f[t+48>>2]),i=f[t+56>>2],r=(r=f[t+52>>2])?r+56|0:84+((f[t+60>>2]<<2)+e|0)|0,f[r>>2]=i,(r=f[t+56>>2])&&(f[r+52>>2]=f[t+52>>2]),r=f[e+96>>2],o[f[f[r>>2]+16>>2]](r,t,n),t&&(f[6258]=f[6258]+1,o[f[4969]](t)),a[e+154|0]=1},o[641]=function(e,t,n,i,o){e|=0,t|=0,n|=0,i|=0,o|=0;var r,s=0,c=0,l=y(0),_=y(0),u=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0);R=o=R-48|0,s=f[n+12>>2],f[o+24>>2]=f[n+8>>2],f[o+28>>2]=s,s=f[n+4>>2],f[o+16>>2]=f[n>>2],f[o+20>>2]=s,c=f[(s=i)+12>>2],f[o+40>>2]=f[s+8>>2],f[o+44>>2]=c,c=f[s+4>>2],f[o+32>>2]=f[s>>2],f[o+36>>2]=c;e:if(2!=f[t+60>>2])if(c=1,f[e+128>>2]=f[e+128>>2]+1,s=f[t+48>>2],d[s>>2]<=d[o+32>>2]^1|d[s+16>>2]>=d[o+16>>2]^1|d[s+4>>2]<=d[o+36>>2]^1|d[s+20>>2]>=d[o+20>>2]^1||d[s+8>>2]<=d[o+40>>2]^1|d[s+24>>2]>=d[o+24>>2]^1)fi(e+4|0,s,o+16|0),f[e+132>>2]=f[e+132>>2]+1;else{if(p=d[t+20>>2],m=d[t+24>>2],g=d[n>>2],A=d[n+4>>2],x=d[n+8>>2],v=d[t+16>>2],_=d[t+36>>2],u=d[t+40>>2],b=d[t+32>>2],l=d[e+100>>2],f[o+12>>2]=0,u=y(l*y(y(u-m)*y(.5))),d[o+8>>2]=u,_=y(l*y(y(_-p)*y(.5))),d[o+4>>2]=_,l=y(l*y(y(b-v)*y(.5))),d[o>>2]=l,y(g-v)<y(0)&&(d[o>>2]=-l),y(A-p)<y(0)&&(d[o+4>>2]=-_),y(x-m)<y(0)&&(d[o+8>>2]=-u),c=0,!function(e,t,n,i){var o=0,a=y(0),r=y(0),s=0,c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=0;r=d[n>>2];t:{if(d[t>>2]<=r){if(a=d[n+4>>2],!(d[t+4>>2]<=a^1|d[t+8>>2]<=d[n+8>>2]^1|d[t+16>>2]>=d[n+16>>2]^1|d[t+20>>2]>=d[n+20>>2]^1)&&(o=0,d[t+24>>2]>=d[n+24>>2]))break t}else a=d[n+4>>2];a=y(a-y(.05000000074505806)),d[n+4>>2]=a,r=y(r-y(.05000000074505806)),d[n>>2]=r,c=y(d[n+8>>2]-y(.05000000074505806)),d[n+8>>2]=c,l=y(d[n+16>>2]+y(.05000000074505806)),d[n+16>>2]=l,_=y(d[n+20>>2]+y(.05000000074505806)),d[n+20>>2]=_,u=y(d[n+24>>2]+y(.05000000074505806)),d[n+24>>2]=u,o=(h=d[i>>2])>y(0),d[(o<<4)+n>>2]=(o?l:r)+h,o=(r=d[i+4>>2])>y(0),d[(o?20:4)+n>>2]=(o?_:a)+r,i=(a=d[i+8>>2])>y(0),d[(i?24:8)+n>>2]=(i?u:c)+a;n:if(i=Wt(e,t))if((0|(s=f[e+8>>2]))>=0){if(!s)break n;for(;;){if(!(o=f[i+32>>2]))break n;if(i=o,(0|(p=p+1|0))==(0|s))break}}else i=f[e>>2];else i=0;o=f[n+4>>2],f[t>>2]=f[n>>2],f[t+4>>2]=o,o=f[n+28>>2],f[t+24>>2]=f[n+24>>2],f[t+28>>2]=o,o=f[n+20>>2],f[t+16>>2]=f[n+16>>2],f[t+20>>2]=o,o=f[n+12>>2],f[t+8>>2]=f[n+8>>2],f[t+12>>2]=o,Ge(e,i,t),o=1}return o}(e+4|0,s,o+16|0,o))break e;c=1,f[e+132>>2]=f[e+132>>2]+1}else dr(e+44|0,f[t+48>>2]),f[t+48>>2]=Hn(e+4|0,o+16|0,t),c=1;r=f[t+56>>2],s=(s=f[t+52>>2])?s+56|0:84+((f[t+60>>2]<<2)+e|0)|0,f[s>>2]=r,(s=f[t+56>>2])&&(f[s+52>>2]=f[t+52>>2]),s=f[n+4>>2],f[t+16>>2]=f[n>>2],f[t+20>>2]=s,s=f[n+12>>2],f[t+24>>2]=f[n+8>>2],f[t+28>>2]=s,n=f[i+4>>2],f[t+32>>2]=f[i>>2],f[t+36>>2]=n,n=f[i+12>>2],f[t+40>>2]=f[i+8>>2],f[t+44>>2]=n,n=f[e+104>>2],f[t+60>>2]=n,f[t+52>>2]=0,n=(n<<2)+e|0,f[t+56>>2]=f[n+84>>2],(i=f[n+84>>2])&&(f[i+52>>2]=t),f[n+84>>2]=t,c&&(a[e+154|0]=1,h[e+153|0]||(f[o>>2]=16056,f[o+4>>2]=e,Le(e+44|0,f[e+44>>2],f[t+48>>2],o),Le(e+4|0,f[e+4>>2],f[t+48>>2],o))),R=o+48|0},o[642]=function(e,t,n,i){e|=0,n|=0,i|=0,e=f[20+(t|=0)>>2],f[n>>2]=f[t+16>>2],f[n+4>>2]=e,e=f[t+28>>2],f[n+8>>2]=f[t+24>>2],f[n+12>>2]=e,e=f[t+44>>2],f[i+8>>2]=f[t+40>>2],f[i+12>>2]=e,e=f[t+36>>2],f[i>>2]=f[t+32>>2],f[i+4>>2]=e},o[643]=function(e,t,n,i,o,a){var r,s,c;e|=0,t|=0,n|=0,i|=0,o|=0,a|=0,R=n=R-16|0,f[n+8>>2]=16128,f[n+12>>2]=i,r=i+4|0,s=i+20|0,c=f[e+168>>2],Ue(f[e+4>>2],t,r,s,d[i+32>>2],o,a,c,n+8|0),Ue(f[e+44>>2],t,r,s,d[i+32>>2],o,a,c,n+8|0),R=n+16|0},o[644]=function(e,t,n,i){var o;e|=0,t|=0,n|=0,i|=0,R=o=R-48|0,f[o+44>>2]=i,f[o+40>>2]=16200,i=f[t+12>>2],f[o+16>>2]=f[t+8>>2],f[o+20>>2]=i,i=f[t+4>>2],f[o+8>>2]=f[t>>2],f[o+12>>2]=i,t=f[n+12>>2],f[o+32>>2]=f[n+8>>2],f[o+36>>2]=t,t=f[n+4>>2],f[o+24>>2]=f[n>>2],f[o+28>>2]=t,xt(f[e+4>>2],o+8|0,o+40|0),xt(f[e+44>>2],o+8|0,o+40|0),R=o+48|0},o[645]=function(e,t){(function(e,t){var n,i=0,r=0,s=0,c=0,l=0,_=0,u=0,p=y(0),m=0;if(R=n=R-32|0,_t(r=e+4|0,1+((0|g(f[e+112>>2],f[e+16>>2]))/100|0)|0),f[e+124>>2]&&(_t(e+44|0,i=1+((0|g(f[e+108>>2],f[e+56>>2]))/100|0)|0),i=f[e+124>>2]-i|0,f[e+124>>2]=(0|i)>0?i:0),i=(f[e+104>>2]+1|0)%2|0,f[e+104>>2]=i,i=f[84+((i<<2)+e|0)>>2]){for(_=e+44|0,c=n+16|0;l=f[i+56>>2],u=(s=f[i+52>>2])?s+56|0:84+((f[i+60>>2]<<2)+e|0)|0,f[u>>2]=l,(s=f[i+56>>2])&&(f[s+52>>2]=f[i+52>>2]),f[i+52>>2]=0,f[i+56>>2]=f[e+92>>2],(s=f[e+92>>2])&&(f[s+52>>2]=i),f[e+92>>2]=i,dr(r,f[i+48>>2]),s=f[i+28>>2],f[n+8>>2]=f[i+24>>2],f[n+12>>2]=s,s=f[i+20>>2],f[n>>2]=f[i+16>>2],f[n+4>>2]=s,s=f[i+44>>2],f[c+8>>2]=f[i+40>>2],f[c+12>>2]=s,s=f[i+36>>2],f[c>>2]=f[i+32>>2],f[c+4>>2]=s,s=Hn(_,n,i),f[i+60>>2]=2,f[i+48>>2]=s,i=l;);a[e+154|0]=1,f[e+124>>2]=f[e+56>>2]}if(f[n>>2]=16056,f[n+4>>2]=e,h[e+153|0]&&(Le(r,f[e+4>>2],f[e+44>>2],n),h[e+153|0]&&Le(r,i=f[r>>2],i,n)),h[e+154|0]&&(i=f[e+96>>2],_=0|o[f[f[i>>2]+28>>2]](i),!((0|(r=f[_+4>>2]))<1))){u=e;e:{if((0|(s=(0|r)<(0|(i=(0|(i=f[e+120>>2]))>(0|(c=(0|g(f[e+116>>2],r))/100|0))?i:c))?r:i))>=1){for(i=0;c=f[_+12>>2]+((f[e+144>>2]+i|0)%(0|r)<<4)|0,l=f[c>>2],r=f[l+48>>2],m=f[c+4>>2],c=f[m+48>>2],!(d[r>>2]<=d[c+16>>2]^1|d[r+16>>2]>=d[c>>2]^1|d[r+4>>2]<=d[c+20>>2]^1|d[r+20>>2]>=d[c+4>>2]^1)&&d[r+8>>2]<=d[c+24>>2]&&d[r+24>>2]>=d[c+8>>2]||(r=f[e+96>>2],o[f[f[r>>2]+12>>2]](r,l,m,t),i=i+-1|0,s=s+-1|0),r=f[_+4>>2],(0|(i=i+1|0))<(0|s););if(t=0,(0|r)<=0)break e}t=(f[e+144>>2]+s|0)%(0|r)|0}f[u+144>>2]=t}a[e+154|0]=0,f[e+120>>2]=1,f[e+140>>2]=f[e+140>>2]+1,i=f[e+132>>2],t=e,l=f[e+128>>2],p=y(0),l&&(p=y(y(i>>>0)/y(l>>>0))),d[t+136>>2]=p,f[e+132>>2]=i>>>1,f[e+128>>2]=l>>>1,R=n+32|0})(e|=0,t|=0),function(e,t){var n,i=0,r=0,s=0,c=0,l=0,_=0,u=0,p=0,m=0;if(R=n=R-16|0,i=f[e+96>>2],o[f[f[i>>2]+56>>2]](i)){if(i=f[e+96>>2],r=0|o[f[f[i>>2]+28>>2]](i),(0|(i=f[r+4>>2]))>=2&&(Tt(r,n+8|0,0,i+-1|0),i=f[r+4>>2]),(0|i)>=1){for(;p=f[r+12>>2]+(m<<4)|0,c=f[p+4>>2],l=_,_=f[p>>2],((0|s)!=(0|c)||(0|l)!=(0|_))&&(s=f[_+48>>2],l=f[c+48>>2],!(d[s>>2]<=d[l+16>>2]^1|d[s+16>>2]>=d[l>>2]^1|d[s+4>>2]<=d[l+20>>2]^1|d[s+20>>2]>=d[l+4>>2]^1)&&d[s+8>>2]<=d[l+24>>2]&&d[s+24>>2]>=d[l+8>>2])||(i=f[e+96>>2],o[f[f[i>>2]+32>>2]](i,p,t),f[p>>2]=0,f[p+4>>2]=0,u=u+1|0,i=f[r+4>>2]),s=c,(0|(m=m+1|0))<(0|i););if((0|i)>=2&&(Tt(r,n,0,i+-1|0),i=f[r+4>>2]),e=i-u|0,(0|u)<=-1){if(f[r+8>>2]<(0|e)){if(t=0,u=i,_=0,e&&(f[6257]=f[6257]+1,_=0|o[f[4968]](e<<4,16),u=f[r+4>>2]),(0|u)>=1)for(;c=(s=t<<4)+_|0,s=s+f[r+12>>2]|0,f[c>>2]=f[s>>2],f[c+4>>2]=f[s+4>>2],f[c+8>>2]=f[s+8>>2],f[c+12>>2]=f[s+12>>2],(0|u)!=(0|(t=t+1|0)););(t=f[r+12>>2])&&(h[r+16|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[r+12>>2]=0),f[r+12>>2]=_,a[r+16|0]=1,f[r+8>>2]=e}for(;t=f[r+12>>2]+(i<<4)|0,f[t>>2]=0,f[t+4>>2]=0,f[t+8>>2]=0,f[t+12>>2]=0,(0|e)!=(0|(i=i+1|0)););}i=e}f[r+4>>2]=i}R=n+16|0}(e,t)},o[646]=Ws,o[647]=Ws,o[648]=function(e,t,n){e|=0,t|=0,n|=0;var i,o=y(0),a=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0);i=f[e+44>>2];e:if(e=f[e+4>>2]){if(r=d[e>>2],i){if(s=(o=d[e+20>>2])>(a=d[i+20>>2])?o:a,c=(o=d[e+8>>2])<(a=d[i+8>>2])?o:a,l=(o=d[e+4>>2])<(a=d[i+4>>2])?o:a,_=(o=d[e+16>>2])>(a=d[i+16>>2])?o:a,r=r<(o=d[i>>2])?r:o,!((o=d[e+24>>2])>(a=d[i+24>>2]))){o=a;break e}break e}a=d[e+28>>2],o=d[e+24>>2],s=d[e+20>>2],_=d[e+16>>2],u=d[e+12>>2],c=d[e+8>>2],l=d[e+4>>2]}else i&&(a=d[i+28>>2],o=d[i+24>>2],s=d[i+20>>2],_=d[i+16>>2],u=d[i+12>>2],c=d[i+8>>2],l=d[i+4>>2],r=d[i>>2]);d[t+12>>2]=u,d[t+8>>2]=c,d[t+4>>2]=l,d[t>>2]=r,d[n+12>>2]=a,d[n+8>>2]=o,d[n+4>>2]=s,d[n>>2]=_},o[649]=function(e){f[16+(e|=0)>>2]==(0-f[e+56>>2]|0)&&(Ui(e+4|0),Ui(e+44|0),a[e+153|0]=256,a[e+154|0]=1,f[e+124>>2]=0,f[e+104>>2]=0,f[e+116>>2]=10,f[e+120>>2]=1,f[e+108>>2]=1,f[e+112>>2]=0,f[e+84>>2]=0,f[e+88>>2]=0,f[e+92>>2]=0,f[e+128>>2]=0,f[e+132>>2]=0,f[e+136>>2]=0,f[e+140>>2]=0,f[e+144>>2]=0,f[e+148>>2]=0)},o[650]=fc,o[651]=rc,o[652]=function(e,t,n){e|=0;var i=0;(0|(t|=0))!=(0|(n|=0))&&(i=f[f[e+4>>2]+96>>2],o[f[f[i>>2]+8>>2]](i,f[t+36>>2],f[n+36>>2]),e=f[e+4>>2],f[e+120>>2]=f[e+120>>2]+1)},o[653]=function(e,t){t|=0,o[f[f[(e|=0)>>2]+8>>2]](e,t,f[f[e+8>>2]+48>>2])},o[654]=rc,o[655]=gs,o[656]=rc,o[657]=gs,o[658]=_n,o[659]=function(e){(e=_n(e|=0))&&(f[6258]=f[6258]+1,o[f[4969]](e))},o[660]=sc,o[661]=function(e){e|=0,(e=f[5678])&&ce(e)},o[662]=function(e){for(e|=0,e=25024;Dr(e=e+-36|0),22720!=(0|e););},o[663]=fc,o[664]=function(){},o[665]=function(e,t){e|=0,t|=0;var n=0;return(e=0|o[f[4970]](3+(e+t|0)|0))&&(f[(n=3+(e+t|0)&0-t)-4>>2]=e),0|n},o[666]=function(e){(e|=0)&&o[f[4971]](f[e+-4>>2])},o[667]=function(e){return 0|D(e|=0)},o[668]=rc,o[669]=Qs,o[670]=rc,o[671]=fc,o[672]=fc,o[673]=function(e,t,n){n|=0;var i,a=0;return R=i=R+-64|0,a=1,Rr(e|=0,t|=0,0)||(a=0,t&&(t=function(e){var t,n,i,a=0;return R=t=R+-64|0,a=f[e>>2],n=f[a+-4>>2],i=f[a+-8>>2],f[t+20>>2]=0,f[t+16>>2]=19560,f[t+12>>2]=e,f[t+8>>2]=19608,a=0,dn(t+24|0,0,39),e=e+i|0,Rr(n,19608,0)?(f[t+56>>2]=1,o[f[f[n>>2]+20>>2]](n,t+8|0,e,e,1,0),a=1==f[t+32>>2]?e:0):(o[f[f[n>>2]+24>>2]](n,t+8|0,e,1,0),(e=f[t+44>>2])>>>0>1||(e-1?a=1==f[t+48>>2]&&1==f[t+36>>2]&&1==f[t+40>>2]?f[t+28>>2]:0:1!=f[t+32>>2]&&f[t+48>>2]|1!=f[t+36>>2]|1!=f[t+40>>2]||(a=f[t+24>>2]))),R=t- -64|0,a}(t),a=0,t&&(f[i+20>>2]=-1,f[i+16>>2]=e,f[i+12>>2]=0,f[i+8>>2]=t,dn(i+24|0,0,39),f[i+56>>2]=1,o[f[f[t>>2]+28>>2]](t,i+8|0,f[n>>2],1),a=0,1==f[i+32>>2]&&(f[n>>2]=f[i+24>>2],a=1)))),R=i- -64|0,0|a},o[674]=function(e,t,n,i,o,a){n|=0,i|=0,o|=0,a|=0,Rr(e|=0,f[8+(t|=0)>>2],a)&&Ti(t,n,i,o)},o[675]=function(e,t,n,i,o){if(n|=0,i|=0,o|=0,Rr(e|=0,f[8+(t|=0)>>2],o))1==f[t+28>>2]|f[t+4>>2]!=(0|n)||(f[t+28>>2]=i);else e:if(Rr(e,f[t>>2],o)){if(f[t+20>>2]==(0|n)||f[t+16>>2]==(0|n)){if(1!=(0|i))break e;return void(f[t+32>>2]=1)}f[t+20>>2]=n,f[t+32>>2]=i,f[t+40>>2]=f[t+40>>2]+1,1!=f[t+36>>2]|2!=f[t+24>>2]||(a[t+54|0]=1),f[t+44>>2]=4}},o[676]=function(e,t,n,i){n|=0,i|=0,Rr(e|=0,f[8+(t|=0)>>2],0)&&uo(t,n,i)},o[677]=rc,o[678]=function(e,t,n,i,a,r){n|=0,i|=0,a|=0,r|=0,Rr(e|=0,f[8+(t|=0)>>2],r)?Ti(t,n,i,a):(e=f[e+8>>2],o[f[f[e>>2]+20>>2]](e,t,n,i,a,r))},o[679]=function(e,t,n,i,r){if(n|=0,i|=0,r|=0,Rr(e|=0,f[8+(t|=0)>>2],r))1==f[t+28>>2]|f[t+4>>2]!=(0|n)||(f[t+28>>2]=i);else e:{if(Rr(e,f[t>>2],r)){if(f[t+20>>2]==(0|n)||f[t+16>>2]==(0|n)){if(1!=(0|i))break e;return void(f[t+32>>2]=1)}f[t+32>>2]=i;t:if(4!=f[t+44>>2]){if(u[t+52>>1]=0,e=f[e+8>>2],o[f[f[e>>2]+20>>2]](e,t,n,n,1,r),h[t+53|0]){if(f[t+44>>2]=3,!h[t+52|0])break t;break e}f[t+44>>2]=4}if(f[t+20>>2]=n,f[t+40>>2]=f[t+40>>2]+1,1!=f[t+36>>2]|2!=f[t+24>>2])break e;return void(a[t+54|0]=1)}e=f[e+8>>2],o[f[f[e>>2]+24>>2]](e,t,n,i,r)}},o[680]=function(e,t,n,i){n|=0,i|=0,Rr(e|=0,f[8+(t|=0)>>2],0)?uo(t,n,i):(e=f[e+8>>2],o[f[f[e>>2]+28>>2]](e,t,n,i))},o[681]=rc,o[682]=function(e,t,n,i,o,r){n|=0,i|=0,o|=0,r|=0;var s=0,c=0,l=0,_=0,p=0,m=0;if(Rr(e|=0,f[8+(t|=0)>>2],r))Ti(t,n,i,o);else{c=h[t+53|0],s=f[e+12>>2],a[t+53|0]=0,l=h[t+52|0],a[t+52|0]=0,wa(_=e+16|0,t,n,i,o,r),c|=p=h[t+53|0],l|=m=h[t+52|0];e:if(!((0|s)<2))for(_=_+(s<<3)|0,s=e+24|0;;){if(h[t+54|0])break e;t:{if(m){if(1==f[t+24>>2])break e;if(2&h[e+8|0])break t;break e}if(p&&!(1&a[e+8|0]))break e}if(u[t+52>>1]=0,wa(s,t,n,i,o,r),c|=p=h[t+53|0],l|=m=h[t+52|0],!((s=s+8|0)>>>0<_>>>0))break}a[t+53|0]=0!=(255&c),a[t+52|0]=0!=(255&l)}},o[683]=function(e,t,n,i,o){n|=0,i|=0,o|=0;var r=0,s=0,c=0,l=0,_=0;if(Rr(e|=0,f[8+(t|=0)>>2],o))1==f[t+28>>2]|f[t+4>>2]!=(0|n)||(f[t+28>>2]=i);else e:{if(Rr(e,f[t>>2],o)){if(f[t+20>>2]==(0|n)||f[t+16>>2]==(0|n)){if(1!=(0|i))break e;return void(f[t+32>>2]=1)}if(f[t+32>>2]=i,4!=f[t+44>>2]){l=(r=e+16|0)+(f[e+12>>2]<<3)|0,_=t;t:{n:{for(;!(r>>>0>=l>>>0||(u[t+52>>1]=0,wa(r,t,n,n,1,o),h[t+54|0]));){i:if(h[t+53|0]){if(h[t+52|0]){if(i=1,1==f[t+24>>2])break n;if(c=1,s=1,2&h[e+8|0])break i;break n}if(c=1,i=s,!(1&a[e+8|0]))break n}r=r+8|0}if(i=s,e=4,!c)break t}e=3}if(f[_+44>>2]=e,1&i)break e}if(f[t+20>>2]=n,f[t+40>>2]=f[t+40>>2]+1,1!=f[t+36>>2]|2!=f[t+24>>2])break e;return void(a[t+54|0]=1)}if(s=f[e+12>>2],Ia(r=e+16|0,t,n,i,o),!((0|s)<2))if(s=r+(s<<3)|0,r=e+24|0,e=f[e+8>>2],1==f[t+36>>2]||2&e)for(;;){if(h[t+54|0])break e;if(Ia(r,t,n,i,o),!((r=r+8|0)>>>0<s>>>0))break}else{if(!(1&e))for(;;){if(h[t+54|0]|1==f[t+36>>2])break e;if(Ia(r,t,n,i,o),!((r=r+8|0)>>>0<s>>>0))break e}for(;;){if(h[t+54|0]|(1==f[t+24>>2]?1==f[t+36>>2]:0))break e;if(Ia(r,t,n,i,o),!((r=r+8|0)>>>0<s>>>0))break}}}},o[684]=function(e,t,n,i){n|=0,i|=0;var o,a=0;if(Rr(e|=0,f[8+(t|=0)>>2],0))uo(t,n,i);else{a=f[e+12>>2],jo(o=e+16|0,t,n,i);e:if(!((0|a)<2))for(a=(a<<3)+o|0,e=e+24|0;;){if(jo(e,t,n,i),h[t+54|0])break e;if(!((e=e+8|0)>>>0<a>>>0))break}}},{__wasm_call_ctors:function(){var e;f[12+(e=R-16|0)>>2]=19888,f[e+8>>2]=2139095040,f[f[e+12>>2]>>2]=f[e+8>>2],function(){var e;e=yr(8),f[5678]=e,w(0|e,0),f[5681]=0,f[5682]=0,f[5680]=16468,f[5683]=0,f[5684]=0,f[5685]=0,f[5686]=0,f[5687]=0,f[5688]=0,Pr(22720),f[5690]=0,f[5691]=0,f[5689]=16468,f[5692]=0,f[5693]=0,f[5694]=0,f[5695]=0,f[5696]=0,f[5697]=0,Pr(22756),f[5699]=0,f[5700]=0,f[5698]=16468,f[5701]=0,f[5702]=0,f[5703]=0,f[5704]=0,f[5705]=0,f[5706]=0,Pr(22792),f[5708]=0,f[5709]=0,f[5707]=16468,f[5710]=0,f[5711]=0,f[5712]=0,f[5713]=0,f[5714]=0,f[5715]=0,Pr(22828),f[5717]=0,f[5718]=0,f[5716]=16468,f[5719]=0,f[5720]=0,f[5721]=0,f[5722]=0,f[5723]=0,f[5724]=0,Pr(22864),f[5726]=0,f[5727]=0,f[5725]=16468,f[5728]=0,f[5729]=0,f[5730]=0,f[5731]=0,f[5732]=0,f[5733]=0,Pr(22900),f[5735]=0,f[5736]=0,f[5734]=16468,f[5737]=0,f[5738]=0,f[5739]=0,f[5740]=0,f[5741]=0,f[5742]=0,Pr(22936),f[5744]=0,f[5745]=0,f[5743]=16468,f[5746]=0,f[5747]=0,f[5748]=0,f[5749]=0,f[5750]=0,f[5751]=0,Pr(22972),f[5753]=0,f[5754]=0,f[5752]=16468,f[5755]=0,f[5756]=0,f[5757]=0,f[5758]=0,f[5759]=0,f[5760]=0,Pr(23008),f[5762]=0,f[5763]=0,f[5761]=16468,f[5764]=0,f[5765]=0,f[5766]=0,f[5767]=0,f[5768]=0,f[5769]=0,Pr(23044),f[5771]=0,f[5772]=0,f[5770]=16468,f[5773]=0,f[5774]=0,f[5775]=0,f[5776]=0,f[5777]=0,f[5778]=0,Pr(23080),f[5780]=0,f[5781]=0,f[5779]=16468,f[5782]=0,f[5783]=0,f[5784]=0,f[5785]=0,f[5786]=0,f[5787]=0,Pr(23116),f[5789]=0,f[5790]=0,f[5788]=16468,f[5791]=0,f[5792]=0,f[5793]=0,f[5794]=0,f[5795]=0,f[5796]=0,Pr(23152),f[5798]=0,f[5799]=0,f[5797]=16468,f[5800]=0,f[5801]=0,f[5802]=0,f[5803]=0,f[5804]=0,f[5805]=0,Pr(23188),f[5807]=0,f[5808]=0,f[5806]=16468,f[5809]=0,f[5810]=0,f[5811]=0,f[5812]=0,f[5813]=0,f[5814]=0,Pr(23224),f[5816]=0,f[5817]=0,f[5815]=16468,f[5818]=0,f[5819]=0,f[5820]=0,f[5821]=0,f[5822]=0,f[5823]=0,Pr(23260),f[5825]=0,f[5826]=0,f[5824]=16468,f[5827]=0,f[5828]=0,f[5829]=0,f[5830]=0,f[5831]=0,f[5832]=0,Pr(23296),f[5834]=0,f[5835]=0,f[5833]=16468,f[5836]=0,f[5837]=0,f[5838]=0,f[5839]=0,f[5840]=0,f[5841]=0,Pr(23332),f[5843]=0,f[5844]=0,f[5842]=16468,f[5845]=0,f[5846]=0,f[5847]=0,f[5848]=0,f[5849]=0,f[5850]=0,Pr(23368),f[5852]=0,f[5853]=0,f[5851]=16468,f[5854]=0,f[5855]=0,f[5856]=0,f[5857]=0,f[5858]=0,f[5859]=0,Pr(23404),f[5861]=0,f[5862]=0,f[5860]=16468,f[5863]=0,f[5864]=0,f[5865]=0,f[5866]=0,f[5867]=0,f[5868]=0,Pr(23440),f[5870]=0,f[5871]=0,f[5869]=16468,f[5872]=0,f[5873]=0,f[5874]=0,f[5875]=0,f[5876]=0,f[5877]=0,Pr(23476),f[5879]=0,f[5880]=0,f[5878]=16468,f[5881]=0,f[5882]=0,f[5883]=0,f[5884]=0,f[5885]=0,f[5886]=0,Pr(23512),f[5888]=0,f[5889]=0,f[5887]=16468,f[5890]=0,f[5891]=0,f[5892]=0,f[5893]=0,f[5894]=0,f[5895]=0,Pr(23548),f[5897]=0,f[5898]=0,f[5896]=16468,f[5899]=0,f[5900]=0,f[5901]=0,f[5902]=0,f[5903]=0,f[5904]=0,Pr(23584),f[5906]=0,f[5907]=0,f[5905]=16468,f[5908]=0,f[5909]=0,f[5910]=0,f[5911]=0,f[5912]=0,f[5913]=0,Pr(23620),f[5915]=0,f[5916]=0,f[5914]=16468,f[5917]=0,f[5918]=0,f[5919]=0,f[5920]=0,f[5921]=0,f[5922]=0,Pr(23656),f[5924]=0,f[5925]=0,f[5923]=16468,f[5926]=0,f[5927]=0,f[5928]=0,f[5929]=0,f[5930]=0,f[5931]=0,Pr(23692),f[5933]=0,f[5934]=0,f[5932]=16468,f[5935]=0,f[5936]=0,f[5937]=0,f[5938]=0,f[5939]=0,f[5940]=0,Pr(23728),f[5942]=0,f[5943]=0,f[5941]=16468,f[5944]=0,f[5945]=0,f[5946]=0,f[5947]=0,f[5948]=0,f[5949]=0,Pr(23764),f[5951]=0,f[5952]=0,f[5950]=16468,f[5953]=0,f[5954]=0,f[5955]=0,f[5956]=0,f[5957]=0,f[5958]=0,Pr(23800),f[5960]=0,f[5961]=0,f[5959]=16468,f[5962]=0,f[5963]=0,f[5964]=0,f[5965]=0,f[5966]=0,f[5967]=0,Pr(23836),f[5969]=0,f[5970]=0,f[5968]=16468,f[5971]=0,f[5972]=0,f[5973]=0,f[5974]=0,f[5975]=0,f[5976]=0,Pr(23872),f[5978]=0,f[5979]=0,f[5977]=16468,f[5980]=0,f[5981]=0,f[5982]=0,f[5983]=0,f[5984]=0,f[5985]=0,Pr(23908),f[5987]=0,f[5988]=0,f[5986]=16468,f[5989]=0,f[5990]=0,f[5991]=0,f[5992]=0,f[5993]=0,f[5994]=0,Pr(23944),f[5996]=0,f[5997]=0,f[5995]=16468,f[5998]=0,f[5999]=0,f[6e3]=0,f[6001]=0,f[6002]=0,f[6003]=0,Pr(23980),f[6005]=0,f[6006]=0,f[6004]=16468,f[6007]=0,f[6008]=0,f[6009]=0,f[6010]=0,f[6011]=0,f[6012]=0,Pr(24016),f[6014]=0,f[6015]=0,f[6013]=16468,f[6016]=0,f[6017]=0,f[6018]=0,f[6019]=0,f[6020]=0,f[6021]=0,Pr(24052),f[6023]=0,f[6024]=0,f[6022]=16468,f[6025]=0,f[6026]=0,f[6027]=0,f[6028]=0,f[6029]=0,f[6030]=0,Pr(24088),f[6032]=0,f[6033]=0,f[6031]=16468,f[6034]=0,f[6035]=0,f[6036]=0,f[6037]=0,f[6038]=0,f[6039]=0,Pr(24124),f[6041]=0,f[6042]=0,f[6040]=16468,f[6043]=0,f[6044]=0,f[6045]=0,f[6046]=0,f[6047]=0,f[6048]=0,Pr(24160),f[6050]=0,f[6051]=0,f[6049]=16468,f[6052]=0,f[6053]=0,f[6054]=0,f[6055]=0,f[6056]=0,f[6057]=0,Pr(24196),f[6059]=0,f[6060]=0,f[6058]=16468,f[6061]=0,f[6062]=0,f[6063]=0,f[6064]=0,f[6065]=0,f[6066]=0,Pr(24232),f[6068]=0,f[6069]=0,f[6067]=16468,f[6070]=0,f[6071]=0,f[6072]=0,f[6073]=0,f[6074]=0,f[6075]=0,Pr(24268),f[6077]=0,f[6078]=0,f[6076]=16468,f[6079]=0,f[6080]=0,f[6081]=0,f[6082]=0,f[6083]=0,f[6084]=0,Pr(24304),f[6086]=0,f[6087]=0,f[6085]=16468,f[6088]=0,f[6089]=0,f[6090]=0,f[6091]=0,f[6092]=0,f[6093]=0,Pr(24340),f[6095]=0,f[6096]=0,f[6094]=16468,f[6097]=0,f[6098]=0,f[6099]=0,f[6100]=0,f[6101]=0,f[6102]=0,Pr(24376),f[6104]=0,f[6105]=0,f[6103]=16468,f[6106]=0,f[6107]=0,f[6108]=0,f[6109]=0,f[6110]=0,f[6111]=0,Pr(24412),f[6113]=0,f[6114]=0,f[6112]=16468,f[6115]=0,f[6116]=0,f[6117]=0,f[6118]=0,f[6119]=0,f[6120]=0,Pr(24448),f[6122]=0,f[6123]=0,f[6121]=16468,f[6124]=0,f[6125]=0,f[6126]=0,f[6127]=0,f[6128]=0,f[6129]=0,Pr(24484),f[6131]=0,f[6132]=0,f[6130]=16468,f[6133]=0,f[6134]=0,f[6135]=0,f[6136]=0,f[6137]=0,f[6138]=0,Pr(24520),f[6140]=0,f[6141]=0,f[6139]=16468,f[6142]=0,f[6143]=0,f[6144]=0,f[6145]=0,f[6146]=0,f[6147]=0,Pr(24556),f[6149]=0,f[6150]=0,f[6148]=16468,f[6151]=0,f[6152]=0,f[6153]=0,f[6154]=0,f[6155]=0,f[6156]=0,Pr(24592),f[6158]=0,f[6159]=0,f[6157]=16468,f[6160]=0,f[6161]=0,f[6162]=0,f[6163]=0,f[6164]=0,f[6165]=0,Pr(24628),f[6167]=0,f[6168]=0,f[6166]=16468,f[6169]=0,f[6170]=0,f[6171]=0,f[6172]=0,f[6173]=0,f[6174]=0,Pr(24664),f[6176]=0,f[6177]=0,f[6175]=16468,f[6178]=0,f[6179]=0,f[6180]=0,f[6181]=0,f[6182]=0,f[6183]=0,Pr(24700),f[6185]=0,f[6186]=0,f[6184]=16468,f[6187]=0,f[6188]=0,f[6189]=0,f[6190]=0,f[6191]=0,f[6192]=0,Pr(24736),f[6194]=0,f[6195]=0,f[6193]=16468,f[6196]=0,f[6197]=0,f[6198]=0,f[6199]=0,f[6200]=0,f[6201]=0,Pr(24772),f[6203]=0,f[6204]=0,f[6202]=16468,f[6205]=0,f[6206]=0,f[6207]=0,f[6208]=0,f[6209]=0,f[6210]=0,Pr(24808),f[6212]=0,f[6213]=0,f[6211]=16468,f[6214]=0,f[6215]=0,f[6216]=0,f[6217]=0,f[6218]=0,f[6219]=0,Pr(24844),f[6221]=0,f[6222]=0,f[6220]=16468,f[6223]=0,f[6224]=0,f[6225]=0,f[6226]=0,f[6227]=0,f[6228]=0,Pr(24880),f[6230]=0,f[6231]=0,f[6229]=16468,f[6232]=0,f[6233]=0,f[6234]=0,f[6235]=0,f[6236]=0,f[6237]=0,Pr(24916),f[6239]=0,f[6240]=0,f[6238]=16468,f[6241]=0,f[6242]=0,f[6243]=0,f[6244]=0,f[6245]=0,f[6246]=0,Pr(24952),f[6248]=0,f[6249]=0,f[6247]=16468,f[6250]=0,f[6251]=0,f[6252]=0,f[6253]=0,f[6254]=0,f[6255]=0,Pr(24988)}()},__em_js__array_bounds_check_error:function(){return 1272},a0_1:Xa,a1_0:Tr,a2_2:ha,a3_1:qa,a4_0:lr,a5_0:is,a6_0:pr,a7_1:na,a8_0:gr,a9_1:ia,a10_3:Oo,a11_0:Qr,a12_0:Hr,a13_3:No,a14_6:Hi,a15_1:Ma,a15_2:la,a15_3:Mo,a16_1:$a,a17_1:Fa,a18_0:Hr,a19_1:Xa,a20_0:Tr,a21_2:ha,a22_1:qa,a23_0:lr,a24_0:is,a25_0:pr,a26_1:na,a27_0:gr,a28_1:ia,a29_3:Oo,a30_0:Qr,a31_0:Hr,a32_1:tr,a33_1:Qa,a34_0:hs,a35_3:No,a36_6:Hi,a37_1:Ma,a37_2:la,a37_3:Mo,a38_1:$a,a39_1:Fa,a40_0:Hr,a41_0:ir,a42_0:Hr,a43_1:Xa,a44_0:Tr,a45_2:ha,a46_0:is,a47_0:pr,a48_1:na,a49_0:gr,a50_1:ia,a51_3:Oo,a52_0:Qr,a53_0:Hr,a54_1:jr,a55_0:Hr,a56_0:Hr,a57_0:function(){var e;return St(e=Cr(324)),0|e},a58_0:_r,a59_0:ur,a60_1:Ca,a61_1:wr,a62_0:ps,a62_1:Nr,a63_0:os,a64_0:Ga,a65_0:Va,a66_0:Ha,a67_1:Lr,a68_1:Fr,a69_1:Ur,a70_1:Or,a71_0:Sr,a72_0:hr,a73_1:Xo,a74_1:kr,a75_1:nr,a76_1:qo,a77_1:Yo,a78_0:fr,a79_1:Zo,a80_1:Jo,a81_2:Ra,a82_0:Hr,a83_4:function(e,t,n,i){var o;return e|=0,t|=0,n|=0,i|=0,R=o=R-16|0,f[o+12>>2]=e,f[o+8>>2]=t,f[o+4>>2]=n,f[o>>2]=i,Je(e=Cr(344),f[o+12>>2],f[o+8>>2],f[o+4>>2]),R=o+16|0,0|e},a84_1:Ka,a85_0:function(e){var t;return e|=0,R=t=R-32|0,f[t+28>>2]=e,1&a[19908]||Mr(19908)&&(f[12+(R-16|0)>>2]=19892,Kr(19908)),e=f[t+28>>2],o[f[f[e>>2]+76>>2]](t+8|0,e),e=f[t+12>>2],f[4973]=f[t+8>>2],f[4974]=e,e=f[t+20>>2],f[4975]=f[t+16>>2],f[4976]=e,R=t+32|0,19892},a86_1:Za,a86_3:Do,a87_1:Ja,a88_1:ja,a88_2:ma,a89_1:er,a90_1:$o,a90_2:vo,a90_3:ho,a91_3:No,a92_6:Hi,a93_1:za,a93_2:ua,a93_3:Mo,a94_1:$a,a95_1:Fa,a96_1:tr,a97_1:Qa,a98_0:hs,a99_0:Hr,a100_1:nr,a101_1:Ya,a102_0:Hr,a103_0:br,a104_1:Xa,a105_0:Tr,a106_2:ha,a107_1:qa,a108_0:lr,a109_0:is,a110_0:pr,a111_1:na,a112_0:gr,a113_1:ia,a114_3:Oo,a115_0:Qr,a116_0:Hr,a117_0:ir,a118_0:As,a119_1:So,a120_0:xs,a121_1:Eo,a122_0:Hr,a123_0:Er,a124_1:Ea,a125_0:Hr,a126_0:ir,a127_0:bs,a128_1:wo,a129_0:Cs,a130_1:To,a131_0:Hr,a132_1:Xa,a133_0:Tr,a134_2:ha,a135_0:is,a136_0:pr,a137_1:na,a138_0:gr,a139_1:ia,a140_3:Oo,a141_0:Qr,a142_0:Hr,a143_0:mr,a144_0:rr,a145_0:sr,a146_0:ar,a147_1:oa,a148_1:ea,a149_1:ta,a150_1:Ko,a151_0:_s,a152_1:Wo,a153_0:or,a154_1:Qo,a155_2:zo,a156_3:Po,a157_0:Hr,a158_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,Re(f[n+12>>2],f[n+8>>2]),R=n+16|0},a159_0:_s,a160_0:vr,a161_1:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,R=n+16|0,y(d[f[f[e+12>>2]+12>>2]+(f[e+8>>2]<<2)>>2])},a162_0:ms,a163_0:ts,a164_2:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,a[n+11|0]=t,no(e=Cr(80),f[n+12>>2],1&a[n+11|0],1),R=n+16|0,0|e},a164_3:function(e,t,n){var i;return e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,a[i+11|0]=t,a[i+10|0]=n,no(e=Cr(80),f[i+12>>2],1&a[i+11|0],1&a[i+10|0]),R=i+16|0,0|e},a165_1:Xa,a166_0:Tr,a167_2:ha,a168_0:is,a169_0:pr,a170_1:na,a171_0:gr,a172_1:ia,a173_3:Oo,a174_0:Qr,a175_0:Hr,a176_0:function(){var e;return function(e){var t,n=0,i=0,r=0,s=0,c=0;R=t=R-32|0,f[e>>2]=15928,f[e+20>>2]=0,f[e+12>>2]=-1,f[e+16>>2]=0,f[e+4>>2]=0,f[e+8>>2]=0,f[e+36>>2]=0,a[e+40|0]=1,f[e+28>>2]=0,f[e+32>>2]=0,f[e+60>>2]=0,f[e+52>>2]=-1,f[e+56>>2]=0,f[e+44>>2]=0,f[e+48>>2]=0,f[e+76>>2]=0,a[e+80|0]=1,f[e+68>>2]=0,f[e+72>>2]=0,f[e+168>>2]=0,r=1,a[e+172|0]=1,f[e+160>>2]=0,f[e+164>>2]=0,a[e+153|0]=256,a[e+154|0]=1,a[e+152|0]=1,f[e+124>>2]=0,f[e+100>>2]=0,f[e+104>>2]=0,f[e+136>>2]=0,f[e+128>>2]=0,f[e+132>>2]=0,f[e+116>>2]=10,f[e+120>>2]=1,f[e+108>>2]=1,f[e+112>>2]=0,f[6257]=f[6257]+1,function(e){var t,n,i=0,r=0,s=0;if(f[e>>2]=15368,f[e+24>>2]=0,f[e+68>>2]=0,a[e+20|0]=1,f[e+16>>2]=0,a[e+44|0]=1,f[e+8>>2]=0,f[e+12>>2]=0,f[e+40>>2]=0,a[e- -64|0]=1,f[e+32>>2]=0,f[e+36>>2]=0,f[e+60>>2]=0,f[e+52>>2]=0,f[e+56>>2]=0,f[6257]=f[6257]+1,t=0|o[f[4968]](32,16),(0|(n=f[e+8>>2]))>=1)for(;i=(r=s<<4)+t|0,r=r+f[e+16>>2]|0,f[i>>2]=f[r>>2],f[i+4>>2]=f[r+4>>2],f[i+8>>2]=f[r+8>>2],f[i+12>>2]=f[r+12>>2],(0|n)!=(0|(s=s+1|0)););(i=f[e+16>>2])&&(h[e+20|0]&&i&&(f[6258]=f[6258]+1,o[f[4969]](i)),f[e+16>>2]=0),f[e+16>>2]=t,a[e+20|0]=1,f[e+12>>2]=2,ft(e)}(n=0|o[f[4968]](72,16)),i=f[e+160>>2],f[e+148>>2]=0,f[e+96>>2]=n,f[e+140>>2]=0,f[e+144>>2]=0,f[e+84>>2]=0,f[e+88>>2]=0,f[e+92>>2]=0,f[t+20>>2]=0,a[t+24|0]=1,f[t+12>>2]=0,f[t+16>>2]=0;e:{if((0|i)>=2)for(;;)if(c=n=f[e+168>>2]+g(r,20)|0,(s=f[n+12>>2])&&(h[n+16|0]&&s&&(f[6258]=f[6258]+1,o[f[4969]](s)),f[c+12>>2]=0),a[n+16|0]=1,f[c+12>>2]=0,f[n+4>>2]=0,f[n+8>>2]=0,(0|(r=r+1|0))==(0|i))break e;if(1!=(0|i))for(function(e){var t=0,n=0,i=0,r=0,s=0,c=0;if(f[e+8>>2]<1){if(f[6257]=f[6257]+1,s=0|o[f[4968]](20,16),!((0|(n=f[e+4>>2]))<1)){for(;On((i=g(t,20))+s|0,i+f[e+12>>2]|0),(0|n)!=(0|(t=t+1|0)););if(!((0|(c=f[e+4>>2]))<1))for(n=0;i=t=f[e+12>>2]+g(n,20)|0,(r=f[t+12>>2])&&(h[t+16|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[i+12>>2]=0),a[t+16|0]=1,f[i+12>>2]=0,f[t+4>>2]=0,f[t+8>>2]=0,(0|c)!=(0|(n=n+1|0)););}(t=f[e+12>>2])&&(h[e+16|0]&&t&&(f[6258]=f[6258]+1,o[f[4969]](t)),f[e+12>>2]=0),f[e+12>>2]=s,a[e+16|0]=1,f[e+8>>2]=1}}(e+156|0);n=i,On(f[e+168>>2]+g(n,20)|0,t+8|0),i=n+1|0,n;);}f[e+160>>2]=1,(e=f[t+20>>2])&&(h[t+24|0]&&e&&(f[6258]=f[6258]+1,o[f[4969]](e)),f[t+20>>2]=0),R=t+32|0}(e=yr(176)),0|e},a177_0:Hr,a178_0:vr,a179_1:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,R=n+16|0,f[f[f[e+12>>2]+12>>2]+(f[e+8>>2]<<2)>>2]},a180_0:ms,a181_0:ts,a182_2:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,function(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,Oa(e=f[i+12>>2]),f[e>>2]=1940,es(e+24|0),t=f[i+8>>2],n=f[t+4>>2],f[e+44>>2]=f[t>>2],f[e+48>>2]=n,n=f[t+12>>2],f[e+52>>2]=f[t+8>>2],f[e+56>>2]=n,t=f[i+4>>2],n=f[t+4>>2],f[e+60>>2]=f[t>>2],f[e+64>>2]=n,n=f[t+12>>2],f[e+68>>2]=f[t+8>>2],f[e+72>>2]=n,es(e+76|0),es(e+96|0),es(e+116|0),R=i+16|0}(e=f[i+12>>2],f[i+8>>2],f[i+4>>2]),f[e>>2]=1768,es(e+136|0),a[e+156|0]=1,f[e+12>>2]=-1,R=i+16|0}(e=yr(160),f[n+12>>2],f[n+8>>2]),R=n+16|0,0|e},a183_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+116|0},a184_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+76|0},a185_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+96|0},a186_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+136|0},a187_2:function(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,a[i+7|0]=n,function(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,a[i+7|0]=n,e=f[i+12>>2],f[e+16>>2]=f[i+8>>2],a[e+156|0]=1&a[i+7|0],d[e+4>>2]=1,f[e+8>>2]=0,La(e+136|0),La(e+116|0),La(e+24|0),La(e+96|0),La(e+76|0),R=i+16|0}(f[i+12>>2],f[i+8>>2],1&a[i+7|0]),R=i+16|0},a188_0:ir,a189_0:As,a190_1:So,a191_0:xs,a192_1:Eo,a193_0:Hr,a194_2:function(e,t){var n,i;return e=y(e),t=y(t),R=n=R-16|0,d[n+12>>2]=e,d[n+8>>2]=t,function(e,t,n){Fo(e),d[e+48>>2]=t,f[e>>2]=13488,f[e+56>>2]=1,f[e+4>>2]=10,f[e+44>>2]=0,d[e+40>>2]=t,d[e+36>>2]=n*y(.5),d[e+32>>2]=t}(i=Cr(60),d[n+12>>2],d[n+8>>2]),R=n+16|0,0|i},a195_1:qa,a196_0:lr,a197_3:function(e,t,n,i){var o;e|=0,t=y(t),n=y(n),i|=0,R=o=R-16|0,f[o+12>>2]=e,d[o+8>>2]=t,d[o+4>>2]=n,f[o>>2]=i,function(e,t,n,i){var o;R=o=R-32|0,f[o+28>>2]=e,d[o+24>>2]=t,d[o+20>>2]=n,f[o+16>>2]=i,e=f[o+28>>2],f[e+56>>2]=f[o+16>>2],d[o+12>>2]=1,d[o+8>>2]=1,d[o+4>>2]=1,Lo(e+16|0,o+12|0,o+8|0,o+4|0),1!=f[e+56>>2]?f[e+56>>2]?Lo(e+32|0,i=o+24|0,i,o+20|0):Lo(e+32|0,o+20|0,i=o+24|0,i):Lo(e+32|0,i=o+24|0,o+20|0,i),f[o>>2]=(f[o+16>>2]+2|0)%3,f[12+(i=R-16|0)>>2]=e+32,d[e+48>>2]=d[f[i+12>>2]+(f[o>>2]<<2)>>2],R=o+32|0}(f[o+12>>2],d[o+8>>2],d[o+4>>2],f[o>>2]),R=o+16|0},a198_1:Xa,a199_0:Tr,a200_2:ha,a201_0:is,a202_0:pr,a203_1:na,a204_0:gr,a205_1:ia,a206_3:Oo,a207_0:Qr,a208_0:br,a209_0:Hr,a210_0:vs,a211_1:Xr,a212_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[f[t+12>>2]+8>>2]},a213_1:function(e,t){var n;e|=0,t|=0,f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,f[f[n+12>>2]+8>>2]=f[n+8>>2]},a214_0:ss,a215_0:ys,a216_1:Zr,a217_0:ss,a218_3:function(e,t,n){var i,o,a;return e=y(e),t|=0,n|=0,R=i=R-48|0,d[i+44>>2]=e,f[i+40>>2]=t,f[i+36>>2]=n,t=yr(144),e=d[i+44>>2],n=f[i+40>>2],a=f[i+36>>2],d[i+12>>2]=0,d[i+8>>2]=0,d[i+4>>2]=0,Lo(o=i+16|0,i+12|0,i+8|0,i+4|0),Ln(t,e,n,a,o),R=i+48|0,0|t},a218_4:function(e,t,n,i){var o;return e=y(e),t|=0,n|=0,i|=0,R=o=R-16|0,d[o+12>>2]=e,f[o+8>>2]=t,f[o+4>>2]=n,f[o>>2]=i,Ln(t=yr(144),d[o+12>>2],f[o+8>>2],f[o+4>>2],f[o>>2]),R=o+16|0,0|t},a219_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,y(d[f[t+12>>2]+92>>2])},a220_1:function(e,t){var n;e|=0,t=y(t),f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,d[f[n+12>>2]+92>>2]=d[n+8>>2]},a221_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,y(d[f[t+12>>2]+96>>2])},a222_1:function(e,t){var n;e|=0,t=y(t),f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,d[f[n+12>>2]+96>>2]=d[n+8>>2]},a223_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,y(d[f[t+12>>2]+100>>2])},a224_1:function(e,t){var n;e|=0,t=y(t),f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,d[f[n+12>>2]+100>>2]=d[n+8>>2]},a225_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,y(d[f[t+12>>2]+104>>2])},a226_1:function(e,t){var n;e|=0,t=y(t),f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,d[f[n+12>>2]+104>>2]=d[n+8>>2]},a227_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,y(d[f[t+12>>2]+112>>2])},a228_1:function(e,t){var n;e|=0,t=y(t),f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,d[f[n+12>>2]+112>>2]=d[n+8>>2]},a229_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,y(d[f[t+12>>2]+116>>2])},a230_1:function(e,t){var n;e|=0,t=y(t),f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,d[f[n+12>>2]+116>>2]=d[n+8>>2]},a231_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,y(d[f[t+12>>2]+120>>2])},a232_1:function(e,t){var n;e|=0,t=y(t),f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,d[f[n+12>>2]+120>>2]=d[n+8>>2]},a233_0:_s,a234_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,+d[f[e+12>>2]+132>>2]},a235_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,+d[f[e+12>>2]+80>>2]},a236_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+200>>2]},a237_0:hr,a238_0:ws,a239_1:function(e,t){e|=0,t|=0;var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t>>2]=f[e>>2],f[t+4>>2]=n,n=f[e+12>>2],f[t+8>>2]=f[e+8>>2],f[t+12>>2]=n},a240_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[t+12>>2]+16|0},a241_1:function(e,t){e|=0,t|=0;var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t+16>>2]=f[e>>2],f[t+20>>2]=n,n=f[e+12>>2],f[t+24>>2]=f[e+8>>2],f[t+28>>2]=n},a242_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[t+12>>2]+48|0},a243_1:Io,a244_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[t+12>>2]+32|0},a245_1:function(e,t){e|=0,t|=0;var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t+32>>2]=f[e>>2],f[t+36>>2]=n,n=f[e+12>>2],f[t+40>>2]=f[e+8>>2],f[t+44>>2]=n},a246_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[t+12>>2]- -64|0},a247_1:function(e,t){e|=0,t|=0;var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t+64>>2]=f[e>>2],f[t+68>>2]=n,n=f[e+12>>2],f[t+72>>2]=f[e+8>>2],f[t+76>>2]=n},a248_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,+d[f[t+12>>2]+80>>2]},a249_1:function(e,t){var n;e|=0,t=+t,f[12+(n=R-16|0)>>2]=e,v[n>>3]=t,d[f[n+12>>2]+80>>2]=v[n>>3]},a250_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[f[t+12>>2]+108>>2]},a251_1:function(e,t){var n;e|=0,t|=0,f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,f[f[n+12>>2]+108>>2]=f[n+8>>2]},a252_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[f[t+12>>2]+112>>2]},a253_1:function(e,t){var n;e|=0,t|=0,f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,f[f[n+12>>2]+112>>2]=f[n+8>>2]},a254_0:_s,a255_0:function(){var e;return Nn(e=Cr(236)),0|e},a256_0:Hr,a257_2:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t,n){var i=0,o=y(0),r=y(0),s=y(0),c=y(0),l=y(0),_=y(0),u=y(0),h=y(0),p=y(0),m=y(0),v=y(0),g=y(0),A=y(0),x=y(0),b=y(0);po(e,t),f[e>>2]=3360,i=f[n+4>>2],f[e+300>>2]=f[n>>2],f[e+304>>2]=i,i=f[n+12>>2],f[e+308>>2]=f[n+8>>2],f[e+312>>2]=i,c=d[t+52>>2],l=d[t+8>>2],_=d[t+12>>2],u=d[t+56>>2],h=d[t+20>>2],p=d[t+24>>2],m=d[t+28>>2],v=d[t+60>>2],g=d[t+36>>2],A=d[t+40>>2],o=d[n+8>>2],x=d[t+44>>2],b=d[t+4>>2],r=d[n>>2],s=d[n+4>>2],f[e+356>>2]=0,f[e+348>>2]=1050253722,f[e+352>>2]=1065353216,a[e+344|0]=0,f[e+328>>2]=0,f[e+332>>2]=0,d[e+324>>2]=v+y(y(y(r*g)+y(s*A))+y(o*x)),d[e+320>>2]=u+y(y(y(r*h)+y(s*p))+y(o*m)),d[e+316>>2]=c+y(y(y(r*b)+y(s*l))+y(o*_))}(e=Cr(360),f[n+12>>2],f[n+8>>2]),R=n+16|0,0|e},a257_4:function(e,t,n,i){var o;return e|=0,t|=0,n|=0,i|=0,R=o=R-16|0,f[o+12>>2]=e,f[o+8>>2]=t,f[o+4>>2]=n,f[o>>2]=i,function(e,t,n,i,o){yo(e,3,t,n),f[e>>2]=3360,t=f[i+4>>2],f[e+300>>2]=f[i>>2],f[e+304>>2]=t,t=f[i+12>>2],f[e+308>>2]=f[i+8>>2],f[e+312>>2]=t,t=f[o+4>>2],f[e+316>>2]=f[o>>2],f[e+320>>2]=t,t=f[o+12>>2],f[e+324>>2]=f[o+8>>2],f[e+328>>2]=t,f[e+356>>2]=0,f[e+348>>2]=1050253722,f[e+352>>2]=1065353216,a[e+344|0]=0,f[e+332>>2]=0}(e=Cr(360),f[o+12>>2],f[o+8>>2],f[o+4>>2],f[o>>2]),R=o+16|0,0|e},a258_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t+300>>2]=f[e>>2],f[t+304>>2]=n,n=f[e+12>>2],f[t+308>>2]=f[e+8>>2],f[t+312>>2]=n}(f[n+12>>2],f[n+8>>2]),R=n+16|0},a259_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,t=f[n+12>>2],e=f[n+8>>2],n=f[e+4>>2],f[t+316>>2]=f[e>>2],f[t+320>>2]=n,n=f[e+12>>2],f[t+324>>2]=f[e+8>>2],f[t+328>>2]=n}(f[n+12>>2],f[n+8>>2]),R=n+16|0},a260_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+300|0},a261_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+316|0},a262_1:Wo,a263_0:or,a264_1:Qo,a265_2:zo,a266_3:Po,a267_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,f[t+12>>2]+348|0},a268_1:function(e,t){e|=0,t|=0;var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],t=f[n+8>>2],n=f[t+4>>2],f[e+348>>2]=f[t>>2],f[e+352>>2]=n,f[e+356>>2]=f[t+8>>2]},a269_0:Hr,a270_1:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,us(e=Cr(100),f[t+12>>2],1),R=t+16|0,0|e},a270_2:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,a[n+11|0]=t,us(e=Cr(100),f[n+12>>2],1&a[n+11|0]),R=n+16|0,0|e},a271_1:Xa,a272_0:Tr,a273_2:ha,a274_1:qa,a275_0:lr,a276_0:is,a277_0:pr,a278_1:na,a279_0:gr,a280_1:ia,a281_3:Oo,a282_0:Qr,a283_0:Hr,a284_2:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,function(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,Oa(e=f[i+12>>2]),f[e>>2]=2112,t=f[i+8>>2],n=f[t+4>>2],f[e+24>>2]=f[t>>2],f[e+28>>2]=n,n=f[t+12>>2],f[e+32>>2]=f[t+8>>2],f[e+36>>2]=n,t=f[i+4>>2],n=f[t+4>>2],f[e+40>>2]=f[t>>2],f[e+44>>2]=n,n=f[t+12>>2],f[e+48>>2]=f[t+8>>2],f[e+52>>2]=n,f[12+(R-16|0)>>2]=e+56,f[12+(R-16|0)>>2]=e+72,R=i+16|0}(e=f[i+12>>2],f[i+8>>2],f[i+4>>2]),f[e>>2]=1988,f[e+88>>2]=0,a[e+92|0]=1,f[e+12>>2]=-1,R=i+16|0}(e=yr(96),f[n+12>>2],f[n+8>>2]),R=n+16|0,0|e},a285_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+56|0},a286_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+72|0},a287_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+88>>2]},a288_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,y(d[f[e+12>>2]+4>>2])},a289_2:function(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,a[i+7|0]=n,function(e,t,n){var i;f[12+(i=R-16|0)>>2]=e,f[i+8>>2]=t,a[i+7|0]=n,e=f[i+12>>2],f[e+16>>2]=f[i+8>>2],a[e+92|0]=1&a[i+7|0],d[e+4>>2]=1,f[e+8>>2]=0}(f[i+12>>2],f[i+8>>2],1&a[i+7|0]),R=i+16|0},a290_0:ir,a291_0:bs,a292_1:wo,a293_0:Cs,a294_1:To,a295_0:Hr,a296_9:function(e,t,n,i,o,r,s,c,l){var _;return e|=0,t|=0,n|=0,i=y(i),o=y(o),r=y(r),s|=0,c|=0,l|=0,R=_=R-48|0,f[_+44>>2]=e,f[_+40>>2]=t,f[_+36>>2]=n,d[_+32>>2]=i,d[_+28>>2]=o,d[_+24>>2]=r,f[_+20>>2]=s,f[_+16>>2]=c,a[_+15|0]=l,function(e,t,n,i,o,r,s,c,l,_){f[e+4>>2]=35,f[e+8>>2]=0,f[e+12>>2]=-1,f[e+16>>2]=0,f[e>>2]=13904,f[e>>2]=14676,function(e,t,n,i,o,r,s,c,l,_){var u=y(0),h=y(0),p=y(0),m=y(0);f[e+112>>2]=1065353216,f[e+116>>2]=1065353216,f[e+108>>2]=c,a[e+105|0]=0,a[e+106|0]=0,a[e+104|0]=_,f[e+100>>2]=l,f[e+96>>2]=i,d[e+92>>2]=o,d[e+80>>2]=s,d[e+76>>2]=r,f[e+72>>2]=n,f[e+68>>2]=t,f[e+4>>2]=24,f[e+120>>2]=1065353216,f[e+124>>2]=0,o=y(n+-1|0),d[e+88>>2]=o,u=y(t+-1|0),d[e+84>>2]=u;e:{t:{n:{i:{o:{if(c>>>0<=2)switch(c-1|0){case 1:break n;case 0:break i;default:break o}h=d[e+44>>2],p=d[e+28>>2],o=d[e+40>>2],m=d[e+24>>2],s=d[e+36>>2],r=d[e+20>>2];break e}d[e+36>>2]=s,d[e+20>>2]=r,f[e+48>>2]=0,d[e+44>>2]=o,d[e+40>>2]=u,f[e+32>>2]=0,f[e+24>>2]=0,f[e+28>>2]=0,h=o,o=u;break e}d[e+36>>2]=u,f[e+20>>2]=0,f[e+48>>2]=0,d[e+44>>2]=o,d[e+40>>2]=s,f[e+28>>2]=0,f[e+32>>2]=0,d[e+24>>2]=r,h=o,o=s,m=r,r=y(0);break t}d[e+36>>2]=u,f[e+20>>2]=0,f[e+24>>2]=0,f[e+48>>2]=0,d[e+44>>2]=s,d[e+40>>2]=o,f[e+32>>2]=0,d[e+28>>2]=r,h=s}p=r,s=u,r=y(0)}f[e- -64>>2]=0,d[e+60>>2]=y(p+h)*y(.5),d[e+56>>2]=y(m+o)*y(.5),d[e+52>>2]=y(r+s)*y(.5)}(e,t,n,i,o,r,s,c,l,_)}(e=Cr(128),f[_+44>>2],f[_+40>>2],f[_+36>>2],d[_+32>>2],d[_+28>>2],d[_+24>>2],f[_+20>>2],f[_+16>>2],1&a[_+15|0]),R=_+48|0,0|e},a297_1:qa,a298_0:lr,a299_1:Xa,a300_0:Tr,a301_2:ha,a302_0:is,a303_0:pr,a304_1:na,a305_0:gr,a306_1:ia,a307_3:Oo,a308_0:Qr,a309_0:Hr,a310_0:_s,a311_0:function(){var e,t,n;return R=e=R-32|0,t=yr(88),Na(n=e+8|0),De(t,n),R=e+32|0,0|t},a311_1:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,De(e=yr(88),f[t+12>>2]),R=t+16|0,0|e},a312_0:Hr,a313_0:function(){var e;return gt(e=Cr(172),1,1),0|e},a313_1:function(e){var t;return e|=0,R=t=R-16|0,a[t+15|0]=e,gt(e=Cr(172),1&a[t+15|0],1),R=t+16|0,0|e},a313_2:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,a[n+15|0]=e,a[n+14|0]=t,gt(e=Cr(172),1&a[n+15|0],1&a[n+14|0]),R=n+16|0,0|e},a314_3:function(e,t,n,i){var o;e|=0,t|=0,n|=0,i|=0,R=o=R-16|0,f[o+12>>2]=e,f[o+8>>2]=t,f[o+4>>2]=n,f[o>>2]=i,zr(f[o+12>>2],f[o+8>>2],f[o+4>>2],f[o>>2],0),R=o+16|0},a314_4:function(e,t,n,i,o){var r;e|=0,t|=0,n|=0,i|=0,o|=0,R=r=R-32|0,f[r+28>>2]=e,f[r+24>>2]=t,f[r+20>>2]=n,f[r+16>>2]=i,a[r+15|0]=o,zr(f[r+28>>2],f[r+24>>2],f[r+20>>2],f[r+16>>2],1&a[r+15|0]),R=r+32|0},a315_3:function(e,t,n,i){var o;e|=0,t|=0,n|=0,i|=0,R=o=R-16|0,f[o+12>>2]=e,f[o+8>>2]=t,f[o+4>>2]=n,f[o>>2]=i,function(e,t,n,i){var o;o=f[e+32>>2],f[o>>2]=f[o>>2]+1,kt(e,t),kt(e,n),kt(e,i)}(f[o+12>>2],f[o+8>>2],f[o+4>>2],f[o>>2]),R=o+16|0},a316_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+20|0},a317_1:jr,a318_0:Hr,a319_0:Hr,a320_0:function(){var e;return nn(e=Cr(868)),0|e},a321_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+836>>2]},a322_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+840>>2]},a323_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+844>>2]},a324_1:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,R=n+16|0,(f[e+12>>2]+4|0)+g(f[e+8>>2],208)|0},a325_0:ss,a326_1:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,function(e,t){var n=y(0),i=y(0),o=y(0),a=y(0);Ds(e),f[e+4>>2]=0,f[e>>2]=14012,n=d[t>>2],o=d[t+4>>2],i=d[t+8>>2],f[e+44>>2]=0,a=y(i*d[e+24>>2]),i=d[e+48>>2],d[e+40>>2]=a-i,d[e+36>>2]=y(o*d[e+20>>2])-i,d[e+32>>2]=y(n*d[e+16>>2])-i,n=d[t>>2],o=d[t+8>>2],a=d[t+4>>2],(n=y(d[((n<a?(n<o^1)<<1:a<o?1:2)<<2)+t>>2]*y(.10000000149011612)))<i&&gi(e,n)}(e=Cr(60),f[t+12>>2]),R=t+16|0,0|e},a327_1:qa,a328_0:lr,a329_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n,i,a=0;R=n=R-80|0,f[n+76>>2]=e,f[n+72>>2]=t,e=f[n+76>>2],d[n+52>>2]=o[f[f[e>>2]+48>>2]](e),d[n+48>>2]=o[f[f[e>>2]+48>>2]](e),d[n+44>>2]=o[f[f[e>>2]+48>>2]](e),Lo(a=n+56|0,n+52|0,n+48|0,n+44|0),Ki(i=n+8|0,f[n+72>>2],e+16|0),Qi(t=n+24|0,i,a),a=f[t+4>>2],f[e+32>>2]=f[t>>2],f[e+36>>2]=a,a=f[t+12>>2],f[e+40>>2]=f[t+8>>2],f[e+44>>2]=a,function(e,t){var n;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,d[n+4>>2]=.10000000149011612,e=f[n+12>>2],f[12+(t=R-16|0)>>2]=f[n+8>>2],d[n>>2]=d[f[t+12>>2]+(function(e){var t;return f[12+(t=R-16|0)>>2]=e,e=f[t+12>>2],d[e>>2]<d[e+4>>2]?d[e>>2]<d[e+8>>2]?0:2:d[e+4>>2]<d[e+8>>2]?1:2}(f[n+8>>2])<<2)>>2],function(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=e,d[i+8>>2]=t,d[i+4>>2]=n,e=f[i+12>>2],d[i>>2]=d[i+4>>2]*d[i+8>>2],d[i>>2]<y(o[f[f[e>>2]+48>>2]](e))&&o[f[f[e>>2]+44>>2]](e,d[i>>2]),R=i+16|0}(e,d[n>>2],d[n+4>>2]),R=n+16|0}(e,f[n+72>>2]),R=n+80|0}(f[n+12>>2],f[n+8>>2]),R=n+16|0},a330_1:Xa,a331_0:Tr,a332_2:ha,a333_0:is,a334_0:pr,a335_1:na,a336_0:gr,a337_1:ia,a338_3:Oo,a339_0:Qr,a340_0:br,a341_0:Hr,a342_1:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,function(e,t){var n=0,i=0,r=0;for(f[e+4>>2]=2,f[e>>2]=4064,f[e+10444>>2]=t,f[e+28>>2]=7172,f[e+64>>2]=163,a[e+24|0]=1,f[e+20>>2]=0,f[e+60>>2]=0,f[e+12>>2]=0,f[e+16>>2]=0,f[e+68>>2]=o[f[f[t>>2]+12>>2]](t),f[e+72>>2]=o[f[f[t>>2]+8>>2]](t);;){for(t=0;i=(g(n,144)+e|0)+(t<<2)|0,r=f[e+10444>>2],f[i+76>>2]=o[f[f[r>>2]+16>>2]](r,n,t),r=i+5260|0,i=f[e+10444>>2],f[r>>2]=o[f[f[i>>2]+20>>2]](i,n,t),36!=(0|(t=t+1|0)););if(36==(0|(n=n+1|0)))break}}(e=yr(10448),f[t+12>>2]),R=t+16|0,0|e},a343_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,f[f[e+12>>2]+4>>2]=f[e+8>>2],R=n+16|0},a344_0:Er,a345_1:Ea,a346_0:Hr,a347_0:function(){var e;return Ye(e=Cr(200),1),0|e},a347_1:function(e){var t;return e|=0,R=t=R-16|0,a[t+15|0]=e,Ye(e=Cr(200),1&a[t+15|0]),R=t+16|0,0|e},a348_2:function(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,function(e,t,n){var i,r=0,s=0,c=0,l=y(0),_=0;if(R=i=R-144|0,f[e+72>>2]=f[e+72>>2]+1,f[i+140>>2]=0,r=f[t+12>>2],f[i+72>>2]=f[t+8>>2],f[i+76>>2]=r,r=f[t+4>>2],f[i+64>>2]=f[t>>2],f[i+68>>2]=r,r=f[t+28>>2],f[i+88>>2]=f[t+24>>2],f[i+92>>2]=r,r=f[t+20>>2],f[i+80>>2]=f[t+16>>2],f[i+84>>2]=r,r=f[t+44>>2],f[i+104>>2]=f[t+40>>2],f[i+108>>2]=r,r=f[t+36>>2],f[i+96>>2]=f[t+32>>2],f[i+100>>2]=r,r=f[t+60>>2],f[i+120>>2]=f[t+56>>2],f[i+124>>2]=r,r=f[t+52>>2],s=f[t+48>>2],f[i+128>>2]=n,f[i+112>>2]=s,f[i+116>>2]=r,f[i+132>>2]=f[n+4>>2],d[i+136>>2]=o[f[f[n>>2]+48>>2]](n),o[f[f[n>>2]+8>>2]](n,t,i+48|0,i+32|0),l=d[i+48>>2],d[e+36>>2]>l&&(d[e+36>>2]=l),l=d[i+32>>2],d[e+52>>2]<l&&(d[e+52>>2]=l),l=d[i+52>>2],d[e+40>>2]>l&&(d[e+40>>2]=l),l=d[i+36>>2],d[e+56>>2]<l&&(d[e+56>>2]=l),l=d[i+56>>2],d[e+44>>2]>l&&(d[e+44>>2]=l),l=d[i+40>>2],d[e+60>>2]<l&&(d[e+60>>2]=l),(t=f[e+68>>2])&&(n=f[i+60>>2],f[i+8>>2]=f[i+56>>2],f[i+12>>2]=n,n=f[i+44>>2],f[i+24>>2]=f[i+40>>2],f[i+28>>2]=n,n=f[i+36>>2],f[i+16>>2]=f[i+32>>2],f[i+20>>2]=n,n=f[i+52>>2],f[i>>2]=f[i+48>>2],f[i+4>>2]=n,f[i+140>>2]=Hn(t,i,f[e+20>>2])),function(e,t){var n=0,i=0,r=0,s=0,c=0,l=0,_=0;if((0|(s=f[e+4>>2]))==f[e+8>>2]&&!((0|s)>=(0|(c=s?s<<1:1)))){if(c&&(f[6257]=f[6257]+1,_=0|o[f[4968]](g(c,80),16),s=f[e+4>>2]),(0|s)>=1)for(;i=(n=g(l,80))+_|0,n=n+f[e+12>>2]|0,r=f[n+4>>2],f[i>>2]=f[n>>2],f[i+4>>2]=r,r=f[n+12>>2],f[i+8>>2]=f[n+8>>2],f[i+12>>2]=r,r=f[n+28>>2],f[i+24>>2]=f[n+24>>2],f[i+28>>2]=r,r=f[n+20>>2],f[i+16>>2]=f[n+16>>2],f[i+20>>2]=r,r=f[n+44>>2],f[i+40>>2]=f[n+40>>2],f[i+44>>2]=r,r=f[n+36>>2],f[i+32>>2]=f[n+32>>2],f[i+36>>2]=r,r=f[n+60>>2],f[i+56>>2]=f[n+56>>2],f[i+60>>2]=r,r=f[n+52>>2],f[i+48>>2]=f[n+48>>2],f[i+52>>2]=r,r=f[n+68>>2],f[i+64>>2]=f[n+64>>2],f[i+68>>2]=r,r=f[n+76>>2],f[i+72>>2]=f[n+72>>2],f[i+76>>2]=r,(0|(l=l+1|0))!=(0|s););(n=f[e+12>>2])&&(h[e+16|0]&&n&&(f[6258]=f[6258]+1,o[f[4969]](n)),f[e+12>>2]=0),f[e+12>>2]=_,a[e+16|0]=1,f[e+8>>2]=c,s=f[e+4>>2]}n=f[e+12>>2]+g(s,80)|0,s=f[t+4>>2],f[n>>2]=f[t>>2],f[n+4>>2]=s,i=f[t+12>>2],f[n+8>>2]=f[t+8>>2],f[n+12>>2]=i,i=f[t+28>>2],f[n+24>>2]=f[t+24>>2],f[n+28>>2]=i,i=f[t+20>>2],f[n+16>>2]=f[t+16>>2],f[n+20>>2]=i,i=f[t+44>>2],f[n+40>>2]=f[t+40>>2],f[n+44>>2]=i,i=f[t+36>>2],f[n+32>>2]=f[t+32>>2],f[n+36>>2]=i,i=f[t+60>>2],f[n+56>>2]=f[t+56>>2],f[n+60>>2]=i,i=f[t+52>>2],f[n+48>>2]=f[t+48>>2],f[n+52>>2]=i,i=f[t+76>>2],f[n+72>>2]=f[t+72>>2],f[n+76>>2]=i,i=f[t+68>>2],f[n+64>>2]=f[t+64>>2],f[n+68>>2]=i,f[e+4>>2]=f[e+4>>2]+1}(e+16|0,i- -64|0),(0|(n=f[e+84>>2]))==f[e+88>>2]&&!((0|n)>=(0|(s=n?n<<1:1)))){t=0,s&&(f[6257]=f[6257]+1,c=0|o[f[4968]](s<<2,16),n=f[e+84>>2]),r=f[e+92>>2];e:{t:{if((0|n)>=1)for(;;)if(f[(_=t<<2)+c>>2]=f[r+_>>2],(0|n)==(0|(t=t+1|0)))break t;if(!r)break e}h[e+96|0]&&(r&&(f[6258]=f[6258]+1,o[f[4969]](r)),n=f[e+84>>2]),f[e+92>>2]=0}f[e+92>>2]=c,f[e+88>>2]=s,a[e+96|0]=1}if(f[f[e+92>>2]+(n<<2)>>2]=1056964608,f[e+84>>2]=n+1,(0|(n=f[e+124>>2]))==f[e+128>>2]&&!((0|n)>=(0|(s=n?n<<1:1)))){t=0,c=0,s&&(f[6257]=f[6257]+1,c=0|o[f[4968]](s<<2,16),n=f[e+124>>2]),r=f[e+132>>2];e:{t:{if((0|n)>=1)for(;;)if(f[(_=t<<2)+c>>2]=f[r+_>>2],(0|n)==(0|(t=t+1|0)))break t;if(!r)break e}h[e+136|0]&&(r&&(f[6258]=f[6258]+1,o[f[4969]](r)),n=f[e+124>>2]),f[e+132>>2]=0}f[e+132>>2]=c,f[e+128>>2]=s,a[e+136|0]=1}if(f[f[e+132>>2]+(n<<2)>>2]=0,f[e+124>>2]=n+1,(0|(n=f[e+104>>2]))==f[e+108>>2]&&!((0|n)>=(0|(s=n?n<<1:1)))){t=0,c=0,s&&(f[6257]=f[6257]+1,c=0|o[f[4968]](s<<2,16),n=f[e+104>>2]),r=f[e+112>>2];e:{t:{if((0|n)>=1)for(;;)if(f[(_=t<<2)+c>>2]=f[r+_>>2],(0|n)==(0|(t=t+1|0)))break t;if(!r)break e}h[e+116|0]&&(r&&(f[6258]=f[6258]+1,o[f[4969]](r)),n=f[e+104>>2]),f[e+112>>2]=0}f[e+112>>2]=c,f[e+108>>2]=s,a[e+116|0]=1}if(f[f[e+112>>2]+(n<<2)>>2]=0,f[e+104>>2]=n+1,(0|(n=f[e+144>>2]))==f[e+148>>2]&&!((0|n)>=(0|(s=n?n<<1:1)))){t=0,c=0,s&&(f[6257]=f[6257]+1,c=0|o[f[4968]](s<<2,16),n=f[e+144>>2]),r=f[e+152>>2];e:{t:{if((0|n)>=1)for(;;)if(f[(_=t<<2)+c>>2]=f[r+_>>2],(0|n)==(0|(t=t+1|0)))break t;if(!r)break e}h[e+156|0]&&(r&&(f[6258]=f[6258]+1,o[f[4969]](r)),n=f[e+144>>2]),f[e+152>>2]=0}f[e+152>>2]=c,f[e+148>>2]=s,a[e+156|0]=1}if(f[f[e+152>>2]+(n<<2)>>2]=0,f[e+144>>2]=n+1,(0|(n=f[e+164>>2]))==f[e+168>>2]&&!((0|n)>=(0|(s=n?n<<1:1)))){t=0,c=0,s&&(f[6257]=f[6257]+1,c=0|o[f[4968]](s<<2,16),n=f[e+164>>2]),r=f[e+172>>2];e:{t:{if((0|n)>=1)for(;;)if(f[(_=t<<2)+c>>2]=f[r+_>>2],(0|n)==(0|(t=t+1|0)))break t;if(!r)break e}h[e+176|0]&&r&&(f[6258]=f[6258]+1,o[f[4969]](r)),f[e+172>>2]=0,n=f[e+164>>2]}f[e+172>>2]=c,f[e+168>>2]=s,a[e+176|0]=1}f[f[e+172>>2]+(n<<2)>>2]=2,f[e+164>>2]=f[e+164>>2]+1,R=i+144|0}(f[i+12>>2],f[i+8>>2],f[i+4>>2]),R=i+16|0},a349_1:tr,a350_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,ue(f[n+12>>2],f[n+8>>2]),R=n+16|0},a351_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=function(e){var t;return R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2]+16,R=t+16|0,f[f[e+12>>2]+4>>2]}(f[t+12>>2]),R=t+16|0,0|e},a352_1:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=Ro(f[n+12>>2],f[n+8>>2]),R=n+16|0,0|e},a353_2:function(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,en(f[i+12>>2],f[i+8>>2],f[i+4>>2],1),R=i+16|0},a353_3:function(e,t,n,i){var o;e|=0,t|=0,n|=0,i|=0,R=o=R-16|0,f[o+12>>2]=e,f[o+8>>2]=t,f[o+4>>2]=n,a[o+3|0]=i,en(f[o+12>>2],f[o+8>>2],f[o+4>>2],1&a[o+3|0]),R=o+16|0},a354_1:qa,a355_0:lr,a356_3:function(e,t,n,i){var o;e|=0,t|=0,n=y(n),i=y(i),R=o=R-16|0,f[o+12>>2]=e,f[o+8>>2]=t,d[o+4>>2]=n,d[o>>2]=i,gn(f[o+12>>2],f[o+8>>2],d[o+4>>2],d[o>>2],y(0),y(0),2),R=o+16|0},a356_4:function(e,t,n,i,o){var a;e|=0,t|=0,n=y(n),i=y(i),o=y(o),R=a=R-32|0,f[a+28>>2]=e,f[a+24>>2]=t,d[a+20>>2]=n,d[a+16>>2]=i,d[a+12>>2]=o,gn(f[a+28>>2],f[a+24>>2],d[a+20>>2],d[a+16>>2],d[a+12>>2],y(0),2),R=a+32|0},a356_5:function(e,t,n,i,o,a){var r;e|=0,t|=0,n=y(n),i=y(i),o=y(o),a=y(a),R=r=R-32|0,f[r+28>>2]=e,f[r+24>>2]=t,d[r+20>>2]=n,d[r+16>>2]=i,d[r+12>>2]=o,d[r+8>>2]=a,gn(f[r+28>>2],f[r+24>>2],d[r+20>>2],d[r+16>>2],d[r+12>>2],d[r+8>>2],2),R=r+32|0},a356_6:function(e,t,n,i,o,a,r){var s;e|=0,t|=0,n=y(n),i=y(i),o=y(o),a=y(a),r|=0,R=s=R-32|0,f[s+28>>2]=e,f[s+24>>2]=t,d[s+20>>2]=n,d[s+16>>2]=i,d[s+12>>2]=o,d[s+8>>2]=a,f[s+4>>2]=r,gn(f[s+28>>2],f[s+24>>2],d[s+20>>2],d[s+16>>2],d[s+12>>2],d[s+8>>2],f[s+4>>2]),R=s+32|0},a357_1:Xa,a358_0:Tr,a359_2:ha,a360_0:is,a361_0:pr,a362_1:na,a363_0:gr,a364_1:ia,a365_3:Oo,a366_0:Qr,a367_0:Hr,a368_0:function(){var e;return eo(e=Cr(200),co(),co()),0|e},a368_1:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,eo(e=Cr(200),f[t+12>>2],co()),R=t+16|0,0|e},a368_2:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,eo(e=Cr(200),f[n+12>>2],f[n+8>>2]),R=n+16|0,0|e},a369_1:nr,a370_1:Ya,a371_0:Hr,a372_4:function(e,t,n,i){var o;return e|=0,t|=0,n|=0,i|=0,R=o=R-16|0,f[o+12>>2]=e,f[o+8>>2]=t,f[o+4>>2]=n,f[o>>2]=i,Pt(e=Cr(768),f[o+12>>2],f[o+8>>2],f[o+4>>2],f[o>>2],0),R=o+16|0,0|e},a372_5:function(e,t,n,i,o){var r;return e|=0,t|=0,n|=0,i|=0,o|=0,R=r=R-32|0,f[r+28>>2]=e,f[r+24>>2]=t,f[r+20>>2]=n,f[r+16>>2]=i,a[r+15|0]=o,Pt(e=Cr(768),f[r+28>>2],f[r+24>>2],f[r+20>>2],f[r+16>>2],1&a[r+15|0]),R=r+32|0,0|e},a373_4:function(e,t,n,i,o){var a;e|=0,t=y(t),n=y(n),i=y(i),o=y(o),R=a=R-32|0,f[a+28>>2]=e,d[a+24>>2]=t,d[a+20>>2]=n,d[a+16>>2]=i,d[a+12>>2]=o,fo(f[a+28>>2],d[a+24>>2],d[a+20>>2],d[a+16>>2],d[a+12>>2],y(1)),R=a+32|0},a373_5:function(e,t,n,i,o,a){var r;e|=0,t=y(t),n=y(n),i=y(i),o=y(o),a=y(a),R=r=R-32|0,f[r+28>>2]=e,d[r+24>>2]=t,d[r+20>>2]=n,d[r+16>>2]=i,d[r+12>>2]=o,d[r+8>>2]=a,fo(f[r+28>>2],d[r+24>>2],d[r+20>>2],d[r+16>>2],d[r+12>>2],d[r+8>>2]),R=r+32|0},a374_3:function(e,t,n,i){var o;e|=0,t|=0,n=y(n),i=y(i),R=o=R-16|0,f[o+12>>2]=e,a[o+11|0]=t,d[o+4>>2]=n,d[o>>2]=i,function(e,t,n,i){var o;f[12+(o=R-16|0)>>2]=e,a[o+11|0]=t,d[o+4>>2]=n,d[o>>2]=i,e=f[o+12>>2],a[e+737|0]=1&a[o+11|0],d[e+680>>2]=d[o+4>>2],d[e+684>>2]=d[o>>2]}(f[o+12>>2],1&a[o+11|0],d[o+4>>2],d[o>>2]),R=o+16|0},a375_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,a[n+11|0]=t,t=1&a[n+11|0],f[12+(e=R-16|0)>>2]=f[n+12>>2],a[e+11|0]=t,a[f[e+12>>2]+736|0]=1&a[e+11|0],R=n+16|0},a376_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,a[n+11|0]=t,t=1&a[n+11|0],f[12+(e=R-16|0)>>2]=f[n+12>>2],a[e+11|0]=t,a[f[e+12>>2]+737|0]=1&a[e+11|0],R=n+16|0},a377_1:function(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]+684>>2]=d[e+8>>2],R=n+16|0},a378_2:function(e,t,n){var i;e|=0,t=y(t),n=y(n),R=i=R-16|0,f[i+12>>2]=e,d[i+8>>2]=t,d[i+4>>2]=n,function(e,t,n){var i;R=i=R-16|0,d[i+12>>2]=t,function(e,t){var n=y(0),i=y(0),o=y(0);if((i=d[e+4>>2])>y(0)&&(o=d[e>>2],(n=mn(y(d[t>>2]-o)))<y(-3.1415927410125732)?n=y(n+y(6.2831854820251465)):n>y(3.1415927410125732)&&(n=y(n+y(-6.2831854820251465))),!(n<y(-i)^1&&n<=i))){if(n>y(0))return(n=mn(y(i+o)))<y(-3.1415927410125732)?void(d[t>>2]=n+y(6.2831854820251465)):void(d[t>>2]=n>y(3.1415927410125732)^1?n:y(n+y(-6.2831854820251465)));(n=mn(y(o-i)))<y(-3.1415927410125732)?n=y(n+y(6.2831854820251465)):n>y(3.1415927410125732)&&(n=y(n+y(-6.2831854820251465))),d[t>>2]=n}}(e+688|0,i+12|0),d[e+680>>2]=y(d[i+12>>2]-tn(e,f[e+28>>2]+4|0,f[e+32>>2]+4|0))/n,R=i+16|0}(f[i+12>>2],d[i+8>>2],d[i+4>>2]),R=i+16|0},a379_2:function(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,function(e,t,n){var i=0;i=f[t+4>>2],f[e+552>>2]=f[t>>2],f[e+556>>2]=i,i=f[t+12>>2],f[e+560>>2]=f[t+8>>2],f[e+564>>2]=i,i=f[t+28>>2],f[e+576>>2]=f[t+24>>2],f[e+580>>2]=i,i=f[t+20>>2],f[e+568>>2]=f[t+16>>2],f[e+572>>2]=i,i=f[t+44>>2],f[e+592>>2]=f[t+40>>2],f[e+596>>2]=i,i=f[t+36>>2],f[e+584>>2]=f[t+32>>2],f[e+588>>2]=i,i=f[t+60>>2],f[e+608>>2]=f[t+56>>2],f[e+612>>2]=i,i=f[t+52>>2],f[e+600>>2]=f[t+48>>2],f[e+604>>2]=i,t=f[n+12>>2],f[e+624>>2]=f[n+8>>2],f[e+628>>2]=t,t=f[n+4>>2],f[e+616>>2]=f[n>>2],f[e+620>>2]=t,t=f[n+20>>2],f[e+632>>2]=f[n+16>>2],f[e+636>>2]=t,t=f[n+28>>2],f[e+640>>2]=f[n+24>>2],f[e+644>>2]=t,t=f[n+36>>2],f[e+648>>2]=f[n+32>>2],f[e+652>>2]=t,t=f[n+44>>2],f[e+656>>2]=f[n+40>>2],f[e+660>>2]=t,t=f[n+60>>2],f[e+672>>2]=f[n+56>>2],f[e+676>>2]=t,t=f[n+52>>2],f[e+664>>2]=f[n+48>>2],f[e+668>>2]=t,o[f[f[e>>2]+8>>2]](e)}(f[i+12>>2],f[i+8>>2],f[i+4>>2]),R=i+16|0},a380_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n,i=0,o=0,a=0,r=0,s=0,c=0,l=0,_=0,u=0,h=0,p=0;R=n=R-320|0,f[n+316>>2]=e,f[n+312>>2]=t,e=f[n+316>>2],t=n+296|0,f[12+(R-16|0)>>2]=t,o=n+280|0,f[12+(R-16|0)>>2]=o,we(f[n+312>>2],t,o),f[12+(a=R-16|0)>>2]=e+552,a=f[a+12>>2]+48|0,i=f[a+4>>2],f[(r=n+264|0)>>2]=f[a>>2],f[r+4>>2]=i,i=f[a+12>>2],f[r+8>>2]=f[a+8>>2],f[r+12>>2]=i,f[12+(a=R-16|0)>>2]=e+552,a=f[a+12>>2],f[12+(i=R-16|0)>>2]=t,i=f[i+12>>2],f[12+(c=R-16|0)>>2]=o,c=f[c+12>>2],f[12+(l=R-16|0)>>2]=f[n+312>>2],l=f[l+12>>2],f[12+(_=R-16|0)>>2]=t,_=f[_+12>>2]+4|0,f[12+(u=R-16|0)>>2]=o,u=f[u+12>>2]+4|0,f[12+(h=R-16|0)>>2]=f[n+312>>2],h=f[h+12>>2]+4|0,f[12+(s=R-16|0)>>2]=t,s=f[s+12>>2]+8|0,f[12+(p=R-16|0)>>2]=o,o=f[p+12>>2]+8|0,f[12+(p=R-16|0)>>2]=f[n+312>>2],Oi(a,i,c,l,_,u,h,s,o,f[p+12>>2]+8|0),f[12+(o=R-16|0)>>2]=f[e+28>>2],f[12+(a=R-16|0)>>2]=f[o+12>>2]+4,mi(o=n+248|0,f[a+12>>2],f[n+312>>2]),function(e,t,n){var i,o=0,a=0;R=i=R-96|0,f[i+92>>2]=t,f[i+88>>2]=n,Ni(i+72|0,f[i+92>>2],f[i+88>>2]),d[i+68>>2]=Ho(f[i+92>>2],f[i+88>>2]),+d[i+68>>2]<-.9999998807907104?(t=i+48|0,f[12+(R-16|0)>>2]=t,o=i+32|0,f[12+(R-16|0)>>2]=o,we(f[i+92>>2],t,o),f[12+(n=R-16|0)>>2]=t,n=f[n+12>>2],f[12+(o=R-16|0)>>2]=t,o=f[o+12>>2]+4|0,f[12+(a=R-16|0)>>2]=t,t=f[a+12>>2]+8|0,d[i+28>>2]=0,Go(e,n,o,t,i+28|0)):(d[12+(t=R-16|0)>>2]=y(y(1)+d[i+68>>2])*y(2),d[i+24>>2]=S(d[t+12>>2]),d[i+20>>2]=y(1)/d[i+24>>2],t=i+72|0,f[12+(n=R-16|0)>>2]=t,d[i+16>>2]=d[f[n+12>>2]>>2]*d[i+20>>2],f[12+(n=R-16|0)>>2]=t,d[i+12>>2]=d[f[n+12>>2]+4>>2]*d[i+20>>2],f[12+(n=R-16|0)>>2]=t,d[i+8>>2]=d[f[n+12>>2]+8>>2]*d[i+20>>2],d[i+4>>2]=d[i+24>>2]*y(.5),Go(e,i+16|0,i+12|0,i+8|0,i+4|0)),R=i+96|0}(i=n+232|0,f[n+312>>2],o),function(e,t,n){var i,o,a=0;R=i=R-48|0,f[i+44>>2]=t,f[i+40>>2]=n,function(e,t,n){var i,o=y(0),a=y(0);R=i=R-32|0,f[i+28>>2]=t,f[i+24>>2]=n,f[12+(t=R-16|0)>>2]=f[i+28>>2],o=d[f[t+12>>2]+12>>2],f[12+(t=R-16|0)>>2]=f[i+24>>2],o=y(o*d[f[t+12>>2]>>2]),f[12+(t=R-16|0)>>2]=f[i+28>>2],a=d[f[t+12>>2]+4>>2],f[12+(t=R-16|0)>>2]=f[i+24>>2],o=y(o+y(a*d[f[t+12>>2]+8>>2])),f[12+(t=R-16|0)>>2]=f[i+28>>2],a=d[f[t+12>>2]+8>>2],f[12+(t=R-16|0)>>2]=f[i+24>>2],d[i+20>>2]=o-y(a*d[f[t+12>>2]+4>>2]),f[12+(t=R-16|0)>>2]=f[i+28>>2],o=d[f[t+12>>2]+12>>2],f[12+(t=R-16|0)>>2]=f[i+24>>2],o=y(o*d[f[t+12>>2]+4>>2]),f[12+(t=R-16|0)>>2]=f[i+28>>2],a=d[f[t+12>>2]+8>>2],f[12+(t=R-16|0)>>2]=f[i+24>>2],o=y(o+y(a*d[f[t+12>>2]>>2])),f[12+(t=R-16|0)>>2]=f[i+28>>2],a=d[f[t+12>>2]>>2],f[12+(t=R-16|0)>>2]=f[i+24>>2],d[i+16>>2]=o-y(a*d[f[t+12>>2]+8>>2]),f[12+(t=R-16|0)>>2]=f[i+28>>2],o=d[f[t+12>>2]+12>>2],f[12+(t=R-16|0)>>2]=f[i+24>>2],o=y(o*d[f[t+12>>2]+8>>2]),f[12+(t=R-16|0)>>2]=f[i+28>>2],a=d[f[t+12>>2]>>2],f[12+(t=R-16|0)>>2]=f[i+24>>2],o=y(o+y(a*d[f[t+12>>2]+4>>2])),f[12+(t=R-16|0)>>2]=f[i+28>>2],a=d[f[t+12>>2]+4>>2],f[12+(t=R-16|0)>>2]=f[i+24>>2],d[i+12>>2]=o-y(a*d[f[t+12>>2]>>2]),f[12+(t=R-16|0)>>2]=f[i+28>>2],o=y(-d[f[t+12>>2]>>2]),f[12+(t=R-16|0)>>2]=f[i+24>>2],o=y(o*d[f[t+12>>2]>>2]),f[12+(t=R-16|0)>>2]=f[i+28>>2],a=d[f[t+12>>2]+4>>2],f[12+(t=R-16|0)>>2]=f[i+24>>2],o=y(o-y(a*d[f[t+12>>2]+4>>2])),f[12+(t=R-16|0)>>2]=f[i+28>>2],a=d[f[t+12>>2]+8>>2],f[12+(t=R-16|0)>>2]=f[i+24>>2],d[i+8>>2]=o-y(a*d[f[t+12>>2]+8>>2]),Go(e,i+20|0,i+16|0,i+12|0,i+8|0),R=i+32|0}(t=i+24|0,f[i+44>>2],f[i+40>>2]),function(e,t){var n;R=n=R-16|0,f[n+12>>2]=t,t=f[n+12>>2],d[n+8>>2]=-d[t>>2],d[n+4>>2]=-d[t+4>>2],d[n>>2]=-d[t+8>>2],Go(e,n+8|0,n+4|0,n,t+12|0),R=n+16|0}(n=i+8|0,f[i+44>>2]),function(e,t){var n,i=y(0),o=y(0);R=n=R-32|0,f[n+28>>2]=e,f[n+24>>2]=t,e=f[n+28>>2],i=d[e+12>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],i=y(y(i*d[f[t+12>>2]>>2])+y(d[e>>2]*d[f[n+24>>2]+12>>2])),o=d[e+4>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],i=y(i+y(o*d[f[t+12>>2]+8>>2])),o=d[e+8>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],d[n+20>>2]=i-y(o*d[f[t+12>>2]+4>>2]),i=d[e+12>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],i=y(y(i*d[f[t+12>>2]+4>>2])+y(d[e+4>>2]*d[f[n+24>>2]+12>>2])),o=d[e+8>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],i=y(i+y(o*d[f[t+12>>2]>>2])),o=d[e>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],d[n+16>>2]=i-y(o*d[f[t+12>>2]+8>>2]),i=d[e+12>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],i=y(y(i*d[f[t+12>>2]+8>>2])+y(d[e+8>>2]*d[f[n+24>>2]+12>>2])),o=d[e>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],i=y(i+y(o*d[f[t+12>>2]+4>>2])),o=d[e+4>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],d[n+12>>2]=i-y(o*d[f[t+12>>2]>>2]),i=y(d[e+12>>2]*d[f[n+24>>2]+12>>2]),o=d[e>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],i=y(i-y(o*d[f[t+12>>2]>>2])),o=d[e+4>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],i=y(i-y(o*d[f[t+12>>2]+4>>2])),o=d[e+8>>2],f[12+(t=R-16|0)>>2]=f[n+24>>2],d[n+8>>2]=i-y(o*d[f[t+12>>2]+8>>2]),oo(e,n+20|0,n+16|0,n+12|0,n+8|0),R=n+32|0}(t,n),f[12+(n=R-16|0)>>2]=t,n=f[n+12>>2],f[12+(a=R-16|0)>>2]=t,a=f[a+12>>2]+4|0,f[12+(o=R-16|0)>>2]=t,Lo(e,n,a,f[o+12>>2]+8|0),R=i+48|0}(a=n+216|0,i,t),Ni(t=n+200|0,o,a),f[12+(i=R-16|0)>>2]=f[e+32>>2],pa(c=n+120|0,f[i+12>>2]+4|0),f[12+(i=R-16|0)>>2]=f[e+28>>2],wi(l=n+104|0,f[i+12>>2]+4|0,r),wi(n+184|0,c,l),f[12+(r=R-16|0)>>2]=e+616,i=f[n+188>>2],r=f[r+12>>2]+48|0,f[r>>2]=f[n+184>>2],f[r+4>>2]=i,i=f[n+196>>2],f[r+8>>2]=f[n+192>>2],f[r+12>>2]=i,f[12+(r=R-16|0)>>2]=e+616,r=f[r+12>>2],f[12+(i=R-16|0)>>2]=a,i=f[i+12>>2],f[12+(c=R-16|0)>>2]=t,c=f[c+12>>2],f[12+(l=R-16|0)>>2]=o,l=f[l+12>>2],f[12+(_=R-16|0)>>2]=a,_=f[_+12>>2]+4|0,f[12+(u=R-16|0)>>2]=t,u=f[u+12>>2]+4|0,f[12+(h=R-16|0)>>2]=o,h=f[h+12>>2]+4|0,f[12+(s=R-16|0)>>2]=a,a=f[s+12>>2]+8|0,f[12+(s=R-16|0)>>2]=t,t=f[s+12>>2]+8|0,f[12+(s=R-16|0)>>2]=o,Oi(r,i,c,l,_,u,h,a,t,f[s+12>>2]+8|0),f[12+(t=R-16|0)>>2]=f[e+32>>2],f[12+(o=R-16|0)>>2]=f[t+12>>2]+4,function(e,t){var n,i,o=0;R=n=R-80|0,f[n+76>>2]=e,f[n+72>>2]=t,t=f[n+72>>2],d[n+52>>2]=ti(t,1,1,2,2),d[n+48>>2]=ti(t,1,2,2,0),d[n+44>>2]=ti(t,1,0,2,1),Lo(i=n+56|0,n+52|0,n+48|0,n+44|0),f[12+(o=R-16|0)>>2]=t,f[o+8>>2]=0,d[n+40>>2]=Ho(f[o+12>>2]+(f[o+8>>2]<<4)|0,i),d[n+36>>2]=y(1)/d[n+40>>2],f[12+(o=R-16|0)>>2]=i,d[n+32>>2]=d[f[o+12>>2]>>2]*d[n+36>>2],d[n+28>>2]=ti(t,0,2,2,1)*d[n+36>>2],d[n+24>>2]=ti(t,0,1,1,2)*d[n+36>>2],f[12+(o=R-16|0)>>2]=i,d[n+20>>2]=d[f[o+12>>2]+4>>2]*d[n+36>>2],d[n+16>>2]=ti(t,0,0,2,2)*d[n+36>>2],d[n+12>>2]=ti(t,0,2,1,0)*d[n+36>>2],f[12+(o=R-16|0)>>2]=i,d[n+8>>2]=d[f[o+12>>2]+8>>2]*d[n+36>>2],d[n+4>>2]=ti(t,0,1,2,0)*d[n+36>>2],d[n>>2]=ti(t,0,0,1,1)*d[n+36>>2],ui(e,n+32|0,n+28|0,n+24|0,n+20|0,n+16|0,n+12|0,n+8|0,n+4|0,n),R=n+80|0}(t=n+8|0,f[o+12>>2]),f[12+(o=R-16|0)>>2]=e+616,Ot(r=n+56|0,t,f[o+12>>2]),f[12+(t=R-16|0)>>2]=e+616,di(f[t+12>>2],r),R=n+320|0}(f[n+12>>2],f[n+8>>2]),R=n+16|0},a381_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,a[n+11|0]=t,t=1&a[n+11|0],f[12+(e=R-16|0)>>2]=f[n+12>>2],a[e+11|0]=t,a[f[e+12>>2]+740|0]=1&a[e+11|0],R=n+16|0},a382_1:Wo,a383_0:or,a384_1:Qo,a385_2:zo,a386_3:Po,a387_0:Hr,a388_4:function(e,t,n,i){var o,a;return e=y(e),t=y(t),n=y(n),i=y(i),R=o=R-16|0,d[o+12>>2]=e,d[o+8>>2]=t,d[o+4>>2]=n,d[o>>2]=i,Go(a=yr(16),o+12|0,o+8|0,o+4|0,o),R=o+16|0,0|a},a389_4:function(e,t,n,i,o){var a;e|=0,t=y(t),n=y(n),i=y(i),o=y(o),R=a=R-32|0,f[a+28>>2]=e,d[a+24>>2]=t,d[a+20>>2]=n,d[a+16>>2]=i,d[a+12>>2]=o,oo(f[a+28>>2],a+24|0,a+20|0,a+16|0,a+12|0),R=a+32|0},a390_0:mr,a391_0:rr,a392_0:sr,a393_0:ar,a394_1:oa,a395_1:ea,a396_1:ta,a397_1:Ko,a398_0:_s,a399_2:function(e,t){var n,i;return e=y(e),t=y(t),R=n=R-16|0,d[n+12>>2]=e,d[n+8>>2]=t,function(e,t,n){Fo(e),d[e+64>>2]=n,d[e+60>>2]=t,f[e>>2]=11188,f[e+76>>2]=2,f[e+68>>2]=0,f[e+72>>2]=1,f[e+4>>2]=11,d[e+40>>2]=t,d[e+36>>2]=n,d[e+32>>2]=t,d[e+56>>2]=t/y(S(y(y(t*t)+y(n*n))))}(i=Cr(80),d[n+12>>2],d[n+8>>2]),R=n+16|0,0|i},a400_1:function(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]+60>>2]=d[e+8>>2],R=n+16|0},a401_1:function(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]+64>>2]=d[e+8>>2],R=n+16|0},a402_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n,i=0,o=0;e:{t:{n:{i:{if(t>>>0<=2)switch(t-1|0){case 1:break t;case 0:break n;default:break i}i=f[e+72>>2],o=f[e+68>>2],t=f[e+76>>2];break e}f[e+68>>2]=1,f[e+72>>2]=0,f[e+76>>2]=2,o=1,t=2;break e}f[e+68>>2]=0,f[e+72>>2]=1,f[e+76>>2]=2,i=1,t=2;break e}f[e+68>>2]=0,f[e+72>>2]=2,f[e+76>>2]=1,i=2,t=1}f[(n=e+32|0)+(o<<2)>>2]=f[e+60>>2],f[(i<<2)+n>>2]=f[e+64>>2],f[(t<<2)+n>>2]=f[e+60>>2]}(f[n+12>>2],f[n+8>>2]),R=n+16|0},a403_1:Xa,a404_0:Tr,a405_2:ha,a406_0:is,a407_0:pr,a408_1:na,a409_0:gr,a410_1:ia,a411_3:Oo,a412_0:Qr,a413_0:br,a414_0:Hr,a415_0:function(){var e;return Yi(e=Cr(164)),f[e+96>>2]=0,f[e>>2]=10820,f[e+4>>2]=2,0|e},a416_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n=0,i=0;n=f[e+96>>2],f[e+96>>2]=n+1,i=f[t+12>>2],f[108+(n=(n<<4)+e|0)>>2]=f[t+8>>2],f[n+112>>2]=i,i=f[t+4>>2],f[n+100>>2]=f[t>>2],f[n+104>>2]=i,Mn(e)}(f[n+12>>2],f[n+8>>2]),R=n+16|0},a417_1:Xa,a418_0:Tr,a419_2:ha,a420_0:is,a421_0:pr,a422_1:na,a423_0:gr,a424_1:ia,a425_3:Oo,a426_0:Qr,a427_0:Hr,a428_2:function(e,t){var n;return e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,function(e,t,n){var i=y(0),o=y(0),a=y(0);f[e+4>>2]=35,f[e+8>>2]=0,f[e+12>>2]=-1,f[e+16>>2]=0,f[e>>2]=13904,f[e>>2]=12484,i=d[t+8>>2],o=d[t>>2],a=d[t+4>>2],t=f[t+12>>2],f[e+80>>2]=1065353216,f[e+84>>2]=0,f[e+72>>2]=1065353216,f[e+76>>2]=1065353216,d[e+68>>2]=n,f[e- -64>>2]=t,f[e+4>>2]=28,n=y(y(1)/y(S(y(y(y(o*o)+y(a*a))+y(i*i))))),d[e+60>>2]=i*n,d[e+56>>2]=a*n,d[e+52>>2]=o*n}(e=Cr(88),f[n+12>>2],d[n+8>>2]),R=n+16|0,0|e},a429_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+52|0},a430_1:function(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]+68>>2]=d[e+8>>2],R=n+16|0},a431_1:Xa,a432_0:Tr,a433_2:ha,a434_0:is,a435_0:pr,a436_1:na,a437_0:gr,a438_1:ia,a439_3:Oo,a440_0:Qr,a441_0:Hr,a442_2:function(e,t,n){var i;e|=0,t|=0,n=y(n),R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,d[i+4>>2]=n,e=f[i+12>>2],o[f[f[e>>2]+8>>2]](e,f[i+8>>2],d[i+4>>2]),R=i+16|0},a443_0:Hr,a444_0:Hr,a445_0:function(){var e;return e=Cr(16),f[12+(R-16|0)>>2]=e,0|e},a445_3:function(e,t,n){var i,o;return e=y(e),t=y(t),n=y(n),R=i=R-16|0,d[i+12>>2]=e,d[i+8>>2]=t,d[i+4>>2]=n,Lo(o=Cr(16),i+12|0,i+8|0,i+4|0),R=i+16|0,0|o},a446_0:mr,a447_0:rr,a448_0:sr,a449_1:oa,a450_1:ea,a451_1:ta,a452_3:function(e,t,n,i){var o;e|=0,t=y(t),n=y(n),i=y(i),R=o=R-16|0,f[o+12>>2]=e,d[o+8>>2]=t,d[o+4>>2]=n,d[o>>2]=i,Lo(f[o+12>>2],o+8|0,o+4|0,o),R=o+16|0},a453_0:ss,a454_1:function(e){var t,n;return e=y(e),R=t=R-16|0,d[t+12>>2]=e,zi(n=Cr(56),d[t+12>>2]),R=t+16|0,0|n},a455_1:qa,a456_0:lr,a457_1:function(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,function(e,t){var n,i;R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],e=R-16|0,i=f[n+12>>2],f[e+12>>2]=i+32,d[e+8>>2]=t,d[f[e+12>>2]>>2]=d[e+8>>2],t=d[n+8>>2],f[12+(e=R-16|0)>>2]=i,d[e+8>>2]=t,d[f[e+12>>2]+48>>2]=d[e+8>>2],R=n+16|0}(f[n+12>>2],d[n+8>>2]),R=n+16|0},a458_1:Xa,a459_0:Tr,a460_2:ha,a461_0:is,a462_0:pr,a463_1:na,a464_0:gr,a465_1:ia,a466_3:Oo,a467_0:Qr,a468_0:br,a469_0:Hr,a470_0:function(){var e;return Na(e=yr(24)),0|e},a471_0:_s,a472_0:function(){var e;return e=Cr(36),f[e+4>>2]=35,f[e+8>>2]=0,f[e+12>>2]=-1,f[e+16>>2]=0,f[e>>2]=13904,f[e+4>>2]=27,f[e>>2]=12988,0|e},a473_1:Xa,a474_0:Tr,a475_2:ha,a476_0:is,a477_0:pr,a478_1:na,a479_0:gr,a480_1:ia,a481_3:Oo,a482_0:Qr,a483_0:Hr,a484_0:function(){var e,t=0;return e=yr(12),f[12+(t=R-16|0)>>2]=e,t=f[t+12>>2],d[t>>2]=.30000001192092896,d[t+4>>2]=1,d[t+8>>2]=0,0|e},a485_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,y(d[f[t+12>>2]>>2])},a486_1:function(e,t){var n;e|=0,t=y(t),f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,d[f[n+12>>2]>>2]=d[n+8>>2]},a487_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,y(d[f[t+12>>2]+4>>2])},a488_1:function(e,t){var n;e|=0,t=y(t),f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,d[f[n+12>>2]+4>>2]=d[n+8>>2]},a489_0:function(e){var t;return e|=0,f[12+(t=R-16|0)>>2]=e,y(d[f[t+12>>2]+8>>2])},a490_1:function(e,t){var n;e|=0,t=y(t),f[12+(n=R-16|0)>>2]=e,d[n+8>>2]=t,d[f[n+12>>2]+8>>2]=d[n+8>>2]},a491_0:_s,a492_0:ys,a493_1:Zr,a494_0:vs,a495_1:Xr,a496_0:_s,a497_0:vr,a498_1:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,R=n+16|0,f[f[e+12>>2]+12>>2]+(f[e+8>>2]<<4)|0},a499_0:ms,a500_0:ts,a501_0:Hr,a502_4:function(e,t,n,i){var o;return e|=0,t|=0,n|=0,i|=0,R=o=R-16|0,f[o+12>>2]=e,f[o+8>>2]=t,f[o+4>>2]=n,f[o>>2]=i,function(e,t,n,i,o){!function(e,t,n,i,o){yo(e,12,t,n),f[e>>2]=3248,t=f[i+12>>2],f[e+56>>2]=f[i+8>>2],f[e+60>>2]=t,t=f[i+4>>2],f[e+48>>2]=f[i>>2],f[e+52>>2]=t,t=f[i+28>>2],f[e+72>>2]=f[i+24>>2],f[e+76>>2]=t,n=f[i+20>>2],f[(t=e- -64|0)>>2]=f[i+16>>2],f[t+4>>2]=n,t=f[i+44>>2],f[e+88>>2]=f[i+40>>2],f[e+92>>2]=t,t=f[i+36>>2],f[e+80>>2]=f[i+32>>2],f[e+84>>2]=t,t=f[i+60>>2],f[e+104>>2]=f[i+56>>2],f[e+108>>2]=t,t=f[i+52>>2],f[e+96>>2]=f[i+48>>2],f[e+100>>2]=t,t=f[o+12>>2],f[e+120>>2]=f[o+8>>2],f[e+124>>2]=t,t=f[o+4>>2],f[e+112>>2]=f[o>>2],f[e+116>>2]=t,t=f[o+20>>2],f[e+128>>2]=f[o+16>>2],f[e+132>>2]=t,t=f[o+28>>2],f[e+136>>2]=f[o+24>>2],f[e+140>>2]=t,t=f[o+36>>2],f[e+144>>2]=f[o+32>>2],f[e+148>>2]=t,t=f[o+44>>2],f[e+152>>2]=f[o+40>>2],f[e+156>>2]=t,t=f[o+52>>2],f[e+160>>2]=f[o+48>>2],f[e+164>>2]=t,t=f[o+60>>2],f[e+168>>2]=f[o+56>>2],f[e+172>>2]=t,f[e+680>>2]=0,f[e+684>>2]=0,f[e+688>>2]=0,f[e+692>>2]=0,f[e+696>>2]=0,f[e+700>>2]=0,f[e+704>>2]=0,f[e+708>>2]=0,f[e+712>>2]=0,f[e+716>>2]=0,f[e+720>>2]=0,f[e+724>>2]=0,f[e+736>>2]=1045220557,f[e+728>>2]=1045220557,f[e+732>>2]=1045220557,f[e+756>>2]=0,f[e+748>>2]=0,f[e+752>>2]=0,f[e+740>>2]=0,f[e+744>>2]=0,f[e+768>>2]=1063675494,f[e+760>>2]=1063675494,f[e+764>>2]=1063675494,f[e+812>>2]=0,f[e+804>>2]=0,f[e+808>>2]=0,f[e+828>>2]=0,f[e+820>>2]=0,f[e+824>>2]=0,a[e+838|0]=0,a[e+836|0]=0,a[e+837|0]=0,f[e+848>>2]=0,f[e+840>>2]=0,f[e+844>>2]=0,a[e+858|0]=0,a[e+856|0]=0,a[e+857|0]=0,f[e+868>>2]=0,f[e+860>>2]=0,f[e+864>>2]=0,f[e+884>>2]=0,f[e+876>>2]=0,f[e+880>>2]=0,f[e+900>>2]=0,f[e+892>>2]=0,f[e+896>>2]=0,a[e+793|0]=0,a[e+794|0]=0,a[e+795|0]=0,a[e+796|0]=0,a[e+797|0]=0,a[e+798|0]=0,a[e+799|0]=0,a[e+800|0]=0,f[e+788>>2]=0,f[e+792>>2]=0,f[e+780>>2]=0,f[e+784>>2]=0,f[e+772>>2]=0,f[e+776>>2]=0,f[e+964>>2]=0,f[e+956>>2]=0,f[e+960>>2]=0,f[e+948>>2]=0,f[e+952>>2]=0,f[e+940>>2]=0,f[e+944>>2]=0,f[e+932>>2]=0,f[e+936>>2]=0,f[e+924>>2]=0,f[e+928>>2]=0,f[e+916>>2]=0,f[e+920>>2]=0,f[e+908>>2]=0,f[e+912>>2]=0,a[e+1032|0]=0,f[e+1028>>2]=0,a[e+1024|0]=0,f[e+1020>>2]=0,a[e+1016|0]=0,f[e+1012>>2]=0,a[e+1008|0]=0,f[e+1e3>>2]=0,f[e+1004>>2]=1036831949,a[e+996|0]=0,f[e+992>>2]=0,f[e+984>>2]=0,f[e+988>>2]=1063675494,f[e+976>>2]=0,f[e+980>>2]=1045220557,f[e+968>>2]=1065353216,f[e+972>>2]=-1082130432,f[e+1052>>2]=0,f[(t=e+1044|0)>>2]=0,f[t+4>>2]=0,f[(t=e+1036|0)>>2]=0,f[t+4>>2]=0,a[e+1120|0]=0,f[e+1116>>2]=0,a[e+1112|0]=0,f[e+1108>>2]=0,a[e+1104|0]=0,f[e+1100>>2]=0,a[e+1096|0]=0,f[(t=e+1088|0)>>2]=0,f[t+4>>2]=1036831949,a[e+1084|0]=0,f[e+1080>>2]=0,f[(t=e+1072|0)>>2]=0,f[t+4>>2]=1063675494,f[(t=e+1064|0)>>2]=0,f[t+4>>2]=1045220557,f[(t=e+1056|0)>>2]=1065353216,f[t+4>>2]=-1082130432,f[e+1140>>2]=0,f[(t=e+1132|0)>>2]=0,f[t+4>>2]=0,f[(t=e+1124|0)>>2]=0,f[t+4>>2]=0,a[e+1208|0]=0,f[e+1204>>2]=0,a[e+1200|0]=0,f[e+1196>>2]=0,a[e+1192|0]=0,f[e+1188>>2]=0,a[e+1184|0]=0,f[(t=e+1176|0)>>2]=0,f[t+4>>2]=1036831949,a[e+1172|0]=0,f[e+1168>>2]=0,f[(t=e+1160|0)>>2]=0,f[t+4>>2]=1063675494,f[(t=e+1152|0)>>2]=0,f[t+4>>2]=1045220557,f[(t=e+1144|0)>>2]=1065353216,f[t+4>>2]=-1082130432,f[e+1228>>2]=0,f[(t=e+1220|0)>>2]=0,f[t+4>>2]=0,f[(t=e+1212|0)>>2]=0,f[t+4>>2]=0,f[e+1456>>2]=0,f[e+1232>>2]=0,Ie(e,f[e+28>>2]+4|0,f[e+32>>2]+4|0)}(e,t,n,i,o),f[e>>2]=3128,f[(t=e+1144|0)>>2]=0,f[t+4>>2]=0,f[(t=e+1056|0)>>2]=0,f[t+4>>2]=0,f[e+968>>2]=0,f[e+972>>2]=0,f[e+680>>2]=0,f[e+684>>2]=0,f[e+688>>2]=0,f[e+692>>2]=0,f[e+696>>2]=0,f[e+700>>2]=0,f[e+704>>2]=0,f[e+708>>2]=0}(e=Cr(1460),f[o+12>>2],f[o+8>>2],f[o+4>>2],f[o>>2]),R=o+16|0,0|e},a503_1:Wo,a504_0:or,a505_1:Qo,a506_2:zo,a507_3:Po,a508_0:Hr,a509_1:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,function(e,t){St(e),a[e+560|0]=1,f[e>>2]=2244,f[e+556>>2]=0,f[e+548>>2]=0,f[e+552>>2]=0,_e(e,t)}(e=Cr(676),f[t+12>>2]),R=t+16|0,0|e},a510_0:Sr,a511_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,at(f[n+12>>2],f[n+8>>2]),R=n+16|0},a512_2:function(e,t,n){var i;e|=0,t=y(t),n=y(n),R=i=R-16|0,f[i+12>>2]=e,d[i+8>>2]=t,d[i+4>>2]=n,function(e,t,n){var i;f[12+(i=R-16|0)>>2]=e,d[i+8>>2]=t,d[i+4>>2]=n,e=f[i+12>>2],d[e+532>>2]=d[i+8>>2],d[e+536>>2]=d[i+4>>2]}(f[i+12>>2],d[i+8>>2],d[i+4>>2]),R=i+16|0},a513_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,y(d[f[e+12>>2]+532>>2])},a514_2:function(e,t,n){var i;e|=0,t=y(t),n=y(n),R=i=R-16|0,f[i+12>>2]=e,d[i+8>>2]=t,d[i+4>>2]=n,function(e,t,n){var i;d[8+(i=R-16|0)>>2]=n,d[i+12>>2]=t,f[i+4>>2]=0,f[i>>2]=1065353216,f[e+504>>2]=f[(t<y(0)?i+4|0:t>y(1)?i:i+12|0)>>2],f[i+4>>2]=0,f[i>>2]=1065353216,f[e+508>>2]=f[(n<y(0)?i+4|0:n>y(1)?i:i+8|0)>>2]}(f[i+12>>2],d[i+8>>2],d[i+4>>2]),R=i+16|0},a515_2:function(e,t,n){var i;e|=0,t=y(t),n|=0,R=i=R-16|0,f[i+12>>2]=e,d[i+8>>2]=t,f[i+4>>2]=n,Zn(f[i+12>>2],d[i+8>>2],f[i+4>>2]),R=i+16|0},a516_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+408|0},a517_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n,i=0;R=n=R-32|0,f[n+28>>2]=e,f[n+24>>2]=t,e=f[n+24>>2],i=f[e+4>>2],t=f[n+28>>2],f[t+408>>2]=f[e>>2],f[t+412>>2]=i,i=f[e+12>>2],f[t+416>>2]=f[e+8>>2],f[t+420>>2]=i,Ji(e=n+8|0,t+408|0,t+404|0),i=f[e+4>>2],f[t+620>>2]=f[e>>2],f[t+624>>2]=i,i=f[e+12>>2],f[t+628>>2]=f[e+8>>2],f[t+632>>2]=i,R=n+32|0}(f[n+12>>2],f[n+8>>2]),R=n+16|0},a518_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,Ba(f[n+12>>2],f[n+8>>2]),R=n+16|0},a519_2:function(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,function(e,t,n){var i;R=i=R-48|0,f[i+44>>2]=e,f[i+40>>2]=t,f[i+36>>2]=n,Ua(e=f[i+44>>2],f[i+40>>2]),t=f[i+36>>2],Ki(i,f[i+40>>2],e+408|0),Ni(n=i+16|0,t,i),Ba(e,n),R=i+48|0}(f[i+12>>2],f[i+8>>2],f[i+4>>2]),R=i+16|0},a520_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,Ua(f[n+12>>2],f[n+8>>2]),R=n+16|0},a521_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,fa(f[n+12>>2],f[n+8>>2]),R=n+16|0},a522_2:function(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,qi(f[i+12>>2],f[i+8>>2],f[i+4>>2]),R=i+16|0},a523_0:function(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,fn(f[t+12>>2]),R=t+16|0},a524_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+372|0},a525_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+388|0},a526_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],f[e+304>>2]=f[e+304>>2]+1,t=f[n+8>>2],n=f[t+4>>2],f[e+372>>2]=f[t>>2],f[e+376>>2]=n,n=f[t+12>>2],f[e+380>>2]=f[t+8>>2],f[e+384>>2]=n}(f[n+12>>2],f[n+8>>2]),R=n+16|0},a527_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],f[e+304>>2]=f[e+304>>2]+1,t=f[n+8>>2],n=f[t+4>>2],f[e+388>>2]=f[t>>2],f[e+392>>2]=n,n=f[t+12>>2],f[e+396>>2]=f[t+8>>2],f[e+400>>2]=n}(f[n+12>>2],f[n+8>>2]),R=n+16|0},a528_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+540>>2]},a529_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+604|0},a530_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n=0;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],f[e+304>>2]=f[e+304>>2]+1,t=f[n+8>>2],n=f[t+4>>2],f[e+604>>2]=f[t>>2],f[e+608>>2]=n,n=f[t+12>>2],f[e+612>>2]=f[t+8>>2],f[e+616>>2]=n}(f[n+12>>2],f[n+8>>2]),R=n+16|0},a531_2:function(e,t,n){var i;e|=0,t|=0,n|=0,R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,e=f[i+12>>2],t=f[e+192>>2],o[f[f[t>>2]+8>>2]](t,e+4|0,f[i+8>>2],f[i+4>>2]),R=i+16|0},a532_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,Fi(f[n+12>>2],f[n+8>>2]),R=n+16|0},a533_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[f[e+12>>2]+564>>2]},a534_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,f[f[e+12>>2]+564>>2]=f[e+8>>2],R=n+16|0},a535_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,e=1&function(e){var t,n=0;return R=t=R-16|0,f[t+8>>2]=e,n=R-16|0,e=f[t+8>>2],f[n+12>>2]=e,4!=f[f[n+12>>2]+220>>2]?d[4961]==y(0)||1&a[20820]?a[t+15|0]=0:(f[12+(n=R-16|0)>>2]=e,2!=f[f[n+12>>2]+220>>2]&&(f[12+(n=R-16|0)>>2]=e,3!=f[f[n+12>>2]+220>>2])?d[e+224>>2]>d[4961]?a[t+15|0]=1:a[t+15|0]=0:a[t+15|0]=1):a[t+15|0]=0,R=t+16|0,1&a[t+15|0]}(f[t+12>>2]),R=t+16|0,0|e},a536_0:function(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,function(e){var t;R=t=R-32|0,f[t+28>>2]=e,e=f[t+28>>2],d[t+24>>2]=0,d[t+20>>2]=0,d[t+16>>2]=0,Lo(e+472|0,t+24|0,t+20|0,t+16|0),d[t+12>>2]=0,d[t+8>>2]=0,d[t+4>>2]=0,Lo(e+488|0,t+12|0,t+8|0,t+4|0),R=t+32|0}(f[t+12>>2]),R=t+16|0},a537_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+472|0},a538_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+488|0},a539_0:function(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,function(e){var t;R=t=R+-64|0,f[t+60>>2]=e,e=f[t+60>>2],d[t+56>>2]=0,d[t+52>>2]=0,d[t+48>>2]=0,Lo(e+372|0,t+56|0,t+52|0,t+48|0),d[t+44>>2]=0,d[t+40>>2]=0,d[t+36>>2]=0,Lo(e+388|0,t+44|0,t+40|0,t+36|0),d[t+32>>2]=0,d[t+28>>2]=0,d[t+24>>2]=0,Lo(e+472|0,t+32|0,t+28|0,t+24|0),d[t+20>>2]=0,d[t+16>>2]=0,d[t+12>>2]=0,Lo(e+488|0,t+20|0,t+16|0,t+12|0),R=t- -64|0}(f[t+12>>2]),R=t+16|0},a540_0:_r,a541_0:ur,a542_1:Ca,a543_1:wr,a544_0:ps,a544_1:Nr,a545_0:os,a546_0:Ga,a547_0:Va,a548_0:Ha,a549_1:Lr,a550_1:Fr,a551_1:Ur,a552_1:Or,a553_0:Sr,a554_0:hr,a555_1:Xo,a556_1:kr,a557_1:nr,a558_1:qo,a559_1:Yo,a560_0:fr,a561_1:Zo,a562_1:Jo,a563_2:Ra,a564_0:Hr,a565_0:vr,a566_1:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,R=n+16|0,f[f[e+12>>2]+12>>2]+(f[e+8>>2]<<5)|0},a567_0:ts,a568_4:function(e,t,n,i){var a;return e|=0,t|=0,n|=0,i|=0,R=a=R-16|0,f[a+12>>2]=e,f[a+8>>2]=t,f[a+4>>2]=n,f[a>>2]=i,e=Cr(372),o[2](e,f[a+12>>2],f[a+8>>2],f[a+4>>2],f[a>>2]),R=a+16|0,0|e},a569_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,a[n+11|0]=t,t=1&a[n+11|0],f[12+(e=R-16|0)>>2]=f[n+12>>2],a[e+11|0]=t,a[20820]=1&(-1^h[e+11|0]),R=n+16|0},a570_1:function(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[4961]=d[e+8>>2],R=n+16|0},a571_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,t=f[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],f[e+8>>2]=t,a[f[e+12>>2]+52|0]=1==f[e+8>>2],R=n+16|0},a572_1:function(e,t){var n;e|=0,t=y(t),R=n=R-16|0,f[n+12>>2]=e,d[n+8>>2]=t,t=d[n+8>>2],f[12+(e=R-16|0)>>2]=f[n+12>>2],d[e+8>>2]=t,d[f[e+12>>2]+56>>2]=d[e+8>>2],R=n+16|0},a573_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,a[n+11|0]=t,t=1&a[n+11|0],f[12+(e=R-16|0)>>2]=f[n+12>>2],a[e+11|0]=t,a[f[e+12>>2]+368|0]=1&a[e+11|0],R=n+16|0},a574_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+348|0},a575_3:No,a576_6:Hi,a577_1:za,a577_2:ua,a577_3:Mo,a578_1:$a,a579_1:Fa,a580_1:Ka,a581_0:function(e){var t;return e|=0,R=t=R-32|0,f[t+28>>2]=e,1&a[19928]||Mr(19928)&&(f[12+(R-16|0)>>2]=19912,Kr(19928)),e=f[t+28>>2],o[f[f[e>>2]+76>>2]](t+8|0,e),e=f[t+12>>2],f[4978]=f[t+8>>2],f[4979]=e,e=f[t+20>>2],f[4980]=f[t+16>>2],f[4981]=e,R=t+32|0,19912},a582_1:Za,a582_3:Do,a583_1:Ja,a584_1:ja,a584_2:ma,a585_1:er,a586_1:$o,a586_2:vo,a586_3:ho,a587_1:tr,a588_1:Qa,a589_0:hs,a590_0:Hr,a591_0:function(){var e;return Yr(e=yr(64)),0|e},a591_2:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t,n){var i;R=i=R-16|0,f[i+12>>2]=e,f[i+8>>2]=t,f[i+4>>2]=n,function(e,t){var n,i;for(R=n=R-16|0,f[n+8>>2]=e,f[n+4>>2]=t,e=f[n+8>>2],f[n+12>>2]=e,i=e+48|0,t=e;f[12+(R-16|0)>>2]=t,(0|i)!=(0|(t=t+16|0)););st(e,f[n+4>>2]),R=n+16|0}(e=f[i+12>>2],f[i+8>>2]),t=f[i+4>>2],n=f[t+4>>2],f[e+48>>2]=f[t>>2],f[e+52>>2]=n,n=f[t+12>>2],f[e+56>>2]=f[t+8>>2],f[e+60>>2]=n,R=i+16|0}(e=yr(64),f[n+12>>2],f[n+8>>2]),R=n+16|0,0|e},a592_0:function(e){var t;e|=0,R=t=R-16|0,f[t+12>>2]=e,Da(f[t+12>>2]),R=t+16|0},a593_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,Io(f[n+12>>2],f[n+8>>2]),R=n+16|0},a594_1:function(e,t){var n;e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,function(e,t){var n;R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,st(f[n+12>>2],f[n+8>>2]),R=n+16|0}(f[n+12>>2],f[n+8>>2]),R=n+16|0},a595_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]+48|0},a596_0:function(e){e|=0;var t,n=0;return R=t=R-32|0,f[t+28>>2]=e,1&a[19948]||Mr(19948)&&(Gr(19932),Kr(19948)),function(e,t){var n;R=n=R-16|0,f[n+12>>2]=t,t=f[n+12>>2],Gr(e),Re(t,e),R=n+16|0}(e=t+8|0,f[t+28>>2]),n=f[e+4>>2],f[4983]=f[e>>2],f[4984]=n,n=f[e+12>>2],f[4985]=f[e+8>>2],f[4986]=n,R=t+32|0,19932},a597_0:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,f[12+(e=R-16|0)>>2]=f[t+12>>2],R=t+16|0,f[e+12>>2]},a598_0:function(e){var t;return e|=0,R=t=R-80|0,f[t+76>>2]=e,1&a[20016]||Mr(20016)&&(Yr(19952),Kr(20016)),pa(e=t+8|0,f[t+76>>2]),lo(19952,e),R=t+80|0,19952},a599_1:function(e,t){var n;return e|=0,t|=0,R=n=R-16|0,f[n+12>>2]=e,f[n+8>>2]=t,e=function(e,t){var n;return R=n=R-32|0,f[n+28>>2]=e,f[n+24>>2]=t,mi(t=n+8|0,e=f[n+28>>2],f[n+24>>2]+48|0),ko(e+48|0,t),function(e,t){var n;R=n=R-48|0,f[n+44>>2]=e,f[n+40>>2]=t,e=f[n+44>>2],d[n+36>>2]=_i(f[n+40>>2],e),d[n+32>>2]=ri(f[n+40>>2],e),d[n+28>>2]=si(f[n+40>>2],e),d[n+24>>2]=_i(f[n+40>>2],e+16|0),d[n+20>>2]=ri(f[n+40>>2],e+16|0),d[n+16>>2]=si(f[n+40>>2],e+16|0),d[n+12>>2]=_i(f[n+40>>2],e+32|0),d[n+8>>2]=ri(f[n+40>>2],e+32|0),d[n+4>>2]=si(f[n+40>>2],e+32|0),Oi(e,n+36|0,n+32|0,n+28|0,n+24|0,n+20|0,n+16|0,n+12|0,n+8|0,n+4|0),R=n+48|0}(e,f[n+24>>2]),R=n+32|0,e}(f[n+12>>2],f[n+8>>2]),R=n+16|0,0|e},a600_0:_s,a601_1:function(e){var t;return e|=0,R=t=R-16|0,f[t+12>>2]=e,function(e,t){var n=y(0),i=y(0),o=y(0),a=y(0);Fo(e),f[e+56>>2]=1,f[e>>2]=14808,n=d[t>>2],o=d[t+4>>2],i=d[t+8>>2],f[e+44>>2]=0,a=y(i*d[e+24>>2]),i=d[e+48>>2],d[e+40>>2]=a-i,d[e+36>>2]=y(o*d[e+20>>2])-i,d[e+32>>2]=y(n*d[e+16>>2])-i,n=d[t>>2],o=d[t+8>>2],a=d[t+4>>2],(n=y(d[((n<a?(n<o^1)<<1:a<o?1:2)<<2)+t>>2]*y(.10000000149011612)))<i&&gi(e,n),f[e+4>>2]=13}(e=Cr(60),f[t+12>>2]),R=t+16|0,0|e},a602_1:qa,a603_0:lr,a604_3:function(e,t,n,i){var a;e|=0,t=y(t),n=y(n),i|=0,R=a=R-16|0,f[a+12>>2]=e,d[a+8>>2]=t,d[a+4>>2]=n,f[a>>2]=i,function(e,t,n,i){var a;R=a=R+-64|0,f[a+60>>2]=e,d[a+56>>2]=t,d[a+52>>2]=n,f[a+48>>2]=i,e=f[a+60>>2],f[e+56>>2]=f[a+48>>2],d[a+44>>2]=1,d[a+40>>2]=1,d[a+36>>2]=1,Lo(e+16|0,a+44|0,a+40|0,a+36|0),1!=f[e+56>>2]?f[e+56>>2]?Lo(e+32|0,i=a+56|0,i,a+52|0):Lo(e+32|0,a+52|0,i=a+56|0,i):Lo(e+32|0,i=a+56|0,a+52|0,i),d[a+12>>2]=o[f[f[e>>2]+48>>2]](e),d[a+8>>2]=o[f[f[e>>2]+48>>2]](e),d[a+4>>2]=o[f[f[e>>2]+48>>2]](e),Lo(i=a+16|0,a+12|0,a+8|0,a+4|0),function(e,t){var n;f[12+(n=R-16|0)>>2]=e,f[n+8>>2]=t,e=f[n+12>>2],d[e>>2]=d[e>>2]-d[f[n+8>>2]>>2],d[e+4>>2]=d[e+4>>2]-d[f[n+8>>2]+4>>2],d[e+8>>2]=d[e+8>>2]-d[f[n+8>>2]+8>>2]}(e+32|0,i),R=a- -64|0}(f[a+12>>2],d[a+8>>2],d[a+4>>2],f[a>>2]),R=a+16|0},a605_1:Xa,a606_0:Tr,a607_2:ha,a608_0:is,a609_0:pr,a610_1:na,a611_0:gr,a612_1:ia,a613_3:Oo,a614_0:Qr,a615_0:br,a616_0:Hr,a617a618:cc,a617a619:lc,a617a620:_c,a617a621:uc,a622a623:function(){return 0},a622a624:cc,a622a625:lc,a622a626:_c,a622a627:uc,a622a628:function(){return 5},malloc:D,free:ce,__growWasmMemory:function(){return 0|E()},dynCall_vi:function(e,t){t|=0,o[e|=0](t)},dynCall_v:function(e){o[e|=0]()}}}({Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0,Math:Math},e,t.buffer)}(V,g,b)}}n.wasmBinary&&(h=n.wasmBinary),n.noExitRuntime&&n.noExitRuntime;var d=Error,v={};h=[],"object"!=typeof v&&u("no native wasm support detected");var g,y,A,x,b=new function(){var e=Array(685);return e.grow=function(){705<=e.length&&z("Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."),e.push(null)},e.set=function(t,n){e[t]=n},e.get=function(t){return e[t]},e}({initial:685,maximum:705,element:"anyfunc"}),C=!1,S=n.INITIAL_MEMORY||67108864;(g=n.wasmMemory?n.wasmMemory:new function(){return{buffer:new ArrayBuffer(S/65536*65536),grow:function(e){return ff(e)}}})&&(y=g.buffer),S=y.byteLength;var E=y;function w(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t(n);else{var i=t.l;"number"==typeof i?void 0===t.j?n.dynCall_v(i):n.dynCall_vi(i,t.j):i(void 0===t.j?null:t.j)}}}y=E,n.HEAP8=new Int8Array(E),n.HEAP16=new Int16Array(E),n.HEAP32=x=new Int32Array(E),n.HEAPU8=A=new Uint8Array(E),n.HEAPU16=new Uint16Array(E),n.HEAPU32=new Uint32Array(E),n.HEAPF32=new Float32Array(E),n.HEAPF64=new Float64Array(E),x[6388]=5268592;var T=[],P=[],I=[],R=[],N=!1;function D(){var e=n.preRun.shift();T.unshift(e)}var M=0,O=null;function z(e){throw n.onAbort&&n.onAbort(e),_(e+=""),u(e),C=!0,new d("abort("+e+"). Build with -s ASSERTIONS=1 for more info.")}function L(e){var t=F;return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}n.preloadedImages={},n.preloadedAudios={};var F="data:application/octet-stream;base64,",U="";if(!L(U)){var B=U;U=n.locateFile?n.locateFile(B,l):l+B}function k(){try{if(h)return new Uint8Array(h);var e=G(U);if(e)return e;if(c)return c(U);throw"both async and sync fetching of the wasm failed"}catch(e){z(e)}}P.push({l:function(){W()}});var j="function"==typeof atob?atob:function(e){var t="",n=0;e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(n++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(n++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(n++)),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(n++));i=i<<2|o>>4,o=(15&o)<<4|a>>2;var s=(3&a)<<6|r;t+=String.fromCharCode(i),64!==a&&(t+=String.fromCharCode(o)),64!==r&&(t+=String.fromCharCode(s))}while(n<e.length);return t};function G(e){if(L(e)){try{var t=j(e.slice(F.length)),n=new Uint8Array(t.length);for(e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}catch(e){throw Error("Converting base64 string to bytes failed.")}return n}}var V={abort:function(){z()},emscripten_memcpy_big:function(e,t,n){A.copyWithin(e,t,t+n)},emscripten_resize_heap:function(){z("OOM")},gettimeofday:function(e){var t=Date.now();return x[e>>2]=t/1e3|0,x[e+4>>2]=t%1e3*1e3|0,0},memory:g,table:b},H=function(){function e(e){n.asm=e.exports,M--,n.monitorRunDependencies&&n.monitorRunDependencies(M),0==M&&O&&(e=O,O=null,e())}function t(t){e(t.instance)}function i(e){return(h||!a&&!r||"function"!=typeof fetch?new Promise((function(e){e(k())})):fetch(U,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+U+"'";return e.arrayBuffer()})).catch((function(){return k()}))).then((function(){return{then:function(e){e({instance:new m})}}})).then(e,(function(e){u("failed to asynchronously prepare wasm: "+e),z(e)}))}var o={env:V,wasi_snapshot_preview1:V};if(M++,n.monitorRunDependencies&&n.monitorRunDependencies(M),n.instantiateWasm)try{return n.instantiateWasm(o,e)}catch(e){return u("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(h||"function"!=typeof v.instantiateStreaming||L(U)||"function"!=typeof fetch)return i(t);fetch(U,{credentials:"same-origin"}).then((function(e){return v.instantiateStreaming(e,o).then(t,(function(e){u("wasm streaming compile failed: "+e),u("falling back to ArrayBuffer instantiation"),i(t)}))}))}(),{}}();n.asm=H;var W=n.___wasm_call_ctors=function(){return(W=n.___wasm_call_ctors=n.asm.__wasm_call_ctors).apply(null,arguments)};n.___em_js__array_bounds_check_error=function(){return(n.___em_js__array_bounds_check_error=n.asm.__em_js__array_bounds_check_error).apply(null,arguments)};var q=n._a0_1=function(){return(q=n._a0_1=n.asm.a0_1).apply(null,arguments)},Y=n._a1_0=function(){return(Y=n._a1_0=n.asm.a1_0).apply(null,arguments)},X=n._a2_2=function(){return(X=n._a2_2=n.asm.a2_2).apply(null,arguments)},Q=n._a3_1=function(){return(Q=n._a3_1=n.asm.a3_1).apply(null,arguments)},K=n._a4_0=function(){return(K=n._a4_0=n.asm.a4_0).apply(null,arguments)},Z=n._a5_0=function(){return(Z=n._a5_0=n.asm.a5_0).apply(null,arguments)},J=n._a6_0=function(){return(J=n._a6_0=n.asm.a6_0).apply(null,arguments)},$=n._a7_1=function(){return($=n._a7_1=n.asm.a7_1).apply(null,arguments)},ee=n._a8_0=function(){return(ee=n._a8_0=n.asm.a8_0).apply(null,arguments)},te=n._a9_1=function(){return(te=n._a9_1=n.asm.a9_1).apply(null,arguments)},ne=n._a10_3=function(){return(ne=n._a10_3=n.asm.a10_3).apply(null,arguments)},ie=n._a11_0=function(){return(ie=n._a11_0=n.asm.a11_0).apply(null,arguments)},oe=n._a12_0=function(){return(oe=n._a12_0=n.asm.a12_0).apply(null,arguments)},ae=n._a13_3=function(){return(ae=n._a13_3=n.asm.a13_3).apply(null,arguments)},re=n._a14_6=function(){return(re=n._a14_6=n.asm.a14_6).apply(null,arguments)},se=n._a15_1=function(){return(se=n._a15_1=n.asm.a15_1).apply(null,arguments)},ce=n._a15_2=function(){return(ce=n._a15_2=n.asm.a15_2).apply(null,arguments)},le=n._a15_3=function(){return(le=n._a15_3=n.asm.a15_3).apply(null,arguments)},_e=n._a16_1=function(){return(_e=n._a16_1=n.asm.a16_1).apply(null,arguments)},ue=n._a17_1=function(){return(ue=n._a17_1=n.asm.a17_1).apply(null,arguments)},fe=n._a18_0=function(){return(fe=n._a18_0=n.asm.a18_0).apply(null,arguments)},he=n._a19_1=function(){return(he=n._a19_1=n.asm.a19_1).apply(null,arguments)},pe=n._a20_0=function(){return(pe=n._a20_0=n.asm.a20_0).apply(null,arguments)},me=n._a21_2=function(){return(me=n._a21_2=n.asm.a21_2).apply(null,arguments)},de=n._a22_1=function(){return(de=n._a22_1=n.asm.a22_1).apply(null,arguments)},ve=n._a23_0=function(){return(ve=n._a23_0=n.asm.a23_0).apply(null,arguments)},ge=n._a24_0=function(){return(ge=n._a24_0=n.asm.a24_0).apply(null,arguments)},ye=n._a25_0=function(){return(ye=n._a25_0=n.asm.a25_0).apply(null,arguments)},Ae=n._a26_1=function(){return(Ae=n._a26_1=n.asm.a26_1).apply(null,arguments)},xe=n._a27_0=function(){return(xe=n._a27_0=n.asm.a27_0).apply(null,arguments)},be=n._a28_1=function(){return(be=n._a28_1=n.asm.a28_1).apply(null,arguments)},Ce=n._a29_3=function(){return(Ce=n._a29_3=n.asm.a29_3).apply(null,arguments)},Se=n._a30_0=function(){return(Se=n._a30_0=n.asm.a30_0).apply(null,arguments)},Ee=n._a31_0=function(){return(Ee=n._a31_0=n.asm.a31_0).apply(null,arguments)},we=n._a32_1=function(){return(we=n._a32_1=n.asm.a32_1).apply(null,arguments)},Te=n._a33_1=function(){return(Te=n._a33_1=n.asm.a33_1).apply(null,arguments)},Pe=n._a34_0=function(){return(Pe=n._a34_0=n.asm.a34_0).apply(null,arguments)},Ie=n._a35_3=function(){return(Ie=n._a35_3=n.asm.a35_3).apply(null,arguments)},Re=n._a36_6=function(){return(Re=n._a36_6=n.asm.a36_6).apply(null,arguments)},Ne=n._a37_1=function(){return(Ne=n._a37_1=n.asm.a37_1).apply(null,arguments)},De=n._a37_2=function(){return(De=n._a37_2=n.asm.a37_2).apply(null,arguments)},Me=n._a37_3=function(){return(Me=n._a37_3=n.asm.a37_3).apply(null,arguments)},Oe=n._a38_1=function(){return(Oe=n._a38_1=n.asm.a38_1).apply(null,arguments)},ze=n._a39_1=function(){return(ze=n._a39_1=n.asm.a39_1).apply(null,arguments)},Le=n._a40_0=function(){return(Le=n._a40_0=n.asm.a40_0).apply(null,arguments)},Fe=n._a41_0=function(){return(Fe=n._a41_0=n.asm.a41_0).apply(null,arguments)},Ue=n._a42_0=function(){return(Ue=n._a42_0=n.asm.a42_0).apply(null,arguments)},Be=n._a43_1=function(){return(Be=n._a43_1=n.asm.a43_1).apply(null,arguments)},ke=n._a44_0=function(){return(ke=n._a44_0=n.asm.a44_0).apply(null,arguments)},je=n._a45_2=function(){return(je=n._a45_2=n.asm.a45_2).apply(null,arguments)},Ge=n._a46_0=function(){return(Ge=n._a46_0=n.asm.a46_0).apply(null,arguments)},Ve=n._a47_0=function(){return(Ve=n._a47_0=n.asm.a47_0).apply(null,arguments)},He=n._a48_1=function(){return(He=n._a48_1=n.asm.a48_1).apply(null,arguments)},We=n._a49_0=function(){return(We=n._a49_0=n.asm.a49_0).apply(null,arguments)},qe=n._a50_1=function(){return(qe=n._a50_1=n.asm.a50_1).apply(null,arguments)},Ye=n._a51_3=function(){return(Ye=n._a51_3=n.asm.a51_3).apply(null,arguments)},Xe=n._a52_0=function(){return(Xe=n._a52_0=n.asm.a52_0).apply(null,arguments)},Qe=n._a53_0=function(){return(Qe=n._a53_0=n.asm.a53_0).apply(null,arguments)},Ke=n._a54_1=function(){return(Ke=n._a54_1=n.asm.a54_1).apply(null,arguments)},Ze=n._a55_0=function(){return(Ze=n._a55_0=n.asm.a55_0).apply(null,arguments)},Je=n._a56_0=function(){return(Je=n._a56_0=n.asm.a56_0).apply(null,arguments)},$e=n._a57_0=function(){return($e=n._a57_0=n.asm.a57_0).apply(null,arguments)},et=n._a58_0=function(){return(et=n._a58_0=n.asm.a58_0).apply(null,arguments)},tt=n._a59_0=function(){return(tt=n._a59_0=n.asm.a59_0).apply(null,arguments)},nt=n._a60_1=function(){return(nt=n._a60_1=n.asm.a60_1).apply(null,arguments)},it=n._a61_1=function(){return(it=n._a61_1=n.asm.a61_1).apply(null,arguments)},ot=n._a62_0=function(){return(ot=n._a62_0=n.asm.a62_0).apply(null,arguments)},at=n._a62_1=function(){return(at=n._a62_1=n.asm.a62_1).apply(null,arguments)},rt=n._a63_0=function(){return(rt=n._a63_0=n.asm.a63_0).apply(null,arguments)},st=n._a64_0=function(){return(st=n._a64_0=n.asm.a64_0).apply(null,arguments)},ct=n._a65_0=function(){return(ct=n._a65_0=n.asm.a65_0).apply(null,arguments)},lt=n._a66_0=function(){return(lt=n._a66_0=n.asm.a66_0).apply(null,arguments)},_t=n._a67_1=function(){return(_t=n._a67_1=n.asm.a67_1).apply(null,arguments)},ut=n._a68_1=function(){return(ut=n._a68_1=n.asm.a68_1).apply(null,arguments)},ft=n._a69_1=function(){return(ft=n._a69_1=n.asm.a69_1).apply(null,arguments)},ht=n._a70_1=function(){return(ht=n._a70_1=n.asm.a70_1).apply(null,arguments)},pt=n._a71_0=function(){return(pt=n._a71_0=n.asm.a71_0).apply(null,arguments)},mt=n._a72_0=function(){return(mt=n._a72_0=n.asm.a72_0).apply(null,arguments)},dt=n._a73_1=function(){return(dt=n._a73_1=n.asm.a73_1).apply(null,arguments)},vt=n._a74_1=function(){return(vt=n._a74_1=n.asm.a74_1).apply(null,arguments)},gt=n._a75_1=function(){return(gt=n._a75_1=n.asm.a75_1).apply(null,arguments)},yt=n._a76_1=function(){return(yt=n._a76_1=n.asm.a76_1).apply(null,arguments)},At=n._a77_1=function(){return(At=n._a77_1=n.asm.a77_1).apply(null,arguments)},xt=n._a78_0=function(){return(xt=n._a78_0=n.asm.a78_0).apply(null,arguments)},bt=n._a79_1=function(){return(bt=n._a79_1=n.asm.a79_1).apply(null,arguments)},Ct=n._a80_1=function(){return(Ct=n._a80_1=n.asm.a80_1).apply(null,arguments)},St=n._a81_2=function(){return(St=n._a81_2=n.asm.a81_2).apply(null,arguments)},Et=n._a82_0=function(){return(Et=n._a82_0=n.asm.a82_0).apply(null,arguments)},wt=n._a83_4=function(){return(wt=n._a83_4=n.asm.a83_4).apply(null,arguments)},Tt=n._a84_1=function(){return(Tt=n._a84_1=n.asm.a84_1).apply(null,arguments)},Pt=n._a85_0=function(){return(Pt=n._a85_0=n.asm.a85_0).apply(null,arguments)},It=n._a86_1=function(){return(It=n._a86_1=n.asm.a86_1).apply(null,arguments)},Rt=n._a86_3=function(){return(Rt=n._a86_3=n.asm.a86_3).apply(null,arguments)},Nt=n._a87_1=function(){return(Nt=n._a87_1=n.asm.a87_1).apply(null,arguments)},Dt=n._a88_1=function(){return(Dt=n._a88_1=n.asm.a88_1).apply(null,arguments)},Mt=n._a88_2=function(){return(Mt=n._a88_2=n.asm.a88_2).apply(null,arguments)},Ot=n._a89_1=function(){return(Ot=n._a89_1=n.asm.a89_1).apply(null,arguments)},zt=n._a90_1=function(){return(zt=n._a90_1=n.asm.a90_1).apply(null,arguments)},Lt=n._a90_2=function(){return(Lt=n._a90_2=n.asm.a90_2).apply(null,arguments)},Ft=n._a90_3=function(){return(Ft=n._a90_3=n.asm.a90_3).apply(null,arguments)},Ut=n._a91_3=function(){return(Ut=n._a91_3=n.asm.a91_3).apply(null,arguments)},Bt=n._a92_6=function(){return(Bt=n._a92_6=n.asm.a92_6).apply(null,arguments)},kt=n._a93_1=function(){return(kt=n._a93_1=n.asm.a93_1).apply(null,arguments)},jt=n._a93_2=function(){return(jt=n._a93_2=n.asm.a93_2).apply(null,arguments)},Gt=n._a93_3=function(){return(Gt=n._a93_3=n.asm.a93_3).apply(null,arguments)},Vt=n._a94_1=function(){return(Vt=n._a94_1=n.asm.a94_1).apply(null,arguments)},Ht=n._a95_1=function(){return(Ht=n._a95_1=n.asm.a95_1).apply(null,arguments)},Wt=n._a96_1=function(){return(Wt=n._a96_1=n.asm.a96_1).apply(null,arguments)},qt=n._a97_1=function(){return(qt=n._a97_1=n.asm.a97_1).apply(null,arguments)},Yt=n._a98_0=function(){return(Yt=n._a98_0=n.asm.a98_0).apply(null,arguments)},Xt=n._a99_0=function(){return(Xt=n._a99_0=n.asm.a99_0).apply(null,arguments)},Qt=n._a100_1=function(){return(Qt=n._a100_1=n.asm.a100_1).apply(null,arguments)},Kt=n._a101_1=function(){return(Kt=n._a101_1=n.asm.a101_1).apply(null,arguments)},Zt=n._a102_0=function(){return(Zt=n._a102_0=n.asm.a102_0).apply(null,arguments)},Jt=n._a103_0=function(){return(Jt=n._a103_0=n.asm.a103_0).apply(null,arguments)},$t=n._a104_1=function(){return($t=n._a104_1=n.asm.a104_1).apply(null,arguments)},en=n._a105_0=function(){return(en=n._a105_0=n.asm.a105_0).apply(null,arguments)},tn=n._a106_2=function(){return(tn=n._a106_2=n.asm.a106_2).apply(null,arguments)},nn=n._a107_1=function(){return(nn=n._a107_1=n.asm.a107_1).apply(null,arguments)},on=n._a108_0=function(){return(on=n._a108_0=n.asm.a108_0).apply(null,arguments)},an=n._a109_0=function(){return(an=n._a109_0=n.asm.a109_0).apply(null,arguments)},rn=n._a110_0=function(){return(rn=n._a110_0=n.asm.a110_0).apply(null,arguments)},sn=n._a111_1=function(){return(sn=n._a111_1=n.asm.a111_1).apply(null,arguments)},cn=n._a112_0=function(){return(cn=n._a112_0=n.asm.a112_0).apply(null,arguments)},ln=n._a113_1=function(){return(ln=n._a113_1=n.asm.a113_1).apply(null,arguments)},_n=n._a114_3=function(){return(_n=n._a114_3=n.asm.a114_3).apply(null,arguments)},un=n._a115_0=function(){return(un=n._a115_0=n.asm.a115_0).apply(null,arguments)},fn=n._a116_0=function(){return(fn=n._a116_0=n.asm.a116_0).apply(null,arguments)},hn=n._a117_0=function(){return(hn=n._a117_0=n.asm.a117_0).apply(null,arguments)},pn=n._a118_0=function(){return(pn=n._a118_0=n.asm.a118_0).apply(null,arguments)},mn=n._a119_1=function(){return(mn=n._a119_1=n.asm.a119_1).apply(null,arguments)},dn=n._a120_0=function(){return(dn=n._a120_0=n.asm.a120_0).apply(null,arguments)},vn=n._a121_1=function(){return(vn=n._a121_1=n.asm.a121_1).apply(null,arguments)},gn=n._a122_0=function(){return(gn=n._a122_0=n.asm.a122_0).apply(null,arguments)},yn=n._a123_0=function(){return(yn=n._a123_0=n.asm.a123_0).apply(null,arguments)},An=n._a124_1=function(){return(An=n._a124_1=n.asm.a124_1).apply(null,arguments)},xn=n._a125_0=function(){return(xn=n._a125_0=n.asm.a125_0).apply(null,arguments)},bn=n._a126_0=function(){return(bn=n._a126_0=n.asm.a126_0).apply(null,arguments)},Cn=n._a127_0=function(){return(Cn=n._a127_0=n.asm.a127_0).apply(null,arguments)},Sn=n._a128_1=function(){return(Sn=n._a128_1=n.asm.a128_1).apply(null,arguments)},En=n._a129_0=function(){return(En=n._a129_0=n.asm.a129_0).apply(null,arguments)},wn=n._a130_1=function(){return(wn=n._a130_1=n.asm.a130_1).apply(null,arguments)},Tn=n._a131_0=function(){return(Tn=n._a131_0=n.asm.a131_0).apply(null,arguments)},Pn=n._a132_1=function(){return(Pn=n._a132_1=n.asm.a132_1).apply(null,arguments)},In=n._a133_0=function(){return(In=n._a133_0=n.asm.a133_0).apply(null,arguments)},Rn=n._a134_2=function(){return(Rn=n._a134_2=n.asm.a134_2).apply(null,arguments)},Nn=n._a135_0=function(){return(Nn=n._a135_0=n.asm.a135_0).apply(null,arguments)},Dn=n._a136_0=function(){return(Dn=n._a136_0=n.asm.a136_0).apply(null,arguments)},Mn=n._a137_1=function(){return(Mn=n._a137_1=n.asm.a137_1).apply(null,arguments)},On=n._a138_0=function(){return(On=n._a138_0=n.asm.a138_0).apply(null,arguments)},zn=n._a139_1=function(){return(zn=n._a139_1=n.asm.a139_1).apply(null,arguments)},Ln=n._a140_3=function(){return(Ln=n._a140_3=n.asm.a140_3).apply(null,arguments)},Fn=n._a141_0=function(){return(Fn=n._a141_0=n.asm.a141_0).apply(null,arguments)},Un=n._a142_0=function(){return(Un=n._a142_0=n.asm.a142_0).apply(null,arguments)},Bn=n._a143_0=function(){return(Bn=n._a143_0=n.asm.a143_0).apply(null,arguments)},kn=n._a144_0=function(){return(kn=n._a144_0=n.asm.a144_0).apply(null,arguments)},jn=n._a145_0=function(){return(jn=n._a145_0=n.asm.a145_0).apply(null,arguments)},Gn=n._a146_0=function(){return(Gn=n._a146_0=n.asm.a146_0).apply(null,arguments)},Vn=n._a147_1=function(){return(Vn=n._a147_1=n.asm.a147_1).apply(null,arguments)},Hn=n._a148_1=function(){return(Hn=n._a148_1=n.asm.a148_1).apply(null,arguments)},Wn=n._a149_1=function(){return(Wn=n._a149_1=n.asm.a149_1).apply(null,arguments)},qn=n._a150_1=function(){return(qn=n._a150_1=n.asm.a150_1).apply(null,arguments)},Yn=n._a151_0=function(){return(Yn=n._a151_0=n.asm.a151_0).apply(null,arguments)},Xn=n._a152_1=function(){return(Xn=n._a152_1=n.asm.a152_1).apply(null,arguments)},Qn=n._a153_0=function(){return(Qn=n._a153_0=n.asm.a153_0).apply(null,arguments)},Kn=n._a154_1=function(){return(Kn=n._a154_1=n.asm.a154_1).apply(null,arguments)},Zn=n._a155_2=function(){return(Zn=n._a155_2=n.asm.a155_2).apply(null,arguments)},Jn=n._a156_3=function(){return(Jn=n._a156_3=n.asm.a156_3).apply(null,arguments)},$n=n._a157_0=function(){return($n=n._a157_0=n.asm.a157_0).apply(null,arguments)},ei=n._a158_1=function(){return(ei=n._a158_1=n.asm.a158_1).apply(null,arguments)},ti=n._a159_0=function(){return(ti=n._a159_0=n.asm.a159_0).apply(null,arguments)},ni=n._a160_0=function(){return(ni=n._a160_0=n.asm.a160_0).apply(null,arguments)},ii=n._a161_1=function(){return(ii=n._a161_1=n.asm.a161_1).apply(null,arguments)},oi=n._a162_0=function(){return(oi=n._a162_0=n.asm.a162_0).apply(null,arguments)},ai=n._a163_0=function(){return(ai=n._a163_0=n.asm.a163_0).apply(null,arguments)},ri=n._a164_2=function(){return(ri=n._a164_2=n.asm.a164_2).apply(null,arguments)},si=n._a164_3=function(){return(si=n._a164_3=n.asm.a164_3).apply(null,arguments)},ci=n._a165_1=function(){return(ci=n._a165_1=n.asm.a165_1).apply(null,arguments)},li=n._a166_0=function(){return(li=n._a166_0=n.asm.a166_0).apply(null,arguments)},_i=n._a167_2=function(){return(_i=n._a167_2=n.asm.a167_2).apply(null,arguments)},ui=n._a168_0=function(){return(ui=n._a168_0=n.asm.a168_0).apply(null,arguments)},fi=n._a169_0=function(){return(fi=n._a169_0=n.asm.a169_0).apply(null,arguments)},hi=n._a170_1=function(){return(hi=n._a170_1=n.asm.a170_1).apply(null,arguments)},pi=n._a171_0=function(){return(pi=n._a171_0=n.asm.a171_0).apply(null,arguments)},mi=n._a172_1=function(){return(mi=n._a172_1=n.asm.a172_1).apply(null,arguments)},di=n._a173_3=function(){return(di=n._a173_3=n.asm.a173_3).apply(null,arguments)},vi=n._a174_0=function(){return(vi=n._a174_0=n.asm.a174_0).apply(null,arguments)},gi=n._a175_0=function(){return(gi=n._a175_0=n.asm.a175_0).apply(null,arguments)},yi=n._a176_0=function(){return(yi=n._a176_0=n.asm.a176_0).apply(null,arguments)},Ai=n._a177_0=function(){return(Ai=n._a177_0=n.asm.a177_0).apply(null,arguments)},xi=n._a178_0=function(){return(xi=n._a178_0=n.asm.a178_0).apply(null,arguments)},bi=n._a179_1=function(){return(bi=n._a179_1=n.asm.a179_1).apply(null,arguments)},Ci=n._a180_0=function(){return(Ci=n._a180_0=n.asm.a180_0).apply(null,arguments)},Si=n._a181_0=function(){return(Si=n._a181_0=n.asm.a181_0).apply(null,arguments)},Ei=n._a182_2=function(){return(Ei=n._a182_2=n.asm.a182_2).apply(null,arguments)},wi=n._a183_0=function(){return(wi=n._a183_0=n.asm.a183_0).apply(null,arguments)},Ti=n._a184_0=function(){return(Ti=n._a184_0=n.asm.a184_0).apply(null,arguments)},Pi=n._a185_0=function(){return(Pi=n._a185_0=n.asm.a185_0).apply(null,arguments)},Ii=n._a186_0=function(){return(Ii=n._a186_0=n.asm.a186_0).apply(null,arguments)},Ri=n._a187_2=function(){return(Ri=n._a187_2=n.asm.a187_2).apply(null,arguments)},Ni=n._a188_0=function(){return(Ni=n._a188_0=n.asm.a188_0).apply(null,arguments)},Di=n._a189_0=function(){return(Di=n._a189_0=n.asm.a189_0).apply(null,arguments)},Mi=n._a190_1=function(){return(Mi=n._a190_1=n.asm.a190_1).apply(null,arguments)},Oi=n._a191_0=function(){return(Oi=n._a191_0=n.asm.a191_0).apply(null,arguments)},zi=n._a192_1=function(){return(zi=n._a192_1=n.asm.a192_1).apply(null,arguments)},Li=n._a193_0=function(){return(Li=n._a193_0=n.asm.a193_0).apply(null,arguments)},Fi=n._a194_2=function(){return(Fi=n._a194_2=n.asm.a194_2).apply(null,arguments)},Ui=n._a195_1=function(){return(Ui=n._a195_1=n.asm.a195_1).apply(null,arguments)},Bi=n._a196_0=function(){return(Bi=n._a196_0=n.asm.a196_0).apply(null,arguments)},ki=n._a197_3=function(){return(ki=n._a197_3=n.asm.a197_3).apply(null,arguments)},ji=n._a198_1=function(){return(ji=n._a198_1=n.asm.a198_1).apply(null,arguments)},Gi=n._a199_0=function(){return(Gi=n._a199_0=n.asm.a199_0).apply(null,arguments)},Vi=n._a200_2=function(){return(Vi=n._a200_2=n.asm.a200_2).apply(null,arguments)},Hi=n._a201_0=function(){return(Hi=n._a201_0=n.asm.a201_0).apply(null,arguments)},Wi=n._a202_0=function(){return(Wi=n._a202_0=n.asm.a202_0).apply(null,arguments)},qi=n._a203_1=function(){return(qi=n._a203_1=n.asm.a203_1).apply(null,arguments)},Yi=n._a204_0=function(){return(Yi=n._a204_0=n.asm.a204_0).apply(null,arguments)},Xi=n._a205_1=function(){return(Xi=n._a205_1=n.asm.a205_1).apply(null,arguments)},Qi=n._a206_3=function(){return(Qi=n._a206_3=n.asm.a206_3).apply(null,arguments)},Ki=n._a207_0=function(){return(Ki=n._a207_0=n.asm.a207_0).apply(null,arguments)},Zi=n._a208_0=function(){return(Zi=n._a208_0=n.asm.a208_0).apply(null,arguments)},Ji=n._a209_0=function(){return(Ji=n._a209_0=n.asm.a209_0).apply(null,arguments)},$i=n._a210_0=function(){return($i=n._a210_0=n.asm.a210_0).apply(null,arguments)},eo=n._a211_1=function(){return(eo=n._a211_1=n.asm.a211_1).apply(null,arguments)},to=n._a212_0=function(){return(to=n._a212_0=n.asm.a212_0).apply(null,arguments)},no=n._a213_1=function(){return(no=n._a213_1=n.asm.a213_1).apply(null,arguments)},io=n._a214_0=function(){return(io=n._a214_0=n.asm.a214_0).apply(null,arguments)},oo=n._a215_0=function(){return(oo=n._a215_0=n.asm.a215_0).apply(null,arguments)},ao=n._a216_1=function(){return(ao=n._a216_1=n.asm.a216_1).apply(null,arguments)},ro=n._a217_0=function(){return(ro=n._a217_0=n.asm.a217_0).apply(null,arguments)},so=n._a218_3=function(){return(so=n._a218_3=n.asm.a218_3).apply(null,arguments)},co=n._a218_4=function(){return(co=n._a218_4=n.asm.a218_4).apply(null,arguments)},lo=n._a219_0=function(){return(lo=n._a219_0=n.asm.a219_0).apply(null,arguments)},_o=n._a220_1=function(){return(_o=n._a220_1=n.asm.a220_1).apply(null,arguments)},uo=n._a221_0=function(){return(uo=n._a221_0=n.asm.a221_0).apply(null,arguments)},fo=n._a222_1=function(){return(fo=n._a222_1=n.asm.a222_1).apply(null,arguments)},ho=n._a223_0=function(){return(ho=n._a223_0=n.asm.a223_0).apply(null,arguments)},po=n._a224_1=function(){return(po=n._a224_1=n.asm.a224_1).apply(null,arguments)},mo=n._a225_0=function(){return(mo=n._a225_0=n.asm.a225_0).apply(null,arguments)},vo=n._a226_1=function(){return(vo=n._a226_1=n.asm.a226_1).apply(null,arguments)},go=n._a227_0=function(){return(go=n._a227_0=n.asm.a227_0).apply(null,arguments)},yo=n._a228_1=function(){return(yo=n._a228_1=n.asm.a228_1).apply(null,arguments)},Ao=n._a229_0=function(){return(Ao=n._a229_0=n.asm.a229_0).apply(null,arguments)},xo=n._a230_1=function(){return(xo=n._a230_1=n.asm.a230_1).apply(null,arguments)},bo=n._a231_0=function(){return(bo=n._a231_0=n.asm.a231_0).apply(null,arguments)},Co=n._a232_1=function(){return(Co=n._a232_1=n.asm.a232_1).apply(null,arguments)},So=n._a233_0=function(){return(So=n._a233_0=n.asm.a233_0).apply(null,arguments)},Eo=n._a234_0=function(){return(Eo=n._a234_0=n.asm.a234_0).apply(null,arguments)},wo=n._a235_0=function(){return(wo=n._a235_0=n.asm.a235_0).apply(null,arguments)},To=n._a236_0=function(){return(To=n._a236_0=n.asm.a236_0).apply(null,arguments)},Po=n._a237_0=function(){return(Po=n._a237_0=n.asm.a237_0).apply(null,arguments)},Io=n._a238_0=function(){return(Io=n._a238_0=n.asm.a238_0).apply(null,arguments)},Ro=n._a239_1=function(){return(Ro=n._a239_1=n.asm.a239_1).apply(null,arguments)},No=n._a240_0=function(){return(No=n._a240_0=n.asm.a240_0).apply(null,arguments)},Do=n._a241_1=function(){return(Do=n._a241_1=n.asm.a241_1).apply(null,arguments)},Mo=n._a242_0=function(){return(Mo=n._a242_0=n.asm.a242_0).apply(null,arguments)},Oo=n._a243_1=function(){return(Oo=n._a243_1=n.asm.a243_1).apply(null,arguments)},zo=n._a244_0=function(){return(zo=n._a244_0=n.asm.a244_0).apply(null,arguments)},Lo=n._a245_1=function(){return(Lo=n._a245_1=n.asm.a245_1).apply(null,arguments)},Fo=n._a246_0=function(){return(Fo=n._a246_0=n.asm.a246_0).apply(null,arguments)},Uo=n._a247_1=function(){return(Uo=n._a247_1=n.asm.a247_1).apply(null,arguments)},Bo=n._a248_0=function(){return(Bo=n._a248_0=n.asm.a248_0).apply(null,arguments)},ko=n._a249_1=function(){return(ko=n._a249_1=n.asm.a249_1).apply(null,arguments)},jo=n._a250_0=function(){return(jo=n._a250_0=n.asm.a250_0).apply(null,arguments)},Go=n._a251_1=function(){return(Go=n._a251_1=n.asm.a251_1).apply(null,arguments)},Vo=n._a252_0=function(){return(Vo=n._a252_0=n.asm.a252_0).apply(null,arguments)},Ho=n._a253_1=function(){return(Ho=n._a253_1=n.asm.a253_1).apply(null,arguments)},Wo=n._a254_0=function(){return(Wo=n._a254_0=n.asm.a254_0).apply(null,arguments)},qo=n._a255_0=function(){return(qo=n._a255_0=n.asm.a255_0).apply(null,arguments)},Yo=n._a256_0=function(){return(Yo=n._a256_0=n.asm.a256_0).apply(null,arguments)},Xo=n._a257_2=function(){return(Xo=n._a257_2=n.asm.a257_2).apply(null,arguments)},Qo=n._a257_4=function(){return(Qo=n._a257_4=n.asm.a257_4).apply(null,arguments)},Ko=n._a258_1=function(){return(Ko=n._a258_1=n.asm.a258_1).apply(null,arguments)},Zo=n._a259_1=function(){return(Zo=n._a259_1=n.asm.a259_1).apply(null,arguments)},Jo=n._a260_0=function(){return(Jo=n._a260_0=n.asm.a260_0).apply(null,arguments)},$o=n._a261_0=function(){return($o=n._a261_0=n.asm.a261_0).apply(null,arguments)},ea=n._a262_1=function(){return(ea=n._a262_1=n.asm.a262_1).apply(null,arguments)},ta=n._a263_0=function(){return(ta=n._a263_0=n.asm.a263_0).apply(null,arguments)},na=n._a264_1=function(){return(na=n._a264_1=n.asm.a264_1).apply(null,arguments)},ia=n._a265_2=function(){return(ia=n._a265_2=n.asm.a265_2).apply(null,arguments)},oa=n._a266_3=function(){return(oa=n._a266_3=n.asm.a266_3).apply(null,arguments)},aa=n._a267_0=function(){return(aa=n._a267_0=n.asm.a267_0).apply(null,arguments)},ra=n._a268_1=function(){return(ra=n._a268_1=n.asm.a268_1).apply(null,arguments)},sa=n._a269_0=function(){return(sa=n._a269_0=n.asm.a269_0).apply(null,arguments)},ca=n._a270_1=function(){return(ca=n._a270_1=n.asm.a270_1).apply(null,arguments)},la=n._a270_2=function(){return(la=n._a270_2=n.asm.a270_2).apply(null,arguments)},_a=n._a271_1=function(){return(_a=n._a271_1=n.asm.a271_1).apply(null,arguments)},ua=n._a272_0=function(){return(ua=n._a272_0=n.asm.a272_0).apply(null,arguments)},fa=n._a273_2=function(){return(fa=n._a273_2=n.asm.a273_2).apply(null,arguments)},ha=n._a274_1=function(){return(ha=n._a274_1=n.asm.a274_1).apply(null,arguments)},pa=n._a275_0=function(){return(pa=n._a275_0=n.asm.a275_0).apply(null,arguments)},ma=n._a276_0=function(){return(ma=n._a276_0=n.asm.a276_0).apply(null,arguments)},da=n._a277_0=function(){return(da=n._a277_0=n.asm.a277_0).apply(null,arguments)},va=n._a278_1=function(){return(va=n._a278_1=n.asm.a278_1).apply(null,arguments)},ga=n._a279_0=function(){return(ga=n._a279_0=n.asm.a279_0).apply(null,arguments)},ya=n._a280_1=function(){return(ya=n._a280_1=n.asm.a280_1).apply(null,arguments)},Aa=n._a281_3=function(){return(Aa=n._a281_3=n.asm.a281_3).apply(null,arguments)},xa=n._a282_0=function(){return(xa=n._a282_0=n.asm.a282_0).apply(null,arguments)},ba=n._a283_0=function(){return(ba=n._a283_0=n.asm.a283_0).apply(null,arguments)},Ca=n._a284_2=function(){return(Ca=n._a284_2=n.asm.a284_2).apply(null,arguments)},Sa=n._a285_0=function(){return(Sa=n._a285_0=n.asm.a285_0).apply(null,arguments)},Ea=n._a286_0=function(){return(Ea=n._a286_0=n.asm.a286_0).apply(null,arguments)},wa=n._a287_0=function(){return(wa=n._a287_0=n.asm.a287_0).apply(null,arguments)},Ta=n._a288_0=function(){return(Ta=n._a288_0=n.asm.a288_0).apply(null,arguments)},Pa=n._a289_2=function(){return(Pa=n._a289_2=n.asm.a289_2).apply(null,arguments)},Ia=n._a290_0=function(){return(Ia=n._a290_0=n.asm.a290_0).apply(null,arguments)},Ra=n._a291_0=function(){return(Ra=n._a291_0=n.asm.a291_0).apply(null,arguments)},Na=n._a292_1=function(){return(Na=n._a292_1=n.asm.a292_1).apply(null,arguments)},Da=n._a293_0=function(){return(Da=n._a293_0=n.asm.a293_0).apply(null,arguments)},Ma=n._a294_1=function(){return(Ma=n._a294_1=n.asm.a294_1).apply(null,arguments)},Oa=n._a295_0=function(){return(Oa=n._a295_0=n.asm.a295_0).apply(null,arguments)},za=n._a296_9=function(){return(za=n._a296_9=n.asm.a296_9).apply(null,arguments)},La=n._a297_1=function(){return(La=n._a297_1=n.asm.a297_1).apply(null,arguments)},Fa=n._a298_0=function(){return(Fa=n._a298_0=n.asm.a298_0).apply(null,arguments)},Ua=n._a299_1=function(){return(Ua=n._a299_1=n.asm.a299_1).apply(null,arguments)},Ba=n._a300_0=function(){return(Ba=n._a300_0=n.asm.a300_0).apply(null,arguments)},ka=n._a301_2=function(){return(ka=n._a301_2=n.asm.a301_2).apply(null,arguments)},ja=n._a302_0=function(){return(ja=n._a302_0=n.asm.a302_0).apply(null,arguments)},Ga=n._a303_0=function(){return(Ga=n._a303_0=n.asm.a303_0).apply(null,arguments)},Va=n._a304_1=function(){return(Va=n._a304_1=n.asm.a304_1).apply(null,arguments)},Ha=n._a305_0=function(){return(Ha=n._a305_0=n.asm.a305_0).apply(null,arguments)},Wa=n._a306_1=function(){return(Wa=n._a306_1=n.asm.a306_1).apply(null,arguments)},qa=n._a307_3=function(){return(qa=n._a307_3=n.asm.a307_3).apply(null,arguments)},Ya=n._a308_0=function(){return(Ya=n._a308_0=n.asm.a308_0).apply(null,arguments)},Xa=n._a309_0=function(){return(Xa=n._a309_0=n.asm.a309_0).apply(null,arguments)},Qa=n._a310_0=function(){return(Qa=n._a310_0=n.asm.a310_0).apply(null,arguments)},Ka=n._a311_0=function(){return(Ka=n._a311_0=n.asm.a311_0).apply(null,arguments)},Za=n._a311_1=function(){return(Za=n._a311_1=n.asm.a311_1).apply(null,arguments)},Ja=n._a312_0=function(){return(Ja=n._a312_0=n.asm.a312_0).apply(null,arguments)},$a=n._a313_0=function(){return($a=n._a313_0=n.asm.a313_0).apply(null,arguments)},er=n._a313_1=function(){return(er=n._a313_1=n.asm.a313_1).apply(null,arguments)},tr=n._a313_2=function(){return(tr=n._a313_2=n.asm.a313_2).apply(null,arguments)},nr=n._a314_3=function(){return(nr=n._a314_3=n.asm.a314_3).apply(null,arguments)},ir=n._a314_4=function(){return(ir=n._a314_4=n.asm.a314_4).apply(null,arguments)},or=n._a315_3=function(){return(or=n._a315_3=n.asm.a315_3).apply(null,arguments)},ar=n._a316_0=function(){return(ar=n._a316_0=n.asm.a316_0).apply(null,arguments)},rr=n._a317_1=function(){return(rr=n._a317_1=n.asm.a317_1).apply(null,arguments)},sr=n._a318_0=function(){return(sr=n._a318_0=n.asm.a318_0).apply(null,arguments)},cr=n._a319_0=function(){return(cr=n._a319_0=n.asm.a319_0).apply(null,arguments)},lr=n._a320_0=function(){return(lr=n._a320_0=n.asm.a320_0).apply(null,arguments)},_r=n._a321_0=function(){return(_r=n._a321_0=n.asm.a321_0).apply(null,arguments)},ur=n._a322_0=function(){return(ur=n._a322_0=n.asm.a322_0).apply(null,arguments)},fr=n._a323_0=function(){return(fr=n._a323_0=n.asm.a323_0).apply(null,arguments)},hr=n._a324_1=function(){return(hr=n._a324_1=n.asm.a324_1).apply(null,arguments)},pr=n._a325_0=function(){return(pr=n._a325_0=n.asm.a325_0).apply(null,arguments)},mr=n._a326_1=function(){return(mr=n._a326_1=n.asm.a326_1).apply(null,arguments)},dr=n._a327_1=function(){return(dr=n._a327_1=n.asm.a327_1).apply(null,arguments)},vr=n._a328_0=function(){return(vr=n._a328_0=n.asm.a328_0).apply(null,arguments)},gr=n._a329_1=function(){return(gr=n._a329_1=n.asm.a329_1).apply(null,arguments)},yr=n._a330_1=function(){return(yr=n._a330_1=n.asm.a330_1).apply(null,arguments)},Ar=n._a331_0=function(){return(Ar=n._a331_0=n.asm.a331_0).apply(null,arguments)},xr=n._a332_2=function(){return(xr=n._a332_2=n.asm.a332_2).apply(null,arguments)},br=n._a333_0=function(){return(br=n._a333_0=n.asm.a333_0).apply(null,arguments)},Cr=n._a334_0=function(){return(Cr=n._a334_0=n.asm.a334_0).apply(null,arguments)},Sr=n._a335_1=function(){return(Sr=n._a335_1=n.asm.a335_1).apply(null,arguments)},Er=n._a336_0=function(){return(Er=n._a336_0=n.asm.a336_0).apply(null,arguments)},wr=n._a337_1=function(){return(wr=n._a337_1=n.asm.a337_1).apply(null,arguments)},Tr=n._a338_3=function(){return(Tr=n._a338_3=n.asm.a338_3).apply(null,arguments)},Pr=n._a339_0=function(){return(Pr=n._a339_0=n.asm.a339_0).apply(null,arguments)},Ir=n._a340_0=function(){return(Ir=n._a340_0=n.asm.a340_0).apply(null,arguments)},Rr=n._a341_0=function(){return(Rr=n._a341_0=n.asm.a341_0).apply(null,arguments)},Nr=n._a342_1=function(){return(Nr=n._a342_1=n.asm.a342_1).apply(null,arguments)},Dr=n._a343_1=function(){return(Dr=n._a343_1=n.asm.a343_1).apply(null,arguments)},Mr=n._a344_0=function(){return(Mr=n._a344_0=n.asm.a344_0).apply(null,arguments)},Or=n._a345_1=function(){return(Or=n._a345_1=n.asm.a345_1).apply(null,arguments)},zr=n._a346_0=function(){return(zr=n._a346_0=n.asm.a346_0).apply(null,arguments)},Lr=n._a347_0=function(){return(Lr=n._a347_0=n.asm.a347_0).apply(null,arguments)},Fr=n._a347_1=function(){return(Fr=n._a347_1=n.asm.a347_1).apply(null,arguments)},Ur=n._a348_2=function(){return(Ur=n._a348_2=n.asm.a348_2).apply(null,arguments)},Br=n._a349_1=function(){return(Br=n._a349_1=n.asm.a349_1).apply(null,arguments)},kr=n._a350_1=function(){return(kr=n._a350_1=n.asm.a350_1).apply(null,arguments)},jr=n._a351_0=function(){return(jr=n._a351_0=n.asm.a351_0).apply(null,arguments)},Gr=n._a352_1=function(){return(Gr=n._a352_1=n.asm.a352_1).apply(null,arguments)},Vr=n._a353_2=function(){return(Vr=n._a353_2=n.asm.a353_2).apply(null,arguments)},Hr=n._a353_3=function(){return(Hr=n._a353_3=n.asm.a353_3).apply(null,arguments)},Wr=n._a354_1=function(){return(Wr=n._a354_1=n.asm.a354_1).apply(null,arguments)},qr=n._a355_0=function(){return(qr=n._a355_0=n.asm.a355_0).apply(null,arguments)},Yr=n._a356_3=function(){return(Yr=n._a356_3=n.asm.a356_3).apply(null,arguments)},Xr=n._a356_4=function(){return(Xr=n._a356_4=n.asm.a356_4).apply(null,arguments)},Qr=n._a356_5=function(){return(Qr=n._a356_5=n.asm.a356_5).apply(null,arguments)},Kr=n._a356_6=function(){return(Kr=n._a356_6=n.asm.a356_6).apply(null,arguments)},Zr=n._a357_1=function(){return(Zr=n._a357_1=n.asm.a357_1).apply(null,arguments)},Jr=n._a358_0=function(){return(Jr=n._a358_0=n.asm.a358_0).apply(null,arguments)},$r=n._a359_2=function(){return($r=n._a359_2=n.asm.a359_2).apply(null,arguments)},es=n._a360_0=function(){return(es=n._a360_0=n.asm.a360_0).apply(null,arguments)},ts=n._a361_0=function(){return(ts=n._a361_0=n.asm.a361_0).apply(null,arguments)},ns=n._a362_1=function(){return(ns=n._a362_1=n.asm.a362_1).apply(null,arguments)},is=n._a363_0=function(){return(is=n._a363_0=n.asm.a363_0).apply(null,arguments)},os=n._a364_1=function(){return(os=n._a364_1=n.asm.a364_1).apply(null,arguments)},as=n._a365_3=function(){return(as=n._a365_3=n.asm.a365_3).apply(null,arguments)},rs=n._a366_0=function(){return(rs=n._a366_0=n.asm.a366_0).apply(null,arguments)},ss=n._a367_0=function(){return(ss=n._a367_0=n.asm.a367_0).apply(null,arguments)},cs=n._a368_0=function(){return(cs=n._a368_0=n.asm.a368_0).apply(null,arguments)},ls=n._a368_1=function(){return(ls=n._a368_1=n.asm.a368_1).apply(null,arguments)},_s=n._a368_2=function(){return(_s=n._a368_2=n.asm.a368_2).apply(null,arguments)},us=n._a369_1=function(){return(us=n._a369_1=n.asm.a369_1).apply(null,arguments)},fs=n._a370_1=function(){return(fs=n._a370_1=n.asm.a370_1).apply(null,arguments)},hs=n._a371_0=function(){return(hs=n._a371_0=n.asm.a371_0).apply(null,arguments)},ps=n._a372_4=function(){return(ps=n._a372_4=n.asm.a372_4).apply(null,arguments)},ms=n._a372_5=function(){return(ms=n._a372_5=n.asm.a372_5).apply(null,arguments)},ds=n._a373_4=function(){return(ds=n._a373_4=n.asm.a373_4).apply(null,arguments)},vs=n._a373_5=function(){return(vs=n._a373_5=n.asm.a373_5).apply(null,arguments)},gs=n._a374_3=function(){return(gs=n._a374_3=n.asm.a374_3).apply(null,arguments)},ys=n._a375_1=function(){return(ys=n._a375_1=n.asm.a375_1).apply(null,arguments)},As=n._a376_1=function(){return(As=n._a376_1=n.asm.a376_1).apply(null,arguments)},xs=n._a377_1=function(){return(xs=n._a377_1=n.asm.a377_1).apply(null,arguments)},bs=n._a378_2=function(){return(bs=n._a378_2=n.asm.a378_2).apply(null,arguments)},Cs=n._a379_2=function(){return(Cs=n._a379_2=n.asm.a379_2).apply(null,arguments)},Ss=n._a380_1=function(){return(Ss=n._a380_1=n.asm.a380_1).apply(null,arguments)},Es=n._a381_1=function(){return(Es=n._a381_1=n.asm.a381_1).apply(null,arguments)},ws=n._a382_1=function(){return(ws=n._a382_1=n.asm.a382_1).apply(null,arguments)},Ts=n._a383_0=function(){return(Ts=n._a383_0=n.asm.a383_0).apply(null,arguments)},Ps=n._a384_1=function(){return(Ps=n._a384_1=n.asm.a384_1).apply(null,arguments)},Is=n._a385_2=function(){return(Is=n._a385_2=n.asm.a385_2).apply(null,arguments)},Rs=n._a386_3=function(){return(Rs=n._a386_3=n.asm.a386_3).apply(null,arguments)},Ns=n._a387_0=function(){return(Ns=n._a387_0=n.asm.a387_0).apply(null,arguments)},Ds=n._a388_4=function(){return(Ds=n._a388_4=n.asm.a388_4).apply(null,arguments)},Ms=n._a389_4=function(){return(Ms=n._a389_4=n.asm.a389_4).apply(null,arguments)},Os=n._a390_0=function(){return(Os=n._a390_0=n.asm.a390_0).apply(null,arguments)},zs=n._a391_0=function(){return(zs=n._a391_0=n.asm.a391_0).apply(null,arguments)},Ls=n._a392_0=function(){return(Ls=n._a392_0=n.asm.a392_0).apply(null,arguments)},Fs=n._a393_0=function(){return(Fs=n._a393_0=n.asm.a393_0).apply(null,arguments)},Us=n._a394_1=function(){return(Us=n._a394_1=n.asm.a394_1).apply(null,arguments)},Bs=n._a395_1=function(){return(Bs=n._a395_1=n.asm.a395_1).apply(null,arguments)},ks=n._a396_1=function(){return(ks=n._a396_1=n.asm.a396_1).apply(null,arguments)},js=n._a397_1=function(){return(js=n._a397_1=n.asm.a397_1).apply(null,arguments)},Gs=n._a398_0=function(){return(Gs=n._a398_0=n.asm.a398_0).apply(null,arguments)},Vs=n._a399_2=function(){return(Vs=n._a399_2=n.asm.a399_2).apply(null,arguments)},Hs=n._a400_1=function(){return(Hs=n._a400_1=n.asm.a400_1).apply(null,arguments)},Ws=n._a401_1=function(){return(Ws=n._a401_1=n.asm.a401_1).apply(null,arguments)},qs=n._a402_1=function(){return(qs=n._a402_1=n.asm.a402_1).apply(null,arguments)},Ys=n._a403_1=function(){return(Ys=n._a403_1=n.asm.a403_1).apply(null,arguments)},Xs=n._a404_0=function(){return(Xs=n._a404_0=n.asm.a404_0).apply(null,arguments)},Qs=n._a405_2=function(){return(Qs=n._a405_2=n.asm.a405_2).apply(null,arguments)},Ks=n._a406_0=function(){return(Ks=n._a406_0=n.asm.a406_0).apply(null,arguments)},Zs=n._a407_0=function(){return(Zs=n._a407_0=n.asm.a407_0).apply(null,arguments)},Js=n._a408_1=function(){return(Js=n._a408_1=n.asm.a408_1).apply(null,arguments)},$s=n._a409_0=function(){return($s=n._a409_0=n.asm.a409_0).apply(null,arguments)},ec=n._a410_1=function(){return(ec=n._a410_1=n.asm.a410_1).apply(null,arguments)},tc=n._a411_3=function(){return(tc=n._a411_3=n.asm.a411_3).apply(null,arguments)},nc=n._a412_0=function(){return(nc=n._a412_0=n.asm.a412_0).apply(null,arguments)},ic=n._a413_0=function(){return(ic=n._a413_0=n.asm.a413_0).apply(null,arguments)},oc=n._a414_0=function(){return(oc=n._a414_0=n.asm.a414_0).apply(null,arguments)},ac=n._a415_0=function(){return(ac=n._a415_0=n.asm.a415_0).apply(null,arguments)},rc=n._a416_1=function(){return(rc=n._a416_1=n.asm.a416_1).apply(null,arguments)},sc=n._a417_1=function(){return(sc=n._a417_1=n.asm.a417_1).apply(null,arguments)},cc=n._a418_0=function(){return(cc=n._a418_0=n.asm.a418_0).apply(null,arguments)},lc=n._a419_2=function(){return(lc=n._a419_2=n.asm.a419_2).apply(null,arguments)},_c=n._a420_0=function(){return(_c=n._a420_0=n.asm.a420_0).apply(null,arguments)},uc=n._a421_0=function(){return(uc=n._a421_0=n.asm.a421_0).apply(null,arguments)},fc=n._a422_1=function(){return(fc=n._a422_1=n.asm.a422_1).apply(null,arguments)},hc=n._a423_0=function(){return(hc=n._a423_0=n.asm.a423_0).apply(null,arguments)},pc=n._a424_1=function(){return(pc=n._a424_1=n.asm.a424_1).apply(null,arguments)},mc=n._a425_3=function(){return(mc=n._a425_3=n.asm.a425_3).apply(null,arguments)},dc=n._a426_0=function(){return(dc=n._a426_0=n.asm.a426_0).apply(null,arguments)},vc=n._a427_0=function(){return(vc=n._a427_0=n.asm.a427_0).apply(null,arguments)},gc=n._a428_2=function(){return(gc=n._a428_2=n.asm.a428_2).apply(null,arguments)},yc=n._a429_0=function(){return(yc=n._a429_0=n.asm.a429_0).apply(null,arguments)},Ac=n._a430_1=function(){return(Ac=n._a430_1=n.asm.a430_1).apply(null,arguments)},xc=n._a431_1=function(){return(xc=n._a431_1=n.asm.a431_1).apply(null,arguments)},bc=n._a432_0=function(){return(bc=n._a432_0=n.asm.a432_0).apply(null,arguments)},Cc=n._a433_2=function(){return(Cc=n._a433_2=n.asm.a433_2).apply(null,arguments)},Sc=n._a434_0=function(){return(Sc=n._a434_0=n.asm.a434_0).apply(null,arguments)},Ec=n._a435_0=function(){return(Ec=n._a435_0=n.asm.a435_0).apply(null,arguments)},wc=n._a436_1=function(){return(wc=n._a436_1=n.asm.a436_1).apply(null,arguments)},Tc=n._a437_0=function(){return(Tc=n._a437_0=n.asm.a437_0).apply(null,arguments)},Pc=n._a438_1=function(){return(Pc=n._a438_1=n.asm.a438_1).apply(null,arguments)},Ic=n._a439_3=function(){return(Ic=n._a439_3=n.asm.a439_3).apply(null,arguments)},Rc=n._a440_0=function(){return(Rc=n._a440_0=n.asm.a440_0).apply(null,arguments)},Nc=n._a441_0=function(){return(Nc=n._a441_0=n.asm.a441_0).apply(null,arguments)},Dc=n._a442_2=function(){return(Dc=n._a442_2=n.asm.a442_2).apply(null,arguments)},Mc=n._a443_0=function(){return(Mc=n._a443_0=n.asm.a443_0).apply(null,arguments)},Oc=n._a444_0=function(){return(Oc=n._a444_0=n.asm.a444_0).apply(null,arguments)},zc=n._a445_0=function(){return(zc=n._a445_0=n.asm.a445_0).apply(null,arguments)},Lc=n._a445_3=function(){return(Lc=n._a445_3=n.asm.a445_3).apply(null,arguments)},Fc=n._a446_0=function(){return(Fc=n._a446_0=n.asm.a446_0).apply(null,arguments)},Uc=n._a447_0=function(){return(Uc=n._a447_0=n.asm.a447_0).apply(null,arguments)},Bc=n._a448_0=function(){return(Bc=n._a448_0=n.asm.a448_0).apply(null,arguments)},kc=n._a449_1=function(){return(kc=n._a449_1=n.asm.a449_1).apply(null,arguments)},jc=n._a450_1=function(){return(jc=n._a450_1=n.asm.a450_1).apply(null,arguments)},Gc=n._a451_1=function(){return(Gc=n._a451_1=n.asm.a451_1).apply(null,arguments)},Vc=n._a452_3=function(){return(Vc=n._a452_3=n.asm.a452_3).apply(null,arguments)},Hc=n._a453_0=function(){return(Hc=n._a453_0=n.asm.a453_0).apply(null,arguments)},Wc=n._a454_1=function(){return(Wc=n._a454_1=n.asm.a454_1).apply(null,arguments)},qc=n._a455_1=function(){return(qc=n._a455_1=n.asm.a455_1).apply(null,arguments)},Yc=n._a456_0=function(){return(Yc=n._a456_0=n.asm.a456_0).apply(null,arguments)},Xc=n._a457_1=function(){return(Xc=n._a457_1=n.asm.a457_1).apply(null,arguments)},Qc=n._a458_1=function(){return(Qc=n._a458_1=n.asm.a458_1).apply(null,arguments)},Kc=n._a459_0=function(){return(Kc=n._a459_0=n.asm.a459_0).apply(null,arguments)},Zc=n._a460_2=function(){return(Zc=n._a460_2=n.asm.a460_2).apply(null,arguments)},Jc=n._a461_0=function(){return(Jc=n._a461_0=n.asm.a461_0).apply(null,arguments)},$c=n._a462_0=function(){return($c=n._a462_0=n.asm.a462_0).apply(null,arguments)},el=n._a463_1=function(){return(el=n._a463_1=n.asm.a463_1).apply(null,arguments)},tl=n._a464_0=function(){return(tl=n._a464_0=n.asm.a464_0).apply(null,arguments)},nl=n._a465_1=function(){return(nl=n._a465_1=n.asm.a465_1).apply(null,arguments)},il=n._a466_3=function(){return(il=n._a466_3=n.asm.a466_3).apply(null,arguments)},ol=n._a467_0=function(){return(ol=n._a467_0=n.asm.a467_0).apply(null,arguments)},al=n._a468_0=function(){return(al=n._a468_0=n.asm.a468_0).apply(null,arguments)},rl=n._a469_0=function(){return(rl=n._a469_0=n.asm.a469_0).apply(null,arguments)},sl=n._a470_0=function(){return(sl=n._a470_0=n.asm.a470_0).apply(null,arguments)},cl=n._a471_0=function(){return(cl=n._a471_0=n.asm.a471_0).apply(null,arguments)},ll=n._a472_0=function(){return(ll=n._a472_0=n.asm.a472_0).apply(null,arguments)},_l=n._a473_1=function(){return(_l=n._a473_1=n.asm.a473_1).apply(null,arguments)},ul=n._a474_0=function(){return(ul=n._a474_0=n.asm.a474_0).apply(null,arguments)},fl=n._a475_2=function(){return(fl=n._a475_2=n.asm.a475_2).apply(null,arguments)},hl=n._a476_0=function(){return(hl=n._a476_0=n.asm.a476_0).apply(null,arguments)},pl=n._a477_0=function(){return(pl=n._a477_0=n.asm.a477_0).apply(null,arguments)},ml=n._a478_1=function(){return(ml=n._a478_1=n.asm.a478_1).apply(null,arguments)},dl=n._a479_0=function(){return(dl=n._a479_0=n.asm.a479_0).apply(null,arguments)},vl=n._a480_1=function(){return(vl=n._a480_1=n.asm.a480_1).apply(null,arguments)},gl=n._a481_3=function(){return(gl=n._a481_3=n.asm.a481_3).apply(null,arguments)},yl=n._a482_0=function(){return(yl=n._a482_0=n.asm.a482_0).apply(null,arguments)},Al=n._a483_0=function(){return(Al=n._a483_0=n.asm.a483_0).apply(null,arguments)},xl=n._a484_0=function(){return(xl=n._a484_0=n.asm.a484_0).apply(null,arguments)},bl=n._a485_0=function(){return(bl=n._a485_0=n.asm.a485_0).apply(null,arguments)},Cl=n._a486_1=function(){return(Cl=n._a486_1=n.asm.a486_1).apply(null,arguments)},Sl=n._a487_0=function(){return(Sl=n._a487_0=n.asm.a487_0).apply(null,arguments)},El=n._a488_1=function(){return(El=n._a488_1=n.asm.a488_1).apply(null,arguments)},wl=n._a489_0=function(){return(wl=n._a489_0=n.asm.a489_0).apply(null,arguments)},Tl=n._a490_1=function(){return(Tl=n._a490_1=n.asm.a490_1).apply(null,arguments)},Pl=n._a491_0=function(){return(Pl=n._a491_0=n.asm.a491_0).apply(null,arguments)},Il=n._a492_0=function(){return(Il=n._a492_0=n.asm.a492_0).apply(null,arguments)},Rl=n._a493_1=function(){return(Rl=n._a493_1=n.asm.a493_1).apply(null,arguments)},Nl=n._a494_0=function(){return(Nl=n._a494_0=n.asm.a494_0).apply(null,arguments)},Dl=n._a495_1=function(){return(Dl=n._a495_1=n.asm.a495_1).apply(null,arguments)},Ml=n._a496_0=function(){return(Ml=n._a496_0=n.asm.a496_0).apply(null,arguments)},Ol=n._a497_0=function(){return(Ol=n._a497_0=n.asm.a497_0).apply(null,arguments)},zl=n._a498_1=function(){return(zl=n._a498_1=n.asm.a498_1).apply(null,arguments)},Ll=n._a499_0=function(){return(Ll=n._a499_0=n.asm.a499_0).apply(null,arguments)},Fl=n._a500_0=function(){return(Fl=n._a500_0=n.asm.a500_0).apply(null,arguments)},Ul=n._a501_0=function(){return(Ul=n._a501_0=n.asm.a501_0).apply(null,arguments)},Bl=n._a502_4=function(){return(Bl=n._a502_4=n.asm.a502_4).apply(null,arguments)},kl=n._a503_1=function(){return(kl=n._a503_1=n.asm.a503_1).apply(null,arguments)},jl=n._a504_0=function(){return(jl=n._a504_0=n.asm.a504_0).apply(null,arguments)},Gl=n._a505_1=function(){return(Gl=n._a505_1=n.asm.a505_1).apply(null,arguments)},Vl=n._a506_2=function(){return(Vl=n._a506_2=n.asm.a506_2).apply(null,arguments)},Hl=n._a507_3=function(){return(Hl=n._a507_3=n.asm.a507_3).apply(null,arguments)},Wl=n._a508_0=function(){return(Wl=n._a508_0=n.asm.a508_0).apply(null,arguments)},ql=n._a509_1=function(){return(ql=n._a509_1=n.asm.a509_1).apply(null,arguments)},Yl=n._a510_0=function(){return(Yl=n._a510_0=n.asm.a510_0).apply(null,arguments)},Xl=n._a511_1=function(){return(Xl=n._a511_1=n.asm.a511_1).apply(null,arguments)},Ql=n._a512_2=function(){return(Ql=n._a512_2=n.asm.a512_2).apply(null,arguments)},Kl=n._a513_0=function(){return(Kl=n._a513_0=n.asm.a513_0).apply(null,arguments)},Zl=n._a514_2=function(){return(Zl=n._a514_2=n.asm.a514_2).apply(null,arguments)},Jl=n._a515_2=function(){return(Jl=n._a515_2=n.asm.a515_2).apply(null,arguments)},$l=n._a516_0=function(){return($l=n._a516_0=n.asm.a516_0).apply(null,arguments)},e_=n._a517_1=function(){return(e_=n._a517_1=n.asm.a517_1).apply(null,arguments)},t_=n._a518_1=function(){return(t_=n._a518_1=n.asm.a518_1).apply(null,arguments)},n_=n._a519_2=function(){return(n_=n._a519_2=n.asm.a519_2).apply(null,arguments)},i_=n._a520_1=function(){return(i_=n._a520_1=n.asm.a520_1).apply(null,arguments)},o_=n._a521_1=function(){return(o_=n._a521_1=n.asm.a521_1).apply(null,arguments)},a_=n._a522_2=function(){return(a_=n._a522_2=n.asm.a522_2).apply(null,arguments)},r_=n._a523_0=function(){return(r_=n._a523_0=n.asm.a523_0).apply(null,arguments)},s_=n._a524_0=function(){return(s_=n._a524_0=n.asm.a524_0).apply(null,arguments)},c_=n._a525_0=function(){return(c_=n._a525_0=n.asm.a525_0).apply(null,arguments)},l_=n._a526_1=function(){return(l_=n._a526_1=n.asm.a526_1).apply(null,arguments)},__=n._a527_1=function(){return(__=n._a527_1=n.asm.a527_1).apply(null,arguments)},u_=n._a528_0=function(){return(u_=n._a528_0=n.asm.a528_0).apply(null,arguments)},f_=n._a529_0=function(){return(f_=n._a529_0=n.asm.a529_0).apply(null,arguments)},h_=n._a530_1=function(){return(h_=n._a530_1=n.asm.a530_1).apply(null,arguments)},p_=n._a531_2=function(){return(p_=n._a531_2=n.asm.a531_2).apply(null,arguments)},m_=n._a532_1=function(){return(m_=n._a532_1=n.asm.a532_1).apply(null,arguments)},d_=n._a533_0=function(){return(d_=n._a533_0=n.asm.a533_0).apply(null,arguments)},v_=n._a534_1=function(){return(v_=n._a534_1=n.asm.a534_1).apply(null,arguments)},g_=n._a535_0=function(){return(g_=n._a535_0=n.asm.a535_0).apply(null,arguments)},y_=n._a536_0=function(){return(y_=n._a536_0=n.asm.a536_0).apply(null,arguments)},A_=n._a537_0=function(){return(A_=n._a537_0=n.asm.a537_0).apply(null,arguments)},x_=n._a538_0=function(){return(x_=n._a538_0=n.asm.a538_0).apply(null,arguments)},b_=n._a539_0=function(){return(b_=n._a539_0=n.asm.a539_0).apply(null,arguments)},C_=n._a540_0=function(){return(C_=n._a540_0=n.asm.a540_0).apply(null,arguments)},S_=n._a541_0=function(){return(S_=n._a541_0=n.asm.a541_0).apply(null,arguments)},E_=n._a542_1=function(){return(E_=n._a542_1=n.asm.a542_1).apply(null,arguments)},w_=n._a543_1=function(){return(w_=n._a543_1=n.asm.a543_1).apply(null,arguments)},T_=n._a544_0=function(){return(T_=n._a544_0=n.asm.a544_0).apply(null,arguments)},P_=n._a544_1=function(){return(P_=n._a544_1=n.asm.a544_1).apply(null,arguments)},I_=n._a545_0=function(){return(I_=n._a545_0=n.asm.a545_0).apply(null,arguments)},R_=n._a546_0=function(){return(R_=n._a546_0=n.asm.a546_0).apply(null,arguments)},N_=n._a547_0=function(){return(N_=n._a547_0=n.asm.a547_0).apply(null,arguments)},D_=n._a548_0=function(){return(D_=n._a548_0=n.asm.a548_0).apply(null,arguments)},M_=n._a549_1=function(){return(M_=n._a549_1=n.asm.a549_1).apply(null,arguments)},O_=n._a550_1=function(){return(O_=n._a550_1=n.asm.a550_1).apply(null,arguments)},z_=n._a551_1=function(){return(z_=n._a551_1=n.asm.a551_1).apply(null,arguments)},L_=n._a552_1=function(){return(L_=n._a552_1=n.asm.a552_1).apply(null,arguments)},F_=n._a553_0=function(){return(F_=n._a553_0=n.asm.a553_0).apply(null,arguments)},U_=n._a554_0=function(){return(U_=n._a554_0=n.asm.a554_0).apply(null,arguments)},B_=n._a555_1=function(){return(B_=n._a555_1=n.asm.a555_1).apply(null,arguments)},k_=n._a556_1=function(){return(k_=n._a556_1=n.asm.a556_1).apply(null,arguments)},j_=n._a557_1=function(){return(j_=n._a557_1=n.asm.a557_1).apply(null,arguments)},G_=n._a558_1=function(){return(G_=n._a558_1=n.asm.a558_1).apply(null,arguments)},V_=n._a559_1=function(){return(V_=n._a559_1=n.asm.a559_1).apply(null,arguments)},H_=n._a560_0=function(){return(H_=n._a560_0=n.asm.a560_0).apply(null,arguments)},W_=n._a561_1=function(){return(W_=n._a561_1=n.asm.a561_1).apply(null,arguments)},q_=n._a562_1=function(){return(q_=n._a562_1=n.asm.a562_1).apply(null,arguments)},Y_=n._a563_2=function(){return(Y_=n._a563_2=n.asm.a563_2).apply(null,arguments)},X_=n._a564_0=function(){return(X_=n._a564_0=n.asm.a564_0).apply(null,arguments)},Q_=n._a565_0=function(){return(Q_=n._a565_0=n.asm.a565_0).apply(null,arguments)},K_=n._a566_1=function(){return(K_=n._a566_1=n.asm.a566_1).apply(null,arguments)},Z_=n._a567_0=function(){return(Z_=n._a567_0=n.asm.a567_0).apply(null,arguments)},J_=n._a568_4=function(){return(J_=n._a568_4=n.asm.a568_4).apply(null,arguments)},$_=n._a569_1=function(){return($_=n._a569_1=n.asm.a569_1).apply(null,arguments)},eu=n._a570_1=function(){return(eu=n._a570_1=n.asm.a570_1).apply(null,arguments)},tu=n._a571_1=function(){return(tu=n._a571_1=n.asm.a571_1).apply(null,arguments)},nu=n._a572_1=function(){return(nu=n._a572_1=n.asm.a572_1).apply(null,arguments)},iu=n._a573_1=function(){return(iu=n._a573_1=n.asm.a573_1).apply(null,arguments)},ou=n._a574_0=function(){return(ou=n._a574_0=n.asm.a574_0).apply(null,arguments)},au=n._a575_3=function(){return(au=n._a575_3=n.asm.a575_3).apply(null,arguments)},ru=n._a576_6=function(){return(ru=n._a576_6=n.asm.a576_6).apply(null,arguments)},su=n._a577_1=function(){return(su=n._a577_1=n.asm.a577_1).apply(null,arguments)},cu=n._a577_2=function(){return(cu=n._a577_2=n.asm.a577_2).apply(null,arguments)},lu=n._a577_3=function(){return(lu=n._a577_3=n.asm.a577_3).apply(null,arguments)},_u=n._a578_1=function(){return(_u=n._a578_1=n.asm.a578_1).apply(null,arguments)},uu=n._a579_1=function(){return(uu=n._a579_1=n.asm.a579_1).apply(null,arguments)},fu=n._a580_1=function(){return(fu=n._a580_1=n.asm.a580_1).apply(null,arguments)},hu=n._a581_0=function(){return(hu=n._a581_0=n.asm.a581_0).apply(null,arguments)},pu=n._a582_1=function(){return(pu=n._a582_1=n.asm.a582_1).apply(null,arguments)},mu=n._a582_3=function(){return(mu=n._a582_3=n.asm.a582_3).apply(null,arguments)},du=n._a583_1=function(){return(du=n._a583_1=n.asm.a583_1).apply(null,arguments)},vu=n._a584_1=function(){return(vu=n._a584_1=n.asm.a584_1).apply(null,arguments)},gu=n._a584_2=function(){return(gu=n._a584_2=n.asm.a584_2).apply(null,arguments)},yu=n._a585_1=function(){return(yu=n._a585_1=n.asm.a585_1).apply(null,arguments)},Au=n._a586_1=function(){return(Au=n._a586_1=n.asm.a586_1).apply(null,arguments)},xu=n._a586_2=function(){return(xu=n._a586_2=n.asm.a586_2).apply(null,arguments)},bu=n._a586_3=function(){return(bu=n._a586_3=n.asm.a586_3).apply(null,arguments)},Cu=n._a587_1=function(){return(Cu=n._a587_1=n.asm.a587_1).apply(null,arguments)},Su=n._a588_1=function(){return(Su=n._a588_1=n.asm.a588_1).apply(null,arguments)},Eu=n._a589_0=function(){return(Eu=n._a589_0=n.asm.a589_0).apply(null,arguments)},wu=n._a590_0=function(){return(wu=n._a590_0=n.asm.a590_0).apply(null,arguments)},Tu=n._a591_0=function(){return(Tu=n._a591_0=n.asm.a591_0).apply(null,arguments)},Pu=n._a591_2=function(){return(Pu=n._a591_2=n.asm.a591_2).apply(null,arguments)},Iu=n._a592_0=function(){return(Iu=n._a592_0=n.asm.a592_0).apply(null,arguments)},Ru=n._a593_1=function(){return(Ru=n._a593_1=n.asm.a593_1).apply(null,arguments)},Nu=n._a594_1=function(){return(Nu=n._a594_1=n.asm.a594_1).apply(null,arguments)},Du=n._a595_0=function(){return(Du=n._a595_0=n.asm.a595_0).apply(null,arguments)},Mu=n._a596_0=function(){return(Mu=n._a596_0=n.asm.a596_0).apply(null,arguments)},Ou=n._a597_0=function(){return(Ou=n._a597_0=n.asm.a597_0).apply(null,arguments)},zu=n._a598_0=function(){return(zu=n._a598_0=n.asm.a598_0).apply(null,arguments)},Lu=n._a599_1=function(){return(Lu=n._a599_1=n.asm.a599_1).apply(null,arguments)},Fu=n._a600_0=function(){return(Fu=n._a600_0=n.asm.a600_0).apply(null,arguments)},Uu=n._a601_1=function(){return(Uu=n._a601_1=n.asm.a601_1).apply(null,arguments)},Bu=n._a602_1=function(){return(Bu=n._a602_1=n.asm.a602_1).apply(null,arguments)},ku=n._a603_0=function(){return(ku=n._a603_0=n.asm.a603_0).apply(null,arguments)},ju=n._a604_3=function(){return(ju=n._a604_3=n.asm.a604_3).apply(null,arguments)},Gu=n._a605_1=function(){return(Gu=n._a605_1=n.asm.a605_1).apply(null,arguments)},Vu=n._a606_0=function(){return(Vu=n._a606_0=n.asm.a606_0).apply(null,arguments)},Hu=n._a607_2=function(){return(Hu=n._a607_2=n.asm.a607_2).apply(null,arguments)},Wu=n._a608_0=function(){return(Wu=n._a608_0=n.asm.a608_0).apply(null,arguments)},qu=n._a609_0=function(){return(qu=n._a609_0=n.asm.a609_0).apply(null,arguments)},Yu=n._a610_1=function(){return(Yu=n._a610_1=n.asm.a610_1).apply(null,arguments)},Xu=n._a611_0=function(){return(Xu=n._a611_0=n.asm.a611_0).apply(null,arguments)},Qu=n._a612_1=function(){return(Qu=n._a612_1=n.asm.a612_1).apply(null,arguments)},Ku=n._a613_3=function(){return(Ku=n._a613_3=n.asm.a613_3).apply(null,arguments)},Zu=n._a614_0=function(){return(Zu=n._a614_0=n.asm.a614_0).apply(null,arguments)},Ju=n._a615_0=function(){return(Ju=n._a615_0=n.asm.a615_0).apply(null,arguments)},$u=n._a616_0=function(){return($u=n._a616_0=n.asm.a616_0).apply(null,arguments)},ef=n._a617a618=function(){return(ef=n._a617a618=n.asm.a617a618).apply(null,arguments)},tf=n._a617a619=function(){return(tf=n._a617a619=n.asm.a617a619).apply(null,arguments)},nf=n._a617a620=function(){return(nf=n._a617a620=n.asm.a617a620).apply(null,arguments)},of=n._a617a621=function(){return(of=n._a617a621=n.asm.a617a621).apply(null,arguments)},af=n._a622a623=function(){return(af=n._a622a623=n.asm.a622a623).apply(null,arguments)},rf=n._a622a624=function(){return(rf=n._a622a624=n.asm.a622a624).apply(null,arguments)},sf=n._a622a625=function(){return(sf=n._a622a625=n.asm.a622a625).apply(null,arguments)},cf=n._a622a626=function(){return(cf=n._a622a626=n.asm.a622a626).apply(null,arguments)},lf=n._a622a627=function(){return(lf=n._a622a627=n.asm.a622a627).apply(null,arguments)},_f=n._a622a628=function(){return(_f=n._a622a628=n.asm.a622a628).apply(null,arguments)};n._malloc=function(){return(n._malloc=n.asm.malloc).apply(null,arguments)},n._free=function(){return(n._free=n.asm.free).apply(null,arguments)};var uf,ff=n.__growWasmMemory=function(){return(ff=n.__growWasmMemory=n.asm.__growWasmMemory).apply(null,arguments)};function hf(){function e(){if(!uf&&(uf=!0,n.calledRun=!0,!C)){if(N=!0,w(P),w(I),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;){var e=n.postRun.shift();R.unshift(e)}w(R)}}if(!(0<M)){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)D();w(T),0<M||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e())}}if(n.dynCall_vi=function(){return(n.dynCall_vi=n.asm.dynCall_vi).apply(null,arguments)},n.dynCall_v=function(){return(n.dynCall_v=n.asm.dynCall_v).apply(null,arguments)},n.asm=H,n.addFunction=function(e){if(!f){f=new WeakMap;for(var t=0;t<b.length;t++){var n=b.get(t);n&&f.set(n,t)}}if(f.has(e))e=f.get(e);else{if(p.length)t=p.pop();else{t=b.length;try{b.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}}try{b.set(t,e)}catch(n){if(!(n instanceof TypeError))throw n;b.set(t,e)}f.set(e,t),e=t}return e},O=function e(){uf||hf(),uf||(O=e)},n.run=hf,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();function pf(){}function mf(e){return(e||pf).c}function df(e,t){var n=mf(t),i=n[e];return i||((i=Object.create((t||pf).prototype)).a=e,n[e]=i)}function vf(){throw"cannot construct a btCollisionShape, no constructor in IDL"}function gf(){throw"cannot construct a btCollisionWorld, no constructor in IDL"}function yf(){throw"cannot construct a btConvexShape, no constructor in IDL"}function Af(){throw"cannot construct a btDynamicsWorld, no constructor in IDL"}function xf(){throw"cannot construct a RayResultCallback, no constructor in IDL"}function bf(){throw"cannot construct a btConcaveShape, no constructor in IDL"}function Cf(){throw"cannot construct a btStridingMeshInterface, no constructor in IDL"}function Sf(){throw"cannot construct a btBroadphaseInterface, no constructor in IDL"}function Ef(){this.a=$e(),mf(Ef)[this.a]=this}function wf(e,t,n,i){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),this.a=wt(e,t,n,i),mf(wf)[this.a]=this}function Tf(){throw"cannot construct a btMotionState, no constructor in IDL"}function Pf(){throw"cannot construct a btConvexInternalShape, no constructor in IDL"}function If(){throw"cannot construct a AllHitsRayResultCallback, no constructor in IDL"}function Rf(){throw"cannot construct a btDispatcher, no constructor in IDL"}function Nf(){throw"cannot construct a ClosestRayResultCallback, no constructor in IDL"}function Df(){throw"cannot construct a btTriangleMeshShape, no constructor in IDL"}function Mf(){throw"cannot construct a btQuadWord, no constructor in IDL"}function Of(){throw"cannot construct a btTypedConstraint, no constructor in IDL"}function zf(){throw"cannot construct a btMatrix3x3, no constructor in IDL"}function Lf(){throw"cannot construct a btScalarArray, no constructor in IDL"}function Ff(e,t,n){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),this.a=void 0===n?ri(e,t):si(e,t,n),mf(Ff)[this.a]=this}function Uf(){this.a=yi(),mf(Uf)[this.a]=this}function Bf(){throw"cannot construct a btIntArray, no constructor in IDL"}function kf(e,t){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),this.a=Ei(e,t),mf(kf)[this.a]=this}function jf(e,t){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),this.a=Fi(e,t),mf(jf)[this.a]=this}function Gf(){throw"cannot construct a btBroadphaseProxy, no constructor in IDL"}function Vf(){throw"cannot construct a btIndexedMesh, no constructor in IDL"}function Hf(e,t,n,i){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),this.a=void 0===i?so(e,t,n):co(e,t,n,i),mf(Hf)[this.a]=this}function Wf(){throw"cannot construct a btManifoldPoint, no constructor in IDL"}function qf(){this.a=qo(),mf(qf)[this.a]=this}function Yf(e,t,n,i){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),this.a=void 0===n?Xo(e,t):void 0===i?_a257_3(e,t,n):Qo(e,t,n,i),mf(Yf)[this.a]=this}function Xf(e,t){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),this.a=void 0===t?ca(e):la(e,t),mf(Xf)[this.a]=this}function Qf(e,t){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),this.a=Ca(e,t),mf(Qf)[this.a]=this}function Kf(e,t,n,i,o,a,r,s,c){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),o&&"object"==typeof o&&(o=o.a),a&&"object"==typeof a&&(a=a.a),r&&"object"==typeof r&&(r=r.a),s&&"object"==typeof s&&(s=s.a),c&&"object"==typeof c&&(c=c.a),this.a=za(e,t,n,i,o,a,r,s,c),mf(Kf)[this.a]=this}function Zf(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Jf(e){e&&"object"==typeof e&&(e=e.a),this.a=void 0===e?Ka():Za(e),mf(Jf)[this.a]=this}function $f(e,t){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),this.a=void 0===e?$a():void 0===t?er(e):tr(e,t),mf($f)[this.a]=this}function eh(){throw"cannot construct a btCollisionConfiguration, no constructor in IDL"}function th(){this.a=lr(),mf(th)[this.a]=this}function nh(e){e&&"object"==typeof e&&(e=e.a),this.a=mr(e),mf(nh)[this.a]=this}function ih(e){e&&"object"==typeof e&&(e=e.a),this.a=Nr(e),mf(ih)[this.a]=this}function oh(e){e&&"object"==typeof e&&(e=e.a),this.a=void 0===e?Lr():Fr(e),mf(oh)[this.a]=this}function ah(e,t){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),this.a=void 0===e?cs():void 0===t?ls(e):_s(e,t),mf(ah)[this.a]=this}function rh(e,t,n,i,o){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),o&&"object"==typeof o&&(o=o.a),this.a=void 0===o?ps(e,t,n,i):ms(e,t,n,i,o),mf(rh)[this.a]=this}function sh(e,t,n,i){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),this.a=Ds(e,t,n,i),mf(sh)[this.a]=this}function ch(e,t){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),this.a=Vs(e,t),mf(ch)[this.a]=this}function lh(){this.a=ac(),mf(lh)[this.a]=this}function _h(e,t){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),this.a=gc(e,t),mf(_h)[this.a]=this}function uh(){throw"cannot construct a btActionInterface, no constructor in IDL"}function fh(){throw"cannot construct a btOverlappingPairCache, no constructor in IDL"}function hh(e,t,n){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),this.a=void 0===e?zc():void 0===t?_a445_1(e):void 0===n?_a445_2(e,t):Lc(e,t,n),mf(hh)[this.a]=this}function ph(e){e&&"object"==typeof e&&(e=e.a),this.a=Wc(e),mf(ph)[this.a]=this}function mh(){this.a=sl(),mf(mh)[this.a]=this}function dh(){this.a=ll(),mf(dh)[this.a]=this}function vh(){this.a=xl(),mf(vh)[this.a]=this}function gh(){throw"cannot construct a LocalShapeInfo, no constructor in IDL"}function yh(){throw"cannot construct a btVector3Array, no constructor in IDL"}function Ah(){throw"cannot construct a btConstraintSolver, no constructor in IDL"}function xh(e,t,n,i){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),this.a=Bl(e,t,n,i),mf(xh)[this.a]=this}function bh(e){e&&"object"==typeof e&&(e=e.a),this.a=ql(e),mf(bh)[this.a]=this}function Ch(){throw"cannot construct a btIndexedMeshArray, no constructor in IDL"}function Sh(e,t,n,i){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),this.a=J_(e,t,n,i),mf(Sh)[this.a]=this}function Eh(e,t){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),this.a=void 0===e?Tu():void 0===t?_a591_1(e):Pu(e,t),mf(Eh)[this.a]=this}function wh(e){e&&"object"==typeof e&&(e=e.a),this.a=Uu(e),mf(wh)[this.a]=this}return hf(),pf.prototype=Object.create(pf.prototype),pf.prototype.constructor=pf,pf.prototype.b=pf,pf.c={},n.WrapperObject=pf,n.getCache=mf,n.wrapPointer=df,n.castObject=function(e,t){return df(e.a,t)},n.NULL=df(0),n.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete mf(e.b)[e.a]},n.compare=function(e,t){return e.a===t.a},n.getPointer=function(e){return e.a},n.getClass=function(e){return e.b},vf.prototype=Object.create(pf.prototype),vf.prototype.constructor=vf,vf.prototype.b=vf,vf.c={},n.btCollisionShape=vf,vf.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),q(t,e)},vf.prototype.getLocalScaling=function(){return df(Y(this.a),hh)},vf.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),X(n,e,t)},vf.prototype.setMargin=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Q(t,e)},vf.prototype.getMargin=function(){return K(this.a)},vf.prototype.isCompound=function(){return!!Z(this.a)},vf.prototype.getUserIndex=function(){return J(this.a)},vf.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),$(t,e)},vf.prototype.getUserPointerAsInt=function(){return ee(this.a)},vf.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),te(t,e)},vf.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),ne(i,e,t,n)},vf.prototype.getLocalBoundingSphere=function(){return ie(this.a)},vf.prototype.__destroy__=function(){oe(this.a)},gf.prototype=Object.create(pf.prototype),gf.prototype.constructor=gf,gf.prototype.b=gf,gf.c={},n.btCollisionWorld=gf,gf.prototype.rayTest=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),ae(i,e,t,n)},gf.prototype.rayTestSingle=function(e,t,n,i,o,a){var r=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),o&&"object"==typeof o&&(o=o.a),a&&"object"==typeof a&&(a=a.a),re(r,e,t,n,i,o,a)},gf.prototype.addCollisionObject=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),void 0===t?se(i,e):void 0===n?ce(i,e,t):le(i,e,t,n)},gf.prototype.removeCollisionObject=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),_e(t,e)},gf.prototype.setContactBreakingThreshold=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ue(t,e)},gf.prototype.__destroy__=function(){fe(this.a)},yf.prototype=Object.create(vf.prototype),yf.prototype.constructor=yf,yf.prototype.b=yf,yf.c={},n.btConvexShape=yf,yf.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),he(t,e)},yf.prototype.getLocalScaling=function(){return df(pe(this.a),hh)},yf.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),me(n,e,t)},yf.prototype.setMargin=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),de(t,e)},yf.prototype.getMargin=function(){return ve(this.a)},yf.prototype.isCompound=function(){return!!ge(this.a)},yf.prototype.getUserIndex=function(){return ye(this.a)},yf.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ae(t,e)},yf.prototype.getUserPointerAsInt=function(){return xe(this.a)},yf.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),be(t,e)},yf.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Ce(i,e,t,n)},yf.prototype.getLocalBoundingSphere=function(){return Se(this.a)},yf.prototype.__destroy__=function(){Ee(this.a)},Af.prototype=Object.create(gf.prototype),Af.prototype.constructor=Af,Af.prototype.b=Af,Af.c={},n.btDynamicsWorld=Af,Af.prototype.addAction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),we(t,e)},Af.prototype.removeAction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Te(t,e)},Af.prototype.getFixedBody=function(){return df(Pe(this.a),bh)},Af.prototype.rayTest=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Ie(i,e,t,n)},Af.prototype.rayTestSingle=function(e,t,n,i,o,a){var r=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),o&&"object"==typeof o&&(o=o.a),a&&"object"==typeof a&&(a=a.a),Re(r,e,t,n,i,o,a)},Af.prototype.addCollisionObject=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),void 0===t?Ne(i,e):void 0===n?De(i,e,t):Me(i,e,t,n)},Af.prototype.removeCollisionObject=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Oe(t,e)},Af.prototype.setContactBreakingThreshold=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ze(t,e)},Af.prototype.__destroy__=function(){Le(this.a)},xf.prototype=Object.create(pf.prototype),xf.prototype.constructor=xf,xf.prototype.b=xf,xf.c={},n.RayResultCallback=xf,xf.prototype.hasHit=function(){return!!Fe(this.a)},xf.prototype.__destroy__=function(){Ue(this.a)},bf.prototype=Object.create(vf.prototype),bf.prototype.constructor=bf,bf.prototype.b=bf,bf.c={},n.btConcaveShape=bf,bf.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Be(t,e)},bf.prototype.getLocalScaling=function(){return df(ke(this.a),hh)},bf.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),je(n,e,t)},bf.prototype.isCompound=function(){return!!Ge(this.a)},bf.prototype.getUserIndex=function(){return Ve(this.a)},bf.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),He(t,e)},bf.prototype.getUserPointerAsInt=function(){return We(this.a)},bf.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),qe(t,e)},bf.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Ye(i,e,t,n)},bf.prototype.getLocalBoundingSphere=function(){return Xe(this.a)},bf.prototype.__destroy__=function(){Qe(this.a)},Cf.prototype=Object.create(pf.prototype),Cf.prototype.constructor=Cf,Cf.prototype.b=Cf,Cf.c={},n.btStridingMeshInterface=Cf,Cf.prototype.setScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ke(t,e)},Cf.prototype.__destroy__=function(){Ze(this.a)},Sf.prototype=Object.create(pf.prototype),Sf.prototype.constructor=Sf,Sf.prototype.b=Sf,Sf.c={},n.btBroadphaseInterface=Sf,Sf.prototype.__destroy__=function(){Je(this.a)},Ef.prototype=Object.create(pf.prototype),Ef.prototype.constructor=Ef,Ef.prototype.b=Ef,Ef.c={},n.btCollisionObject=Ef,Ef.prototype.getCollisionShape=function(){return df(et(this.a),vf)},Ef.prototype.getActivationState=function(){return tt(this.a)},Ef.prototype.setActivationState=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),nt(t,e)},Ef.prototype.forceActivationState=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),it(t,e)},Ef.prototype.activate=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),void 0===e?ot(t):at(t,e)},Ef.prototype.isActive=function(){return!!rt(this.a)},Ef.prototype.isKinematicObject=function(){return!!st(this.a)},Ef.prototype.isStaticObject=function(){return!!ct(this.a)},Ef.prototype.isStaticOrKinematicObject=function(){return!!lt(this.a)},Ef.prototype.setRestitution=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),_t(t,e)},Ef.prototype.setFriction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ut(t,e)},Ef.prototype.setRollingFriction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ft(t,e)},Ef.prototype.setSpinningFriction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ht(t,e)},Ef.prototype.getWorldTransform=function(){return df(pt(this.a),Eh)},Ef.prototype.getCollisionFlags=function(){return mt(this.a)},Ef.prototype.setCollisionFlags=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),dt(t,e)},Ef.prototype.setWorldTransform=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),vt(t,e)},Ef.prototype.setCollisionShape=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),gt(t,e)},Ef.prototype.setCcdMotionThreshold=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),yt(t,e)},Ef.prototype.setCcdSweptSphereRadius=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),At(t,e)},Ef.prototype.getUserIndex=function(){return xt(this.a)},Ef.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),bt(t,e)},Ef.prototype.setUserIndex2=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ct(t,e)},Ef.prototype.setIgnoreCollisionCheck=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),St(n,e,t)},Ef.prototype.__destroy__=function(){Et(this.a)},wf.prototype=Object.create(Af.prototype),wf.prototype.constructor=wf,wf.prototype.b=wf,wf.c={},n.btDiscreteDynamicsWorld=wf,wf.prototype.setGravity=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Tt(t,e)},wf.prototype.getGravity=function(){return df(Pt(this.a),hh)},wf.prototype.addRigidBody=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),void 0===t?It(i,e):void 0===n?_a86_2(i,e,t):Rt(i,e,t,n)},wf.prototype.removeRigidBody=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Nt(t,e)},wf.prototype.addConstraint=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),void 0===t?Dt(n,e):Mt(n,e,t)},wf.prototype.removeConstraint=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ot(t,e)},wf.prototype.stepSimulation=function(e,t,n){var i=this.a;return e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),void 0===t?zt(i,e):void 0===n?Lt(i,e,t):Ft(i,e,t,n)},wf.prototype.rayTest=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Ut(i,e,t,n)},wf.prototype.rayTestSingle=function(e,t,n,i,o,a){var r=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),o&&"object"==typeof o&&(o=o.a),a&&"object"==typeof a&&(a=a.a),Bt(r,e,t,n,i,o,a)},wf.prototype.addCollisionObject=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),void 0===t?kt(i,e):void 0===n?jt(i,e,t):Gt(i,e,t,n)},wf.prototype.removeCollisionObject=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Vt(t,e)},wf.prototype.setContactBreakingThreshold=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ht(t,e)},wf.prototype.addAction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Wt(t,e)},wf.prototype.removeAction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),qt(t,e)},wf.prototype.getFixedBody=function(){return df(Yt(this.a),bh)},wf.prototype.__destroy__=function(){Xt(this.a)},Tf.prototype=Object.create(pf.prototype),Tf.prototype.constructor=Tf,Tf.prototype.b=Tf,Tf.c={},n.btMotionState=Tf,Tf.prototype.getWorldTransform=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Qt(t,e)},Tf.prototype.setWorldTransform=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Kt(t,e)},Tf.prototype.__destroy__=function(){Zt(this.a)},Pf.prototype=Object.create(yf.prototype),Pf.prototype.constructor=Pf,Pf.prototype.b=Pf,Pf.c={},n.btConvexInternalShape=Pf,Pf.prototype.getImplicitShapeDimensions=function(){return df(Jt(this.a),hh)},Pf.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),$t(t,e)},Pf.prototype.getLocalScaling=function(){return df(en(this.a),hh)},Pf.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),tn(n,e,t)},Pf.prototype.setMargin=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),nn(t,e)},Pf.prototype.getMargin=function(){return on(this.a)},Pf.prototype.isCompound=function(){return!!an(this.a)},Pf.prototype.getUserIndex=function(){return rn(this.a)},Pf.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),sn(t,e)},Pf.prototype.getUserPointerAsInt=function(){return cn(this.a)},Pf.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ln(t,e)},Pf.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),_n(i,e,t,n)},Pf.prototype.getLocalBoundingSphere=function(){return un(this.a)},Pf.prototype.__destroy__=function(){fn(this.a)},If.prototype=Object.create(xf.prototype),If.prototype.constructor=If,If.prototype.b=If,If.c={},n.AllHitsRayResultCallback=If,If.prototype.hasHit=function(){return!!hn(this.a)},If.prototype.get_m_rayFromWorld=If.prototype.f=function(){return df(pn(this.a),hh)},If.prototype.set_m_rayFromWorld=If.prototype.h=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),mn(t,e)},Object.defineProperty(If.prototype,"m_rayFromWorld",{get:If.prototype.f,set:If.prototype.h}),If.prototype.get_m_rayToWorld=If.prototype.g=function(){return df(dn(this.a),hh)},If.prototype.set_m_rayToWorld=If.prototype.i=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),vn(t,e)},Object.defineProperty(If.prototype,"m_rayToWorld",{get:If.prototype.g,set:If.prototype.i}),If.prototype.__destroy__=function(){gn(this.a)},Rf.prototype=Object.create(pf.prototype),Rf.prototype.constructor=Rf,Rf.prototype.b=Rf,Rf.c={},n.btDispatcher=Rf,Rf.prototype.getNumManifolds=function(){return yn(this.a)},Rf.prototype.getManifoldByIndexInternal=function(e){var t=this.a;return e&&"object"==typeof e&&(e=e.a),df(An(t,e),th)},Rf.prototype.__destroy__=function(){xn(this.a)},Nf.prototype=Object.create(xf.prototype),Nf.prototype.constructor=Nf,Nf.prototype.b=Nf,Nf.c={},n.ClosestRayResultCallback=Nf,Nf.prototype.hasHit=function(){return!!bn(this.a)},Nf.prototype.get_m_rayFromWorld=Nf.prototype.f=function(){return df(Cn(this.a),hh)},Nf.prototype.set_m_rayFromWorld=Nf.prototype.h=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Sn(t,e)},Object.defineProperty(Nf.prototype,"m_rayFromWorld",{get:Nf.prototype.f,set:Nf.prototype.h}),Nf.prototype.get_m_rayToWorld=Nf.prototype.g=function(){return df(En(this.a),hh)},Nf.prototype.set_m_rayToWorld=Nf.prototype.i=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),wn(t,e)},Object.defineProperty(Nf.prototype,"m_rayToWorld",{get:Nf.prototype.g,set:Nf.prototype.i}),Nf.prototype.__destroy__=function(){Tn(this.a)},Df.prototype=Object.create(bf.prototype),Df.prototype.constructor=Df,Df.prototype.b=Df,Df.c={},n.btTriangleMeshShape=Df,Df.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Pn(t,e)},Df.prototype.getLocalScaling=function(){return df(In(this.a),hh)},Df.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Rn(n,e,t)},Df.prototype.isCompound=function(){return!!Nn(this.a)},Df.prototype.getUserIndex=function(){return Dn(this.a)},Df.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Mn(t,e)},Df.prototype.getUserPointerAsInt=function(){return On(this.a)},Df.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),zn(t,e)},Df.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Ln(i,e,t,n)},Df.prototype.getLocalBoundingSphere=function(){return Fn(this.a)},Df.prototype.__destroy__=function(){Un(this.a)},Mf.prototype=Object.create(pf.prototype),Mf.prototype.constructor=Mf,Mf.prototype.b=Mf,Mf.c={},n.btQuadWord=Mf,Mf.prototype.x=Mf.prototype.x=function(){return Bn(this.a)},Mf.prototype.y=Mf.prototype.y=function(){return kn(this.a)},Mf.prototype.z=Mf.prototype.z=function(){return jn(this.a)},Mf.prototype.w=function(){return Gn(this.a)},Mf.prototype.setX=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Vn(t,e)},Mf.prototype.setY=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Hn(t,e)},Mf.prototype.setZ=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Wn(t,e)},Mf.prototype.setW=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),qn(t,e)},Mf.prototype.__destroy__=function(){Yn(this.a)},Of.prototype=Object.create(pf.prototype),Of.prototype.constructor=Of,Of.prototype.b=Of,Of.c={},n.btTypedConstraint=Of,Of.prototype.enableFeedback=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Xn(t,e)},Of.prototype.getBreakingImpulseThreshold=function(){return Qn(this.a)},Of.prototype.setBreakingImpulseThreshold=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Kn(t,e)},Of.prototype.getParam=function(e,t){var n=this.a;return e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Zn(n,e,t)},Of.prototype.setParam=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Jn(i,e,t,n)},Of.prototype.__destroy__=function(){$n(this.a)},zf.prototype=Object.create(pf.prototype),zf.prototype.constructor=zf,zf.prototype.b=zf,zf.c={},n.btMatrix3x3=zf,zf.prototype.getRotation=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ei(t,e)},zf.prototype.__destroy__=function(){ti(this.a)},Lf.prototype=Object.create(pf.prototype),Lf.prototype.constructor=Lf,Lf.prototype.b=Lf,Lf.c={},n.btScalarArray=Lf,Lf.prototype.size=Lf.prototype.size=function(){return ni(this.a)},Lf.prototype.at=function(e){var t=this.a;return e&&"object"==typeof e&&(e=e.a),ii(t,e)},Lf.prototype.clear=Lf.prototype.clear=function(){oi(this.a)},Lf.prototype.__destroy__=function(){ai(this.a)},Ff.prototype=Object.create(Df.prototype),Ff.prototype.constructor=Ff,Ff.prototype.b=Ff,Ff.c={},n.btBvhTriangleMeshShape=Ff,Ff.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ci(t,e)},Ff.prototype.getLocalScaling=function(){return df(li(this.a),hh)},Ff.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),_i(n,e,t)},Ff.prototype.isCompound=function(){return!!ui(this.a)},Ff.prototype.getUserIndex=function(){return fi(this.a)},Ff.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),hi(t,e)},Ff.prototype.getUserPointerAsInt=function(){return pi(this.a)},Ff.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),mi(t,e)},Ff.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),di(i,e,t,n)},Ff.prototype.getLocalBoundingSphere=function(){return vi(this.a)},Ff.prototype.__destroy__=function(){gi(this.a)},Uf.prototype=Object.create(Sf.prototype),Uf.prototype.constructor=Uf,Uf.prototype.b=Uf,Uf.c={},n.btDbvtBroadphase=Uf,Uf.prototype.__destroy__=function(){Ai(this.a)},Bf.prototype=Object.create(pf.prototype),Bf.prototype.constructor=Bf,Bf.prototype.b=Bf,Bf.c={},n.btIntArray=Bf,Bf.prototype.size=Bf.prototype.size=function(){return xi(this.a)},Bf.prototype.at=function(e){var t=this.a;return e&&"object"==typeof e&&(e=e.a),bi(t,e)},Bf.prototype.clear=Bf.prototype.clear=function(){Ci(this.a)},Bf.prototype.__destroy__=function(){Si(this.a)},kf.prototype=Object.create(If.prototype),kf.prototype.constructor=kf,kf.prototype.b=kf,kf.c={},n.ccAllHitsRayResultCallback=kf,kf.prototype.getHitFractions=function(){return df(wi(this.a),Lf)},kf.prototype.getHitNormalWorld=function(){return df(Ti(this.a),yh)},kf.prototype.getHitPointWorld=function(){return df(Pi(this.a),yh)},kf.prototype.getCollisionShapePtrs=function(){return df(Ii(this.a),Bf)},kf.prototype.reset=kf.prototype.reset=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Ri(n,e,t)},kf.prototype.hasHit=function(){return!!Ni(this.a)},kf.prototype.get_m_rayFromWorld=kf.prototype.f=function(){return df(Di(this.a),hh)},kf.prototype.set_m_rayFromWorld=kf.prototype.h=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Mi(t,e)},Object.defineProperty(kf.prototype,"m_rayFromWorld",{get:kf.prototype.f,set:kf.prototype.h}),kf.prototype.get_m_rayToWorld=kf.prototype.g=function(){return df(Oi(this.a),hh)},kf.prototype.set_m_rayToWorld=kf.prototype.i=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),zi(t,e)},Object.defineProperty(kf.prototype,"m_rayToWorld",{get:kf.prototype.g,set:kf.prototype.i}),kf.prototype.__destroy__=function(){Li(this.a)},jf.prototype=Object.create(Pf.prototype),jf.prototype.constructor=jf,jf.prototype.b=jf,jf.c={},n.btCapsuleShape=jf,jf.prototype.setMargin=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ui(t,e)},jf.prototype.getMargin=function(){return Bi(this.a)},jf.prototype.updateProp=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),ki(i,e,t,n)},jf.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ji(t,e)},jf.prototype.getLocalScaling=function(){return df(Gi(this.a),hh)},jf.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Vi(n,e,t)},jf.prototype.isCompound=function(){return!!Hi(this.a)},jf.prototype.getUserIndex=function(){return Wi(this.a)},jf.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),qi(t,e)},jf.prototype.getUserPointerAsInt=function(){return Yi(this.a)},jf.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Xi(t,e)},jf.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Qi(i,e,t,n)},jf.prototype.getLocalBoundingSphere=function(){return Ki(this.a)},jf.prototype.getImplicitShapeDimensions=function(){return df(Zi(this.a),hh)},jf.prototype.__destroy__=function(){Ji(this.a)},Gf.prototype=Object.create(pf.prototype),Gf.prototype.constructor=Gf,Gf.prototype.b=Gf,Gf.c={},n.btBroadphaseProxy=Gf,Gf.prototype.get_m_collisionFilterGroup=Gf.prototype.s=function(){return $i(this.a)},Gf.prototype.set_m_collisionFilterGroup=Gf.prototype.X=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),eo(t,e)},Object.defineProperty(Gf.prototype,"m_collisionFilterGroup",{get:Gf.prototype.s,set:Gf.prototype.X}),Gf.prototype.get_m_collisionFilterMask=Gf.prototype.u=function(){return to(this.a)},Gf.prototype.set_m_collisionFilterMask=Gf.prototype.Y=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),no(t,e)},Object.defineProperty(Gf.prototype,"m_collisionFilterMask",{get:Gf.prototype.u,set:Gf.prototype.Y}),Gf.prototype.__destroy__=function(){io(this.a)},Vf.prototype=Object.create(pf.prototype),Vf.prototype.constructor=Vf,Vf.prototype.b=Vf,Vf.c={},n.btIndexedMesh=Vf,Vf.prototype.get_m_numTriangles=Vf.prototype.L=function(){return oo(this.a)},Vf.prototype.set_m_numTriangles=Vf.prototype.ja=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ao(t,e)},Object.defineProperty(Vf.prototype,"m_numTriangles",{get:Vf.prototype.L,set:Vf.prototype.ja}),Vf.prototype.__destroy__=function(){ro(this.a)},Hf.prototype=Object.create(pf.prototype),Hf.prototype.constructor=Hf,Hf.prototype.b=Hf,Hf.c={},n.btRigidBodyConstructionInfo=Hf,Hf.prototype.get_m_linearDamping=Hf.prototype.G=function(){return lo(this.a)},Hf.prototype.set_m_linearDamping=Hf.prototype.ea=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),_o(t,e)},Object.defineProperty(Hf.prototype,"m_linearDamping",{get:Hf.prototype.G,set:Hf.prototype.ea}),Hf.prototype.get_m_angularDamping=Hf.prototype.m=function(){return uo(this.a)},Hf.prototype.set_m_angularDamping=Hf.prototype.V=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),fo(t,e)},Object.defineProperty(Hf.prototype,"m_angularDamping",{get:Hf.prototype.m,set:Hf.prototype.V}),Hf.prototype.get_m_friction=Hf.prototype.B=function(){return ho(this.a)},Hf.prototype.set_m_friction=Hf.prototype.aa=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),po(t,e)},Object.defineProperty(Hf.prototype,"m_friction",{get:Hf.prototype.B,set:Hf.prototype.aa}),Hf.prototype.get_m_rollingFriction=Hf.prototype.P=function(){return mo(this.a)},Hf.prototype.set_m_rollingFriction=Hf.prototype.na=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),vo(t,e)},Object.defineProperty(Hf.prototype,"m_rollingFriction",{get:Hf.prototype.P,set:Hf.prototype.na}),Hf.prototype.get_m_restitution=Hf.prototype.O=function(){return go(this.a)},Hf.prototype.set_m_restitution=Hf.prototype.ma=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),yo(t,e)},Object.defineProperty(Hf.prototype,"m_restitution",{get:Hf.prototype.O,set:Hf.prototype.ma}),Hf.prototype.get_m_linearSleepingThreshold=Hf.prototype.H=function(){return Ao(this.a)},Hf.prototype.set_m_linearSleepingThreshold=Hf.prototype.fa=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),xo(t,e)},Object.defineProperty(Hf.prototype,"m_linearSleepingThreshold",{get:Hf.prototype.H,set:Hf.prototype.fa}),Hf.prototype.get_m_angularSleepingThreshold=Hf.prototype.o=function(){return bo(this.a)},Hf.prototype.set_m_angularSleepingThreshold=Hf.prototype.W=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Co(t,e)},Object.defineProperty(Hf.prototype,"m_angularSleepingThreshold",{get:Hf.prototype.o,set:Hf.prototype.W}),Hf.prototype.__destroy__=function(){So(this.a)},Wf.prototype=Object.create(pf.prototype),Wf.prototype.constructor=Wf,Wf.prototype.b=Wf,Wf.c={},n.btManifoldPoint=Wf,Wf.prototype.getAppliedImpulse=function(){return Eo(this.a)},Wf.prototype.getDistance=function(){return wo(this.a)},Wf.prototype.getShape0=function(){return df(To(this.a),vf)},Wf.prototype.getShape1=function(){return df(Po(this.a),vf)},Wf.prototype.get_m_localPointA=Wf.prototype.I=function(){return df(Io(this.a),hh)},Wf.prototype.set_m_localPointA=Wf.prototype.ga=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ro(t,e)},Object.defineProperty(Wf.prototype,"m_localPointA",{get:Wf.prototype.I,set:Wf.prototype.ga}),Wf.prototype.get_m_localPointB=Wf.prototype.J=function(){return df(No(this.a),hh)},Wf.prototype.set_m_localPointB=Wf.prototype.ha=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Do(t,e)},Object.defineProperty(Wf.prototype,"m_localPointB",{get:Wf.prototype.J,set:Wf.prototype.ha}),Wf.prototype.get_m_positionWorldOnA=Wf.prototype.M=function(){return df(Mo(this.a),hh)},Wf.prototype.set_m_positionWorldOnA=Wf.prototype.ka=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Oo(t,e)},Object.defineProperty(Wf.prototype,"m_positionWorldOnA",{get:Wf.prototype.M,set:Wf.prototype.ka}),Wf.prototype.get_m_positionWorldOnB=Wf.prototype.N=function(){return df(zo(this.a),hh)},Wf.prototype.set_m_positionWorldOnB=Wf.prototype.la=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Lo(t,e)},Object.defineProperty(Wf.prototype,"m_positionWorldOnB",{get:Wf.prototype.N,set:Wf.prototype.la}),Wf.prototype.get_m_normalWorldOnB=Wf.prototype.K=function(){return df(Fo(this.a),hh)},Wf.prototype.set_m_normalWorldOnB=Wf.prototype.ia=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Uo(t,e)},Object.defineProperty(Wf.prototype,"m_normalWorldOnB",{get:Wf.prototype.K,set:Wf.prototype.ia}),Wf.prototype.get_m_distance1=Wf.prototype.A=function(){return Bo(this.a)},Wf.prototype.set_m_distance1=Wf.prototype.$=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ko(t,e)},Object.defineProperty(Wf.prototype,"m_distance1",{get:Wf.prototype.A,set:Wf.prototype.$}),Wf.prototype.get_m_index0=Wf.prototype.D=function(){return jo(this.a)},Wf.prototype.set_m_index0=Wf.prototype.ca=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Go(t,e)},Object.defineProperty(Wf.prototype,"m_index0",{get:Wf.prototype.D,set:Wf.prototype.ca}),Wf.prototype.get_m_index1=Wf.prototype.F=function(){return Vo(this.a)},Wf.prototype.set_m_index1=Wf.prototype.da=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ho(t,e)},Object.defineProperty(Wf.prototype,"m_index1",{get:Wf.prototype.F,set:Wf.prototype.da}),Wf.prototype.__destroy__=function(){Wo(this.a)},qf.prototype=Object.create(pf.prototype),qf.prototype.constructor=qf,qf.prototype.b=qf,qf.c={},n.btSequentialImpulseConstraintSolver=qf,qf.prototype.__destroy__=function(){Yo(this.a)},Yf.prototype=Object.create(Of.prototype),Yf.prototype.constructor=Yf,Yf.prototype.b=Yf,Yf.c={},n.btPoint2PointConstraint=Yf,Yf.prototype.setPivotA=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ko(t,e)},Yf.prototype.setPivotB=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Zo(t,e)},Yf.prototype.getPivotInA=function(){return df(Jo(this.a),hh)},Yf.prototype.getPivotInB=function(){return df($o(this.a),hh)},Yf.prototype.enableFeedback=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ea(t,e)},Yf.prototype.getBreakingImpulseThreshold=function(){return ta(this.a)},Yf.prototype.setBreakingImpulseThreshold=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),na(t,e)},Yf.prototype.getParam=function(e,t){var n=this.a;return e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),ia(n,e,t)},Yf.prototype.setParam=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),oa(i,e,t,n)},Yf.prototype.get_m_setting=Yf.prototype.R=function(){return df(aa(this.a),vh)},Yf.prototype.set_m_setting=Yf.prototype.oa=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ra(t,e)},Object.defineProperty(Yf.prototype,"m_setting",{get:Yf.prototype.R,set:Yf.prototype.oa}),Yf.prototype.__destroy__=function(){sa(this.a)},Xf.prototype=Object.create(yf.prototype),Xf.prototype.constructor=Xf,Xf.prototype.b=Xf,Xf.c={},n.btConvexTriangleMeshShape=Xf,Xf.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),_a(t,e)},Xf.prototype.getLocalScaling=function(){return df(ua(this.a),hh)},Xf.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),fa(n,e,t)},Xf.prototype.setMargin=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ha(t,e)},Xf.prototype.getMargin=function(){return pa(this.a)},Xf.prototype.isCompound=function(){return!!ma(this.a)},Xf.prototype.getUserIndex=function(){return da(this.a)},Xf.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),va(t,e)},Xf.prototype.getUserPointerAsInt=function(){return ga(this.a)},Xf.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ya(t,e)},Xf.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Aa(i,e,t,n)},Xf.prototype.getLocalBoundingSphere=function(){return xa(this.a)},Xf.prototype.__destroy__=function(){ba(this.a)},Qf.prototype=Object.create(Nf.prototype),Qf.prototype.constructor=Qf,Qf.prototype.b=Qf,Qf.c={},n.ccClosestRayResultCallback=Qf,Qf.prototype.getHitNormalWorld=function(){return df(Sa(this.a),hh)},Qf.prototype.getHitPointWorld=function(){return df(Ea(this.a),hh)},Qf.prototype.getCollisionShapePtr=function(){return wa(this.a)},Qf.prototype.getClosestHitFraction=function(){return Ta(this.a)},Qf.prototype.reset=Qf.prototype.reset=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Pa(n,e,t)},Qf.prototype.hasHit=function(){return!!Ia(this.a)},Qf.prototype.get_m_rayFromWorld=Qf.prototype.f=function(){return df(Ra(this.a),hh)},Qf.prototype.set_m_rayFromWorld=Qf.prototype.h=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Na(t,e)},Object.defineProperty(Qf.prototype,"m_rayFromWorld",{get:Qf.prototype.f,set:Qf.prototype.h}),Qf.prototype.get_m_rayToWorld=Qf.prototype.g=function(){return df(Da(this.a),hh)},Qf.prototype.set_m_rayToWorld=Qf.prototype.i=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ma(t,e)},Object.defineProperty(Qf.prototype,"m_rayToWorld",{get:Qf.prototype.g,set:Qf.prototype.i}),Qf.prototype.__destroy__=function(){Oa(this.a)},Kf.prototype=Object.create(bf.prototype),Kf.prototype.constructor=Kf,Kf.prototype.b=Kf,Kf.c={},n.btHeightfieldTerrainShape=Kf,Kf.prototype.setMargin=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),La(t,e)},Kf.prototype.getMargin=function(){return Fa(this.a)},Kf.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ua(t,e)},Kf.prototype.getLocalScaling=function(){return df(Ba(this.a),hh)},Kf.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),ka(n,e,t)},Kf.prototype.isCompound=function(){return!!ja(this.a)},Kf.prototype.getUserIndex=function(){return Ga(this.a)},Kf.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Va(t,e)},Kf.prototype.getUserPointerAsInt=function(){return Ha(this.a)},Kf.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Wa(t,e)},Kf.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),qa(i,e,t,n)},Kf.prototype.getLocalBoundingSphere=function(){return Ya(this.a)},Kf.prototype.__destroy__=function(){Xa(this.a)},Zf.prototype=Object.create(pf.prototype),Zf.prototype.constructor=Zf,Zf.prototype.b=Zf,Zf.c={},n.VoidPtr=Zf,Zf.prototype.__destroy__=function(){Qa(this.a)},Jf.prototype=Object.create(pf.prototype),Jf.prototype.constructor=Jf,Jf.prototype.b=Jf,Jf.c={},n.btDefaultCollisionConfiguration=Jf,Jf.prototype.__destroy__=function(){Ja(this.a)},$f.prototype=Object.create(Cf.prototype),$f.prototype.constructor=$f,$f.prototype.b=$f,$f.c={},n.btTriangleMesh=$f,$f.prototype.addTriangle=function(e,t,n,i){var o=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),void 0===i?nr(o,e,t,n):ir(o,e,t,n,i)},$f.prototype.addTriangleIndices=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),or(i,e,t,n)},$f.prototype.getIndexedMeshArray=function(){return df(ar(this.a),Ch)},$f.prototype.setScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),rr(t,e)},$f.prototype.__destroy__=function(){sr(this.a)},eh.prototype=Object.create(pf.prototype),eh.prototype.constructor=eh,eh.prototype.b=eh,eh.c={},n.btCollisionConfiguration=eh,eh.prototype.__destroy__=function(){cr(this.a)},th.prototype=Object.create(pf.prototype),th.prototype.constructor=th,th.prototype.b=th,th.c={},n.btPersistentManifold=th,th.prototype.getBody0=function(){return df(_r(this.a),Ef)},th.prototype.getBody1=function(){return df(ur(this.a),Ef)},th.prototype.getNumContacts=function(){return fr(this.a)},th.prototype.getContactPoint=function(e){var t=this.a;return e&&"object"==typeof e&&(e=e.a),df(hr(t,e),Wf)},th.prototype.__destroy__=function(){pr(this.a)},nh.prototype=Object.create(Pf.prototype),nh.prototype.constructor=nh,nh.prototype.b=nh,nh.c={},n.btBoxShape=nh,nh.prototype.setMargin=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),dr(t,e)},nh.prototype.getMargin=function(){return vr(this.a)},nh.prototype.setUnscaledHalfExtents=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),gr(t,e)},nh.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),yr(t,e)},nh.prototype.getLocalScaling=function(){return df(Ar(this.a),hh)},nh.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),xr(n,e,t)},nh.prototype.isCompound=function(){return!!br(this.a)},nh.prototype.getUserIndex=function(){return Cr(this.a)},nh.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Sr(t,e)},nh.prototype.getUserPointerAsInt=function(){return Er(this.a)},nh.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),wr(t,e)},nh.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Tr(i,e,t,n)},nh.prototype.getLocalBoundingSphere=function(){return Pr(this.a)},nh.prototype.getImplicitShapeDimensions=function(){return df(Ir(this.a),hh)},nh.prototype.__destroy__=function(){Rr(this.a)},ih.prototype=Object.create(Rf.prototype),ih.prototype.constructor=ih,ih.prototype.b=ih,ih.c={},n.btCollisionDispatcher=ih,ih.prototype.setDispatcherFlags=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Dr(t,e)},ih.prototype.getNumManifolds=function(){return Mr(this.a)},ih.prototype.getManifoldByIndexInternal=function(e){var t=this.a;return e&&"object"==typeof e&&(e=e.a),df(Or(t,e),th)},ih.prototype.__destroy__=function(){zr(this.a)},oh.prototype=Object.create(vf.prototype),oh.prototype.constructor=oh,oh.prototype.b=oh,oh.c={},n.btCompoundShape=oh,oh.prototype.addChildShape=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Ur(n,e,t)},oh.prototype.removeChildShape=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Br(t,e)},oh.prototype.removeChildShapeByIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),kr(t,e)},oh.prototype.getNumChildShapes=function(){return jr(this.a)},oh.prototype.getChildShape=function(e){var t=this.a;return e&&"object"==typeof e&&(e=e.a),df(Gr(t,e),vf)},oh.prototype.updateChildTransform=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),void 0===n?Vr(i,e,t):Hr(i,e,t,n)},oh.prototype.setMargin=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Wr(t,e)},oh.prototype.getMargin=function(){return qr(this.a)},oh.prototype.setMaterial=function(e,t,n,i,o,a){var r=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),o&&"object"==typeof o&&(o=o.a),a&&"object"==typeof a&&(a=a.a),void 0===i?Yr(r,e,t,n):void 0===o?Xr(r,e,t,n,i):void 0===a?Qr(r,e,t,n,i,o):Kr(r,e,t,n,i,o,a)},oh.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Zr(t,e)},oh.prototype.getLocalScaling=function(){return df(Jr(this.a),hh)},oh.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),$r(n,e,t)},oh.prototype.isCompound=function(){return!!es(this.a)},oh.prototype.getUserIndex=function(){return ts(this.a)},oh.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ns(t,e)},oh.prototype.getUserPointerAsInt=function(){return is(this.a)},oh.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),os(t,e)},oh.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),as(i,e,t,n)},oh.prototype.getLocalBoundingSphere=function(){return rs(this.a)},oh.prototype.__destroy__=function(){ss(this.a)},ah.prototype=Object.create(Tf.prototype),ah.prototype.constructor=ah,ah.prototype.b=ah,ah.c={},n.btDefaultMotionState=ah,ah.prototype.getWorldTransform=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),us(t,e)},ah.prototype.setWorldTransform=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),fs(t,e)},ah.prototype.__destroy__=function(){hs(this.a)},rh.prototype=Object.create(Of.prototype),rh.prototype.constructor=rh,rh.prototype.b=rh,rh.c={},n.btHingeConstraint=rh,rh.prototype.setLimit=function(e,t,n,i,o){var a=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),o&&"object"==typeof o&&(o=o.a),void 0===o?ds(a,e,t,n,i):vs(a,e,t,n,i,o)},rh.prototype.enableAngularMotor=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),gs(i,e,t,n)},rh.prototype.setAngularOnly=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ys(t,e)},rh.prototype.enableMotor=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),As(t,e)},rh.prototype.setMaxMotorImpulse=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),xs(t,e)},rh.prototype.setMotorTarget=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),bs(n,e,t)},rh.prototype.setFrames=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Cs(n,e,t)},rh.prototype.setAxis=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ss(t,e)},rh.prototype.setUseReferenceFrameA=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Es(t,e)},rh.prototype.enableFeedback=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ws(t,e)},rh.prototype.getBreakingImpulseThreshold=function(){return Ts(this.a)},rh.prototype.setBreakingImpulseThreshold=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ps(t,e)},rh.prototype.getParam=function(e,t){var n=this.a;return e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Is(n,e,t)},rh.prototype.setParam=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Rs(i,e,t,n)},rh.prototype.__destroy__=function(){Ns(this.a)},sh.prototype=Object.create(Mf.prototype),sh.prototype.constructor=sh,sh.prototype.b=sh,sh.c={},n.btQuaternion=sh,sh.prototype.setValue=function(e,t,n,i){var o=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),Ms(o,e,t,n,i)},sh.prototype.x=sh.prototype.x=function(){return Os(this.a)},sh.prototype.y=sh.prototype.y=function(){return zs(this.a)},sh.prototype.z=sh.prototype.z=function(){return Ls(this.a)},sh.prototype.w=function(){return Fs(this.a)},sh.prototype.setX=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Us(t,e)},sh.prototype.setY=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Bs(t,e)},sh.prototype.setZ=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ks(t,e)},sh.prototype.setW=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),js(t,e)},sh.prototype.__destroy__=function(){Gs(this.a)},ch.prototype=Object.create(Pf.prototype),ch.prototype.constructor=ch,ch.prototype.b=ch,ch.c={},n.btConeShape=ch,ch.prototype.setRadius=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Hs(t,e)},ch.prototype.setHeight=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ws(t,e)},ch.prototype.setConeUpIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),qs(t,e)},ch.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ys(t,e)},ch.prototype.getLocalScaling=function(){return df(Xs(this.a),hh)},ch.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Qs(n,e,t)},ch.prototype.isCompound=function(){return!!Ks(this.a)},ch.prototype.getUserIndex=function(){return Zs(this.a)},ch.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Js(t,e)},ch.prototype.getUserPointerAsInt=function(){return $s(this.a)},ch.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ec(t,e)},ch.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),tc(i,e,t,n)},ch.prototype.getLocalBoundingSphere=function(){return nc(this.a)},ch.prototype.getImplicitShapeDimensions=function(){return df(ic(this.a),hh)},ch.prototype.__destroy__=function(){oc(this.a)},lh.prototype=Object.create(yf.prototype),lh.prototype.constructor=lh,lh.prototype.b=lh,lh.c={},n.btBU_Simplex1to4=lh,lh.prototype.addVertex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),rc(t,e)},lh.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),sc(t,e)},lh.prototype.getLocalScaling=function(){return df(cc(this.a),hh)},lh.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),lc(n,e,t)},lh.prototype.isCompound=function(){return!!_c(this.a)},lh.prototype.getUserIndex=function(){return uc(this.a)},lh.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),fc(t,e)},lh.prototype.getUserPointerAsInt=function(){return hc(this.a)},lh.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),pc(t,e)},lh.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),mc(i,e,t,n)},lh.prototype.getLocalBoundingSphere=function(){return dc(this.a)},lh.prototype.__destroy__=function(){vc(this.a)},_h.prototype=Object.create(bf.prototype),_h.prototype.constructor=_h,_h.prototype.b=_h,_h.c={},n.btStaticPlaneShape=_h,_h.prototype.getPlaneNormal=function(){return df(yc(this.a),hh)},_h.prototype.setPlaneConstant=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ac(t,e)},_h.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),xc(t,e)},_h.prototype.getLocalScaling=function(){return df(bc(this.a),hh)},_h.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Cc(n,e,t)},_h.prototype.isCompound=function(){return!!Sc(this.a)},_h.prototype.getUserIndex=function(){return Ec(this.a)},_h.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),wc(t,e)},_h.prototype.getUserPointerAsInt=function(){return Tc(this.a)},_h.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Pc(t,e)},_h.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Ic(i,e,t,n)},_h.prototype.getLocalBoundingSphere=function(){return Rc(this.a)},_h.prototype.__destroy__=function(){Nc(this.a)},uh.prototype=Object.create(pf.prototype),uh.prototype.constructor=uh,uh.prototype.b=uh,uh.c={},n.btActionInterface=uh,uh.prototype.updateAction=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Dc(n,e,t)},uh.prototype.__destroy__=function(){Mc(this.a)},fh.prototype=Object.create(pf.prototype),fh.prototype.constructor=fh,fh.prototype.b=fh,fh.c={},n.btOverlappingPairCache=fh,fh.prototype.__destroy__=function(){Oc(this.a)},hh.prototype=Object.create(pf.prototype),hh.prototype.constructor=hh,hh.prototype.b=hh,hh.c={},n.btVector3=hh,hh.prototype.x=hh.prototype.x=function(){return Fc(this.a)},hh.prototype.y=hh.prototype.y=function(){return Uc(this.a)},hh.prototype.z=hh.prototype.z=function(){return Bc(this.a)},hh.prototype.setX=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),kc(t,e)},hh.prototype.setY=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),jc(t,e)},hh.prototype.setZ=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Gc(t,e)},hh.prototype.setValue=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Vc(i,e,t,n)},hh.prototype.__destroy__=function(){Hc(this.a)},ph.prototype=Object.create(Pf.prototype),ph.prototype.constructor=ph,ph.prototype.b=ph,ph.c={},n.btSphereShape=ph,ph.prototype.setMargin=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),qc(t,e)},ph.prototype.getMargin=function(){return Yc(this.a)},ph.prototype.setUnscaledRadius=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Xc(t,e)},ph.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Qc(t,e)},ph.prototype.getLocalScaling=function(){return df(Kc(this.a),hh)},ph.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Zc(n,e,t)},ph.prototype.isCompound=function(){return!!Jc(this.a)},ph.prototype.getUserIndex=function(){return $c(this.a)},ph.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),el(t,e)},ph.prototype.getUserPointerAsInt=function(){return tl(this.a)},ph.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),nl(t,e)},ph.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),il(i,e,t,n)},ph.prototype.getLocalBoundingSphere=function(){return ol(this.a)},ph.prototype.getImplicitShapeDimensions=function(){return df(al(this.a),hh)},ph.prototype.__destroy__=function(){rl(this.a)},mh.prototype=Object.create(pf.prototype),mh.prototype.constructor=mh,mh.prototype.b=mh,mh.c={},n.btDefaultCollisionConstructionInfo=mh,mh.prototype.__destroy__=function(){cl(this.a)},dh.prototype=Object.create(bf.prototype),dh.prototype.constructor=dh,dh.prototype.b=dh,dh.c={},n.btEmptyShape=dh,dh.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),_l(t,e)},dh.prototype.getLocalScaling=function(){return df(ul(this.a),hh)},dh.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),fl(n,e,t)},dh.prototype.isCompound=function(){return!!hl(this.a)},dh.prototype.getUserIndex=function(){return pl(this.a)},dh.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ml(t,e)},dh.prototype.getUserPointerAsInt=function(){return dl(this.a)},dh.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),vl(t,e)},dh.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),gl(i,e,t,n)},dh.prototype.getLocalBoundingSphere=function(){return yl(this.a)},dh.prototype.__destroy__=function(){Al(this.a)},vh.prototype=Object.create(pf.prototype),vh.prototype.constructor=vh,vh.prototype.b=vh,vh.c={},n.btConstraintSetting=vh,vh.prototype.get_m_tau=vh.prototype.T=function(){return bl(this.a)},vh.prototype.set_m_tau=vh.prototype.qa=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Cl(t,e)},Object.defineProperty(vh.prototype,"m_tau",{get:vh.prototype.T,set:vh.prototype.qa}),vh.prototype.get_m_damping=vh.prototype.v=function(){return Sl(this.a)},vh.prototype.set_m_damping=vh.prototype.Z=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),El(t,e)},Object.defineProperty(vh.prototype,"m_damping",{get:vh.prototype.v,set:vh.prototype.Z}),vh.prototype.get_m_impulseClamp=vh.prototype.C=function(){return wl(this.a)},vh.prototype.set_m_impulseClamp=vh.prototype.ba=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Tl(t,e)},Object.defineProperty(vh.prototype,"m_impulseClamp",{get:vh.prototype.C,set:vh.prototype.ba}),vh.prototype.__destroy__=function(){Pl(this.a)},gh.prototype=Object.create(pf.prototype),gh.prototype.constructor=gh,gh.prototype.b=gh,gh.c={},n.LocalShapeInfo=gh,gh.prototype.get_m_shapePart=gh.prototype.S=function(){return Il(this.a)},gh.prototype.set_m_shapePart=gh.prototype.pa=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Rl(t,e)},Object.defineProperty(gh.prototype,"m_shapePart",{get:gh.prototype.S,set:gh.prototype.pa}),gh.prototype.get_m_triangleIndex=gh.prototype.U=function(){return Nl(this.a)},gh.prototype.set_m_triangleIndex=gh.prototype.ra=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Dl(t,e)},Object.defineProperty(gh.prototype,"m_triangleIndex",{get:gh.prototype.U,set:gh.prototype.ra}),gh.prototype.__destroy__=function(){Ml(this.a)},yh.prototype=Object.create(pf.prototype),yh.prototype.constructor=yh,yh.prototype.b=yh,yh.c={},n.btVector3Array=yh,yh.prototype.size=yh.prototype.size=function(){return Ol(this.a)},yh.prototype.at=function(e){var t=this.a;return e&&"object"==typeof e&&(e=e.a),df(zl(t,e),hh)},yh.prototype.clear=yh.prototype.clear=function(){Ll(this.a)},yh.prototype.__destroy__=function(){Fl(this.a)},Ah.prototype=Object.create(pf.prototype),Ah.prototype.constructor=Ah,Ah.prototype.b=Ah,Ah.c={},n.btConstraintSolver=Ah,Ah.prototype.__destroy__=function(){Ul(this.a)},xh.prototype=Object.create(Of.prototype),xh.prototype.constructor=xh,xh.prototype.b=xh,xh.c={},n.btFixedConstraint=xh,xh.prototype.enableFeedback=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),kl(t,e)},xh.prototype.getBreakingImpulseThreshold=function(){return jl(this.a)},xh.prototype.setBreakingImpulseThreshold=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Gl(t,e)},xh.prototype.getParam=function(e,t){var n=this.a;return e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Vl(n,e,t)},xh.prototype.setParam=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Hl(i,e,t,n)},xh.prototype.__destroy__=function(){Wl(this.a)},bh.prototype=Object.create(Ef.prototype),bh.prototype.constructor=bh,bh.prototype.b=bh,bh.c={},n.btRigidBody=bh,bh.prototype.getCenterOfMassTransform=function(){return df(Yl(this.a),Eh)},bh.prototype.setCenterOfMassTransform=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Xl(t,e)},bh.prototype.setSleepingThresholds=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Ql(n,e,t)},bh.prototype.getLinearSleepingThreshold=function(){return Kl(this.a)},bh.prototype.setDamping=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Zl(n,e,t)},bh.prototype.setMassProps=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Jl(n,e,t)},bh.prototype.getLinearFactor=function(){return df($l(this.a),hh)},bh.prototype.setLinearFactor=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),e_(t,e)},bh.prototype.applyTorque=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),t_(t,e)},bh.prototype.applyForce=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n_(n,e,t)},bh.prototype.applyCentralForce=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),i_(t,e)},bh.prototype.applyTorqueImpulse=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),o_(t,e)},bh.prototype.applyImpulse=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),a_(n,e,t)},bh.prototype.updateInertiaTensor=function(){r_(this.a)},bh.prototype.getLinearVelocity=function(){return df(s_(this.a),hh)},bh.prototype.getAngularVelocity=function(){return df(c_(this.a),hh)},bh.prototype.setLinearVelocity=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),l_(t,e)},bh.prototype.setAngularVelocity=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),__(t,e)},bh.prototype.getMotionState=function(){return df(u_(this.a),Tf)},bh.prototype.getAngularFactor=function(){return df(f_(this.a),hh)},bh.prototype.setAngularFactor=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),h_(t,e)},bh.prototype.getAabb=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),p_(n,e,t)},bh.prototype.setGravity=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),m_(t,e)},bh.prototype.getFlags=function(){return d_(this.a)},bh.prototype.setFlags=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),v_(t,e)},bh.prototype.wantsSleeping=function(){return!!g_(this.a)},bh.prototype.clearForces=function(){y_(this.a)},bh.prototype.getTotalForce=function(){return df(A_(this.a),hh)},bh.prototype.getTotalTorque=function(){return df(x_(this.a),hh)},bh.prototype.clearState=function(){b_(this.a)},bh.prototype.getCollisionShape=function(){return df(C_(this.a),vf)},bh.prototype.getActivationState=function(){return S_(this.a)},bh.prototype.setActivationState=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),E_(t,e)},bh.prototype.forceActivationState=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),w_(t,e)},bh.prototype.activate=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),void 0===e?T_(t):P_(t,e)},bh.prototype.isActive=function(){return!!I_(this.a)},bh.prototype.isKinematicObject=function(){return!!R_(this.a)},bh.prototype.isStaticObject=function(){return!!N_(this.a)},bh.prototype.isStaticOrKinematicObject=function(){return!!D_(this.a)},bh.prototype.setRestitution=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),M_(t,e)},bh.prototype.setFriction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),O_(t,e)},bh.prototype.setRollingFriction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),z_(t,e)},bh.prototype.setSpinningFriction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),L_(t,e)},bh.prototype.getWorldTransform=function(){return df(F_(this.a),Eh)},bh.prototype.getCollisionFlags=function(){return U_(this.a)},bh.prototype.setCollisionFlags=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),B_(t,e)},bh.prototype.setWorldTransform=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),k_(t,e)},bh.prototype.setCollisionShape=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),j_(t,e)},bh.prototype.setCcdMotionThreshold=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),G_(t,e)},bh.prototype.setCcdSweptSphereRadius=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),V_(t,e)},bh.prototype.getUserIndex=function(){return H_(this.a)},bh.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),W_(t,e)},bh.prototype.setUserIndex2=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),q_(t,e)},bh.prototype.setIgnoreCollisionCheck=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Y_(n,e,t)},bh.prototype.__destroy__=function(){X_(this.a)},Ch.prototype=Object.create(pf.prototype),Ch.prototype.constructor=Ch,Ch.prototype.b=Ch,Ch.c={},n.btIndexedMeshArray=Ch,Ch.prototype.size=Ch.prototype.size=function(){return Q_(this.a)},Ch.prototype.at=function(e){var t=this.a;return e&&"object"==typeof e&&(e=e.a),df(K_(t,e),Vf)},Ch.prototype.__destroy__=function(){Z_(this.a)},Sh.prototype=Object.create(wf.prototype),Sh.prototype.constructor=Sh,Sh.prototype.b=Sh,Sh.c={},n.ccDiscreteDynamicsWorld=Sh,Sh.prototype.setAllowSleep=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),$_(t,e)},Sh.prototype.setDeactivationTime=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),eu(t,e)},Sh.prototype.setNarrowPhaseMethod=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),tu(t,e)},Sh.prototype.setAllowCcdPenetration=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),nu(t,e)},Sh.prototype.setCcdCastCheckResponse=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),iu(t,e)},Sh.prototype.getCcdTriggerRecorder=function(){return df(ou(this.a),Bf)},Sh.prototype.rayTest=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),au(i,e,t,n)},Sh.prototype.rayTestSingle=function(e,t,n,i,o,a){var r=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),i&&"object"==typeof i&&(i=i.a),o&&"object"==typeof o&&(o=o.a),a&&"object"==typeof a&&(a=a.a),ru(r,e,t,n,i,o,a)},Sh.prototype.addCollisionObject=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),void 0===t?su(i,e):void 0===n?cu(i,e,t):lu(i,e,t,n)},Sh.prototype.removeCollisionObject=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),_u(t,e)},Sh.prototype.setContactBreakingThreshold=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),uu(t,e)},Sh.prototype.setGravity=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),fu(t,e)},Sh.prototype.getGravity=function(){return df(hu(this.a),hh)},Sh.prototype.addRigidBody=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),void 0===t?pu(i,e):void 0===n?_a582_2(i,e,t):mu(i,e,t,n)},Sh.prototype.removeRigidBody=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),du(t,e)},Sh.prototype.addConstraint=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),void 0===t?vu(n,e):gu(n,e,t)},Sh.prototype.removeConstraint=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),yu(t,e)},Sh.prototype.stepSimulation=function(e,t,n){var i=this.a;return e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),void 0===t?Au(i,e):void 0===n?xu(i,e,t):bu(i,e,t,n)},Sh.prototype.addAction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Cu(t,e)},Sh.prototype.removeAction=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Su(t,e)},Sh.prototype.getFixedBody=function(){return df(Eu(this.a),bh)},Sh.prototype.__destroy__=function(){wu(this.a)},Eh.prototype=Object.create(pf.prototype),Eh.prototype.constructor=Eh,Eh.prototype.b=Eh,Eh.c={},n.btTransform=Eh,Eh.prototype.setIdentity=function(){Iu(this.a)},Eh.prototype.setOrigin=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Ru(t,e)},Eh.prototype.setRotation=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Nu(t,e)},Eh.prototype.getOrigin=function(){return df(Du(this.a),hh)},Eh.prototype.getRotation=function(){return df(Mu(this.a),sh)},Eh.prototype.getBasis=function(){return df(Ou(this.a),zf)},Eh.prototype.inverse=Eh.prototype.inverse=function(){return df(zu(this.a),Eh)},Eh.prototype.op_mul=function(e){var t=this.a;return e&&"object"==typeof e&&(e=e.a),df(Lu(t,e),Eh)},Eh.prototype.__destroy__=function(){Fu(this.a)},wh.prototype=Object.create(Pf.prototype),wh.prototype.constructor=wh,wh.prototype.b=wh,wh.c={},n.btCylinderShape=wh,wh.prototype.setMargin=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Bu(t,e)},wh.prototype.getMargin=function(){return ku(this.a)},wh.prototype.updateProp=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),ju(i,e,t,n)},wh.prototype.setLocalScaling=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Gu(t,e)},wh.prototype.getLocalScaling=function(){return df(Vu(this.a),hh)},wh.prototype.calculateLocalInertia=function(e,t){var n=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),Hu(n,e,t)},wh.prototype.isCompound=function(){return!!Wu(this.a)},wh.prototype.getUserIndex=function(){return qu(this.a)},wh.prototype.setUserIndex=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Yu(t,e)},wh.prototype.getUserPointerAsInt=function(){return Xu(this.a)},wh.prototype.setUserPointerAsInt=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),Qu(t,e)},wh.prototype.getAabb=function(e,t,n){var i=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),n&&"object"==typeof n&&(n=n.a),Ku(i,e,t,n)},wh.prototype.getLocalBoundingSphere=function(){return Zu(this.a)},wh.prototype.getImplicitShapeDimensions=function(){return df(Ju(this.a),hh)},wh.prototype.__destroy__=function(){$u(this.a)},function(){function e(){n.BT_CONSTRAINT_ERP=ef(),n.BT_CONSTRAINT_STOP_ERP=tf(),n.BT_CONSTRAINT_CFM=nf(),n.BT_CONSTRAINT_STOP_CFM=of(),n.PHY_FLOAT=af(),n.PHY_DOUBLE=rf(),n.PHY_INTEGER=sf(),n.PHY_SHORT=cf(),n.PHY_FIXEDPOINT88=lf(),n.PHY_UCHAR=_f()}N?e():I.unshift(e)}(),this.Ammo=n,e.ready});e.exports=n}));const qM=e("dS",{});function YM(e){const t={};return void 0!==e&&(qM.wasmBinary=e),new Promise((e=>{WM.call(t,qM).then((()=>{e()}))}))}var XM;(XM=YM||(YM=e("gd",{}))).isWasm=!1,XM.wasmBinaryURL=""}}}));
